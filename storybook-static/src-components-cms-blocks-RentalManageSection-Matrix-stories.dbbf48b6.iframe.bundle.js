"use strict";(self.webpackChunkcms_monorepo=self.webpackChunkcms_monorepo||[]).push([[9022],{"./packages/ui/src/components/cms/blocks/RentalManageSection.Matrix.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,ErrorState:()=>ErrorState,__namedExportsOrder:()=>__namedExportsOrder,default:()=>RentalManageSection_Matrix_stories});var RentalManageSection=__webpack_require__("./packages/ui/src/components/cms/blocks/RentalManageSection.tsx"),createStories=__webpack_require__("./packages/ui/src/story-utils/createStories.ts");const RentalManageSection_fixtures_namespaceObject=JSON.parse('{"rentalId":"rent-123"}');var types=__webpack_require__("./node_modules/.pnpm/zod@3.25.73/node_modules/zod/v3/types.js"),console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const meta={title:"CMS Blocks/RentalManageSection/Matrix",component:RentalManageSection.A,tags:["autodocs"],args:{...RentalManageSection_fixtures_namespaceObject}},RentalManageSection_Matrix_stories=meta,baseArgs=meta.args;try{types.Ik({rentalId:types.Yj().optional()}).parse(RentalManageSection_fixtures_namespaceObject)}catch(e){console.error("Invalid RentalManageSection fixture:",e)}const Default=(0,createStories.T)(baseArgs,{adapter:async()=>({ok:!0,message:"Updated"})},"default",{a11y:!0,viewports:["desktop"],tags:["visual"]}),ErrorState=(0,createStories.T)(baseArgs,{adapter:async()=>({ok:!1,message:"Failed"})},"default",{a11y:!0,viewports:["desktop"],tags:["visual"]}),__namedExportsOrder=["Default","ErrorState"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"makeStateStory(baseArgs, {\n  adapter: okAdapter\n}, 'default', {\n  a11y: true,\n  viewports: ['desktop'],\n  tags: ['visual']\n})",...Default.parameters?.docs?.source}}},ErrorState.parameters={...ErrorState.parameters,docs:{...ErrorState.parameters?.docs,source:{originalSource:"makeStateStory(baseArgs, {\n  adapter: failAdapter\n}, 'default', {\n  a11y: true,\n  viewports: ['desktop'],\n  tags: ['visual']\n})",...ErrorState.parameters?.docs?.source}}}},"./packages/ui/src/components/cms/blocks/RentalManageSection.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>RentalManageSection});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js");const t=s=>s;function RentalManageSection({rentalId,adapter,className,...rest}){const[date,setDate]=react__WEBPACK_IMPORTED_MODULE_1__.useState(""),[status,setStatus]=react__WEBPACK_IMPORTED_MODULE_1__.useState("idle"),[message,setMessage]=react__WEBPACK_IMPORTED_MODULE_1__.useState(void 0);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("section",{className,...rest,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mx-auto w-full space-y-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"text-lg font-semibold",children:t("Manage rental")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{className:"text-sm",children:t("New return date")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"date",value:date,onChange:e=>setDate(e.target.value),className:"w-60 rounded border px-2 py-1"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"button",onClick:async()=>{if(adapter){setStatus("loading");try{const res=await adapter({action:"extend",rentalId,newReturnDate:date});setStatus(res.ok?"ok":"error"),setMessage(res.message)}catch(e){setStatus("error"),setMessage(t("Could not extend rental."))}}},disabled:!adapter||!date||"loading"===status,className:"rounded border px-3 py-1 text-sm disabled:opacity-50 min-h-10 min-w-10",children:t("Extend")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"button",onClick:async()=>{if(adapter){setStatus("loading");try{const res=await adapter({action:"return",rentalId});setStatus(res.ok?"ok":"error"),setMessage(res.message)}catch(e){setStatus("error"),setMessage(t("Could not start return."))}}},disabled:!adapter||"loading"===status,className:"rounded border px-3 py-1 text-sm disabled:opacity-50 min-h-10 min-w-10",children:t("Start return")})]}),"loading"===status?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-xs text-neutral-600",children:t("Working…")}):null,"ok"===status?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"text-xs text-emerald-700",children:[t("Success"),message?` — ${message}`:""]}):null,"error"===status?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"text-xs text-red-600",children:[t("Error"),message?` — ${message}`:""]}):null]})})}RentalManageSection.__docgenInfo={description:"",methods:[],displayName:"RentalManageSection",props:{rentalId:{required:!1,tsType:{name:"string"},description:""},adapter:{required:!1,tsType:{name:"signature",type:"function",raw:'(req: { action: "extend" | "return"; rentalId?: string; newReturnDate?: string }) => Promise<{ ok: boolean; message?: string }>',signature:{arguments:[{type:{name:"signature",type:"object",raw:'{ action: "extend" | "return"; rentalId?: string; newReturnDate?: string }',signature:{properties:[{key:"action",value:{name:"union",raw:'"extend" | "return"',elements:[{name:"literal",value:'"extend"'},{name:"literal",value:'"return"'}],required:!0}},{key:"rentalId",value:{name:"string",required:!1}},{key:"newReturnDate",value:{name:"string",required:!1}}]}},name:"req"}],return:{name:"Promise",elements:[{name:"signature",type:"object",raw:"{ ok: boolean; message?: string }",signature:{properties:[{key:"ok",value:{name:"boolean",required:!0}},{key:"message",value:{name:"string",required:!1}}]}}],raw:"Promise<{ ok: boolean; message?: string }>"}}},description:""}}}},"./packages/ui/src/story-utils/createStories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function makeStateStory(base,patch,state,opts={}){const{a11y=!0,critical=!1,rtl=!1,viewports=[],tags=[],docsDescription}=opts,parameters={a11y:{disable:!a11y},dataState:state};rtl&&(parameters.rtl=!0),viewports.length&&(parameters.viewport={defaultViewport:viewports[0]}),docsDescription&&(parameters.docs={description:{story:docsDescription}});const computedTags=["autodocs",a11y?"a11y":"no-a11y",critical?"critical":"noncritical",...tags];parameters.chromatic={disable:!computedTags.includes("visual")};return{args:{...base,...patch},parameters,tags:computedTags}}__webpack_require__.d(__webpack_exports__,{T:()=>makeStateStory})}}]);