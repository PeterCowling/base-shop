(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2932],{1531:(e,s,t)=>{Promise.resolve().then(t.bind(t,5786)),Promise.resolve().then(t.bind(t,6423)),Promise.resolve().then(t.bind(t,368)),Promise.resolve().then(t.bind(t,8634)),Promise.resolve().then(t.bind(t,5016)),Promise.resolve().then(t.bind(t,9602)),Promise.resolve().then(t.bind(t,9633)),Promise.resolve().then(t.bind(t,1875)),Promise.resolve().then(t.bind(t,6884)),Promise.resolve().then(t.bind(t,5216)),Promise.resolve().then(t.bind(t,124)),Promise.resolve().then(t.bind(t,4274))},5480:(e,s,t)=>{"use strict";function a(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-GB",t=Number(e)/100;return Number.isFinite(t)?new Intl.NumberFormat(s,{style:"currency",currency:"EUR",maximumFractionDigits:0}).format(t):"-"}function l(e){return null==e||Number.isNaN(e)?"-":new Intl.NumberFormat("en-GB",{maximumFractionDigits:2}).format(e)}function n(e){return null==e||Number.isNaN(e)?"-":new Intl.NumberFormat("en-GB",{style:"percent",maximumFractionDigits:1}).format(e)}t.d(s,{ZV:()=>l,l9:()=>n,vv:()=>a})},5786:(e,s,t)=>{"use strict";t.d(s,{default:()=>p});var a=t(6586),l=t(7826),n=t(8902);let i={launchId:"",csv:"",actualCostAmount:"",actualLeadTimeDays:""};function r(e){let{launches:s,loading:t,strings:r,onIngested:d}=e,[o,c]=(0,l.useState)(i),[u,m]=(0,l.useState)(null),[x,p]=(0,l.useState)(!1),b=(0,l.useCallback)(async e=>{if(e.preventDefault(),!o.launchId||!o.csv.trim())return void m(r.messages.ingestError);let s=function(e){let s=e.trim();if(!s)return;let t=Number.parseFloat(s);return!Number.isFinite(t)||t<0?null:t}(o.actualCostAmount),t=function(e){let s=e.trim();if(!s)return;let t=Number.parseInt(s,10);return!Number.isFinite(t)||t<0?null:t}(o.actualLeadTimeDays);if(null===s||null===t)return void m(r.messages.ingestError);p(!0),m(null);try{(await fetch("/api/launches/actuals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({launchId:o.launchId,csv:o.csv,...void 0!==s?{actualCostAmount:s}:{},...void 0!==t?{actualLeadTimeDays:t}:{}})})).ok?(m(r.messages.ingestSuccess),c(i),await d()):m(r.messages.ingestError)}catch(e){console.error(e),m(r.messages.ingestError)}finally{p(!1)}},[o,d,r.messages]);return(0,a.jsxs)("section",{className:"pp-card p-6",children:[(0,a.jsxs)(n.BJ,{gap:2,children:[(0,a.jsx)("span",{className:"text-xs uppercase tracking-widest text-foreground/60",children:r.ingestLabel}),(0,a.jsx)("h2",{className:"text-xl font-semibold tracking-tight",children:r.ingestTitle})]}),(0,a.jsxs)("form",{className:"mt-4 grid gap-4",onSubmit:b,children:[(0,a.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[r.fields.launchPlan,(0,a.jsxs)("select",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:o.launchId,onChange:e=>c(s=>({...s,launchId:e.target.value})),disabled:x||t,children:[(0,a.jsx)("option",{value:"",children:r.placeholders.selectLaunch}),s.map(e=>(0,a.jsx)("option",{value:e.id,children:e.label},e.id))]})]}),(0,a.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[r.fields.actualsCsv,(0,a.jsx)("textarea",{className:"mt-2 min-h-40 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:o.csv,onChange:e=>c(s=>({...s,csv:e.target.value})),disabled:x||t}),(0,a.jsx)("span",{className:"mt-2 block text-xs text-foreground/60",children:r.fields.actualsHelper})]}),(0,a.jsx)("div",{className:"text-xs uppercase tracking-widest text-foreground/60",children:r.fields.laneActualsLabel}),(0,a.jsx)("div",{className:"text-xs text-foreground/60",children:r.fields.laneActualsHelp}),(0,a.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[r.fields.actualCostAmount,(0,a.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:o.actualCostAmount,onChange:e=>c(s=>({...s,actualCostAmount:e.target.value})),disabled:x||t,type:"number",min:0,step:"0.01"})]}),(0,a.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[r.fields.actualLeadTimeDays,(0,a.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:o.actualLeadTimeDays,onChange:e=>c(s=>({...s,actualLeadTimeDays:e.target.value})),disabled:x||t,type:"number",min:0,step:"1"})]}),(0,a.jsxs)(n.d2,{justify:"between",alignY:"center",className:"gap-3",children:[(0,a.jsx)("span",{className:"text-xs text-foreground/60",children:null!=u?u:r.notAvailable}),(0,a.jsx)("button",{className:"min-h-12 min-w-12 rounded-full bg-primary px-4 py-2 text-sm font-semibold text-primary-foreground disabled:cursor-not-allowed disabled:opacity-60",type:"submit",disabled:x||t,children:r.actions.ingest})]})]})]})}let d={launchId:"",decision:"SCALE",notes:""};function o(e){let{launches:s,loading:t,strings:i,onDecided:r}=e,[o,c]=(0,l.useState)(d),[u,m]=(0,l.useState)(null),[x,p]=(0,l.useState)(!1),b=(0,l.useCallback)(async e=>{if(e.preventDefault(),!o.launchId||!o.decision)return void m(i.messages.decisionError);p(!0),m(null);try{(await fetch("/api/launches/decision",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({launchId:o.launchId,decision:o.decision,notes:o.notes.trim()||void 0})})).ok?(m(i.messages.decisionSuccess),c(d),await r()):m(i.messages.decisionError)}catch(e){console.error(e),m(i.messages.decisionError)}finally{p(!1)}},[o,r,i.messages]);return(0,a.jsxs)("section",{className:"pp-card p-6",children:[(0,a.jsxs)(n.BJ,{gap:2,children:[(0,a.jsx)("span",{className:"text-xs uppercase tracking-widest text-foreground/60",children:i.decisionLabel}),(0,a.jsx)("h2",{className:"text-xl font-semibold tracking-tight",children:i.decisionTitle})]}),(0,a.jsxs)("form",{className:"mt-4 grid gap-4 md:grid-cols-2",onSubmit:b,children:[(0,a.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[i.fields.launchPlan,(0,a.jsxs)("select",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:o.launchId,onChange:e=>c(s=>({...s,launchId:e.target.value})),disabled:x||t,children:[(0,a.jsx)("option",{value:"",children:i.placeholders.selectLaunch}),s.map(e=>(0,a.jsx)("option",{value:e.id,children:e.label},e.id))]})]}),(0,a.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[i.fields.decision,(0,a.jsxs)("select",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:o.decision,onChange:e=>c(s=>({...s,decision:e.target.value})),disabled:x||t,children:[(0,a.jsx)("option",{value:"SCALE",children:i.decisionLabels.scale}),(0,a.jsx)("option",{value:"KILL",children:i.decisionLabels.kill})]})]}),(0,a.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60 md:col-span-2",children:[i.fields.decisionNotes,(0,a.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:o.notes,onChange:e=>c(s=>({...s,notes:e.target.value})),disabled:x||t,type:"text"})]}),(0,a.jsxs)(n.d2,{justify:"between",alignY:"center",className:"gap-3 md:col-span-2",children:[(0,a.jsx)("span",{className:"text-xs text-foreground/60",children:null!=u?u:i.notAvailable}),(0,a.jsx)("button",{className:"min-h-12 min-w-12 rounded-full bg-primary px-4 py-2 text-sm font-semibold text-primary-foreground disabled:cursor-not-allowed disabled:opacity-60",type:"submit",disabled:x||t,children:i.actions.decide})]})]})]})}let c={candidateId:"",plannedUnits:"",plannedUnitsPerDay:"",status:"PLANNED",notes:""};function u(e){let{candidates:s,loading:t,strings:i,onCreated:r}=e,[d,o]=(0,l.useState)(c),[u,m]=(0,l.useState)(null),[x,p]=(0,l.useState)(!1),b=(0,l.useCallback)(async e=>{e.preventDefault();let s=Number.parseInt(d.plannedUnits,10),t=Number.parseFloat(d.plannedUnitsPerDay);if(!d.candidateId)return void m(i.messages.createError);p(!0),m(null);try{(await fetch("/api/launches",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({candidateId:d.candidateId,status:d.status,plannedUnits:Number.isFinite(s)?s:void 0,plannedUnitsPerDay:Number.isFinite(t)?t:void 0,notes:d.notes.trim()||void 0})})).ok?(m(i.messages.createSuccess),o(c),await r()):m(i.messages.createError)}catch(e){console.error(e),m(i.messages.createError)}finally{p(!1)}},[d,r,i.messages]);return(0,a.jsxs)("section",{className:"pp-card p-6",children:[(0,a.jsxs)(n.BJ,{gap:2,children:[(0,a.jsx)("span",{className:"text-xs uppercase tracking-widest text-foreground/60",children:i.createLabel}),(0,a.jsx)("h2",{className:"text-xl font-semibold tracking-tight",children:i.createTitle})]}),(0,a.jsxs)("form",{className:"mt-4 grid gap-4 md:grid-cols-2",onSubmit:b,children:[(0,a.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[i.fields.candidate,(0,a.jsxs)("select",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:d.candidateId,onChange:e=>o(s=>({...s,candidateId:e.target.value})),disabled:x||t,children:[(0,a.jsx)("option",{value:"",children:i.placeholders.selectCandidate}),s.map(e=>(0,a.jsx)("option",{value:e.id,children:e.label},e.id))]})]}),(0,a.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[i.fields.status,(0,a.jsxs)("select",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:d.status,onChange:e=>o(s=>({...s,status:e.target.value})),disabled:x||t,children:[(0,a.jsx)("option",{value:"PLANNED",children:i.statusLabels.planned}),(0,a.jsx)("option",{value:"PILOT",children:i.statusLabels.pilot}),(0,a.jsx)("option",{value:"ACTUALS_INGESTED",children:i.statusLabels.ingested})]})]}),(0,a.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[i.fields.plannedUnits,(0,a.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:d.plannedUnits,onChange:e=>o(s=>({...s,plannedUnits:e.target.value})),disabled:x||t,type:"number",min:1})]}),(0,a.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[i.fields.plannedUnitsPerDay,(0,a.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:d.plannedUnitsPerDay,onChange:e=>o(s=>({...s,plannedUnitsPerDay:e.target.value})),disabled:x||t,type:"number",min:1,step:"0.5"})]}),(0,a.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60 md:col-span-2",children:[i.fields.notes,(0,a.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:d.notes,onChange:e=>o(s=>({...s,notes:e.target.value})),disabled:x||t,type:"text"})]}),(0,a.jsxs)(n.d2,{justify:"between",alignY:"center",className:"gap-3 md:col-span-2",children:[(0,a.jsx)("span",{className:"text-xs text-foreground/60",children:null!=u?u:i.notAvailable}),(0,a.jsx)("button",{className:"min-h-12 min-w-12 rounded-full bg-primary px-4 py-2 text-sm font-semibold text-primary-foreground disabled:cursor-not-allowed disabled:opacity-60",type:"submit",disabled:x||t,children:i.actions.create})]})]})]})}var m=t(5480);function x(e){let{plans:s,loading:t,strings:l}=e;return(0,a.jsxs)("section",{className:"pp-card p-6",children:[(0,a.jsx)(n.d2,{justify:"between",alignY:"center",className:"gap-4",children:(0,a.jsxs)(n.BJ,{gap:2,children:[(0,a.jsx)("span",{className:"text-xs uppercase tracking-widest text-foreground/60",children:l.plansLabel}),(0,a.jsx)("h2",{className:"text-xl font-semibold tracking-tight",children:l.plansTitle})]})}),(0,a.jsx)(n.BJ,{gap:4,className:"mt-6",children:t?(0,a.jsxs)("div",{className:"rounded-3xl border border-border-1 bg-surface-2 p-4",children:[(0,a.jsx)("div",{className:"h-4 w-24 rounded-full bg-foreground/10"}),(0,a.jsx)("div",{className:"mt-3 h-5 w-48 rounded-full bg-foreground/10"}),(0,a.jsx)("div",{className:"mt-4 h-3 w-32 rounded-full bg-foreground/10"})]}):0===s.length?(0,a.jsx)("div",{className:"text-sm text-foreground/70",children:l.emptyLabel}):s.map(e=>{var s,t,i,r,d,o,c,u,x,p,b,g,f,h,v,N,y,j,w;let P=null!=(b=null==(s=e.actuals)?void 0:s.variancePct)?b:null,k=null!=(g=null==(t=e.velocityPrior)?void 0:t.velocityPerDay)?g:null,A=null!=(f=null==(i=e.velocityPrior)?void 0:i.source)?f:null,L=null!=(h=null==(r=e.decision)?void 0:r.decision)?h:null,C="SCALE"===L?l.decisionLabels.scale:"KILL"===L?l.decisionLabels.kill:null!=L?L:l.notAvailable,S="PLANNED"===e.status?l.statusLabels.planned:"PILOT"===e.status?l.statusLabels.pilot:"ACTUALS_INGESTED"===e.status?l.statusLabels.ingested:e.status;return(0,a.jsxs)("div",{className:"rounded-3xl border border-border-1 bg-surface-2 p-4",children:[(0,a.jsx)("div",{className:"text-xs text-foreground/60",children:e.id}),(0,a.jsx)("div",{className:"text-lg font-semibold",children:null!=(v=null==(d=e.lead)?void 0:d.title)?v:l.notAvailable}),(0,a.jsxs)(n.xA,{cols:1,gap:3,className:"mt-3 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"text-sm text-foreground/70",children:[l.fields.status,": ",S]}),(0,a.jsxs)("div",{className:"text-sm text-foreground/70",children:[l.fields.plannedUnits,":"," ",null!=(N=e.plannedUnits)?N:l.notAvailable]}),(0,a.jsxs)("div",{className:"text-sm text-foreground/70",children:[l.fields.plannedUnitsPerDay,":"," ",null!=(y=e.plannedUnitsPerDay)?y:l.notAvailable]}),(0,a.jsxs)("div",{className:"text-sm text-foreground/70",children:[l.fields.actualVelocity,":"," ",(null==(o=e.actuals)?void 0:o.velocityPerDay)!==null&&(null==(c=e.actuals)?void 0:c.velocityPerDay)!==void 0?(0,m.ZV)(e.actuals.velocityPerDay):l.notAvailable]}),(0,a.jsxs)("div",{className:"text-sm text-foreground/70",children:[l.fields.velocityPrior,":"," ",null!=k?(0,m.ZV)(k):l.notAvailable]}),(0,a.jsxs)("div",{className:"text-sm text-foreground/70",children:[l.fields.velocityPriorSource,":"," ",null!=A?A:l.notAvailable]}),(0,a.jsxs)("div",{className:"text-sm text-foreground/70",children:[l.fields.variance,":"," ",null!=P?(0,m.l9)(P):l.notAvailable]}),(0,a.jsxs)("div",{className:"text-sm text-foreground/70",children:[l.fields.decision,": ",C]}),(0,a.jsxs)("div",{className:"text-sm text-foreground/70",children:[l.fields.decisionAt,":"," ",null!=(j=null==(u=e.decision)?void 0:u.decidedAt)?j:l.notAvailable]}),(0,a.jsxs)("div",{className:"text-sm text-foreground/70",children:[l.fields.decisionBy,":"," ",null!=(w=null==(x=e.decision)?void 0:x.decidedBy)?w:l.notAvailable]})]}),(null==(p=e.decision)?void 0:p.notes)?(0,a.jsxs)("div",{className:"mt-3 text-sm text-foreground/70",children:[l.fields.decisionNotes,": ",e.decision.notes]}):null]},e.id)})})]})}function p(e){let{strings:s}=e,[t,n]=(0,l.useState)([]),[i,d]=(0,l.useState)([]),[c,m]=(0,l.useState)(!0),p=(0,l.useCallback)(async()=>{m(!0);try{let[e,s]=await Promise.all([fetch("/api/launches?limit=50"),fetch("/api/candidates?limit=50")]);if(e.ok){let s=await e.json();s.ok&&Array.isArray(s.plans)&&n(s.plans)}if(s.ok){let e=await s.json();e.ok&&Array.isArray(e.candidates)&&d(e.candidates)}}catch(e){console.error(e)}finally{m(!1)}},[]);(0,l.useEffect)(()=>{p()},[p]);let b=(0,l.useMemo)(()=>i.map(e=>{var s;return{id:e.id,label:(null==(s=e.lead)?void 0:s.title)?"".concat(e.lead.title," \xb7 ").concat(e.id.slice(0,8)):e.id}}),[i]),g=(0,l.useMemo)(()=>t.map(e=>{var s;return{id:e.id,label:(null==(s=e.lead)?void 0:s.title)?"".concat(e.lead.title," \xb7 ").concat(e.id):e.id}}),[t]);return(0,a.jsxs)("div",{className:"grid gap-6",children:[(0,a.jsx)(u,{candidates:b,loading:c,strings:s,onCreated:p}),(0,a.jsx)(r,{launches:g,loading:c,strings:s,onIngested:p}),(0,a.jsx)(o,{launches:g,loading:c,strings:s,onDecided:p}),(0,a.jsx)(x,{plans:t,loading:c,strings:s})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[2827,9683,7106,4668,8902,9956,2459,7358],()=>s(1531)),_N_E=e.O()}]);