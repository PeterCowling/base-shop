(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[158],{905:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(6586),n=r(7826),i=r(65),s=r(7862);let l=n.memo(function(e){let{amount:t,currency:r}=e,l=(0,i.Y)(),o=(0,n.useMemo)(()=>{var e;return e=(0,s.Tl)(l),new Intl.NumberFormat(e,{style:"currency",currency:r,currencyDisplay:"narrowSymbol"}).format(t/100)},[t,r,l]);return(0,a.jsx)("span",{children:o})})},1037:(e,t,r)=>{"use strict";r.d(t,{Lc:()=>n,Rw:()=>i});var a=r(7862);function n(e,t){let r=function(e){let t=e.split("/").filter(Boolean);return 0===t.length?"/":a.YZ.includes(t[0])?"/".concat(t.slice(1).join("/"))||0:e}(e);return"/"===r?"/".concat(t):"/".concat(t).concat(r)}function i(e,t){return n(e.startsWith("/")?e:"/".concat(e),t)}},2308:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(6586),n=r(7826),i=r(7718),s=r(2675);let l=n.memo(function(e){let{quantity:t,onChange:r,min:l=i.yY,max:o=i._x,label:c}=e,d=(0,n.useMemo)(()=>t>l,[t,l]),u=(0,n.useMemo)(()=>t<o,[t,o]),m=(0,n.useMemo)(()=>"".concat(c," -"),[c]),f=(0,n.useMemo)(()=>"".concat(c," +"),[c]),x=(0,n.useCallback)(()=>{d&&r(t-1)},[d,r,t]),y=(0,n.useCallback)(()=>{u&&r(t+1)},[u,r,t]);return(0,a.jsxs)(s.A,{className:"items-center gap-2","aria-label":c,children:[(0,a.jsx)("button",{type:"button",onClick:x,disabled:!d,"aria-label":m,className:"size-12 rounded-full border border-border-1 text-lg font-semibold text-foreground transition hover:border-primary/60 disabled:opacity-40",children:"-"}),(0,a.jsx)("div",{className:"min-w-8 text-center text-sm font-semibold",children:t}),(0,a.jsx)("button",{type:"button",onClick:y,disabled:!u,"aria-label":f,className:"size-12 rounded-full border border-border-1 text-lg font-semibold text-foreground transition hover:border-primary/60 disabled:opacity-40",children:"+"})]})})},2675:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(6586);let n=r(7826).memo(function(e){let{className:t,...r}=e,n=["flex",t].filter(Boolean).join(" ");return(0,a.jsx)("div",{className:n,...r})})},5098:(e,t,r)=>{"use strict";r.d(t,{default:()=>b});var a=r(6586),n=r(7826),i=r(55),s=r.n(i),l=r(5876),o=r(6024),c=r(6233),d=r(2308),u=r(905),m=r(6662);let f=n.memo(function(e){let{item:t,product:r,variant:i}=e,s=(0,l.c3)(),{setQuantity:c,removeItem:f}=(0,o._)(),x=(0,n.useCallback)(e=>{c(t.variantId,e)},[t.variantId,c]),y=(0,n.useCallback)(()=>{f(t.variantId)},[t.variantId,f]),p=(0,n.useMemo)(()=>i.price*t.quantity,[t.quantity,i.price]);return(0,a.jsxs)("div",{className:"surface rounded-3xl border border-border-1 p-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"font-display text-lg font-semibold",children:s(r.name)}),(0,a.jsxs)("div",{className:"text-xs font-semibold uppercase tracking-widest text-muted-foreground",children:[s("size.".concat(i.size))," / ",s("color.".concat(i.color))]}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:s(r.shortDescription)})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between gap-4",children:[(0,a.jsx)(d.A,{quantity:t.quantity,onChange:x,label:s("cart.quantity")}),(0,a.jsxs)("div",{className:"text-end",children:[(0,a.jsx)("div",{className:"text-xs uppercase tracking-widest text-muted-foreground",children:s("cart.lineTotal")}),(0,a.jsx)("div",{className:"text-base font-semibold",children:(0,a.jsx)(u.A,{amount:p,currency:i.currency})})]})]}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)(m.A,{type:"button",variant:"outline",onClick:y,children:s("cart.remove")})})]})});var x=r(65),y=r(1037);let p=n.memo(function(){let e=(0,l.c3)(),t=(0,x.Y)(),{subtotal:r,itemCount:i,currency:c}=(0,o._)(),d=(0,n.useMemo)(()=>(0,y.Lc)("/checkout",t),[t]),m=(0,n.useCallback)(e=>{0===i&&e.preventDefault()},[i]);return(0,a.jsxs)("div",{className:"surface rounded-3xl border border-border-1 p-5",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"text-xs font-semibold uppercase tracking-widest text-muted-foreground",children:e("cart.summary")}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:e("cart.items")}),(0,a.jsx)("span",{className:"text-sm font-semibold",children:i})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:e("cart.subtotal")}),(0,a.jsx)("span",{className:"text-base font-semibold",children:(0,a.jsx)(u.A,{amount:r,currency:c})})]})]}),(0,a.jsx)(s(),{href:d,onClick:m,tabIndex:0===i?-1:0,className:(0===i?["mt-4","inline-flex","min-h-12","w-full","items-center","justify-center","rounded-full","bg-muted/20","text-sm","font-semibold","text-muted-foreground"]:["mt-4","inline-flex","min-h-12","w-full","items-center","justify-center","rounded-full","bg-primary","text-sm","font-semibold","text-primary-foreground","transition","hover:bg-accent","focus-visible:focus-ring"]).join(" "),"aria-disabled":0===i,children:e("cart.checkout")})]})}),b=n.memo(function(e){let{products:t}=e,r=(0,l.c3)(),i=(0,x.Y)(),{items:d}=(0,o._)(),u=(0,n.useMemo)(()=>(0,c.$)(d,t),[d,t]),m=(0,n.useMemo)(()=>(0,y.Lc)("/shop",i),[i]);return 0===d.length?(0,a.jsxs)("div",{className:"surface animate-fade-up rounded-3xl border border-border-1 p-6 text-center",children:[(0,a.jsx)("h2",{className:"font-display text-2xl font-semibold",children:r("cart.emptyTitle")}),(0,a.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:r("cart.emptyBody")}),(0,a.jsx)(s(),{href:m,className:"mt-6 inline-flex min-h-12 items-center justify-center rounded-full bg-primary px-5 text-sm font-semibold text-primary-foreground transition hover:bg-accent focus-visible:focus-ring",children:r("cart.emptyCta")})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"space-y-4",children:u.map(e=>(0,a.jsx)(f,{item:e.item,product:e.product,variant:e.variant},e.item.variantId))}),(0,a.jsx)(p,{})]})})},6024:(e,t,r)=>{"use strict";r.d(t,{CartProvider:()=>x,_:()=>y});var a=r(6586),n=r(7826),i=r(7718);let s={items:[],updatedAt:0},l=e=>({items:e,updatedAt:Date.now()}),o=e=>e.map(e=>({variantId:e.variantId,quantity:(0,i.pE)(e.quantity)})).filter(e=>e.variantId&&e.quantity>=i.yY);function c(e,t){switch(t.type){case"hydrate":return l(o(t.payload));case"add":{let{variantId:r,quantity:a}=t.payload,n=[...e.items],s=n.findIndex(e=>e.variantId===r),o=(0,i.pE)(a);if(s>=0){let e=n[s];if(!e)return l(n);n[s]={variantId:e.variantId,quantity:(0,i.pE)(e.quantity+o)}}else n.push({variantId:r,quantity:o});return l(n)}case"remove":return l(e.items.filter(e=>e.variantId!==t.payload.variantId));case"setQuantity":return l(o(e.items.map(e=>e.variantId!==t.payload.variantId?e:{...e,quantity:(0,i.pE)(t.payload.quantity)})));case"clear":return l([]);default:return e}}let d="cochlearfit:cart",u=e=>!!e&&"object"==typeof e&&"string"==typeof e.variantId&&"number"==typeof e.quantity&&e.quantity>=i.yY;var m=r(6233);let f=(0,n.createContext)(null);function x(e){let{children:t}=e,[r,l]=(0,n.useReducer)(c,s),o=(0,n.useMemo)(()=>(0,m.m)(r),[r]),x=(0,n.useCallback)((e,t)=>{l({type:"add",payload:{variantId:e,quantity:t}})},[]),y=(0,n.useCallback)(e=>{l({type:"remove",payload:{variantId:e}})},[]),p=(0,n.useCallback)((e,t)=>{l({type:"setQuantity",payload:{variantId:e,quantity:t}})},[]),b=(0,n.useCallback)(()=>{l({type:"clear"})},[]),v=(0,n.useCallback)(()=>{let e=function(){let e=window.localStorage.getItem(d);if(!e)return null;try{let t=JSON.parse(e);if(!t||1!==t.version||!Array.isArray(t.items))return null;return t.items.filter(u).map(e=>({variantId:e.variantId,quantity:(0,i.pE)(e.quantity)}))}catch(e){return null}}();e&&e.length>0&&l({type:"hydrate",payload:e})},[]);(0,n.useEffect)(()=>{v()},[v]),(0,n.useEffect)(()=>{let e={version:1,items:r.items.map(e=>({variantId:e.variantId,quantity:(0,i.pE)(e.quantity)}))};window.localStorage.setItem(d,JSON.stringify(e))},[r.items]);let h=(0,n.useMemo)(()=>({items:r.items,itemCount:o.itemCount,subtotal:o.subtotal,currency:o.currency,addItem:x,removeItem:y,setQuantity:p,clear:b}),[x,b,y,p,r.items,o]);return(0,a.jsx)(f.Provider,{value:h,children:t})}function y(){let e=(0,n.useContext)(f);if(!e)throw Error("useCart must be used within CartProvider");return e}},6233:(e,t,r)=>{"use strict";r.d(t,{$:()=>i,m:()=>n});var a=r(7157);function n(e){let t=0,r=0,n="USD";for(let i of e.items){let e=(0,a._s)(i.variantId);e&&(t+=i.quantity,r+=i.quantity*e.price,n=e.currency)}return{itemCount:t,subtotal:r,currency:n}}function i(e,t){let r=new Map;for(let e of t)for(let t of e.variants)r.set(t.id,{product:e,variant:t});return e.flatMap(e=>{let t=r.get(e.variantId);return t?[{item:e,product:t.product,variant:t.variant}]:[]})}},6662:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(6586),n=r(7826);let i=n.memo(function(e){let{variant:t="primary",className:r,...i}=e,s=(0,n.useMemo)(()=>["inline-flex","min-h-12","items-center","justify-center","rounded-full","px-5","text-sm","font-semibold","tracking-wide","transition","focus-visible:focus-ring","disabled:cursor-not-allowed","disabled:opacity-60",...{primary:["bg-primary","text-primary-foreground","hover:bg-accent"],outline:["border","border-border-1","text-foreground","hover:border-primary/70","hover:text-accent"],ghost:["text-foreground","hover:text-accent"]}[t],r].filter(Boolean).join(" "),[r,t]);return(0,a.jsx)("button",{...i,className:s})})},7157:(e,t,r)=>{"use strict";r.d(t,{P5:()=>o,_s:()=>l,e:()=>d,jo:()=>m,n5:()=>c,uP:()=>u});let a={sand:{label:"Sand",hex:"hsl(var(--color-sand))"},ocean:{label:"Ocean",hex:"hsl(var(--color-ocean))"},berry:{label:"Berry",hex:"hsl(var(--color-berry))"}},n=["kids","adult"],i=["sand","ocean","berry"],s={classic:{kids:3400,adult:3800},sport:{kids:3600,adult:4e3}};function l(e){let[t,r,l]=e.split("-");if(!t||!r||!l||!n.includes(r)||!i.includes(l))return;let o=s[t];if(!o)return;let c=a[l];return{id:e,size:r,color:l,colorLabel:c.label,colorHex:c.hex,price:o[r],currency:"USD",stripePriceId:"price_".concat(t,"_").concat(r,"_").concat(l),inStock:!0}}function o(e,t,r){return e.variants.find(e=>e.size===t&&e.color===r)}function c(e){var t;let r=e.variants[0];if(!r)throw Error("Product has no variants");return null!=(t=e.variants.find(e=>e.inStock))?t:r}function d(e){let t=new Set;for(let r of e.variants)t.add(r.size);return n.filter(e=>t.has(e))}function u(e){let t=new Set;for(let r of e.variants)t.add(r.color);return i.filter(e=>t.has(e))}function m(e){var t,r;return null!=(r=null==(t=a[e])?void 0:t.hex)?r:"hsl(var(--color-fg))"}},7718:(e,t,r)=>{"use strict";r.d(t,{_x:()=>n,pE:()=>i,yY:()=>a});let a=1,n=10;function i(e){return Number.isNaN(e)||e<a?a:e>n?n:Math.floor(e)}},9383:(e,t,r)=>{Promise.resolve().then(r.bind(r,5098))}},e=>{var t=t=>e(e.s=t);e.O(0,[106,55,132,956,889,358],()=>t(9383)),_N_E=e.O()}]);