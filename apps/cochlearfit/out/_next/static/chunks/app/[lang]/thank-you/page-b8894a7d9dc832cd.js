(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{905:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(6586),r=s(7826),n=s(65),o=s(7862);let c=r.memo(function(e){let{amount:t,currency:s}=e,c=(0,n.Y)(),u=(0,r.useMemo)(()=>{var e;return e=(0,o.Tl)(c),new Intl.NumberFormat(e,{style:"currency",currency:s,currencyDisplay:"narrowSymbol"}).format(t/100)},[t,s,c]);return(0,a.jsx)("span",{children:u})})},3582:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var a=s(6586),r=s(7826),n=s(9528),o=s(5876),c=s(6157),u=s(905);let d=r.memo(function(){let e=(0,o.c3)(),t=(0,n.useSearchParams)().get("session_id"),[s,d]=(0,r.useState)({status:"idle"}),i=(0,r.useMemo)(()=>e("thankyou.missing"),[e]),l=(0,r.useMemo)(()=>e("thankyou.error"),[e]),m=(0,r.useMemo)(()=>({status:"loading"}),[]),h=(0,r.useMemo)(()=>({status:"error",message:i}),[i]),x=(0,r.useMemo)(()=>({status:"error",message:l}),[l]),f=(0,r.useCallback)(async()=>{if(!t)return void d(h);d(m);try{let e=await (0,c.J)(t);d({status:"success",data:e})}catch(e){d(x)}},[x,m,h,t]);(0,r.useEffect)(()=>{f()},[f]);let y=(0,r.useMemo)(()=>"success"===s.status&&s.data?"paid"===s.data.paymentStatus?e("thankyou.paid"):e("thankyou.unpaid"):null,[s.data,s.status,e]);return"loading"===s.status?(0,a.jsx)("div",{className:"surface animate-fade-up rounded-3xl border border-border-1 p-6 text-center",children:(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:e("thankyou.loading")})}):"error"===s.status?(0,a.jsx)("div",{className:"rounded-2xl border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:s.message}):s.data?(0,a.jsxs)("div",{className:"surface animate-fade-up rounded-3xl border border-border-1 p-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-xs font-semibold uppercase tracking-widest text-muted-foreground",children:e("thankyou.status")}),(0,a.jsx)("div",{className:"text-xl font-semibold",children:y})]}),(0,a.jsx)("div",{className:"mt-4 space-y-3 text-sm",children:s.data.items.map(t=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold",children:e(t.name)}),(0,a.jsxs)("div",{className:"text-muted-foreground",children:[e("size.".concat(t.size))," / ",e("color.".concat(t.color))]})]}),(0,a.jsxs)("div",{className:"text-end",children:[(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e("thankyou.qty")," ",t.quantity]}),(0,a.jsx)("div",{className:"font-semibold",children:(0,a.jsx)(u.A,{amount:t.unitPrice*t.quantity,currency:t.currency})})]})]},t.variantId))}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between border-t border-border-1 pt-4 text-base font-semibold",children:[(0,a.jsx)("span",{children:e("thankyou.total")}),(0,a.jsx)(u.A,{amount:s.data.total,currency:s.data.currency})]}),(0,a.jsxs)("div",{className:"mt-4 text-xs text-muted-foreground",children:[e("thankyou.reference"),": ",s.data.id]})]}):null})},6157:(e,t,s)=>{"use strict";var a;s.d(t,{f:()=>o,J:()=>c});let r=null!=(a=s(7811).env.NEXT_PUBLIC_API_BASE_URL)?a:"";function n(e){return"".concat(r).concat(e)}async function o(e){let t=await fetch(n("/api/checkout/session"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create checkout session");return await t.json()}async function c(e){let t=await fetch(n("/api/checkout/session/".concat(e)),{method:"GET"});if(!t.ok)throw Error("Failed to fetch checkout session");return await t.json()}},8380:(e,t,s)=>{Promise.resolve().then(s.bind(s,3582))},9528:(e,t,s)=>{"use strict";var a=s(3320);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},e=>{var t=t=>e(e.s=t);e.O(0,[106,132,956,889,358],()=>t(8380)),_N_E=e.O()}]);