"use strict";(self.webpackChunkcms_monorepo=self.webpackChunkcms_monorepo||[]).push([[9444],{"./packages/ui/src/components/cms/ImageUploaderWithOrientationCheck.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={title:"CMS/ImageUploaderWithOrientationCheck",component:__webpack_require__("./packages/ui/src/components/cms/ImageUploaderWithOrientationCheck.tsx").A,tags:["autodocs"],args:{file:null,requiredOrientation:"landscape"}},Default={},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{}",...Default.parameters?.docs?.source}}}},"./packages/ui/src/components/cms/ImageUploaderWithOrientationCheck.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/ui/src/components/atoms/shadcn/index.ts"),_hooks_useImageOrientationValidation__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/ui/src/hooks/useImageOrientationValidation.ts"),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js"),_acme_i18n__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/i18n/src/index.ts");const equal=(a,b)=>a.file===b.file&&a.onChange===b.onChange&&a.requiredOrientation===b.requiredOrientation;function ImageUploaderWithOrientationCheckInner({file,onChange,requiredOrientation}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_4__.c3)(),{actual,isValid}=(0,_hooks_useImageOrientationValidation__WEBPACK_IMPORTED_MODULE_2__.M)(file,requiredOrientation),handleFileChange=(0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(e=>{var _e_target_files,_e_target_files_;const nextFile=null!==(_e_target_files_=null===(_e_target_files=e.target.files)||void 0===_e_target_files?void 0:_e_target_files[0])&&void 0!==_e_target_files_?_e_target_files_:null;onChange(nextFile)},[onChange]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{type:"file",accept:"image/*",onChange:handleFileChange,className:"block w-full cursor-pointer rounded-2xl border p-2"}),file&&null!==isValid&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:isValid?"text-sm text-success":"text-sm text-danger","data-token":isValid?"--color-success":"--color-danger",children:isValid?t("cms.image.orientation.ok",{actual:null!=actual?actual:""}):t("cms.image.orientation.bad",{actual:null!=actual?actual:"",required:requiredOrientation})})]})}const __WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_3__.memo)(ImageUploaderWithOrientationCheckInner,equal);ImageUploaderWithOrientationCheckInner.__docgenInfo={description:"",methods:[],displayName:"ImageUploaderWithOrientationCheckInner",props:{file:{required:!0,tsType:{name:"union",raw:"File | null",elements:[{name:"File"},{name:"null"}]},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(file: File | null) => void",signature:{arguments:[{type:{name:"union",raw:"File | null",elements:[{name:"File"},{name:"null"}]},name:"file"}],return:{name:"void"}}},description:""},requiredOrientation:{required:!0,tsType:{name:"z.infer",elements:[{name:"imageOrientationSchema"}],raw:"z.infer<typeof imageOrientationSchema>"},description:""}}}},"./packages/ui/src/hooks/useImageOrientationValidation.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M:()=>useImageOrientationValidation});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js");function useImageOrientationValidation(file,required){const[actual,setActual]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{if(!file)return void setActual(null);const url=URL.createObjectURL(file),img=new Image;img.onload=()=>{const orientation=img.width>=img.height?"landscape":"portrait";setActual(orientation),URL.revokeObjectURL(url)},img.onerror=()=>{setActual(null),URL.revokeObjectURL(url)},img.src=url},[file]);return{actual,isValid:null===actual?null:actual===required}}}}]);