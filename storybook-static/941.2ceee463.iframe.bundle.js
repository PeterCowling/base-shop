"use strict";(self.webpackChunkcms_monorepo=self.webpackChunkcms_monorepo||[]).push([[941],{"./node_modules/.pnpm/@radix-ui+react-popover@1.1.15_@types+react-dom@19.1.6_@types+react@19.1.8__@types+reac_b217370de292fda1fe2b7a99f857f8dc/node_modules/@radix-ui/react-popover/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Mz:()=>Anchor2,UC:()=>Content2,ZL:()=>Portal,bL:()=>Root2,l9:()=>Trigger});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js"),_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/.pnpm/@radix-ui+primitive@1.1.3/node_modules/@radix-ui/primitive/dist/index.mjs"),_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-compose-refs@1.1.2_@types+react@19.1.8_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-compose-refs/dist/index.mjs"),_radix_ui_react_context__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-context@1.1.2_@types+react@19.1.8_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-context/dist/index.mjs"),_radix_ui_react_dismissable_layer__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-dismissable-layer@1.1.11_@types+react-dom@19.1.6_@types+react@19.1.8__@_1f1b731f5526c836f5c2866586da8fcc/node_modules/@radix-ui/react-dismissable-layer/dist/index.mjs"),_radix_ui_react_focus_guards__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-focus-guards@1.1.3_@types+react@19.1.8_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-focus-guards/dist/index.mjs"),_radix_ui_react_focus_scope__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-focus-scope@1.1.7_@types+react-dom@19.1.6_@types+react@19.1.8__@types+r_3303dd36ef03f9c4bae85c013b69e3d5/node_modules/@radix-ui/react-focus-scope/dist/index.mjs"),_radix_ui_react_id__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-id@1.1.1_@types+react@19.1.8_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-id/dist/index.mjs"),_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-popper@1.2.8_@types+react-dom@19.1.6_@types+react@19.1.8__@types+react@_da27c1475a63e368cc10725049cb740a/node_modules/@radix-ui/react-popper/dist/index.mjs"),_radix_ui_react_portal__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-portal@1.1.9_@types+react-dom@19.1.6_@types+react@19.1.8__@types+react@_c8cb7298c94923c30556ba2d6a6c3b6c/node_modules/@radix-ui/react-portal/dist/index.mjs"),_radix_ui_react_presence__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-presence@1.1.5_@types+react-dom@19.1.6_@types+react@19.1.8__@types+reac_a6e8fec826c0054468bf9342d937c961/node_modules/@radix-ui/react-presence/dist/index.mjs"),_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-primitive@2.1.3_@types+react-dom@19.1.6_@types+react@19.1.8__@types+rea_a80e599d01a0661e2eb97d61fda6a1d3/node_modules/@radix-ui/react-primitive/dist/index.mjs"),_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-slot@1.2.3_@types+react@19.1.8_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-slot/dist/index.mjs"),_radix_ui_react_use_controllable_state__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-use-controllable-state@1.2.2_@types+react@19.1.8_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-use-controllable-state/dist/index.mjs"),aria_hidden__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/.pnpm/aria-hidden@1.2.6/node_modules/aria-hidden/dist/es2015/index.js"),react_remove_scroll__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/.pnpm/react-remove-scroll@2.7.1_@types+react@19.1.8_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/react-remove-scroll/dist/es2015/Combination.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),[createPopoverContext,createPopoverScope]=(0,_radix_ui_react_context__WEBPACK_IMPORTED_MODULE_2__.A)("Popover",[_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_3__.Bk]),usePopperScope=(0,_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_3__.Bk)(),[PopoverProvider,usePopoverContext]=createPopoverContext("Popover"),Popover=props=>{const{__scopePopover,children,open:openProp,defaultOpen,onOpenChange,modal=!1}=props,popperScope=usePopperScope(__scopePopover),triggerRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),[hasCustomAnchor,setHasCustomAnchor]=react__WEBPACK_IMPORTED_MODULE_0__.useState(!1),[open,setOpen]=(0,_radix_ui_react_use_controllable_state__WEBPACK_IMPORTED_MODULE_4__.i)({prop:openProp,defaultProp:defaultOpen??!1,onChange:onOpenChange,caller:"Popover"});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_3__.bL,{...popperScope,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(PopoverProvider,{scope:__scopePopover,contentId:(0,_radix_ui_react_id__WEBPACK_IMPORTED_MODULE_5__.B)(),triggerRef,open,onOpenChange:setOpen,onOpenToggle:react__WEBPACK_IMPORTED_MODULE_0__.useCallback(()=>setOpen(prevOpen=>!prevOpen),[setOpen]),hasCustomAnchor,onCustomAnchorAdd:react__WEBPACK_IMPORTED_MODULE_0__.useCallback(()=>setHasCustomAnchor(!0),[]),onCustomAnchorRemove:react__WEBPACK_IMPORTED_MODULE_0__.useCallback(()=>setHasCustomAnchor(!1),[]),modal,children})})};Popover.displayName="Popover";var PopoverAnchor=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((props,forwardedRef)=>{const{__scopePopover,...anchorProps}=props,context=usePopoverContext("PopoverAnchor",__scopePopover),popperScope=usePopperScope(__scopePopover),{onCustomAnchorAdd,onCustomAnchorRemove}=context;return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>(onCustomAnchorAdd(),()=>onCustomAnchorRemove()),[onCustomAnchorAdd,onCustomAnchorRemove]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_3__.Mz,{...popperScope,...anchorProps,ref:forwardedRef})});PopoverAnchor.displayName="PopoverAnchor";var PopoverTrigger=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((props,forwardedRef)=>{const{__scopePopover,...triggerProps}=props,context=usePopoverContext("PopoverTrigger",__scopePopover),popperScope=usePopperScope(__scopePopover),composedTriggerRef=(0,_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_6__.s)(forwardedRef,context.triggerRef),trigger=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_7__.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":context.open,"aria-controls":context.contentId,"data-state":getState(context.open),...triggerProps,ref:composedTriggerRef,onClick:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__.mK)(props.onClick,context.onOpenToggle)});return context.hasCustomAnchor?trigger:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_3__.Mz,{asChild:!0,...popperScope,children:trigger})});PopoverTrigger.displayName="PopoverTrigger";var[PortalProvider,usePortalContext]=createPopoverContext("PopoverPortal",{forceMount:void 0}),PopoverPortal=props=>{const{__scopePopover,forceMount,children,container}=props,context=usePopoverContext("PopoverPortal",__scopePopover);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(PortalProvider,{scope:__scopePopover,forceMount,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_presence__WEBPACK_IMPORTED_MODULE_9__.C,{present:forceMount||context.open,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_portal__WEBPACK_IMPORTED_MODULE_10__.Z,{asChild:!0,container,children})})})};PopoverPortal.displayName="PopoverPortal";var PopoverContent=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((props,forwardedRef)=>{const portalContext=usePortalContext("PopoverContent",props.__scopePopover),{forceMount=portalContext.forceMount,...contentProps}=props,context=usePopoverContext("PopoverContent",props.__scopePopover);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_presence__WEBPACK_IMPORTED_MODULE_9__.C,{present:forceMount||context.open,children:context.modal?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(PopoverContentModal,{...contentProps,ref:forwardedRef}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(PopoverContentNonModal,{...contentProps,ref:forwardedRef})})});PopoverContent.displayName="PopoverContent";var Slot=(0,_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__.TL)("PopoverContent.RemoveScroll"),PopoverContentModal=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((props,forwardedRef)=>{const context=usePopoverContext("PopoverContent",props.__scopePopover),contentRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),composedRefs=(0,_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_6__.s)(forwardedRef,contentRef),isRightClickOutsideRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(!1);return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{const content=contentRef.current;if(content)return(0,aria_hidden__WEBPACK_IMPORTED_MODULE_12__.Eq)(content)},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_remove_scroll__WEBPACK_IMPORTED_MODULE_13__.A,{as:Slot,allowPinchZoom:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(PopoverContentImpl,{...props,ref:composedRefs,trapFocus:context.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__.mK)(props.onCloseAutoFocus,event=>{event.preventDefault(),isRightClickOutsideRef.current||context.triggerRef.current?.focus()}),onPointerDownOutside:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__.mK)(props.onPointerDownOutside,event=>{const originalEvent=event.detail.originalEvent,ctrlLeftClick=0===originalEvent.button&&!0===originalEvent.ctrlKey,isRightClick=2===originalEvent.button||ctrlLeftClick;isRightClickOutsideRef.current=isRightClick},{checkForDefaultPrevented:!1}),onFocusOutside:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__.mK)(props.onFocusOutside,event=>event.preventDefault(),{checkForDefaultPrevented:!1})})})}),PopoverContentNonModal=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((props,forwardedRef)=>{const context=usePopoverContext("PopoverContent",props.__scopePopover),hasInteractedOutsideRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(!1),hasPointerDownOutsideRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(!1);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(PopoverContentImpl,{...props,ref:forwardedRef,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:event=>{props.onCloseAutoFocus?.(event),event.defaultPrevented||(hasInteractedOutsideRef.current||context.triggerRef.current?.focus(),event.preventDefault()),hasInteractedOutsideRef.current=!1,hasPointerDownOutsideRef.current=!1},onInteractOutside:event=>{props.onInteractOutside?.(event),event.defaultPrevented||(hasInteractedOutsideRef.current=!0,"pointerdown"===event.detail.originalEvent.type&&(hasPointerDownOutsideRef.current=!0));const target=event.target,targetIsTrigger=context.triggerRef.current?.contains(target);targetIsTrigger&&event.preventDefault(),"focusin"===event.detail.originalEvent.type&&hasPointerDownOutsideRef.current&&event.preventDefault()}})}),PopoverContentImpl=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((props,forwardedRef)=>{const{__scopePopover,trapFocus,onOpenAutoFocus,onCloseAutoFocus,disableOutsidePointerEvents,onEscapeKeyDown,onPointerDownOutside,onFocusOutside,onInteractOutside,...contentProps}=props,context=usePopoverContext("PopoverContent",__scopePopover),popperScope=usePopperScope(__scopePopover);return(0,_radix_ui_react_focus_guards__WEBPACK_IMPORTED_MODULE_14__.Oh)(),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_focus_scope__WEBPACK_IMPORTED_MODULE_15__.n,{asChild:!0,loop:!0,trapped:trapFocus,onMountAutoFocus:onOpenAutoFocus,onUnmountAutoFocus:onCloseAutoFocus,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_dismissable_layer__WEBPACK_IMPORTED_MODULE_16__.qW,{asChild:!0,disableOutsidePointerEvents,onInteractOutside,onEscapeKeyDown,onPointerDownOutside,onFocusOutside,onDismiss:()=>context.onOpenChange(!1),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_3__.UC,{"data-state":getState(context.open),role:"dialog",id:context.contentId,...popperScope,...contentProps,ref:forwardedRef,style:{...contentProps.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),PopoverClose=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((props,forwardedRef)=>{const{__scopePopover,...closeProps}=props,context=usePopoverContext("PopoverClose",__scopePopover);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_7__.sG.button,{type:"button",...closeProps,ref:forwardedRef,onClick:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__.mK)(props.onClick,()=>context.onOpenChange(!1))})});PopoverClose.displayName="PopoverClose";var PopoverArrow=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((props,forwardedRef)=>{const{__scopePopover,...arrowProps}=props,popperScope=usePopperScope(__scopePopover);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_3__.i3,{...popperScope,...arrowProps,ref:forwardedRef})});function getState(open){return open?"open":"closed"}PopoverArrow.displayName="PopoverArrow";var Root2=Popover,Anchor2=PopoverAnchor,Trigger=PopoverTrigger,Portal=PopoverPortal,Content2=PopoverContent},"./packages/ui/src/components/cms/MediaFileItem.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>MediaFileItem});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js"),shadcn=__webpack_require__("./packages/ui/src/components/atoms/shadcn/index.ts"),style=__webpack_require__("./packages/ui/src/utils/style/index.ts"),src=__webpack_require__("./packages/i18n/src/index.ts"),primitives=__webpack_require__("./packages/ui/src/components/atoms/primitives/index.ts"),react_icons_esm=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-icons@1.3.2_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-icons/dist/react-icons.esm.js"),atoms=__webpack_require__("./packages/ui/src/components/atoms/index.ts");function renderLoadingContent(label,loading,status){if(!loading)return label;const srText=null!=status?status:`${label}…`;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(atoms.y$,{className:"h-4 w-4","aria-hidden":"true"}),(0,jsx_runtime.jsx)("span",{className:"sr-only",children:srText})]})}function MediaFileActions({actionsDisabled,actionsLoading,deleteInProgress,replaceInProgress,statusMessage,selectionEnabled,selected,onBulkToggle,onOpenDetails,onSelectItem,onViewDetails,onReplaceRequest,onDeleteRequest}){const t=(0,src.c3)(),handleOverlayClick=event=>{event.stopPropagation()};return(0,jsx_runtime.jsxs)("div",{className:"relative",children:[selectionEnabled?(0,jsx_runtime.jsx)("div",{className:"absolute start-3 top-3",children:(0,jsx_runtime.jsx)(shadcn.Sc,{checked:selected,onCheckedChange:onBulkToggle,onClick:handleOverlayClick,"aria-label":t(selected?"cms.media.deselect":"cms.media.select"),disabled:actionsDisabled})}):null,(0,jsx_runtime.jsx)("div",{className:"absolute end-3 top-3",children:(0,jsx_runtime.jsxs)(shadcn.rI,{children:[(0,jsx_runtime.jsx)(shadcn.ty,{asChild:!0,children:(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"ghost",className:"h-9 w-9 rounded-full p-0","aria-label":t("cms.media.actions"),onClick:handleOverlayClick,disabled:actionsDisabled,children:actionsLoading?renderLoadingContent(t("cms.actions"),!0,statusMessage):(0,jsx_runtime.jsx)(react_icons_esm.Oer,{className:"h-4 w-4","aria-hidden":"true"})})}),(0,jsx_runtime.jsxs)(shadcn.SQ,{align:"end",className:"w-48",children:[(0,jsx_runtime.jsx)(shadcn.lp,{children:t("cms.actions")}),onViewDetails?(0,jsx_runtime.jsx)(shadcn._2,{onSelect:()=>{actionsDisabled||onViewDetails()},disabled:actionsDisabled,children:t("cms.media.viewDetails")}):null,(0,jsx_runtime.jsx)(shadcn._2,{onSelect:()=>{actionsDisabled||onReplaceRequest()},disabled:actionsDisabled,className:"gap-2","aria-label":t(replaceInProgress?"cms.media.replacing":"cms.media.replace"),children:renderLoadingContent(t("cms.replace"),replaceInProgress,t("cms.media.replacing"))}),(0,jsx_runtime.jsx)(shadcn.mB,{}),(0,jsx_runtime.jsx)(shadcn._2,{onSelect:()=>{actionsDisabled||deleteInProgress||onDeleteRequest()},disabled:actionsDisabled,className:"gap-2","aria-label":t(deleteInProgress?"cms.media.deleting":"cms.media.delete"),children:renderLoadingContent(t("cms.delete"),deleteInProgress,t("cms.media.deleting"))})]})]})}),(0,jsx_runtime.jsxs)("div",{className:"absolute inset-x-3 bottom-3 opacity-0 transition-opacity duration-200 group-hover:opacity-100 group-focus-within:opacity-100",children:[onOpenDetails?(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",className:"h-9 flex-1 rounded-md text-sm gap-2",onClick:event=>{handleOverlayClick(event),actionsDisabled||onOpenDetails()},disabled:actionsDisabled,"aria-label":t("cms.media.openDetails"),children:renderLoadingContent(t("cms.media.openDetails"),actionsLoading,statusMessage)}):null,onSelectItem?(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"ghost",className:"h-9 rounded-md px-3 text-sm gap-2",onClick:event=>{handleOverlayClick(event),actionsDisabled||onSelectItem()},disabled:actionsDisabled,"aria-label":t("cms.media.select"),children:renderLoadingContent(t("cms.select"),actionsLoading,statusMessage)}):null]})]})}MediaFileActions.__docgenInfo={description:"",methods:[],displayName:"MediaFileActions",props:{actionsDisabled:{required:!0,tsType:{name:"boolean"},description:""},actionsLoading:{required:!0,tsType:{name:"boolean"},description:""},deleteInProgress:{required:!0,tsType:{name:"boolean"},description:""},replaceInProgress:{required:!0,tsType:{name:"boolean"},description:""},statusMessage:{required:!0,tsType:{name:"string"},description:""},selectionEnabled:{required:!1,tsType:{name:"boolean"},description:""},selected:{required:!1,tsType:{name:"boolean"},description:""},onBulkToggle:{required:!1,tsType:{name:"signature",type:"function",raw:"(checked: CheckedState) => void",signature:{arguments:[{type:{name:"CheckedState"},name:"checked"}],return:{name:"void"}}},description:""},onOpenDetails:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onSelectItem:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onViewDetails:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onReplaceRequest:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onDeleteRequest:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var next_image=__webpack_require__("./node_modules/.pnpm/@storybook+nextjs@8.6.14_@swc+core@1.12.9_esbuild@0.25.5_next@15.3.5_@babel+core@7.28.4_f309bebf97d2c09aa3c164b2abf593ce/node_modules/@storybook/nextjs/dist/images/next-image.mjs");function MediaFilePreview({item,name,previewAlt,previewLabel,actionsDisabled,onPreviewSelect,onPreviewKeyDown,isRecent,showReplacementOverlay,deleting,progressValue,uploadError,children}){const t=(0,src.c3)(),handleKeyDown=(0,react.useCallback)(event=>{null==onPreviewKeyDown||onPreviewKeyDown(event),onPreviewSelect&&!actionsDisabled&&("Enter"!==event.key&&" "!==event.key||(event.preventDefault(),onPreviewSelect()))},[onPreviewKeyDown,onPreviewSelect,actionsDisabled]);return(0,jsx_runtime.jsx)("div",{className:"relative",children:(0,jsx_runtime.jsxs)("div",{role:"button",tabIndex:onPreviewSelect&&!actionsDisabled?0:-1,onClick:onPreviewSelect&&!actionsDisabled?onPreviewSelect:void 0,onKeyDown:handleKeyDown,className:"relative aspect-video w-full overflow-hidden","aria-disabled":actionsDisabled||void 0,children:["video"===item.type?(0,jsx_runtime.jsx)("video",{src:item.url,className:"h-full w-full object-cover","data-aspect":"16/9",muted:!0,loop:!0,playsInline:!0,"aria-label":previewLabel}):(0,jsx_runtime.jsx)(next_image.A,{src:item.url,alt:previewAlt||name,"aria-label":previewLabel,fill:!0,sizes:"(min-width: 768px) 25vw, 50vw",className:"object-cover"}),(0,jsx_runtime.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent opacity-0 transition-opacity duration-200 group-hover:opacity-100 group-focus-within:opacity-100","aria-hidden":!0}),isRecent?(0,jsx_runtime.jsx)("div",{className:"absolute start-3 top-3",children:(0,jsx_runtime.jsx)(shadcn.vw,{variant:"success",children:t("cms.media.recent")})}):null,children,showReplacementOverlay?(0,jsx_runtime.jsxs)("div",{className:"bg-surface-1/90 text-center absolute inset-0 flex flex-col items-center justify-center gap-3 p-4 backdrop-blur","data-token":"--color-bg",children:[(0,jsx_runtime.jsx)(shadcn.ke,{value:null!=progressValue?progressValue:15,label:progressValue?`${Math.round(progressValue)}%`:void 0,className:"w-52 sm:w-64"}),(0,jsx_runtime.jsx)("p",{className:"text-sm font-medium","data-token":"--color-fg",children:t("cms.media.replacing")}),uploadError?(0,jsx_runtime.jsx)("p",{className:"text-xs text-danger","data-token":"--color-danger",children:uploadError}):null]}):null,deleting&&!showReplacementOverlay?(0,jsx_runtime.jsx)("div",{className:"bg-surface-1/90 text-center absolute inset-0 flex flex-col items-center justify-center gap-3 p-4 backdrop-blur","data-token":"--color-bg",children:(0,jsx_runtime.jsx)("p",{className:"text-sm font-medium","data-token":"--color-fg",children:t("cms.media.deleting")})}):null]})})}function formatFileSize(value){if("number"==typeof value&&Number.isFinite(value)){if(value<=0)return"0 B";const units=["B","KB","MB","GB","TB"],exponent=Math.min(Math.floor(Math.log(value)/Math.log(1024)),units.length-1),size=value/1024**exponent;return`${size.toFixed(size>=10?0:1)} ${units[exponent]}`}return"string"==typeof value&&value.trim().length>0?value:null}function MediaFileItem({item,shop:shopSlug,onDelete,onReplace,onSelect,onBulkToggle,selectionEnabled=!1,selected=!1,deleting=!1,replacing=!1,disabled=!1,onReplaceSuccess,onReplaceError}){const fileInputRef=(0,react.useRef)(null),name=(0,react.useMemo)(()=>{try{var _item_url_split_pop;return decodeURIComponent(null!==(_item_url_split_pop=item.url.split("/").pop())&&void 0!==_item_url_split_pop?_item_url_split_pop:item.url)}catch(e){return item.url}},[item.url]),meta=item,previewAlt="string"==typeof meta.altText&&meta.altText||"string"==typeof meta.alt&&meta.alt||"string"==typeof meta.title&&meta.title||name,tags=(0,react.useMemo)(()=>{const raw=item.tags;return Array.isArray(raw)?raw.filter(t=>"string"==typeof t):[]},[item]),fileSize=(0,react.useMemo)(()=>{const candidate=item;return"size"in candidate?formatFileSize(candidate.size):"fileSize"in candidate?formatFileSize(candidate.fileSize):"sizeLabel"in candidate?formatFileSize(candidate.sizeLabel):null},[item]),isRecent=(0,react.useMemo)(()=>{const flagged=item;return!!flagged.isRecent||(Array.isArray(flagged.flags)?(null!==(_flagged_flags=flagged.flags)&&void 0!==_flagged_flags?_flagged_flags:[]).some(flag=>{var _flag_toLowerCase;return"recent"===(null==flag||null===(_flag_toLowerCase=flag.toLowerCase)||void 0===_flag_toLowerCase?void 0:_flag_toLowerCase.call(flag))}):tags.some(tag=>{var _tag_toLowerCase;return"recent"===(null==tag||null===(_tag_toLowerCase=tag.toLowerCase)||void 0===_tag_toLowerCase?void 0:_tag_toLowerCase.call(tag))}));var _flagged_flags},[item,tags]),externalProgress=(0,react.useMemo)(()=>{const progressItem=item;return"number"==typeof progressItem.replaceProgress?progressItem.replaceProgress:"number"==typeof progressItem.progress?progressItem.progress:void 0},[item]),externalReplacing=Boolean("replacing"===item.status||item.isReplacing),{uploading,uploadProgress,uploadError,handleFileChange}=function useMediaReplacement({item,shop,disabled,previewAlt,tags,onDelete,onReplace,onReplaceSuccess,onReplaceError}){const[uploading,setUploading]=(0,react.useState)(!1),[uploadProgress,setUploadProgress]=(0,react.useState)(0),[uploadError,setUploadError]=(0,react.useState)(null),progressTimer=(0,react.useRef)(void 0),clearTimer=(0,react.useCallback)(()=>{progressTimer.current&&(clearInterval(progressTimer.current),progressTimer.current=void 0)},[]);(0,react.useEffect)(()=>clearTimer,[clearTimer]);const beginUploadProgress=(0,react.useCallback)(()=>{clearTimer(),setUploadProgress(4),progressTimer.current=setInterval(()=>{setUploadProgress(prev=>prev>=90?prev:prev+6)},300)},[clearTimer]),finishUploadProgress=(0,react.useCallback)(()=>{clearTimer(),setUploadProgress(100)},[clearTimer]);return{uploading,uploadProgress,uploadError,handleFileChange:(0,react.useCallback)(async event=>{var _event_target_files;if(disabled)return void(event.target.value="");const file=null===(_event_target_files=event.target.files)||void 0===_event_target_files?void 0:_event_target_files[0];if(event.target.value="",!file)return;setUploadError(null),setUploading(!0),beginUploadProgress();let errorMessage=null;try{const fd=new FormData;fd.append("file",file),previewAlt&&fd.append("altText",previewAlt),tags.length>0&&fd.append("tags",JSON.stringify(tags));const response=await fetch(`/cms/api/media?shop=${shop}`,{method:"POST",body:fd}),data=await response.json();if(!response.ok||"error"in data)throw new Error("Failed to upload replacement");finishUploadProgress(),await onDelete(item.url),onReplace(item.url,data),null==onReplaceSuccess||onReplaceSuccess(data)}catch(error){var _error_message;clearTimer(),setUploadProgress(0),errorMessage=null!==(_error_message=error.message)&&void 0!==_error_message?_error_message:"Replacement failed",setUploadError(errorMessage),errorMessage&&(null==onReplaceError||onReplaceError(errorMessage))}finally{setTimeout(()=>{setUploading(!1),setUploadProgress(0),errorMessage&&setUploadError(null)},errorMessage?2e3:400)}},[beginUploadProgress,clearTimer,disabled,finishUploadProgress,item.url,onDelete,onReplace,onReplaceError,onReplaceSuccess,previewAlt,shop,tags])}}({item,shop:shopSlug,disabled,previewAlt,tags,onDelete,onReplace,onReplaceSuccess,onReplaceError}),showReplacementOverlay=uploading||externalReplacing||replacing,actionsDisabled=disabled||deleting||showReplacementOverlay,deleteInProgress=deleting,replaceInProgress=showReplacementOverlay&&!deleting,progressValue=uploading?uploadProgress:"number"==typeof externalProgress?externalProgress:void 0,handleOpenDetails=()=>{actionsDisabled||null==onSelect||onSelect(item)},t=(0,src.c3)(),previewLabel="video"===item.type?t("cms.media.preview.video",{name:previewAlt||name}):t("cms.media.preview.image",{name:previewAlt||name}),statusMessage=t(deleteInProgress?"cms.media.deleting":"cms.media.replacing"),actionsLoading=deleteInProgress||replaceInProgress;var _item_title;return(0,jsx_runtime.jsxs)(shadcn.Zp,{className:(0,style.cn)("group relative flex h-full flex-col overflow-hidden border border-border-3 transition focus-within:outline-none focus-within:ring-[var(--ring-width)] focus-within:ring-offset-[var(--ring-offset-width)] focus-within:ring-primary",selected&&"ring-2 ring-primary"),"data-selected":selected,"data-deleting":deleting||void 0,"data-replacing":showReplacementOverlay||void 0,children:[(0,jsx_runtime.jsx)(MediaFilePreview,{item,name,previewAlt,previewLabel,actionsDisabled,onPreviewSelect:onSelect?()=>{actionsDisabled||null==onSelect||onSelect(item)}:void 0,onPreviewKeyDown:event=>{onSelect&&(actionsDisabled||"Enter"!==event.key&&" "!==event.key||(event.preventDefault(),onSelect(item)))},isRecent,showReplacementOverlay,deleting,progressValue,uploadError,children:(0,jsx_runtime.jsx)(MediaFileActions,{actionsDisabled,actionsLoading,deleteInProgress,replaceInProgress,statusMessage,selectionEnabled,selected,onBulkToggle:checked=>{actionsDisabled||null==onBulkToggle||onBulkToggle(item,!0===checked||"indeterminate"===checked)},onOpenDetails:onSelect?handleOpenDetails:void 0,onSelectItem:onSelect?()=>{actionsDisabled||null==onSelect||onSelect(item)}:void 0,onViewDetails:onSelect?handleOpenDetails:void 0,onReplaceRequest:()=>{var _fileInputRef_current;actionsDisabled||null===(_fileInputRef_current=fileInputRef.current)||void 0===_fileInputRef_current||_fileInputRef_current.click()},onDeleteRequest:()=>{actionsDisabled||deleteInProgress||onDelete(item.url)}})}),(0,jsx_runtime.jsxs)(shadcn.Wu,{className:"flex flex-1 flex-col gap-2 border-t border-border-2 bg-muted/30 p-4","data-token":"--color-muted",children:[" ",(0,jsx_runtime.jsxs)(primitives.d2,{alignY:"start",justify:"between",gap:3,children:[(0,jsx_runtime.jsxs)("div",{className:"min-w-0",children:[(0,jsx_runtime.jsx)("p",{className:"text-sm font-semibold text-fg line-clamp-2","data-token":"--color-fg",children:null!==(_item_title=item.title)&&void 0!==_item_title?_item_title:name}),(0,jsx_runtime.jsxs)("p",{className:"text-xs text-muted-foreground line-clamp-2","data-token":"--color-muted-fg",children:[" ",previewAlt]})]}),fileSize?(0,jsx_runtime.jsx)(shadcn.vw,{className:"shrink-0 whitespace-nowrap",children:fileSize}):null]}),tags.length>0?(0,jsx_runtime.jsx)(primitives.cV,{gap:1,children:tags.map(tag=>(0,jsx_runtime.jsx)(shadcn.vw,{children:tag},tag))}):null]}),(0,jsx_runtime.jsx)("input",{ref:fileInputRef,type:"file",accept:"image/*,video/*",className:"hidden",onChange:handleFileChange,disabled:actionsDisabled})]})}MediaFilePreview.__docgenInfo={description:"",methods:[],displayName:"MediaFilePreview",props:{item:{required:!0,tsType:{name:"intersection",raw:"MediaItem & { url: string }",elements:[{name:"MediaItem"},{name:"signature",type:"object",raw:"{ url: string }",signature:{properties:[{key:"url",value:{name:"string",required:!0}}]}}]},description:""},name:{required:!0,tsType:{name:"string"},description:""},previewAlt:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},previewLabel:{required:!0,tsType:{name:"string"},description:""},actionsDisabled:{required:!0,tsType:{name:"boolean"},description:""},onPreviewSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onPreviewKeyDown:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: KeyboardEvent<HTMLDivElement>) => void",signature:{arguments:[{type:{name:"KeyboardEvent",elements:[{name:"HTMLDivElement"}],raw:"KeyboardEvent<HTMLDivElement>"},name:"event"}],return:{name:"void"}}},description:""},isRecent:{required:!0,tsType:{name:"boolean"},description:""},showReplacementOverlay:{required:!0,tsType:{name:"boolean"},description:""},deleting:{required:!0,tsType:{name:"boolean"},description:""},progressValue:{required:!1,tsType:{name:"number"},description:""},uploadError:{required:!0,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},children:{required:!1,tsType:{name:"ReactNode"},description:""}}},MediaFileItem.__docgenInfo={description:"",methods:[],displayName:"MediaFileItem",props:{item:{required:!0,tsType:{name:"intersection",raw:"MediaItem & { url: string }",elements:[{name:"MediaItem"},{name:"signature",type:"object",raw:"{ url: string }",signature:{properties:[{key:"url",value:{name:"string",required:!0}}]}}]},description:"The media item to render.  The generic {@link MediaItem} type marks the\n`url` property as optional, but this component relies on it being present\n(we can't display or replace a file without a URL).  Narrow the type here\nto guarantee that `url` is a defined string throughout the component."},shop:{required:!0,tsType:{name:"string"},description:""},onDelete:{required:!0,tsType:{name:"signature",type:"function",raw:"(url: string) => void",signature:{arguments:[{type:{name:"string"},name:"url"}],return:{name:"void"}}},description:""},onReplace:{required:!0,tsType:{name:"signature",type:"function",raw:"(oldUrl: string, item: MediaItem) => void",signature:{arguments:[{type:{name:"string"},name:"oldUrl"},{type:{name:"MediaItem"},name:"item"}],return:{name:"void"}}},description:""},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(item: MediaItem & { url: string } | null) => void",signature:{arguments:[{type:{name:"union",raw:"MediaItem & { url: string } | null",elements:[{name:"intersection",raw:"MediaItem & { url: string }",elements:[{name:"MediaItem"},{name:"signature",type:"object",raw:"{ url: string }",signature:{properties:[{key:"url",value:{name:"string",required:!0}}]}}]},{name:"null"}]},name:"item"}],return:{name:"void"}}},description:""},onBulkToggle:{required:!1,tsType:{name:"signature",type:"function",raw:"(item: MediaItem & { url: string }, selected: boolean) => void",signature:{arguments:[{type:{name:"intersection",raw:"MediaItem & { url: string }",elements:[{name:"MediaItem"},{name:"signature",type:"object",raw:"{ url: string }",signature:{properties:[{key:"url",value:{name:"string",required:!0}}]}}]},name:"item"},{type:{name:"boolean"},name:"selected"}],return:{name:"void"}}},description:""},selectionEnabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},selected:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},deleting:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},replacing:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onReplaceSuccess:{required:!1,tsType:{name:"signature",type:"function",raw:"(newItem: MediaItem) => void",signature:{arguments:[{type:{name:"MediaItem"},name:"newItem"}],return:{name:"void"}}},description:""},onReplaceError:{required:!1,tsType:{name:"signature",type:"function",raw:"(message: string) => void",signature:{arguments:[{type:{name:"string"},name:"message"}],return:{name:"void"}}},description:""}}}}}]);