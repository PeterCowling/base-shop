"use strict";(self.webpackChunk_apps_storybook=self.webpackChunk_apps_storybook||[]).push([[1053],{"../../packages/ui/src/components/ab/ExperimentGate.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_ExperimentGate__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/ab/ExperimentGate.tsx"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js");function Harness(){const[enabled,setEnabled]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!0);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"checkbox",checked:enabled,onChange:e=>setEnabled(e.target.checked)}),"Enabled"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ExperimentGate__WEBPACK_IMPORTED_MODULE_1__.A,{enabled,fallback:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"rounded border p-2",children:"Fallback content (off)"}),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"rounded border p-2",children:"Gated content (on)"})})]})}const __WEBPACK_DEFAULT_EXPORT__={component:_ExperimentGate__WEBPACK_IMPORTED_MODULE_1__.A,tags:["autodocs"],parameters:{docs:{description:{component:"Minimal experiment/feature gate. This story toggles the `enabled` prop; URL and localStorage overrides also work when a `flag` is provided."}}}},Default={render:()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Harness,{})},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  render: () => <Harness />\n}",...Default.parameters?.docs?.source}}}},"../../packages/ui/src/components/ab/ExperimentGate.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>ExperimentGate});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js");function ExperimentGate({flag,enabled,fallback=null,children}){const[allow,setAllow]=react__WEBPACK_IMPORTED_MODULE_0__.useState(null==enabled||enabled);return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{if("boolean"!=typeof enabled)if(flag){try{const qp=new URL(window.location.href).searchParams.get(`exp-${flag}`);if("on"===qp||"off"===qp){const allow="on"===qp;setAllow(allow);try{localStorage.setItem(`exp:${flag}`,allow?"on":"off")}catch(e){}return}const ls=localStorage.getItem(`exp:${flag}`);if("on"===ls||"off"===ls)return void setAllow("on"===ls)}catch(e){}setAllow(!0)}else setAllow(!0);else setAllow(enabled)},[flag,enabled]),allow?children:fallback}}}]);