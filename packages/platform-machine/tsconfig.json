// packages/platform-machine/tsconfig.json
{
  "extends": "../../tsconfig.base.json",

  /* ------------------------------------------------------------------
   *  Compiler options
   * ------------------------------------------------------------------ */
  "compilerOptions": {
    /* JS + .d.ts output --------------------------------------------- */
    "composite": true,
    "declaration": true,
    "declarationMap": true,
    "noEmit": false,
    "rootDir": ".",
    "outDir": "dist",

    /* Node + React targets ------------------------------------------- */
    "types": ["node", "react"],

    /* Keep imports package-relative --------------------------------- */

    /* ----------------------------------------------------------------
     *  Path aliases â€” this block *overrides* the one from
     *  tsconfig.base.json, so we must re-declare everything we need.
     * ---------------------------------------------------------------- */
    "paths": {
      /* this package itself */
      "@acme/platform-machine": ["packages/platform-machine/src/index.ts", "packages/platform-machine/dist/index.d.ts"],
      "@acme/platform-machine/*": ["packages/platform-machine/src/*", "packages/platform-machine/dist/*"],

      /* platform core utilities */
      "@platform-core": ["packages/platform-core/src/index.ts", "packages/platform-core/dist/index.d.ts"],
      "@platform-core/*": ["packages/platform-core/src/*", "packages/platform-core/dist/*"],

      /* shared lib utilities */
      "@acme/lib": ["packages/lib/src/index.ts", "packages/lib/dist/index.d.ts"],
      "@acme/lib/*": ["packages/lib/src/*", "packages/lib/dist/*"],

      /* runtime config helper */
      "@config": ["packages/config/src/env/index.ts", "packages/config/dist/env/index.d.ts"],
      "@config/*": ["packages/config/src/env/*", "packages/config/dist/env/*"],

      "@acme/config": ["packages/config/src/index.ts", "packages/config/dist/index.d.ts"],
      "@acme/config/*": ["packages/config/src/*", "packages/config/dist/*"],

      /* date utilities */
      "@date-utils": ["packages/date-utils/src/index.ts", "packages/date-utils/dist/index.d.ts"],
      "@date-utils/*": ["packages/date-utils/src/*", "packages/date-utils/dist/*"],

      /* Stripe client */
      "@acme/stripe": ["packages/stripe/src/index.ts", "packages/stripe/dist/index.d.ts"],
      "@acme/stripe/*": ["packages/stripe/src/*", "packages/stripe/dist/*"],

      /* shared runtime types */
      "@acme/types": ["packages/types/src/index.ts", "packages/types/dist/index.d.ts"],
      "@acme/types/*": ["packages/types/src/*", "packages/types/dist/*"]
    }
  },

  /* ------------------------------------------------------------------
   *  Project references
   * ------------------------------------------------------------------ */
  "references": [
    { "path": "../platform-core" },
    { "path": "../lib" },
    { "path": "../config" },
    { "path": "../date-utils" },
    { "path": "../types" },
    { "path": "../stripe" }
  ],

  /* ------------------------------------------------------------------
   *  Source globs
   * ------------------------------------------------------------------ */
  "include": ["src/**/*", "releaseDepositsService.ts"],
  "exclude": [
    "dist", // freshly emitted output
    ".turbo", // turbo cache
    "node_modules", // package deps (if any local)
    "src/__tests__" // tests aren't part of the build
  ]
}
