(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1881],{1330:(e,t,a)=>{"use strict";a.d(t,{default:()=>n});var r=a(6586),l=a(7826);function s(e,t){return e.replace(/\s+/g," ").trim().slice(0,t)}function n(e){let{monoClassName:t}=e,[a,n]=l.useState(""),[o,c]=l.useState(""),[i,d]=l.useState(""),[u,m]=l.useState("idle"),[x,g]=l.useState(null),[p,h]=l.useState(null),f=s(o,120),v=async e=>{e.preventDefault(),h(null),m("loading");try{var t,r,l;let e={handle:s(a,80),referredBy:f,note:s(i,280)},n=await fetch("/api/access-request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){let e="Request failed";try{let t=await n.json();(null==t?void 0:t.error)==="rate_limited"&&(e="Too many requests. Try again later.")}catch(e){}throw Error(e)}let o=null!=(l=null==(t=(null!=(r=(await n.json()).id)?r:crypto.randomUUID()).split("-")[0])?void 0:t.toUpperCase())?l:"REQ";g("RQ-".concat(o)),m("success")}catch(e){h(e instanceof Error?e.message:"Request failed"),m("error")}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs uppercase tracking-[0.35em] ".concat(null!=t?t:""),children:"Request invite"}),(0,r.jsx)("div",{className:"mt-2 text-sm text-[color:var(--gate-muted)]",children:"No email. No outbound links. Just a quiet signal."})]}),(0,r.jsx)("div",{className:"hidden rounded-full border border-border-2 bg-muted px-3 py-1 text-[10px] uppercase tracking-[0.4em] text-[color:var(--gate-muted)] md:inline-flex",children:"Offline review"})]}),(0,r.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,r.jsxs)("label",{className:"block text-xs uppercase tracking-[0.3em] text-[color:var(--gate-muted)]",children:["Alias",(0,r.jsx)("input",{value:a,onChange:e=>n(e.target.value),placeholder:"Handle or collective name",className:"mt-2 w-full rounded-md border border-border-2 bg-white px-3 py-3 text-sm text-[color:var(--gate-ink)] placeholder:text-[color:var(--gate-muted)] focus:border-[color:var(--gate-ink)] focus:outline-none focus:ring-2 focus:ring-[color:var(--gate-ink)]/20",autoComplete:"off"})]}),(0,r.jsxs)("label",{className:"block text-xs uppercase tracking-[0.3em] text-[color:var(--gate-muted)]",children:["Sent by",(0,r.jsx)("input",{value:o,onChange:e=>c(e.target.value),placeholder:"Who sent you?",className:"mt-2 w-full rounded-md border border-border-2 bg-white px-3 py-3 text-sm text-[color:var(--gate-ink)] placeholder:text-[color:var(--gate-muted)] focus:border-[color:var(--gate-ink)] focus:outline-none focus:ring-2 focus:ring-[color:var(--gate-ink)]/20",autoComplete:"off"})]}),(0,r.jsxs)("label",{className:"block text-xs uppercase tracking-[0.3em] text-[color:var(--gate-muted)]",children:["Why you",(0,r.jsx)("textarea",{value:i,onChange:e=>d(e.target.value),placeholder:"What pulls you into the underground?",rows:4,className:"mt-2 w-full resize-none rounded-md border border-border-2 bg-white px-3 py-3 text-sm text-[color:var(--gate-ink)] placeholder:text-[color:var(--gate-muted)] focus:border-[color:var(--gate-ink)] focus:outline-none focus:ring-2 focus:ring-[color:var(--gate-ink)]/20"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,r.jsx)("button",{type:"submit",disabled:"loading"===u,className:"inline-flex items-center gap-2 rounded-md border border-[color:var(--gate-ink)] bg-[color:var(--gate-ink)] px-4 py-2 text-sm font-semibold text-white transition hover:opacity-90 disabled:cursor-not-allowed disabled:opacity-60",children:"loading"===u?"Transmitting...":"Request access"}),(0,r.jsx)("div",{className:"text-xs text-[color:var(--gate-muted)]",children:"We do not send email. Keys move hand to hand."})]}),"success"===u?(0,r.jsxs)("div",{className:"rounded-md border border-border-2 bg-muted p-3 text-sm",children:[(0,r.jsxs)("div",{className:"text-[color:var(--gate-ink)]",children:["Request logged. Your receipt:"," ",(0,r.jsx)("span",{className:t,children:x})]}),f?(0,r.jsxs)("div",{className:"mt-1 text-[color:var(--gate-muted)]",children:["Sent by: ",(0,r.jsx)("span",{className:t,children:f})]}):null,(0,r.jsx)("div",{className:"mt-1 text-[color:var(--gate-muted)]",children:"If approved, you will receive a key from the person who sent you here."})]}):null,"error"===u?(0,r.jsx)("div",{className:"rounded-md border border-red-300 bg-red-50 p-3 text-sm text-red-700",children:null!=p?p:"Request failed. Try again."}):null]})]})}},2203:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,7146,23)),Promise.resolve().then(a.bind(a,1330)),Promise.resolve().then(a.bind(a,9636)),Promise.resolve().then(a.t.bind(a,55,23)),Promise.resolve().then(a.t.bind(a,2486,23)),Promise.resolve().then(a.t.bind(a,5711,23))},2486:e=>{e.exports={style:{fontFamily:"'Work Sans', 'Work Sans Fallback'",fontStyle:"normal"},className:"__className_f9d2a6"}},5711:e=>{e.exports={style:{fontFamily:"'IBM Plex Mono', 'IBM Plex Mono Fallback'",fontStyle:"normal"},className:"__className_05908d"}},7146:e=>{e.exports={gateFade:"access_gateFade__cIDx6",gateDelay:"access_gateDelay__KdbtV",signalSwap:"access_signalSwap__9g1Bd"}},9636:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var r=a(6586),l=a(7826),s=a(7146),n=a.n(s);function o(e){return e.toString().padStart(2,"0")}function c(e){var t;let{dropLabel:a,dropOpensAt:s,keysRemaining:c,keySeries:i,monoClassName:d}=e,[u,m]=l.useState(null),[x,g]=l.useState(!1),[p,h]=l.useState(0);l.useEffect(()=>{if(!s)return;let e=new Date(s);if(Number.isNaN(e.getTime()))return;let t=()=>{let t=e.getTime()-Date.now();t<=0?(g(!0),m(null)):(g(!1),m(function(e){let t=Math.max(0,Math.floor(e/1e3)),a=Math.floor(t/3600),r=Math.floor(t%3600/60),l=t%60;if(a>=24){let e=Math.floor(a/24);return"".concat(e,"d ").concat(o(a%24),":").concat(o(r),":").concat(o(l))}return"".concat(o(a),":").concat(o(r),":").concat(o(l))}(t)))};t();let a=window.setInterval(t,1e3);return()=>window.clearInterval(a)},[s]),l.useEffect(()=>{if(!i||i.length<=1)return;let e=window.setInterval(()=>{h(e=>(e+1)%i.length)},3200);return()=>window.clearInterval(e)},[i]);let f=void 0!==c&&""!==c,v=!!(a||s),b=!!(i&&i.length),y=b&&null!=(t=null==i?void 0:i[p])?t:"";return f||v||b?(0,r.jsxs)("div",{className:"mt-5 grid gap-3 rounded-lg border border-border-2 bg-muted p-4 text-xs uppercase tracking-[0.3em] text-[color:var(--gate-muted)]",children:[v?(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,r.jsx)("span",{children:a||"Next drop"}),(0,r.jsx)("span",{className:d,children:x?"Live":u?"Opens in ".concat(u):"Schedule TBD"})]}):null,f?(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,r.jsx)("span",{children:"Keys remaining"}),(0,r.jsx)("span",{className:d,children:c})]}):null,b?(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,r.jsx)("span",{children:"Series in circulation"}),(0,r.jsx)("span",{className:"".concat(null!=d?d:""," ").concat(n().signalSwap),children:y},y)]}):null]}):null}}},e=>{var t=t=>e(e.s=t);e.O(0,[7882,55,9956,2889,7358],()=>t(2203)),_N_E=e.O()}]);