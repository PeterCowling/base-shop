"use strict";(self.webpackChunkcms_monorepo=self.webpackChunkcms_monorepo||[]).push([[8284],{"./packages/ui/src/components/cms/blocks/Lookbook.Matrix.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Lookbook_Matrix_stories});var Lookbook=__webpack_require__("./packages/ui/src/components/cms/blocks/Lookbook.tsx"),createStories=__webpack_require__("./packages/ui/src/story-utils/createStories.ts");const Lookbook_fixtures_namespaceObject=JSON.parse('{"items":[{"src":"/images/look1.jpg","alt":"Look 1","hotspots":[{"x":20,"y":40,"sku":"green-sneaker"}]},{"src":"/images/look2.jpg","alt":"Look 2","hotspots":[{"x":60,"y":30,"sku":"blue-shirt"}]}]}');var types=__webpack_require__("./node_modules/.pnpm/zod@3.25.73/node_modules/zod/v3/types.js"),console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const meta={title:"CMS Blocks/Lookbook/Matrix",component:Lookbook.A,tags:["autodocs"],args:{...Lookbook_fixtures_namespaceObject}},Lookbook_Matrix_stories=meta,baseArgs=meta.args,Hotspot=types.Ik({x:types.ai(),y:types.ai(),sku:types.Yj().optional()}),Item=types.Ik({src:types.Yj().optional(),alt:types.Yj().optional(),hotspots:types.YO(Hotspot).optional()});try{types.Ik({items:types.YO(Item)}).parse(Lookbook_fixtures_namespaceObject)}catch(e){console.error("Invalid Lookbook fixture:",e)}const Default=(0,createStories.T)(baseArgs,{},"default",{a11y:!0,viewports:["desktop"],tags:["visual"]}),__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"makeStateStory(baseArgs, {}, 'default', {\n  a11y: true,\n  viewports: ['desktop'],\n  tags: ['visual']\n})",...Default.parameters?.docs?.source}}}},"./packages/ui/src/components/cms/blocks/Lookbook.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Lookbook});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js"),next_image__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/@storybook+nextjs@8.6.14_@swc+core@1.12.9_esbuild@0.25.5_next@15.3.5_@babel+core@7.28.4_f309bebf97d2c09aa3c164b2abf593ce/node_modules/@storybook/nextjs/dist/images/next-image.mjs");const SNAP=5;function Lookbook({items=[],onItemsChange}){const[list,setList]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(items),listRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(list),containerRefs=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]);if((0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{setList(items)},[items]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{listRef.current=list},[list]),0===items.length)return null;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"space-y-2",children:list.map((item,idx)=>{var _item_hotspots,_item_alt;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{ref:el=>{containerRefs.current[idx]=el},className:"relative h-full w-full",children:[item.src&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"absolute inset-0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(next_image__WEBPACK_IMPORTED_MODULE_2__.A,{src:item.src,alt:null!==(_item_alt=item.alt)&&void 0!==_item_alt?_item_alt:"",fill:!0,className:"object-cover",sizes:"100vw"})}),null===(_item_hotspots=item.hotspots)||void 0===_item_hotspots?void 0:_item_hotspots.map((p,i)=>{return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{onPointerDown:(itemIdx=idx,hotspotIdx=i,e=>{e.preventDefault(),e.stopPropagation();const container=containerRefs.current[itemIdx];if(!container)return;const rect=container.getBoundingClientRect(),move=ev=>{const rawX=(ev.clientX-rect.left)/rect.width*100,rawY=(ev.clientY-rect.top)/rect.height*100,snap=v=>Math.max(0,Math.min(100,Math.round(v/SNAP)*SNAP)),next=listRef.current.map((item,i)=>{var _item_hotspots;return i===itemIdx?{...item,hotspots:null===(_item_hotspots=item.hotspots)||void 0===_item_hotspots?void 0:_item_hotspots.map((p,idx)=>idx===hotspotIdx?{...p,x:snap(rawX),y:snap(rawY)}:p)}:item});setList(next)},up=()=>{document.removeEventListener("pointermove",move),document.removeEventListener("pointerup",up),null==onItemsChange||onItemsChange(listRef.current)};document.addEventListener("pointermove",move),document.addEventListener("pointerup",up)}),className:"absolute h-4 w-4 -translate-x-1/2 -translate-y-1/2 cursor-move rounded-full bg-primary",style:{left:`${p.x}%`,top:`${p.y}%`},title:p.sku},p.sku?`sku-${p.sku}`:`${p.x}-${p.y}`);var itemIdx,hotspotIdx})]},(item=>{var _item_hotspots,_item_hotspots_map_join;const hs=null!==(_item_hotspots_map_join=null===(_item_hotspots=item.hotspots)||void 0===_item_hotspots?void 0:_item_hotspots.map(h=>{var _h_sku;return`${null!==(_h_sku=h.sku)&&void 0!==_h_sku?_h_sku:"_"}-${h.x}-${h.y}`}).join("|"))&&void 0!==_item_hotspots_map_join?_item_hotspots_map_join:"no-hotspots";var _item_src,_item_alt;return`${null!==(_item_src=item.src)&&void 0!==_item_src?_item_src:"no-src"}-${null!==(_item_alt=item.alt)&&void 0!==_item_alt?_item_alt:"_"}-${hs}`})(item))})})}Lookbook.__docgenInfo={description:"",methods:[],displayName:"Lookbook",props:{items:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  src?: string;\n  alt?: string;\n  hotspots?: LookbookHotspot[];\n}",signature:{properties:[{key:"src",value:{name:"string",required:!1}},{key:"alt",value:{name:"string",required:!1}},{key:"hotspots",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  sku?: string;\n  x: number; // percentage\n  y: number; // percentage\n}",signature:{properties:[{key:"sku",value:{name:"string",required:!1}},{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]}}],raw:"LookbookHotspot[]",required:!1}}]}}],raw:"LookbookItem[]"},description:"",defaultValue:{value:"[]",computed:!1}},onItemsChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(items: LookbookItem[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  src?: string;\n  alt?: string;\n  hotspots?: LookbookHotspot[];\n}",signature:{properties:[{key:"src",value:{name:"string",required:!1}},{key:"alt",value:{name:"string",required:!1}},{key:"hotspots",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  sku?: string;\n  x: number; // percentage\n  y: number; // percentage\n}",signature:{properties:[{key:"sku",value:{name:"string",required:!1}},{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]}}],raw:"LookbookHotspot[]",required:!1}}]}}],raw:"LookbookItem[]"},name:"items"}],return:{name:"void"}}},description:"Callback when hotspots move. Useful in editors"}}}},"./packages/ui/src/story-utils/createStories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function makeStateStory(base,patch,state,opts={}){const{a11y=!0,critical=!1,rtl=!1,viewports=[],tags=[],docsDescription}=opts,parameters={a11y:{disable:!a11y},dataState:state};rtl&&(parameters.rtl=!0),viewports.length&&(parameters.viewport={defaultViewport:viewports[0]}),docsDescription&&(parameters.docs={description:{story:docsDescription}});const computedTags=["autodocs",a11y?"a11y":"no-a11y",critical?"critical":"noncritical",...tags];parameters.chromatic={disable:!computedTags.includes("visual")};return{args:{...base,...patch},parameters,tags:computedTags}}__webpack_require__.d(__webpack_exports__,{T:()=>makeStateStory})}}]);