"use strict";(self.webpackChunkcms_monorepo=self.webpackChunkcms_monorepo||[]).push([[8145],{"./packages/ui/src/components/atoms/Skeleton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>Skeleton});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js"),_utils_style__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/ui/src/utils/style/index.ts");const Skeleton=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref,className:(0,_utils_style__WEBPACK_IMPORTED_MODULE_2__.cn)("bg-muted animate-pulse rounded-md",className),...props}));Skeleton.displayName="Skeleton",Skeleton.__docgenInfo={description:"",methods:[],displayName:"Skeleton"}},"./packages/ui/src/components/molecules/PaginationControl.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>PaginationControl});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),_utils_style__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js"),__webpack_require__("./packages/ui/src/utils/style/index.ts")),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/ui/src/components/atoms/shadcn/index.ts"),_atoms_primitives__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/ui/src/components/atoms/primitives/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/i18n/src/index.ts");function PaginationControl({page,pageCount,onPageChange,className,...props}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_5__.c3)(),start=Math.max(1,Math.min(page-2,pageCount-5+1)),end=Math.min(pageCount,start+5-1),pages=[];for(let i=start;i<=end;i++)pages.push(i);const change=p=>{p>=1&&p<=pageCount&&(null==onPageChange||onPageChange(p))};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_primitives__WEBPACK_IMPORTED_MODULE_4__.cV,{alignY:"center",gap:2,className:(0,_utils_style__WEBPACK_IMPORTED_MODULE_2__.cn)(className),...props,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.$n,{variant:"outline",onClick:()=>change(page-1),disabled:1===page,children:t("Prev")}),pages.map(p=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.$n,{variant:p===page?"default":"outline",onClick:()=>change(p),children:p},p)),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.$n,{variant:"outline",onClick:()=>change(page+1),disabled:page===pageCount,children:t("Next")})]})}PaginationControl.displayName="PaginationControl",PaginationControl.__docgenInfo={description:"",methods:[],displayName:"PaginationControl",props:{page:{required:!0,tsType:{name:"number"},description:""},pageCount:{required:!0,tsType:{name:"number"},description:""},onPageChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(page: number) => void",signature:{arguments:[{type:{name:"number"},name:"page"}],return:{name:"void"}}},description:""}}}},"./packages/ui/src/components/molecules/SearchBar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>SearchBar});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),_radix_ui_react_icons__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-icons@1.3.2_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-icons/dist/react-icons.esm.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/ui/src/components/atoms/shadcn/index.ts"),_utils_style__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/ui/src/utils/style/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/i18n/src/index.ts"),_i18n_resolveText__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/i18n/src/resolveText.ts");function SearchBar({suggestions,onSelect,onSearch,placeholder,label,query:initialQuery="",locale="en"}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_4__.c3)(),[query,setQuery]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialQuery),[matches,setMatches]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[isSelecting,setIsSelecting]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[focused,setFocused]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[highlightedIndex,setHighlightedIndex]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(-1),inputId=(0,react__WEBPACK_IMPORTED_MODULE_1__.useId)();(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{setQuery(initialQuery)},[initialQuery]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{if(isSelecting||!focused)return setMatches(prev=>prev.length?[]:prev),void setHighlightedIndex(prev=>-1!==prev?-1:prev);if(!query)return setMatches(prev=>prev.length?[]:prev),void setHighlightedIndex(prev=>-1!==prev?-1:prev);const q=query.toLowerCase(),nextMatches=suggestions.filter(s=>s.toLowerCase().includes(q)).slice(0,5);setMatches(prev=>prev.length===nextMatches.length&&prev.every((v,i)=>v===nextMatches[i])?prev:nextMatches),setHighlightedIndex(prev=>-1!==prev?-1:prev)},[query,suggestions,isSelecting,focused]);const handleSelect=value=>{setIsSelecting(!0),setQuery(value),setMatches([]),null==onSelect||onSelect(value)};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"relative w-full sm:w-80",children:[" ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:inputId,className:"sr-only",children:label}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.pd,{id:inputId,type:"search","aria-label":label,value:query,onChange:e=>setQuery(e.target.value),onKeyDown:e=>{"ArrowDown"===e.key?(e.preventDefault(),matches.length>0&&setHighlightedIndex(prev=>(prev+1)%matches.length)):"ArrowUp"===e.key?(e.preventDefault(),matches.length>0&&setHighlightedIndex(prev=>(prev-1+matches.length)%matches.length)):"Enter"===e.key&&(highlightedIndex>=0&&matches[highlightedIndex]?(e.preventDefault(),handleSelect(matches[highlightedIndex])):(setMatches([]),null==onSearch||onSearch(query)))},onFocus:()=>setFocused(!0),onBlur:()=>{setFocused(!1),isSelecting?setIsSelecting(!1):null==onSearch||onSearch(query)},placeholder:placeholder?"string"==typeof placeholder?placeholder:(0,_i18n_resolveText__WEBPACK_IMPORTED_MODULE_5__.W)(placeholder,locale,t):t("search.placeholder"),className:"pe-8"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_icons__WEBPACK_IMPORTED_MODULE_6__.$p$,{className:"text-muted-foreground pointer-events-none absolute top-2 end-2 h-4 w-4"})," ",matches.length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("ul",{role:"listbox",className:"bg-background absolute mt-1 w-full rounded-md border shadow",children:matches.map((m,i)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("li",{id:`${inputId}-option-${i}`,role:"option","aria-selected":i===highlightedIndex,onMouseDown:()=>handleSelect(m),className:(0,_utils_style__WEBPACK_IMPORTED_MODULE_3__.cn)("text-fg hover:bg-accent hover:text-accent-foreground cursor-pointer px-3 py-1",i===highlightedIndex&&"bg-accent text-accent-foreground"),children:m},m))})]})}SearchBar.__docgenInfo={description:"",methods:[],displayName:"SearchBar",props:{suggestions:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"Suggestions to filter based on the search query"},placeholder:{required:!1,tsType:{name:"TranslatableText"},description:""},label:{required:!0,tsType:{name:"string"},description:"Accessible label for the search input"},query:{required:!1,tsType:{name:"string"},description:"Optional search query to display",defaultValue:{value:'""',computed:!1}},locale:{required:!1,tsType:{name:"Locale"},description:"Locale to resolve inline placeholder",defaultValue:{value:'"en"',computed:!1}}}}},"./packages/ui/src/components/templates/SearchResultsTemplate.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,Loading:()=>Loading,WithFilters:()=>WithFilters,__namedExportsOrder:()=>__namedExportsOrder,default:()=>SearchResultsTemplate_stories});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js");function FilterBar({definitions,values:externalValues,onChange}){const[values,setValues]=(0,react.useState)(null!=externalValues?externalValues:{}),deferred=(0,react.useDeferredValue)(values);function handleChange(def,value){setValues(prev=>({...prev,[def.name]:""===value?void 0:"number"===def.type?Number(value):value}))}return(0,react.useEffect)(()=>{setValues(null!=externalValues?externalValues:{})},[externalValues]),(0,react.useEffect)(()=>{onChange(deferred)},[deferred,onChange]),(0,jsx_runtime.jsxs)("form",{"aria-label":"Filters",className:"mb-6 flex gap-4 items-center justify-between flex-wrap",onSubmit:e=>e.preventDefault(),children:[definitions.map(def=>{var _values_def_name;return"select"===def.type?(0,jsx_runtime.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[def.label,":",(0,jsx_runtime.jsxs)("select",{value:null!==(_values_def_name=values[def.name])&&void 0!==_values_def_name?_values_def_name:"",onChange:e=>handleChange(def,e.target.value),className:"border rounded px-2 py-1 text-sm",children:[(0,jsx_runtime.jsx)("option",{value:"",children:"All"})," ",def.options.map(opt=>(0,jsx_runtime.jsx)("option",{children:opt},opt))]})]},def.name):(0,jsx_runtime.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[def.label,":",(0,jsx_runtime.jsx)("input",{type:"number",value:void 0===values[def.name]?"":values[def.name],onChange:e=>handleChange(def,e.target.value),className:"border rounded px-2 py-1 text-sm"})]},def.name)}),(0,jsx_runtime.jsx)("button",{type:"button",onClick:function handleClear(){setValues({})},className:"text-sm underline min-h-10 min-w-10",children:"Clear Filters"})]})}FilterBar.__docgenInfo={description:"",methods:[],displayName:"FilterBar",props:{definitions:{required:!0,tsType:{name:"Array",elements:[{name:"union",raw:'| { name: string; label: string; type: "select"; options: string[] }\n| { name: string; label: string; type: "number" }',elements:[{name:"signature",type:"object",raw:'{ name: string; label: string; type: "select"; options: string[] }',signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"type",value:{name:"literal",value:'"select"',required:!0}},{key:"options",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!0}}]}},{name:"signature",type:"object",raw:'{ name: string; label: string; type: "number" }',signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"type",value:{name:"literal",value:'"number"',required:!0}}]}}]}],raw:"FilterDefinition[]"},description:""},values:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"union",raw:"string | number | undefined",elements:[{name:"string"},{name:"number"},{name:"undefined"}]}],raw:"Record<string, string | number | undefined>"},description:"Current values for the filters. When provided, the component becomes\ncontrolled and will mirror any external updates. When omitted, an empty\nobject is assumed."},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(filters: Filters) => void",signature:{arguments:[{type:{name:"Record",elements:[{name:"string"},{name:"union",raw:"string | number | undefined",elements:[{name:"string"},{name:"number"},{name:"undefined"}]}],raw:"Record<string, string | number | undefined>"},name:"filters"}],return:{name:"void"}}},description:""}}};var src=__webpack_require__("./packages/i18n/src/index.ts"),style=__webpack_require__("./packages/ui/src/utils/style/index.ts"),PaginationControl=__webpack_require__("./packages/ui/src/components/molecules/PaginationControl.tsx"),SearchBar=__webpack_require__("./packages/ui/src/components/molecules/SearchBar.tsx"),ProductGrid=__webpack_require__("./packages/ui/src/components/organisms/ProductGrid.tsx"),Skeleton=__webpack_require__("./packages/ui/src/components/atoms/Skeleton.tsx"),primitives=__webpack_require__("./packages/ui/src/components/atoms/primitives/index.ts");function SearchResultsTemplate({suggestions,results,page,pageCount,minItems,maxItems,query,onQueryChange,onPageChange,filters,isLoading,className,...props}){const t=(0,src.c3)(),searchAriaLabel=t("shop.searchAriaLabel");var _ref;const rawCount=null!==(_ref=null!=maxItems?maxItems:minItems)&&void 0!==_ref?_ref:1,columnCount=Number.isFinite(rawCount)&&rawCount>0?Math.floor(rawCount):1,skeletonKeys=react.useMemo(()=>Array.from({length:columnCount},()=>Math.random().toString(36).slice(2)),[columnCount]);return(0,jsx_runtime.jsxs)("div",{className:(0,style.cn)("space-y-6",className),...props,children:[(0,jsx_runtime.jsx)(SearchBar.I,{query,suggestions,onSelect:onQueryChange,onSearch:onQueryChange,placeholder:t("shop.searchPlaceholder"),label:searchAriaLabel}),filters,isLoading?(0,jsx_runtime.jsx)(primitives.xA,{"data-testid":"search-results-loading",cols:1,gap:6,style:{gridTemplateColumns:`repeat(${columnCount}, minmax(0, 1fr))`},children:Array.from({length:columnCount}).map((_,i)=>(0,jsx_runtime.jsx)(Skeleton.E,{className:"h-48 w-full"},skeletonKeys[i]))}):results.length>0?(0,jsx_runtime.jsx)(ProductGrid.q,{products:results,minItems,maxItems}):(0,jsx_runtime.jsx)("p",{children:t("search.noResults")}),pageCount>1&&(0,jsx_runtime.jsx)(PaginationControl._,{page,pageCount,onPageChange})]})}SearchResultsTemplate.__docgenInfo={description:"",methods:[],displayName:"SearchResultsTemplate",props:{suggestions:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},results:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"skuSchema"}],raw:"z.infer<typeof skuSchema>"}],raw:"SKU[]"},description:""},page:{required:!0,tsType:{name:"number"},description:""},pageCount:{required:!0,tsType:{name:"number"},description:""},minItems:{required:!1,tsType:{name:"number"},description:"Minimum items to show"},maxItems:{required:!1,tsType:{name:"number"},description:"Maximum items to show"},query:{required:!1,tsType:{name:"string"},description:"Optional search query to display"},onQueryChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(query: string) => void",signature:{arguments:[{type:{name:"string"},name:"query"}],return:{name:"void"}}},description:""},onPageChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(page: number) => void",signature:{arguments:[{type:{name:"number"},name:"page"}],return:{name:"void"}}},description:""},filters:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Optional filters to render between the search bar and results"},isLoading:{required:!1,tsType:{name:"boolean"},description:"Show loading state"}},composes:["Omit"]};const meta={component:SearchResultsTemplate,args:{suggestions:["Product 1","Product 2"],results:[{id:"1",slug:"product-1",title:"Product 1",price:1e3,deposit:0,stock:0,forSale:!0,forRental:!1,media:[{url:"https://placehold.co/300",type:"image"}],sizes:[],description:""},{id:"2",slug:"product-2",title:"Product 2",price:1500,deposit:0,stock:0,forSale:!0,forRental:!1,media:[{url:"https://placehold.co/300",type:"image"}],sizes:[],description:""}],page:1,pageCount:5,minItems:1,maxItems:4,isLoading:!1,query:""},argTypes:{minItems:{control:{type:"number"}},maxItems:{control:{type:"number"}}}},SearchResultsTemplate_stories=meta,Default={},WithFilters={args:{...meta.args,filters:(0,jsx_runtime.jsx)(FilterBar,{onChange:()=>{},definitions:[{name:"size",label:"Size",type:"select",options:["S","M"]}]})}},Loading={args:{...meta.args,results:[],isLoading:!0}},__namedExportsOrder=["Default","WithFilters","Loading"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{}",...Default.parameters?.docs?.source}}},WithFilters.parameters={...WithFilters.parameters,docs:{...WithFilters.parameters?.docs,source:{originalSource:'{\n  args: {\n    ...meta.args,\n    filters: <FilterBar onChange={() => undefined} definitions={[{\n      name: "size",\n      label: "Size",\n      type: "select",\n      options: ["S", "M"]\n    }]} />\n  }\n}',...WithFilters.parameters?.docs?.source}}},Loading.parameters={...Loading.parameters,docs:{...Loading.parameters?.docs,source:{originalSource:"{\n  args: {\n    ...meta.args,\n    results: [],\n    isLoading: true\n  }\n}",...Loading.parameters?.docs?.source}}}}}]);