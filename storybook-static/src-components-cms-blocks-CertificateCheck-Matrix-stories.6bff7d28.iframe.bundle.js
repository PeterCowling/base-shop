"use strict";(self.webpackChunkcms_monorepo=self.webpackChunkcms_monorepo||[]).push([[471],{"./packages/i18n/src/resolveText.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function resolveText(value,locale,t){if("string"==typeof value)return value;if("key"===(null==value?void 0:value.type))return t(value.key,value.params);if("inline"===(null==value?void 0:value.type)){const chain=function fallbackChain(locale){switch(locale){case"de":return["de","en"];case"it":return["it","en"];default:return["en"]}}(locale);for(const loc of chain){var _value_value;const v=null===(_value_value=value.value)||void 0===_value_value?void 0:_value_value[loc];if("string"==typeof v&&v.length>0)return v}return""}return""}__webpack_require__.d(__webpack_exports__,{W:()=>resolveText})},"./packages/ui/src/components/cms/blocks/CertificateCheck.Matrix.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,ErrorState:()=>ErrorState,__namedExportsOrder:()=>__namedExportsOrder,default:()=>CertificateCheck_Matrix_stories});var CertificateCheck=__webpack_require__("./packages/ui/src/components/cms/blocks/CertificateCheck.tsx"),createStories=__webpack_require__("./packages/ui/src/story-utils/createStories.ts");const CertificateCheck_fixtures_namespaceObject=JSON.parse('{"placeholder":"Serial number"}');var types=__webpack_require__("./node_modules/.pnpm/zod@3.25.73/node_modules/zod/v3/types.js"),console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const meta={title:"CMS Blocks/CertificateCheck/Matrix",component:CertificateCheck.A,tags:["autodocs"],args:{...CertificateCheck_fixtures_namespaceObject}},CertificateCheck_Matrix_stories=meta,baseArgs=meta.args;try{types.Ik({placeholder:types.Yj().optional()}).parse(CertificateCheck_fixtures_namespaceObject)}catch(e){console.error("Invalid CertificateCheck fixture:",e)}const Default=(0,createStories.T)(baseArgs,{adapter:async()=>({ok:!0,message:"Validated"})},"default",{a11y:!0,viewports:["desktop"],tags:["visual"]}),ErrorState=(0,createStories.T)(baseArgs,{adapter:async()=>({ok:!1,message:"Invalid"})},"default",{a11y:!0,viewports:["desktop"],tags:["visual"]}),__namedExportsOrder=["Default","ErrorState"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"makeStateStory(baseArgs, {\n  adapter: okAdapter\n}, 'default', {\n  a11y: true,\n  viewports: ['desktop'],\n  tags: ['visual']\n})",...Default.parameters?.docs?.source}}},ErrorState.parameters={...ErrorState.parameters,docs:{...ErrorState.parameters?.docs,source:{originalSource:"makeStateStory(baseArgs, {\n  adapter: failAdapter\n}, 'default', {\n  a11y: true,\n  viewports: ['desktop'],\n  tags: ['visual']\n})",...ErrorState.parameters?.docs?.source}}}},"./packages/ui/src/components/cms/blocks/CertificateCheck.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>CertificateCheck});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js"),_acme_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/i18n/src/index.ts"),_i18n_resolveText__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/i18n/src/resolveText.ts");function CertificateCheck({productId,placeholder,locale="en",adapter,className,...rest}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_2__.c3)(),[serial,setSerial]=react__WEBPACK_IMPORTED_MODULE_1__.useState(""),[status,setStatus]=react__WEBPACK_IMPORTED_MODULE_1__.useState("idle"),[message,setMessage]=react__WEBPACK_IMPORTED_MODULE_1__.useState(void 0),effectivePlaceholder=placeholder?"string"==typeof placeholder?placeholder:"key"===placeholder.type?t(placeholder.key,placeholder.params):"inline"===placeholder.type?(0,_i18n_resolveText__WEBPACK_IMPORTED_MODULE_3__.W)(placeholder,locale,t):t("cert.placeholder"):t("cert.placeholder");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className,...rest,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"text",value:serial,onChange:e=>setSerial(e.target.value),placeholder:effectivePlaceholder,className:"w-60 rounded border px-2 py-1 text-sm min-h-10"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"button",onClick:async()=>{if(adapter&&serial){setStatus("checking");try{const res=await adapter({productId,serial});setStatus(res.valid?"ok":"fail"),setMessage(res.message)}catch(e){setStatus("fail"),setMessage(t("cert.verify.failed"))}}},disabled:!adapter||!serial,className:"rounded border px-3 py-1 text-sm min-h-10 min-w-10 disabled:opacity-50",children:t("actions.verify")})]}),"checking"===status?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"mt-2 text-xs text-neutral-600",children:t("cert.checking")}):null,"ok"===status?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"mt-2 text-xs text-green-600",children:[t("cert.valid"),message?` — ${message}`:""]}):null,"fail"===status?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"mt-2 text-xs text-red-600",children:[t("cert.invalid"),message?` — ${message}`:""]}):null]})}CertificateCheck.__docgenInfo={description:"",methods:[],displayName:"CertificateCheck",props:{productId:{required:!1,tsType:{name:"string"},description:""},placeholder:{required:!1,tsType:{name:"TranslatableText"},description:""},locale:{required:!1,tsType:{name:"Locale"},description:"",defaultValue:{value:'"en"',computed:!1}},adapter:{required:!1,tsType:{name:"signature",type:"function",raw:"(opts: { productId?: string; serial?: string }) => Promise<{ valid: boolean; message?: string }>",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ productId?: string; serial?: string }",signature:{properties:[{key:"productId",value:{name:"string",required:!1}},{key:"serial",value:{name:"string",required:!1}}]}},name:"opts"}],return:{name:"Promise",elements:[{name:"signature",type:"object",raw:"{ valid: boolean; message?: string }",signature:{properties:[{key:"valid",value:{name:"boolean",required:!0}},{key:"message",value:{name:"string",required:!1}}]}}],raw:"Promise<{ valid: boolean; message?: string }>"}}},description:""}}}},"./packages/ui/src/story-utils/createStories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function makeStateStory(base,patch,state,opts={}){const{a11y=!0,critical=!1,rtl=!1,viewports=[],tags=[],docsDescription}=opts,parameters={a11y:{disable:!a11y},dataState:state};rtl&&(parameters.rtl=!0),viewports.length&&(parameters.viewport={defaultViewport:viewports[0]}),docsDescription&&(parameters.docs={description:{story:docsDescription}});const computedTags=["autodocs",a11y?"a11y":"no-a11y",critical?"critical":"noncritical",...tags];parameters.chromatic={disable:!computedTags.includes("visual")};return{args:{...base,...patch},parameters,tags:computedTags}}__webpack_require__.d(__webpack_exports__,{T:()=>makeStateStory})}}]);