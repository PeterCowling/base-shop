"use strict";(self.webpackChunkcms_monorepo=self.webpackChunkcms_monorepo||[]).push([[9597],{"./packages/ui/src/components/cms/blocks/containers/Repeater.Matrix.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,Empty:()=>Empty,Error:()=>Error,Loading:()=>Loading,RTL:()=>RTL,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),_Repeater__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/ui/src/components/cms/blocks/containers/Repeater.tsx"),_data_DataContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/ui/src/components/cms/blocks/data/DataContext.tsx"),_story_utils_createStories__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/ui/src/story-utils/createStories.ts");const items=[{id:1,title:"Alpha",status:"published",score:2},{id:2,title:"Beta",status:"draft",score:10},{id:3,title:"Gamma",status:"published",score:5}],meta={title:"CMS Blocks/Containers/Repeater/Matrix",component:_Repeater__WEBPACK_IMPORTED_MODULE_1__.A,tags:["autodocs"],parameters:{docs:{description:{component:"Repeats its child for each item from DatasetProvider; supports client-side filter/sort/pagination and explicit Loading/Empty/Error states.\n\nUsage:\n\n```tsx\nimport { DatasetProvider } from '../data/DataContext';\nimport Repeater from './Repeater';\n\n<DatasetProvider items={[{ id: 1, title: 'A', status: 'published', score: 5 }]} state=\"loaded\">\n  <Repeater filter=\"status=published\" sortBy=\"score\" columns={3} gap=\"1rem\">\n    <div>Item</div>\n  </Repeater>\n</DatasetProvider>\n\n// Key args: filter, sortBy/sortOrder, columns(+responsive), gap(+responsive), initialCount/increment\n```"}}},args:{columns:3,gap:"1rem",filter:"status=published",sortBy:"score",sortOrder:"desc",initialCount:2,increment:1,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"rounded bg-neutral-100 p-2",children:"Item"})},parameters:{layout:"padded"}},__WEBPACK_DEFAULT_EXPORT__=meta,baseArgs=meta.args,Default={...(0,_story_utils_createStories__WEBPACK_IMPORTED_MODULE_3__.T)(baseArgs,{},"default",{a11y:!0,viewports:["desktop"],tags:["visual"],docsDescription:"Renders items from DatasetProvider; filters and sorts client-side."}),render:args=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_data_DataContext__WEBPACK_IMPORTED_MODULE_2__._7,{items,state:"loaded",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Repeater__WEBPACK_IMPORTED_MODULE_1__.A,{...args})})},Loading={...(0,_story_utils_createStories__WEBPACK_IMPORTED_MODULE_3__.T)(baseArgs,{},"loading",{viewports:["mobile1"],tags:["visual"],docsDescription:"Shows provided LoadingState while dataset is loading."}),render:args=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_data_DataContext__WEBPACK_IMPORTED_MODULE_2__._7,{items:[],state:"loading",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Repeater__WEBPACK_IMPORTED_MODULE_1__.A,{LoadingState:()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-sm text-neutral-600",children:"Loading…"}),...args})})},Empty={...(0,_story_utils_createStories__WEBPACK_IMPORTED_MODULE_3__.T)(baseArgs,{},"empty",{a11y:!0,viewports:["mobile1"],tags:["visual"],docsDescription:"Empty list; renders provided EmptyState component."}),render:args=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_data_DataContext__WEBPACK_IMPORTED_MODULE_2__._7,{items:[],state:"loaded",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Repeater__WEBPACK_IMPORTED_MODULE_1__.A,{EmptyState:()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-sm text-neutral-600",children:"Nothing here"}),...args})})},Error={...(0,_story_utils_createStories__WEBPACK_IMPORTED_MODULE_3__.T)(baseArgs,{},"error",{a11y:!0,critical:!0,viewports:["desktop"],tags:["visual","ci"],docsDescription:"Dataset in error; renders provided ErrorState component."}),render:args=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_data_DataContext__WEBPACK_IMPORTED_MODULE_2__._7,{items:[],state:"error",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Repeater__WEBPACK_IMPORTED_MODULE_1__.A,{ErrorState:()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-sm text-red-600",children:"Error!"}),...args})})},RTL={...(0,_story_utils_createStories__WEBPACK_IMPORTED_MODULE_3__.T)(baseArgs,{},"default",{rtl:!0,viewports:["mobile1"],tags:["visual"],docsDescription:"RTL sample for grid layout and controls."}),render:args=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_data_DataContext__WEBPACK_IMPORTED_MODULE_2__._7,{items,state:"loaded",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Repeater__WEBPACK_IMPORTED_MODULE_1__.A,{...args})})},__namedExportsOrder=["Default","Loading","Empty","Error","RTL"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  ...makeStateStory(baseArgs, {}, 'default', {\n    a11y: true,\n    viewports: ['desktop'],\n    tags: ['visual'],\n    docsDescription: 'Renders items from DatasetProvider; filters and sorts client-side.'\n  }),\n  render: (args: ComponentProps<typeof Repeater>) => <DatasetProvider items={items} state=\"loaded\">\n      <Repeater {...args} />\n    </DatasetProvider>\n}",...Default.parameters?.docs?.source}}},Loading.parameters={...Loading.parameters,docs:{...Loading.parameters?.docs,source:{originalSource:"{\n  ...makeStateStory(baseArgs, {}, 'loading', {\n    viewports: ['mobile1'],\n    tags: ['visual'],\n    docsDescription: 'Shows provided LoadingState while dataset is loading.'\n  }),\n  render: (args: ComponentProps<typeof Repeater>) => <DatasetProvider items={[]} state=\"loading\">\n      <Repeater LoadingState={() => <div className=\"text-sm text-neutral-600\">Loading…</div>} {...args} />\n    </DatasetProvider>\n}",...Loading.parameters?.docs?.source}}},Empty.parameters={...Empty.parameters,docs:{...Empty.parameters?.docs,source:{originalSource:"{\n  ...makeStateStory(baseArgs, {}, 'empty', {\n    a11y: true,\n    viewports: ['mobile1'],\n    tags: ['visual'],\n    docsDescription: 'Empty list; renders provided EmptyState component.'\n  }),\n  render: (args: ComponentProps<typeof Repeater>) => <DatasetProvider items={[]} state=\"loaded\">\n      <Repeater EmptyState={() => <div className=\"text-sm text-neutral-600\">Nothing here</div>} {...args} />\n    </DatasetProvider>\n}",...Empty.parameters?.docs?.source}}},Error.parameters={...Error.parameters,docs:{...Error.parameters?.docs,source:{originalSource:"{\n  ...makeStateStory(baseArgs, {}, 'error', {\n    a11y: true,\n    critical: true,\n    viewports: ['desktop'],\n    tags: ['visual', 'ci'],\n    docsDescription: 'Dataset in error; renders provided ErrorState component.'\n  }),\n  render: (args: ComponentProps<typeof Repeater>) => <DatasetProvider items={[]} state=\"error\">\n      <Repeater ErrorState={() => <div className=\"text-sm text-red-600\">Error!</div>} {...args} />\n    </DatasetProvider>\n}",...Error.parameters?.docs?.source}}},RTL.parameters={...RTL.parameters,docs:{...RTL.parameters?.docs,source:{originalSource:"{\n  ...makeStateStory(baseArgs, {}, 'default', {\n    rtl: true,\n    viewports: ['mobile1'],\n    tags: ['visual'],\n    docsDescription: 'RTL sample for grid layout and controls.'\n  }),\n  render: (args: React.ComponentProps<typeof Repeater>) => <DatasetProvider items={items} state=\"loaded\">\n      <Repeater {...args} />\n    </DatasetProvider>\n}",...RTL.parameters?.docs?.source}}}},"./packages/ui/src/components/cms/blocks/containers/Repeater.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Repeater});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js"),_data_DataContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/ui/src/components/cms/blocks/data/DataContext.tsx");function Repeater({children,limit,filter,sortBy,sortOrder="asc",columns,columnsDesktop,columnsTablet,columnsMobile,gap,gapDesktop,gapTablet,gapMobile,pbViewport,className,LoadingState,EmptyState,ErrorState,initialCount,increment=4,mode="default",infiniteOffset="200px"}){const base=(0,_data_DataContext__WEBPACK_IMPORTED_MODULE_2__.EL)(),state=(0,_data_DataContext__WEBPACK_IMPORTED_MODULE_2__.li)(),filtered=(()=>{if(!filter)return base;const ops=["==","!=",">=","<=",">","<","="];let key=filter,op="=",val="";for(const candidate of ops){const idx=filter.indexOf(candidate);if(idx>0){key=filter.slice(0,idx).trim(),op=candidate,val=filter.slice(idx+candidate.length).trim();break}}if(val||key===filter||(val=filter.slice(filter.indexOf(op)+op.length).trim()),!key)return base;const coerce=input=>{const s=String(null!=input?input:""),n=Number(s);return""!==s&&Number.isFinite(n)?n:"true"===s||"false"===s?"true"===s:s};return base.filter(it=>{const a=coerce(((it,k)=>it&&"object"==typeof it?it[k]:void 0)(it,key)),b=coerce(val);switch(op){case"=":case"==":return a===b;case"!=":return a!==b;case">":return Number(a)>Number(b);case">=":return Number(a)>=Number(b);case"<":return Number(a)<Number(b);case"<=":return Number(a)<=Number(b);default:return!0}})})(),sorted=sortBy?[...filtered].sort((a,b)=>{const av=a&&"object"==typeof a?a[sortBy]:void 0,bv=b&&"object"==typeof b?b[sortBy]:void 0;if(null==av&&null==bv)return 0;if(null==av)return 1;if(null==bv)return-1;if("number"==typeof av&&"number"==typeof bv)return"asc"===sortOrder?av-bv:bv-av;const as=String(av).toLowerCase(),bs=String(bv).toLowerCase();return as===bs?0:"asc"===sortOrder?as<bs?-1:1:as>bs?-1:1}):filtered,baseList="number"==typeof limit?sorted.slice(0,Math.max(0,limit)):sorted,[visible,setVisible]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>"number"==typeof initialCount?Math.max(0,Math.min(initialCount,baseList.length)):baseList.length),list=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>baseList.slice(0,visible),[baseList,visible]),sentinelRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{if("infinite"!==mode)return;const el=sentinelRef.current;if(!el)return;const io=new IntersectionObserver(entries=>{entries.forEach(e=>{e.isIntersecting&&setVisible(v=>Math.min(baseList.length,v+Math.max(1,increment)))})},{root:null,rootMargin:infiniteOffset,threshold:0});return io.observe(el),()=>io.disconnect()},[mode,baseList.length,increment,infiniteOffset]);const effColumns="desktop"===pbViewport&&"number"==typeof columnsDesktop?columnsDesktop:"tablet"===pbViewport&&"number"==typeof columnsTablet?columnsTablet:"mobile"===pbViewport&&"number"==typeof columnsMobile?columnsMobile:"number"==typeof columns?columns:1,effGap="desktop"===pbViewport&&gapDesktop?gapDesktop:"tablet"===pbViewport&&gapTablet?gapTablet:"mobile"===pbViewport&&gapMobile?gapMobile:null!=gap?gap:"1rem";return"loading"===state?LoadingState?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LoadingState,{}):null:"error"===state?ErrorState?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ErrorState,{}):null:0===baseList.length?EmptyState?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(EmptyState,{}):null:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className,style:{display:"grid",gridTemplateColumns:`repeat(${effColumns}, minmax(0, 1fr))`,gap:effGap},children:[list.map((it,idx)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_data_DataContext__WEBPACK_IMPORTED_MODULE_2__.px,{item:it,index:idx,children},it&&"object"==typeof it&&null!=it.id?String(it.id):String(idx))),baseList.length>visible?"infinite"===mode?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref:sentinelRef,style:{gridColumn:`span ${effColumns} / span ${effColumns}`},"aria-hidden":!0}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"button",onClick:()=>setVisible(v=>Math.min(baseList.length,v+Math.max(1,increment))),style:{gridColumn:`span ${effColumns} / span ${effColumns}`},children:"Load more"}):null]})}Repeater.__docgenInfo={description:"",methods:[],displayName:"Repeater",props:{children:{required:!1,tsType:{name:"ReactNode"},description:""},limit:{required:!1,tsType:{name:"number"},description:"Max items to render"},filter:{required:!1,tsType:{name:"string"},description:'Simple client-side filter using a property equals value, e.g. "status=published"'},sortBy:{required:!1,tsType:{name:"string"},description:"Property to sort by"},sortOrder:{required:!1,tsType:{name:"union",raw:'"asc" | "desc"',elements:[{name:"literal",value:'"asc"'},{name:"literal",value:'"desc"'}]},description:"",defaultValue:{value:'"asc"',computed:!1}},columns:{required:!1,tsType:{name:"number"},description:"Grid layout options (optional)"},columnsDesktop:{required:!1,tsType:{name:"number"},description:""},columnsTablet:{required:!1,tsType:{name:"number"},description:""},columnsMobile:{required:!1,tsType:{name:"number"},description:""},gap:{required:!1,tsType:{name:"string"},description:""},gapDesktop:{required:!1,tsType:{name:"string"},description:""},gapTablet:{required:!1,tsType:{name:"string"},description:""},gapMobile:{required:!1,tsType:{name:"string"},description:""},pbViewport:{required:!1,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:"Builder-only viewport hint for responsive values"},className:{required:!1,tsType:{name:"string"},description:""},LoadingState:{required:!1,tsType:{name:"union",raw:"React.ComponentType | null",elements:[{name:"ReactComponentType",raw:"React.ComponentType"},{name:"null"}]},description:"Load states"},EmptyState:{required:!1,tsType:{name:"union",raw:"React.ComponentType | null",elements:[{name:"ReactComponentType",raw:"React.ComponentType"},{name:"null"}]},description:""},ErrorState:{required:!1,tsType:{name:"union",raw:"React.ComponentType | null",elements:[{name:"ReactComponentType",raw:"React.ComponentType"},{name:"null"}]},description:""},initialCount:{required:!1,tsType:{name:"number"},description:"Client-side load more"},increment:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"4",computed:!1}},mode:{required:!1,tsType:{name:"union",raw:'"default" | "infinite"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"infinite"'}]},description:"Infinite scroll mode; when enabled, auto-loads more as user nears end",defaultValue:{value:'"default"',computed:!1}},infiniteOffset:{required:!1,tsType:{name:"string"},description:"Root margin for intersection observer",defaultValue:{value:'"200px"',computed:!1}}}}},"./packages/ui/src/components/cms/blocks/data/DataContext.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{EL:()=>useDataset,_7:()=>DatasetProvider,af:()=>useCurrentItem,dO:()=>useDatasetMeta,li:()=>useDatasetState,px:()=>ItemProvider});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js");const DatasetCtx=(0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null),ItemCtx=(0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);function DatasetProvider({items,meta,state,children}){const value=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>({items,meta,state}),[items,meta,state]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DatasetCtx.Provider,{value,children})}function ItemProvider({item,index,children}){const value=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>({item,index}),[item,index]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ItemCtx.Provider,{value,children})}function useDataset(){const ctx=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(DatasetCtx);var _ctx_items;return null!==(_ctx_items=null==ctx?void 0:ctx.items)&&void 0!==_ctx_items?_ctx_items:[]}function useCurrentItem(){const ctx=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ItemCtx);return null!=ctx?ctx:{item:null,index:void 0}}function useDatasetMeta(){const ctx=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(DatasetCtx);return null==ctx?void 0:ctx.meta}function useDatasetState(){const ctx=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(DatasetCtx);var _ctx_state;return null!==(_ctx_state=null==ctx?void 0:ctx.state)&&void 0!==_ctx_state?_ctx_state:"idle"}DatasetProvider.__docgenInfo={description:"",methods:[],displayName:"DatasetProvider",props:{items:{required:!0,tsType:{name:"Array",elements:[{name:"T"}],raw:"T[]"},description:""},meta:{required:!1,tsType:{name:"DatasetMeta"},description:""},state:{required:!1,tsType:{name:"DatasetValue['state']",raw:"DatasetValue['state']"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}},ItemProvider.__docgenInfo={description:"",methods:[],displayName:"ItemProvider",props:{item:{required:!0,tsType:{name:"union",raw:"T | null",elements:[{name:"T"},{name:"null"}]},description:""},index:{required:!1,tsType:{name:"number"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}}},"./packages/ui/src/story-utils/createStories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function makeStateStory(base,patch,state,opts={}){const{a11y=!0,critical=!1,rtl=!1,viewports=[],tags=[],docsDescription}=opts,parameters={a11y:{disable:!a11y},dataState:state};rtl&&(parameters.rtl=!0),viewports.length&&(parameters.viewport={defaultViewport:viewports[0]}),docsDescription&&(parameters.docs={description:{story:docsDescription}});const computedTags=["autodocs",a11y?"a11y":"no-a11y",critical?"critical":"noncritical",...tags];parameters.chromatic={disable:!computedTags.includes("visual")};return{args:{...base,...patch},parameters,tags:computedTags}}__webpack_require__.d(__webpack_exports__,{T:()=>makeStateStory})}}]);