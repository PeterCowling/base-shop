"use strict";(self.webpackChunkcms_monorepo=self.webpackChunkcms_monorepo||[]).push([[9279],{"./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/client/use-merged-ref.js":(module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"useMergedRef",{enumerable:!0,get:function(){return useMergedRef}});const _react=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js");function useMergedRef(refA,refB){const cleanupA=(0,_react.useRef)(null),cleanupB=(0,_react.useRef)(null);return(0,_react.useCallback)(current=>{if(null===current){const cleanupFnA=cleanupA.current;cleanupFnA&&(cleanupA.current=null,cleanupFnA());const cleanupFnB=cleanupB.current;cleanupFnB&&(cleanupB.current=null,cleanupFnB())}else refA&&(cleanupA.current=applyRef(refA,current)),refB&&(cleanupB.current=applyRef(refB,current))},[refA,refB])}function applyRef(refA,current){if("function"==typeof refA){const cleanup=refA(current);return"function"==typeof cleanup?cleanup:()=>refA(null)}return refA.current=current,()=>{refA.current=null}}("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default)},"./packages/shared-utils/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x6:()=>fetchJson,vv:()=>formatCurrency,$g:()=>formatPrice,Qm:()=>getCsrfToken,e6:()=>getShopFromPath,hJ:()=>replaceShopInPath,g6:()=>toggleItem});var types=__webpack_require__("./node_modules/.pnpm/zod@3.25.73/node_modules/zod/v3/types.js");async function fetchJson(input,init,schema){const res=await fetch(input,init);if(res.ok){let data;try{const resWithJson=res;if("function"==typeof resWithJson.json)data=await resWithJson.json();else{const text=await res.text();data=text?JSON.parse(text):void 0}}catch(e){data=void 0}return schema?schema.parse(data):data}const text=await res.text().catch(()=>"");let message,parsed,isJson=!1;try{parsed=text?JSON.parse(text):void 0,isJson=!0}catch(e){parsed=void 0}const error=types.Ik({error:types.Yj()}).safeParse(parsed);throw message=error.success?error.data.error:res.statusText?res.statusText:!isJson&&text?text:`HTTP ${res.status}`,new Error(message)}__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");function toggleItem(list,value){return list.includes(value)?list.filter(v=>v!==value):[...list,value]}function getCsrfToken(req){var _document_querySelector_getAttribute,_document_querySelector,_document_cookie_split_map_find_split_,_document_cookie_split_map_find,_document_querySelector_getAttribute_trim;if(req){var _getHeader,_cookieHeader_split_map_find_,_cookieHeader_split_map_find;const headers=req.headers,getHeader="function"==typeof(null==headers?void 0:headers.get)?name=>{var _headers_get;return null!==(_headers_get=headers.get(name))&&void 0!==_headers_get?_headers_get:void 0}:name=>null==headers?void 0:headers[name],headerToken=null===(_getHeader=getHeader("x-csrf-token"))||void 0===_getHeader?void 0:_getHeader.trim();if(headerToken)return headerToken;const reqUrl=req.url;if(reqUrl){var _searchParams_get;const queryToken=null===(_searchParams_get=new URL(reqUrl,"http://dummy").searchParams.get("csrf_token"))||void 0===_searchParams_get?void 0:_searchParams_get.trim();if(queryToken)return queryToken}var _getHeader1;return(null===(_cookieHeader_split_map_find=(null!==(_getHeader1=getHeader("cookie"))&&void 0!==_getHeader1?_getHeader1:"").split(";").map(row=>row.trim().split("=")).find(([name,value])=>["csrf_token","csrf"].includes(name)&&(null==value?void 0:value.trim())&&!value.trim().startsWith("/")))||void 0===_cookieHeader_split_map_find||null===(_cookieHeader_split_map_find_=_cookieHeader_split_map_find[1])||void 0===_cookieHeader_split_map_find_?void 0:_cookieHeader_split_map_find_.trim())||void 0}if("undefined"==typeof document)return;let csrfToken=null!==(_document_querySelector_getAttribute_trim=null===(_document_querySelector=document.querySelector('meta[name="csrf-token"]'))||void 0===_document_querySelector||null===(_document_querySelector_getAttribute=_document_querySelector.getAttribute("content"))||void 0===_document_querySelector_getAttribute?void 0:_document_querySelector_getAttribute.trim())&&void 0!==_document_querySelector_getAttribute_trim?_document_querySelector_getAttribute_trim:null===(_document_cookie_split_map_find=document.cookie.split(";").map(row=>row.trim()).find(row=>row.startsWith("csrf_token=")))||void 0===_document_cookie_split_map_find||null===(_document_cookie_split_map_find_split_=_document_cookie_split_map_find.split("=")[1])||void 0===_document_cookie_split_map_find_split_?void 0:_document_cookie_split_map_find_split_.trim();return csrfToken||(csrfToken=crypto.randomUUID(),document.cookie=`csrf_token=${csrfToken}; path=/; SameSite=Strict${"https:"===location.protocol?"; secure":""}`),csrfToken}__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/server.js");function formatCurrency(amount,currency="USD",locale){var _Intl_supportedValuesOf,_Intl;if(!/^[A-Z]{3}$/.test(currency))throw new RangeError(`Invalid currency code: ${currency}`);const supported=null===(_Intl_supportedValuesOf=(_Intl=Intl).supportedValuesOf)||void 0===_Intl_supportedValuesOf?void 0:_Intl_supportedValuesOf.call(_Intl,"currency");if(supported&&!supported.includes(currency))throw new RangeError(`Invalid currency code: ${currency}`);const value=null!=amount?amount:NaN;return new Intl.NumberFormat(locale,{style:"currency",currency}).format(value/100)}function formatPrice(amount,currency="USD",locale){if("function"==typeof Intl.supportedValuesOf){if(!Intl.supportedValuesOf("currency").includes(currency))throw new RangeError(`Unsupported currency code: ${currency}`)}const normalizedAmount=null==amount?NaN:amount;return new Intl.NumberFormat(locale,{style:"currency",currency}).format(normalizedAmount)}var _process_env_LOG_LEVEL,browser=__webpack_require__("./node_modules/.pnpm/pino@9.9.0/node_modules/pino/browser.js"),browser_default=__webpack_require__.n(browser);const level=null!==(_process_env_LOG_LEVEL=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js").env.LOG_LEVEL)&&void 0!==_process_env_LOG_LEVEL?_process_env_LOG_LEVEL:"info";browser_default()({level});function getShopFromPath(pathname){if(!pathname)return;try{const url=new URL(pathname,"http://dummy"),slug=url.searchParams.get("shop");if(slug)return slug;pathname=url.pathname}catch(e){}const segments=pathname.split("/").filter(Boolean);let idx=segments.indexOf("shop");return idx>=0?segments[idx+1]:(idx=segments.indexOf("shops"),idx>=0?segments[idx+1]:void 0)}function replaceShopInPath(pathname,shop){if(!pathname)return`/cms/shop/${shop}`;const hasTrailingSlash=pathname.endsWith("/"),[path,q]=pathname.split("?");let query=q,trailingSlash=path.endsWith("/");hasTrailingSlash&&!trailingSlash&&(trailingSlash=!0,query&&(query=query.replace(/\/$/,"")));const segments=path.split("/").filter(Boolean),idxShop=segments.indexOf("shop"),idxShops=segments.indexOf("shops");if(idxShop>=0){idxShop+1<segments.length?segments[idxShop+1]=shop:segments.push(shop);let newPath="/"+segments.join("/");return trailingSlash&&(newPath+="/"),query?`${newPath}?${query}`:newPath}if(idxShops>=0){idxShops+1<segments.length?segments[idxShops+1]=shop:segments.push(shop);let newPath="/"+segments.join("/");return trailingSlash&&(newPath+="/"),query?`${newPath}?${query}`:newPath}if("cms"===segments[0]){let base=`/cms/shop/${shop}`;return trailingSlash&&(base+="/"),query?`${base}?${query}`:base}return pathname}__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").hp},"./packages/ui/src/components/atoms/primitives/Inline.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>Inline});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),_utils_style_cn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/clsx@2.1.1/node_modules/clsx/dist/clsx.mjs");const Inline=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js").forwardRef(({gap=2,alignY="center",wrap=!0,className,...rest},ref)=>{const alignClass="start"===alignY?"items-start":"center"===alignY?"items-center":"end"===alignY?"items-end":"items-baseline";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref,className:(0,_utils_style_cn__WEBPACK_IMPORTED_MODULE_2__.$)("flex",wrap?"flex-wrap":"flex-nowrap",`gap-${gap}`,alignClass,className),...rest})});Inline.displayName="Inline",Inline.__docgenInfo={description:"",methods:[],displayName:"Inline",props:{gap:{required:!1,tsType:{name:"union",raw:"0 | 1 | 2 | 3 | 4 | 5 | 6 | 8 | 10 | 12",elements:[{name:"literal",value:"0"},{name:"literal",value:"1"},{name:"literal",value:"2"},{name:"literal",value:"3"},{name:"literal",value:"4"},{name:"literal",value:"5"},{name:"literal",value:"6"},{name:"literal",value:"8"},{name:"literal",value:"10"},{name:"literal",value:"12"}]},description:"",defaultValue:{value:"2",computed:!1}},alignY:{required:!1,tsType:{name:"union",raw:'"start" | "center" | "end" | "baseline"',elements:[{name:"literal",value:'"start"'},{name:"literal",value:'"center"'},{name:"literal",value:'"end"'},{name:"literal",value:'"baseline"'}]},description:"",defaultValue:{value:'"center"',computed:!1}},wrap:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}}},"./packages/ui/src/components/atoms/shadcn/Table.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A0:()=>_primitives_table__WEBPACK_IMPORTED_MODULE_0__.A0,BF:()=>_primitives_table__WEBPACK_IMPORTED_MODULE_0__.BF,Hj:()=>_primitives_table__WEBPACK_IMPORTED_MODULE_0__.Hj,XI:()=>_primitives_table__WEBPACK_IMPORTED_MODULE_0__.XI,nA:()=>_primitives_table__WEBPACK_IMPORTED_MODULE_0__.nA,nd:()=>_primitives_table__WEBPACK_IMPORTED_MODULE_0__.nd});var _primitives_table__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/ui/src/components/atoms/primitives/table.tsx")},"./packages/ui/src/components/cms/DataTable.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>DataTable});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js"),_acme_shared_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/shared-utils/src/index.ts"),_utils_style__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/ui/src/utils/style/index.ts"),_atoms_shadcn_Table__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/ui/src/components/atoms/shadcn/Table.tsx");function DataTable({rows,columns,selectable=!1,onSelectionChange,rowClassName,rowKey}){const[selected,setSelected]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),keyMapRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new WeakMap),keyCounterRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0),toggle=idx=>{const next=(0,_acme_shared_utils__WEBPACK_IMPORTED_MODULE_2__.g6)(selected,idx);setSelected(next),null==onSelectionChange||onSelectionChange(next.map(i=>rows[i]))};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"w-full overflow-x-auto",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn_Table__WEBPACK_IMPORTED_MODULE_4__.XI,{className:"min-w-full w-full",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn_Table__WEBPACK_IMPORTED_MODULE_4__.A0,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn_Table__WEBPACK_IMPORTED_MODULE_4__.Hj,{children:[selectable&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn_Table__WEBPACK_IMPORTED_MODULE_4__.nd,{className:"w-10"}),columns.map(col=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn_Table__WEBPACK_IMPORTED_MODULE_4__.nd,{style:{width:col.width},children:col.header},col.header))]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn_Table__WEBPACK_IMPORTED_MODULE_4__.BF,{children:rows.map((row,i)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn_Table__WEBPACK_IMPORTED_MODULE_4__.Hj,{"data-state":selected.includes(i)?"selected":void 0,onClick:selectable?()=>toggle(i):void 0,className:(0,_utils_style__WEBPACK_IMPORTED_MODULE_3__.cn)(selectable?"cursor-pointer":void 0,null==rowClassName?void 0:rowClassName(row,i)),children:[selectable&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn_Table__WEBPACK_IMPORTED_MODULE_4__.nA,{className:"w-10",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"checkbox",className:"accent-primary size-10",checked:selected.includes(i),onChange:()=>toggle(i),onClick:e=>e.stopPropagation()})}),columns.map(col=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn_Table__WEBPACK_IMPORTED_MODULE_4__.nA,{children:col.render(row)},col.header))]},((row,index)=>{if(rowKey)return rowKey(row,index);if(row&&"object"==typeof row){const keyMap=keyMapRef.current,existing=keyMap.get(row);if(existing)return existing;const next="r-"+ ++keyCounterRef.current;return keyMap.set(row,next),next}return String(row)})(row,i)))})]})})}DataTable.__docgenInfo={description:"",methods:[],displayName:"DataTable",props:{rows:{required:!0,tsType:{name:"Array",elements:[{name:"T"}],raw:"T[]"},description:""},columns:{required:!0,tsType:{name:"Array",elements:[{name:"Column",elements:[{name:"T"}],raw:"Column<T>"}],raw:"Column<T>[]"},description:""},selectable:{required:!1,tsType:{name:"boolean"},description:"Enable checkbox row selection",defaultValue:{value:"false",computed:!1}},onSelectionChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(rows: T[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"T"}],raw:"T[]"},name:"rows"}],return:{name:"void"}}},description:""},rowClassName:{required:!1,tsType:{name:"signature",type:"function",raw:"(row: T, index: number) => string | undefined",signature:{arguments:[{type:{name:"T"},name:"row"},{type:{name:"number"},name:"index"}],return:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}}},description:""},rowKey:{required:!1,tsType:{name:"signature",type:"function",raw:"(row: T, index: number) => string | number",signature:{arguments:[{type:{name:"T"},name:"row"},{type:{name:"number"},name:"index"}],return:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]}}},description:"Optional function to provide a stable key for each row.\nIf not provided, a stable key is generated per row object instance."}}}},"./packages/ui/src/components/cms/ProductFilters.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>ProductFilters});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/ui/src/components/atoms/shadcn/index.ts"),_atoms_primitives_Inline__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/ui/src/components/atoms/primitives/Inline.tsx"),_acme_i18n__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/i18n/src/index.ts");const statuses=["all","active","draft","archived"];function ProductFilters({search,status,onSearchChange,onStatusChange}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_3__.c3)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_primitives_Inline__WEBPACK_IMPORTED_MODULE_2__.c,{className:"gap-3",wrap:!0,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{type:"search",placeholder:t("filters.searchPlaceholder"),className:"w-64",value:search,onChange:e=>onSearchChange(e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("select",{className:"rounded-md border px-3 py-2 text-sm",value:status,onChange:e=>onStatusChange(e.target.value),children:statuses.map(s=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option",{value:s,children:t("all"===s?"filters.allStatuses":`status.${s}`)},s))})]})}ProductFilters.__docgenInfo={description:"",methods:[],displayName:"ProductFilters",props:{search:{required:!0,tsType:{name:"string"},description:""},status:{required:!0,tsType:{name:"string"},description:""}}}},"./packages/ui/src/components/cms/ProductsTable.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ProductsTable_stories});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),useProductFilters=__webpack_require__("./packages/ui/src/hooks/useProductFilters.ts"),src=__webpack_require__("./packages/shared-utils/src/index.ts"),next_link=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/link.js"),link_default=__webpack_require__.n(next_link),react=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js"),DataTable=__webpack_require__("./packages/ui/src/components/cms/DataTable.tsx"),products=__webpack_require__("./packages/ui/src/components/cms/products/index.ts"),i18n_src=__webpack_require__("./packages/i18n/src/index.ts");function ProductsTableBase({shop,rows,isAdmin,onDuplicate,onDelete}){const t=(0,i18n_src.c3)(),{search,status,setSearch,setStatus,filteredRows}=(0,useProductFilters.I)(rows),handleDuplicate=(0,react.useCallback)(id=>onDuplicate(shop,id),[onDuplicate,shop]),handleDelete=(0,react.useCallback)(id=>{confirm(String(t("products.confirmDelete")))&&onDelete(shop,id)},[onDelete,shop,t]),columns=(0,react.useMemo)(()=>[{header:String(t("products.columns.title")),render:p=>isAdmin?(0,jsx_runtime.jsx)(link_default(),{href:`/cms/shop/${shop}/products/${p.id}/edit`,className:"underline",children:p.title.en}):(0,jsx_runtime.jsx)("span",{children:p.title.en})},{header:String(t("products.columns.sku")),width:"10rem",render:p=>{var _p_sku;return null!==(_p_sku=p.sku)&&void 0!==_p_sku?_p_sku:"—"}},{header:String(t("products.columns.price")),render:p=>(0,src.vv)(p.price,p.currency)},{header:String(t("products.columns.status")),render:p=>p.status},{header:String(t("products.columns.actions")),width:"12rem",render:p=>(0,jsx_runtime.jsx)(products.v,{shop,product:p,onDuplicate:handleDuplicate,onDelete:handleDelete})}],[isAdmin,shop,handleDuplicate,handleDelete,t]);return(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsx)(products.J,{search,status,onSearchChange:setSearch,onStatusChange:setStatus}),(0,jsx_runtime.jsx)(DataTable.A,{rows:filteredRows,columns,selectable:isAdmin})]})}const ProductsTable_client=(0,react.memo)(ProductsTableBase);ProductsTableBase.__docgenInfo={description:"",methods:[],displayName:"ProductsTableBase",props:{shop:{required:!0,tsType:{name:"string"},description:""},rows:{required:!0,tsType:{name:"Array",elements:[{name:"ProductPublication"}],raw:"ProductPublication[]"},description:""},isAdmin:{required:!0,tsType:{name:"boolean"},description:""},onDuplicate:{required:!0,tsType:{name:"signature",type:"function",raw:"(shop: string, productId: string) => void | Promise<void>",signature:{arguments:[{type:{name:"string"},name:"shop"},{type:{name:"string"},name:"productId"}],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:"Callback that duplicates a product on the server.\nProvided by the host application (e.g. `apps/cms`)."},onDelete:{required:!0,tsType:{name:"signature",type:"function",raw:"(shop: string, productId: string) => void | Promise<void>",signature:{arguments:[{type:{name:"string"},name:"shop"},{type:{name:"string"},name:"productId"}],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:"Callback that deletes a product on the server.\nProvided by the host application (e.g. `apps/cms`)."}}};const ProductsTable_stories={title:"CMS/ProductsTable",component:ProductsTable_client,tags:["autodocs"],args:{shop:"shop1",rows:[{id:"1",sku:"sku1",title:{en:"Sneaker",de:"Sneaker",it:"Sneaker"},description:{en:"Green sneaker",de:"Green sneaker",it:"Green sneaker"},price:1e4,currency:"USD",media:[],created_at:"2023-01-01",updated_at:"2023-01-01",shop:"shop1",status:"active",row_version:1}],isAdmin:!0}},Default={},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{}",...Default.parameters?.docs?.source}}}},"./packages/ui/src/components/cms/products/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>ProductFilters.A,v:()=>ProductRowActions});var ProductFilters=__webpack_require__("./packages/ui/src/components/cms/ProductFilters.tsx"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),shadcn=__webpack_require__("./packages/ui/src/components/atoms/shadcn/index.ts"),next_link=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/link.js"),link_default=__webpack_require__.n(next_link),src=__webpack_require__("./packages/i18n/src/index.ts");function ProductRowActions({shop,product,onDuplicate,onDelete}){const t=(0,src.c3)();return(0,jsx_runtime.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,jsx_runtime.jsx)(link_default(),{href:`/cms/shop/${shop}/products/${product.id}/edit`,className:"bg-primary hover:bg-primary/90 rounded px-2 py-1 text-xs text-primary-fg inline-flex items-center justify-center min-h-10 min-w-10",children:t("cms.products.actions.edit")}),(0,jsx_runtime.jsx)(link_default(),{href:`/en/product/${product.id}`,className:"rounded border px-2 py-1 text-xs hover:bg-muted inline-flex items-center justify-center min-h-10 min-w-10",children:t("cms.products.actions.view")}),(0,jsx_runtime.jsx)(shadcn.$n,{onClick:()=>onDuplicate(product.id),variant:"outline",className:"px-2 py-1 text-xs min-h-10 min-w-10",children:t("cms.products.actions.duplicate")}),(0,jsx_runtime.jsx)(shadcn.$n,{onClick:()=>onDelete(product.id),variant:"outline",className:"px-2 py-1 text-xs min-h-10 min-w-10 hover:bg-danger hover:text-danger-foreground","data-token":"--color-danger",children:t("cms.products.actions.delete")})]})}ProductRowActions.__docgenInfo={description:"",methods:[],displayName:"ProductRowActions",props:{shop:{required:!0,tsType:{name:"string"},description:""},product:{required:!0,tsType:{name:"ProductPublication"},description:""}}}},"./packages/ui/src/hooks/useProductFilters.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>useProductFilters});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js");function useProductFilters(rows){const[search,setSearch]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),[status,setStatus]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("all"),availableLocales=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{const set=new Set;return rows.forEach(p=>{"object"==typeof p.title&&Object.keys(p.title).forEach(k=>set.add(k))}),Array.from(set)},[rows]),normalisedQuery=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>search.trim().toLowerCase(),[search]),filteredRows=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>rows.filter(p=>{const matchesTitle="string"==typeof p.title?p.title.toLowerCase().includes(normalisedQuery):availableLocales.some(loc=>{var _p_title_loc;return(null!==(_p_title_loc=p.title[loc])&&void 0!==_p_title_loc?_p_title_loc:"").toLowerCase().includes(normalisedQuery)});var _p_sku;const matchesSku=(null!==(_p_sku=p.sku)&&void 0!==_p_sku?_p_sku:"").toLowerCase().includes(normalisedQuery),matchesQuery=0===normalisedQuery.length||matchesTitle||matchesSku,matchesStatus="all"===status||p.status===status;return matchesQuery&&matchesStatus}),[rows,normalisedQuery,status,availableLocales]);return{search,status,setSearch,setStatus,filteredRows}}}}]);