// packages/platform-core/tsconfig.json
{
  "extends": "../../tsconfig.base.json",

  "compilerOptions": {
    /* library emits JS + d.ts -------------------------------------- */
    "composite": true,
    "declaration": true,
    "declarationMap": true,
    "noEmit": false,
    "outDir": "dist",

    /* React components -------------------------------------------- */
    "jsx": "react-jsx",

    /* ignore node_modules type churn (fixes Next-15 errors) -------- */
    "skipLibCheck": true,

    /* keep imports relative to this folder ------------------------ */
    "baseUrl": ".",
    "allowImportingTsExtensions": false,

    /* we **do** want Next’s global types, but nothing else -------- */
    "types": ["react", "react-dom", "next"],

    /* ---------- stop overriding the @types alias  ---------------- */
    "paths": {
      "@platform-core": ["."],
      "@platform-core/*": ["*"],

      "@types/shared": ["../../packages/types/src/index.ts"],
      "@types/shared/*": ["../../packages/types/src/*"],

      "@/components/shop/*": ["components/shop/*"],
      "@/contexts/*": ["contexts/*"],
      "@/lib/*": ["lib/*"],

      "@themes/*": ["../themes/*"],
      "@lib/*": ["../lib/*"],
      "@cms/*": ["../../apps/cms/src/*"]
    }
  },

  /* -------------------------------------------------------------- */
  "include": ["**/*.ts", "**/*.tsx"],
  "exclude": ["dist", "__tests__"],

  /* • build-order: lib  →  platform-core  →  (emit)                */
  "references": [
    { "path": "../lib" },
    { "path": "../types" } /* ← add shared types barrel */
  ]
}
