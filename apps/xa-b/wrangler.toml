name = "xa-b-site"
main = ".open-next/worker.js"
compatibility_date = "2025-06-20"
compatibility_flags = ["nodejs_compat"]

[assets]
directory = ".open-next/assets"
binding = "ASSETS"

[vars]
XA_STEALTH_MODE = "true"
XA_REQUIRE_CF_ACCESS = "true"
XA_STRICT_STEALTH = "true"
NEXT_PUBLIC_STEALTH_MODE = "true"
# NOTE: Do not commit real hostnames/domains. Configure these per-environment in Cloudflare Pages:
# - XA_ALLOWED_HOSTS
# - NEXT_PUBLIC_SITE_DOMAIN
# - XA_CF_ACCESS_AUDIENCE
# - XA_CF_ACCESS_ISSUER (or XA_CF_ACCESS_ISSUERS)

[env.preview]
name = "xa-b-preview"

[env.preview.vars]
XA_STEALTH_MODE = "true"
XA_REQUIRE_CF_ACCESS = "true"
XA_STRICT_STEALTH = "true"
NEXT_PUBLIC_STEALTH_MODE = "true"

[env.backup]
name = "xa-b-backup"

[env.backup.vars]
XA_STEALTH_MODE = "true"
XA_REQUIRE_CF_ACCESS = "true"
XA_STRICT_STEALTH = "true"
NEXT_PUBLIC_STEALTH_MODE = "true"
