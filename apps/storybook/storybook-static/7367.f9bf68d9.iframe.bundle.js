"use strict";(self.webpackChunk_apps_storybook=self.webpackChunk_apps_storybook||[]).push([[7367],{"../../__mocks__/next/navigation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__,notFound:()=>notFound,permanentRedirect:()=>permanentRedirect,redirect:()=>redirect,revalidatePath:()=>revalidatePath,revalidateTag:()=>revalidateTag,useParams:()=>useParams,usePathname:()=>usePathname,useRouter:()=>useRouter,useSearchParams:()=>useSearchParams});var storybook_test__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("storybook/test"),process=__webpack_require__("../../node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js"),console=__webpack_require__("../../node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");function logWarning(message,details){(function isDev(){var _process_env;return void 0===process||"production"!==(null===(_process_env=process.env)||void 0===_process_env?void 0:"production")})()&&(details?console.warn(message,details):console.warn(message))}function getWindow(){return window}const router={push:(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.fn)().mockName("next/navigation.router.push"),replace:(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.fn)().mockName("next/navigation.router.replace"),prefetch:(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.fn)(async()=>{}).mockName("next/navigation.router.prefetch"),back:(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.fn)().mockName("next/navigation.router.back"),forward:(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.fn)().mockName("next/navigation.router.forward"),refresh:(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.fn)().mockName("next/navigation.router.refresh")},useRouter=(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.fn)(()=>router).mockName("next/navigation.useRouter"),usePathname=(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.fn)(()=>function currentPathname(){try{var _win_location;const win=getWindow();var _win_location_pathname;return null!==(_win_location_pathname=null==win||null===(_win_location=win.location)||void 0===_win_location?void 0:_win_location.pathname)&&void 0!==_win_location_pathname?_win_location_pathname:"/"}catch(error){return logWarning("[storybook mock] Failed to read window.location.pathname",error),"/"}}()).mockName("next/navigation.usePathname"),useSearchParams=(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.fn)(()=>{const params=new URLSearchParams(function currentSearch(){try{var _win_location;const win=getWindow();var _win_location_search;return null!==(_win_location_search=null==win||null===(_win_location=win.location)||void 0===_win_location?void 0:_win_location.search)&&void 0!==_win_location_search?_win_location_search:""}catch(error){return logWarning("[storybook mock] Failed to read window.location.search",error),""}}());return{get:key=>params.get(key),getAll:key=>params.getAll(key),has:key=>params.has(key),entries:()=>params.entries(),keys:()=>params.keys(),values:()=>params.values(),toString:()=>params.toString(),forEach:(callback,thisArg)=>params.forEach(callback,thisArg),size:params.size,[Symbol.iterator]:()=>params[Symbol.iterator]()}}).mockName("next/navigation.useSearchParams"),useParams=(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.fn)(()=>({})).mockName("next/navigation.useParams"),redirect=(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.fn)((url,status)=>{logWarning("[storybook mock] next/navigation.redirect called",{url,status})}).mockName("next/navigation.redirect"),notFound=(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.fn)(()=>{logWarning("[storybook mock] next/navigation.notFound called")}).mockName("next/navigation.notFound"),revalidatePath=(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.fn)(()=>{logWarning("[storybook mock] next/navigation.revalidatePath called")}).mockName("next/navigation.revalidatePath"),revalidateTag=(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.fn)(()=>{logWarning("[storybook mock] next/navigation.revalidateTag called")}).mockName("next/navigation.revalidateTag"),permanentRedirect=(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.fn)((url,status)=>{logWarning("[storybook mock] next/navigation.permanentRedirect called",{url,status})}).mockName("next/navigation.permanentRedirect"),__WEBPACK_DEFAULT_EXPORT__={useRouter,usePathname,useSearchParams,useParams,redirect,notFound,revalidatePath,revalidateTag,permanentRedirect}},"../../packages/ui/src/components/atoms/primitives/Grid.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x:()=>Grid});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_utils_style_cn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/clsx@2.1.1/node_modules/clsx/dist/clsx.mjs");function Grid({cols=2,gap=4,className,...rest}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:(0,_utils_style_cn__WEBPACK_IMPORTED_MODULE_1__.$)("grid",`grid-cols-${cols}`,`gap-${gap}`,className),...rest})}Grid.__docgenInfo={description:"",methods:[],displayName:"Grid",props:{cols:{required:!1,tsType:{name:"union",raw:"1 | 2 | 3 | 4 | 5 | 6 | 12",elements:[{name:"literal",value:"1"},{name:"literal",value:"2"},{name:"literal",value:"3"},{name:"literal",value:"4"},{name:"literal",value:"5"},{name:"literal",value:"6"},{name:"literal",value:"12"}]},description:"",defaultValue:{value:"2",computed:!1}},gap:{required:!1,tsType:{name:"union",raw:"0 | 1 | 2 | 3 | 4 | 5 | 6 | 8 | 10 | 12",elements:[{name:"literal",value:"0"},{name:"literal",value:"1"},{name:"literal",value:"2"},{name:"literal",value:"3"},{name:"literal",value:"4"},{name:"literal",value:"5"},{name:"literal",value:"6"},{name:"literal",value:"8"},{name:"literal",value:"10"},{name:"literal",value:"12"}]},description:"",defaultValue:{value:"4",computed:!1}}}}},"../../packages/ui/src/components/atoms/primitives/Sidebar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B:()=>Sidebar});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_utils_style_cn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/clsx@2.1.1/node_modules/clsx/dist/clsx.mjs");function Sidebar({sideWidth="w-64",gap=6,reverse=!1,className,children,...rest}){const kids=Array.isArray(children)?children:[children],[a,b]=kids,side=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:(0,_utils_style_cn__WEBPACK_IMPORTED_MODULE_1__.$)("shrink-0",sideWidth),children:a}),main=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"min-w-0 flex-1",children:b});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:(0,_utils_style_cn__WEBPACK_IMPORTED_MODULE_1__.$)("flex",reverse?"flex-row-reverse":"flex-row",`gap-${gap}`,className),...rest,children:reverse?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[main,side]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[side,main]})})}Sidebar.__docgenInfo={description:"",methods:[],displayName:"Sidebar",props:{sideWidth:{required:!1,tsType:{name:"union",raw:'"w-48" | "w-56" | "w-64" | "w-72" | "w-80"',elements:[{name:"literal",value:'"w-48"'},{name:"literal",value:'"w-56"'},{name:"literal",value:'"w-64"'},{name:"literal",value:'"w-72"'},{name:"literal",value:'"w-80"'}]},description:"",defaultValue:{value:'"w-64"',computed:!1}},gap:{required:!1,tsType:{name:"union",raw:"0 | 1 | 2 | 3 | 4 | 5 | 6 | 8",elements:[{name:"literal",value:"0"},{name:"literal",value:"1"},{name:"literal",value:"2"},{name:"literal",value:"3"},{name:"literal",value:"4"},{name:"literal",value:"5"},{name:"literal",value:"6"},{name:"literal",value:"8"}]},description:"",defaultValue:{value:"6",computed:!1}},reverse:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}}},"../../packages/ui/src/components/cms/blocks/CollectionSection.client.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>CollectionSectionClient});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_acme_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/i18n/src/index.ts"),next_navigation__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../__mocks__/next/navigation.js"),_ProductFilter__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../packages/ui/src/components/cms/blocks/ProductFilter.tsx"),_atoms_primitives_Grid__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Grid.tsx"),_atoms_primitives_Sidebar__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Sidebar.tsx");function CollectionSectionClient({initial,params,paginationMode="loadMore",pageSize=12,seoText,seoCollapsible=!0,className,...rest}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_2__.c3)(),[items,setItems]=react__WEBPACK_IMPORTED_MODULE_1__.useState(initial),[status,setStatus]=react__WEBPACK_IMPORTED_MODULE_1__.useState("idle");var _params_sort;const[sort,setSort]=react__WEBPACK_IMPORTED_MODULE_1__.useState(null!==(_params_sort=params.sort)&&void 0!==_params_sort?_params_sort:"");var _params_size;const[size,setSize]=react__WEBPACK_IMPORTED_MODULE_1__.useState(null!==(_params_size=params.size)&&void 0!==_params_size?_params_size:"");var _params_color;const[color,setColor]=react__WEBPACK_IMPORTED_MODULE_1__.useState(null!==(_params_color=params.color)&&void 0!==_params_color?_params_color:""),[price,setPrice]=react__WEBPACK_IMPORTED_MODULE_1__.useState({min:params.min?Number(params.min):void 0,max:params.max?Number(params.max):void 0}),router=(0,next_navigation__WEBPACK_IMPORTED_MODULE_3__.useRouter)(),sp=(0,next_navigation__WEBPACK_IMPORTED_MODULE_3__.useSearchParams)(),updateUrl=react__WEBPACK_IMPORTED_MODULE_1__.useCallback(patch=>{const next=new URL(window.location.href),entries=new URLSearchParams(next.search);Object.entries(patch).forEach(([k,v])=>{null==v||""===v?entries.delete(k):entries.set(k,v)}),next.search=entries.toString(),router.push(next.pathname+(next.search?`?${next.search}`:""))},[router]);react__WEBPACK_IMPORTED_MODULE_1__.useEffect(()=>{const controller=new AbortController;return(async()=>{try{var _params_slug;setStatus("loading");const col=(null!==(_params_slug=params.slug)&&void 0!==_params_slug?_params_slug:"").toString(),url=new URL(`/api/collections/${encodeURIComponent(col)}`,window.location.origin);if(sort&&url.searchParams.set("sort",sort),"ssr"===paginationMode){var _sp_get;const page=null!==(_sp_get=null==sp?void 0:sp.get("page"))&&void 0!==_sp_get?_sp_get:"1";var _sp_get1;const ps=null!==(_sp_get1=null==sp?void 0:sp.get("pageSize"))&&void 0!==_sp_get1?_sp_get1:String(pageSize);url.searchParams.set("page",page),url.searchParams.set("pageSize",ps)}const res=await fetch(url.toString(),{signal:controller.signal});if(!res.ok)return void setStatus("error");const data=await res.json();var _data_items;let list=Array.isArray(data)?data:null!==(_data_items=data.items)&&void 0!==_data_items?_data_items:[];list=list.filter(p=>{var _p_sizes,_p_price,_p_price1;const priceOk=(null==price.min||(null!==(_p_price=p.price)&&void 0!==_p_price?_p_price:0)>=price.min)&&(null==price.max||(null!==(_p_price1=p.price)&&void 0!==_p_price1?_p_price1:0)<=price.max),sizeOk=!size||(null===(_p_sizes=p.sizes)||void 0===_p_sizes?void 0:_p_sizes.includes(size));var _p_id;const colorId=String(null!==(_p_id=p.id)&&void 0!==_p_id?_p_id:"").split("-")[0],colorOk=!color||colorId===color||String(p.id).includes(color);return priceOk&&sizeOk&&colorOk}),setItems(list),setStatus("loaded")}catch(e){}})(),()=>controller.abort()},[sp,params.slug,sort,size,color,price.min,price.max,paginationMode,pageSize]);const[page,setPage]=react__WEBPACK_IMPORTED_MODULE_1__.useState(()=>{var _sp_get;return Number(null!==(_sp_get=null==sp?void 0:sp.get("page"))&&void 0!==_sp_get?_sp_get:1)});return react__WEBPACK_IMPORTED_MODULE_1__.useEffect(()=>{var _sp_get;setPage(Number(null!==(_sp_get=null==sp?void 0:sp.get("page"))&&void 0!==_sp_get?_sp_get:1))},[sp]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className,...rest,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mx-auto px-4 py-6",children:["loading"===status?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mb-3 text-sm text-neutral-600",children:t("collections.loading")}):null,"error"===status?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mb-3 text-sm text-red-600",children:t("collections.loadFailed")}):null,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_primitives_Sidebar__WEBPACK_IMPORTED_MODULE_6__.B,{className:"gap-6",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("aside",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ProductFilter__WEBPACK_IMPORTED_MODULE_4__.A,{facets:{size:!0,color:!0,price:!0},onChange:state=>{var _state_size,_state_color;setSize(null!==(_state_size=state.size)&&void 0!==_state_size?_state_size:""),setColor(null!==(_state_color=state.color)&&void 0!==_state_color?_state_color:""),setPrice({min:state.minPrice,max:state.maxPrice}),updateUrl({size:state.size,color:state.color,min:state.minPrice?String(state.minPrice):void 0,max:state.maxPrice?String(state.maxPrice):void 0})}})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("section",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h2",{className:"text-lg font-medium",children:t("collections.sectionTitle")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("select",{value:sort,onChange:e=>{setSort(e.target.value),updateUrl({sort:e.target.value})},className:"rounded border px-2 py-1 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option",{value:"",children:t("collections.sort.default")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option",{value:"price",children:t("collections.sort.price")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option",{value:"title",children:t("collections.sort.title")})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_primitives_Grid__WEBPACK_IMPORTED_MODULE_5__.x,{cols:1,gap:4,className:"sm:grid-cols-2 lg:grid-cols-3",children:items.map(p=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"border rounded p-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"aspect-video bg-neutral-100 mb-2"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"font-medium",children:p.title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-sm text-neutral-600",children:p.slug})]},p.id))}),"ssr"===paginationMode?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mt-6 flex items-center justify-between text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:"rounded border px-3 py-1 disabled:opacity-50 inline-flex items-center justify-center min-h-10 min-w-10",disabled:page<=1,onClick:()=>updateUrl({page:String(Math.max(1,page-1)),pageSize:String(pageSize)}),children:t("collections.pagination.previous")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:t("collections.pagination.page",{page})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:"rounded border px-3 py-1 inline-flex items-center justify-center min-h-10 min-w-10",onClick:()=>updateUrl({page:String(page+1),pageSize:String(pageSize)}),children:t("collections.pagination.next")})]}):null,seoText?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("details",{className:"mt-8",open:!seoCollapsible,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("summary",{className:"cursor-pointer select-none text-sm font-medium",children:t("collections.seoSummary")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"prose mt-2 w-full text-sm text-neutral-700",dangerouslySetInnerHTML:{__html:seoText}})]}):null]})]})]})})}CollectionSectionClient.__docgenInfo={description:"",methods:[],displayName:"CollectionSectionClient",props:{initial:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"skuSchema"}],raw:"z.infer<typeof skuSchema>"}],raw:"SKU[]"},description:""},params:{required:!0,tsType:{name:"Record",elements:[{name:"string"},{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}],raw:"Record<string, string | undefined>"},description:""},paginationMode:{required:!1,tsType:{name:"union",raw:'"loadMore" | "ssr"',elements:[{name:"literal",value:'"loadMore"'},{name:"literal",value:'"ssr"'}]},description:"",defaultValue:{value:'"loadMore"',computed:!1}},pageSize:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"12",computed:!1}},seoText:{required:!1,tsType:{name:"string"},description:""},seoCollapsible:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}}},"../../packages/ui/src/components/cms/blocks/ProductFilter.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>ProductFilter});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_hooks_useProductFilters__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/hooks/useProductFilters.ts"),_acme_platform_core_products_index__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../packages/platform-core/src/products/index.ts"),next_navigation__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../__mocks__/next/navigation.js");const t=s=>s;function ProductFilter({showSize=!0,showColor=!0,showPrice=!0,facets,onChange}){var _nav_useRouter,_nav_useSearchParams;const{filteredRows}=(0,_hooks_useProductFilters__WEBPACK_IMPORTED_MODULE_2__.I)(_acme_platform_core_products_index__WEBPACK_IMPORTED_MODULE_4__.zv),sizes=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{const s=new Set;return filteredRows.forEach(p=>{var _p_sizes;return null===(_p_sizes=p.sizes)||void 0===_p_sizes?void 0:_p_sizes.forEach(sz=>s.add(sz))}),Array.from(s).sort()},[filteredRows]),colors=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{const s=new Set;return filteredRows.forEach(p=>{const c=p.id.split("-")[0];c&&s.add(c)}),Array.from(s).sort()},[filteredRows]),priceBounds=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{const prices=filteredRows.map(p=>{var _p_price;return null!==(_p_price=p.price)&&void 0!==_p_price?_p_price:0});return[prices.length?Math.min(...prices):0,prices.length?Math.max(...prices):0]},[filteredRows]),[size,setSize]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[color,setColor]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[minPrice,setMinPrice]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(priceBounds[0]),[maxPrice,setMaxPrice]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(priceBounds[1]),router=null===(_nav_useRouter=next_navigation__WEBPACK_IMPORTED_MODULE_3__.useRouter)||void 0===_nav_useRouter?void 0:_nav_useRouter.call(next_navigation__WEBPACK_IMPORTED_MODULE_3__),searchParams=null===(_nav_useSearchParams=next_navigation__WEBPACK_IMPORTED_MODULE_3__.useSearchParams)||void 0===_nav_useSearchParams?void 0:_nav_useSearchParams.call(next_navigation__WEBPACK_IMPORTED_MODULE_3__);react__WEBPACK_IMPORTED_MODULE_1__.useEffect(()=>{try{const sp=searchParams;if(!sp)return;const sz=sp.get("size"),co=sp.get("color"),minRaw=sp.get("min"),maxRaw=sp.get("max");if(sz&&setSize(sz),co&&setColor(co),null!=minRaw){const min=Number(minRaw);Number.isFinite(min)&&setMinPrice(min)}if(null!=maxRaw){const max=Number(maxRaw);Number.isFinite(max)&&setMaxPrice(max)}}catch(e){}},[searchParams]);const pushUrl=patch=>{try{if(!router)return;const next=new URL(window.location.href),entries=new URLSearchParams(next.search);for(const[k,v]of Object.entries(patch))null==v||""===v?entries.delete(k):entries.set(k,String(v));next.search=entries.toString(),router.push(next.pathname+(next.search?`?${next.search}`:""))}catch(e){}},results=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>filteredRows.filter(p=>{var _p_sizes;const sizeMatch=!size||(null===(_p_sizes=p.sizes)||void 0===_p_sizes?void 0:_p_sizes.includes(size)),colorMatch=!color||p.id.includes(color);var _p_price;const price=null!==(_p_price=p.price)&&void 0!==_p_price?_p_price:0;return sizeMatch&&colorMatch&&(price>=minPrice&&price<=maxPrice)}),[filteredRows,size,color,minPrice,maxPrice]);var _facets_size,_facets_color,_facets_price;const eff={size:null!==(_facets_size=null==facets?void 0:facets.size)&&void 0!==_facets_size?_facets_size:showSize,color:null!==(_facets_color=null==facets?void 0:facets.color)&&void 0!==_facets_color?_facets_color:showColor,price:null!==(_facets_price=null==facets?void 0:facets.price)&&void 0!==_facets_price?_facets_price:showPrice};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-4",children:[eff.size&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{className:"text-sm font-medium",children:t("Size")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("select",{value:size,onChange:e=>{const v=e.target.value;setSize(v),pushUrl({size:v}),null==onChange||onChange({size:v,color,minPrice,maxPrice})},className:"w-full rounded border p-2 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option",{value:"",children:t("All")}),sizes.map(s=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option",{value:s,children:s},s))]})]}),eff.color&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{className:"text-sm font-medium",children:t("Color")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("select",{value:color,onChange:e=>{const v=e.target.value;setColor(v),pushUrl({color:v}),null==onChange||onChange({size,color:v,minPrice,maxPrice})},className:"w-full rounded border p-2 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option",{value:"",children:t("All")}),colors.map(c=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option",{value:c,children:c},c))]})]}),eff.price&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{className:"text-sm font-medium",children:t("Price")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"number",value:minPrice,onChange:e=>{const n=Number(e.target.value);setMinPrice(n),pushUrl({min:n}),null==onChange||onChange({size,color,minPrice:n,maxPrice})},className:"w-20 rounded border p-1 text-sm"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-sm","aria-hidden":!0,children:"-"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"number",value:maxPrice,onChange:e=>{const n=Number(e.target.value);setMaxPrice(n),pushUrl({max:n}),null==onChange||onChange({size,color,minPrice,maxPrice:n})},className:"w-20 rounded border p-1 text-sm"})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"text-xs text-muted-foreground",children:[results.length," ",t("products")]})]})}ProductFilter.__docgenInfo={description:"",methods:[],displayName:"ProductFilter",props:{showSize:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},showColor:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},showPrice:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},facets:{required:!1,tsType:{name:"FacetConfig"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(state: { size?: string; color?: string; minPrice?: number; maxPrice?: number }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ size?: string; color?: string; minPrice?: number; maxPrice?: number }",signature:{properties:[{key:"size",value:{name:"string",required:!1}},{key:"color",value:{name:"string",required:!1}},{key:"minPrice",value:{name:"number",required:!1}},{key:"maxPrice",value:{name:"number",required:!1}}]}},name:"state"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/hooks/useProductFilters.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>useProductFilters});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js");function useProductFilters(rows){const[search,setSearch]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),[status,setStatus]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("all"),availableLocales=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{const set=new Set;return rows.forEach(p=>{"object"==typeof p.title&&Object.keys(p.title).forEach(k=>set.add(k))}),Array.from(set)},[rows]),normalisedQuery=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>search.trim().toLowerCase(),[search]),filteredRows=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>rows.filter(p=>{const matchesTitle="string"==typeof p.title?p.title.toLowerCase().includes(normalisedQuery):availableLocales.some(loc=>{var _p_title_loc;return(null!==(_p_title_loc=p.title[loc])&&void 0!==_p_title_loc?_p_title_loc:"").toLowerCase().includes(normalisedQuery)});var _p_sku;const matchesSku=(null!==(_p_sku=p.sku)&&void 0!==_p_sku?_p_sku:"").toLowerCase().includes(normalisedQuery),matchesQuery=0===normalisedQuery.length||matchesTitle||matchesSku,matchesStatus="all"===status||p.status===status;return matchesQuery&&matchesStatus}),[rows,normalisedQuery,status,availableLocales]);return{search,status,setSearch,setStatus,filteredRows}}}}]);