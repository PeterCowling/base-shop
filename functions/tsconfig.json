// functions/tsconfig.json
{
  "extends": "../tsconfig.base.json",

  "compilerOptions": {
    /* referenced-project requirements */
    "composite": true,
    "emitDeclarationOnly": true /* .d.ts only */,
    "noEmit": false,

    /* Cloudflare Workers runtime */
    "types": ["@cloudflare/workers-types", "node"],
    "lib": ["es2022", "webworker"],
    "skipLibCheck": true,

    /* module / output */
    "module": "esnext",
    /*
     * Use the same module resolution strategy as the base config. The
     * monorepo relies on TS 5’s `bundler` resolution to correctly honor
     * package `exports` and `types` fields (e.g. for `@acme/config/env/core`).
     */
    "moduleResolution": "bundler",
    "outDir": "dist",
    "declarationMap": true,

    /*
     * Override path mapping for the email package to point at the package root
     * so that TypeScript reads its compiled declarations instead of pulling
     * in the source tree (which lives outside this package’s root).
     */
    "baseUrl": ".",
    "paths": {
      "@acme/email": ["../packages/email/src/index.ts", "../packages/email"]
    }
  },

  /* build these libraries first */
  "references": [
    { "path": "../packages/types" },
    { "path": "../packages/platform-core" },
    { "path": "../packages/lib" },
    { "path": "../packages/config" },
    { "path": "../packages/email" },
    { "path": "../packages/date-utils" },
    { "path": "../packages/sanity" }
  ],

  /* production Workers source only */
  "include": ["src/**/*.ts", "*.ts"],
  "exclude": ["dist", "__tests__/**"]
}
