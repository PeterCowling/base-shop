"use strict";(self.webpackChunkcms_monorepo=self.webpackChunkcms_monorepo||[]).push([[6346],{"./packages/ui/src/components/ComponentPreview.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ComponentPreview_stories});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js"),console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");class PreviewErrorBoundary extends react.Component{static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(error){console.error("Component preview failed",error)}render(){return this.state.hasError?(0,jsx_runtime.jsx)("div",{className:"rounded border p-4 text-danger",children:"Failed to render preview"}):this.props.children}constructor(props){super(props),this.state={hasError:!1}}}function ComponentPreview({component,componentProps={}}){const[NewComp,setNewComp]=(0,react.useState)(null),[OldComp,setOldComp]=(0,react.useState)(null),[showCompare,setShowCompare]=(0,react.useState)(!1),[compareMode,setCompareMode]=(0,react.useState)("side"),[showNew,setShowNew]=(0,react.useState)(!0);return(0,react.useEffect)(()=>{const basePath=`@ui/components/${component.file.replace(/\.[jt]sx?$/,"")}`,load=async p=>{var _globalThis___UPGRADE_MOCKS__;if("undefined"!=typeof globalThis&&(null===(_globalThis___UPGRADE_MOCKS__=globalThis.__UPGRADE_MOCKS__)||void 0===_globalThis___UPGRADE_MOCKS__?void 0:_globalThis___UPGRADE_MOCKS__[p]))return globalThis.__UPGRADE_MOCKS__[p];const m=await import(p);var _m_component_componentName;return null!==(_m_component_componentName=m[component.componentName])&&void 0!==_m_component_componentName?_m_component_componentName:m.default};load(basePath).then(comp=>setNewComp(()=>comp)).catch(err=>console.error("Failed to load component",component.componentName,err)),load(`${basePath}.bak`).then(comp=>setOldComp(()=>comp)).catch(()=>{})},[component]),(0,jsx_runtime.jsxs)("div",{className:"space-y-2 rounded border p-4",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between",children:[(0,jsx_runtime.jsx)("h3",{children:component.componentName}),OldComp&&(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded border px-2 py-1 min-h-10 min-w-10",onClick:()=>setShowCompare(s=>!s),children:showCompare?"Hide comparison":"Compare"})]}),(0,jsx_runtime.jsx)(PreviewErrorBoundary,{children:showCompare&&OldComp?(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)("div",{className:"flex gap-2",children:[(0,jsx_runtime.jsx)("button",{type:"button",onClick:()=>setCompareMode("side"),className:"rounded border px-2 py-1 min-h-10 min-w-10 "+("side"===compareMode?"bg-muted":""),children:"Side by side"}),(0,jsx_runtime.jsx)("button",{type:"button",onClick:()=>setCompareMode("toggle"),className:"rounded border px-2 py-1 min-h-10 min-w-10 "+("toggle"===compareMode?"bg-muted":""),children:"Toggle"})]}),"side"===compareMode?(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,jsx_runtime.jsx)("div",{children:NewComp?(0,jsx_runtime.jsx)(NewComp,{...componentProps}):null}),(0,jsx_runtime.jsx)("div",{children:OldComp?(0,jsx_runtime.jsx)(OldComp,{...componentProps}):null})]}):(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded border px-2 py-1 min-h-10 min-w-10",onClick:()=>setShowNew(s=>!s),children:showNew?"Show old":"Show new"}),(0,jsx_runtime.jsx)("div",{children:showNew?NewComp&&(0,jsx_runtime.jsx)(NewComp,{...componentProps}):OldComp&&(0,jsx_runtime.jsx)(OldComp,{...componentProps})})]})]}):NewComp?(0,jsx_runtime.jsx)(NewComp,{...componentProps}):null})]})}ComponentPreview.__docgenInfo={description:"",methods:[],displayName:"ComponentPreview",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"upgradeComponentSchema"}],raw:"z.infer<typeof upgradeComponentSchema>"},description:""},componentProps:{required:!1,tsType:{name:"Props"},description:"",defaultValue:{value:"{}",computed:!1}}}};const Demo=({label="Demo"})=>(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded border px-3 py-2",children:label});"undefined"!=typeof globalThis&&(globalThis.__UPGRADE_MOCKS__={"@ui/components/demo/Button":Demo,"@ui/components/demo/Button.bak":props=>(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded border px-3 py-2 opacity-70",children:props.label||"Demo (old)"})});const ComponentPreview_stories={component:ComponentPreview,tags:["autodocs"],args:{component:{file:"demo/Button.tsx",componentName:"DemoButton",newChecksum:"dev"},componentProps:{label:"Hello"}},parameters:{docs:{description:{component:"Developer utility to preview a component alongside a previous (bak) version and compare side-by-side or toggled."}}}},Default={},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{}",...Default.parameters?.docs?.source}}}}}]);