"use strict";(self.webpackChunkcms_monorepo=self.webpackChunkcms_monorepo||[]).push([[1091],{"./node_modules/.pnpm/@radix-ui+react-popover@1.1.15_@types+react-dom@19.1.6_@types+react@19.1.8__@types+reac_b217370de292fda1fe2b7a99f857f8dc/node_modules/@radix-ui/react-popover/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Mz:()=>Anchor2,UC:()=>Content2,ZL:()=>Portal,bL:()=>Root2,l9:()=>Trigger});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js"),_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/.pnpm/@radix-ui+primitive@1.1.3/node_modules/@radix-ui/primitive/dist/index.mjs"),_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-compose-refs@1.1.2_@types+react@19.1.8_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-compose-refs/dist/index.mjs"),_radix_ui_react_context__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-context@1.1.2_@types+react@19.1.8_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-context/dist/index.mjs"),_radix_ui_react_dismissable_layer__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-dismissable-layer@1.1.11_@types+react-dom@19.1.6_@types+react@19.1.8__@_1f1b731f5526c836f5c2866586da8fcc/node_modules/@radix-ui/react-dismissable-layer/dist/index.mjs"),_radix_ui_react_focus_guards__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-focus-guards@1.1.3_@types+react@19.1.8_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-focus-guards/dist/index.mjs"),_radix_ui_react_focus_scope__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-focus-scope@1.1.7_@types+react-dom@19.1.6_@types+react@19.1.8__@types+r_3303dd36ef03f9c4bae85c013b69e3d5/node_modules/@radix-ui/react-focus-scope/dist/index.mjs"),_radix_ui_react_id__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-id@1.1.1_@types+react@19.1.8_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-id/dist/index.mjs"),_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-popper@1.2.8_@types+react-dom@19.1.6_@types+react@19.1.8__@types+react@_da27c1475a63e368cc10725049cb740a/node_modules/@radix-ui/react-popper/dist/index.mjs"),_radix_ui_react_portal__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-portal@1.1.9_@types+react-dom@19.1.6_@types+react@19.1.8__@types+react@_c8cb7298c94923c30556ba2d6a6c3b6c/node_modules/@radix-ui/react-portal/dist/index.mjs"),_radix_ui_react_presence__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-presence@1.1.5_@types+react-dom@19.1.6_@types+react@19.1.8__@types+reac_a6e8fec826c0054468bf9342d937c961/node_modules/@radix-ui/react-presence/dist/index.mjs"),_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-primitive@2.1.3_@types+react-dom@19.1.6_@types+react@19.1.8__@types+rea_a80e599d01a0661e2eb97d61fda6a1d3/node_modules/@radix-ui/react-primitive/dist/index.mjs"),_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-slot@1.2.3_@types+react@19.1.8_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-slot/dist/index.mjs"),_radix_ui_react_use_controllable_state__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-use-controllable-state@1.2.2_@types+react@19.1.8_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-use-controllable-state/dist/index.mjs"),aria_hidden__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/.pnpm/aria-hidden@1.2.6/node_modules/aria-hidden/dist/es2015/index.js"),react_remove_scroll__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/.pnpm/react-remove-scroll@2.7.1_@types+react@19.1.8_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/react-remove-scroll/dist/es2015/Combination.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),[createPopoverContext,createPopoverScope]=(0,_radix_ui_react_context__WEBPACK_IMPORTED_MODULE_2__.A)("Popover",[_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_3__.Bk]),usePopperScope=(0,_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_3__.Bk)(),[PopoverProvider,usePopoverContext]=createPopoverContext("Popover"),Popover=props=>{const{__scopePopover,children,open:openProp,defaultOpen,onOpenChange,modal=!1}=props,popperScope=usePopperScope(__scopePopover),triggerRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),[hasCustomAnchor,setHasCustomAnchor]=react__WEBPACK_IMPORTED_MODULE_0__.useState(!1),[open,setOpen]=(0,_radix_ui_react_use_controllable_state__WEBPACK_IMPORTED_MODULE_4__.i)({prop:openProp,defaultProp:defaultOpen??!1,onChange:onOpenChange,caller:"Popover"});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_3__.bL,{...popperScope,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(PopoverProvider,{scope:__scopePopover,contentId:(0,_radix_ui_react_id__WEBPACK_IMPORTED_MODULE_5__.B)(),triggerRef,open,onOpenChange:setOpen,onOpenToggle:react__WEBPACK_IMPORTED_MODULE_0__.useCallback(()=>setOpen(prevOpen=>!prevOpen),[setOpen]),hasCustomAnchor,onCustomAnchorAdd:react__WEBPACK_IMPORTED_MODULE_0__.useCallback(()=>setHasCustomAnchor(!0),[]),onCustomAnchorRemove:react__WEBPACK_IMPORTED_MODULE_0__.useCallback(()=>setHasCustomAnchor(!1),[]),modal,children})})};Popover.displayName="Popover";var PopoverAnchor=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((props,forwardedRef)=>{const{__scopePopover,...anchorProps}=props,context=usePopoverContext("PopoverAnchor",__scopePopover),popperScope=usePopperScope(__scopePopover),{onCustomAnchorAdd,onCustomAnchorRemove}=context;return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>(onCustomAnchorAdd(),()=>onCustomAnchorRemove()),[onCustomAnchorAdd,onCustomAnchorRemove]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_3__.Mz,{...popperScope,...anchorProps,ref:forwardedRef})});PopoverAnchor.displayName="PopoverAnchor";var PopoverTrigger=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((props,forwardedRef)=>{const{__scopePopover,...triggerProps}=props,context=usePopoverContext("PopoverTrigger",__scopePopover),popperScope=usePopperScope(__scopePopover),composedTriggerRef=(0,_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_6__.s)(forwardedRef,context.triggerRef),trigger=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_7__.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":context.open,"aria-controls":context.contentId,"data-state":getState(context.open),...triggerProps,ref:composedTriggerRef,onClick:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__.mK)(props.onClick,context.onOpenToggle)});return context.hasCustomAnchor?trigger:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_3__.Mz,{asChild:!0,...popperScope,children:trigger})});PopoverTrigger.displayName="PopoverTrigger";var[PortalProvider,usePortalContext]=createPopoverContext("PopoverPortal",{forceMount:void 0}),PopoverPortal=props=>{const{__scopePopover,forceMount,children,container}=props,context=usePopoverContext("PopoverPortal",__scopePopover);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(PortalProvider,{scope:__scopePopover,forceMount,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_presence__WEBPACK_IMPORTED_MODULE_9__.C,{present:forceMount||context.open,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_portal__WEBPACK_IMPORTED_MODULE_10__.Z,{asChild:!0,container,children})})})};PopoverPortal.displayName="PopoverPortal";var PopoverContent=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((props,forwardedRef)=>{const portalContext=usePortalContext("PopoverContent",props.__scopePopover),{forceMount=portalContext.forceMount,...contentProps}=props,context=usePopoverContext("PopoverContent",props.__scopePopover);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_presence__WEBPACK_IMPORTED_MODULE_9__.C,{present:forceMount||context.open,children:context.modal?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(PopoverContentModal,{...contentProps,ref:forwardedRef}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(PopoverContentNonModal,{...contentProps,ref:forwardedRef})})});PopoverContent.displayName="PopoverContent";var Slot=(0,_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__.TL)("PopoverContent.RemoveScroll"),PopoverContentModal=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((props,forwardedRef)=>{const context=usePopoverContext("PopoverContent",props.__scopePopover),contentRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),composedRefs=(0,_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_6__.s)(forwardedRef,contentRef),isRightClickOutsideRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(!1);return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{const content=contentRef.current;if(content)return(0,aria_hidden__WEBPACK_IMPORTED_MODULE_12__.Eq)(content)},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_remove_scroll__WEBPACK_IMPORTED_MODULE_13__.A,{as:Slot,allowPinchZoom:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(PopoverContentImpl,{...props,ref:composedRefs,trapFocus:context.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__.mK)(props.onCloseAutoFocus,event=>{event.preventDefault(),isRightClickOutsideRef.current||context.triggerRef.current?.focus()}),onPointerDownOutside:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__.mK)(props.onPointerDownOutside,event=>{const originalEvent=event.detail.originalEvent,ctrlLeftClick=0===originalEvent.button&&!0===originalEvent.ctrlKey,isRightClick=2===originalEvent.button||ctrlLeftClick;isRightClickOutsideRef.current=isRightClick},{checkForDefaultPrevented:!1}),onFocusOutside:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__.mK)(props.onFocusOutside,event=>event.preventDefault(),{checkForDefaultPrevented:!1})})})}),PopoverContentNonModal=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((props,forwardedRef)=>{const context=usePopoverContext("PopoverContent",props.__scopePopover),hasInteractedOutsideRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(!1),hasPointerDownOutsideRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(!1);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(PopoverContentImpl,{...props,ref:forwardedRef,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:event=>{props.onCloseAutoFocus?.(event),event.defaultPrevented||(hasInteractedOutsideRef.current||context.triggerRef.current?.focus(),event.preventDefault()),hasInteractedOutsideRef.current=!1,hasPointerDownOutsideRef.current=!1},onInteractOutside:event=>{props.onInteractOutside?.(event),event.defaultPrevented||(hasInteractedOutsideRef.current=!0,"pointerdown"===event.detail.originalEvent.type&&(hasPointerDownOutsideRef.current=!0));const target=event.target,targetIsTrigger=context.triggerRef.current?.contains(target);targetIsTrigger&&event.preventDefault(),"focusin"===event.detail.originalEvent.type&&hasPointerDownOutsideRef.current&&event.preventDefault()}})}),PopoverContentImpl=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((props,forwardedRef)=>{const{__scopePopover,trapFocus,onOpenAutoFocus,onCloseAutoFocus,disableOutsidePointerEvents,onEscapeKeyDown,onPointerDownOutside,onFocusOutside,onInteractOutside,...contentProps}=props,context=usePopoverContext("PopoverContent",__scopePopover),popperScope=usePopperScope(__scopePopover);return(0,_radix_ui_react_focus_guards__WEBPACK_IMPORTED_MODULE_14__.Oh)(),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_focus_scope__WEBPACK_IMPORTED_MODULE_15__.n,{asChild:!0,loop:!0,trapped:trapFocus,onMountAutoFocus:onOpenAutoFocus,onUnmountAutoFocus:onCloseAutoFocus,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_dismissable_layer__WEBPACK_IMPORTED_MODULE_16__.qW,{asChild:!0,disableOutsidePointerEvents,onInteractOutside,onEscapeKeyDown,onPointerDownOutside,onFocusOutside,onDismiss:()=>context.onOpenChange(!1),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_3__.UC,{"data-state":getState(context.open),role:"dialog",id:context.contentId,...popperScope,...contentProps,ref:forwardedRef,style:{...contentProps.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),PopoverClose=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((props,forwardedRef)=>{const{__scopePopover,...closeProps}=props,context=usePopoverContext("PopoverClose",__scopePopover);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_7__.sG.button,{type:"button",...closeProps,ref:forwardedRef,onClick:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__.mK)(props.onClick,()=>context.onOpenChange(!1))})});PopoverClose.displayName="PopoverClose";var PopoverArrow=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((props,forwardedRef)=>{const{__scopePopover,...arrowProps}=props,popperScope=usePopperScope(__scopePopover);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_3__.i3,{...popperScope,...arrowProps,ref:forwardedRef})});function getState(open){return open?"open":"closed"}PopoverArrow.displayName="PopoverArrow";var Root2=Popover,Anchor2=PopoverAnchor,Trigger=PopoverTrigger,Portal=PopoverPortal,Content2=PopoverContent},"./packages/platform-core/src/hooks/usePublishLocations.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>usePublishLocations});var _acme_shared_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/shared-utils/src/index.ts"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js");function usePublishLocations(){const[locations,setLocations]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),fetchLocations=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async()=>{setLocations(await async function loadPublishLocations(){try{return await(0,_acme_shared_utils__WEBPACK_IMPORTED_MODULE_0__.x6)("/api/publish-locations")}catch(e){return[]}}())},[]);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{fetchLocations()},[fetchLocations]);return{locations:(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>locations,[locations]),reload:(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{fetchLocations()},[fetchLocations])}}},"./packages/ui/src/components/cms/LocaleContentAccordion.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>LocaleContentAccordion});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/ui/src/components/atoms/shadcn/index.ts");function LocaleContentAccordion({panels,defaultOpenLocales}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.nD,{type:"multiple",defaultValue:defaultOpenLocales,className:"space-y-3",children:panels.map(({locale,trigger,content})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.As,{value:locale,className:"border-none",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.$m,{className:"rounded-md border border-border-3 bg-muted/30 px-4 py-2 text-start text-sm font-semibold",children:trigger}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.ub,{className:"pt-3",children:content})]},locale))})}LocaleContentAccordion.__docgenInfo={description:"",methods:[],displayName:"LocaleContentAccordion",props:{panels:{required:!0,tsType:{name:"Array",elements:[{name:"LocalePanelConfig"}],raw:"LocalePanelConfig[]"},description:""},defaultOpenLocales:{required:!0,tsType:{name:"unknown"},description:""}}}},"./packages/ui/src/components/cms/ProductEditorForm.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ProductEditorForm_stories});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),shadcn=__webpack_require__("./packages/ui/src/components/atoms/shadcn/index.ts"),atoms=__webpack_require__("./packages/ui/src/components/atoms/index.ts"),src=__webpack_require__("./packages/i18n/src/index.ts"),Tabs=__webpack_require__("./packages/ui/src/components/cms/blocks/Tabs.tsx"),react=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js");function PricingTab({price,currency,onPriceChange}){const priceInputId=(0,react.useId)();return(0,jsx_runtime.jsx)("div",{className:"space-y-4",children:(0,jsx_runtime.jsx)(shadcn.Zp,{children:(0,jsx_runtime.jsxs)(shadcn.Wu,{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,jsx_runtime.jsx)("div",{className:"flex flex-col gap-2 sm:w-64",children:(0,jsx_runtime.jsx)(shadcn.pd,{id:priceInputId,label:"Price (cents)",type:"number",name:"price",value:price,onChange:onPriceChange,required:!0,min:0})}),currency&&(0,jsx_runtime.jsx)(atoms.vu,{className:"bg-muted px-3 py-1 text-xs uppercase tracking-wide",children:currency})]})})})}PricingTab.__docgenInfo={description:"",methods:[],displayName:"PricingTab",props:{price:{required:!0,tsType:{name:"number"},description:""},currency:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},onPriceChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(event: ChangeEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ChangeEvent",elements:[{name:"HTMLInputElement"}],raw:"ChangeEvent<HTMLInputElement>"},name:"event"}],return:{name:"void"}}},description:""}}};var react_icons_esm=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-icons@1.3.2_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-icons/dist/react-icons.esm.js");function VariantsTab({variants,onVariantChange,onAddVariantValue,onRemoveVariantValue}){const t=(0,src.c3)(),variantEntries=Object.entries(variants);return 0===variantEntries.length?(0,jsx_runtime.jsx)("div",{className:"space-y-4",children:(0,jsx_runtime.jsx)(shadcn.Zp,{children:(0,jsx_runtime.jsx)(shadcn.Wu,{children:(0,jsx_runtime.jsx)("p",{className:"text-sm text-muted-foreground",children:t("This product has no variant dimensions configured.")})})})}):(0,jsx_runtime.jsx)("div",{className:"space-y-4",children:variantEntries.map(([attr,values])=>(0,jsx_runtime.jsx)(shadcn.Zp,{children:(0,jsx_runtime.jsxs)(shadcn.Wu,{className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between",children:[(0,jsx_runtime.jsx)(atoms.vu,{className:"bg-muted px-2 py-1 text-xs uppercase tracking-wide",children:attr}),(0,jsx_runtime.jsx)(atoms.K0,{"aria-label":`Add option to ${attr}`,onClick:()=>onAddVariantValue(attr),variant:"secondary",children:(0,jsx_runtime.jsx)(react_icons_esm.c11,{})})]}),(0,jsx_runtime.jsx)("div",{className:"space-y-3",children:values.map((value,index)=>(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(shadcn.pd,{name:`variant_${attr}_${index}`,value,onChange:onVariantChange,className:"flex-1"}),(0,jsx_runtime.jsx)(atoms.K0,{"aria-label":`Remove ${attr} option ${index+1}`,onClick:()=>onRemoveVariantValue(attr,index),variant:"ghost",children:(0,jsx_runtime.jsx)(react_icons_esm.MKb,{})})]},`${attr}:${value}`))})]})},attr))})}VariantsTab.__docgenInfo={description:"",methods:[],displayName:"VariantsTab",props:{variants:{required:!0,tsType:{name:"Record",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}],raw:"Record<string, string[]>"},description:""},onVariantChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(event: ChangeEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ChangeEvent",elements:[{name:"HTMLInputElement"}],raw:"ChangeEvent<HTMLInputElement>"},name:"event"}],return:{name:"void"}}},description:""},onAddVariantValue:{required:!0,tsType:{name:"signature",type:"function",raw:"(attr: string) => void",signature:{arguments:[{type:{name:"string"},name:"attr"}],return:{name:"void"}}},description:""},onRemoveVariantValue:{required:!0,tsType:{name:"signature",type:"function",raw:"(attr: string, index: number) => void",signature:{arguments:[{type:{name:"string"},name:"attr"},{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""}}};var PublishLocationSelector=__webpack_require__("./packages/ui/src/components/cms/PublishLocationSelector.tsx"),Inline=__webpack_require__("./packages/ui/src/components/atoms/primitives/Inline.tsx");function PublishLocationsTab({selectedIds,locations,onChange}){const t=(0,src.c3)(),selectedLabels=(0,react.useMemo)(()=>selectedIds.map(id=>{var _locations_find,_locations_find_name;return null!==(_locations_find_name=null===(_locations_find=locations.find(location=>location.id===id))||void 0===_locations_find?void 0:_locations_find.name)&&void 0!==_locations_find_name?_locations_find_name:id}),[selectedIds,locations]);return(0,jsx_runtime.jsx)("div",{className:"space-y-4",children:(0,jsx_runtime.jsx)(shadcn.Zp,{children:(0,jsx_runtime.jsxs)(shadcn.Wu,{className:"space-y-4",children:[(0,jsx_runtime.jsx)(PublishLocationSelector.A,{selectedIds,onChange,showReload:!0}),selectedIds.length>0?(0,jsx_runtime.jsx)(Inline.c,{className:"gap-2",wrap:!0,children:selectedLabels.map(label=>(0,jsx_runtime.jsx)(atoms.vu,{className:"bg-muted px-3 py-1 text-xs",children:label},label))}):(0,jsx_runtime.jsx)("p",{className:"text-sm text-muted-foreground",children:t("products.selectPublishDestinations")})]})})})}PublishLocationsTab.__docgenInfo={description:"",methods:[],displayName:"PublishLocationsTab",props:{selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},locations:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"publishLocationSchema"}],raw:"z.infer<typeof publishLocationSchema>"}],raw:"PublishLocation[]"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(ids: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"ids"}],return:{name:"void"}}},description:""}}};var shared_utils_src=__webpack_require__("./packages/shared-utils/src/index.ts"),primitives=__webpack_require__("./packages/ui/src/components/atoms/primitives/index.ts"),console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const equal=(p,n)=>p.selectedIds===n.selectedIds&&p.onChange===n.onChange&&p.showReload===n.showReload;function PublishShopsSelectorInner({selectedIds,onChange,showReload=!1}){const t=(0,src.c3)(),[shops,setShops]=(0,react.useState)([]),[status,setStatus]=(0,react.useState)("loading"),[errorMsg,setErrorMsg]=(0,react.useState)(null),fetchShops=(0,react.useCallback)(async()=>{setStatus("loading"),setErrorMsg(null);try{const res=await fetch("/api/shops");if(!res.ok){const json=await res.json().catch(()=>({}));var _json_error;throw new Error(null!==(_json_error=json.error)&&void 0!==_json_error?_json_error:`Error ${res.status}`)}const data=await res.json();if(!Array.isArray(data))return console.error("Invalid shops response shape",data),setStatus("error"),setShops([]),void setErrorMsg(null);setShops(data),setStatus("ready")}catch(err){console.error("Error loading shops",err),setStatus("error"),setShops([]),setErrorMsg(err instanceof Error?err.message:null)}},[]);(0,react.useEffect)(()=>{fetchShops()},[fetchShops]);const toggle=(0,react.useCallback)(id=>{onChange((0,shared_utils_src.g6)(selectedIds,id))},[selectedIds,onChange]);return"loading"===status?(0,jsx_runtime.jsx)("span",{className:"text-sm",children:t("shops.loading")}):"error"===status?(0,jsx_runtime.jsx)("span",{className:"text-sm text-danger","data-token":"--color-danger",children:null!=errorMsg?errorMsg:t("shops.loadFailed")}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(primitives.BJ,{gap:2,children:[shops.map(id=>{const inputId=`shop_${id}`;return(0,jsx_runtime.jsx)("div",{className:"cursor-pointer select-none",children:(0,jsx_runtime.jsxs)(primitives.cV,{alignY:"start",gap:2,children:[(0,jsx_runtime.jsx)(shadcn.pd,{id:inputId,type:"checkbox",checked:selectedIds.includes(id),onChange:()=>toggle(id),className:"mt-1 h-4 w-4"}),(0,jsx_runtime.jsx)("span",{children:(0,jsx_runtime.jsx)("label",{htmlFor:inputId,className:"font-medium",children:id})})]})},id)}),0===shops.length&&(0,jsx_runtime.jsx)("span",{className:"text-muted-foreground text-sm",children:t("shops.noneFound")})]}),showReload&&(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",onClick:fetchShops,variant:"outline",className:"mt-4 rounded-2xl p-2 text-sm shadow",children:t("actions.refreshList")})]})}const PublishShopsSelector=(0,react.memo)(PublishShopsSelectorInner,equal);function PublishShopsTab({selectedIds,onChange}){const t=(0,src.c3)(),selectedLabels=(0,react.useMemo)(()=>selectedIds,[selectedIds]);return(0,jsx_runtime.jsx)("div",{className:"space-y-4",children:(0,jsx_runtime.jsx)(shadcn.Zp,{children:(0,jsx_runtime.jsxs)(shadcn.Wu,{className:"space-y-4",children:[(0,jsx_runtime.jsx)(PublishShopsSelector,{selectedIds,onChange,showReload:!0}),selectedIds.length>0?(0,jsx_runtime.jsx)(Inline.c,{gap:2,wrap:!0,children:selectedLabels.map(label=>(0,jsx_runtime.jsx)(atoms.vu,{className:"bg-muted px-3 py-1 text-xs",children:label},label))}):(0,jsx_runtime.jsx)("p",{className:"text-sm text-muted-foreground",children:t("Select one or more shops to publish this product.")})]})})})}PublishShopsSelectorInner.__docgenInfo={description:"",methods:[],displayName:"PublishShopsSelectorInner",props:{selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(nextSelectedIds: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"nextSelectedIds"}],return:{name:"void"}}},description:""},showReload:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}},PublishShopsTab.__docgenInfo={description:"",methods:[],displayName:"PublishShopsTab",props:{selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(ids: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"ids"}],return:{name:"void"}}},description:""}}};var next_image=__webpack_require__("./node_modules/.pnpm/@storybook+nextjs@8.6.14_@swc+core@1.12.9_esbuild@0.25.5_next@15.3.5_@babel+core@7.28.4_f309bebf97d2c09aa3c164b2abf593ce/node_modules/@storybook/nextjs/dist/images/next-image.mjs");function MediaGalleryTab({uploader,media,onMoveMedia,onRemoveMedia}){const t=(0,src.c3)();return(0,jsx_runtime.jsx)("div",{className:"space-y-4",children:(0,jsx_runtime.jsx)(shadcn.Zp,{children:(0,jsx_runtime.jsxs)(shadcn.Wu,{className:"space-y-4",children:[uploader,0===media.length&&(0,jsx_runtime.jsx)("p",{className:"text-sm text-muted-foreground",children:t("cms.media.gallery.emptyHelp")}),media.length>0&&(0,jsx_runtime.jsx)(primitives.xA,{cols:1,gap:4,className:"sm:grid-cols-2 lg:grid-cols-3",children:media.map((item,index)=>(0,jsx_runtime.jsxs)("div",{className:"group relative overflow-hidden rounded-xl border",children:["image"===item.type?(0,jsx_runtime.jsx)("div",{className:"relative h-48 w-full","data-aspect":"16/9",children:(0,jsx_runtime.jsx)(next_image.A,{src:item.url,alt:item.altText||"",fill:!0,className:"object-cover",sizes:"(min-width: 1024px) 33vw, 50vw"})}):(0,jsx_runtime.jsx)("video",{src:item.url,className:"h-48 w-full object-cover","data-aspect":"16/9",muted:!0,playsInline:!0,loop:!0}),(0,jsx_runtime.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-black/20 opacity-0 transition-opacity group-hover:opacity-100"}),(0,jsx_runtime.jsxs)("div",{className:"absolute inset-x-3 top-3 flex items-center justify-between gap-2 opacity-0 transition-opacity group-hover:opacity-100",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[(0,jsx_runtime.jsx)(atoms.K0,{"aria-label":String(t("cms.media.gallery.aria.moveUp",{index:index+1})),onClick:()=>onMoveMedia(index,index-1),disabled:0===index,variant:"secondary",children:(0,jsx_runtime.jsx)(react_icons_esm.Kpk,{})}),(0,jsx_runtime.jsx)(atoms.K0,{"aria-label":String(t("cms.media.gallery.aria.moveDown",{index:index+1})),onClick:()=>onMoveMedia(index,index+1),disabled:index===media.length-1,variant:"secondary",children:(0,jsx_runtime.jsx)(react_icons_esm.ZLN,{})})]}),(0,jsx_runtime.jsx)(atoms.K0,{"aria-label":String(t("cms.media.gallery.aria.remove",{index:index+1})),onClick:()=>onRemoveMedia(index),variant:"danger",children:(0,jsx_runtime.jsx)(react_icons_esm.MKb,{})})]}),(0,jsx_runtime.jsx)("div",{className:"absolute bottom-3 start-3 opacity-0 transition-opacity group-hover:opacity-100",children:(0,jsx_runtime.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-surface-2 px-2 py-1 text-xs font-medium shadow",children:[(0,jsx_runtime.jsx)(react_icons_esm.YtH,{"aria-hidden":!0}),t("cms.media.gallery.drag")]})})]},item.url))})]})})})}MediaGalleryTab.__docgenInfo={description:"",methods:[],displayName:"MediaGalleryTab",props:{uploader:{required:!0,tsType:{name:"ReactNode"},description:""},media:{required:!0,tsType:{name:"Array",elements:[{name:"MediaItem"}],raw:"MediaItem[]"},description:""},onMoveMedia:{required:!0,tsType:{name:"signature",type:"function",raw:"(from: number, to: number) => void",signature:{arguments:[{type:{name:"number"},name:"from"},{type:{name:"number"},name:"to"}],return:{name:"void"}}},description:""},onRemoveMedia:{required:!0,tsType:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""}}};var LocaleContentAccordion=__webpack_require__("./packages/ui/src/components/cms/LocaleContentAccordion.tsx");const localeLabel={en:"English"};function LocaleContentTab({locales,title,description,onFieldChange}){const localePanels=locales.map(locale=>{var _localeLabel_locale,_title_locale,_description_locale;return{locale,trigger:(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(atoms.vu,{className:"bg-muted px-2 py-1 text-xs uppercase tracking-wide",children:locale}),(0,jsx_runtime.jsx)("span",{className:"text-sm text-muted-foreground",children:null!==(_localeLabel_locale=localeLabel[locale])&&void 0!==_localeLabel_locale?_localeLabel_locale:locale.toUpperCase()})]}),content:(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsxs)("label",{className:"flex flex-col gap-1",htmlFor:`title_${locale}`,children:[(0,jsx_runtime.jsx)("span",{className:"text-sm font-medium",children:"Title"}),(0,jsx_runtime.jsx)(shadcn.pd,{id:`title_${locale}`,name:`title_${locale}`,value:null!==(_title_locale=null==title?void 0:title[locale])&&void 0!==_title_locale?_title_locale:"",onChange:event=>onFieldChange(event)})]}),(0,jsx_runtime.jsxs)("label",{className:"flex flex-col gap-1",htmlFor:`desc_${locale}`,children:[(0,jsx_runtime.jsx)("span",{className:"text-sm font-medium",children:"Description"}),(0,jsx_runtime.jsx)(shadcn.TM,{id:`desc_${locale}`,rows:5,name:`desc_${locale}`,value:null!==(_description_locale=null==description?void 0:description[locale])&&void 0!==_description_locale?_description_locale:"",onChange:event=>onFieldChange(event)})]})]})}});return(0,jsx_runtime.jsx)("div",{className:"space-y-4",children:(0,jsx_runtime.jsx)(shadcn.Zp,{children:(0,jsx_runtime.jsx)(shadcn.Wu,{children:(0,jsx_runtime.jsx)(LocaleContentAccordion.A,{panels:localePanels,defaultOpenLocales:locales})})})})}LocaleContentTab.__docgenInfo={description:"",methods:[],displayName:"LocaleContentTab",props:{locales:{required:!0,tsType:{name:"unknown"},description:""},title:{required:!0,tsType:{name:"Partial",elements:[{name:"Record",elements:[{name:"Locale"},{name:"string"}],raw:"Record<Locale, string>"}],raw:"Partial<Record<Locale, string>>"},description:""},description:{required:!0,tsType:{name:"Partial",elements:[{name:"Record",elements:[{name:"Locale"},{name:"string"}],raw:"Record<Locale, string>"}],raw:"Partial<Record<Locale, string>>"},description:""},onFieldChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(\n  event: ChangeEvent<HTMLInputElement | HTMLTextAreaElement>,\n) => void",signature:{arguments:[{type:{name:"ChangeEvent",elements:[{name:"union",raw:"HTMLInputElement | HTMLTextAreaElement",elements:[{name:"HTMLInputElement"},{name:"HTMLTextAreaElement"}]}],raw:"ChangeEvent<HTMLInputElement | HTMLTextAreaElement>"},name:"event"}],return:{name:"void"}}},description:""}}};var useProductEditorFormState=__webpack_require__("./packages/ui/src/hooks/useProductEditorFormState.tsx"),useProductEditorNotifications=__webpack_require__("./packages/ui/src/hooks/useProductEditorNotifications.ts"),usePublishLocations=__webpack_require__("./packages/platform-core/src/hooks/usePublishLocations.ts"),navigation=__webpack_require__("./node_modules/.pnpm/@storybook+nextjs@8.6.14_@swc+core@1.12.9_esbuild@0.25.5_next@15.3.5_@babel+core@7.28.4_f309bebf97d2c09aa3c164b2abf593ce/node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.mjs");function ProductEditorForm({product:init,onSave,locales,formId="product-editor-form"}){const t=(0,src.c3)(),{product,errors,saving,publishTargets,setPublishTargets,handleChange,handleSubmit,uploader,removeMedia,moveMedia,addVariantValue,removeVariantValue}=(0,useProductEditorFormState.r)(init,locales,onSave),{locations}=(0,usePublishLocations.D)(),[publishShops,setPublishShops]=(0,react.useState)([]);var _usePathname;const pathname=null!==(_usePathname=(0,navigation.usePathname)())&&void 0!==_usePathname?_usePathname:"";(0,react.useEffect)(()=>{const preset=init.publishShops;if(Array.isArray(preset)&&preset.length>0)setPublishShops(preset);else if(0===publishShops.length){const currentShop=(0,shared_utils_src.e6)(pathname);currentShop&&setPublishShops([currentShop])}},[]);const errorEntries=(0,react.useMemo)(()=>Object.entries(errors),[errors]),hasErrors=errorEntries.length>0,{toast,closeToast}=(0,useProductEditorNotifications.o)({saving,hasErrors}),onFormSubmit=(0,react.useCallback)(event=>{event.preventDefault(),handleSubmit(event)},[handleSubmit]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(atoms.y8,{open:toast.open,message:toast.message,onClose:closeToast}),(0,jsx_runtime.jsxs)("form",{id:formId,"data-cy":"product-editor-form","data-testid":"product-editor-form",onSubmit:onFormSubmit,"aria-busy":saving,className:"flex flex-col gap-6",children:[(0,jsx_runtime.jsx)(shadcn.pd,{type:"hidden",name:"id",value:product.id}),(0,jsx_runtime.jsx)(shadcn.pd,{type:"hidden",name:"publishShops",value:publishShops.join(","),"data-testid":"publish-shops-input"}),hasErrors&&(0,jsx_runtime.jsxs)("div",{className:"rounded-lg border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger","data-token":"--color-danger",children:[(0,jsx_runtime.jsx)("p",{className:"font-medium",children:t("errors.foundIssues")}),(0,jsx_runtime.jsx)("ul",{className:"mt-2 space-y-1",children:errorEntries.map(([field,messages])=>(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)("span",{className:"font-semibold capitalize",children:field}),": "," ",messages.join(", ")]},field))})]}),(0,jsx_runtime.jsxs)(Tabs.A,{labels:[t("product.tabs.pricing"),t("product.tabs.variants"),t("product.tabs.publishLocations"),t("product.tabs.publishShops"),t("product.tabs.mediaGallery"),t("product.tabs.localizedContent")],className:"space-y-4",children:[(0,jsx_runtime.jsx)(PricingTab,{price:product.price,currency:product.currency,onPriceChange:event=>handleChange(event)}),(0,jsx_runtime.jsx)(VariantsTab,{variants:product.variants,onVariantChange:event=>handleChange(event),onAddVariantValue:addVariantValue,onRemoveVariantValue:removeVariantValue}),(0,jsx_runtime.jsx)(PublishLocationsTab,{selectedIds:publishTargets,locations,onChange:setPublishTargets}),(0,jsx_runtime.jsx)(PublishShopsTab,{selectedIds:publishShops,onChange:setPublishShops}),(0,jsx_runtime.jsx)(MediaGalleryTab,{uploader,media:product.media,onMoveMedia:moveMedia,onRemoveMedia:removeMedia}),(0,jsx_runtime.jsx)(LocaleContentTab,{locales,title:product.title,description:product.description,onFieldChange:event=>handleChange(event)})]}),(0,jsx_runtime.jsx)("button",{type:"submit",className:"sr-only",children:t("actions.save")})]})]})}ProductEditorForm.__docgenInfo={description:"",methods:[],displayName:"ProductEditorForm",props:{product:{required:!0,tsType:{name:"intersection",raw:"ProductPublication & {\n  variants: Record<string, string[]>;\n}",elements:[{name:"ProductPublication"},{name:"signature",type:"object",raw:"{\n  variants: Record<string, string[]>;\n}",signature:{properties:[{key:"variants",value:{name:"Record",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}],raw:"Record<string, string[]>",required:!0}}]}}]},description:"Current product snapshot (all locales)"},locales:{required:!0,tsType:{name:"unknown"},description:"Locales enabled for the current shop"},formId:{required:!1,tsType:{name:"string"},description:"Optional id shared with external toolbars",defaultValue:{value:'"product-editor-form"',computed:!1}}}};const sample={id:"1",sku:"SAMPLE-1",title:{en:"Sample",de:"Sample",it:"Sample"},description:{en:"Sample product",de:"Sample product",it:"Sample product"},price:1e3,currency:"EUR",media:[],status:"draft",shop:"demo",row_version:1,created_at:"",updated_at:"",variants:{}},ProductEditorForm_stories={component:ProductEditorForm,args:{product:sample,locales:["en","de","it"],onSave:async()=>({product:sample})},argTypes:{product:{control:"object"},locales:{control:"object"},onSave:{action:"save"}}},Default={},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{}",...Default.parameters?.docs?.source}}}},"./packages/ui/src/components/cms/PublishLocationSelector.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/ui/src/components/atoms/shadcn/index.ts"),_acme_platform_core_hooks_usePublishLocations__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/platform-core/src/hooks/usePublishLocations.ts"),_acme_shared_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/shared-utils/src/index.ts"),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js"),_atoms_primitives__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/ui/src/components/atoms/primitives/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/i18n/src/index.ts");const equal=(p,n)=>p.selectedIds===n.selectedIds&&p.onChange===n.onChange&&p.showReload===n.showReload;function PublishLocationSelectorInner({selectedIds,onChange,showReload=!1}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_5__.c3)(),{locations,reload}=(0,_acme_platform_core_hooks_usePublishLocations__WEBPACK_IMPORTED_MODULE_6__.D)(),toggle=(0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(id=>{onChange((0,_acme_shared_utils__WEBPACK_IMPORTED_MODULE_2__.g6)(selectedIds,id))},[selectedIds,onChange]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_primitives__WEBPACK_IMPORTED_MODULE_4__.BJ,{gap:2,children:locations.map(({id,name,description,requiredOrientation})=>{const inputId=`pl_${id}`;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"cursor-pointer select-none",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_primitives__WEBPACK_IMPORTED_MODULE_4__.cV,{alignY:"start",gap:2,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{id:inputId,type:"checkbox",checked:selectedIds.includes(id),onChange:()=>toggle(id),className:"mt-1 h-4 w-4"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:inputId,className:"font-medium",children:name}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{className:"text-muted-foreground ms-1 text-xs",children:["(",requiredOrientation,")"]}),description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("br",{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:inputId,className:"text-muted-foreground text-sm",children:description})]})]})]})},id)})}),showReload&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.$n,{type:"button",onClick:reload,variant:"outline",className:"mt-4 rounded-2xl p-2 text-sm shadow",children:t("actions.refreshList")})]})}const __WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_3__.memo)(PublishLocationSelectorInner,equal);PublishLocationSelectorInner.__docgenInfo={description:"",methods:[],displayName:"PublishLocationSelectorInner",props:{selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(nextSelectedIds: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"nextSelectedIds"}],return:{name:"void"}}},description:""},showReload:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}}},"./packages/ui/src/components/cms/blocks/Tabs.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>TabsBlock});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js"),_utils_style__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/ui/src/utils/style/index.ts"),_components_atoms_primitives_Inline__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/ui/src/components/atoms/primitives/Inline.tsx");function TabsBlock({labels=[],active=0,children,className}){const[current,setCurrent]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(active),contents=Array.isArray(children)?children:[children],safeIndex=Math.min(current,Math.max(contents.length-1,0));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_atoms_primitives_Inline__WEBPACK_IMPORTED_MODULE_3__.c,{className:"border-b pb-2",gap:2,children:labels.map((label,i)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"button",onClick:()=>setCurrent(i),onKeyDown:e=>{"ArrowRight"===e.key?(e.preventDefault(),setCurrent((i+1)%labels.length)):"ArrowLeft"===e.key&&(e.preventDefault(),setCurrent((i-1+labels.length)%labels.length))},className:(0,_utils_style__WEBPACK_IMPORTED_MODULE_2__.cn)("border-b-2 px-3 py-1 text-sm",i===safeIndex?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),children:label},label))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"pt-4",children:contents[safeIndex]})]})}TabsBlock.__docgenInfo={description:"",methods:[],displayName:"TabsBlock",props:{labels:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"Labels for each tab",defaultValue:{value:"[]",computed:!1}},active:{required:!1,tsType:{name:"number"},description:"Index of the initially active tab",defaultValue:{value:"0",computed:!1}},children:{required:!1,tsType:{name:"union",raw:"ReactNode[] | ReactNode",elements:[{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"},{name:"ReactNode"}]},description:"Tab contents; each child corresponds to the label at the same index"},className:{required:!1,tsType:{name:"string"},description:""}}}},"./packages/ui/src/hooks/useProductEditorFormState.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>useProductEditorFormState});var useProductInputs=__webpack_require__("./packages/ui/src/hooks/useProductInputs.ts"),useProductMediaManager=__webpack_require__("./packages/ui/src/hooks/useProductMediaManager.tsx");function buildProductFormData(product,publishTargets,locales){const fd=new FormData;var _product_media;fd.append("id",product.id),locales.forEach(l=>{var _product_title,_product_description,_product_title_l,_product_description_l;fd.append(`title_${l}`,String(null!==(_product_title_l=null===(_product_title=product.title)||void 0===_product_title?void 0:_product_title[l])&&void 0!==_product_title_l?_product_title_l:"")),fd.append(`desc_${l}`,String(null!==(_product_description_l=null===(_product_description=product.description)||void 0===_product_description?void 0:_product_description[l])&&void 0!==_product_description_l?_product_description_l:""))}),fd.append("price",String(product.price));const mediaWithoutFiles=(null!==(_product_media=product.media)&&void 0!==_product_media?_product_media:[]).map((item,index)=>{if(!item)return null;if(!function hasFileProperty(item){return Boolean(item&&"file"in item)}(item))return item;item.file instanceof File&&fd.append(`file_${index}`,item.file);const{file:_file,...rest}=item;return rest});return fd.append("media",JSON.stringify(mediaWithoutFiles)),fd.append("publish",publishTargets.join(",")),Object.entries(product.variants).forEach(([k,vals])=>{fd.append(`variant_${k}`,vals.filter(Boolean).join(","))}),fd}var react=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js");function useProductEditorFormState(init,locales,onSave){const{product,setProduct,handleChange,addVariantValue,removeVariantValue}=(0,useProductInputs._)(init,locales),[saving,setSaving]=(0,react.useState)(!1),[errors,setErrors]=(0,react.useState)({}),[publishTargets,setPublishTargets]=(0,react.useState)([]),{uploader,removeMedia,moveMedia}=(0,useProductMediaManager.U)(init.shop,publishTargets,setProduct),formData=(0,react.useMemo)(()=>buildProductFormData(product,publishTargets,locales),[product,publishTargets,locales]),handleSubmit=(0,react.useCallback)(async e=>{e.preventDefault(),setSaving(!0);const result=await onSave(formData);if(result.errors)setErrors(result.errors);else if(result.product){const product=result.product;setProduct(prev=>{var _product_variants;return{...product,variants:null!==(_product_variants=product.variants)&&void 0!==_product_variants?_product_variants:prev.variants}}),setErrors({})}setSaving(!1)},[onSave,formData,setProduct]);return{product,errors,saving,publishTargets,setPublishTargets,handleChange,handleSubmit,uploader,removeMedia,moveMedia,addVariantValue,removeVariantValue}}},"./packages/ui/src/hooks/useProductEditorNotifications.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{o:()=>useProductEditorNotifications});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js");const DEFAULT_MESSAGES={saving:"Saving product…",success:"Product saved successfully.",error:"We couldn't save your changes. Check the highlighted sections."};function useProductEditorNotifications({saving,hasErrors,autoCloseMs=4e3,messages:messageOverrides}){const messages=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>({...DEFAULT_MESSAGES,...messageOverrides}),[messageOverrides]),[toast,setToast]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({open:!1,message:""}),prevSavingRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{saving&&!prevSavingRef.current?setToast({open:!0,message:messages.saving}):!saving&&prevSavingRef.current&&setToast({open:!0,message:hasErrors?messages.error:messages.success}),prevSavingRef.current=saving},[saving,hasErrors,messages]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{if(!toast.open)return;const timer=window.setTimeout(()=>{setToast(prev=>({...prev,open:!1}))},autoCloseMs);return()=>window.clearTimeout(timer)},[toast.open,autoCloseMs]);const closeToast=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{setToast(prev=>({...prev,open:!1}))},[]);return{toast,closeToast}}},"./packages/ui/src/hooks/useProductInputs.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>useProductInputs});var react=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js");function useProductInputs(init,locales){var _init_variants;const[product,setProduct]=(0,react.useState)({...init,variants:null!==(_init_variants=init.variants)&&void 0!==_init_variants?_init_variants:{}}),handleChange=(0,react.useCallback)(e=>{const{name,value}=e.target,parsed=function parseMultilingualInput(name,locales){if("string"!=typeof name)return null;const parts=name.split("_");if(2!==parts.length)return null;const[field,locale]=parts;return"title"!==field&&"desc"!==field||!locales.includes(locale)?null:{field,locale}}(name,locales);setProduct(prev=>{if(parsed){const{field,locale}=parsed,realField="desc"===field?"description":field;var _prev_realField;const translations=null!==(_prev_realField=prev[realField])&&void 0!==_prev_realField?_prev_realField:{};return{...prev,[realField]:{...translations,[locale]:value}}}if("price"===name)return{...prev,price:Number(value)};if(name.startsWith("variant_")){const indexed=name.match(/^variant_(.+)_(\d+)$/);if(indexed){const[,key,idxStr]=indexed,idx=Number(idxStr);var _prev_variants_key;const next=[...null!==(_prev_variants_key=prev.variants[key])&&void 0!==_prev_variants_key?_prev_variants_key:[]];return next[idx]=value,{...prev,variants:{...prev.variants,[key]:next}}}const key=name.replace(/^variant_/,"");return{...prev,variants:{...prev.variants,[key]:value?value.split(",").map(v=>v.trim()):[""]}}}return prev})},[locales]),addVariantValue=(0,react.useCallback)(attr=>{setProduct(prev=>{var _prev_variants_attr;return{...prev,variants:{...prev.variants,[attr]:[...null!==(_prev_variants_attr=prev.variants[attr])&&void 0!==_prev_variants_attr?_prev_variants_attr:[],""]}}})},[]),removeVariantValue=(0,react.useCallback)((attr,index)=>{setProduct(prev=>{var _prev_variants_attr;const values=null!==(_prev_variants_attr=prev.variants[attr])&&void 0!==_prev_variants_attr?_prev_variants_attr:[];return{...prev,variants:{...prev.variants,[attr]:values.filter((_,i)=>i!==index)}}})},[]);return{product,setProduct,handleChange,addVariantValue,removeVariantValue}}},"./packages/ui/src/hooks/useProductMediaManager.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>useProductMediaManager});var _useFileUpload__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/ui/src/hooks/useFileUpload.tsx"),_platform_core_hooks_usePublishLocations__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/platform-core/src/hooks/usePublishLocations.ts"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js");function useProductMediaManager(shop,publishTargets,setProduct){const{locations}=(0,_platform_core_hooks_usePublishLocations__WEBPACK_IMPORTED_MODULE_2__.D)(),requiredOrientation=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{var _locations_find,_locations_find_requiredOrientation;return null!==(_locations_find_requiredOrientation=null===(_locations_find=locations.find(l=>l.id===publishTargets[0]))||void 0===_locations_find?void 0:_locations_find.requiredOrientation)&&void 0!==_locations_find_requiredOrientation?_locations_find_requiredOrientation:"landscape"},[locations,publishTargets]),{uploader}=(0,_useFileUpload__WEBPACK_IMPORTED_MODULE_0__.lN)({shop,requiredOrientation,onUploaded:item=>setProduct(prev=>({...prev,media:[...prev.media,item]}))});return{uploader,removeMedia:(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(index=>{setProduct(prev=>({...prev,media:prev.media.filter((_,i)=>i!==index)}))},[setProduct]),moveMedia:(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((from,to)=>{setProduct(prev=>{const gallery=[...prev.media],[moved]=gallery.splice(from,1);return gallery.splice(to,0,moved),{...prev,media:gallery}})},[setProduct])}}}}]);