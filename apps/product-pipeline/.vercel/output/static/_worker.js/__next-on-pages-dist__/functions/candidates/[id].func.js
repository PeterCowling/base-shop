import*as Ac from"async_hooks";

import{__getNamedExports as xt}from"../../../__next-on-pages-dist__/manifest/88a389dd6c068190adb2efc795e4063c.js";
import{__getNamedExports as _t}from"../../../__next-on-pages-dist__/webpack/81fb4e3d5ef04e2ec4e5219ec4ec518c.js";
import{__getNamedExports as ht}from"../../../__next-on-pages-dist__/webpack/7202.js";
import{__getNamedExports as gt}from"../../../__next-on-pages-dist__/webpack/e181f78390b905e3ab866796e900df98.js";

var He=Object.defineProperty;var lt=Object.getOwnPropertyDescriptor;var dt=Object.getOwnPropertyNames;var ut=Object.prototype.hasOwnProperty;var pt=(U,V)=>()=>(U&&(V=U(U=0)),V);var Te=(U,V,Se,ee)=>{if(V&&typeof V=="object"||typeof V=="function")for(let W of dt(V))!ut.call(U,W)&&W!==Se&&He(U,W,{get:()=>V[W],enumerable:!(ee=lt(V,W))||ee.enumerable});return U},Be=(U,V,Se)=>(Te(U,V,"default"),Se&&Te(Se,V,"default"));var mt=U=>Te(He({},"__esModule",{value:!0}),U);var Ae={};var Je=pt(()=>{Be(Ae,Ac)});var re=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/candidates/[id]"),A=gt(re,re,re),ft=A.__chunk_5521,bt=A.__chunk_5356,kt=A.__chunk_9879,yt=A.__chunk_9831,vt=A.__chunk_9678,jt=A.__chunk_9585,Nt=A.__chunk_9406,wt=A.__chunk_9060,Ct=A.__chunk_8814,St=A.__chunk_8683,Rt=A.__chunk_7952,Mt=A.__chunk_7672,Pt=A.__chunk_7545,At=A.__chunk_7500,Lt=A.__chunk_7120,Dt=A.__chunk_7098,Tt=A.__chunk_7094,Bt=A.__chunk_6977,It=A.__chunk_6947,Et=A.__chunk_6917,Ft=A.__chunk_6904,Ut=A.__chunk_6537,$t=A.__chunk_6292,Ot=A.__chunk_6286,Kt=A.__chunk_6124,qt=A.__chunk_5923,Ht=A.__chunk_5636,Jt=A.__chunk_5499,zt=A.__chunk_5401,Gt=A.__chunk_4849,Vt=A.__chunk_4704,Wt=A.__chunk_4671,Yt=A.__chunk_4456,Xt=A.__chunk_4417,Qt=A.__chunk_4322,Zt=A.__chunk_4248,es=A.__chunk_4117,ts=A.__chunk_4011,ss=A.__chunk_3942,as=A.__chunk_3444,ns=A.__chunk_3125,rs=A.__chunk_3080,is=A.__chunk_3012,cs=A.__chunk_2558,os=A.__chunk_2166,ls=A.__chunk_2029,ds=A.__chunk_1956,us=A.__chunk_1852,ps=A.__chunk_1695,ms=A.__chunk_1616,gs=A.__chunk_1407,_s=A.__chunk_1193,hs=A.__chunk_750,xs=A.__chunk_652,fs=A.__chunk_646,bs=A.__chunk_292,ks=A.__chunk_285,n=_t(re,re,re),ys=n.__chunk_9686,vs=n.__chunk_9570,js=n.__chunk_9292,Ns=n.__chunk_9102,ws=n.__chunk_8901,Cs=n.__chunk_8629,Ss=n.__chunk_8545,Rs=n.__chunk_7547,Ms=n.__chunk_7476,Ps=n.__chunk_7256,As=n.__chunk_6975,Ls=n.__chunk_6724,Ds=n.__chunk_6650,Ts=n.__chunk_6442,Bs=n.__chunk_6054,Is=n.__chunk_5658,Es=n.__chunk_5286,Fs=n.__chunk_5087,Us=n.__chunk_5035,$s=n.__chunk_5032,Os=n.__chunk_5003,Ks=n.__chunk_4995,qs=n.__chunk_4948,Hs=n.__chunk_4657,Js=n.__chunk_3773,zs=n.__chunk_3534,Gs=n.__chunk_3246,Vs=n.__chunk_3211,Ws=n.__chunk_2752,Ys=n.__chunk_2743,Xs=n.__chunk_2622,Qs=n.__chunk_2263,Zs=n.__chunk_2027,ea=n.__chunk_1854,ta=n.__chunk_1757,sa=n.__chunk_1750,aa=n.__chunk_1592,na=n.__chunk_1290,ra=n.__chunk_1018,ia=n.__chunk_795,ca=n.__chunk_44,oa=n.__chunk_9891,la=n.__chunk_9838,da=n.__chunk_9775,ua=n.__chunk_9709,pa=n.__chunk_9609,ma=n.__chunk_9575,ga=n.__chunk_9542,_a=n.__chunk_9535,ha=n.__chunk_9517,xa=n.__chunk_9468,fa=n.__chunk_9461,ba=n.__chunk_9441,ka=n.__chunk_9419,ya=n.__chunk_9282,va=n.__chunk_9263,ja=n.__chunk_9235,Na=n.__chunk_9228,wa=n.__chunk_9216,Ca=n.__chunk_9205,Sa=n.__chunk_9193,Ra=n.__chunk_9160,Ma=n.__chunk_9097,Pa=n.__chunk_9037,Aa=n.__chunk_8987,La=n.__chunk_8969,Da=n.__chunk_8943,Ta=n.__chunk_8893,Ba=n.__chunk_8874,Ia=n.__chunk_8851,Ea=n.__chunk_8741,Fa=n.__chunk_8568,Ua=n.__chunk_8550,$a=n.__chunk_8525,Oa=n.__chunk_8496,Ka=n.__chunk_8456,qa=n.__chunk_8451,Ha=n.__chunk_8348,Ja=n.__chunk_8331,za=n.__chunk_8301,Ga=n.__chunk_8186,Va=n.__chunk_8181,Wa=n.__chunk_8109,Ya=n.__chunk_8017,Xa=n.__chunk_8011,Qa=n.__chunk_7980,Za=n.__chunk_7892,en=n.__chunk_7861,tn=n.__chunk_7841,sn=n.__chunk_7824,an=n.__chunk_7776,nn=n.__chunk_7774,rn=n.__chunk_7733,cn=n.__chunk_7713,on=n.__chunk_7709,ln=n.__chunk_7652,dn=n.__chunk_7589,un=n.__chunk_7588,pn=n.__chunk_7514,mn=n.__chunk_7504,gn=n.__chunk_7502,_n=n.__chunk_7492,hn=n.__chunk_7442,xn=n.__chunk_7387,fn=n.__chunk_7298,bn=n.__chunk_7280,kn=n.__chunk_7278,yn=n.__chunk_7276,vn=n.__chunk_7257,jn=n.__chunk_7247,Nn=n.__chunk_7234,wn=n.__chunk_7192,Cn=n.__chunk_7170,Sn=n.__chunk_7161,Rn=n.__chunk_7139,Mn=n.__chunk_7115,Pn=n.__chunk_7078,An=n.__chunk_6955,Ln=n.__chunk_6914,Dn=n.__chunk_6851,Tn=n.__chunk_6820,Bn=n.__chunk_6784,In=n.__chunk_6718,En=n.__chunk_6703,Fn=n.__chunk_6691,Un=n.__chunk_6676,$n=n.__chunk_6646,On=n.__chunk_6644,Kn=n.__chunk_6472,qn=n.__chunk_6431,Hn=n.__chunk_6401,Jn=n.__chunk_6361,zn=n.__chunk_6344,Gn=n.__chunk_6311,Vn=n.__chunk_6258,Wn=n.__chunk_6159,Yn=n.__chunk_6157,Xn=n.__chunk_6125,Qn=n.__chunk_6080,Zn=n.__chunk_5931,er=n.__chunk_5930,tr=n.__chunk_5929,sr=n.__chunk_5881,ar=n.__chunk_5607,nr=n.__chunk_5592,rr=n.__chunk_5573,ir=n.__chunk_5538,cr=n.__chunk_5478,or=n.__chunk_5455,lr=n.__chunk_5431,dr=n.__chunk_5426,ur=n.__chunk_5376,pr=n.__chunk_5375,mr=n.__chunk_5355,gr=n.__chunk_5313,_r=n.__chunk_5294,hr=n.__chunk_5273,xr=n.__chunk_5247,fr=n.__chunk_5185,br=n.__chunk_5098,kr=n.__chunk_5084,yr=n.__chunk_5056,vr=n.__chunk_5048,jr=n.__chunk_5046,Nr=n.__chunk_5015,wr=n.__chunk_4944,Cr=n.__chunk_4922,Sr=n.__chunk_4918,Rr=n.__chunk_4909,Mr=n.__chunk_4882,Pr=n.__chunk_4877,Ar=n.__chunk_4838,Lr=n.__chunk_4830,Dr=n.__chunk_4687,Tr=n.__chunk_4650,Br=n.__chunk_4638,Ir=n.__chunk_4613,Er=n.__chunk_4432,Fr=n.__chunk_4365,Ur=n.__chunk_4329,$r=n.__chunk_4225,Or=n.__chunk_4188,Kr=n.__chunk_4046,qr=n.__chunk_4044,Hr=n.__chunk_3835,Jr=n.__chunk_3816,zr=n.__chunk_3608,Gr=n.__chunk_3586,Vr=n.__chunk_3566,Wr=n.__chunk_3524,Yr=n.__chunk_3519,Xr=n.__chunk_3489,Qr=n.__chunk_3359,Zr=n.__chunk_3328,ei=n.__chunk_3303,ti=n.__chunk_3257,si=n.__chunk_3198,ai=n.__chunk_3176,ni=n.__chunk_3123,ri=n.__chunk_3053,ii=n.__chunk_3004,ci=n.__chunk_2954,oi=n.__chunk_2933,li=n.__chunk_2897,di=n.__chunk_2888,ui=n.__chunk_2739,pi=n.__chunk_2700,mi=n.__chunk_2578,gi=n.__chunk_2577,_i=n.__chunk_2549,hi=n.__chunk_2543,xi=n.__chunk_2481,fi=n.__chunk_2463,bi=n.__chunk_2452,ki=n.__chunk_2410,yi=n.__chunk_2333,vi=n.__chunk_2274,ji=n.__chunk_2255,Ni=n.__chunk_2247,wi=n.__chunk_2235,Ci=n.__chunk_2227,Si=n.__chunk_2202,Ri=n.__chunk_2198,Mi=n.__chunk_2165,Pi=n.__chunk_2133,Ai=n.__chunk_2100,Li=n.__chunk_2076,Di=n.__chunk_2066,Ti=n.__chunk_2038,Bi=n.__chunk_2007,Ii=n.__chunk_1808,Ei=n.__chunk_1787,Fi=n.__chunk_1725,Ui=n.__chunk_1663,$i=n.__chunk_1655,Oi=n.__chunk_1635,Ki=n.__chunk_1612,qi=n.__chunk_1547,Hi=n.__chunk_1546,Ji=n.__chunk_1507,zi=n.__chunk_1469,Gi=n.__chunk_1455,Vi=n.__chunk_1451,Wi=n.__chunk_1431,Yi=n.__chunk_1420,Xi=n.__chunk_1396,Qi=n.__chunk_1356,Zi=n.__chunk_1293,ec=n.__chunk_1274,tc=n.__chunk_1273,sc=n.__chunk_1263,ac=n.__chunk_1157,nc=n.__chunk_1146,rc=n.__chunk_1138,ic=n.__chunk_1111,cc=n.__chunk_1108,oc=n.__chunk_906,lc=n.__chunk_895,dc=n.__chunk_846,uc=n.__chunk_836,pc=n.__chunk_825,mc=n.__chunk_784,gc=n.__chunk_777,_c=n.__chunk_739,hc=n.__chunk_709,xc=n.__chunk_679,fc=n.__chunk_531,bc=n.__chunk_497,kc=n.__chunk_405,yc=n.__chunk_376,vc=n.__chunk_213,jc=n.__chunk_91,Nc=n.__chunk_9,wc=ht(re,re,re),Cc=wc.__chunk_7202,Ie=xt(re,re,re),Sc=Ie.__NEXT_FONT_MANIFEST,Rc=Ie.__REACT_LOADABLE_MANIFEST,Mc=Ie.__RSC_SERVER_MANIFEST,Ic=((U,V,Se)=>(V._ENTRIES={},U.__RSC_SERVER_MANIFEST=Mc,V.__RSC_MANIFEST=V.__RSC_MANIFEST||{},V.__RSC_MANIFEST["/candidates/[id]/page"]={moduleLoading:{prefix:"/_next/"},ssrModuleMapping:{55:{"*":{id:"9707",name:"*",chunks:[],async:!1}},124:{"*":{id:"7321",name:"*",chunks:[],async:!1}},368:{"*":{id:"8496",name:"*",chunks:[],async:!1}},732:{"*":{id:"6065",name:"*",chunks:[],async:!1}},972:{"*":{id:"9535",name:"*",chunks:[],async:!1}},1202:{"*":{id:"4378",name:"*",chunks:[],async:!1}},1642:{"*":{id:"9822",name:"*",chunks:[],async:!1}},1875:{"*":{id:"6323",name:"*",chunks:[],async:!1}},1909:{"*":{id:"8269",name:"*",chunks:[],async:!1}},2722:{"*":{id:"4542",name:"*",chunks:[],async:!1}},4274:{"*":{id:"1016",name:"*",chunks:[],async:!1}},5016:{"*":{id:"4374",name:"*",chunks:[],async:!1}},5216:{"*":{id:"1274",name:"*",chunks:[],async:!1}},5786:{"*":{id:"7579",name:"*",chunks:[],async:!1}},6197:{"*":{id:"2151",name:"*",chunks:[],async:!1}},6223:{"*":{id:"127",name:"*",chunks:[],async:!1}},6317:{"*":{id:"9371",name:"*",chunks:[],async:!1}},6423:{"*":{id:"1953",name:"*",chunks:[],async:!1}},6884:{"*":{id:"4024",name:"*",chunks:[],async:!1}},7004:{"*":{id:"7762",name:"*",chunks:[],async:!1}},7467:{"*":{id:"408",name:"*",chunks:[],async:!1}},7785:{"*":{id:"9986",name:"*",chunks:[],async:!1}},7952:{"*":{id:"2161",name:"*",chunks:[],async:!1}},8105:{"*":{id:"7656",name:"*",chunks:[],async:!1}},8515:{"*":{id:"3463",name:"*",chunks:[],async:!1}},8634:{"*":{id:"2478",name:"*",chunks:[],async:!1}},9018:{"*":{id:"8524",name:"*",chunks:[],async:!1}},9045:{"*":{id:"7327",name:"*",chunks:[],async:!1}},9602:{"*":{id:"7076",name:"*",chunks:[],async:!1}},9633:{"*":{id:"9515",name:"*",chunks:[],async:!1}}},edgeSSRModuleMapping:{55:{"*":{id:"5098",name:"*",chunks:[],async:!1}},124:{"*":{id:"6054",name:"*",chunks:[],async:!1}},368:{"*":{id:"3773",name:"*",chunks:[],async:!1}},773:{"*":{id:"5590",name:"*",chunks:[],async:!1}},972:{"*":{id:"7547",name:"*",chunks:[],async:!1}},1202:{"*":{id:"2888",name:"*",chunks:[],async:!1}},1251:{"*":{id:"1469",name:"*",chunks:[],async:!1}},1642:{"*":{id:"2198",name:"*",chunks:[],async:!1}},1875:{"*":{id:"4995",name:"*",chunks:[],async:!1}},2722:{"*":{id:"7161",name:"*",chunks:[],async:!1}},3109:{"*":{id:"3303",name:"*",chunks:[],async:!1}},4274:{"*":{id:"7256",name:"*",chunks:[],async:!1}},5016:{"*":{id:"1750",name:"*",chunks:[],async:!1}},5216:{"*":{id:"6442",name:"*",chunks:[],async:!1}},6197:{"*":{id:"777",name:"*",chunks:[],async:!1}},6317:{"*":{id:"7257",name:"*",chunks:[],async:!1}},6423:{"*":{id:"4225",name:"*",chunks:[],async:!1}},6884:{"*":{id:"5032",name:"*",chunks:[],async:!1}},7836:{"*":{id:"8186",name:"*",chunks:[],async:!1}},7952:{"*":{id:"6646",name:"*",chunks:[],async:!1}},8105:{"*":{id:"8851",name:"*",chunks:[],async:!1}},8515:{"*":{id:"1455",name:"*",chunks:[],async:!1}},8563:{"*":{id:"6125",name:"*",chunks:[],async:!1}},8634:{"*":{id:"9102",name:"*",chunks:[],async:!1}},9018:{"*":{id:"2100",name:"*",chunks:[],async:!1}},9045:{"*":{id:"5607",name:"*",chunks:[],async:!1}},9500:{"*":{id:"8631",name:"*",chunks:[],async:!1}},9602:{"*":{id:"6724",name:"*",chunks:[],async:!1}},9633:{"*":{id:"2027",name:"*",chunks:[],async:!1}}},clientModules:{"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/client/components/app-router.js":{id:6197,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/esm/client/components/app-router.js":{id:6197,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/client/components/client-page.js":{id:8515,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/esm/client/components/client-page.js":{id:8515,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/client/components/client-segment.js":{id:8105,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/esm/client/components/client-segment.js":{id:8105,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/client/components/error-boundary.js":{id:9045,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/esm/client/components/error-boundary.js":{id:9045,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/client/components/http-access-fallback/error-boundary.js":{id:2722,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/esm/client/components/http-access-fallback/error-boundary.js":{id:2722,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/client/components/layout-router.js":{id:1202,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/esm/client/components/layout-router.js":{id:1202,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/client/components/metadata/async-metadata.js":{id:1642,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/esm/client/components/metadata/async-metadata.js":{id:1642,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/client/components/metadata/metadata-boundary.js":{id:9018,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/esm/client/components/metadata/metadata-boundary.js":{id:9018,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/client/components/render-from-template-context.js":{id:7952,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/esm/client/components/render-from-template-context.js":{id:7952,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/client/components/router-reducer/fetch-server-response.js":{id:6317,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/esm/client/components/router-reducer/fetch-server-response.js":{id:6317,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/shared/lib/app-router-context.shared-runtime.js":{id:7836,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/esm/shared/lib/app-router-context.shared-runtime.js":{id:7836,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/shared/lib/hooks-client-context.shared-runtime.js":{id:3109,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/esm/shared/lib/hooks-client-context.shared-runtime.js":{id:3109,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/shared/lib/server-inserted-html.shared-runtime.js":{id:8563,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/esm/shared/lib/server-inserted-html.shared-runtime.js":{id:8563,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/shared/lib/server-inserted-metadata.shared-runtime.js":{id:1251,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/esm/shared/lib/server-inserted-metadata.shared-runtime.js":{id:1251,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/apps/product-pipeline/src/components/NavLink.tsx":{id:972,name:"*",chunks:["2827","static/chunks/dda2651e-838f4b0450fabaa0.js","9683","static/chunks/9683-8294b9700e911aa9.js","7106","static/chunks/7106-244e26deaf5923e4.js","55","static/chunks/55-0a025568dce2e3f8.js","4668","static/chunks/4668-a78c2c3abc90e64d.js","8902","static/chunks/8902-e8520c0058489f20.js","7177","static/chunks/app/layout-820be09fdc1cf573.js"],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/@radix-ui+react-dialog@1.1.14_@types+react-dom@19.1.6_@types+react@19.1.8__@types+react_00660d7ce4e22d234dc73f0f35153e0b/node_modules/@radix-ui/react-dialog/dist/index.mjs":{id:6423,name:"*",chunks:["2827","static/chunks/dda2651e-838f4b0450fabaa0.js","9683","static/chunks/9683-8294b9700e911aa9.js","7106","static/chunks/7106-244e26deaf5923e4.js","4668","static/chunks/4668-a78c2c3abc90e64d.js","8902","static/chunks/8902-e8520c0058489f20.js","621","static/chunks/app/candidates/%5Bid%5D/page-85aa9dc6c751212f.js"],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/client/app-dir/link.js":{id:55,name:"*",chunks:["2827","static/chunks/dda2651e-838f4b0450fabaa0.js","9683","static/chunks/9683-8294b9700e911aa9.js","7106","static/chunks/7106-244e26deaf5923e4.js","55","static/chunks/55-0a025568dce2e3f8.js","4668","static/chunks/4668-a78c2c3abc90e64d.js","8902","static/chunks/8902-e8520c0058489f20.js","7177","static/chunks/app/layout-820be09fdc1cf573.js"],async:!1},"/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/esm/client/app-dir/link.js":{id:55,name:"*",chunks:["2827","static/chunks/dda2651e-838f4b0450fabaa0.js","9683","static/chunks/9683-8294b9700e911aa9.js","7106","static/chunks/7106-244e26deaf5923e4.js","55","static/chunks/55-0a025568dce2e3f8.js","4668","static/chunks/4668-a78c2c3abc90e64d.js","8902","static/chunks/8902-e8520c0058489f20.js","7177","static/chunks/app/layout-820be09fdc1cf573.js"],async:!1},'/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/font/google/target.css?{"path":"src/app/layout.tsx","import":"Space_Grotesk","arguments":[{"subsets":["latin"],"variable":"--font-sans","display":"swap"}],"variableName":"spaceGrotesk"}':{id:915,name:"*",chunks:["2827","static/chunks/dda2651e-838f4b0450fabaa0.js","9683","static/chunks/9683-8294b9700e911aa9.js","7106","static/chunks/7106-244e26deaf5923e4.js","55","static/chunks/55-0a025568dce2e3f8.js","4668","static/chunks/4668-a78c2c3abc90e64d.js","8902","static/chunks/8902-e8520c0058489f20.js","7177","static/chunks/app/layout-820be09fdc1cf573.js"],async:!1},'/Users/petercowling/base-shop/node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/font/google/target.css?{"path":"src/app/layout.tsx","import":"IBM_Plex_Mono","arguments":[{"subsets":["latin"],"variable":"--font-mono","weight":["400","500"],"display":"swap"}],"variableName":"plexMono"}':{id:2337,name:"*",chunks:["2827","static/chunks/dda2651e-838f4b0450fabaa0.js","9683","static/chunks/9683-8294b9700e911aa9.js","7106","static/chunks/7106-244e26deaf5923e4.js","55","static/chunks/55-0a025568dce2e3f8.js","4668","static/chunks/4668-a78c2c3abc90e64d.js","8902","static/chunks/8902-e8520c0058489f20.js","7177","static/chunks/app/layout-820be09fdc1cf573.js"],async:!1},"/Users/petercowling/base-shop/apps/product-pipeline/src/app/globals.css":{id:5691,name:"*",chunks:["2827","static/chunks/dda2651e-838f4b0450fabaa0.js","9683","static/chunks/9683-8294b9700e911aa9.js","7106","static/chunks/7106-244e26deaf5923e4.js","55","static/chunks/55-0a025568dce2e3f8.js","4668","static/chunks/4668-a78c2c3abc90e64d.js","8902","static/chunks/8902-e8520c0058489f20.js","7177","static/chunks/app/layout-820be09fdc1cf573.js"],async:!1},"/Users/petercowling/base-shop/packages/i18n/dist/Translations.js":{id:368,name:"*",chunks:["2827","static/chunks/dda2651e-838f4b0450fabaa0.js","9683","static/chunks/9683-8294b9700e911aa9.js","7106","static/chunks/7106-244e26deaf5923e4.js","4668","static/chunks/4668-a78c2c3abc90e64d.js","8902","static/chunks/8902-e8520c0058489f20.js","621","static/chunks/app/candidates/%5Bid%5D/page-85aa9dc6c751212f.js"],async:!1},"/Users/petercowling/base-shop/packages/ui/dist/components/atoms/primitives/accordion.js":{id:8634,name:"*",chunks:["2827","static/chunks/dda2651e-838f4b0450fabaa0.js","9683","static/chunks/9683-8294b9700e911aa9.js","7106","static/chunks/7106-244e26deaf5923e4.js","4668","static/chunks/4668-a78c2c3abc90e64d.js","8902","static/chunks/8902-e8520c0058489f20.js","621","static/chunks/app/candidates/%5Bid%5D/page-85aa9dc6c751212f.js"],async:!1},"/Users/petercowling/base-shop/packages/ui/dist/components/atoms/primitives/button.js":{id:5016,name:"*",chunks:["2827","static/chunks/dda2651e-838f4b0450fabaa0.js","9683","static/chunks/9683-8294b9700e911aa9.js","7106","static/chunks/7106-244e26deaf5923e4.js","4668","static/chunks/4668-a78c2c3abc90e64d.js","8902","static/chunks/8902-e8520c0058489f20.js","621","static/chunks/app/candidates/%5Bid%5D/page-85aa9dc6c751212f.js"],async:!1},"/Users/petercowling/base-shop/packages/ui/dist/components/atoms/primitives/card.js":{id:9602,name:"*",chunks:["2827","static/chunks/dda2651e-838f4b0450fabaa0.js","9683","static/chunks/9683-8294b9700e911aa9.js","7106","static/chunks/7106-244e26deaf5923e4.js","4668","static/chunks/4668-a78c2c3abc90e64d.js","8902","static/chunks/8902-e8520c0058489f20.js","621","static/chunks/app/candidates/%5Bid%5D/page-85aa9dc6c751212f.js"],async:!1},"/Users/petercowling/base-shop/packages/ui/dist/components/atoms/primitives/checkbox.js":{id:9633,name:"*",chunks:["2827","static/chunks/dda2651e-838f4b0450fabaa0.js","9683","static/chunks/9683-8294b9700e911aa9.js","7106","static/chunks/7106-244e26deaf5923e4.js","4668","static/chunks/4668-a78c2c3abc90e64d.js","8902","static/chunks/8902-e8520c0058489f20.js","621","static/chunks/app/candidates/%5Bid%5D/page-85aa9dc6c751212f.js"],async:!1},"/Users/petercowling/base-shop/packages/ui/dist/components/atoms/primitives/dropdown-menu.js":{id:1875,name:"*",chunks:["2827","static/chunks/dda2651e-838f4b0450fabaa0.js","9683","static/chunks/9683-8294b9700e911aa9.js","7106","static/chunks/7106-244e26deaf5923e4.js","4668","static/chunks/4668-a78c2c3abc90e64d.js","8902","static/chunks/8902-e8520c0058489f20.js","621","static/chunks/app/candidates/%5Bid%5D/page-85aa9dc6c751212f.js"],async:!1},"/Users/petercowling/base-shop/packages/ui/dist/components/atoms/primitives/input.js":{id:6884,name:"*",chunks:["2827","static/chunks/dda2651e-838f4b0450fabaa0.js","9683","static/chunks/9683-8294b9700e911aa9.js","7106","static/chunks/7106-244e26deaf5923e4.js","4668","static/chunks/4668-a78c2c3abc90e64d.js","8902","static/chunks/8902-e8520c0058489f20.js","621","static/chunks/app/candidates/%5Bid%5D/page-85aa9dc6c751212f.js"],async:!1},"/Users/petercowling/base-shop/packages/ui/dist/components/atoms/primitives/select.js":{id:5216,name:"*",chunks:["2827","static/chunks/dda2651e-838f4b0450fabaa0.js","9683","static/chunks/9683-8294b9700e911aa9.js","7106","static/chunks/7106-244e26deaf5923e4.js","4668","static/chunks/4668-a78c2c3abc90e64d.js","8902","static/chunks/8902-e8520c0058489f20.js","621","static/chunks/app/candidates/%5Bid%5D/page-85aa9dc6c751212f.js"],async:!1},"/Users/petercowling/base-shop/packages/ui/dist/components/atoms/primitives/slot.js":{id:124,name:"*",chunks:["2827","static/chunks/dda2651e-838f4b0450fabaa0.js","9683","static/chunks/9683-8294b9700e911aa9.js","7106","static/chunks/7106-244e26deaf5923e4.js","4668","static/chunks/4668-a78c2c3abc90e64d.js","8902","static/chunks/8902-e8520c0058489f20.js","621","static/chunks/app/candidates/%5Bid%5D/page-85aa9dc6c751212f.js"],async:!1},"/Users/petercowling/base-shop/packages/ui/dist/components/atoms/primitives/textarea.js":{id:4274,name:"*",chunks:["2827","static/chunks/dda2651e-838f4b0450fabaa0.js","9683","static/chunks/9683-8294b9700e911aa9.js","7106","static/chunks/7106-244e26deaf5923e4.js","4668","static/chunks/4668-a78c2c3abc90e64d.js","8902","static/chunks/8902-e8520c0058489f20.js","621","static/chunks/app/candidates/%5Bid%5D/page-85aa9dc6c751212f.js"],async:!1},"/Users/petercowling/base-shop/apps/product-pipeline/src/app/artifacts/ArtifactsClient.tsx":{id:7467,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/apps/product-pipeline/src/app/leads/triage/LeadTriageClient.tsx":{id:7785,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/apps/product-pipeline/src/app/leads/LeadsClient.tsx":{id:1909,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/apps/product-pipeline/src/app/candidates/CandidatesClient.tsx":{id:6223,name:"*",chunks:["2827","static/chunks/dda2651e-838f4b0450fabaa0.js","9683","static/chunks/9683-8294b9700e911aa9.js","7106","static/chunks/7106-244e26deaf5923e4.js","55","static/chunks/55-0a025568dce2e3f8.js","4668","static/chunks/4668-a78c2c3abc90e64d.js","8902","static/chunks/8902-e8520c0058489f20.js","1513","static/chunks/app/candidates/page-c083a4b935a5c29a.js"],async:!1},"/Users/petercowling/base-shop/apps/product-pipeline/src/app/logistics/lanes/LogisticsLanesClient.tsx":{id:732,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/apps/product-pipeline/src/app/logistics/quote-baskets/QuoteBasketProfilesClient.tsx":{id:7004,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/apps/product-pipeline/src/app/launches/LaunchesClient.tsx":{id:5786,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/apps/product-pipeline/src/app/logistics/lanes/[id]/LaneDetailClient.tsx":{id:9500,name:"*",chunks:[],async:!1},"/Users/petercowling/base-shop/apps/product-pipeline/src/app/candidates/[id]/CandidateDetailClient.tsx":{id:773,name:"*",chunks:["2827","static/chunks/dda2651e-838f4b0450fabaa0.js","9683","static/chunks/9683-8294b9700e911aa9.js","7106","static/chunks/7106-244e26deaf5923e4.js","4668","static/chunks/4668-a78c2c3abc90e64d.js","8902","static/chunks/8902-e8520c0058489f20.js","621","static/chunks/app/candidates/%5Bid%5D/page-85aa9dc6c751212f.js"],async:!1}},entryCSSFiles:{"/Users/petercowling/base-shop/apps/product-pipeline/src/":[],"/Users/petercowling/base-shop/apps/product-pipeline/src/app/layout":[{inlined:!1,path:"static/css/82d23afb044150de.css"},{inlined:!1,path:"static/css/7f0c77a7bf2bd350.css"}],"/Users/petercowling/base-shop/apps/product-pipeline/src/app/page":[],"/Users/petercowling/base-shop/apps/product-pipeline/src/app/candidates/page":[],"/Users/petercowling/base-shop/apps/product-pipeline/src/app/candidates/[id]/page":[]},rscModuleMapping:{55:{"*":{id:"17",name:"*",chunks:[],async:!1}},124:{"*":{id:"1924",name:"*",chunks:[],async:!1}},368:{"*":{id:"8787",name:"*",chunks:[],async:!1}},732:{"*":{id:"9288",name:"*",chunks:[],async:!1}},972:{"*":{id:"7389",name:"*",chunks:[],async:!1}},1202:{"*":{id:"156",name:"*",chunks:[],async:!1}},1642:{"*":{id:"6496",name:"*",chunks:[],async:!1}},1875:{"*":{id:"1229",name:"*",chunks:[],async:!1}},1909:{"*":{id:"2435",name:"*",chunks:[],async:!1}},2722:{"*":{id:"6084",name:"*",chunks:[],async:!1}},4274:{"*":{id:"4778",name:"*",chunks:[],async:!1}},5016:{"*":{id:"8672",name:"*",chunks:[],async:!1}},5216:{"*":{id:"2720",name:"*",chunks:[],async:!1}},5691:{"*":{id:"1290",name:"*",chunks:[],async:!1}},5786:{"*":{id:"6459",name:"*",chunks:[],async:!1}},6223:{"*":{id:"7741",name:"*",chunks:[],async:!1}},6423:{"*":{id:"5899",name:"*",chunks:[],async:!1}},6884:{"*":{id:"7686",name:"*",chunks:[],async:!1}},7004:{"*":{id:"401",name:"*",chunks:[],async:!1}},7467:{"*":{id:"8859",name:"*",chunks:[],async:!1}},7785:{"*":{id:"5431",name:"*",chunks:[],async:!1}},7952:{"*":{id:"3048",name:"*",chunks:[],async:!1}},8105:{"*":{id:"9133",name:"*",chunks:[],async:!1}},8515:{"*":{id:"1933",name:"*",chunks:[],async:!1}},8634:{"*":{id:"9400",name:"*",chunks:[],async:!1}},9018:{"*":{id:"5582",name:"*",chunks:[],async:!1}},9045:{"*":{id:"1461",name:"*",chunks:[],async:!1}},9602:{"*":{id:"4738",name:"*",chunks:[],async:!1}},9633:{"*":{id:"3629",name:"*",chunks:[],async:!1}}},edgeRscModuleMapping:{55:{"*":{id:"9707",name:"*",chunks:[],async:!1}},124:{"*":{id:"7321",name:"*",chunks:[],async:!1}},368:{"*":{id:"8496",name:"*",chunks:[],async:!1}},1202:{"*":{id:"4378",name:"*",chunks:[],async:!1}},1642:{"*":{id:"9822",name:"*",chunks:[],async:!1}},1875:{"*":{id:"6323",name:"*",chunks:[],async:!1}},2722:{"*":{id:"4542",name:"*",chunks:[],async:!1}},4274:{"*":{id:"1016",name:"*",chunks:[],async:!1}},5016:{"*":{id:"4374",name:"*",chunks:[],async:!1}},5216:{"*":{id:"1274",name:"*",chunks:[],async:!1}},6197:{"*":{id:"2151",name:"*",chunks:[],async:!1}},6317:{"*":{id:"9371",name:"*",chunks:[],async:!1}},6423:{"*":{id:"1953",name:"*",chunks:[],async:!1}},6884:{"*":{id:"4024",name:"*",chunks:[],async:!1}},7952:{"*":{id:"2161",name:"*",chunks:[],async:!1}},8105:{"*":{id:"7656",name:"*",chunks:[],async:!1}},8515:{"*":{id:"3463",name:"*",chunks:[],async:!1}},8634:{"*":{id:"2478",name:"*",chunks:[],async:!1}},9018:{"*":{id:"8524",name:"*",chunks:[],async:!1}},9045:{"*":{id:"7327",name:"*",chunks:[],async:!1}},9602:{"*":{id:"7076",name:"*",chunks:[],async:!1}},9633:{"*":{id:"9515",name:"*",chunks:[],async:!1}}}},V.__BUILD_MANIFEST={polyfillFiles:["static/chunks/polyfills-42372ed130431b0a.js"],devFiles:[],ampDevFiles:[],lowPriorityFiles:[],rootMainFiles:["static/chunks/webpack-61da1de5a0c5c0ad.js","static/chunks/2fe293a1-fdb4863c5cda55d6.js","static/chunks/2459-5fec761b30f05136.js","static/chunks/main-app-5e876f7e6bb28abf.js"],rootMainFilesTree:{},pages:{"/_app":["static/chunks/webpack-61da1de5a0c5c0ad.js","static/chunks/framework-5795eff2f0c76156.js","static/chunks/main-da0b08faeb5e527e.js","static/chunks/pages/_app-c1a02158cb520bcb.js"],"/_error":["static/chunks/webpack-61da1de5a0c5c0ad.js","static/chunks/framework-5795eff2f0c76156.js","static/chunks/main-da0b08faeb5e527e.js","static/chunks/pages/_error-6038db0a4dac12b7.js"]},ampFirstPages:[]},V.__BUILD_MANIFEST.lowPriorityFiles=["/static/5ZTXl8XS8OXXDxwlj4yOt/_buildManifest.js",,"/static/5ZTXl8XS8OXXDxwlj4yOt/_ssgManifest.js"],U.__REACT_LOADABLE_MANIFEST=Rc,U.__NEXT_FONT_MANIFEST=Sc,U.__INTERCEPTION_ROUTE_REWRITE_MANIFEST="[]",(()=>{"use strict";var ee={},W={};function u(e){var o=W[e];if(o!==void 0)return o.exports;var _=W[e]={exports:{}},G=!0;try{ee[e](_,_.exports,u),G=!1}finally{G&&delete W[e]}return _.exports}u.m=ee,(()=>{var e=[];u.O=(o,_,G,Y)=>{if(_){Y=Y||0;for(var z=e.length;z>0&&e[z-1][2]>Y;z--)e[z]=e[z-1];e[z]=[_,G,Y];return}for(var Q=1/0,z=0;z<e.length;z++){for(var[_,G,Y]=e[z],te=!0,ae=0;ae<_.length;ae++)(!1&Y||Q>=Y)&&Object.keys(u.O).every(me=>u.O[me](_[ae]))?_.splice(ae--,1):(te=!1,Y<Q&&(Q=Y));if(te){e.splice(z--,1);var t=G();t!==void 0&&(o=t)}}return o}})(),u.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return u.d(o,{a:o}),o},(()=>{var e,o=Object.getPrototypeOf?_=>Object.getPrototypeOf(_):_=>_.__proto__;u.t=function(_,G){if(1&G&&(_=this(_)),8&G||typeof _=="object"&&_&&(4&G&&_.__esModule||16&G&&typeof _.then=="function"))return _;var Y=Object.create(null);u.r(Y);var z={};e=e||[null,o({}),o([]),o(o)];for(var Q=2&G&&_;typeof Q=="object"&&!~e.indexOf(Q);Q=o(Q))Object.getOwnPropertyNames(Q).forEach(te=>z[te]=()=>_[te]);return z.default=()=>_,u.d(Y,z),Y}})(),u.d=(e,o)=>{for(var _ in o)u.o(o,_)&&!u.o(e,_)&&Object.defineProperty(e,_,{enumerable:!0,get:o[_]})},u.e=()=>Promise.resolve(),u.g=function(){if(typeof V=="object")return V;try{return this||Function("return this")()}catch{if(typeof window=="object")return window}}(),u.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),u.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={149:0};u.O.j=G=>e[G]===0;var o=(G,Y)=>{var z,Q,[te,ae,t]=Y,H=0;if(te.some(be=>e[be]!==0)){for(z in ae)u.o(ae,z)&&(u.m[z]=ae[z]);if(t)var fe=t(u)}for(G&&G(Y);H<te.length;H++)Q=te[H],u.o(e,Q)&&e[Q]&&e[Q][0](),e[Q]=0;return u.O(fe)},_=U.webpackChunk_N_E=U.webpackChunk_N_E||[];_.forEach(o.bind(null,0)),_.push=o.bind(null,_.push.bind(_))})(),u.nc=void 0})(),(U.webpackChunk_N_E=U.webpackChunk_N_E||[]).push([[7],{285:ks,292:bs,646:fs,652:xs,750:hs,1193:_s,1407:gs,1616:ms,1695:ps,1852:us,1956:ds,2029:ls,2166:os,2558:cs,3012:is,3080:rs,3125:ns,3444:as,3942:ss,4011:ts,4117:es,4248:Zt,4322:Qt,4417:Xt,4456:Yt,4671:Wt,4704:Vt,4849:Gt,5401:zt,5499:Jt,5636:Ht,5923:qt,6124:Kt,6286:Ot,6292:$t,6537:Ut,6904:Ft,6917:Et,6947:It,6977:Bt,7094:Tt,7098:Dt,7120:Lt,7500:At,7545:Pt,7672:Mt,7952:Rt,8683:St,8814:Ct,9060:wt,9406:Nt,9585:jt,9678:vt,9831:yt,9879:kt}]),(U.webpackChunk_N_E=U.webpackChunk_N_E||[]).push([[202],{7202:Cc}]),(U.webpackChunk_N_E=U.webpackChunk_N_E||[]).push([[101],{9:Nc,91:jc,213:vc,376:yc,405:kc,497:bc,531:fc,679:xc,709:hc,739:_c,777:gc,784:mc,825:pc,836:uc,846:dc,895:lc,906:oc,1108:cc,1111:ic,1138:rc,1146:nc,1157:ac,1263:sc,1273:tc,1274:ec,1293:Zi,1356:Qi,1396:Xi,1420:Yi,1431:Wi,1451:Vi,1455:Gi,1469:zi,1507:Ji,1546:Hi,1547:qi,1612:Ki,1635:Oi,1655:$i,1663:Ui,1725:Fi,1787:Ei,1808:Ii,2007:Bi,2038:Ti,2066:Di,2076:Li,2100:Ai,2133:Pi,2165:Mi,2198:Ri,2202:Si,2227:Ci,2235:wi,2247:Ni,2255:ji,2274:vi,2333:yi,2410:ki,2452:bi,2463:fi,2481:xi,2543:hi,2549:_i,2577:gi,2578:mi,2700:pi,2739:ui,2888:di,2897:li,2933:oi,2954:ci,3004:ii,3053:ri,3123:ni,3176:ai,3198:si,3257:ti,3303:ei,3328:Zr,3359:Qr,3489:Xr,3519:Yr,3524:Wr,3566:Vr,3586:Gr,3608:zr,3816:Jr,3835:Hr,4044:qr,4046:Kr,4188:Or,4225:$r,4329:Ur,4365:Fr,4432:Er,4613:Ir,4638:Br,4650:Tr,4687:Dr,4830:Lr,4838:Ar,4877:Pr,4882:Mr,4909:Rr,4918:Sr,4922:Cr,4944:wr,5015:Nr,5046:jr,5048:vr,5056:yr,5084:kr,5098:br,5185:fr,5247:xr,5273:hr,5294:_r,5313:gr,5355:mr,5375:pr,5376:ur,5426:dr,5431:lr,5455:or,5478:cr,5538:ir,5573:rr,5592:nr,5607:ar,5881:sr,5929:tr,5930:er,5931:Zn,6080:Qn,6125:Xn,6157:Yn,6159:Wn,6258:Vn,6311:Gn,6344:zn,6361:Jn,6401:Hn,6431:qn,6472:Kn,6644:On,6646:$n,6676:Un,6691:Fn,6703:En,6718:In,6784:Bn,6820:Tn,6851:Dn,6914:Ln,6955:An,7078:Pn,7115:Mn,7139:Rn,7161:Sn,7170:Cn,7192:wn,7234:Nn,7247:jn,7257:vn,7276:yn,7278:kn,7280:bn,7298:fn,7387:xn,7442:hn,7492:_n,7502:gn,7504:mn,7514:pn,7588:un,7589:dn,7652:ln,7709:on,7713:cn,7733:rn,7774:nn,7776:an,7824:sn,7841:tn,7861:en,7892:Za,7980:Qa,8011:Xa,8017:Ya,8109:Wa,8181:Va,8186:Ga,8301:za,8331:Ja,8348:Ha,8451:qa,8456:Ka,8496:Oa,8525:$a,8550:Ua,8568:Fa,8741:Ea,8851:Ia,8874:Ba,8893:Ta,8943:Da,8969:La,8987:Aa,9037:Pa,9097:Ma,9160:Ra,9193:Sa,9205:Ca,9216:wa,9228:Na,9235:ja,9263:va,9282:ya,9419:ka,9441:ba,9461:fa,9468:xa,9517:ha,9535:_a,9542:ga,9575:ma,9609:pa,9709:ua,9775:da,9838:la,9891:oa}]),(U.webpackChunk_N_E=U.webpackChunk_N_E||[]).push([[292],{44:ca,795:ia,1018:ra,1290:na,1592:aa,1750:sa,1757:ta,1854:ea,2027:Zs,2263:Qs,2622:Xs,2743:Ys,2752:Ws,3211:Vs,3246:Gs,3534:zs,3773:Js,4657:Hs,4948:qs,4995:Ks,5003:Os,5032:$s,5035:Us,5087:Fs,5286:Es,5658:Is,6054:Bs,6442:Ts,6650:Ds,6724:Ls,6975:As,7256:Ps,7476:Ms,7547:Rs,8545:Ss,8629:Cs,8901:ws,9102:Ns,9292:js,9570:vs,9686:ys}]),(U.webpackChunk_N_E=U.webpackChunk_N_E||[]).push([[621],{176:(ee,W,u)=>{"use strict";u.r(W),u.d(W,{ComponentMod:()=>J,default:()=>I});var e,o={};u.r(o),u.d(o,{ClientPageRoot:()=>t.Fy,ClientSegmentRoot:()=>t.pl,GlobalError:()=>ae.default,HTTPAccessFallbackBoundary:()=>t.nQ,LayoutRouter:()=>t.C3,MetadataBoundary:()=>t.qB,OutletBoundary:()=>t.Cr,Postpone:()=>t.fK,RenderFromTemplateContext:()=>t.IY,ViewportBoundary:()=>t.PX,__next_app__:()=>be,actionAsyncStorage:()=>t.sc,collectSegmentData:()=>t.Uy,createMetadataComponents:()=>t.IB,createPrerenderParamsForClientSegment:()=>t.lu,createPrerenderSearchParamsForClientPage:()=>t.jO,createServerParamsForServerSegment:()=>t.LV,createServerSearchParamsForServerPage:()=>t.Vv,createTemporaryReferenceSet:()=>t.XI,decodeAction:()=>t.Jk,decodeFormState:()=>t.Am,decodeReply:()=>t.X$,pages:()=>fe,patchFetch:()=>t.V5,preconnect:()=>t.kZ,preloadFont:()=>t.PY,preloadStyle:()=>t.vI,prerender:()=>t.CR,renderToReadableStream:()=>t.WK,routeModule:()=>ke,serverHooks:()=>t.ge,taintObjectReference:()=>t.N2,tree:()=>H,workAsyncStorage:()=>t.J_,workUnitAsyncStorage:()=>t.FP}),u(7776);var _=u(2452),G=u(5056),Y=u(6344),z=u(679),Q=u(6718),te=u(6537),ae=u(7713),t=u(2463);let H=["",{children:["candidates",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(u.bind(u,7893)),"/Users/petercowling/base-shop/apps/product-pipeline/src/app/candidates/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(u.bind(u,9570)),"/Users/petercowling/base-shop/apps/product-pipeline/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(u.bind(u,1111)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(u.bind(u,1146)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(u.bind(u,6851)),"next/dist/client/components/unauthorized-error"]}],fe=["/Users/petercowling/base-shop/apps/product-pipeline/src/app/candidates/[id]/page.tsx"],be={require:u,loadChunk:()=>Promise.resolve()},ke=new Q.AppPageRouteModule({definition:{kind:te.A.APP_PAGE,page:"/candidates/[id]/page",pathname:"/candidates/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H}});var me=u(9542),je=u(3835),Re=u(9228);(0,u(2274).q3)();let _e=B=>B?JSON.parse(B):void 0,Me=U.__BUILD_MANIFEST,he=_e(U.__REACT_LOADABLE_MANIFEST),ye=(e=U.__RSC_MANIFEST)==null?void 0:e["/candidates/[id]/page"],ie=_e(U.__RSC_SERVER_MANIFEST),Ne=_e(U.__NEXT_FONT_MANIFEST),se=_e(U.__INTERCEPTION_ROUTE_REWRITE_MANIFEST)??[];ye&&ie&&(0,je.fQ)({page:"/candidates/[id]/page",clientReferenceManifest:ye,serverActionsManifest:ie,serverModuleMap:(0,Re.e)({serverActionsManifest:ie})});let M=(0,G.R)({pagesType:me.g.APP,dev:!1,page:"/candidates/[id]/page",appMod:null,pageMod:o,errorMod:null,error500Mod:null,Document:null,buildManifest:Me,renderToHTML:z.W,reactLoadableManifest:he,clientReferenceManifest:ye,serverActionsManifest:ie,serverActions:void 0,subresourceIntegrityManifest:void 0,config:{env:{NEXT_PUBLIC_PHASE:"demo",NEXT_PUBLIC_DEFAULT_SHOP:"c2"},eslint:{ignoreDuringBuilds:!0},typescript:{ignoreBuildErrors:!1,tsconfigPath:"tsconfig.json"},distDir:".next",cleanDistDir:!0,assetPrefix:"",cacheMaxMemorySize:52428800,configOrigin:"next.config.mjs",useFileSystemPublicRoutes:!0,generateEtags:!0,pageExtensions:["tsx","ts","jsx","js"],poweredByHeader:!0,compress:!0,images:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",remotePatterns:[],unoptimized:!1},devIndicators:{position:"bottom-left"},onDemandEntries:{maxInactiveAge:6e4,pagesBufferLength:5},amp:{canonicalBase:""},basePath:"",sassOptions:{},trailingSlash:!1,i18n:null,productionBrowserSourceMaps:!1,excludeDefaultMomentLocales:!0,serverRuntimeConfig:{},publicRuntimeConfig:{},reactProductionProfiling:!1,reactStrictMode:!0,reactMaxHeadersLength:6e3,httpAgentOptions:{keepAlive:!0},logging:{},expireTime:31536e3,staticPageGenerationTimeout:60,modularizeImports:{"@mui/icons-material":{transform:"@mui/icons-material/{{member}}"},lodash:{transform:"lodash/{{member}}"}},outputFileTracingRoot:"/Users/petercowling/base-shop/apps/product-pipeline",experimental:{nodeMiddleware:!1,cacheLife:{default:{stale:300,revalidate:900,expire:4294967294},seconds:{stale:0,revalidate:1,expire:60},minutes:{stale:300,revalidate:60,expire:3600},hours:{stale:300,revalidate:3600,expire:86400},days:{stale:300,revalidate:86400,expire:604800},weeks:{stale:300,revalidate:604800,expire:2592e3},max:{stale:300,revalidate:2592e3,expire:4294967294}},cacheHandlers:{},cssChunking:!0,multiZoneDraftMode:!1,appNavFailHandling:!1,prerenderEarlyExit:!0,serverMinification:!0,serverSourceMaps:!1,linkNoTouchStart:!1,caseSensitiveRoutes:!1,clientSegmentCache:!1,dynamicOnHover:!1,preloadEntriesOnStart:!0,clientRouterFilter:!0,clientRouterFilterRedirects:!1,fetchCacheKeyPrefix:"",middlewarePrefetch:"flexible",optimisticClientCache:!0,manualClientBasePath:!1,cpus:9,memoryBasedWorkersCount:!1,imgOptConcurrency:null,imgOptTimeoutInSeconds:7,imgOptMaxInputPixels:268402689,imgOptSequentialRead:null,isrFlushToDisk:!0,workerThreads:!1,optimizeCss:!1,nextScriptWorkers:!1,scrollRestoration:!1,externalDir:!1,disableOptimizedLoading:!1,gzipSize:!0,craCompat:!1,esmExternals:!0,fullySpecified:!1,swcTraceProfiling:!1,forceSwcTransforms:!1,largePageDataBytes:128e3,typedRoutes:!1,typedEnv:!1,parallelServerCompiles:!1,parallelServerBuildTraces:!1,ppr:!1,authInterrupts:!1,webpackMemoryOptimizations:!1,optimizeServerReact:!0,useEarlyImport:!1,viewTransition:!1,routerBFCache:!1,staleTimes:{dynamic:0,static:300},serverComponentsHmrCache:!0,staticGenerationMaxConcurrency:8,staticGenerationMinPagesPerWorker:25,dynamicIO:!1,inlineCss:!1,useCache:!1,optimizePackageImports:["lucide-react","date-fns","lodash-es","ramda","antd","react-bootstrap","ahooks","@ant-design/icons","@headlessui/react","@headlessui-float/react","@heroicons/react/20/solid","@heroicons/react/24/solid","@heroicons/react/24/outline","@visx/visx","@tremor/react","rxjs","@mui/material","@mui/icons-material","recharts","react-use","effect","@effect/schema","@effect/platform","@effect/platform-node","@effect/platform-browser","@effect/platform-bun","@effect/sql","@effect/sql-mssql","@effect/sql-mysql2","@effect/sql-pg","@effect/sql-squlite-node","@effect/sql-squlite-bun","@effect/sql-squlite-wasm","@effect/sql-squlite-react-native","@effect/rpc","@effect/rpc-http","@effect/typeclass","@effect/experimental","@effect/opentelemetry","@material-ui/core","@material-ui/icons","@tabler/icons-react","mui-core","react-icons/ai","react-icons/bi","react-icons/bs","react-icons/cg","react-icons/ci","react-icons/di","react-icons/fa","react-icons/fa6","react-icons/fc","react-icons/fi","react-icons/gi","react-icons/go","react-icons/gr","react-icons/hi","react-icons/hi2","react-icons/im","react-icons/io","react-icons/io5","react-icons/lia","react-icons/lib","react-icons/lu","react-icons/md","react-icons/pi","react-icons/ri","react-icons/rx","react-icons/si","react-icons/sl","react-icons/tb","react-icons/tfi","react-icons/ti","react-icons/vsc","react-icons/wi"]},htmlLimitedBots:"Mediapartners-Google|Slurp|DuckDuckBot|baiduspider|yandex|sogou|bitlybot|tumblr|vkShare|quora link preview|redditbot|ia_archiver|Bingbot|BingPreview|applebot|facebookexternalhit|facebookcatalog|Twitterbot|LinkedInBot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|Yeti",bundlePagesRouterDependencies:!1,configFile:"/Users/petercowling/base-shop/apps/product-pipeline/next.config.mjs",configFileName:"next.config.mjs",transpilePackages:["@acme/config","@acme/ui","@acme/platform-core","@acme/i18n","@acme/template-app","@acme/shared-utils"],turbopack:{root:"/Users/petercowling/base-shop/apps/product-pipeline"}},buildId:"5ZTXl8XS8OXXDxwlj4yOt",nextFontManifest:Ne,incrementalCacheHandler:null,interceptionRouteRewrites:se}),J=o;function I(B){return(0,_.O)({...B,IncrementalCache:Y.N,handler:M})}},361:(ee,W,u)=>{Promise.resolve().then(u.bind(u,7107)),Promise.resolve().then(u.bind(u,4044)),Promise.resolve().then(u.bind(u,5087)),Promise.resolve().then(u.bind(u,7476)),Promise.resolve().then(u.bind(u,44)),Promise.resolve().then(u.bind(u,3246)),Promise.resolve().then(u.bind(u,4657)),Promise.resolve().then(u.bind(u,8545)),Promise.resolve().then(u.bind(u,6650)),Promise.resolve().then(u.bind(u,4948)),Promise.resolve().then(u.bind(u,2752)),Promise.resolve().then(u.bind(u,2622))},5356:bt,5513:(ee,W,u)=>{Promise.resolve().then(u.bind(u,5590)),Promise.resolve().then(u.bind(u,4225)),Promise.resolve().then(u.bind(u,3773)),Promise.resolve().then(u.bind(u,9102)),Promise.resolve().then(u.bind(u,1750)),Promise.resolve().then(u.bind(u,6724)),Promise.resolve().then(u.bind(u,2027)),Promise.resolve().then(u.bind(u,4995)),Promise.resolve().then(u.bind(u,5032)),Promise.resolve().then(u.bind(u,6442)),Promise.resolve().then(u.bind(u,6054)),Promise.resolve().then(u.bind(u,7256))},5521:ft,5590:(ee,W,u)=>{"use strict";u.d(W,{default:()=>ot});var e=u(7709),o=u(7841),_=u(5035);function G(a){if(a==null)return"";if(typeof a=="string")return a;try{return JSON.stringify(a,null,2)}catch{return String(a)}}function Y({artifacts:a,strings:i}){return(0,e.jsxs)("section",{className:"pp-card p-6",children:[(0,e.jsxs)(_.BJ,{gap:2,children:[(0,e.jsx)("span",{className:"text-xs uppercase tracking-widest text-foreground/60",children:i.artifacts.label}),(0,e.jsx)("h2",{className:"text-xl font-semibold tracking-tight",children:i.artifacts.title})]}),(0,e.jsx)(_.BJ,{gap:3,className:"mt-4 text-sm",children:a.length===0?(0,e.jsx)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3 text-foreground/60",children:i.notAvailable}):a.map(r=>{var c,s;let p=function(f){if(!f)return null;if(f.startsWith("http"))return f;let d=function(h){if(!h.startsWith("r2://"))return null;let w=h.split("/");return w.length<4?null:w.slice(3).join("/")}(f);return d?`/api/artifacts/download?key=${encodeURIComponent(d)}`:null}(r.uri),v=function(f,d,h){if(!f)return h;switch(f){case"snapshot_html":return d.kindSnapshotHtml;case"snapshot_png":return d.kindSnapshotPng;default:return f}}(r.kind??null,i.artifacts,i.notAvailable);return(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsxs)("div",{className:"text-xs text-foreground/60",children:[i.artifacts.kindLabel,":"," ",(0,e.jsx)("span",{className:"text-foreground",children:v})]}),(0,e.jsxs)("div",{className:"mt-2 text-xs text-foreground/60",children:[i.artifacts.uriLabel,":"," ",p?(0,e.jsx)("a",{className:"inline-flex min-h-12 min-w-12 items-center justify-center text-primary underline",href:p,target:"_blank",rel:"noreferrer",children:i.artifacts.openLabel}):(0,e.jsx)("span",{className:"text-foreground",children:r.uri??i.notAvailable})]}),(0,e.jsxs)("div",{className:"mt-2 text-xs text-foreground/60",children:[i.artifacts.createdLabel,":"," ",(0,e.jsx)("span",{className:"text-foreground",children:(c=r.createdAt,s=i.notAvailable,c??s)})]})]},r.id)})})]})}function z({candidateId:a,stageRuns:i,loading:r,strings:c,onUploaded:s}){let[p,v]=(0,o.useState)(!1),[f,d]=(0,o.useState)(null),[h,w]=(0,o.useState)({stageRunId:"",kind:"",file:null}),D=(0,o.useMemo)(()=>i.map(y=>({id:y.id,label:function(N){let T=N.createdAt??"";return`${N.stage} | ${N.status}${T?` | ${T}`:""}`}(y)})),[i]),S=(0,o.useCallback)(async y=>{if(y.preventDefault(),!h.stageRunId||!h.kind||!h.file)return void d(c.artifactUpload.errorMessage);v(!0),d(null);let N=new FormData;N.set("candidateId",a),N.set("stageRunId",h.stageRunId),N.set("kind",h.kind),N.set("file",h.file);try{(await fetch("/api/artifacts/upload",{method:"POST",body:N})).ok?(d(c.artifactUpload.successMessage),w({stageRunId:"",kind:"",file:null}),await s()):d(c.artifactUpload.errorMessage)}catch(T){console.error(T),d(c.artifactUpload.errorMessage)}finally{v(!1)}},[a,h,s,c.artifactUpload]),R=r||D.length===0||p;return(0,e.jsxs)("section",{className:"pp-card p-6",children:[(0,e.jsxs)(_.BJ,{gap:2,children:[(0,e.jsx)("span",{className:"text-xs uppercase tracking-widest text-foreground/60",children:c.artifactUpload.label}),(0,e.jsx)("h2",{className:"text-xl font-semibold tracking-tight",children:c.artifactUpload.title})]}),(0,e.jsxs)("form",{className:"mt-4 grid gap-4 md:grid-cols-2",onSubmit:S,children:[(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.artifactUpload.stageRunLabel,(0,e.jsxs)("select",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:h.stageRunId,onChange:y=>w(N=>({...N,stageRunId:y.target.value})),disabled:R,children:[(0,e.jsx)("option",{value:"",children:r?c.artifactUpload.loadingRuns:D.length===0?c.artifactUpload.emptyRuns:c.notAvailable}),D.map(y=>(0,e.jsx)("option",{value:y.id,children:y.label},y.id))]})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.artifactUpload.kindLabel,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:h.kind,onChange:y=>w(N=>({...N,kind:y.target.value})),disabled:p,type:"text"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.artifactUpload.fileLabel,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",onChange:y=>w(N=>({...N,file:y.target.files?.[0]??null})),disabled:p,type:"file"})]}),(0,e.jsxs)(_.d2,{justify:"between",alignY:"center",className:"gap-3 md:col-span-2",children:[(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:f??c.notAvailable}),(0,e.jsx)("button",{className:"min-h-12 min-w-12 rounded-full bg-primary px-4 py-2 text-sm font-semibold text-primary-foreground disabled:cursor-not-allowed disabled:opacity-60",type:"submit",disabled:p||!h.stageRunId||!h.kind||!h.file||R,children:c.artifactUpload.submitLabel})]})]})]})}function Q({candidate:a,strings:i}){return(0,e.jsxs)("section",{className:"pp-card p-6",children:[(0,e.jsxs)(_.BJ,{gap:2,children:[(0,e.jsx)("span",{className:"text-xs uppercase tracking-widest text-foreground/60",children:i.overview.label}),(0,e.jsx)("h2",{className:"text-xl font-semibold tracking-tight",children:i.overview.title})]}),(0,e.jsxs)(_.BJ,{gap:3,className:"mt-4 text-sm",children:[(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:i.fields.candidateId}),(0,e.jsx)("div",{className:"font-mono text-xs text-foreground/70",children:a?.id??i.notAvailable})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:i.fields.stageStatus}),(0,e.jsx)("div",{className:"text-sm font-semibold",children:a?.stageStatus??i.notAvailable})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:i.fields.decision}),(0,e.jsx)("div",{className:"text-sm font-semibold",children:a?.decision??i.notAvailable})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:i.fields.decisionReason}),(0,e.jsx)("div",{className:"text-sm font-semibold",children:a?.decisionReason??i.notAvailable})]})]})]})}let te={reasonCode:"",severity:"short_cooldown",recheckDays:"21",whatWouldChange:""};function ae({candidateId:a,candidate:i,loading:r,strings:c,onUpdated:s}){var p,v;let[f,d]=(0,o.useState)(te),[h,w]=(0,o.useState)(!1),[D,S]=(0,o.useState)(null),R=i?.cooldown??null,y=R?.active?c.cooldown.activeLabel:c.cooldown.noneLabel,N=R?.active?c.cooldown.activeMessage:c.cooldown.noneMessage,T=function(g,k){if(!g)return k;let m=Date.parse(g);return Number.isNaN(m)?k:new Date(m).toLocaleDateString("en-GB")}(R?.recheckAfter??null,c.cooldown.severityPermanent),q=(p=R?.severity,v=c.cooldown,p?p==="permanent"?v.severityPermanent:p==="long_cooldown"?v.severityLong:v.severityShort:v.severityShort),$=(0,o.useCallback)(async g=>{if(g.preventDefault(),!i)return;let k=f.reasonCode.trim(),m=f.whatWouldChange.trim();if(!k||!m)return void S({tone:"error",text:c.cooldown.errorMessage});let x={candidateId:a,reasonCode:k,severity:f.severity,whatWouldChange:m};if(f.severity!=="permanent"){let l=Number.parseInt(f.recheckDays,10);if(!Number.isFinite(l)||l<=0)return void S({tone:"error",text:c.cooldown.errorMessage});x.recheckAfterDays=l}w(!0),S(null);try{(await fetch("/api/cooldowns",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)})).ok?(S({tone:"success",text:c.cooldown.successMessage}),d(te)):S({tone:"error",text:c.cooldown.errorMessage})}catch(l){console.error(l),S({tone:"error",text:c.cooldown.errorMessage})}finally{w(!1),await s()}},[i,a,f.reasonCode,f.recheckDays,f.severity,f.whatWouldChange,s,c.cooldown]),P=h||r||!i,j=(0,o.useMemo)(()=>R?.active?{reason:R.reasonCode,severity:q,recheck:T,change:R.whatWouldChange??c.notAvailable}:null,[R,T,q,c.notAvailable]);return(0,e.jsxs)("section",{className:"pp-card p-6",children:[(0,e.jsxs)(_.BJ,{gap:2,children:[(0,e.jsx)("span",{className:"text-xs uppercase tracking-widest text-foreground/60",children:c.cooldown.label}),(0,e.jsx)("h2",{className:"text-xl font-semibold tracking-tight",children:c.cooldown.title})]}),(0,e.jsxs)("div",{className:"mt-4 rounded-2xl border border-border-1 bg-surface-2 px-4 py-3 text-sm",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:y}),j?(0,e.jsxs)(_.BJ,{gap:2,className:"mt-2 text-sm",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:c.cooldown.reasonLabel}),(0,e.jsx)("div",{className:"font-semibold",children:j.reason})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:c.cooldown.severityLabel}),(0,e.jsx)("div",{className:"font-semibold",children:j.severity})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:c.cooldown.recheckLabel}),(0,e.jsx)("div",{className:"font-semibold",children:j.recheck})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:c.cooldown.whatWouldChangeLabel}),(0,e.jsx)("div",{className:"font-semibold",children:j.change})]})]}):(0,e.jsx)("div",{className:"mt-2 text-xs text-foreground/60",children:N})]}),(0,e.jsxs)("form",{className:"mt-4 grid gap-4",onSubmit:$,children:[(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.cooldown.reasonLabel,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:f.reasonCode,onChange:g=>d(k=>({...k,reasonCode:g.target.value})),disabled:P,type:"text"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.cooldown.severityLabel,(0,e.jsxs)("select",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:f.severity,onChange:g=>d(k=>({...k,severity:g.target.value})),disabled:P,children:[(0,e.jsx)("option",{value:"short_cooldown",children:c.cooldown.severityShort}),(0,e.jsx)("option",{value:"long_cooldown",children:c.cooldown.severityLong}),(0,e.jsx)("option",{value:"permanent",children:c.cooldown.severityPermanent})]})]}),f.severity!=="permanent"?(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.cooldown.recheckLabel,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:f.recheckDays,onChange:g=>d(k=>({...k,recheckDays:g.target.value})),disabled:P,type:"number",min:1,max:3650})]}):null,(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.cooldown.whatWouldChangeLabel,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:f.whatWouldChange,onChange:g=>d(k=>({...k,whatWouldChange:g.target.value})),disabled:P,type:"text"})]}),(0,e.jsxs)(_.d2,{justify:"between",alignY:"center",className:"gap-3",children:[D?(0,e.jsx)("span",{className:D.tone==="success"?"text-xs text-emerald-600":"text-xs text-red-600",children:D.text}):(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:N}),(0,e.jsx)("button",{className:"min-h-12 min-w-12 rounded-full bg-primary px-4 py-2 text-sm font-semibold text-primary-foreground disabled:cursor-not-allowed disabled:opacity-60",type:"submit",disabled:P,children:c.cooldown.submitLabel})]})]})]})}function t({candidate:a,strings:i}){return(0,e.jsxs)("section",{className:"pp-card p-6",children:[(0,e.jsxs)(_.BJ,{gap:2,children:[(0,e.jsx)("span",{className:"text-xs uppercase tracking-widest text-foreground/60",children:i.lead.label}),(0,e.jsx)("h2",{className:"text-xl font-semibold tracking-tight",children:i.lead.title})]}),(0,e.jsxs)(_.BJ,{gap:3,className:"mt-4 text-sm",children:[(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:i.fields.leadTitle}),(0,e.jsx)("div",{className:"text-sm font-semibold",children:a?.lead?.title??i.notAvailable})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:i.fields.leadSource}),(0,e.jsx)("div",{className:"text-sm font-semibold",children:a?.lead?.source??i.notAvailable})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:i.fields.leadUrl}),(0,e.jsx)("div",{className:"text-sm font-semibold break-all",children:a?.lead?.url??i.notAvailable})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:i.fields.leadStatus}),(0,e.jsx)("div",{className:"text-sm font-semibold",children:a?.lead?.status??i.notAvailable})]})]})]})}var H=u(1592);function fe({summary:a,strings:i,notAvailable:r}){if(!a)return null;let c=function(s,p,v){if(!s)return v;switch(s){case"advance":return p.advance;case"review":return p.review;case"reject":return p.reject;default:return v}}(a.action??null,i.actions,r);return(0,e.jsxs)(_.xA,{cols:1,gap:3,className:"mt-4 md:grid-cols-4",children:[(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryMargin}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:a.marginPct!==null&&a.marginPct!==void 0?(0,H.l9)(a.marginPct/100):r})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryNetPerUnit}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:function(s,p){if(!s)return p;try{return(0,H.vv)(BigInt(s))}catch{return p}}(a.netPerUnitCents,r)})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryThreshold}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:a.targetMarginPct!==null&&a.targetMarginPct!==void 0?(0,H.l9)(a.targetMarginPct/100):r})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryAction}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:c})]})]})}function be({form:a,setForm:i,disabled:r,strings:c,onEdit:s}){let p=v=>f=>{let d=f.target.value;i(h=>({...h,[v]:d})),s()};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputSalePrice,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.salePrice,onChange:p("salePrice"),disabled:r,type:"number",min:0,step:"0.01"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputUnitCost,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.unitCost,onChange:p("unitCost"),disabled:r,type:"number",min:0,step:"0.01"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputShipping,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.shipping,onChange:p("shipping"),disabled:r,type:"number",min:0,step:"0.01"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputFeesPct,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.feesPct,onChange:p("feesPct"),disabled:r,type:"number",min:0,max:100,step:"0.1"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputTargetMarginPct,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.targetMarginPct,onChange:p("targetMarginPct"),disabled:r,type:"number",min:0,max:100,step:"0.1"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60 md:col-span-2",children:[c.inputNotes,(0,e.jsx)("textarea",{className:"mt-2 min-h-24 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.notes,onChange:p("notes"),disabled:r})]})]})}let ke={salePrice:"24.99",unitCost:"8.5",shipping:"2.0",feesPct:"15",targetMarginPct:"25",notes:""};function me(a){let i=a.trim();if(!i)return null;let r=Number.parseFloat(i);return!Number.isFinite(r)||r<0?null:Math.round(100*r)}function je(a){let i=a.trim();if(!i)return;let r=Number.parseFloat(i);return!Number.isFinite(r)||r<0||r>100?null:r}function Re({candidateId:a,candidate:i,stageRuns:r,loading:c,strings:s,onRun:p}){let v=(0,o.useMemo)(()=>r.find(P=>P.stage==="A"),[r]),f=(0,o.useMemo)(()=>function(P){if(!P?.output||typeof P.output!="object")return null;let j=P.output.summary;return j&&typeof j=="object"?j:null}(v),[v]),[d,h]=(0,o.useState)(ke),[w,D]=(0,o.useState)(!1),[S,R]=(0,o.useState)(!1),[y,N]=(0,o.useState)(null),T=!!i?.cooldown?.active,q=(0,o.useCallback)(async P=>{if(P.preventDefault(),!i)return;N(null),R(!0);let j=function(k){let m=me(k.salePrice),x=me(k.unitCost);if(m===null||x===null)return null;let l=function(L){let E=L.trim();if(!E)return;let F=Number.parseFloat(E);return!Number.isFinite(F)||F<0?null:Math.round(100*F)}(k.shipping),b=je(k.feesPct),C=je(k.targetMarginPct);return l===null||b===null||C===null?null:{salePriceCents:m,unitCostCents:x,...l!==void 0?{shippingCents:l}:{},...b!==void 0?{feesPct:b}:{},...C!==void 0?{targetMarginPct:C}:{}}}(d);if(!j){N({tone:"error",text:s.stageA.errorInvalid}),R(!1);return}let g={candidateId:a,...j,...d.notes.trim()?{notes:d.notes.trim()}:{}};try{let k=await fetch("/api/stages/a/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}),m=await k.json().catch(()=>null);if(k.ok)N({tone:"success",text:s.stageA.success});else{let x=m?.details?.reasonCode,l=m?.error==="cooldown_active"?`${s.cooldown.activeMessage}${x?` (${x})`:""}`:s.stageA.errorRun;N({tone:"error",text:l})}}catch(k){console.error(k),N({tone:"error",text:s.stageA.errorRun})}finally{R(!1),await p()}},[i,a,d,p,s.cooldown,s.stageA]),$=S||c||T;return(0,e.jsxs)("section",{className:"pp-card p-6",children:[(0,e.jsxs)(_.BJ,{gap:2,children:[(0,e.jsx)("span",{className:"text-xs uppercase tracking-widest text-foreground/60",children:s.stageA.label}),(0,e.jsx)("h2",{className:"text-xl font-semibold tracking-tight",children:s.stageA.title})]}),(0,e.jsx)(fe,{summary:f,strings:s.stageA,notAvailable:s.notAvailable}),(0,e.jsxs)("form",{className:"mt-4 grid gap-4 md:grid-cols-2",onSubmit:q,children:[(0,e.jsx)(be,{form:d,setForm:h,disabled:$,strings:s.stageA,onEdit:()=>D(!0)}),(0,e.jsxs)(_.d2,{justify:"between",alignY:"center",className:"gap-3 md:col-span-2",children:[y?(0,e.jsx)("span",{className:y.tone==="success"?"text-xs text-emerald-600":"text-xs text-red-600",children:y.text}):(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:T?s.cooldown.activeMessage:s.stageA.inputHelp}),(0,e.jsx)("button",{className:"min-h-12 min-w-12 rounded-full bg-primary px-4 py-2 text-sm font-semibold text-primary-foreground disabled:cursor-not-allowed disabled:opacity-60",type:"submit",disabled:$,children:s.stageA.runLabel})]})]})]})}function _e({laneMeta:a,disabled:i,strings:r,notAvailable:c,onApplied:s}){let[p,v]=(0,o.useState)([]),[f,d]=(0,o.useState)(!0),[h,w]=(0,o.useState)(""),[D,S]=(0,o.useState)(null),[R,y]=(0,o.useState)(!1);(0,o.useCallback)(async()=>{d(!0),S(null);try{let g=await fetch("/api/logistics/lanes?limit=200&active=true");if(!g.ok)return void S({tone:"error",text:r.lane.errorLoad});let k=await g.json();k.ok&&Array.isArray(k.lanes)?v(k.lanes):S({tone:"error",text:r.lane.errorLoad})}catch(g){console.error(g),S({tone:"error",text:r.lane.errorLoad})}finally{d(!1)}},[r.lane.errorLoad]);let N=(0,o.useMemo)(()=>p.filter(g=>g.latestVersion?.id),[p]),T=(0,o.useCallback)(async()=>{if(!h)return void S({tone:"error",text:r.lane.errorApply});y(!0),S(null);try{let g=await fetch(`/api/logistics/lane-versions/${h}`);if(!g.ok)return void S({tone:"error",text:r.lane.errorApply});let k=await g.json();if(!k.ok||!k.version)return void S({tone:"error",text:r.lane.errorApply});let m=k.lane??null,x=k.version,l={laneId:m?.id??null,laneName:m?.name??null,laneModel:m?.model??null,laneIncoterm:m?.incoterm??null,laneVersionId:x.id,laneVersionLabel:x.versionLabel??null,laneStatus:x.status??null,laneConfidence:x.confidence??null,laneExpiresAt:x.expiresAt??null,laneCurrency:x.currency??null,laneSourceCurrency:x.sourceCurrency??null,laneFxRate:x.fxRate??null,laneFxDate:x.fxDate??null,laneFxSource:x.fxSource??null,laneLeadTimeBaseDays:x.leadTimeBaseDays??null,laneCostBasis:x.costBasis??null,laneCostAmount:x.costAmount??null},b={...x.costAmount===null||x.costAmount===void 0?{}:{freight:String(x.costAmount)},...x.leadTimeBaseDays===null||x.leadTimeBaseDays===void 0?{}:{leadTimeDays:String(x.leadTimeBaseDays)},...m?.incoterm?{incoterms:m.incoterm}:{}};s(l,b),S({tone:"success",text:r.lane.successApply})}catch(g){console.error(g),S({tone:"error",text:r.lane.errorApply})}finally{y(!1)}},[s,h,r.lane.errorApply,r.lane.successApply]),q=function(g,k){if(!g)return null;let m=new Date(g);if(Number.isNaN(m.getTime()))return null;let x=Math.ceil((m.getTime()-Date.now())/864e5);return x<0?k.lane.warningExpired:x<=14?k.lane.warningExpiring.replace("{days}",String(x)):null}(a?.laneExpiresAt,r),$=function(g,k){if(!g)return null;let m=g.toUpperCase();return m==="C0"||m==="C1"?k.lane.warningLowConfidence.replace("{confidence}",g):null}(a?.laneConfidence??null,r),P=function(g){if(!g)return!1;let k=g.toLowerCase();return!(k.includes("unit")||k.includes("/unit"))}(a?.laneCostBasis??null)?r.lane.warningBasis:null,j=a?`${a.laneName??c} | ${a.laneConfidence??c} | ${a.laneCostAmount??c} ${a.laneCostBasis??""}`:r.lane.appliedEmpty;return(0,e.jsxs)("section",{className:"pp-card p-6",children:[(0,e.jsxs)(_.BJ,{gap:2,children:[(0,e.jsx)("span",{className:"text-xs uppercase tracking-widest text-foreground/60",children:r.lane.label}),(0,e.jsx)("h2",{className:"text-xl font-semibold tracking-tight",children:r.lane.title})]}),(0,e.jsxs)("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60 md:col-span-2",children:[r.lane.selectLabel,(0,e.jsxs)("select",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:h,onChange:g=>w(g.target.value),disabled:i||f||R,children:[(0,e.jsx)("option",{value:"",children:r.lane.selectPlaceholder}),N.map(g=>(0,e.jsx)("option",{value:g.latestVersion?.id??"",children:function(k){if(!k.latestVersion)return k.name;let m=k.latestVersion,x=m.confidence??"-",l=m.costAmount===null||m.costAmount===void 0?"-":String(m.costAmount),b=m.costBasis??"",C=m.leadTimeBaseDays===null||m.leadTimeBaseDays===void 0?"-":`${m.leadTimeBaseDays}d`;return`${k.name} | ${x} | ${l} ${b} | ${C}`}(g)},g.latestVersion?.id??g.id))]})]}),(0,e.jsxs)(_.d2,{justify:"between",alignY:"center",className:"gap-3 md:col-span-2",children:[(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:D?D.text:r.lane.help}),(0,e.jsx)("button",{className:"min-h-12 min-w-12 rounded-full border border-border-2 px-4 py-2 text-xs font-semibold disabled:cursor-not-allowed disabled:opacity-60",type:"button",onClick:T,disabled:i||f||R||N.length===0,children:r.lane.applyLabel})]})]}),(0,e.jsxs)("div",{className:"mt-4 rounded-2xl border border-border-1 bg-surface-2 px-4 py-3 text-xs text-foreground/70",children:[(0,e.jsx)("div",{className:"text-foreground/60",children:r.lane.appliedLabel}),(0,e.jsx)("div",{className:"mt-1 font-semibold",children:j}),q?(0,e.jsx)("div",{className:"mt-2 text-amber-600",children:q}):null,$?(0,e.jsx)("div",{className:"mt-2 text-amber-600",children:$}):null,P?(0,e.jsx)("div",{className:"mt-2 text-amber-600",children:P}):null,f&&N.length===0?(0,e.jsx)("div",{className:"mt-2 text-foreground/60",children:r.lane.loading}):null,f||N.length!==0?null:(0,e.jsx)("div",{className:"mt-2 text-foreground/60",children:r.lane.empty})]})]})}function Me({strings:a}){return(0,e.jsxs)("section",{className:"pp-card p-6",children:[(0,e.jsxs)(_.BJ,{gap:2,children:[(0,e.jsx)("span",{className:"text-xs uppercase tracking-widest text-foreground/60",children:a.label}),(0,e.jsx)("h3",{className:"text-lg font-semibold tracking-tight",children:a.title})]}),(0,e.jsxs)("div",{className:"mt-4 grid gap-6 md:grid-cols-2",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-xs uppercase tracking-widest text-foreground/60",children:a.glossaryLabel}),(0,e.jsxs)("ul",{className:"mt-2 space-y-2 text-sm text-foreground/70",children:[(0,e.jsx)("li",{children:a.glossaryFba}),(0,e.jsx)("li",{children:a.glossaryIncoterms})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-xs uppercase tracking-widest text-foreground/60",children:a.costTimingLabel}),(0,e.jsx)("div",{className:"mt-2 text-sm text-foreground/70",children:a.costTimingText}),(0,e.jsx)("div",{className:"mt-4 text-xs uppercase tracking-widest text-foreground/60",children:a.confidenceLabel}),(0,e.jsx)("div",{className:"mt-2 text-sm text-foreground/70",children:a.confidenceText})]})]})]})}function he(a,i){if(!a)return i;try{return(0,H.vv)(BigInt(a))}catch{return i}}function ye({summary:a,strings:i,notAvailable:r}){if(!a)return null;let c=a.depositPct!==null&&a.depositPct!==void 0?`${a.depositPct.toFixed(0)}%`:r;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(_.xA,{cols:1,gap:3,className:"mt-4 md:grid-cols-4",children:[(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryUnitCost}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:he(a.perUnitLandedCostCents,r)})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryTotalCost}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:he(a.totalLandedCostCents,r)})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryDeposit}),(0,e.jsxs)("div",{className:"mt-1 text-sm font-semibold",children:[he(a.depositAmountCents,r)," ",(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:c})]})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryBalance}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:he(a.balanceAmountCents,r)})]})]}),(0,e.jsxs)("div",{className:"mt-3 text-xs text-foreground/60",children:[i.summaryLeadTime,":"," ",a.leadTimeDays??r,a.balanceDueDay!==null&&a.balanceDueDay!==void 0?` \xB7 ${a.balanceDueDay}`:""]})]})}function ie({form:a,setForm:i,disabled:r,strings:c,onEdit:s}){let p=v=>f=>{let d=f.target.value;i(h=>({...h,[v]:d})),s()};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputUnitsPlanned,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.unitsPlanned,onChange:p("unitsPlanned"),disabled:r,type:"number",min:1,step:"1"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputUnitCost,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.unitCost,onChange:p("unitCost"),disabled:r,type:"number",min:0,step:"0.01"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputFreight,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.freight,onChange:p("freight"),disabled:r,type:"number",min:0,step:"0.01"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputDuty,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.duty,onChange:p("duty"),disabled:r,type:"number",min:0,step:"0.01"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputVat,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.vat,onChange:p("vat"),disabled:r,type:"number",min:0,step:"0.01"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputPackaging,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.packaging,onChange:p("packaging"),disabled:r,type:"number",min:0,step:"0.01"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputInspection,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.inspection,onChange:p("inspection"),disabled:r,type:"number",min:0,step:"0.01"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputOther,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.other,onChange:p("other"),disabled:r,type:"number",min:0,step:"0.01"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputLeadTime,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.leadTimeDays,onChange:p("leadTimeDays"),disabled:r,type:"number",min:0,step:"1"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputDepositPct,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.depositPct,onChange:p("depositPct"),disabled:r,type:"number",min:0,max:100,step:"1"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputBalanceDueDays,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.balanceDueDays,onChange:p("balanceDueDays"),disabled:r,type:"number",min:0,step:"1"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputIncoterms,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.incoterms,onChange:p("incoterms"),disabled:r,type:"text"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60 md:col-span-2",children:[c.inputNotes,(0,e.jsx)("textarea",{className:"mt-2 min-h-24 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.notes,onChange:p("notes"),disabled:r})]})]})}let Ne={unitsPlanned:"500",unitCost:"5.5",freight:"1.2",duty:"0.3",vat:"0.8",packaging:"0.25",inspection:"0.1",other:"",leadTimeDays:"45",depositPct:"30",balanceDueDays:"0",incoterms:"FOB",notes:""};function se(a){let i=a.trim();if(!i)return;let r=Number.parseFloat(i);return!Number.isFinite(r)||r<0?null:Math.round(100*r)}function M(a){let i=a.trim();if(!i)return;let r=Number.parseInt(i,10);return!Number.isFinite(r)||r<0?null:r}function J({candidateId:a,candidate:i,stageRuns:r,loading:c,strings:s,onRun:p}){let v=(0,o.useMemo)(()=>r.find(k=>k.stage==="B"),[r]),f=(0,o.useMemo)(()=>function(k){if(!k?.output||typeof k.output!="object")return null;let m=k.output.summary;return m&&typeof m=="object"?m:null}(v),[v]),[d,h]=(0,o.useState)(Ne),[w,D]=(0,o.useState)(null),[S,R]=(0,o.useState)(!1),[y,N]=(0,o.useState)(!1),[T,q]=(0,o.useState)(null),$=!!i?.cooldown?.active,P=(0,o.useCallback)((k,m)=>{R(!0),D(k),h(x=>({...x,...m.freight!==void 0?{freight:m.freight}:{},...m.leadTimeDays!==void 0?{leadTimeDays:m.leadTimeDays}:{},...m.incoterms!==void 0?{incoterms:m.incoterms}:{}}))},[]),j=(0,o.useCallback)(async k=>{if(k.preventDefault(),!i)return;q(null),N(!0);let m=function(l){let b=function(ve){let de=Number.parseInt(ve,10);return!Number.isFinite(de)||de<=0?null:de}(l.unitsPlanned),C=function(ve){let de=ve.trim();if(!de)return null;let xe=Number.parseFloat(de);return!Number.isFinite(xe)||xe<0?null:Math.round(100*xe)}(l.unitCost);if(b===null||C===null)return null;let L=se(l.freight),E=se(l.duty),F=se(l.vat),Z=se(l.packaging),X=se(l.inspection),K=se(l.other),O=M(l.leadTimeDays),Ce=M(l.balanceDueDays),Pe=function(ve){let de=ve.trim();if(!de)return;let xe=Number.parseFloat(de);return!Number.isFinite(xe)||xe<0||xe>100?null:xe}(l.depositPct);return L===null||E===null||F===null||Z===null||X===null||K===null||O===null||Ce===null||Pe===null?null:{unitsPlanned:b,unitCostCents:C,...L!==void 0?{freightCents:L}:{},...E!==void 0?{dutyCents:E}:{},...F!==void 0?{vatCents:F}:{},...Z!==void 0?{packagingCents:Z}:{},...X!==void 0?{inspectionCents:X}:{},...K!==void 0?{otherCents:K}:{},...O!==void 0?{leadTimeDays:O}:{},...Pe!==void 0?{depositPct:Pe}:{},...Ce!==void 0?{balanceDueDays:Ce}:{}}}(d);if(!m){q({tone:"error",text:s.stageB.errorInvalid}),N(!1);return}let x={candidateId:a,...m,...d.incoterms.trim()?{incoterms:d.incoterms.trim()}:{},...d.notes.trim()?{notes:d.notes.trim()}:{},...w?{lane:w}:{}};try{let l=await fetch("/api/stages/b/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)}),b=await l.json().catch(()=>null);if(l.ok)q({tone:"success",text:s.stageB.success});else{let C=b?.details?.reasonCode,L=b?.error==="cooldown_active"?`${s.cooldown.activeMessage}${C?` (${C})`:""}`:s.stageB.errorRun;q({tone:"error",text:L})}}catch(l){console.error(l),q({tone:"error",text:s.stageB.errorRun})}finally{N(!1),await p()}},[i,a,d,w,p,s.cooldown,s.stageB]),g=y||c||$;return(0,e.jsxs)("section",{className:"pp-card p-6",children:[(0,e.jsxs)(_.BJ,{gap:2,children:[(0,e.jsx)("span",{className:"text-xs uppercase tracking-widest text-foreground/60",children:s.stageB.label}),(0,e.jsx)("h2",{className:"text-xl font-semibold tracking-tight",children:s.stageB.title})]}),(0,e.jsx)("div",{className:"mt-4",children:(0,e.jsx)(_e,{laneMeta:w,disabled:g,strings:s.stageB,notAvailable:s.notAvailable,onApplied:P})}),(0,e.jsx)("div",{className:"mt-4",children:(0,e.jsx)(Me,{strings:s.stageB.guidance})}),(0,e.jsx)(ye,{summary:f,strings:s.stageB,notAvailable:s.notAvailable}),(0,e.jsxs)("form",{className:"mt-4 grid gap-4 md:grid-cols-2",onSubmit:j,children:[(0,e.jsx)(ie,{form:d,setForm:h,disabled:g,strings:s.stageB,onEdit:()=>R(!0)}),(0,e.jsxs)(_.d2,{justify:"between",alignY:"center",className:"gap-3 md:col-span-2",children:[T?(0,e.jsx)("span",{className:T.tone==="success"?"text-xs text-emerald-600":"text-xs text-red-600",children:T.text}):(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:$?s.cooldown.activeMessage:s.stageB.inputHelp}),(0,e.jsx)("button",{className:"min-h-12 min-w-12 rounded-full bg-primary px-4 py-2 text-sm font-semibold text-primary-foreground disabled:cursor-not-allowed disabled:opacity-60",type:"submit",disabled:g,children:s.stageB.runLabel})]})]})]})}function I(a,i){if(!a)return i;try{return(0,H.vv)(BigInt(a))}catch{return i}}function B({summary:a,strings:i,notAvailable:r}){return a?(0,e.jsxs)(_.xA,{cols:1,gap:3,className:"mt-4 md:grid-cols-5",children:[(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryNetRevenue}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:I(a.netRevenuePerUnitCents,r)})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryContribution}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:I(a.contributionPerUnitCents,r)})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryMargin}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:a.contributionMarginPct!==null&&a.contributionMarginPct!==void 0?(0,H.l9)(a.contributionMarginPct/100):r})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryPayoutDelay}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:a.payoutDelayDays??r})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryTotalContribution}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:I(a.totalContributionCents,r)})]})]}):null}function oe({form:a,setForm:i,disabled:r,strings:c,onEdit:s}){let p=v=>f=>{let d=f.target.value;i(h=>({...h,[v]:d})),s()};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputSalePrice,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.salePrice,onChange:p("salePrice"),disabled:r,type:"number",min:0,step:"0.01"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputPlatformFeePct,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.platformFeePct,onChange:p("platformFeePct"),disabled:r,type:"number",min:0,max:100,step:"0.1"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputFulfillment,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.fulfillment,onChange:p("fulfillment"),disabled:r,type:"number",min:0,step:"0.01"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputStorage,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.storage,onChange:p("storage"),disabled:r,type:"number",min:0,step:"0.01"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputAdvertising,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.advertising,onChange:p("advertising"),disabled:r,type:"number",min:0,step:"0.01"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputOtherFees,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.otherFees,onChange:p("otherFees"),disabled:r,type:"number",min:0,step:"0.01"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputReturnRatePct,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.returnRatePct,onChange:p("returnRatePct"),disabled:r,type:"number",min:0,max:100,step:"0.1"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputPayoutDelay,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.payoutDelayDays,onChange:p("payoutDelayDays"),disabled:r,type:"number",min:0,step:"1"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputUnitsPlanned,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.unitsPlanned,onChange:p("unitsPlanned"),disabled:r,type:"number",min:0,step:"1"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60 md:col-span-2",children:[c.inputNotes,(0,e.jsx)("textarea",{className:"mt-2 min-h-24 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.notes,onChange:p("notes"),disabled:r})]})]})}let ne={salePrice:"24.9",platformFeePct:"15",fulfillment:"3.2",storage:"0.3",advertising:"1.1",otherFees:"",returnRatePct:"4",payoutDelayDays:"14",unitsPlanned:"500",notes:""};function ce(a){let i=a.trim();if(!i)return;let r=Number.parseFloat(i);return!Number.isFinite(r)||r<0?null:Math.round(100*r)}function ue(a){let i=a.trim();if(!i)return;let r=Number.parseInt(i,10);return!Number.isFinite(r)||r<0?null:r}function le({candidateId:a,candidate:i,stageRuns:r,loading:c,strings:s,onRun:p}){let v=(0,o.useMemo)(()=>r.find(P=>P.stage==="C"),[r]),f=(0,o.useMemo)(()=>function(P){if(!P?.output||typeof P.output!="object")return null;let j=P.output.summary;return j&&typeof j=="object"?j:null}(v),[v]),[d,h]=(0,o.useState)(ne),[w,D]=(0,o.useState)(!1),[S,R]=(0,o.useState)(!1),[y,N]=(0,o.useState)(null),T=!!i?.cooldown?.active,q=(0,o.useCallback)(async P=>{if(P.preventDefault(),!i)return;N(null),R(!0);let j=function(k){let m=function(X){let K=X.trim();if(!K)return null;let O=Number.parseFloat(K);return!Number.isFinite(O)||O<0?null:Math.round(100*O)}(k.salePrice),x=function(X){let K=X.trim();if(!K)return null;let O=Number.parseFloat(K);return!Number.isFinite(O)||O<0||O>100?null:O}(k.platformFeePct);if(m===null||x===null)return null;let l=ce(k.fulfillment),b=ce(k.storage),C=ce(k.advertising),L=ce(k.otherFees),E=function(X){let K=X.trim();if(!K)return;let O=Number.parseFloat(K);return!Number.isFinite(O)||O<0||O>100?null:O}(k.returnRatePct),F=ue(k.payoutDelayDays),Z=ue(k.unitsPlanned);return l===null||b===null||C===null||L===null||E===null||F===null||Z===null?null:{salePriceCents:m,platformFeePct:x,...l!==void 0?{fulfillmentFeeCents:l}:{},...b!==void 0?{storageFeeCents:b}:{},...C!==void 0?{advertisingCents:C}:{},...L!==void 0?{otherFeesCents:L}:{},...E!==void 0?{returnRatePct:E}:{},...F!==void 0?{payoutDelayDays:F}:{},...Z!==void 0?{unitsPlanned:Z}:{}}}(d);if(!j){N({tone:"error",text:s.stageC.errorInvalid}),R(!1);return}let g={candidateId:a,...j,...d.notes.trim()?{notes:d.notes.trim()}:{}};try{let k=await fetch("/api/stages/c/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}),m=await k.json().catch(()=>null);if(k.ok)N({tone:"success",text:s.stageC.success});else{let x=m?.details?.reasonCode,l=m?.error==="cooldown_active"?`${s.cooldown.activeMessage}${x?` (${x})`:""}`:s.stageC.errorRun;N({tone:"error",text:l})}}catch(k){console.error(k),N({tone:"error",text:s.stageC.errorRun})}finally{R(!1),await p()}},[i,a,d,p,s.cooldown,s.stageC]),$=S||c||T;return(0,e.jsxs)("section",{className:"pp-card p-6",children:[(0,e.jsxs)(_.BJ,{gap:2,children:[(0,e.jsx)("span",{className:"text-xs uppercase tracking-widest text-foreground/60",children:s.stageC.label}),(0,e.jsx)("h2",{className:"text-xl font-semibold tracking-tight",children:s.stageC.title})]}),(0,e.jsx)(B,{summary:f,strings:s.stageC,notAvailable:s.notAvailable}),(0,e.jsxs)("form",{className:"mt-4 grid gap-4 md:grid-cols-2",onSubmit:q,children:[(0,e.jsx)(oe,{form:d,setForm:h,disabled:$,strings:s.stageC,onEdit:()=>D(!0)}),(0,e.jsxs)(_.d2,{justify:"between",alignY:"center",className:"gap-3 md:col-span-2",children:[y?(0,e.jsx)("span",{className:y.tone==="success"?"text-xs text-emerald-600":"text-xs text-red-600",children:y.text}):(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:T?s.cooldown.activeMessage:s.stageC.inputHelp}),(0,e.jsx)("button",{className:"min-h-12 min-w-12 rounded-full bg-primary px-4 py-2 text-sm font-semibold text-primary-foreground disabled:cursor-not-allowed disabled:opacity-60",type:"submit",disabled:$,children:s.stageC.runLabel})]})]})]})}function pe({summary:a,strings:i,notAvailable:r}){if(!a)return null;let c=function(s,p,v){if(!s)return v;switch(s){case"not_started":return p.notStarted;case"in_progress":return p.inProgress;case"ready":return p.ready;default:return v}}(a.assetReadiness??null,i.assetReadiness,r);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(_.xA,{cols:1,gap:3,className:"mt-4 md:grid-cols-4",children:[(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryAssetReadiness}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:c})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryOneTimeCost}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:function(s,p){if(!s)return p;try{return(0,H.vv)(BigInt(s))}catch{return p}}(a.oneTimeCostCents,r)})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summarySamplingRounds}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:a.samplingRounds??r})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryLeadTime}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:a.leadTimeDays??r})]})]}),(0,e.jsxs)("div",{className:"mt-3 text-xs text-foreground/60",children:[i.summaryPackagingStatus,": ",a.packagingStatus??r]})]})}function Le({form:a,setForm:i,disabled:r,strings:c,readinessOptions:s,onEdit:p}){let v=f=>d=>{let h=d.target.value;i(w=>({...w,[f]:h})),p()};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputAssetReadiness,(0,e.jsx)("select",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.assetReadiness,onChange:f=>{i(d=>({...d,assetReadiness:f.target.value})),p()},disabled:r,children:s.map(f=>(0,e.jsx)("option",{value:f.value,children:f.label},f.value))})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputOneTimeCost,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.oneTimeCost,onChange:v("oneTimeCost"),disabled:r,type:"number",min:0,step:"0.01"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputSamplingRounds,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.samplingRounds,onChange:v("samplingRounds"),disabled:r,type:"number",min:0,step:"1"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputLeadTime,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.leadTimeDays,onChange:v("leadTimeDays"),disabled:r,type:"number",min:0,step:"1"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputPackagingStatus,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.packagingStatus,onChange:v("packagingStatus"),disabled:r,type:"text"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60 md:col-span-2",children:[c.inputNotes,(0,e.jsx)("textarea",{className:"mt-2 min-h-24 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.notes,onChange:v("notes"),disabled:r})]})]})}let ze={assetReadiness:"not_started",oneTimeCost:"",samplingRounds:"",leadTimeDays:"",packagingStatus:"",notes:""};function Ee(a){let i=a.trim();if(!i)return;let r=Number.parseInt(i,10);return!Number.isFinite(r)||r<0?null:r}function Ge({candidateId:a,candidate:i,stageRuns:r,loading:c,strings:s,onRun:p}){let v=(0,o.useMemo)(()=>r.find(j=>j.stage==="D"),[r]),f=(0,o.useMemo)(()=>function(j){if(!j?.output||typeof j.output!="object")return null;let g=j.output.summary;return g&&typeof g=="object"?g:null}(v),[v]),[d,h]=(0,o.useState)(ze),[w,D]=(0,o.useState)(!1),[S,R]=(0,o.useState)(!1),[y,N]=(0,o.useState)(null),T=!!i?.cooldown?.active,q=(0,o.useCallback)(async j=>{if(j.preventDefault(),!i)return;N(null),R(!0);let g=function(m){let x=function(L){let E=L.trim();if(!E)return;let F=Number.parseFloat(E);return!Number.isFinite(F)||F<0?null:Math.round(100*F)}(m.oneTimeCost),l=Ee(m.samplingRounds),b=Ee(m.leadTimeDays);if(x===null||l===null||b===null)return null;let C=m.packagingStatus.trim();return{assetReadiness:m.assetReadiness,...x!==void 0?{oneTimeCostCents:x}:{},...l!==void 0?{samplingRounds:l}:{},...b!==void 0?{leadTimeDays:b}:{},...C?{packagingStatus:C}:{}}}(d);if(!g){N({tone:"error",text:s.stageD.errorInvalid}),R(!1);return}let k={candidateId:a,...g,...d.notes.trim()?{notes:d.notes.trim()}:{}};try{let m=await fetch("/api/stages/d/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)}),x=await m.json().catch(()=>null);if(m.ok)N({tone:"success",text:s.stageD.success});else{let l=x?.details?.reasonCode,b=x?.error==="cooldown_active"?`${s.cooldown.activeMessage}${l?` (${l})`:""}`:s.stageD.errorRun;N({tone:"error",text:b})}}catch(m){console.error(m),N({tone:"error",text:s.stageD.errorRun})}finally{R(!1),await p()}},[i,a,d,p,s.cooldown,s.stageD]),$=S||c||T,P=[{value:"not_started",label:s.stageD.assetReadiness.notStarted},{value:"in_progress",label:s.stageD.assetReadiness.inProgress},{value:"ready",label:s.stageD.assetReadiness.ready}];return(0,e.jsxs)("section",{className:"pp-card p-6",children:[(0,e.jsxs)(_.BJ,{gap:2,children:[(0,e.jsx)("span",{className:"text-xs uppercase tracking-widest text-foreground/60",children:s.stageD.label}),(0,e.jsx)("h2",{className:"text-xl font-semibold tracking-tight",children:s.stageD.title})]}),(0,e.jsx)(pe,{summary:f,strings:s.stageD,notAvailable:s.notAvailable}),(0,e.jsxs)("form",{className:"mt-4 grid gap-4 md:grid-cols-2",onSubmit:q,children:[(0,e.jsx)(Le,{form:d,setForm:h,disabled:$,strings:s.stageD,readinessOptions:P,onEdit:()=>D(!0)}),(0,e.jsxs)(_.d2,{justify:"between",alignY:"center",className:"gap-3 md:col-span-2",children:[y?(0,e.jsx)("span",{className:y.tone==="success"?"text-xs text-emerald-600":"text-xs text-red-600",children:y.text}):(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:T?s.cooldown.activeMessage:s.stageD.inputHelp}),(0,e.jsx)("button",{className:"min-h-12 min-w-12 rounded-full bg-primary px-4 py-2 text-sm font-semibold text-primary-foreground disabled:cursor-not-allowed disabled:opacity-60",type:"submit",disabled:$,children:s.stageD.runLabel})]})]})]})}function Fe(a,i){if(!a)return i;try{return(0,H.vv)(BigInt(a))}catch{return i}}function Ve({candidateId:a,disabled:i,strings:r,notAvailable:c}){let[s,p]=(0,o.useState)([]),[v,f]=(0,o.useState)([]),[d,h]=(0,o.useState)(!0),[w,D]=(0,o.useState)(!1),[S,R]=(0,o.useState)(null),[y,N]=(0,o.useState)(null);(0,o.useCallback)(async()=>{h(!0),R(null);try{let m=await fetch("/api/logistics/lanes?limit=200&active=true");if(!m.ok)return void R({tone:"error",text:r.errorLoad});let x=await m.json();x.ok&&Array.isArray(x.lanes)?p(x.lanes):R({tone:"error",text:r.errorLoad})}catch(m){console.error(m),R({tone:"error",text:r.errorLoad})}finally{h(!1)}},[r.errorLoad]);let T=(0,o.useMemo)(()=>s.filter(m=>m.latestVersion?.id),[s]),q=(0,o.useCallback)(m=>{f(x=>x.includes(m)?x.filter(l=>l!==m):[...x,m])},[]),$=(0,o.useCallback)(async()=>{if(v.length===0)return void R({tone:"error",text:r.empty});D(!0),R(null);try{let m=await fetch("/api/stages/k/compare-lanes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({candidateId:a,laneVersionIds:v})}),x=await m.json().catch(()=>null);if(!m.ok||!x?.ok)return void R({tone:"error",text:r.errorCompare});N(x),R({tone:"success",text:r.successCompare})}catch(m){console.error(m),R({tone:"error",text:r.errorCompare})}finally{D(!1)}},[a,v,r.empty,r.errorCompare,r.successCompare]),P=y?.base?.summary??null,j=y?.base?.lane??null,g=y?.comparisons??[],k=(0,o.useCallback)(m=>m.warnings.map(x=>{switch(x.code){case"expired":return r.warningExpired;case"expiring":return r.warningExpiring.replace("{days}",String(x.days??"-"));case"low_confidence":return r.warningLowConfidence.replace("{confidence}",m.laneConfidence??c);case"basis_non_unit":return r.warningBasis;case"missing_cost":return r.warningMissingCost;case"missing_lead_time":return r.warningMissingLeadTime;default:return null}}).filter(Boolean).join(" "),[c,r]);return(0,e.jsxs)("section",{className:"pp-card p-6",children:[(0,e.jsxs)(_.BJ,{gap:2,children:[(0,e.jsx)("span",{className:"text-xs uppercase tracking-widest text-foreground/60",children:r.label}),(0,e.jsx)("h3",{className:"text-xl font-semibold tracking-tight",children:r.title})]}),(0,e.jsxs)("div",{className:"mt-4",children:[(0,e.jsx)("div",{className:"text-xs uppercase tracking-widest text-foreground/60",children:r.selectLabel}),(0,e.jsxs)(_.xA,{cols:1,gap:2,className:"mt-2",children:[d&&T.length===0?(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:r.loading}):null,d||T.length!==0?null:(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:r.noLanes}),T.map(m=>{let x=m.latestVersion?.id??"",l=v.includes(x);return(0,e.jsxs)("label",{className:"flex items-center gap-2 text-sm text-foreground/80",children:[(0,e.jsx)("input",{type:"checkbox",checked:l,onChange:()=>q(x),disabled:i||d||w||!x}),(0,e.jsx)("span",{children:function(b){if(!b.latestVersion)return b.name;let C=b.latestVersion,L=C.confidence??"-",E=C.costAmount===null||C.costAmount===void 0?"-":String(C.costAmount),F=C.costBasis??"",Z=C.leadTimeBaseDays===null||C.leadTimeBaseDays===void 0?"-":`${C.leadTimeBaseDays}d`;return`${b.name} | ${L} | ${E} ${F} | ${Z}`}(m)})]},x||m.id)})]}),(0,e.jsxs)(_.d2,{justify:"between",alignY:"center",className:"mt-3 gap-3",children:[(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:S?S.text:r.help}),(0,e.jsx)("button",{className:"min-h-12 min-w-12 rounded-full border border-border-2 px-4 py-2 text-xs font-semibold disabled:cursor-not-allowed disabled:opacity-60",type:"button",onClick:$,disabled:i||d||w||v.length===0,children:r.compareLabel})]})]}),P?(0,e.jsxs)("div",{className:"mt-6",children:[(0,e.jsx)("div",{className:"text-xs uppercase tracking-widest text-foreground/60",children:r.baseLabel}),(0,e.jsxs)(_.xA,{cols:1,gap:3,className:"mt-2 md:grid-cols-4",children:[(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:r.summaryPeakCash}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:Fe(P.peakCashOutlayCents,c)})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:r.summaryPayback}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:P.paybackDay??c})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:r.summaryReturn}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:(0,H.l9)(P.annualizedCapitalReturnRate)})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:r.baseLaneLabel}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:typeof j=="object"&&j?j.laneName??c:c})]})]})]}):null,g.length>0?(0,e.jsxs)("div",{className:"mt-6 grid gap-4",children:[(0,e.jsx)("div",{className:"text-xs uppercase tracking-widest text-foreground/60",children:r.resultsLabel}),g.map(m=>{let x=k(m);return(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-4",children:[(0,e.jsx)("div",{className:"text-sm font-semibold",children:m.laneName??c}),(0,e.jsxs)("div",{className:"mt-1 text-xs text-foreground/60",children:[m.laneModel??c," |"," ",m.laneConfidence??c," |"," ",m.laneCostAmount??c," ",m.laneCostBasis??""]}),(0,e.jsxs)(_.xA,{cols:1,gap:3,className:"mt-4 md:grid-cols-3",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:r.summaryPeakCash}),(0,e.jsxs)("div",{className:"mt-1 text-sm font-semibold",children:[Fe(m.summary.peakCashOutlayCents,c)," ",(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:function(l,b,C){if(!l||!b)return C;try{let L=BigInt(b)-BigInt(l);if(L===0n)return"0";let E=L>0n?"+":"-",F=(0,H.vv)(L<0n?-L:L);return`${E}${F}`}catch{return C}}(P?.peakCashOutlayCents,m.summary.peakCashOutlayCents,c)})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:r.summaryPayback}),(0,e.jsxs)("div",{className:"mt-1 text-sm font-semibold",children:[m.summary.paybackDay??c," ",(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:function(l,b,C){if(l==null||b==null)return C;let L=b-l;return Number.isFinite(L)?L===0?"0d":`${L>0?"+":"-"}${Math.abs(L)}d`:C}(P?.paybackDay??null,m.summary.paybackDay??null,c)})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:r.summaryReturn}),(0,e.jsxs)("div",{className:"mt-1 text-sm font-semibold",children:[(0,H.l9)(m.summary.annualizedCapitalReturnRate)," ",(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:function(l,b,C){if(l==null||b==null)return C;let L=b-l;if(!Number.isFinite(L))return C;if(L===0)return"0pp";let E=L>0?"+":"-",F=100*Math.abs(L);return`${E}${(0,H.ZV)(F)}pp`}(P?.annualizedCapitalReturnRate??null,m.summary.annualizedCapitalReturnRate??null,c)})]})]})]}),x?(0,e.jsx)("div",{className:"mt-3 text-xs text-amber-600",children:x}):null]},m.laneVersionId)})]}):null]})}function We({candidateId:a,candidate:i,stageRuns:r,loading:c,strings:s,onRun:p}){let v=(0,o.useMemo)(()=>r.find(l=>l.stage==="K"),[r]),f=(0,o.useMemo)(()=>function(l){if(!l?.output||typeof l.output!="object")return null;let b=l.output.summary;return b&&typeof b=="object"?b:null}(v),[v]),[d,h]=(0,o.useState)(()=>JSON.stringify(function(l){if(!l?.input||typeof l.input!="object")return null;if("input"in l.input){let b=l.input.input;if(b&&typeof b=="object")return b}return l.input}(v)??{horizonDays:120,cashflows:[{day:0,amountCents:-68e3},{day:18,amountCents:-6400},{day:30,amountCents:22e3},{day:45,amountCents:28e3},{day:60,amountCents:22e3},{day:85,amountCents:18e3}],unitsPlanned:500,unitsSoldByDay:Array.from({length:121},(l,b)=>Math.min(500,Math.round(5.2*b))),sellThroughTargetPct:.8,salvageValueCents:2800},null,2)),[w,D]=(0,o.useState)(null),[S,R]=(0,o.useState)(!1),[y,N]=(0,o.useState)(!1),[T,q]=(0,o.useState)(!1),[$,P]=(0,o.useState)(null),j=!!i?.cooldown?.active,g=(0,o.useCallback)(async()=>{P(null),q(!0);try{let l=await fetch("/api/stages/k/compose",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({candidateId:a})}),b=await l.json().catch(()=>null);if(!l.ok)return void(b?.error==="stage_b_required"?P({tone:"error",text:s.stageK.composeMissingStageB}):b?.error==="stage_c_required"?P({tone:"error",text:s.stageK.composeMissingStageC}):P({tone:"error",text:s.stageK.composeError}));if(!b?.input)return void P({tone:"error",text:s.stageK.composeError});h(JSON.stringify(b.input,null,2)),D(b.scenario??null),R(!0),P({tone:"success",text:s.stageK.composeSuccess})}catch(l){console.error(l),P({tone:"error",text:s.stageK.composeError})}finally{q(!1)}},[a,s.stageK]),k=(0,o.useCallback)(async l=>{let b;l.preventDefault(),P(null),N(!0);try{b=JSON.parse(d)}catch{P({tone:"error",text:s.stageK.errorInvalidJson}),N(!1);return}try{let C=await fetch("/api/stages/k/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({candidateId:a,input:b,...w?{scenario:w}:{}})}),L=await C.json().catch(()=>null);if(C.ok)P({tone:"success",text:s.stageK.success});else{let E=L?.details?.reasonCode,F=L?.error==="cooldown_active"?`${s.cooldown.activeMessage}${E?` (${E})`:""}`:s.stageK.errorRun;P({tone:"error",text:F})}}catch(C){console.error(C),P({tone:"error",text:s.stageK.errorRun})}finally{N(!1),await p()}},[a,d,p,w,s.stageK,s.cooldown]),m=y||c||j,x=T||y||c||j;return(0,e.jsxs)("section",{className:"pp-card p-6",children:[(0,e.jsxs)(_.BJ,{gap:2,children:[(0,e.jsx)("span",{className:"text-xs uppercase tracking-widest text-foreground/60",children:s.stageK.label}),(0,e.jsx)("h2",{className:"text-xl font-semibold tracking-tight",children:s.stageK.title})]}),f?(0,e.jsxs)(_.xA,{cols:1,gap:3,className:"mt-4 md:grid-cols-3",children:[(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:s.stageK.summaryPeakCash}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:function(l){if(!l)return"-";try{return(0,H.vv)(BigInt(l))}catch{return"-"}}(f.peakCashOutlayCents)})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:s.stageK.summaryPayback}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:f.paybackDay??s.notAvailable})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:s.stageK.summaryReturn}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:(0,H.l9)(f.annualizedCapitalReturnRate)})]})]}):null,(0,e.jsx)("div",{className:"mt-4",children:(0,e.jsx)(Ve,{candidateId:a,disabled:m,strings:s.stageK.laneCompare,notAvailable:s.notAvailable})}),(0,e.jsxs)("form",{className:"mt-4 grid gap-4",onSubmit:k,children:[(0,e.jsxs)("div",{children:[(0,e.jsxs)(_.d2,{justify:"between",alignY:"center",className:"gap-3",children:[(0,e.jsx)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:s.stageK.inputLabel}),(0,e.jsx)("button",{className:"min-h-12 min-w-12 rounded-full border border-border-1 bg-surface-2 px-4 py-2 text-xs font-semibold text-foreground disabled:cursor-not-allowed disabled:opacity-60",type:"button",onClick:g,disabled:x,children:s.stageK.composeLabel})]}),(0,e.jsx)("textarea",{className:"mt-2 min-h-56 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-xs text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:d,onChange:l=>{h(l.target.value),D(null),R(!0)},disabled:m})]}),(0,e.jsxs)(_.d2,{justify:"between",alignY:"center",className:"gap-3",children:[$?(0,e.jsx)("span",{className:$.tone==="success"?"text-xs text-emerald-600":"text-xs text-red-600",children:$.text}):(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:j?s.cooldown.activeMessage:`${s.stageK.inputHelp} ${s.stageK.composeHelp}`}),(0,e.jsx)("button",{className:"min-h-12 min-w-12 rounded-full bg-primary px-4 py-2 text-sm font-semibold text-primary-foreground disabled:cursor-not-allowed disabled:opacity-60",type:"submit",disabled:m,children:s.stageK.runLabel})]})]})]})}function De(a,i){return a==null||Number.isNaN(a)?i:new Intl.NumberFormat("en-GB",{style:"currency",currency:"EUR",maximumFractionDigits:2}).format(a)}function Ye({summary:a,strings:i,notAvailable:r}){var c,s,p;if(!a)return null;let v=function(h,w,D){let S=[],R=function(y,N,T){if(!y)return"";switch(y){case"amazon_search":return N.kindAmazonSearch;case"amazon_listing":return N.kindAmazonListing;case"taobao_listing":return N.kindTaobaoListing;default:return y}}(h.kind,w,0);return R&&S.push(R),h.marketplace&&S.push(h.marketplace.toUpperCase()),h.query?S.push(h.query):h.url&&S.push(h.url),S.length>0?S.join(" | "):D}(a,i,r),f=(c=a.generatedAt??null,c??r),d=function(h,w,D){let S=[];if(h.captureMode&&S.push(`${w.summaryCaptureMode}: ${h.captureMode}`),h.headless!==null&&h.headless!==void 0&&S.push(`${w.summaryHeadless}: ${h.headless?w.summaryHeadlessOn:w.summaryHeadlessOff}`),h.humanGate!==null&&h.humanGate!==void 0){let R=h.humanGate?w.summaryHumanGateOn:w.summaryHumanGateOff;h.humanGateOutcome==="accepted"?R=w.summaryHumanGateAccepted:h.humanGateOutcome==="declined"&&(R=w.summaryHumanGateDeclined),S.push(`${w.summaryHumanGate}: ${R}`)}return h.playbook&&S.push(`${w.summaryPlaybook}: ${h.playbook}`),h.sessionProfile&&S.push(`${w.summarySession}: ${h.sessionProfile}`),h.durationMs!==null&&h.durationMs!==void 0&&S.push(`${w.summaryDuration}: ${function(R,y){if(R==null||Number.isNaN(R))return y;let N=R/1e3;return N<1?`${Math.round(R)}ms`:`${N.toFixed(1)}s`}(h.durationMs,D)}`),S.length>0?S.join(" | "):null}(a,i,r);return(0,e.jsxs)(_.BJ,{gap:3,className:"mt-4",children:[(0,e.jsxs)(_.BJ,{gap:1,className:"text-xs text-foreground/60",children:[(0,e.jsxs)("div",{children:[i.summaryContext,": ",v]}),(0,e.jsxs)("div",{children:[i.summaryGeneratedAt,": ",f]}),d?(0,e.jsxs)("div",{children:[i.summaryCapture,": ",d]}):null]}),(0,e.jsxs)(_.xA,{cols:1,gap:3,className:"md:grid-cols-5",children:[(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryPriceRange}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:(s=a.priceMin,p=a.priceMax,s==null||p==null?r:`${De(s,r)} - ${De(p,r)}`)})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryMedianPrice}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:De(a.priceMedian,r)})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryReviewMedian}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:a.reviewMedian!==null&&a.reviewMedian!==void 0?(0,H.ZV)(a.reviewMedian):r})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summarySponsoredShare}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:a.sponsoredShare!==null&&a.sponsoredShare!==void 0?(0,H.l9)(a.sponsoredShare):r})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summarySampleCount}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:a.sampleCount??r})]})]})]})}function we(a){if(typeof a=="number"&&Number.isFinite(a))return a;if(typeof a=="string"){let i=Number(a);if(Number.isFinite(i))return i}return null}function ge(a){return typeof a=="string"&&a.trim()?a:null}function Ue(a){if(typeof a=="boolean")return a;if(typeof a=="string"){if(a.toLowerCase()==="true")return!0;if(a.toLowerCase()==="false")return!1}return null}let $e=/^[a-zA-Z0-9._-]+$/;function Xe({candidateId:a,candidate:i,stageRuns:r,loading:c,strings:s,onQueued:p}){let[v,f]=(0,o.useState)(!1),[d,h]=(0,o.useState)(null),[w,D]=(0,o.useState)(null),[S,R]=(0,o.useState)(!1),[y,N]=(0,o.useState)({kind:"amazon_search",captureMode:"runner",captureProfile:"",marketplace:"de",query:"",url:"",maxResults:"20"});(0,o.useCallback)(async()=>{if(y.captureMode==="runner"){R(!0);try{let l=await fetch("/api/runner/status");if(!l.ok)return void D(null);let b=await l.json().catch(()=>null);D(b?.runner??null)}catch(l){console.error(l),D(null)}finally{R(!1)}}},[y.captureMode]);let T=(0,o.useMemo)(()=>r.some(l=>l.stage==="M"&&(l.status==="queued"||l.status==="running")),[r]),q=(0,o.useMemo)(()=>r.find(l=>l.stage==="M"&&l.status==="succeeded"),[r]),$=(0,o.useMemo)(()=>function(l){var b;if(!l?.output||typeof l.output!="object")return null;let C=l.output,L=(b=C.captureMeta)&&typeof b=="object"?b:null;return{kind:ge(C.kind),marketplace:ge(C.marketplace),query:ge(C.query),url:ge(C.url),priceMin:we(C.priceMin),priceMax:we(C.priceMax),priceMedian:we(C.priceMedian),reviewMedian:we(C.reviewMedian),sponsoredShare:we(C.sponsoredShare),sampleCount:function(E){if(!Array.isArray(E))return null;let F=E.filter(Z=>typeof Z=="number").length;return F>0?F:null}(C.priceSample),generatedAt:ge(C.generatedAt),captureMode:ge(L?.mode),headless:Ue(L?.headless),humanGate:Ue(L?.humanGate),humanGateOutcome:ge(L?.humanGateOutcome),playbook:ge(L?.playbook),sessionProfile:ge(L?.sessionProfile),durationMs:we(L?.durationMs)}}(q),[q]),P=!!i?.cooldown?.active,j=P?s.cooldown.activeMessage:T?s.stageM.queueingLabel:i?s.stageM.readyLabel:s.notAvailable,g=v||c||!i||P,k=(0,o.useMemo)(()=>{if(y.captureMode!=="runner")return null;if(S&&!w)return s.stageM.runnerStatusChecking;if(!w)return s.stageM.runnerStatusUnknown;let l=[w.stale?s.stageM.runnerStatusStale:s.stageM.runnerStatusReady],b=function(C,L){if(!C)return L;let E=Date.parse(C);if(!Number.isFinite(E))return L;let F=Math.max(0,Date.now()-E);if(F<1e3)return"now";let Z=Math.floor(F/1e3);if(Z<60)return`${Z}s`;let X=Math.floor(Z/60);return X<60?`${X}m`:`${Math.floor(X/60)}h`}(w.lastSeen,s.notAvailable);return w.lastSeen&&l.push(`${s.stageM.runnerStatusLastSeen}: ${b}`),w.mode&&l.push(`${s.stageM.runnerStatusMode}: ${w.mode}`),w.headless!==null&&w.headless!==void 0&&l.push(`${s.stageM.runnerStatusBrowser}: ${w.headless?s.stageM.summaryHeadlessOn:s.stageM.summaryHeadlessOff}`),w.sessionProfile&&l.push(`${s.stageM.runnerStatusSession}: ${w.sessionProfile}`),l.join(" | ")},[y.captureMode,w,S,s.stageM,s.notAvailable]),m=w&&w.stale===!1?"text-emerald-600":w&&w.stale?"text-amber-600":"text-foreground/60",x=(0,o.useCallback)(async l=>{if(l.preventDefault(),!i)return;h(null),f(!0);let b=y.marketplace.trim(),C=y.query.trim(),L=y.url.trim(),E=y.captureProfile.trim(),F=Number.parseInt(y.maxResults,10),Z=Number.isFinite(F)?F:void 0;if(E&&!$e.test(E)){h({tone:"error",text:s.stageM.captureProfileErrorInvalid}),f(!1);return}if(y.captureMode==="runner"&&!E){h({tone:"error",text:s.stageM.captureProfileErrorRequired}),f(!1);return}let X={candidateId:a,kind:y.kind,captureMode:y.captureMode,...Z?{maxResults:Z}:{},...E?{captureProfile:E}:{}};if(y.kind==="amazon_search"){let K=C||i.lead?.title?.trim()||"";if(!K||!b){h({tone:"error",text:s.stageM.errorMessage}),f(!1);return}X.query=K,X.marketplace=b}if(y.kind==="amazon_listing"){let K=L||i.lead?.url?.trim()||"";if(!K||!b){h({tone:"error",text:s.stageM.errorMessage}),f(!1);return}X.url=K,X.marketplace=b}if(y.kind==="taobao_listing"){let K=L||i.lead?.url?.trim()||"";if(!K){h({tone:"error",text:s.stageM.errorMessage}),f(!1);return}X.url=K}try{let K=await fetch("/api/stages/m/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)}),O=await K.json().catch(()=>null);if(K.ok)h({tone:"success",text:s.stageM.successMessage});else{let Ce=O?.details?.reasonCode,Pe=O?.details?.site,ve=s.stageM.budgetMessage.replace("{site}",Pe==="taobao"?"Taobao":"Amazon"),de=O?.error==="cooldown_active"?`${s.cooldown.activeMessage}${Ce?` (${Ce})`:""}`:O?.error==="budget_exceeded"?ve:O?.error==="capture_profile_required"?s.stageM.captureProfileErrorRequired:O?.error==="capture_profile_invalid"?s.stageM.captureProfileErrorInvalid:O?.error==="capture_profile_not_allowed"?s.stageM.captureProfileErrorNotAllowed:s.stageM.errorMessage;h({tone:"error",text:de})}}catch(K){console.error(K),h({tone:"error",text:s.stageM.errorMessage})}finally{f(!1),await p()}},[i,a,y,p,s.stageM,s.cooldown]);return(0,e.jsxs)("section",{className:"pp-card p-6",children:[(0,e.jsxs)(_.BJ,{gap:2,children:[(0,e.jsx)("span",{className:"text-xs uppercase tracking-widest text-foreground/60",children:s.stageM.label}),(0,e.jsx)("h2",{className:"text-xl font-semibold tracking-tight",children:s.stageM.title})]}),(0,e.jsx)(Ye,{summary:$,strings:s.stageM,notAvailable:s.notAvailable}),(0,e.jsxs)("form",{className:"mt-4 grid gap-4 md:grid-cols-2",onSubmit:x,children:[(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[s.stageM.kindLabel,(0,e.jsxs)("select",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:y.kind,onChange:l=>N(b=>({...b,kind:l.target.value})),disabled:g,children:[(0,e.jsx)("option",{value:"amazon_search",children:s.stageM.kindAmazonSearch}),(0,e.jsx)("option",{value:"amazon_listing",children:s.stageM.kindAmazonListing}),(0,e.jsx)("option",{value:"taobao_listing",children:s.stageM.kindTaobaoListing})]})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[s.stageM.captureModeLabel,(0,e.jsxs)("select",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:y.captureMode,onChange:l=>{let b=l.target.value;N(C=>({...C,captureMode:b,captureProfile:b==="runner"?C.captureProfile:""}))},disabled:g,children:[(0,e.jsx)("option",{value:"queue",children:s.stageM.captureModeQueue}),(0,e.jsx)("option",{value:"runner",children:s.stageM.captureModeRunner})]})]}),y.captureMode==="runner"&&(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[s.stageM.captureProfileLabel,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:y.captureProfile,onChange:l=>N(b=>({...b,captureProfile:l.target.value})),disabled:g,type:"text",placeholder:s.stageM.captureProfilePlaceholder,pattern:$e.source}),(0,e.jsx)("span",{className:"mt-2 block text-xs text-foreground/60 normal-case tracking-normal",children:s.stageM.captureProfileHelp})]}),y.captureMode==="runner"&&(0,e.jsxs)("div",{className:"md:col-span-2 rounded-2xl border border-border-1 bg-surface-1 px-3 py-2 text-xs",children:[(0,e.jsx)("span",{className:"block text-xs uppercase tracking-widest text-foreground/60",children:s.stageM.runnerStatusLabel}),(0,e.jsx)("span",{className:`mt-1 block ${m}`,children:k??s.stageM.runnerStatusUnknown})]}),(y.kind==="amazon_search"||y.kind==="amazon_listing")&&(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[s.stageM.marketplaceLabel,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:y.marketplace,onChange:l=>N(b=>({...b,marketplace:l.target.value})),disabled:g,type:"text"})]}),y.kind==="amazon_search"&&(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[s.stageM.queryLabel,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:y.query,onChange:l=>N(b=>({...b,query:l.target.value})),disabled:g,type:"text"})]}),(y.kind==="amazon_listing"||y.kind==="taobao_listing")&&(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[s.stageM.urlLabel,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:y.url,onChange:l=>N(b=>({...b,url:l.target.value})),disabled:g,type:"url"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[s.stageM.maxResultsLabel,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:y.maxResults,onChange:l=>N(b=>({...b,maxResults:l.target.value})),disabled:g,type:"number",min:1,max:100})]}),(0,e.jsxs)(_.d2,{justify:"between",alignY:"center",className:"gap-3 md:col-span-2",children:[d?(0,e.jsx)("span",{className:d.tone==="success"?"text-xs text-emerald-600":"text-xs text-red-600",children:d.text}):(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:j}),(0,e.jsx)("button",{className:"min-h-12 min-w-12 rounded-full bg-primary px-4 py-2 text-sm font-semibold text-primary-foreground disabled:cursor-not-allowed disabled:opacity-60",type:"submit",disabled:v||T||c||!i||P,children:v?s.stageM.queueingLabel:s.stageM.runLabel})]})]})]})}function Qe({summary:a,strings:i,notAvailable:r}){if(!a)return null;let c=function(s,p,v){if(!s)return v;switch(s){case"not_started":return p.notStarted;case"in_progress":return p.inProgress;case"waiting_on_supplier":return p.waitingOnSupplier;case"terms_improved":return p.termsImproved;case"no_progress":return p.noProgress;default:return v}}(a.status??null,i.statuses,r);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(_.xA,{cols:1,gap:3,className:"mt-4 md:grid-cols-4",children:[(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryStatus}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:c})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summarySupplier}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:a.supplierName??r})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryTargetUnitCost}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:function(s,p){if(!s)return p;try{return(0,H.vv)(BigInt(s))}catch{return p}}(a.targetUnitCostCents,r)})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryTargetMoq}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:a.targetMoq??r})]})]}),(0,e.jsxs)("div",{className:"mt-3 text-xs text-foreground/60",children:[i.summaryLeadTime,": ",a.targetLeadTimeDays??r," \xB7"," ",i.summaryDeposit,": ",a.targetDepositPct??r,a.targetDepositPct!==null&&a.targetDepositPct!==void 0?"%":""," ","\xB7 ",i.summaryPaymentTerms,": ",a.targetPaymentTerms??r," ","\xB7 ",i.summaryIncoterms,": ",a.targetIncoterms??r]}),(0,e.jsxs)("div",{className:"mt-4 rounded-2xl border border-border-1 bg-surface-2 px-4 py-3 text-sm",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryTasks}),a.tasks&&a.tasks.length>0?(0,e.jsx)(_.BJ,{gap:1,className:"mt-2 text-xs text-foreground/70",children:a.tasks.map((s,p)=>(0,e.jsx)("div",{children:s},`${s}-${p}`))}):(0,e.jsx)("div",{className:"mt-2 text-xs text-foreground/60",children:i.summaryTasksEmpty})]})]})}function Ze({form:a,setForm:i,disabled:r,strings:c,statusOptions:s,onEdit:p}){let v=f=>d=>{let h=d.target.value;i(w=>({...w,[f]:h})),p()};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputStatus,(0,e.jsx)("select",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.status,onChange:f=>{i(d=>({...d,status:f.target.value})),p()},disabled:r,children:s.map(f=>(0,e.jsx)("option",{value:f.value,children:f.label},f.value))})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputSupplier,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.supplierName,onChange:v("supplierName"),disabled:r,type:"text"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputTargetUnitCost,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.targetUnitCost,onChange:v("targetUnitCost"),disabled:r,type:"number",min:0,step:"0.01"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputTargetMoq,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.targetMoq,onChange:v("targetMoq"),disabled:r,type:"number",min:0,step:"1"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputTargetLeadTime,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.targetLeadTimeDays,onChange:v("targetLeadTimeDays"),disabled:r,type:"number",min:0,step:"1"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputTargetDepositPct,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.targetDepositPct,onChange:v("targetDepositPct"),disabled:r,type:"number",min:0,max:100,step:"1"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputTargetPaymentTerms,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.targetPaymentTerms,onChange:v("targetPaymentTerms"),disabled:r,type:"text"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[c.inputTargetIncoterms,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.targetIncoterms,onChange:v("targetIncoterms"),disabled:r,type:"text"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60 md:col-span-2",children:[c.inputTasks,(0,e.jsx)("textarea",{className:"mt-2 min-h-24 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.tasks,onChange:v("tasks"),disabled:r})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60 md:col-span-2",children:[c.inputNotes,(0,e.jsx)("textarea",{className:"mt-2 min-h-24 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:a.notes,onChange:v("notes"),disabled:r})]})]})}let et={status:"not_started",supplierName:"",targetUnitCost:"",targetMoq:"",targetLeadTimeDays:"",targetDepositPct:"",targetPaymentTerms:"",targetIncoterms:"",tasks:"",notes:""};function Oe(a){let i=a.trim();if(!i)return;let r=Number.parseInt(i,10);return!Number.isFinite(r)||r<0?null:r}function tt({candidateId:a,candidate:i,stageRuns:r,loading:c,strings:s,onRun:p}){let v=(0,o.useMemo)(()=>r.find(j=>j.stage==="N"),[r]),f=(0,o.useMemo)(()=>function(j){if(!j?.output||typeof j.output!="object")return null;let g=j.output.summary;return g&&typeof g=="object"?g:null}(v),[v]),[d,h]=(0,o.useState)(et),[w,D]=(0,o.useState)(!1),[S,R]=(0,o.useState)(!1),[y,N]=(0,o.useState)(null),T=!!i?.cooldown?.active,q=(0,o.useCallback)(async j=>{if(j.preventDefault(),!i)return;N(null),R(!0);let g=function(x){let l=function(X){let K=X.trim();if(!K)return;let O=Number.parseFloat(K);return!Number.isFinite(O)||O<0?null:Math.round(100*O)}(x.targetUnitCost),b=Oe(x.targetMoq),C=Oe(x.targetLeadTimeDays),L=function(X){let K=X.trim();if(!K)return;let O=Number.parseFloat(K);return!Number.isFinite(O)||O<0||O>100?null:O}(x.targetDepositPct);if(l===null||b===null||C===null||L===null)return null;let E=x.supplierName.trim(),F=x.targetPaymentTerms.trim(),Z=x.targetIncoterms.trim();return{status:x.status,...E?{supplierName:E}:{},...l!==void 0?{targetUnitCostCents:l}:{},...b!==void 0?{targetMoq:b}:{},...C!==void 0?{targetLeadTimeDays:C}:{},...L!==void 0?{targetDepositPct:L}:{},...F?{targetPaymentTerms:F}:{},...Z?{targetIncoterms:Z}:{}}}(d);if(!g){N({tone:"error",text:s.stageN.errorInvalid}),R(!1);return}let k=d.tasks.split(/[\n,]/).map(x=>x.trim()).filter(Boolean),m={candidateId:a,...g,...k.length?{tasks:k}:{},...d.notes.trim()?{notes:d.notes.trim()}:{}};try{let x=await fetch("/api/stages/n/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}),l=await x.json().catch(()=>null);if(x.ok)N({tone:"success",text:s.stageN.success});else{let b=l?.details?.reasonCode,C=l?.error==="cooldown_active"?`${s.cooldown.activeMessage}${b?` (${b})`:""}`:s.stageN.errorRun;N({tone:"error",text:C})}}catch(x){console.error(x),N({tone:"error",text:s.stageN.errorRun})}finally{R(!1),await p()}},[i,a,d,p,s.cooldown,s.stageN]),$=S||c||T,P=[{value:"not_started",label:s.stageN.statuses.notStarted},{value:"in_progress",label:s.stageN.statuses.inProgress},{value:"waiting_on_supplier",label:s.stageN.statuses.waitingOnSupplier},{value:"terms_improved",label:s.stageN.statuses.termsImproved},{value:"no_progress",label:s.stageN.statuses.noProgress}];return(0,e.jsxs)("section",{className:"pp-card p-6",children:[(0,e.jsxs)(_.BJ,{gap:2,children:[(0,e.jsx)("span",{className:"text-xs uppercase tracking-widest text-foreground/60",children:s.stageN.label}),(0,e.jsx)("h2",{className:"text-xl font-semibold tracking-tight",children:s.stageN.title})]}),(0,e.jsx)(Qe,{summary:f,strings:s.stageN,notAvailable:s.notAvailable}),(0,e.jsxs)("form",{className:"mt-4 grid gap-4 md:grid-cols-2",onSubmit:q,children:[(0,e.jsx)(Ze,{form:d,setForm:h,disabled:$,strings:s.stageN,statusOptions:P,onEdit:()=>D(!0)}),(0,e.jsxs)(_.d2,{justify:"between",alignY:"center",className:"gap-3 md:col-span-2",children:[y?(0,e.jsx)("span",{className:y.tone==="success"?"text-xs text-emerald-600":"text-xs text-red-600",children:y.text}):(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:T?s.cooldown.activeMessage:s.stageN.inputHelp}),(0,e.jsx)("button",{className:"min-h-12 min-w-12 rounded-full bg-primary px-4 py-2 text-sm font-semibold text-primary-foreground disabled:cursor-not-allowed disabled:opacity-60",type:"submit",disabled:$,children:s.stageN.runLabel})]})]})]})}function Ke(a){return a.split(/[,\n]/).map(i=>i.trim()).filter(Boolean)}function qe(a,i,r){if(a==null)return r;let c=i?i.toUpperCase():r;return`${a} (${c})`}let st={riskScore:"50",effortScore:"50",riskDrivers:"",effortDrivers:"",notes:""};function at({candidateId:a,candidate:i,stageRuns:r,loading:c,strings:s,onRun:p}){let v=(0,o.useMemo)(()=>r.find(j=>j.stage==="R"),[r]),f=(0,o.useMemo)(()=>function(j){if(!j?.output||typeof j.output!="object")return null;let g=j.output.summary;return g&&typeof g=="object"?g:null}(v),[v]),[d,h]=(0,o.useState)(st),[w,D]=(0,o.useState)(!1),[S,R]=(0,o.useState)(!1),[y,N]=(0,o.useState)(null),T=!!i?.cooldown?.active,q=(0,o.useCallback)(async j=>{j.preventDefault(),N(null),R(!0);let g=Number.parseFloat(d.riskScore),k=Number.parseFloat(d.effortScore);if(!Number.isFinite(g)||!Number.isFinite(k)||g<0||g>100||k<0||k>100){N({tone:"error",text:s.stageR.errorInvalid}),R(!1);return}let m={candidateId:a,riskScore:g,effortScore:k,riskDrivers:Ke(d.riskDrivers),effortDrivers:Ke(d.effortDrivers),...d.notes.trim()?{notes:d.notes.trim()}:{}};try{let x=await fetch("/api/stages/r/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}),l=await x.json().catch(()=>null);if(x.ok)N({tone:"success",text:s.stageR.success});else{let b=l?.details?.reasonCode,C=l?.error==="cooldown_active"?`${s.cooldown.activeMessage}${b?` (${b})`:""}`:s.stageR.errorRun;N({tone:"error",text:C})}}catch(x){console.error(x),N({tone:"error",text:s.stageR.errorRun})}finally{R(!1),await p()}},[a,d.effortDrivers,d.effortScore,d.notes,d.riskDrivers,d.riskScore,p,s.cooldown.activeMessage,s.stageR.errorInvalid,s.stageR.errorRun,s.stageR.success]),$=f?.nextAction??null,P=$==="ADVANCE"?s.stageR.nextActions.advance:$==="REVIEW_RISK"?s.stageR.nextActions.reviewRisk:$==="REVIEW_EFFORT"?s.stageR.nextActions.reviewEffort:$==="NEED_STAGE_K"?s.stageR.nextActions.needStageK:s.notAvailable;return(0,e.jsxs)("section",{className:"pp-card p-6",children:[(0,e.jsxs)(_.BJ,{gap:2,children:[(0,e.jsx)("span",{className:"text-xs uppercase tracking-widest text-foreground/60",children:s.stageR.label}),(0,e.jsx)("h2",{className:"text-xl font-semibold tracking-tight",children:s.stageR.title})]}),f?(0,e.jsxs)(_.xA,{cols:1,gap:3,className:"mt-4 md:grid-cols-4",children:[(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:s.stageR.summaryRisk}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:qe(f.riskScore,f.riskBand,s.notAvailable)})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:s.stageR.summaryEffort}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:qe(f.effortScore,f.effortBand,s.notAvailable)})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:s.stageR.summaryRank}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:f.rankScore!==null&&f.rankScore!==void 0?(0,H.l9)(f.rankScore):s.notAvailable})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:s.stageR.summaryNext}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:P})]})]}):null,(0,e.jsxs)("form",{className:"mt-4 grid gap-4 md:grid-cols-2",onSubmit:q,children:[(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[s.stageR.inputRiskScore,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:d.riskScore,onChange:j=>{h(g=>({...g,riskScore:j.target.value})),D(!0)},disabled:S||T,type:"number",min:0,max:100})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[s.stageR.inputEffortScore,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:d.effortScore,onChange:j=>{h(g=>({...g,effortScore:j.target.value})),D(!0)},disabled:S||T,type:"number",min:0,max:100})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60 md:col-span-2",children:[s.stageR.inputRiskDrivers,(0,e.jsx)("textarea",{className:"mt-2 min-h-24 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:d.riskDrivers,onChange:j=>{h(g=>({...g,riskDrivers:j.target.value})),D(!0)},disabled:S||T})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60 md:col-span-2",children:[s.stageR.inputEffortDrivers,(0,e.jsx)("textarea",{className:"mt-2 min-h-24 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:d.effortDrivers,onChange:j=>{h(g=>({...g,effortDrivers:j.target.value})),D(!0)},disabled:S||T})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60 md:col-span-2",children:[s.stageR.inputNotes,(0,e.jsx)("textarea",{className:"mt-2 min-h-20 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:d.notes,onChange:j=>{h(g=>({...g,notes:j.target.value})),D(!0)},disabled:S||T})]}),(0,e.jsxs)(_.d2,{justify:"between",alignY:"center",className:"gap-3 md:col-span-2",children:[y?(0,e.jsx)("span",{className:y.tone==="success"?"text-xs text-emerald-600":"text-xs text-red-600",children:y.text}):(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:T?s.cooldown.activeMessage:s.stageR.inputHelp}),(0,e.jsx)("button",{className:"min-h-12 min-w-12 rounded-full bg-primary px-4 py-2 text-sm font-semibold text-primary-foreground disabled:cursor-not-allowed disabled:opacity-60",type:"submit",disabled:S||c||T,children:s.stageR.runLabel})]})]})]})}function nt({summary:a,strings:i,notAvailable:r}){if(!a)return null;let c=a.overallRisk??null,s=a.action??null,p=s==="ADVANCE"?i.actions.advance:s==="REVIEW"?i.actions.review:s==="BLOCK"?i.actions.block:r,v=c==="high"?i.riskBands.high:c==="medium"?i.riskBands.medium:c==="low"?i.riskBands.low:r,f=a.matchingConfidence!==null&&a.matchingConfidence!==void 0?`${(0,H.ZV)(a.matchingConfidence)}%`:r,d=a.flaggedCategories?.length&&a.flaggedCategories.length>0?a.flaggedCategories.join(", "):r;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(_.xA,{cols:1,gap:3,className:"mt-4 md:grid-cols-4",children:[(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryOverallRisk}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:v})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryScore}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:a.feasibilityScore??r})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryMatchingConfidence}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:f})]}),(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsx)("div",{className:"text-xs text-foreground/60",children:i.summaryAction}),(0,e.jsx)("div",{className:"mt-1 text-sm font-semibold",children:p})]})]}),(0,e.jsxs)("div",{className:"mt-3 text-xs text-foreground/60",children:[i.summaryFlags,": ",d]})]})}let rt={complianceRisk:"medium",ipRisk:"medium",hazmatRisk:"low",shippingRisk:"medium",listingRisk:"medium",packagingRisk:"medium",matchingConfidence:"60",artifactsRequired:"",notes:""};function it({candidateId:a,candidate:i,stageRuns:r,loading:c,strings:s,onRun:p}){let v=(0,o.useMemo)(()=>r.find(j=>j.stage==="S"),[r]),f=(0,o.useMemo)(()=>function(j){if(!j?.output||typeof j.output!="object")return null;let g=j.output.summary;return g&&typeof g=="object"?g:null}(v),[v]),[d,h]=(0,o.useState)(rt),[w,D]=(0,o.useState)(!1),[S,R]=(0,o.useState)(!1),[y,N]=(0,o.useState)(null),T=!!i?.cooldown?.active,q=(0,o.useCallback)(async j=>{if(j.preventDefault(),!i)return;N(null),R(!0);let g=d.matchingConfidence.trim(),k=g===""?void 0:Number.parseFloat(g);if(k!==void 0&&(!Number.isFinite(k)||k<0||k>100)){N({tone:"error",text:s.stageS.errorInvalid}),R(!1);return}let m={candidateId:a,complianceRisk:d.complianceRisk,ipRisk:d.ipRisk,hazmatRisk:d.hazmatRisk,shippingRisk:d.shippingRisk,listingRisk:d.listingRisk,packagingRisk:d.packagingRisk,...k!==void 0?{matchingConfidence:k}:{}},x=d.artifactsRequired.split(/[,\n]/).map(l=>l.trim()).filter(Boolean);x.length>0&&(m.artifactsRequired=x),d.notes.trim()&&(m.notes=d.notes.trim());try{let l=await fetch("/api/stages/s/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}),b=await l.json().catch(()=>null);if(l.ok)N({tone:"success",text:s.stageS.success});else{let C=b?.details?.reasonCode,L=b?.error==="cooldown_active"?`${s.cooldown.activeMessage}${C?` (${C})`:""}`:s.stageS.errorRun;N({tone:"error",text:L})}}catch(l){console.error(l),N({tone:"error",text:s.stageS.errorRun})}finally{R(!1),await p()}},[i,a,d,p,s.cooldown,s.stageS]),$=[{key:"complianceRisk",label:s.stageS.inputComplianceRisk},{key:"ipRisk",label:s.stageS.inputIpRisk},{key:"hazmatRisk",label:s.stageS.inputHazmatRisk},{key:"shippingRisk",label:s.stageS.inputShippingRisk},{key:"listingRisk",label:s.stageS.inputListingRisk},{key:"packagingRisk",label:s.stageS.inputPackagingRisk}],P=[{value:"low",label:s.stageS.riskBands.low},{value:"medium",label:s.stageS.riskBands.medium},{value:"high",label:s.stageS.riskBands.high}];return(0,e.jsxs)("section",{className:"pp-card p-6",children:[(0,e.jsxs)(_.BJ,{gap:2,children:[(0,e.jsx)("span",{className:"text-xs uppercase tracking-widest text-foreground/60",children:s.stageS.label}),(0,e.jsx)("h2",{className:"text-xl font-semibold tracking-tight",children:s.stageS.title})]}),(0,e.jsx)(nt,{summary:f,strings:s.stageS,notAvailable:s.notAvailable}),(0,e.jsxs)("form",{className:"mt-4 grid gap-4 md:grid-cols-2",onSubmit:q,children:[$.map(j=>(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[j.label,(0,e.jsx)("select",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:d[j.key],onChange:g=>{h(k=>({...k,[j.key]:g.target.value})),D(!0)},disabled:S||T,children:P.map(g=>(0,e.jsx)("option",{value:g.value,children:g.label},g.value))})]},j.key)),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60",children:[s.stageS.inputMatchingConfidence,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:d.matchingConfidence,onChange:j=>{h(g=>({...g,matchingConfidence:j.target.value})),D(!0)},disabled:S||T,type:"number",min:0,max:100})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60 md:col-span-2",children:[s.stageS.inputArtifactsRequired,(0,e.jsx)("input",{className:"mt-2 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:d.artifactsRequired,onChange:j=>{h(g=>({...g,artifactsRequired:j.target.value})),D(!0)},disabled:S||T,type:"text"})]}),(0,e.jsxs)("label",{className:"text-xs uppercase tracking-widest text-foreground/60 md:col-span-2",children:[s.stageS.inputNotes,(0,e.jsx)("textarea",{className:"mt-2 min-h-24 w-full rounded-2xl border border-border-1 bg-surface-2 px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30",value:d.notes,onChange:j=>{h(g=>({...g,notes:j.target.value})),D(!0)},disabled:S||T})]}),(0,e.jsxs)(_.d2,{justify:"between",alignY:"center",className:"gap-3 md:col-span-2",children:[y?(0,e.jsx)("span",{className:y.tone==="success"?"text-xs text-emerald-600":"text-xs text-red-600",children:y.text}):(0,e.jsx)("span",{className:"text-xs text-foreground/60",children:T?s.cooldown.activeMessage:s.stageS.inputHelp}),(0,e.jsx)("button",{className:"min-h-12 min-w-12 rounded-full bg-primary px-4 py-2 text-sm font-semibold text-primary-foreground disabled:cursor-not-allowed disabled:opacity-60",type:"submit",disabled:S||c||T,children:s.stageS.runLabel})]})]})]})}function ct({stageRuns:a,strings:i}){return(0,e.jsxs)("section",{className:"pp-card p-6",children:[(0,e.jsxs)(_.BJ,{gap:2,children:[(0,e.jsx)("span",{className:"text-xs uppercase tracking-widest text-foreground/60",children:i.stageRuns.label}),(0,e.jsx)("h2",{className:"text-xl font-semibold tracking-tight",children:i.stageRuns.title})]}),(0,e.jsx)(_.BJ,{gap:3,className:"mt-4 text-sm",children:a.length===0?(0,e.jsx)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3 text-foreground/60",children:i.notAvailable}):a.map(r=>{var c,s,p,v,f,d;return(0,e.jsxs)("div",{className:"rounded-2xl border border-border-1 bg-surface-2 px-4 py-3",children:[(0,e.jsxs)(_.d2,{justify:"between",alignY:"center",className:"gap-4",children:[(0,e.jsxs)(_.BJ,{gap:1,children:[(0,e.jsxs)("span",{className:"text-xs text-foreground/60",children:[i.stageRuns.stageLabel,": ",r.stage]}),(0,e.jsxs)("span",{className:"text-sm font-semibold",children:[i.stageRuns.statusLabel,": ",r.status]})]}),(0,e.jsxs)("span",{className:"text-xs text-foreground/60",children:[i.stageRuns.createdLabel,":"," ",(c=r.createdAt,s=i.notAvailable,c??s)]})]}),(0,e.jsxs)(_.xA,{cols:1,gap:3,className:"mt-3 md:grid-cols-3",children:[(0,e.jsxs)("div",{className:"text-xs text-foreground/60",children:[i.stageRuns.startedLabel,":"," ",(p=r.startedAt,v=i.notAvailable,p??v)]}),(0,e.jsxs)("div",{className:"text-xs text-foreground/60",children:[i.stageRuns.finishedLabel,":"," ",(f=r.finishedAt,d=i.notAvailable,f??d)]}),(0,e.jsxs)("div",{className:"text-xs text-foreground/60",children:[i.stageRuns.statusLabel,": ",r.status]})]}),(0,e.jsxs)(_.xA,{cols:1,gap:3,className:"mt-3 md:grid-cols-3",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-xs uppercase tracking-widest text-foreground/60",children:i.stageRuns.inputLabel}),(0,e.jsx)("pre",{className:"mt-2 max-h-40 overflow-auto whitespace-pre-wrap break-words rounded-xl bg-surface-1 p-3 text-xs text-foreground/70",children:G(r.input)||i.notAvailable})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-xs uppercase tracking-widest text-foreground/60",children:i.stageRuns.outputLabel}),(0,e.jsx)("pre",{className:"mt-2 max-h-40 overflow-auto whitespace-pre-wrap break-words rounded-xl bg-surface-1 p-3 text-xs text-foreground/70",children:G(r.output)||i.notAvailable})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-xs uppercase tracking-widest text-foreground/60",children:i.stageRuns.errorLabel}),(0,e.jsx)("pre",{className:"mt-2 max-h-40 overflow-auto whitespace-pre-wrap break-words rounded-xl bg-surface-1 p-3 text-xs text-foreground/70",children:G(r.error)||i.notAvailable})]})]})]},r.id)})})]})}function ot({candidateId:a,strings:i}){let[r,c]=(0,o.useState)(null),[s,p]=(0,o.useState)([]),[v,f]=(0,o.useState)([]),[d,h]=(0,o.useState)(!0),w=(0,o.useCallback)(async()=>{h(!0);try{let D=await fetch(`/api/candidates/${a}`);if(!D.ok)return;let S=await D.json();S.ok&&S.candidate&&(c(S.candidate),p(S.stageRuns??[]),f(S.artifacts??[]))}catch(D){console.error(D)}finally{h(!1)}},[a]);return(0,e.jsxs)(_.BJ,{gap:6,children:[(0,e.jsxs)(_.xA,{cols:1,gap:4,className:"md:grid-cols-2",children:[(0,e.jsx)(Q,{candidate:r,strings:i}),(0,e.jsx)(t,{candidate:r,strings:i})]}),(0,e.jsx)(Xe,{candidateId:a,candidate:r,stageRuns:s,loading:d,strings:i,onQueued:w}),(0,e.jsx)(Re,{candidateId:a,candidate:r,stageRuns:s,loading:d,strings:i,onRun:w}),(0,e.jsx)(it,{candidateId:a,candidate:r,stageRuns:s,loading:d,strings:i,onRun:w}),(0,e.jsx)(tt,{candidateId:a,candidate:r,stageRuns:s,loading:d,strings:i,onRun:w}),(0,e.jsx)(Ge,{candidateId:a,candidate:r,stageRuns:s,loading:d,strings:i,onRun:w}),(0,e.jsx)(J,{candidateId:a,candidate:r,stageRuns:s,loading:d,strings:i,onRun:w}),(0,e.jsx)(le,{candidateId:a,candidate:r,stageRuns:s,loading:d,strings:i,onRun:w}),(0,e.jsx)(We,{candidateId:a,candidate:r,stageRuns:s,loading:d,strings:i,onRun:w}),(0,e.jsx)(at,{candidateId:a,candidate:r,stageRuns:s,loading:d,strings:i,onRun:w}),(0,e.jsx)(ae,{candidateId:a,candidate:r,loading:d,strings:i,onUpdated:w}),(0,e.jsx)(ct,{stageRuns:s,strings:i}),(0,e.jsx)(z,{candidateId:a,stageRuns:s,loading:d,strings:i,onUploaded:w}),(0,e.jsx)(Y,{artifacts:v,strings:i})]})}},7107:(ee,W,u)=>{"use strict";u.d(W,{default:()=>e});let e=(0,u(6124).YR)(function(){throw Error(`Attempted to call the default export of "/Users/petercowling/base-shop/apps/product-pipeline/src/app/candidates/[id]/CandidateDetailClient.tsx" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.`)},"/Users/petercowling/base-shop/apps/product-pipeline/src/app/candidates/[id]/CandidateDetailClient.tsx","default")},7893:(ee,W,u)=>{"use strict";u.r(W),u.d(W,{default:()=>Q,runtime:()=>z});var e=u(7652),o=u(1018),_=u(5003),G=u(5658),Y=u(7107);let z="edge";async function Q({params:te}){let ae=await te,t=await(0,_.c)("en"),H={overview:{label:t("pipeline.candidate.section.overview.label"),title:t("pipeline.candidate.section.overview.title")},lead:{label:t("pipeline.candidate.section.lead.label"),title:t("pipeline.candidate.section.lead.title")},stageM:{label:t("pipeline.candidate.section.stageM.label"),title:t("pipeline.candidate.section.stageM.title"),runLabel:t("pipeline.candidate.stageM.run"),kindLabel:t("pipeline.candidate.stageM.kind.label"),kindAmazonSearch:t("pipeline.candidate.stageM.kind.amazonSearch"),kindAmazonListing:t("pipeline.candidate.stageM.kind.amazonListing"),kindTaobaoListing:t("pipeline.candidate.stageM.kind.taobaoListing"),captureModeLabel:t("pipeline.candidate.stageM.captureMode.label"),captureModeQueue:t("pipeline.candidate.stageM.captureMode.queue"),captureModeRunner:t("pipeline.candidate.stageM.captureMode.runner"),captureProfileLabel:t("pipeline.candidate.stageM.captureProfile.label"),captureProfileHelp:t("pipeline.candidate.stageM.captureProfile.help"),captureProfilePlaceholder:t("pipeline.candidate.stageM.captureProfile.placeholder"),captureProfileErrorRequired:t("pipeline.candidate.stageM.captureProfile.errorRequired"),captureProfileErrorInvalid:t("pipeline.candidate.stageM.captureProfile.errorInvalid"),captureProfileErrorNotAllowed:t("pipeline.candidate.stageM.captureProfile.errorNotAllowed"),runnerStatusLabel:t("pipeline.candidate.stageM.runnerStatus.label"),runnerStatusChecking:t("pipeline.candidate.stageM.runnerStatus.checking"),runnerStatusUnknown:t("pipeline.candidate.stageM.runnerStatus.unknown"),runnerStatusReady:t("pipeline.candidate.stageM.runnerStatus.ready"),runnerStatusStale:t("pipeline.candidate.stageM.runnerStatus.stale"),runnerStatusLastSeen:t("pipeline.candidate.stageM.runnerStatus.lastSeen"),runnerStatusMode:t("pipeline.candidate.stageM.runnerStatus.mode"),runnerStatusBrowser:t("pipeline.candidate.stageM.runnerStatus.browser"),runnerStatusSession:t("pipeline.candidate.stageM.runnerStatus.session"),marketplaceLabel:t("pipeline.candidate.stageM.marketplace"),queryLabel:t("pipeline.candidate.stageM.query"),urlLabel:t("pipeline.candidate.stageM.url"),maxResultsLabel:t("pipeline.candidate.stageM.maxResults"),readyLabel:t("pipeline.candidate.stageM.ready"),queueingLabel:t("pipeline.candidate.stageM.queueing"),successMessage:t("pipeline.candidate.stageM.success"),errorMessage:t("pipeline.candidate.stageM.error"),budgetMessage:t("pipeline.candidate.stageM.budgetExceeded"),summaryContext:t("pipeline.candidate.stageM.summary.context"),summaryGeneratedAt:t("pipeline.candidate.stageM.summary.generatedAt"),summaryPriceRange:t("pipeline.candidate.stageM.summary.priceRange"),summaryMedianPrice:t("pipeline.candidate.stageM.summary.medianPrice"),summaryReviewMedian:t("pipeline.candidate.stageM.summary.reviewMedian"),summarySponsoredShare:t("pipeline.candidate.stageM.summary.sponsoredShare"),summarySampleCount:t("pipeline.candidate.stageM.summary.sampleCount"),summaryCapture:t("pipeline.candidate.stageM.summary.capture"),summaryCaptureMode:t("pipeline.candidate.stageM.summary.captureMode"),summaryHeadless:t("pipeline.candidate.stageM.summary.headless"),summaryHeadlessOn:t("pipeline.candidate.stageM.summary.headlessOn"),summaryHeadlessOff:t("pipeline.candidate.stageM.summary.headlessOff"),summaryHumanGate:t("pipeline.candidate.stageM.summary.humanGate"),summaryHumanGateOn:t("pipeline.candidate.stageM.summary.humanGateOn"),summaryHumanGateOff:t("pipeline.candidate.stageM.summary.humanGateOff"),summaryHumanGateAccepted:t("pipeline.candidate.stageM.summary.humanGateAccepted"),summaryHumanGateDeclined:t("pipeline.candidate.stageM.summary.humanGateDeclined"),summaryPlaybook:t("pipeline.candidate.stageM.summary.playbook"),summarySession:t("pipeline.candidate.stageM.summary.session"),summaryDuration:t("pipeline.candidate.stageM.summary.duration")},stageA:{label:t("pipeline.candidate.section.stageA.label"),title:t("pipeline.candidate.section.stageA.title"),runLabel:t("pipeline.candidate.stageA.run"),inputSalePrice:t("pipeline.candidate.stageA.inputs.salePrice"),inputUnitCost:t("pipeline.candidate.stageA.inputs.unitCost"),inputShipping:t("pipeline.candidate.stageA.inputs.shipping"),inputFeesPct:t("pipeline.candidate.stageA.inputs.feesPct"),inputTargetMarginPct:t("pipeline.candidate.stageA.inputs.targetMarginPct"),inputNotes:t("pipeline.candidate.stageA.inputs.notes"),inputHelp:t("pipeline.candidate.stageA.inputHelp"),success:t("pipeline.candidate.stageA.success"),errorInvalid:t("pipeline.candidate.stageA.errorInvalid"),errorRun:t("pipeline.candidate.stageA.errorRun"),summaryMargin:t("pipeline.candidate.stageA.summary.margin"),summaryNetPerUnit:t("pipeline.candidate.stageA.summary.netPerUnit"),summaryAction:t("pipeline.candidate.stageA.summary.action"),summaryThreshold:t("pipeline.candidate.stageA.summary.threshold"),actions:{advance:t("pipeline.candidate.stageA.actions.advance"),review:t("pipeline.candidate.stageA.actions.review"),reject:t("pipeline.candidate.stageA.actions.reject")}},stageK:{label:t("pipeline.candidate.section.stageK.label"),title:t("pipeline.candidate.section.stageK.title"),runLabel:t("pipeline.candidate.stageK.run"),inputLabel:t("pipeline.candidate.stageK.input"),inputHelp:t("pipeline.candidate.stageK.inputHelp"),composeLabel:t("pipeline.candidate.stageK.compose"),composeHelp:t("pipeline.candidate.stageK.composeHelp"),composeSuccess:t("pipeline.candidate.stageK.composeSuccess"),composeError:t("pipeline.candidate.stageK.composeError"),composeMissingStageB:t("pipeline.candidate.stageK.composeMissingStageB"),composeMissingStageC:t("pipeline.candidate.stageK.composeMissingStageC"),success:t("pipeline.candidate.stageK.success"),errorInvalidJson:t("pipeline.candidate.stageK.errorInvalidJson"),errorRun:t("pipeline.candidate.stageK.errorRun"),summaryPeakCash:t("pipeline.candidate.stageK.summary.peakCash"),summaryPayback:t("pipeline.candidate.stageK.summary.payback"),summaryReturn:t("pipeline.candidate.stageK.summary.return"),laneCompare:{label:t("pipeline.candidate.stageK.laneCompare.label"),title:t("pipeline.candidate.stageK.laneCompare.title"),selectLabel:t("pipeline.candidate.stageK.laneCompare.selectLabel"),help:t("pipeline.candidate.stageK.laneCompare.help"),compareLabel:t("pipeline.candidate.stageK.laneCompare.compareLabel"),successCompare:t("pipeline.candidate.stageK.laneCompare.successCompare"),errorLoad:t("pipeline.candidate.stageK.laneCompare.errorLoad"),errorCompare:t("pipeline.candidate.stageK.laneCompare.errorCompare"),empty:t("pipeline.candidate.stageK.laneCompare.empty"),noLanes:t("pipeline.candidate.stageK.laneCompare.noLanes"),loading:t("pipeline.candidate.stageK.laneCompare.loading"),baseLabel:t("pipeline.candidate.stageK.laneCompare.baseLabel"),baseLaneLabel:t("pipeline.candidate.stageK.laneCompare.baseLaneLabel"),resultsLabel:t("pipeline.candidate.stageK.laneCompare.resultsLabel"),summaryPeakCash:t("pipeline.candidate.stageK.laneCompare.summaryPeakCash"),summaryPayback:t("pipeline.candidate.stageK.laneCompare.summaryPayback"),summaryReturn:t("pipeline.candidate.stageK.laneCompare.summaryReturn"),warningExpired:t("pipeline.candidate.stageK.laneCompare.warningExpired"),warningExpiring:t("pipeline.candidate.stageK.laneCompare.warningExpiring"),warningLowConfidence:t("pipeline.candidate.stageK.laneCompare.warningLowConfidence"),warningBasis:t("pipeline.candidate.stageK.laneCompare.warningBasis"),warningMissingCost:t("pipeline.candidate.stageK.laneCompare.warningMissingCost"),warningMissingLeadTime:t("pipeline.candidate.stageK.laneCompare.warningMissingLeadTime")}},stageS:{label:t("pipeline.candidate.section.stageS.label"),title:t("pipeline.candidate.section.stageS.title"),runLabel:t("pipeline.candidate.stageS.run"),inputComplianceRisk:t("pipeline.candidate.stageS.inputs.complianceRisk"),inputIpRisk:t("pipeline.candidate.stageS.inputs.ipRisk"),inputHazmatRisk:t("pipeline.candidate.stageS.inputs.hazmatRisk"),inputShippingRisk:t("pipeline.candidate.stageS.inputs.shippingRisk"),inputListingRisk:t("pipeline.candidate.stageS.inputs.listingRisk"),inputPackagingRisk:t("pipeline.candidate.stageS.inputs.packagingRisk"),inputMatchingConfidence:t("pipeline.candidate.stageS.inputs.matching"),inputArtifactsRequired:t("pipeline.candidate.stageS.inputs.artifacts"),inputNotes:t("pipeline.candidate.stageS.inputs.notes"),inputHelp:t("pipeline.candidate.stageS.inputHelp"),success:t("pipeline.candidate.stageS.success"),errorInvalid:t("pipeline.candidate.stageS.errorInvalid"),errorRun:t("pipeline.candidate.stageS.errorRun"),summaryOverallRisk:t("pipeline.candidate.stageS.summary.overallRisk"),summaryAction:t("pipeline.candidate.stageS.summary.action"),summaryScore:t("pipeline.candidate.stageS.summary.score"),summaryMatchingConfidence:t("pipeline.candidate.stageS.summary.matching"),summaryFlags:t("pipeline.candidate.stageS.summary.flags"),riskBands:{low:t("pipeline.candidate.stageS.riskBands.low"),medium:t("pipeline.candidate.stageS.riskBands.medium"),high:t("pipeline.candidate.stageS.riskBands.high")},actions:{advance:t("pipeline.candidate.stageS.actions.advance"),review:t("pipeline.candidate.stageS.actions.review"),block:t("pipeline.candidate.stageS.actions.block")}},stageN:{label:t("pipeline.candidate.section.stageN.label"),title:t("pipeline.candidate.section.stageN.title"),runLabel:t("pipeline.candidate.stageN.run"),inputStatus:t("pipeline.candidate.stageN.inputs.status"),inputSupplier:t("pipeline.candidate.stageN.inputs.supplier"),inputTargetUnitCost:t("pipeline.candidate.stageN.inputs.targetUnitCost"),inputTargetMoq:t("pipeline.candidate.stageN.inputs.targetMoq"),inputTargetLeadTime:t("pipeline.candidate.stageN.inputs.targetLeadTime"),inputTargetDepositPct:t("pipeline.candidate.stageN.inputs.targetDepositPct"),inputTargetPaymentTerms:t("pipeline.candidate.stageN.inputs.targetPaymentTerms"),inputTargetIncoterms:t("pipeline.candidate.stageN.inputs.targetIncoterms"),inputTasks:t("pipeline.candidate.stageN.inputs.tasks"),inputNotes:t("pipeline.candidate.stageN.inputs.notes"),inputHelp:t("pipeline.candidate.stageN.inputHelp"),success:t("pipeline.candidate.stageN.success"),errorInvalid:t("pipeline.candidate.stageN.errorInvalid"),errorRun:t("pipeline.candidate.stageN.errorRun"),summaryStatus:t("pipeline.candidate.stageN.summary.status"),summarySupplier:t("pipeline.candidate.stageN.summary.supplier"),summaryTargetUnitCost:t("pipeline.candidate.stageN.summary.targetUnitCost"),summaryTargetMoq:t("pipeline.candidate.stageN.summary.targetMoq"),summaryLeadTime:t("pipeline.candidate.stageN.summary.leadTime"),summaryDeposit:t("pipeline.candidate.stageN.summary.deposit"),summaryPaymentTerms:t("pipeline.candidate.stageN.summary.paymentTerms"),summaryIncoterms:t("pipeline.candidate.stageN.summary.incoterms"),summaryTasks:t("pipeline.candidate.stageN.summary.tasks"),summaryTasksEmpty:t("pipeline.candidate.stageN.summary.tasksEmpty"),statuses:{notStarted:t("pipeline.candidate.stageN.statuses.notStarted"),inProgress:t("pipeline.candidate.stageN.statuses.inProgress"),waitingOnSupplier:t("pipeline.candidate.stageN.statuses.waitingOnSupplier"),termsImproved:t("pipeline.candidate.stageN.statuses.termsImproved"),noProgress:t("pipeline.candidate.stageN.statuses.noProgress")}},stageD:{label:t("pipeline.candidate.section.stageD.label"),title:t("pipeline.candidate.section.stageD.title"),runLabel:t("pipeline.candidate.stageD.run"),inputAssetReadiness:t("pipeline.candidate.stageD.inputs.assetReadiness"),inputOneTimeCost:t("pipeline.candidate.stageD.inputs.oneTimeCost"),inputSamplingRounds:t("pipeline.candidate.stageD.inputs.samplingRounds"),inputLeadTime:t("pipeline.candidate.stageD.inputs.leadTime"),inputPackagingStatus:t("pipeline.candidate.stageD.inputs.packagingStatus"),inputNotes:t("pipeline.candidate.stageD.inputs.notes"),inputHelp:t("pipeline.candidate.stageD.inputHelp"),success:t("pipeline.candidate.stageD.success"),errorInvalid:t("pipeline.candidate.stageD.errorInvalid"),errorRun:t("pipeline.candidate.stageD.errorRun"),summaryAssetReadiness:t("pipeline.candidate.stageD.summary.assetReadiness"),summaryOneTimeCost:t("pipeline.candidate.stageD.summary.oneTimeCost"),summaryLeadTime:t("pipeline.candidate.stageD.summary.leadTime"),summarySamplingRounds:t("pipeline.candidate.stageD.summary.samplingRounds"),summaryPackagingStatus:t("pipeline.candidate.stageD.summary.packagingStatus"),assetReadiness:{notStarted:t("pipeline.candidate.stageD.assetReadiness.notStarted"),inProgress:t("pipeline.candidate.stageD.assetReadiness.inProgress"),ready:t("pipeline.candidate.stageD.assetReadiness.ready")}},stageB:{label:t("pipeline.candidate.section.stageB.label"),title:t("pipeline.candidate.section.stageB.title"),runLabel:t("pipeline.candidate.stageB.run"),inputUnitsPlanned:t("pipeline.candidate.stageB.inputs.unitsPlanned"),inputUnitCost:t("pipeline.candidate.stageB.inputs.unitCost"),inputFreight:t("pipeline.candidate.stageB.inputs.freight"),inputDuty:t("pipeline.candidate.stageB.inputs.duty"),inputVat:t("pipeline.candidate.stageB.inputs.vat"),inputPackaging:t("pipeline.candidate.stageB.inputs.packaging"),inputInspection:t("pipeline.candidate.stageB.inputs.inspection"),inputOther:t("pipeline.candidate.stageB.inputs.other"),inputLeadTime:t("pipeline.candidate.stageB.inputs.leadTimeDays"),inputDepositPct:t("pipeline.candidate.stageB.inputs.depositPct"),inputBalanceDueDays:t("pipeline.candidate.stageB.inputs.balanceDueDays"),inputIncoterms:t("pipeline.candidate.stageB.inputs.incoterms"),inputNotes:t("pipeline.candidate.stageB.inputs.notes"),inputHelp:t("pipeline.candidate.stageB.inputHelp"),success:t("pipeline.candidate.stageB.success"),errorInvalid:t("pipeline.candidate.stageB.errorInvalid"),errorRun:t("pipeline.candidate.stageB.errorRun"),summaryUnitCost:t("pipeline.candidate.stageB.summary.unitCost"),summaryTotalCost:t("pipeline.candidate.stageB.summary.totalCost"),summaryDeposit:t("pipeline.candidate.stageB.summary.deposit"),summaryBalance:t("pipeline.candidate.stageB.summary.balance"),summaryLeadTime:t("pipeline.candidate.stageB.summary.leadTime"),lane:{label:t("pipeline.candidate.stageB.lane.label"),title:t("pipeline.candidate.stageB.lane.title"),selectLabel:t("pipeline.candidate.stageB.lane.selectLabel"),selectPlaceholder:t("pipeline.candidate.stageB.lane.selectPlaceholder"),applyLabel:t("pipeline.candidate.stageB.lane.applyLabel"),appliedLabel:t("pipeline.candidate.stageB.lane.appliedLabel"),appliedEmpty:t("pipeline.candidate.stageB.lane.appliedEmpty"),help:t("pipeline.candidate.stageB.lane.help"),loading:t("pipeline.candidate.stageB.lane.loading"),empty:t("pipeline.candidate.stageB.lane.empty"),warningExpired:t("pipeline.candidate.stageB.lane.warningExpired"),warningExpiring:t("pipeline.candidate.stageB.lane.warningExpiring"),warningBasis:t("pipeline.candidate.stageB.lane.warningBasis"),warningLowConfidence:t("pipeline.candidate.stageB.lane.warningLowConfidence"),errorLoad:t("pipeline.candidate.stageB.lane.errorLoad"),errorApply:t("pipeline.candidate.stageB.lane.errorApply"),successApply:t("pipeline.candidate.stageB.lane.successApply")},guidance:{label:t("pipeline.candidate.stageB.guidance.label"),title:t("pipeline.candidate.stageB.guidance.title"),glossaryLabel:t("pipeline.candidate.stageB.guidance.glossaryLabel"),glossaryFba:t("pipeline.candidate.stageB.guidance.glossaryFba"),glossaryIncoterms:t("pipeline.candidate.stageB.guidance.glossaryIncoterms"),costTimingLabel:t("pipeline.candidate.stageB.guidance.costTimingLabel"),costTimingText:t("pipeline.candidate.stageB.guidance.costTimingText"),confidenceLabel:t("pipeline.candidate.stageB.guidance.confidenceLabel"),confidenceText:t("pipeline.candidate.stageB.guidance.confidenceText")}},stageC:{label:t("pipeline.candidate.section.stageC.label"),title:t("pipeline.candidate.section.stageC.title"),runLabel:t("pipeline.candidate.stageC.run"),inputSalePrice:t("pipeline.candidate.stageC.inputs.salePrice"),inputPlatformFeePct:t("pipeline.candidate.stageC.inputs.platformFeePct"),inputFulfillment:t("pipeline.candidate.stageC.inputs.fulfillment"),inputStorage:t("pipeline.candidate.stageC.inputs.storage"),inputAdvertising:t("pipeline.candidate.stageC.inputs.advertising"),inputOtherFees:t("pipeline.candidate.stageC.inputs.otherFees"),inputReturnRatePct:t("pipeline.candidate.stageC.inputs.returnRatePct"),inputPayoutDelay:t("pipeline.candidate.stageC.inputs.payoutDelayDays"),inputUnitsPlanned:t("pipeline.candidate.stageC.inputs.unitsPlanned"),inputNotes:t("pipeline.candidate.stageC.inputs.notes"),inputHelp:t("pipeline.candidate.stageC.inputHelp"),success:t("pipeline.candidate.stageC.success"),errorInvalid:t("pipeline.candidate.stageC.errorInvalid"),errorRun:t("pipeline.candidate.stageC.errorRun"),summaryNetRevenue:t("pipeline.candidate.stageC.summary.netRevenue"),summaryContribution:t("pipeline.candidate.stageC.summary.contribution"),summaryMargin:t("pipeline.candidate.stageC.summary.margin"),summaryPayoutDelay:t("pipeline.candidate.stageC.summary.payoutDelay"),summaryTotalContribution:t("pipeline.candidate.stageC.summary.totalContribution")},stageR:{label:t("pipeline.candidate.section.stageR.label"),title:t("pipeline.candidate.section.stageR.title"),runLabel:t("pipeline.candidate.stageR.run"),inputRiskScore:t("pipeline.candidate.stageR.inputs.riskScore"),inputEffortScore:t("pipeline.candidate.stageR.inputs.effortScore"),inputRiskDrivers:t("pipeline.candidate.stageR.inputs.riskDrivers"),inputEffortDrivers:t("pipeline.candidate.stageR.inputs.effortDrivers"),inputNotes:t("pipeline.candidate.stageR.inputs.notes"),inputHelp:t("pipeline.candidate.stageR.inputHelp"),success:t("pipeline.candidate.stageR.success"),errorInvalid:t("pipeline.candidate.stageR.errorInvalid"),errorRun:t("pipeline.candidate.stageR.errorRun"),summaryRisk:t("pipeline.candidate.stageR.summary.risk"),summaryEffort:t("pipeline.candidate.stageR.summary.effort"),summaryRank:t("pipeline.candidate.stageR.summary.rank"),summaryNext:t("pipeline.candidate.stageR.summary.next"),nextActions:{advance:t("pipeline.candidate.stageR.nextActions.advance"),reviewRisk:t("pipeline.candidate.stageR.nextActions.reviewRisk"),reviewEffort:t("pipeline.candidate.stageR.nextActions.reviewEffort"),needStageK:t("pipeline.candidate.stageR.nextActions.needStageK")}},stageRuns:{label:t("pipeline.candidate.section.stageRuns.label"),title:t("pipeline.candidate.section.stageRuns.title"),stageLabel:t("pipeline.candidate.stageRuns.stage"),statusLabel:t("pipeline.candidate.stageRuns.status"),createdLabel:t("pipeline.candidate.stageRuns.created"),startedLabel:t("pipeline.candidate.stageRuns.started"),finishedLabel:t("pipeline.candidate.stageRuns.finished"),inputLabel:t("pipeline.candidate.stageRuns.input"),outputLabel:t("pipeline.candidate.stageRuns.output"),errorLabel:t("pipeline.candidate.stageRuns.error")},artifacts:{label:t("pipeline.candidate.section.artifacts.label"),title:t("pipeline.candidate.section.artifacts.title"),kindLabel:t("pipeline.candidate.artifacts.kind"),kindSnapshotHtml:t("pipeline.candidate.artifacts.kind.snapshotHtml"),kindSnapshotPng:t("pipeline.candidate.artifacts.kind.snapshotPng"),uriLabel:t("pipeline.candidate.artifacts.uri"),createdLabel:t("pipeline.candidate.artifacts.created"),openLabel:t("pipeline.candidate.artifacts.open")},artifactUpload:{label:t("pipeline.candidate.artifactUpload.label"),title:t("pipeline.candidate.artifactUpload.title"),stageRunLabel:t("pipeline.candidate.artifactUpload.stageRun"),kindLabel:t("pipeline.candidate.artifactUpload.kind"),fileLabel:t("pipeline.candidate.artifactUpload.file"),submitLabel:t("pipeline.candidate.artifactUpload.submit"),loadingRuns:t("pipeline.candidate.artifactUpload.loadingRuns"),emptyRuns:t("pipeline.candidate.artifactUpload.emptyRuns"),successMessage:t("pipeline.candidate.artifactUpload.success"),errorMessage:t("pipeline.candidate.artifactUpload.error")},cooldown:{label:t("pipeline.candidate.section.cooldown.label"),title:t("pipeline.candidate.section.cooldown.title"),activeLabel:t("pipeline.candidate.cooldown.active"),noneLabel:t("pipeline.candidate.cooldown.none"),noneMessage:t("pipeline.candidate.cooldown.noneMessage"),reasonLabel:t("pipeline.candidate.cooldown.reason"),severityLabel:t("pipeline.candidate.cooldown.severity"),recheckLabel:t("pipeline.candidate.cooldown.recheck"),whatWouldChangeLabel:t("pipeline.candidate.cooldown.whatWouldChange"),submitLabel:t("pipeline.candidate.cooldown.submit"),successMessage:t("pipeline.candidate.cooldown.success"),errorMessage:t("pipeline.candidate.cooldown.error"),severityShort:t("pipeline.candidate.cooldown.severity.short"),severityLong:t("pipeline.candidate.cooldown.severity.long"),severityPermanent:t("pipeline.candidate.cooldown.severity.permanent"),activeMessage:t("pipeline.candidate.cooldown.activeMessage")},fields:{candidateId:t("pipeline.candidate.fields.candidateId"),stageStatus:t("pipeline.candidate.fields.stageStatus"),decision:t("pipeline.candidate.fields.decision"),decisionReason:t("pipeline.candidate.fields.decisionReason"),leadTitle:t("pipeline.candidate.fields.leadTitle"),leadSource:t("pipeline.candidate.fields.leadSource"),leadUrl:t("pipeline.candidate.fields.leadUrl"),leadStatus:t("pipeline.candidate.fields.leadStatus")},notAvailable:t("pipeline.common.notAvailable")};return(0,e.jsxs)(G.BJ,{gap:6,children:[(0,e.jsx)(o.A,{badge:t("pipeline.candidate.badge"),title:t("pipeline.candidate.title"),subtitle:t("pipeline.candidate.subtitle")}),(0,e.jsx)(Y.default,{candidateId:ae.id,strings:H})]})}}},ee=>{var W=e=>ee(ee.s=e);ee.O(0,[7,202,101,292],()=>W(176));var u=ee.O();(V._ENTRIES=typeof V._ENTRIES>"u"?{}:V._ENTRIES)["middleware_app/candidates/[id]/page"]=u}]),function(){let ee={exports:{},loaded:!1};return function(u,e){var o=Object.create,_=Object.defineProperty,G=Object.getOwnPropertyDescriptor,Y=Object.getOwnPropertyNames,z=Object.getPrototypeOf,Q=Object.prototype.hasOwnProperty,te=M=>_(M,"__esModule",{value:!0}),ae=(M,J)=>{te(M);for(var I in J)_(M,I,{get:J[I],enumerable:!0})},t=(M,J,I)=>{if(J&&typeof J=="object"||typeof J=="function")for(let B of Y(J))!Q.call(M,B)&&B!=="default"&&_(M,B,{get:()=>J[B],enumerable:!(I=G(J,B))||I.enumerable});return M},H=M=>t(te(_(M!=null?o(z(M)):{},"default",M&&M.__esModule&&"default"in M?{get:()=>M.default,enumerable:!0}:{value:M,enumerable:!0})),M);ae(e,{default:()=>ye});var fe=H((Je(),mt(Ae))),be="@next/request-context",ke=Symbol.for(be),me=Symbol.for("internal.storage");function je(){let M=V;if(!M[ke]){let J=new fe.AsyncLocalStorage,I={get:()=>J.getStore(),[me]:J};M[ke]=I}return M[ke]}var Re=je();function _e(M,J){return Re[me].run(M,J)}function Me(M){let J={};return M&&M.forEach((I,B)=>{J[B]=I,B.toLowerCase()==="set-cookie"&&(J[B]=he(I))}),J}function he(M){let J=[],I=0,B,oe,ne,ce,ue;function le(){for(;I<M.length&&/\s/.test(M.charAt(I));)I+=1;return I<M.length}function pe(){return oe=M.charAt(I),oe!=="="&&oe!==";"&&oe!==","}for(;I<M.length;){for(B=I,ue=!1;le();)if(oe=M.charAt(I),oe===","){for(ne=I,I+=1,le(),ce=I;I<M.length&&pe();)I+=1;I<M.length&&M.charAt(I)==="="?(ue=!0,I=ce,J.push(M.substring(B,ne)),B=I):I=ne+1}else I+=1;(!ue||I>=M.length)&&J.push(M.substring(B,M.length))}return J}function ye(M){let J=M.staticRoutes.map(B=>({regexp:new RegExp(B.namedRegex),page:B.page})),I=M.dynamicRoutes?.map(B=>({regexp:new RegExp(B.namedRegex),page:B.page}))||[];return async function(B,oe){let ne=new URL(B.url).pathname,ce={};if(M.nextConfig?.basePath&&ne.startsWith(M.nextConfig.basePath)&&(ne=ne.replace(M.nextConfig.basePath,"")||"/"),M.nextConfig?.i18n)for(let le of M.nextConfig.i18n.locales){let pe=new RegExp(`^/${le}($|/)`,"i");if(ne.match(pe)){ne=ne.replace(pe,"/")||"/";break}}for(let le of J)if(le.regexp.exec(ne)){ce.name=le.page;break}if(!ce.name){let le=Ne(ne);for(let pe of I||[]){if(le&&!Ne(pe.page))continue;let Le=pe.regexp.exec(ne);if(Le){ce={name:pe.page,params:Le.groups};break}}}let ue=await _e({waitUntil:oe.waitUntil},()=>V._ENTRIES[`middleware_${M.name}`].default.call({},{request:{url:B.url,method:B.method,headers:Me(B.headers),ip:ie(B.headers,se.Ip),geo:{city:ie(B.headers,se.City,!0),country:ie(B.headers,se.Country,!0),latitude:ie(B.headers,se.Latitude),longitude:ie(B.headers,se.Longitude),region:ie(B.headers,se.Region,!0)},nextConfig:M.nextConfig,page:ce,body:B.body}}));return ue.waitUntil&&oe.waitUntil(ue.waitUntil),ue.response}}function ie(M,J,I=!1){let B=M.get(J)||void 0;return I&&B?decodeURIComponent(B):B}function Ne(M){return M==="/api"||M.startsWith("/api/")}var se;(function(M){M.City="x-vercel-ip-city",M.Country="x-vercel-ip-country",M.Ip="x-real-ip",M.Latitude="x-vercel-ip-latitude",M.Longitude="x-vercel-ip-longitude",M.Region="x-vercel-ip-country-region"})(se||(se={}))}(ee,ee.exports),ee.exports}.call({}).default({name:"app/candidates/[id]/page",staticRoutes:[{page:"/",regex:"^/(?:/)?$",routeKeys:{},namedRegex:"^/(?:/)?$"},{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"},{page:"/activity",regex:"^/activity(?:/)?$",routeKeys:{},namedRegex:"^/activity(?:/)?$"},{page:"/artifacts",regex:"^/artifacts(?:/)?$",routeKeys:{},namedRegex:"^/artifacts(?:/)?$"},{page:"/candidates",regex:"^/candidates(?:/)?$",routeKeys:{},namedRegex:"^/candidates(?:/)?$"},{page:"/launches",regex:"^/launches(?:/)?$",routeKeys:{},namedRegex:"^/launches(?:/)?$"},{page:"/leads",regex:"^/leads(?:/)?$",routeKeys:{},namedRegex:"^/leads(?:/)?$"},{page:"/leads/triage",regex:"^/leads/triage(?:/)?$",routeKeys:{},namedRegex:"^/leads/triage(?:/)?$"},{page:"/logistics/lanes",regex:"^/logistics/lanes(?:/)?$",routeKeys:{},namedRegex:"^/logistics/lanes(?:/)?$"},{page:"/logistics/quote-baskets",regex:"^/logistics/quote\\-baskets(?:/)?$",routeKeys:{},namedRegex:"^/logistics/quote\\-baskets(?:/)?$"},{page:"/portfolio",regex:"^/portfolio(?:/)?$",routeKeys:{},namedRegex:"^/portfolio(?:/)?$"},{page:"/scenario-lab",regex:"^/scenario\\-lab(?:/)?$",routeKeys:{},namedRegex:"^/scenario\\-lab(?:/)?$"},{page:"/suppliers",regex:"^/suppliers(?:/)?$",routeKeys:{},namedRegex:"^/suppliers(?:/)?$"}],dynamicRoutes:[{page:"/api/candidates/[id]",regex:"^/api/candidates/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/candidates/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/leads/[id]",regex:"^/api/leads/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/leads/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/logistics/lane-versions/[id]",regex:"^/api/logistics/lane\\-versions/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/logistics/lane\\-versions/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/logistics/lane-versions/[id]/actuals",regex:"^/api/logistics/lane\\-versions/([^/]+?)/actuals(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/logistics/lane\\-versions/(?<nxtPid>[^/]+?)/actuals(?:/)?$"},{page:"/api/logistics/lane-versions/[id]/evidence",regex:"^/api/logistics/lane\\-versions/([^/]+?)/evidence(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/logistics/lane\\-versions/(?<nxtPid>[^/]+?)/evidence(?:/)?$"},{page:"/api/logistics/lanes/[id]",regex:"^/api/logistics/lanes/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/logistics/lanes/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/logistics/lanes/[id]/versions",regex:"^/api/logistics/lanes/([^/]+?)/versions(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/logistics/lanes/(?<nxtPid>[^/]+?)/versions(?:/)?$"},{page:"/api/suppliers/[id]/terms",regex:"^/api/suppliers/([^/]+?)/terms(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/suppliers/(?<nxtPid>[^/]+?)/terms(?:/)?$"},{page:"/candidates/[id]",regex:"^/candidates/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/candidates/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/logistics/lanes/[id]",regex:"^/logistics/lanes/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/logistics/lanes/(?<nxtPid>[^/]+?)(?:/)?$"}],nextConfig:{basePath:""}})))(re,re,re);export{Ic as default};
