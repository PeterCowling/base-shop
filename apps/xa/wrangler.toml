# XA Cloudflare Workers deployment config (via @opennextjs/cloudflare)
name = "xa-site"
main = ".open-next/worker.js"
compatibility_date = "2025-06-20"
compatibility_flags = ["nodejs_compat"]

[assets]
directory = ".open-next/assets"
binding = "ASSETS"

[vars]
XA_STEALTH_MODE = "true"
XA_REQUIRE_CF_ACCESS = "false"
XA_STRICT_STEALTH = "false"
NEXT_PUBLIC_STEALTH_MODE = "true"
# NOTE: Configure these per-environment in Cloudflare dashboard:
# - XA_ALLOWED_HOSTS (real hostnames/domains)
# - NEXT_PUBLIC_SITE_DOMAIN
# Post-deploy, set secrets via: wrangler secret put <NAME>
# - SESSION_SECRET (signs invite cookies â€” falls back to NEXTAUTH_SECRET)
# - XA_STEALTH_INVITE_CODES (comma-separated invite codes)
