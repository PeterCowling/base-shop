"use strict";(self.webpackChunk_apps_storybook=self.webpackChunk_apps_storybook||[]).push([[7751],{"../../packages/ui/src/components/organisms/ProductCard.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>ProductCard});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),next_image__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../__mocks__/next/image.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_acme_platform_core_contexts_CartContext__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../packages/platform-core/src/contexts/CartContext.tsx"),_utils_style__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/ui/src/utils/style/index.ts"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_atoms_Price__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../packages/ui/src/components/atoms/Price.tsx"),_acme_i18n__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../packages/i18n/src/index.ts"),_i18n_resolveText__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../packages/i18n/src/resolveText.ts");const ProductCard=react__WEBPACK_IMPORTED_MODULE_2__.forwardRef(({product,onAddToCart,showImage=!0,showPrice=!0,ctaLabel,padding="p-4",width,height,minHeight,margin,locale,className,...props},ref)=>{var _product_media;const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_6__.c3)(),{classes,style}=(0,_utils_style__WEBPACK_IMPORTED_MODULE_3__.A)({width,height,padding,margin}),media=null===(_product_media=product.media)||void 0===_product_media?void 0:_product_media[0],[,dispatch]=(0,_acme_platform_core_contexts_CartContext__WEBPACK_IMPORTED_MODULE_7__._)();var _media_url,_media_altText,_ref,_media_url1,_product_title;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{ref,style:null!=minHeight?{...style,minHeight}:style,className:(0,_utils_style__WEBPACK_IMPORTED_MODULE_3__.cn)("flex flex-col gap-3 rounded-lg border",classes,className),...props,children:[showImage&&media&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"relative aspect-square",children:"image"===media.type?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(next_image__WEBPACK_IMPORTED_MODULE_1__.A,{src:null!==(_media_url=media.url)&&void 0!==_media_url?_media_url:"",alt:null!==(_ref=null!==(_media_altText=media.altText)&&void 0!==_media_altText?_media_altText:product.title)&&void 0!==_ref?_ref:"",fill:!0,sizes:"(min-width: 640px) 25vw, 50vw",className:"rounded-md object-cover"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("video",{src:null!==(_media_url1=media.url)&&void 0!==_media_url1?_media_url1:"",className:"h-full w-full rounded-md object-cover","data-aspect":"1/1",muted:!0,playsInline:!0})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"font-medium",children:null!==(_product_title=product.title)&&void 0!==_product_title?_product_title:""}),showPrice&&null!=product.price&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_Price__WEBPACK_IMPORTED_MODULE_5__.g,{amount:product.price,className:"font-semibold"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_4__.$n,{onClick:()=>{onAddToCart?onAddToCart(product):dispatch({type:"add",sku:product})},children:ctaLabel?"string"==typeof ctaLabel?ctaLabel:"key"===ctaLabel.type?t(ctaLabel.key,ctaLabel.params):"inline"===ctaLabel.type?(0,_i18n_resolveText__WEBPACK_IMPORTED_MODULE_8__.W)(ctaLabel,null!=locale?locale:"en",t):t("Add to cart"):t("Add to cart")})]})});ProductCard.displayName="ProductCard",ProductCard.__docgenInfo={description:"",methods:[],displayName:"ProductCard",props:{product:{required:!0,tsType:{name:"z.infer",elements:[{name:"skuSchema"}],raw:"z.infer<typeof skuSchema>"},description:""},onAddToCart:{required:!1,tsType:{name:"signature",type:"function",raw:"(product: SKU) => void",signature:{arguments:[{type:{name:"z.infer",elements:[{name:"skuSchema"}],raw:"z.infer<typeof skuSchema>"},name:"product"}],return:{name:"void"}}},description:""},showImage:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},showPrice:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},ctaLabel:{required:!1,tsType:{name:"TranslatableText"},description:""},padding:{required:!1,tsType:{name:"string"},description:"Override default padding classes.",defaultValue:{value:'"p-4"',computed:!1}},width:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"Optional width"},height:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"Optional height"},minHeight:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"Optional min height to normalize tile heights across grids/carousels"},margin:{required:!1,tsType:{name:"string"},description:"Optional margin classes"},locale:{required:!1,tsType:{name:"Locale"},description:"Optional current locale used for inline values"}}}},"../../packages/ui/src/components/organisms/RecommendationCarousel.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>RecommendationCarousel});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_utils_style__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/utils/style/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/i18n/src/index.ts"),_ProductCard__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../packages/ui/src/components/organisms/ProductCard.tsx"),_atoms_primitives_Inline__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Inline.tsx"),console=__webpack_require__("../../node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");function RecommendationCarousel({endpoint,products:productsProp,minItems=1,maxItems=4,desktopItems,tabletItems,mobileItems,gapClassName="gap-4",getSlideWidth=n=>100/n+"%",className,LoadingState,ErrorState,showArrows=!0,showDots=!0,loop=!0,tileMinHeight,...props}){const[products,setProducts]=react__WEBPACK_IMPORTED_MODULE_1__.useState(null!=productsProp?productsProp:[]),[status,setStatus]=react__WEBPACK_IMPORTED_MODULE_1__.useState(productsProp?"loaded":"idle"),t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_3__.c3)(),[itemsPerSlide,setItemsPerSlide]=react__WEBPACK_IMPORTED_MODULE_1__.useState(null!=desktopItems?desktopItems:minItems),scrollerRef=react__WEBPACK_IMPORTED_MODULE_1__.useRef(null),autoplayRef=react__WEBPACK_IMPORTED_MODULE_1__.useRef(null),indexRef=react__WEBPACK_IMPORTED_MODULE_1__.useRef(0),[pageIndex,setPageIndex]=react__WEBPACK_IMPORTED_MODULE_1__.useState(0),touchStartXRef=react__WEBPACK_IMPORTED_MODULE_1__.useRef(null),touchStartYRef=react__WEBPACK_IMPORTED_MODULE_1__.useRef(null),touchDxRef=react__WEBPACK_IMPORTED_MODULE_1__.useRef(0),touchActiveRef=react__WEBPACK_IMPORTED_MODULE_1__.useRef(!1),stopAutoplay=react__WEBPACK_IMPORTED_MODULE_1__.useCallback(()=>{autoplayRef.current&&(clearInterval(autoplayRef.current),autoplayRef.current=null)},[]),startAutoplay=react__WEBPACK_IMPORTED_MODULE_1__.useCallback(()=>{stopAutoplay();const pageCount=Math.max(1,Math.ceil(products.length/Math.max(1,itemsPerSlide)));!scrollerRef.current||pageCount<=1||(autoplayRef.current=setInterval(()=>{const scroller=scrollerRef.current;if(!scroller)return;const next=indexRef.current+1;!loop&&next>=pageCount?stopAutoplay():(indexRef.current=next%pageCount,scroller.scrollTo({left:scroller.clientWidth*indexRef.current,behavior:"smooth"}))},3e3))},[products.length,itemsPerSlide,loop,stopAutoplay]);react__WEBPACK_IMPORTED_MODULE_1__.useEffect(()=>{const calculateItems=()=>{const width=window.innerWidth;if(desktopItems||tabletItems||mobileItems){const chosen=width>=1024?desktopItems:width>=768?tabletItems:mobileItems;return void setItemsPerSlide(null!=chosen?chosen:minItems)}const count=Math.floor(width/320);setItemsPerSlide(Math.min(maxItems,Math.max(minItems,count||minItems)))};return calculateItems(),window.addEventListener("resize",calculateItems),()=>window.removeEventListener("resize",calculateItems)},[minItems,maxItems,desktopItems,tabletItems,mobileItems]),react__WEBPACK_IMPORTED_MODULE_1__.useEffect(()=>{if(productsProp)return setProducts(productsProp),void setStatus("loaded");if(!endpoint)return;(async()=>{setStatus("loading");try{const url=new URL(endpoint,window.location.origin);url.searchParams.set("minItems",String(minItems)),url.searchParams.set("maxItems",String(maxItems));const res=await fetch(url);if(!res.ok)return void setStatus("error");const raw=await res.json();var _raw_items;const list=Array.isArray(raw)?raw:null!==(_raw_items=null==raw?void 0:raw.items)&&void 0!==_raw_items?_raw_items:[];setProducts(list),setStatus("loaded")}catch(err){console.error("Failed loading recommendations",err),setStatus("error")}})()},[endpoint,minItems,maxItems,productsProp]);const width=getSlideWidth(itemsPerSlide),slideStyle=react__WEBPACK_IMPORTED_MODULE_1__.useMemo(()=>({flex:`0 0 ${width}`}),[width]);react__WEBPACK_IMPORTED_MODULE_1__.useEffect(()=>(startAutoplay(),stopAutoplay),[startAutoplay,stopAutoplay]),react__WEBPACK_IMPORTED_MODULE_1__.useEffect(()=>{const scroller=scrollerRef.current;if(!scroller)return;const onScroll=()=>{const w=scroller.clientWidth||1,idx=Math.round(scroller.scrollLeft/w);indexRef.current=idx,setPageIndex(idx)};return scroller.addEventListener("scroll",onScroll,{passive:!0}),()=>scroller.removeEventListener("scroll",onScroll)},[]);const pageCount=Math.max(1,Math.ceil(products.length/Math.max(1,itemsPerSlide))),regionLabel=t("recommendations.regionLabel"),prevLabel=t("recommendations.controls.previous"),nextLabel=t("recommendations.controls.next"),pageDots=react__WEBPACK_IMPORTED_MODULE_1__.useMemo(()=>Array.from({length:pageCount},(_,pageIndex)=>{const start=pageIndex*itemsPerSlide,end=start+itemsPerSlide;return{page:pageIndex,key:products.slice(start,end).map(product=>product.id).join("-")||`page-${pageIndex}`}}),[pageCount,itemsPerSlide,products]),gotoPage=idx=>{const scroller=scrollerRef.current;if(!scroller)return;const clamped=loop?(idx%pageCount+pageCount)%pageCount:Math.max(0,Math.min(pageCount-1,idx));indexRef.current=clamped,setPageIndex(clamped),scroller.scrollTo({left:scroller.clientWidth*clamped,behavior:"smooth"})};return"loading"===status?LoadingState?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LoadingState,{}):null:"error"===status?ErrorState?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ErrorState,{}):null:products.length?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:(0,_utils_style__WEBPACK_IMPORTED_MODULE_2__.cn)("relative overflow-hidden",className),role:"region","aria-label":regionLabel,tabIndex:0,onMouseEnter:stopAutoplay,onMouseLeave:startAutoplay,onKeyDown:e=>{"ArrowLeft"===e.key&&(e.preventDefault(),gotoPage(pageIndex-1)),"ArrowRight"===e.key&&(e.preventDefault(),gotoPage(pageIndex+1))},...props,children:[showArrows&&pageCount>1&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:(()=>{const canPrev=loop||pageIndex>0,canNext=loop||pageIndex<pageCount-1,btnBase="rounded-full p-2 shadow-elevation-2 border border-border-2 bg-primary text-primary-fg hover:bg-primary/90";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{"aria-label":prevLabel,onClick:()=>gotoPage(pageIndex-1),className:`absolute left-2 top-1/2 z-10 -translate-y-1/2 ${btnBase} ${canPrev?"":"opacity-50 pointer-events-none"}`,disabled:!canPrev,children:"‹"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{"aria-label":nextLabel,onClick:()=>gotoPage(pageIndex+1),className:`absolute right-2 top-1/2 z-10 -translate-y-1/2 ${btnBase} ${canNext?"":"opacity-50 pointer-events-none"}`,disabled:!canNext,children:"›"})]})})()}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref:scrollerRef,className:(0,_utils_style__WEBPACK_IMPORTED_MODULE_2__.cn)("flex snap-x overflow-x-auto pb-4 scroll-smooth",gapClassName),style:{touchAction:"pan-y"},onTouchStart:e=>{if(!scrollerRef.current)return;const t=e.touches[0];touchStartXRef.current=t.clientX,touchStartYRef.current=t.clientY,touchDxRef.current=0,touchActiveRef.current=!0,stopAutoplay()},onTouchMove:e=>{if(!touchActiveRef.current)return;const t=e.touches[0];var _touchStartXRef_current;const sx=null!==(_touchStartXRef_current=touchStartXRef.current)&&void 0!==_touchStartXRef_current?_touchStartXRef_current:t.clientX;var _touchStartYRef_current;const sy=null!==(_touchStartYRef_current=touchStartYRef.current)&&void 0!==_touchStartYRef_current?_touchStartYRef_current:t.clientY,dx=t.clientX-sx,dy=t.clientY-sy;Math.abs(dx)>Math.abs(dy)&&e.preventDefault(),touchDxRef.current=dx},onTouchEnd:()=>{if(!scrollerRef.current)return;const w=scrollerRef.current.clientWidth||1,dx=touchDxRef.current,threshold=Math.max(50,.15*w);if(Math.abs(dx)>threshold){gotoPage(pageIndex+(dx<0?1:-1))}else gotoPage(pageIndex);touchActiveRef.current=!1,startAutoplay()},children:products.map(p=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:slideStyle,className:"snap-start",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ProductCard__WEBPACK_IMPORTED_MODULE_4__.A,{product:p,className:"h-full",minHeight:tileMinHeight})},p.id))}),showDots&&pageCount>1&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_primitives_Inline__WEBPACK_IMPORTED_MODULE_5__.c,{alignY:"center",gap:2,className:"mb-1 mt-2 justify-center","aria-live":"polite","aria-atomic":"true",children:pageDots.map(({page,key})=>{return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{"aria-label":(pageNumber=page+1,t("recommendations.page",{page:pageNumber})),className:(0,_utils_style__WEBPACK_IMPORTED_MODULE_2__.cn)("h-2 w-2 rounded-full",page===pageIndex?"bg-primary":"bg-muted"),onClick:()=>gotoPage(page)},key);var pageNumber})})]}):null}RecommendationCarousel.__docgenInfo={description:"Horizontally scrollable carousel that fetches product\nrecommendations from an API. The number of visible items\nadapts to the current viewport width and is clamped between\nthe provided `minItems` and `maxItems` values.",methods:[],displayName:"RecommendationCarousel",props:{endpoint:{required:!1,tsType:{name:"string"},description:"API endpoint providing recommended products."},products:{required:!1,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"skuSchema"}],raw:"z.infer<typeof skuSchema>"}],raw:"SKU[]"},description:"Provide products directly instead of fetching."},minItems:{required:!1,tsType:{name:"number"},description:"Minimum number of items visible per slide.",defaultValue:{value:"1",computed:!1}},maxItems:{required:!1,tsType:{name:"number"},description:"Maximum number of items visible per slide.",defaultValue:{value:"4",computed:!1}},desktopItems:{required:!1,tsType:{name:"number"},description:"Items shown on desktop viewports"},tabletItems:{required:!1,tsType:{name:"number"},description:"Items shown on tablet viewports"},mobileItems:{required:!1,tsType:{name:"number"},description:"Items shown on mobile viewports"},gapClassName:{required:!1,tsType:{name:"string"},description:"Tailwind class controlling gap between slides",defaultValue:{value:'"gap-4"',computed:!1}},getSlideWidth:{required:!1,tsType:{name:"signature",type:"function",raw:"(itemsPerSlide: number) => string",signature:{arguments:[{type:{name:"number"},name:"itemsPerSlide"}],return:{name:"string"}}},description:"Function to calculate individual slide width",defaultValue:{value:"(n) => `${100 / n}%`",computed:!1}},LoadingState:{required:!1,tsType:{name:"union",raw:"React.ComponentType | null",elements:[{name:"ReactComponentType",raw:"React.ComponentType"},{name:"null"}]},description:"Optional loading and error states"},ErrorState:{required:!1,tsType:{name:"union",raw:"React.ComponentType | null",elements:[{name:"ReactComponentType",raw:"React.ComponentType"},{name:"null"}]},description:""},showArrows:{required:!1,tsType:{name:"boolean"},description:"Show previous/next controls",defaultValue:{value:"true",computed:!1}},showDots:{required:!1,tsType:{name:"boolean"},description:"Show pagination dots",defaultValue:{value:"true",computed:!1}},loop:{required:!1,tsType:{name:"boolean"},description:"Loop around pages when navigating/autoplaying",defaultValue:{value:"true",computed:!1}},tileMinHeight:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"Minimum tile height to keep rows visually consistent"}}}}}]);