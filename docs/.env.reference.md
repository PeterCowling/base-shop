# Environment variable reference

This page describes the environment variables the platform expects. Each variable is read from `.env` files generated for shops and may be required at build or run time.

| Variable | Purpose |
| --- | --- |
| `DATABASE_URL` | PostgreSQL connection string. If unset, an in-memory stub is used. |
| `STRIPE_SECRET_KEY` | Server-side Stripe API key. |
| `NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY` | Client-side Stripe key exposed to the browser. |
| `STRIPE_WEBHOOK_SECRET` | Secret used to verify Stripe webhook signatures. |
| `CMS_SPACE_URL` | Base URL of the headless CMS API. |
| `CMS_ACCESS_TOKEN` | Token used to push schemas to the CMS. |
| `SANITY_API_VERSION` | API version for the optional Sanity blog plugin. |
| `CART_COOKIE_SECRET` | Secret for signing cart cookies. Required in production. |
| `CART_TTL` | Cart expiration in seconds (defaults to 30 days). |
| `DEPOSIT_RELEASE_ENABLED` | `true` or `false` to toggle automated deposit refunds. |
| `DEPOSIT_RELEASE_INTERVAL_MS` | Interval in milliseconds between deposit refund runs. |
| `REVERSE_LOGISTICS_ENABLED` | `true` or `false` to enable the reverse logistics service. |
| `REVERSE_LOGISTICS_INTERVAL_MS` | Interval in milliseconds for the reverse logistics worker. |
| `LATE_FEE_ENABLED` | `true` or `false` to toggle late fee processing. |
| `LATE_FEE_INTERVAL_MS` | Interval in milliseconds for the late fee job. |
| `LOG_LEVEL` | Logging verbosity (`error`, `warn`, `info`, or `debug`). |
| `EMAIL_PROVIDER` | Campaign email provider (`smtp`, `sendgrid`, or `resend`). |
| `SENDGRID_API_KEY` | API key for SendGrid when using the SendGrid provider. |
| `SENDGRID_MARKETING_KEY` | SendGrid marketing API key for contact and segment endpoints. |
| `RESEND_API_KEY` | API key for Resend when using the Resend provider. |
| `SENDGRID_WEBHOOK_PUBLIC_KEY` | Public key to verify SendGrid webhook signatures. |
| `RESEND_WEBHOOK_SECRET` | Secret used to verify Resend webhook signatures. |
| `CHROMATIC_PROJECT_TOKEN` | Token for publishing Storybook builds to Chromatic. |
| `STOCK_ALERT_RECIPIENT` | Email address that receives low stock alerts. Leave unset to disable notifications. |
| `STOCK_ALERT_WEBHOOK` | URL for posting low stock alerts to an external service. |
| `STOCK_ALERT_DEFAULT_THRESHOLD` | Default stock level that triggers alerts. |
| `NEXT_PUBLIC_BASE_URL` | Base URL exposed to the browser for constructing absolute links. |
