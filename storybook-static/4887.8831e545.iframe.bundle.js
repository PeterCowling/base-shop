"use strict";(self.webpackChunkcms_monorepo=self.webpackChunkcms_monorepo||[]).push([[4887],{"./packages/ui/src/components/cms/marketing/campaign/CampaignForm.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>campaign_CampaignForm});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),shadcn=__webpack_require__("./packages/ui/src/components/atoms/shadcn/index.ts"),style=__webpack_require__("./packages/ui/src/utils/style/index.ts"),primitives=__webpack_require__("./packages/ui/src/components/atoms/primitives/index.ts"),src=__webpack_require__("./packages/i18n/src/index.ts"),types=__webpack_require__("./packages/ui/src/components/cms/marketing/campaign/types.ts");function CampaignAudienceSection({values,errors,onUpdateValue,onToggleChannel}){const t=(0,src.c3)();return(0,jsx_runtime.jsx)(shadcn.Zp,{children:(0,jsx_runtime.jsxs)(shadcn.Wu,{className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsx)("label",{htmlFor:"campaign-audience",className:"text-sm font-medium",children:t("campaign.audience.label")}),(0,jsx_runtime.jsx)(shadcn.TM,{id:"campaign-audience",value:values.audience,onChange:event=>onUpdateValue("audience",event.target.value),placeholder:String(t("campaign.audience.placeholder")),rows:3,"aria-invalid":errors.audience?"true":"false","aria-describedby":errors.audience?"campaign-audience-error":void 0}),errors.audience&&(0,jsx_runtime.jsx)("p",{id:"campaign-audience-error",className:"text-danger text-xs","data-token":"--color-danger",children:errors.audience})]}),(0,jsx_runtime.jsxs)("fieldset",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("legend",{className:"text-sm font-medium",children:t("campaign.channels.legend")}),(0,jsx_runtime.jsx)(primitives.xA,{gap:3,cols:1,className:"sm:grid-cols-2",children:types.AB.map(channel=>{const checked=values.channels.includes(channel),chanLabel=t(`campaign.channels.${channel}`);return(0,jsx_runtime.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,jsx_runtime.jsx)(shadcn.Sc,{checked,onCheckedChange:()=>onToggleChannel(channel)}),(0,jsx_runtime.jsx)("span",{className:"capitalize",children:chanLabel})]},channel)})}),errors.channels&&(0,jsx_runtime.jsx)("p",{className:"text-danger text-xs","data-token":"--color-danger",children:errors.channels})]})]})})}function CampaignBasicsSection({values,errors,onUpdateValue}){const t=(0,src.c3)();return(0,jsx_runtime.jsx)(shadcn.Zp,{children:(0,jsx_runtime.jsxs)(shadcn.Wu,{className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsx)("label",{htmlFor:"campaign-name",className:"text-sm font-medium",children:t("campaign.name.label")}),(0,jsx_runtime.jsx)(shadcn.pd,{id:"campaign-name",value:values.name,onChange:event=>onUpdateValue("name",event.target.value),"aria-invalid":errors.name?"true":"false","aria-describedby":errors.name?"campaign-name-error":void 0,placeholder:String(t("campaign.name.placeholder"))}),errors.name&&(0,jsx_runtime.jsx)("p",{id:"campaign-name-error",className:"text-danger text-xs","data-token":"--color-danger",children:errors.name})]}),(0,jsx_runtime.jsxs)(primitives.xA,{gap:4,cols:1,className:"sm:grid-cols-2",children:[(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsx)("label",{htmlFor:"campaign-objective",className:"text-sm font-medium",children:t("campaign.objective.label")}),(0,jsx_runtime.jsxs)(shadcn.l6,{value:values.objective,onValueChange:value=>onUpdateValue("objective",value),children:[(0,jsx_runtime.jsx)(shadcn.bq,{id:"campaign-objective",children:(0,jsx_runtime.jsx)(shadcn.yv,{placeholder:String(t("campaign.objective.placeholder"))})}),(0,jsx_runtime.jsx)(shadcn.gC,{children:types.vG.map(objective=>{const label=t("awareness"===objective?"campaign.objective.awareness":"sales"===objective?"campaign.objective.sales":"retention"===objective?"campaign.objective.retention":"campaign.objective.loyalty");return(0,jsx_runtime.jsx)(shadcn.eb,{value:objective,children:label},objective)})})]})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsx)("label",{htmlFor:"campaign-kpi",className:"text-sm font-medium",children:t("campaign.kpi.label")}),(0,jsx_runtime.jsx)(shadcn.pd,{id:"campaign-kpi",value:values.kpi,onChange:event=>onUpdateValue("kpi",event.target.value)})]})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsx)("label",{htmlFor:"campaign-description",className:"text-sm font-medium",children:t("campaign.description.label")}),(0,jsx_runtime.jsx)(shadcn.TM,{id:"campaign-description",value:values.description,onChange:event=>onUpdateValue("description",event.target.value),rows:3})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsx)("label",{htmlFor:"campaign-budget",className:"text-sm font-medium",children:t("campaign.budget.label")}),(0,jsx_runtime.jsx)(shadcn.pd,{id:"campaign-budget",type:"number",value:values.budget?String(values.budget):"",onChange:event=>onUpdateValue("budget",""===event.target.value?0:Number(event.target.value)),min:0,step:100,"aria-invalid":errors.budget?"true":"false","aria-describedby":errors.budget?"campaign-budget-error":void 0}),errors.budget&&(0,jsx_runtime.jsx)("p",{id:"campaign-budget-error",className:"text-danger text-xs","data-token":"--color-danger",children:errors.budget})]})]})})}CampaignAudienceSection.__docgenInfo={description:"",methods:[],displayName:"CampaignAudienceSection",props:{values:{required:!0,tsType:{name:"CampaignFormValues"},description:""},errors:{required:!0,tsType:{name:"Partial",elements:[{name:"Record",elements:[{name:"CampaignFormValues"},{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}],raw:"Record<TField, string | undefined>"}],raw:"Partial<\n  Record<TField, string | undefined>\n>"},description:""},onUpdateValue:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends CampaignField>(\n  field: K,\n  value: CampaignFormValues[K]\n) => void",signature:{arguments:[{type:{name:"K"},name:"field"},{type:{name:"CampaignFormValues[K]",raw:"CampaignFormValues[K]"},name:"value"}],return:{name:"void"}}},description:""},onToggleChannel:{required:!0,tsType:{name:"signature",type:"function",raw:"(channel: CampaignChannel) => void",signature:{arguments:[{type:{name:"unknown[number]",raw:"(typeof campaignChannelOptions)[number]"},name:"channel"}],return:{name:"void"}}},description:""}}};CampaignBasicsSection.__docgenInfo={description:"",methods:[],displayName:"CampaignBasicsSection",props:{values:{required:!0,tsType:{name:"CampaignFormValues"},description:""},errors:{required:!0,tsType:{name:"Partial",elements:[{name:"Record",elements:[{name:"CampaignFormValues"},{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}],raw:"Record<TField, string | undefined>"}],raw:"Partial<\n  Record<TField, string | undefined>\n>"},description:""},onUpdateValue:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends CampaignField>(\n  field: K,\n  value: CampaignFormValues[K]\n) => void",signature:{arguments:[{type:{name:"K"},name:"field"},{type:{name:"CampaignFormValues[K]",raw:"CampaignFormValues[K]"},name:"value"}],return:{name:"void"}}},description:""}}};var atoms=__webpack_require__("./packages/ui/src/components/atoms/index.ts");function CampaignFormToast({open,message,onClose}){return(0,jsx_runtime.jsx)(atoms.y8,{open,message,onClose})}function CampaignScheduleSection({values,errors,onUpdateValue}){const t=(0,src.c3)();return(0,jsx_runtime.jsx)(shadcn.Zp,{children:(0,jsx_runtime.jsxs)(shadcn.Wu,{className:"grid gap-4 sm:grid-cols-2",children:[(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsx)("label",{htmlFor:"campaign-start",className:"text-sm font-medium",children:t("Start date")}),(0,jsx_runtime.jsx)(shadcn.pd,{id:"campaign-start",type:"date",value:values.startDate,onChange:event=>onUpdateValue("startDate",event.target.value)})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsx)("label",{htmlFor:"campaign-end",className:"text-sm font-medium",children:t("End date")}),(0,jsx_runtime.jsx)(shadcn.pd,{id:"campaign-end",type:"date",value:values.endDate,onChange:event=>onUpdateValue("endDate",event.target.value),"aria-invalid":errors.endDate?"true":"false","aria-describedby":errors.endDate?"campaign-end-error":void 0}),errors.endDate&&(0,jsx_runtime.jsx)("p",{id:"campaign-end-error",className:"text-danger text-xs","data-token":"--color-danger",children:errors.endDate})]})]})})}CampaignFormToast.__docgenInfo={description:"",methods:[],displayName:"CampaignFormToast",props:{open:{required:!0,tsType:{name:"boolean"},description:""},message:{required:!0,tsType:{name:"string"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};CampaignScheduleSection.__docgenInfo={description:"",methods:[],displayName:"CampaignScheduleSection",props:{values:{required:!0,tsType:{name:"CampaignFormValues"},description:""},errors:{required:!0,tsType:{name:"Partial",elements:[{name:"Record",elements:[{name:"CampaignFormValues"},{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}],raw:"Record<TField, string | undefined>"}],raw:"Partial<\n  Record<TField, string | undefined>\n>"},description:""},onUpdateValue:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends CampaignField>(\n  field: K,\n  value: CampaignFormValues[K]\n) => void",signature:{arguments:[{type:{name:"K"},name:"field"},{type:{name:"CampaignFormValues[K]",raw:"CampaignFormValues[K]"},name:"value"}],return:{name:"void"}}},description:""}}};var react=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js");const sectionFieldMap={basics:["name","objective","description","budget","kpi"],audience:["audience","channels"],schedule:["startDate","endDate"]};function useCampaignForm({defaultValues,sections,validationErrors,onSubmit,onStatusChange,onPreviewChange,status:statusProp,messages}){const t=(0,src.c3)(),ts=(0,react.useCallback)(s=>t(s),[t]),[values,setValues]=(0,react.useState)({...types.kU,...defaultValues}),[internalErrors,setInternalErrors]=(0,react.useState)({}),[internalStatus,setInternalStatus]=(0,react.useState)("idle"),[toast,setToast]=(0,react.useState)({open:!1,message:""}),[dismissedServerErrors,setDismissedServerErrors]=(0,react.useState)(new Set),status=null!=statusProp?statusProp:internalStatus;(0,react.useEffect)(()=>{setValues(prev=>({...prev,...defaultValues}))},[defaultValues]),(0,react.useEffect)(()=>{onPreviewChange&&onPreviewChange((0,types.ln)(values))},[values,onPreviewChange]),(0,react.useEffect)(()=>{setDismissedServerErrors(new Set)},[validationErrors]);const filteredValidationErrors=(0,react.useMemo)(()=>{if(!validationErrors)return{};const entries=Object.entries(validationErrors).filter(([field])=>!dismissedServerErrors.has(field));return Object.fromEntries(entries)},[validationErrors,dismissedServerErrors]),errors=(0,react.useMemo)(()=>({...internalErrors,...filteredValidationErrors}),[internalErrors,filteredValidationErrors]),markStatus=(0,react.useCallback)(next=>{statusProp||setInternalStatus(next),null==onStatusChange||onStatusChange(next)},[onStatusChange,statusProp]),showToast=(0,react.useCallback)(message=>{setToast({open:!0,message})},[]),dismissToast=(0,react.useCallback)(()=>{setToast(prev=>({...prev,open:!1}))},[]),handleSubmit=(0,react.useCallback)(async event=>{event.preventDefault(),markStatus("validating");const nextErrors=function validateCampaign(values,sections,t){const requiredFields=sections.flatMap(section=>sectionFieldMap[section]),errors={};for(const field of requiredFields){const value=values[field];"number"==typeof value?(Number.isNaN(value)||value<0)&&(errors[field]=t("Please provide a valid amount.")):Array.isArray(value)?0===value.length&&(errors[field]=t("Select at least one option.")):value||(errors[field]=t("This field is required."))}return requiredFields.includes("endDate")&&values.endDate&&values.startDate&&values.endDate<values.startDate&&(errors.endDate=t("End date must be after the start date.")),errors}(values,sections,ts);var _messages_validation,_messages_success;if(setInternalErrors(nextErrors),Object.keys(nextErrors).length>0)return markStatus("error"),void showToast(null!==(_messages_validation=null==messages?void 0:messages.validation)&&void 0!==_messages_validation?_messages_validation:ts("campaign.validation.reviewFields"));if(!onSubmit)return markStatus("success"),void showToast(null!==(_messages_success=null==messages?void 0:messages.success)&&void 0!==_messages_success?_messages_success:ts("campaign.draftSavedLocally"));try{var _messages_success1;markStatus("submitting"),await onSubmit(values),markStatus("success"),showToast(null!==(_messages_success1=null==messages?void 0:messages.success)&&void 0!==_messages_success1?_messages_success1:ts("campaign.savedSuccessfully"))}catch(error){var _messages_error;markStatus("error");const fallback=error instanceof Error?error.message:null!==(_messages_error=null==messages?void 0:messages.error)&&void 0!==_messages_error?_messages_error:ts("campaign.saveFailed");var _messages_error1;showToast(null!==(_messages_error1=null==messages?void 0:messages.error)&&void 0!==_messages_error1?_messages_error1:fallback)}},[markStatus,messages,onSubmit,sections,showToast,ts,values]),dismissServerError=(0,react.useCallback)(field=>{setDismissedServerErrors(prev=>{if(prev.has(field))return prev;const next=new Set(prev);return next.add(field),next})},[]),updateValue=(0,react.useCallback)((field,value)=>{setValues(prev=>({...prev,[field]:value})),setInternalErrors(prev=>{if(!prev[field])return prev;const next={...prev};return delete next[field],next}),dismissServerError(field)},[dismissServerError]),toggleChannel=(0,react.useCallback)(channel=>{setValues(prev=>{const nextChannels=prev.channels.includes(channel)?prev.channels.filter(current=>current!==channel):[...prev.channels,channel];return{...prev,channels:nextChannels}}),setInternalErrors(prev=>{if(!prev.channels)return prev;const next={...prev};return delete next.channels,next}),dismissServerError("channels")},[dismissServerError]);return{values,errors,status,toast,handleSubmit,updateValue,toggleChannel,dismissToast}}function CampaignForm({defaultValues,sections=["basics","audience","schedule"],validationErrors,onSubmit,onStatusChange,onPreviewChange,submitLabel,secondaryAction,busy,status:statusProp,messages,className}){const t=(0,src.c3)(),{values,errors,status,toast,handleSubmit,updateValue,toggleChannel,dismissToast}=useCampaignForm({defaultValues,sections,validationErrors,onSubmit,onStatusChange,onPreviewChange,status:statusProp,messages}),visibleSections=new Set(sections),resolvedSubmitLabel=null!=submitLabel?submitLabel:t("Save campaign");return(0,jsx_runtime.jsxs)("form",{onSubmit:handleSubmit,className:(0,style.cn)("space-y-6",className),noValidate:!0,children:[visibleSections.has("basics")&&(0,jsx_runtime.jsx)(CampaignBasicsSection,{values,errors,onUpdateValue:updateValue}),visibleSections.has("audience")&&(0,jsx_runtime.jsx)(CampaignAudienceSection,{values,errors,onUpdateValue:updateValue,onToggleChannel:toggleChannel}),visibleSections.has("schedule")&&(0,jsx_runtime.jsx)(CampaignScheduleSection,{values,errors,onUpdateValue:updateValue}),(0,jsx_runtime.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[secondaryAction&&(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:secondaryAction.onClick,children:secondaryAction.label}),(0,jsx_runtime.jsxs)("div",{className:"ms-auto flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-muted-foreground text-xs",children:"submitting"===status?t("Saving campaign…"):"success"===status?t("Ready to launch"):void 0}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"submit",disabled:busy||"submitting"===status,children:resolvedSubmitLabel})]})]}),(0,jsx_runtime.jsx)(CampaignFormToast,{open:toast.open,message:toast.message,onClose:dismissToast})]})}const campaign_CampaignForm=CampaignForm;CampaignForm.__docgenInfo={description:"",methods:[],displayName:"CampaignForm",props:{defaultValues:{required:!1,tsType:{name:"Partial",elements:[{name:"CampaignFormValues"}],raw:"Partial<CampaignFormValues>"},description:""},sections:{required:!1,tsType:{name:"Array",elements:[{name:"union",raw:'"basics" | "audience" | "schedule"',elements:[{name:"literal",value:'"basics"'},{name:"literal",value:'"audience"'},{name:"literal",value:'"schedule"'}]}],raw:"CampaignFormSectionId[]"},description:"",defaultValue:{value:'["basics", "audience", "schedule"]',computed:!1}},validationErrors:{required:!1,tsType:{name:"Partial",elements:[{name:"Record",elements:[{name:"CampaignFormValues"},{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}],raw:"Record<TField, string | undefined>"}],raw:"Partial<\n  Record<TField, string | undefined>\n>"},description:""},onSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(\n  values: TValues\n) => Promise<void> | void",signature:{arguments:[{type:{name:"CampaignFormValues"},name:"values"}],return:{name:"union",raw:"Promise<void> | void",elements:[{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"void"}]}}},description:""},onStatusChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(status: SubmissionStatus) => void",signature:{arguments:[{type:{name:"union",raw:'| "idle"\n| "validating"\n| "submitting"\n| "success"\n| "error"',elements:[{name:"literal",value:'"idle"'},{name:"literal",value:'"validating"'},{name:"literal",value:'"submitting"'},{name:"literal",value:'"success"'},{name:"literal",value:'"error"'}]},name:"status"}],return:{name:"void"}}},description:""},onPreviewChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(preview: CampaignPreviewData) => void",signature:{arguments:[{type:{name:"CampaignPreviewData"},name:"preview"}],return:{name:"void"}}},description:""},submitLabel:{required:!1,tsType:{name:"string"},description:""},secondaryAction:{required:!1,tsType:{name:"signature",type:"object",raw:"{\n  label: string;\n  onClick: () => void;\n}",signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"onClick",value:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}},required:!0}}]}},description:""},busy:{required:!1,tsType:{name:"boolean"},description:""},status:{required:!1,tsType:{name:"union",raw:'| "idle"\n| "validating"\n| "submitting"\n| "success"\n| "error"',elements:[{name:"literal",value:'"idle"'},{name:"literal",value:'"validating"'},{name:"literal",value:'"submitting"'},{name:"literal",value:'"success"'},{name:"literal",value:'"error"'}]},description:""},messages:{required:!1,tsType:{name:"CampaignFormMessages"},description:""},className:{required:!1,tsType:{name:"string"},description:""}}}},"./packages/ui/src/components/cms/marketing/campaign/CampaignPreviewPanel.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/ui/src/components/atoms/index.ts"),_shared__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/ui/src/components/cms/marketing/shared/index.ts"),_atoms_primitives__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/ui/src/components/atoms/primitives/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/i18n/src/index.ts");function CampaignPreviewPanel({data,className,actions}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_4__.c3)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_shared__WEBPACK_IMPORTED_MODULE_2__.xH,{title:t("Campaign preview"),description:t("Review how the campaign will appear to stakeholders before publishing."),data,className,actions,renderPreview:preview=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_primitives__WEBPACK_IMPORTED_MODULE_3__.BJ,{gap:3,className:"text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_primitives__WEBPACK_IMPORTED_MODULE_3__.cV,{gap:2,alignY:"center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h4",{className:"text-base font-semibold",children:preview.title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_1__.vw,{variant:"success",className:"uppercase text-xs",children:preview.objective})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"grid gap-2 sm:grid-cols-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-muted-foreground text-xs uppercase",children:t("Schedule")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"font-medium",children:preview.timeframe})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-muted-foreground text-xs uppercase",children:t("Budget")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"font-medium",children:preview.budgetLabel})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-muted-foreground text-xs uppercase",children:t("Channels")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_primitives__WEBPACK_IMPORTED_MODULE_3__.cV,{gap:2,children:preview.channels.map(channel=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_1__.vw,{variant:"default",className:"text-xs",children:channel},channel))})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-muted-foreground text-xs uppercase",children:t("Audience summary")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{children:preview.audienceSummary})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-muted-foreground text-xs uppercase",children:t("Primary KPI")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"font-medium",children:preview.kpi})]})]})})}const __WEBPACK_DEFAULT_EXPORT__=CampaignPreviewPanel;CampaignPreviewPanel.__docgenInfo={description:"",methods:[],displayName:"CampaignPreviewPanel",props:{data:{required:!0,tsType:{name:"CampaignPreviewData"},description:""},className:{required:!1,tsType:{name:"string"},description:""},actions:{required:!1,tsType:{name:"ReactNode"},description:""}}}},"./packages/ui/src/components/cms/marketing/campaign/CampaignSummaryCard.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/ui/src/components/atoms/shadcn/index.ts"),_shared__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/ui/src/components/cms/marketing/shared/index.ts"),_atoms_primitives__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/ui/src/components/atoms/primitives/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/i18n/src/index.ts");function CampaignSummaryCard({data,statusLabel,statusTone="warning",description,footer,actions}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_4__.c3)(),statusLabelText=null!=statusLabel?statusLabel:t("campaign.summary.status.draft"),metrics=[{label:t("campaign.labels.schedule"),value:data.timeframe},{label:t("campaign.labels.budget"),value:data.budgetLabel},{label:t("campaign.labels.channels"),value:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_primitives__WEBPACK_IMPORTED_MODULE_3__.cV,{gap:2,children:data.channels.map(channel=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.vw,{variant:"default",className:"text-xs",children:channel},channel))})},{label:t("campaign.labels.primaryKpi"),value:data.kpi}];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_shared__WEBPACK_IMPORTED_MODULE_2__.Hv,{title:data.title,description:null!=description?description:t("campaign.summary.description"),status:{label:statusLabelText,tone:statusTone},metrics,footer,actions})}const __WEBPACK_DEFAULT_EXPORT__=CampaignSummaryCard;CampaignSummaryCard.__docgenInfo={description:"",methods:[],displayName:"CampaignSummaryCard",props:{data:{required:!0,tsType:{name:"CampaignPreviewData"},description:""},statusLabel:{required:!1,tsType:{name:"string"},description:""},statusTone:{required:!1,tsType:{name:'TagProps["variant"]',raw:'TagProps["variant"]'},description:"",defaultValue:{value:'"warning"',computed:!1}},description:{required:!1,tsType:{name:"string"},description:""},footer:{required:!1,tsType:{name:"ReactNode"},description:""},actions:{required:!1,tsType:{name:"ReactNode"},description:""}}}},"./packages/ui/src/components/cms/marketing/campaign/CampaignWizard.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/ui/src/components/atoms/shadcn/index.ts"),_atoms__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/ui/src/components/atoms/index.ts"),_utils_style__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/ui/src/utils/style/index.ts"),_shared__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/ui/src/components/cms/marketing/shared/index.ts"),_CampaignForm__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/ui/src/components/cms/marketing/campaign/CampaignForm.tsx"),_CampaignPreviewPanel__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/ui/src/components/cms/marketing/campaign/CampaignPreviewPanel.tsx"),_CampaignSummaryCard__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/ui/src/components/cms/marketing/campaign/CampaignSummaryCard.tsx"),_types__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/ui/src/components/cms/marketing/campaign/types.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/i18n/src/index.ts"),_atoms_primitives__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./packages/ui/src/components/atoms/primitives/index.ts");const wizardSteps=[{id:"plan",label:"campaign.wizard.steps.plan.label",description:"campaign.wizard.steps.plan.desc"},{id:"audience",label:"campaign.wizard.steps.audience.label",description:"campaign.wizard.steps.audience.desc"},{id:"schedule",label:"campaign.wizard.steps.schedule.label",description:"campaign.wizard.steps.schedule.desc"},{id:"review",label:"campaign.wizard.steps.review.label",description:"campaign.wizard.steps.review.desc"}],stepSections={plan:["basics"],audience:["audience"],schedule:["schedule"]};function CampaignWizard({initialValues,onSubmit,validationErrors,onPreviewChange,finishLabel,messages,className}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_10__.c3)(),resolvedFinishLabel=null!=finishLabel?finishLabel:t("campaign.wizard.finishLabel"),[values,setValues]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({..._types__WEBPACK_IMPORTED_MODULE_9__.kU,...initialValues}),[preview,setPreview]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)((0,_types__WEBPACK_IMPORTED_MODULE_9__.ln)({..._types__WEBPACK_IMPORTED_MODULE_9__.kU,...initialValues})),[stepIndex,setStepIndex]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0),[status,setStatus]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)("idle"),[toast,setToast]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({open:!1,message:""});(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{setValues({..._types__WEBPACK_IMPORTED_MODULE_9__.kU,...initialValues})},[initialValues]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{setPreview((0,_types__WEBPACK_IMPORTED_MODULE_9__.ln)(values))},[values]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{onPreviewChange&&onPreviewChange(preview)},[preview,onPreviewChange]);const currentStep=wizardSteps[stepIndex],steps=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>wizardSteps.map(s=>({...s,label:t(s.label),description:"string"==typeof s.description?t(s.description):s.description})),[t]),sectionsForStep=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{var _stepSections_currentStep_id;return null!==(_stepSections_currentStep_id=stepSections[null==currentStep?void 0:currentStep.id])&&void 0!==_stepSections_currentStep_id?_stepSections_currentStep_id:[]},[currentStep]),goToStep=index=>{setStepIndex(Math.min(Math.max(index,0),wizardSteps.length-1))},handlePreview=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(nextPreview=>{setPreview(nextPreview),null==onPreviewChange||onPreviewChange(nextPreview)},[onPreviewChange]);var _messages_success,_messages_validation;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:(0,_utils_style__WEBPACK_IMPORTED_MODULE_4__.cn)("space-y-6",className),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_shared__WEBPACK_IMPORTED_MODULE_5__.SK,{steps,currentStep:stepIndex,onStepSelect:index=>{index<=stepIndex&&goToStep(index)}}),"review"===(null==currentStep?void 0:currentStep.id)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"grid gap-4 lg:grid-cols-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_CampaignPreviewPanel__WEBPACK_IMPORTED_MODULE_7__.A,{data:preview,className:"lg:col-span-2"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_CampaignSummaryCard__WEBPACK_IMPORTED_MODULE_8__.A,{data:preview,statusLabel:t("success"===status?"campaign.wizard.status.approved":"campaign.wizard.status.pending"),statusTone:"success"===status?"success":"warning",actions:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.$n,{variant:"outline",onClick:()=>goToStep(stepIndex-1),children:t("actions.back")}),footer:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_primitives__WEBPACK_IMPORTED_MODULE_11__.cV,{className:"justify-end",gap:2,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.$n,{variant:"outline",onClick:()=>goToStep(stepIndex-1),children:t("campaign.wizard.editDetails")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.$n,{onClick:async()=>{var _messages_complete;if("submitting"!==status)if(onSubmit)try{var _messages_complete1;setStatus("submitting"),await onSubmit(values),setStatus("success"),setToast({open:!0,message:null!==(_messages_complete1=null==messages?void 0:messages.complete)&&void 0!==_messages_complete1?_messages_complete1:t("campaign.wizard.submitted")})}catch(error){var _messages_error;setStatus("error");const fallback=error instanceof Error?error.message:null!==(_messages_error=null==messages?void 0:messages.error)&&void 0!==_messages_error?_messages_error:t("campaign.wizard.unable");var _messages_error1;setToast({open:!0,message:null!==(_messages_error1=null==messages?void 0:messages.error)&&void 0!==_messages_error1?_messages_error1:fallback})}else setToast({open:!0,message:null!==(_messages_complete=null==messages?void 0:messages.complete)&&void 0!==_messages_complete?_messages_complete:t("campaign.wizard.completed")})},disabled:"submitting"===status,children:"submitting"===status?t("campaign.wizard.submitting"):resolvedFinishLabel})]})})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_CampaignForm__WEBPACK_IMPORTED_MODULE_6__.A,{defaultValues:values,sections:sectionsForStep,validationErrors,onSubmit:nextValues=>{setValues(nextValues),goToStep(stepIndex+1)},onStatusChange:setStatus,onPreviewChange:handlePreview,submitLabel:stepIndex===wizardSteps.length-2?t("campaign.wizard.review"):t("actions.continue"),secondaryAction:stepIndex>0?{label:t("actions.back"),onClick:()=>goToStep(stepIndex-1)}:void 0,messages:{success:null!==(_messages_success=null==messages?void 0:messages.success)&&void 0!==_messages_success?_messages_success:t("campaign.wizard.stepSaved"),validation:null!==(_messages_validation=null==messages?void 0:messages.validation)&&void 0!==_messages_validation?_messages_validation:t("campaign.wizard.resolveValidation"),error:null==messages?void 0:messages.error}},null==currentStep?void 0:currentStep.id),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.y8,{open:toast.open,message:toast.message,onClose:()=>setToast(prev=>({...prev,open:!1}))})]})}const __WEBPACK_DEFAULT_EXPORT__=CampaignWizard;CampaignWizard.__docgenInfo={description:"",methods:[],displayName:"CampaignWizard",props:{initialValues:{required:!1,tsType:{name:"Partial",elements:[{name:"CampaignFormValues"}],raw:"Partial<CampaignFormValues>"},description:""},onSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(\n  values: TValues\n) => Promise<void> | void",signature:{arguments:[{type:{name:"CampaignFormValues"},name:"values"}],return:{name:"union",raw:"Promise<void> | void",elements:[{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"void"}]}}},description:""},validationErrors:{required:!1,tsType:{name:"Partial",elements:[{name:"Record",elements:[{name:"CampaignFormValues"},{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}],raw:"Record<TField, string | undefined>"}],raw:"Partial<\n  Record<TField, string | undefined>\n>"},description:""},onPreviewChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(preview: CampaignPreviewData) => void",signature:{arguments:[{type:{name:"CampaignPreviewData"},name:"preview"}],return:{name:"void"}}},description:""},finishLabel:{required:!1,tsType:{name:"string"},description:""},messages:{required:!1,tsType:{name:"CampaignWizardMessages"},description:""},className:{required:!1,tsType:{name:"string"},description:""}}}},"./packages/ui/src/components/cms/marketing/campaign/types.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{AB:()=>campaignChannelOptions,kU:()=>defaultCampaignValues,ln:()=>getCampaignPreview,vG:()=>campaignObjectives});const campaignChannelOptions=["email","sms","social","in-app","push"],campaignObjectives=["awareness","sales","retention","loyalty"],defaultCampaignValues={name:"",objective:"awareness",description:"",audience:"",budget:0,startDate:"",endDate:"",channels:["email"],kpi:"Conversions"};function getCampaignPreview(values){const timeframe=values.startDate&&values.endDate?`${values.startDate} → ${values.endDate}`:values.startDate?`Starts ${values.startDate}`:"Schedule pending";return{title:values.name||"Untitled campaign",objective:values.objective,timeframe,audienceSummary:values.audience||"Audience filters not configured yet.",channels:values.channels,budgetLabel:values.budget>0?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(values.budget):"Budget pending",kpi:values.kpi}}}}]);