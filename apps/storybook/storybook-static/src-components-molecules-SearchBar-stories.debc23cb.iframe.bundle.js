"use strict";(self.webpackChunk_apps_storybook=self.webpackChunk_apps_storybook||[]).push([[9148],{"../../packages/i18n/src/resolveText.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function resolveText(value,locale,t){if("string"==typeof value)return value;if("key"===(null==value?void 0:value.type))return t(value.key,value.params);if("inline"===(null==value?void 0:value.type)){const chain=function fallbackChain(locale){switch(locale){case"de":return["de","en"];case"it":return["it","en"];default:return["en"]}}(locale);for(const loc of chain){var _value_value;const v=null===(_value_value=value.value)||void 0===_value_value?void 0:_value_value[loc];if("string"==typeof v&&v.length>0)return v}return""}return""}__webpack_require__.d(__webpack_exports__,{W:()=>resolveText})},"../../packages/ui/src/components/molecules/SearchBar.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,PrefilledQuery:()=>PrefilledQuery,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var storybook_test__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("storybook/test");const __WEBPACK_DEFAULT_EXPORT__={component:__webpack_require__("../../packages/ui/src/components/molecules/SearchBar.tsx").I,parameters:{docs:{description:{component:"Typeahead search input with keyboard-accessible suggestions. Supply `suggestions` for local filtering or call `onSearch` to trigger server-side queries."}}},args:{suggestions:["Apple","Banana","Cherry","Date"],placeholder:"Searchâ€¦",label:"Search",onSelect:(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.fn)(),onSearch:(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.fn)()}},Default={play:async({canvasElement,args})=>{const selectSpy=args.onSelect,searchSpy=args.onSearch,canvas=(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.within)(canvasElement),input=await canvas.findByRole("searchbox",{name:/search/i});await storybook_test__WEBPACK_IMPORTED_MODULE_0__.userEvent.type(input,"Ban");const bananaOption=await canvas.findByRole("option",{name:"Banana"});await storybook_test__WEBPACK_IMPORTED_MODULE_0__.userEvent.click(bananaOption),await(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(selectSpy).toHaveBeenCalledWith("Banana"),await(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.waitFor)(()=>(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(canvas.queryByRole("listbox")).not.toBeInTheDocument()),await storybook_test__WEBPACK_IMPORTED_MODULE_0__.userEvent.clear(input),await storybook_test__WEBPACK_IMPORTED_MODULE_0__.userEvent.type(input,"Pear{enter}"),await(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.waitFor)(()=>(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(searchSpy).toHaveBeenCalledWith("Pear"))}},PrefilledQuery={args:{query:"sneakers",suggestions:["Sneakers","Sneakers green","Sneakers leather"]},parameters:{docs:{description:{story:"Populate the `query` prop to mirror a search term sourced from URL params or CMS filters."}}}},__namedExportsOrder=["Default","PrefilledQuery"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:'{\n  play: async ({\n    canvasElement,\n    args\n  }) => {\n    const selectSpy = args.onSelect as ReturnType<typeof fn>;\n    const searchSpy = args.onSearch as ReturnType<typeof fn>;\n    const canvas = within(canvasElement);\n    const input = await canvas.findByRole("searchbox", {\n      name: /search/i\n    });\n    await userEvent.type(input, "Ban");\n    const bananaOption = await canvas.findByRole("option", {\n      name: "Banana"\n    });\n    await userEvent.click(bananaOption);\n    await expect(selectSpy).toHaveBeenCalledWith("Banana");\n    await waitFor(() => expect(canvas.queryByRole("listbox")).not.toBeInTheDocument());\n    await userEvent.clear(input);\n    await userEvent.type(input, "Pear{enter}");\n    await waitFor(() => expect(searchSpy).toHaveBeenCalledWith("Pear"));\n  }\n}',...Default.parameters?.docs?.source}}},PrefilledQuery.parameters={...PrefilledQuery.parameters,docs:{...PrefilledQuery.parameters?.docs,source:{originalSource:'{\n  args: {\n    query: "sneakers",\n    suggestions: ["Sneakers", "Sneakers green", "Sneakers leather"]\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: "Populate the `query` prop to mirror a search term sourced from URL params or CMS filters."\n      }\n    }\n  }\n}',...PrefilledQuery.parameters?.docs?.source}}}},"../../packages/ui/src/components/molecules/SearchBar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>SearchBar});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_radix_ui_react_icons__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-icons@1.3.2_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-icons/dist/react-icons.esm.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_utils_style__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/ui/src/utils/style/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../packages/i18n/src/index.ts"),_i18n_resolveText__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../packages/i18n/src/resolveText.ts");function SearchBar({suggestions,onSelect,onSearch,placeholder,label,query:initialQuery="",locale="en"}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_4__.c3)(),[query,setQuery]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialQuery),[matches,setMatches]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[isSelecting,setIsSelecting]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[focused,setFocused]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[highlightedIndex,setHighlightedIndex]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(-1),inputId=(0,react__WEBPACK_IMPORTED_MODULE_1__.useId)();(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{setQuery(initialQuery)},[initialQuery]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{if(isSelecting||!focused)return setMatches(prev=>prev.length?[]:prev),void setHighlightedIndex(prev=>-1!==prev?-1:prev);if(!query)return setMatches(prev=>prev.length?[]:prev),void setHighlightedIndex(prev=>-1!==prev?-1:prev);const q=query.toLowerCase(),nextMatches=suggestions.filter(s=>s.toLowerCase().includes(q)).slice(0,5);setMatches(prev=>prev.length===nextMatches.length&&prev.every((v,i)=>v===nextMatches[i])?prev:nextMatches),setHighlightedIndex(prev=>-1!==prev?-1:prev)},[query,suggestions,isSelecting,focused]);const handleSelect=value=>{setIsSelecting(!0),setQuery(value),setMatches([]),null==onSelect||onSelect(value)};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"relative w-full sm:w-80",children:[" ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:inputId,className:"sr-only",children:label}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.pd,{id:inputId,type:"search","aria-label":label,value:query,onChange:e=>setQuery(e.target.value),onKeyDown:e=>{"ArrowDown"===e.key?(e.preventDefault(),matches.length>0&&setHighlightedIndex(prev=>(prev+1)%matches.length)):"ArrowUp"===e.key?(e.preventDefault(),matches.length>0&&setHighlightedIndex(prev=>(prev-1+matches.length)%matches.length)):"Enter"===e.key&&(highlightedIndex>=0&&matches[highlightedIndex]?(e.preventDefault(),handleSelect(matches[highlightedIndex])):(setMatches([]),null==onSearch||onSearch(query)))},onFocus:()=>setFocused(!0),onBlur:()=>{setFocused(!1),isSelecting?setIsSelecting(!1):null==onSearch||onSearch(query)},placeholder:placeholder?"string"==typeof placeholder?placeholder:(0,_i18n_resolveText__WEBPACK_IMPORTED_MODULE_5__.W)(placeholder,locale,t):t("search.placeholder"),className:"pe-8"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_icons__WEBPACK_IMPORTED_MODULE_6__.$p$,{className:"text-muted-foreground pointer-events-none absolute top-2 end-2 h-4 w-4"})," ",matches.length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("ul",{role:"listbox",className:"bg-background absolute mt-1 w-full rounded-md border shadow",children:matches.map((m,i)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("li",{id:`${inputId}-option-${i}`,role:"option","aria-selected":i===highlightedIndex,onMouseDown:()=>handleSelect(m),className:(0,_utils_style__WEBPACK_IMPORTED_MODULE_3__.cn)("text-fg hover:bg-accent hover:text-accent-foreground cursor-pointer px-3 py-1",i===highlightedIndex&&"bg-accent text-accent-foreground"),children:m},m))})]})}SearchBar.__docgenInfo={description:"",methods:[],displayName:"SearchBar",props:{suggestions:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"Suggestions to filter based on the search query"},placeholder:{required:!1,tsType:{name:"TranslatableText"},description:""},label:{required:!0,tsType:{name:"string"},description:"Accessible label for the search input"},query:{required:!1,tsType:{name:"string"},description:"Optional search query to display",defaultValue:{value:'""',computed:!1}},locale:{required:!1,tsType:{name:"Locale"},description:"Locale to resolve inline placeholder",defaultValue:{value:'"en"',computed:!1}}}}}}]);