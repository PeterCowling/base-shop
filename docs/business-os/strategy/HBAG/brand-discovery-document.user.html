<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Brand Discovery Document — Caryina</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;1,300;1,400&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;1,9..40,300;1,9..40,400&display=swap" rel="stylesheet" />
</head>
<body>

<script>
// ── THEME INIT (runs before DOMContentLoaded to avoid flash) ──
(function() {
  var saved = localStorage.getItem('brand-doc-theme');
  if (saved === 'dark') document.documentElement.setAttribute('data-theme', 'dark');
})();

// ═══════════════════════════════════════════════════════════════
// BUSINESS CONFIG — to reproduce this document for another
// business, change ONLY the values in this CONFIG object.
// The rendering code below is business-agnostic.
// ═══════════════════════════════════════════════════════════════

const CONFIG = {
  meta: {
    businessCode: "HBAG",
    businessName: "Caryina",
    tagline: "Un solo dettaglio. Quello carino.",
    taglineEN: "One detail. The cute one.",
    coreClaim: "Made to be shown. Considered detail. Use every day.",
    date: "February 2026",
    stage: "ASSESSMENT-12 Complete",
    market: "Italy (Positano) → EU via Etsy",
    tamNote: "€400M+ global bag charm market",
    priceRange: "€89–€149",
  },

  colours: {
    primary:      { hsl: "355 55% 75%", label: "Strawberry Milk", role: "Warm soft pink — CTA, brand mark; light enough to stay pastel but present enough to have character" },
    primaryFg:    { hsl: "355 12% 20%", label: "Deep Rose",      role: "Warm near-black with pink undertone — WCAG AA on strawberry milk; softer than stark black" },
    primarySoft:  { hsl: "355 40% 96%", label: "Strawberry Tint", role: "Barely-there tint — hover states, secondary surfaces"            },
    primaryHover: { hsl: "355 55% 68%", label: "Strawberry Hover", role: "Deeper strawberry milk for interactive hover"                   },
    accent:       { hsl: "130 18% 72%", label: "Light Warm Sage", role: "Pastel sage — lighter than a classic sage, clearly green; warm enough to harmonise with strawberry milk; recessive behind product imagery" },
    accentSoft:   { hsl: "130 15% 95%", label: "Sage Tint",     role: "Barely-there warm sage tint — tags, chips, focus rings"           },
    background:   { hsl: "38 18% 98%",  label: "Warm Ivory",    role: "Page background — warm near-white; lets product images lead"       },
    text:         { hsl: "355 12% 20%", label: "Deep Rose",     role: "Body copy — warm near-black with pink undertone; consistent with primary-fg" },
    textMuted:    { hsl: "355 8% 52%",  label: "Blush Grey",    role: "Secondary text, labels, captions — warm grey with slight pink undertone" },
    border:       { hsl: "355 12% 90%", label: "Blush Border",  role: "Soft warm border with pink undertone — separates elements without visual noise" },
    surface:      { hsl: "0 0% 100%",   label: "Surface",       role: "Pure white — card faces and inputs"                                },
  },

  // Five swatches to display in the palette section
  paletteDisplay: ["primary", "accent", "background", "primarySoft", "accentSoft"],

  // Dark mode colour overrides (rose-espresso family — warm near-black with pink undertone)
  darkColours: {
    background:   { hsl: "355 14% 10%", label: "Rose Espresso",    role: "Page background — warm near-black with rose undertone; editorial dark register"      },
    surface:      { hsl: "355 12% 16%", label: "Dark Warm Surface", role: "Card and input surfaces — lifted slightly from background"                           },
    text:         { hsl: "355 8% 92%",  label: "Warm Near-White",   role: "Body copy on dark — very light with slight pink warmth; avoids clinical cold-white"   },
    textMuted:    { hsl: "355 6% 55%",  label: "Mid Rose-Grey",     role: "Secondary text, captions — mid-tone in the rose-grey family"                         },
    border:       { hsl: "355 10% 22%", label: "Dark Rose Border",  role: "Dividers and card outlines on dark — subtle, warm-toned"                             },
    primary:      { hsl: "355 55% 75%", label: "Strawberry Milk",   role: "Unchanged — stands equally well on dark; brand colour consistency"                   },
    primaryFg:    { hsl: "355 14% 10%", label: "Rose Espresso",     role: "Foreground on Strawberry Milk in dark mode — matches bg for consistency"             },
    primarySoft:  { hsl: "355 30% 22%", label: "Dark Strawberry",   role: "Strawberry tint on dark — used for chips, badges, table headers"                    },
    primaryHover: { hsl: "355 55% 82%", label: "Strawberry Light",  role: "Hover state on dark — slightly lighter than base strawberry milk"                    },
    accent:       { hsl: "130 18% 62%", label: "Sage (dark)",       role: "Sage on dark — slightly richer than light-mode variant; still clearly recessive"     },
    accentSoft:   { hsl: "130 14% 18%", label: "Dark Sage Tint",    role: "Sage tint on dark — for tags and focus rings in dark mode"                          },
  },

  // Dual font system — heading serif + body humanist sans
  fonts: {
    heading: {
      family: "Cormorant Garamond",
      role: "Display headings",
      stack: "Georgia, serif",
      weights: [
        { weight: 300, label: "Light 300",   sample: "A visible detail, finished to be kept." },
        { weight: 400, label: "Regular 400", sample: "Made to be shown." },
        { weight: 500, label: "Medium 500",  sample: "Considered detail. Use every day." },
      ],
    },
    body: {
      family: "DM Sans",
      role: "Body copy and UI",
      stack: "system-ui, sans-serif",
      weights: [
        { weight: 300, label: "Light 300",   sample: "Designed for clarity at every size on mobile." },
        { weight: 400, label: "Regular 400", sample: "Clip-on in seconds. Holds securely. Finished for a crisp look up close." },
        { weight: 500, label: "Medium 500",  sample: "Cut clean. Finished by hand." },
      ],
    },
  },

  radius: { md: "4px", lg: "8px" },

  problem: "Fashion-conscious women who own premium handbags (LV/Gucci entry tier, €600–€1,500+) want distinctive accessories that personalise their bag — something that reads as genuinely crafted, not mass-produced. Existing options occupy two failing registers: cheap trend items that don't justify the spend, or over-styled statement pieces that compete with the bag. No brand holds the quiet-luxury position for bag accessories at the €80–€150 considered-purchase tier.",

  solution: "Caryina is an Italian-designed bag accessory brand — mini leather charms, AirPod holders, and compact hardware accessories. €89–€149 positioning. Editorial in register, not artisanal-craft. Designed and curated in Positano, Italy; manufactured to spec. Launches via Etsy + dedicated website, with in-destination boutique sales through Positano from June 2026. Discovery via TikTok and Instagram; purchase via owned and marketplace channels.",

  icps: [
    {
      id: "ICP-A",
      title: "Bag Charm Buyer",
      description: "Fashion-aware women, ~27–42",
      details: "Owns one or more bags at LV/Gucci entry tier (€600–€1,500+). Deliberates 3–7 days before purchasing. Discovers via TikTok/Instagram scroll; validates via Etsy search. Quality that reads real in hand and in photos matters more than brand recognition.",
      buyingFor: [
        "Personal expression for a bag she already loves",
        "Craft quality that justifies €80–€150",
        "Something distinctive — not mass-produced or pile-on charm energy",
      ],
    },
    {
      id: "ICP-B",
      title: "Gift Buyer",
      description: "Purchasing for women in ICP-A profile",
      details: "Birthdays, Christmas, milestone self-treats. Discovers via Instagram or Etsy search. Packaging and brand story do significant work — the insert card and unboxing moment are part of what they're paying for.",
      buyingFor: [
        "A considered gift for someone with taste",
        "Premium packaging that signals genuine effort",
        "A brand story worth telling when it arrives",
      ],
    },
  ],

  forecast: [
    { label: "Net Orders",    value: "42",      note: "90-day P50 (Etsy + in-destination)" },
    { label: "Net Revenue",   value: "~€2,787", note: "90-day P50"                         },
    { label: "First Signal",  value: "10",      note: "P10 target within 60 days"          },
    { label: "Margin Target", value: "≥35%",    note: "Contribution after all costs"       },
    { label: "Return Rate",   value: "<15%",    note: "Target ceiling — no benchmark yet"  },
  ],

  personality: [
    { positive: "Sophisticated", negative: "Showy"          },
    { positive: "Curated",       negative: "Cluttered"      },
    { positive: "Feminine",      negative: "Generic"        },
    { positive: "Confident",     negative: "Apologetic"     },
    { positive: "Tasteful",      negative: "Trend-chasing"  },
  ],

  keyPhrases: [
    { phrase: "Un solo dettaglio. Quello carino.", note: "Header tagline — appears after Caryina→Carina logo animation. Italian: 'One detail. The cute one.' Encodes single-piece philosophy and brand-name wordplay.", primary: true },
    { phrase: "Made to be shown.",           note: "Visibility, display — the accessory belongs on the bag, not in a drawer. Core line for hero layouts." },
    { phrase: "Considered detail.",      note: "Positions against charm pile-on; curated restraint as a positive choice."          },
    { phrase: "Use every day.",              note: "Daily use, versatility — justifies €80–€150 as a keeper piece, not a trend buy." },
    { phrase: "Cut clean. Finished by hand.", note: "Pairing line — anchors the craft claim in something tangible."                   },
    { phrase: "Styled once. Worn often.",    note: "Pairing line — versatility and repeat value across bag occasions."                },
  ],

  wordsToAvoid: [
    { term: "luxury / premium / exclusive",              reason: "Empty fashion filler without substantiation — show craft instead"       },
    { term: "fits all handbags",                         reason: "Unverified compatibility; be specific about attachment hardware"         },
    { term: "Birkin",                                    reason: "IP/trade dress risk — 2025 Paris Judicial Court ruling; do not use"     },
    { term: "statement piece / must-have / turn heads",  reason: "Hype language incompatible with curated restraint positioning"         },
  ],

  products: [
    { name: "Bag Charm (H1)",            status: "Launch hero",       description: "Mini leather bag charm. Highest demand signal (score 9/10). Photography hero; primary SKU for Etsy launch and Instagram content." },
    { name: "AirPod Holder (H2)",        status: "Launch co-primary", description: "AirPods Pro and AirPods 4 fit confirmed 2026-02-17. Functional and fashion hybrid — strong cross-sell from bag charm buyer." },
    { name: "Amalfi Edition (H3)",       status: "Seasonal",          description: "Location-variant with Amalfi Coast custom graphics. Requires supplier graphics capability confirmation before producing." },
    { name: "Dog Breed Variant (H4)",    status: "Deferred",          description: "Post-checkpoint — deferred until H1/H2 demand data justifies SKU expansion. No compliance barrier." },
    { name: "Children's First Bag (H5)", status: "Compliance gate",   description: "GPSR + REACH compliance required (~€1,000–3,000 cost). Blocked until compliance sign-off — do not launch without it." },
  ],

  namingJourney: {
    baseline: {
      label: "Working Title",
      name: "HBAG (internal)",
      outcome: "Replaced",
      note: "Internal code only — not a brandable name. A premium coined name was required before any public channel or Etsy shop could be created.",
    },
    rounds: [
      {
        label: "Rounds 1–2",
        count: 80,
        eliminated: 63,
        reason: "Domain taken or IP proximity risk",
        survivors: ["Celiena", "Feniore", "Bruneno", "Ponzatura", "Carivo"],
        rejected: [],
      },
      {
        label: "Round 3",
        count: 250,
        eliminated: 62,
        reason: ".com taken or score below threshold",
        survivors: ["Carevuleva", "Celiola", "Bruneva", "Feniavo", "Buralelova"],
        rejected: [],
      },
    ],
    selected: {
      name: "Caryina",
      rationale: "Warm, crafted-sounding coined name. Italian-aesthetic register. Feels fashion-adjacent without being generic. Pete confirmed 2026-02-21. caryina.com available.",
    },
  },

  nextSteps: [
    { id: 1, action: "Register domain",                detail: "caryina.com (and caryina.it) — required before any public channel goes live"                         },
    { id: 2, action: "TM pre-screen",                  detail: "EUIPO Classes 18 (leather goods) and 14 (jewellery/accessories) for Caryina"                        },
    { id: 3, action: "Create Caryina theme package",   detail: "packages/themes/caryina/src/tokens.ts — ✅ Done. Theme + app scaffold live at apps/caryina/ (port 3018)", done: true },
    { id: 4, action: "Product photography (TASK-06)",  detail: "Shoot H1 bag charm hero. Perception test gate: ≥3/5 cold reviewers estimate ≥€80 before listing"   },
    { id: 5, action: "Etsy shop setup",                detail: "Create Caryina Etsy shop. Blocked until TASK-06 photography gate passes"                            },
    { id: 6, action: "Instagram + TikTok accounts",    detail: "Create @caryina accounts — separate from Brikette hostel. Required before social demand probe"      },
    { id: 7, action: "Supplier quote (TASK-02)",       detail: "Unit cost, MOQ, and China→EU shipping per unit — gates all margin and pricing floor decisions"       },
  ],
};

// ═══════════════════════════════════════════════════════════════
// RENDERING ENGINE — business-agnostic from here down
// ═══════════════════════════════════════════════════════════════

function hsl(token) {
  return `hsl(${token})`;
}

function injectStyles() {
  const c = CONFIG.colours;
  const d = CONFIG.darkColours;
  const r = CONFIG.radius;
  const style = document.createElement("style");
  style.textContent = `
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --color-primary:       hsl(${c.primary.hsl});
      --color-primary-fg:    hsl(${c.primaryFg.hsl});
      --color-primary-soft:  hsl(${c.primarySoft.hsl});
      --color-primary-hover: hsl(${c.primaryHover.hsl});
      --color-accent:        hsl(${c.accent.hsl});
      --color-accent-soft:   hsl(${c.accentSoft.hsl});
      --color-bg:            hsl(${c.background.hsl});
      --color-text:          hsl(${c.text.hsl});
      --color-text-muted:    hsl(${c.textMuted.hsl});
      --color-border:        hsl(${c.border.hsl});
      --color-surface:       hsl(${c.surface.hsl});
      --radius-md: ${r.md};
      --radius-lg: ${r.lg};
      --font-heading: '${CONFIG.fonts.heading.family}', ${CONFIG.fonts.heading.stack};
      --font-body:    '${CONFIG.fonts.body.family}', ${CONFIG.fonts.body.stack};
      --max-w: 1100px;
      --section-gap: 5rem;
    }

    [data-theme="dark"] {
      --color-primary:       hsl(${d.primary.hsl});
      --color-primary-fg:    hsl(${d.primaryFg.hsl});
      --color-primary-soft:  hsl(${d.primarySoft.hsl});
      --color-primary-hover: hsl(${d.primaryHover.hsl});
      --color-accent:        hsl(${d.accent.hsl});
      --color-accent-soft:   hsl(${d.accentSoft.hsl});
      --color-bg:            hsl(${d.background.hsl});
      --color-text:          hsl(${d.text.hsl});
      --color-text-muted:    hsl(${d.textMuted.hsl});
      --color-border:        hsl(${d.border.hsl});
      --color-surface:       hsl(${d.surface.hsl});
    }

    html {
      font-family: var(--font-body);
      background: var(--color-bg);
      color: var(--color-text);
      scroll-behavior: smooth;
      transition: background 0.2s ease, color 0.2s ease;
    }

    body {
      min-height: 100vh;
    }

    /* ── HERO ── */
    .hero {
      background: var(--color-primary);
      color: var(--color-primary-fg);
      padding: 6rem 2rem 5rem;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    .hero::before {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(ellipse 80% 60% at 50% 120%, hsl(${c.primaryHover.hsl}) 0%, transparent 70%);
      pointer-events: none;
    }
    .hero-eyebrow {
      font-family: var(--font-body);
      font-size: 0.75rem;
      font-weight: 600;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      opacity: 0.75;
      margin-bottom: 1.25rem;
    }
    .hero-name {
      font-family: var(--font-heading);
      font-size: clamp(5rem, 14vw, 10rem);
      font-weight: 400;
      line-height: 0.95;
      letter-spacing: -0.01em;
      margin-bottom: 1.5rem;
    }
    .hero-tagline {
      font-family: var(--font-heading);
      font-size: clamp(1.1rem, 2.5vw, 1.5rem);
      font-weight: 300;
      font-style: italic;
      opacity: 0.9;
      max-width: 540px;
      margin: 0 auto 2rem;
      line-height: 1.5;
    }
    .hero-meta {
      display: flex;
      gap: 1.5rem;
      justify-content: center;
      flex-wrap: wrap;
      opacity: 0.7;
      font-size: 0.8rem;
      font-weight: 500;
      letter-spacing: 0.05em;
    }
    .hero-meta span::before {
      content: '·';
      margin-right: 0.5rem;
      opacity: 0.5;
    }
    .hero-meta span:first-child::before { display: none; }

    /* ── LAYOUT ── */
    .page-body {
      max-width: var(--max-w);
      margin: 0 auto;
      padding: 0 2rem;
    }

    .section {
      padding: var(--section-gap) 0;
      border-bottom: 1px solid var(--color-border);
    }
    .section:last-child { border-bottom: none; }

    .section-label {
      font-size: 0.7rem;
      font-weight: 600;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--color-accent);
      margin-bottom: 0.5rem;
    }
    .section-title {
      font-family: var(--font-heading);
      font-size: clamp(1.8rem, 4vw, 2.6rem);
      font-weight: 400;
      color: var(--color-text);
      margin-bottom: 0.75rem;
      letter-spacing: -0.01em;
      line-height: 1.1;
    }
    .section-subtitle {
      font-size: 1rem;
      color: var(--color-text-muted);
      max-width: 600px;
      line-height: 1.65;
      margin-bottom: 2.5rem;
    }

    /* ── PROBLEM / SOLUTION ── */
    .ps-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
    }
    @media (max-width: 680px) { .ps-grid { grid-template-columns: 1fr; } }

    .ps-card {
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      padding: 2rem 1.75rem;
    }
    .ps-card.problem { border-top: 4px solid hsl(${c.textMuted.hsl}); }
    .ps-card.solution { border-top: 4px solid var(--color-primary); }
    .ps-card-label {
      font-size: 0.7rem;
      font-weight: 600;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--color-text-muted);
      margin-bottom: 0.75rem;
    }
    .ps-card.solution .ps-card-label { color: var(--color-primary); }
    .ps-card-text {
      font-size: 1rem;
      line-height: 1.75;
      color: var(--color-text);
    }

    /* ── COLOUR PALETTE ── */
    .palette-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 1rem;
    }
    @media (max-width: 800px) {
      .palette-grid { grid-template-columns: repeat(3, 1fr); }
    }
    @media (max-width: 500px) {
      .palette-grid { grid-template-columns: repeat(2, 1fr); }
    }

    .swatch-card {
      border-radius: var(--radius-md);
      overflow: hidden;
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      box-shadow: 0 1px 3px rgba(0,0,0,0.06);
    }
    .swatch-rect {
      height: 90px;
      width: 100%;
    }
    .swatch-info {
      padding: 0.85rem 0.9rem;
    }
    .swatch-name {
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--color-text);
      margin-bottom: 0.2rem;
    }
    .swatch-hsl {
      font-size: 0.7rem;
      font-weight: 400;
      color: var(--color-text-muted);
      font-variant-numeric: tabular-nums;
      margin-bottom: 0.3rem;
    }
    .swatch-role {
      font-size: 0.68rem;
      color: var(--color-text-muted);
      line-height: 1.5;
    }

    /* ── TYPOGRAPHY ── */
    .type-section-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 0.75rem;
      margin-top: 1.5rem;
    }
    .type-section-header:first-child { margin-top: 0; }
    .type-section-name {
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--color-text);
      letter-spacing: 0.05em;
    }
    .type-section-role {
      font-size: 0.78rem;
      color: var(--color-text-muted);
    }
    .type-table {
      width: 100%;
      border-collapse: collapse;
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      overflow: hidden;
      margin-bottom: 2rem;
    }
    .type-table:last-child { margin-bottom: 0; }
    .type-table th {
      text-align: left;
      padding: 0.75rem 1.25rem;
      font-size: 0.7rem;
      font-weight: 600;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--color-text-muted);
      background: var(--color-primary-soft);
      border-bottom: 1px solid var(--color-border);
    }
    .type-table td {
      padding: 1.25rem 1.25rem;
      border-bottom: 1px solid var(--color-border);
      vertical-align: middle;
    }
    .type-table tr:last-child td { border-bottom: none; }
    .type-weight-label {
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--color-text-muted);
      white-space: nowrap;
      padding-right: 1.5rem;
      width: 130px;
    }
    .type-sample {
      font-size: 1.15rem;
      color: var(--color-text);
      line-height: 1.4;
    }

    /* ── PERSONALITY ── */
    .personality-grid {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .personality-row {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      flex-wrap: wrap;
    }
    .pill {
      display: inline-flex;
      align-items: center;
      padding: 0.45rem 1rem;
      border-radius: 999px;
      font-size: 0.85rem;
      font-weight: 600;
      white-space: nowrap;
    }
    .pill-positive {
      background: var(--color-primary);
      color: var(--color-primary-fg);
    }
    .pill-negative {
      background: var(--color-primary-soft);
      color: var(--color-text-muted);
      text-decoration: line-through;
      text-decoration-color: hsl(${c.textMuted.hsl});
    }
    .pill-not {
      font-size: 0.7rem;
      font-weight: 500;
      color: var(--color-text-muted);
      letter-spacing: 0.05em;
    }

    /* ── MESSAGING ── */
    .phrases-list {
      display: flex;
      flex-direction: column;
      gap: 0;
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      overflow: hidden;
    }
    .phrase-row {
      display: flex;
      align-items: flex-start;
      gap: 1.25rem;
      padding: 1.2rem 1.5rem;
      border-bottom: 1px solid var(--color-border);
    }
    .phrase-row:last-child { border-bottom: none; }
    .phrase-quote {
      font-family: var(--font-heading);
      font-size: 1.05rem;
      font-weight: 500;
      font-style: italic;
      color: var(--color-primary);
      flex: 0 0 auto;
      min-width: 240px;
    }
    .phrase-note {
      font-size: 0.9rem;
      color: var(--color-text-muted);
      line-height: 1.55;
      padding-top: 0.1rem;
    }
    .phrase-primary {
      background: var(--color-primary-soft);
      border-radius: var(--radius-md);
      border-left: 3px solid var(--color-primary);
    }
    .phrase-primary .phrase-quote { font-size: 1.15rem; }
    @media (max-width: 680px) {
      .phrase-row { flex-direction: column; gap: 0.3rem; }
      .phrase-quote { min-width: unset; }
    }

    .avoid-list {
      display: flex;
      flex-direction: column;
      gap: 0;
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      overflow: hidden;
      margin-top: 2rem;
    }
    .avoid-row {
      display: flex;
      align-items: flex-start;
      gap: 1.25rem;
      padding: 1.1rem 1.5rem;
      border-bottom: 1px solid var(--color-border);
    }
    .avoid-row:last-child { border-bottom: none; }
    .avoid-icon {
      font-size: 0.9rem;
      margin-top: 0.1rem;
      color: #c0392b;
      flex-shrink: 0;
    }
    .avoid-term {
      font-size: 0.92rem;
      font-weight: 600;
      color: var(--color-text);
      margin-bottom: 0.15rem;
    }
    .avoid-reason {
      font-size: 0.82rem;
      color: var(--color-text-muted);
    }

    /* ── ICP CARDS ── */
    .icp-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
    }
    @media (max-width: 680px) { .icp-grid { grid-template-columns: 1fr; } }

    .icp-card {
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-left: 4px solid var(--color-accent);
      border-radius: var(--radius-lg);
      padding: 2rem 1.75rem;
    }
    .icp-card:nth-child(2) { border-left-color: var(--color-primary); }
    .icp-id {
      font-size: 0.68rem;
      font-weight: 700;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--color-accent);
      margin-bottom: 0.4rem;
    }
    .icp-card:nth-child(2) .icp-id { color: var(--color-primary); }
    .icp-title {
      font-family: var(--font-heading);
      font-size: 1.4rem;
      font-weight: 400;
      color: var(--color-text);
      margin-bottom: 0.3rem;
    }
    .icp-desc {
      font-size: 0.9rem;
      color: var(--color-text-muted);
      margin-bottom: 0.25rem;
    }
    .icp-details {
      font-size: 0.85rem;
      color: var(--color-text-muted);
      margin-bottom: 1.1rem;
      line-height: 1.55;
    }
    .icp-buying-label {
      font-size: 0.7rem;
      font-weight: 600;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--color-text-muted);
      margin-bottom: 0.6rem;
    }
    .icp-buying-list {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
    }
    .icp-buying-list li {
      font-size: 0.88rem;
      color: var(--color-text);
      padding-left: 1.1rem;
      position: relative;
      line-height: 1.5;
    }
    .icp-buying-list li::before {
      content: '→';
      position: absolute;
      left: 0;
      color: var(--color-accent);
      font-size: 0.8rem;
    }
    .icp-card:nth-child(2) .icp-buying-list li::before { color: var(--color-primary); }

    /* ── FORECAST STATS ── */
    .forecast-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 1rem;
    }
    @media (max-width: 900px) { .forecast-grid { grid-template-columns: repeat(3, 1fr); } }
    @media (max-width: 560px) { .forecast-grid { grid-template-columns: repeat(2, 1fr); } }

    .stat-box {
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      padding: 1.5rem 1.25rem;
      text-align: center;
    }
    .stat-value {
      font-family: var(--font-heading);
      font-size: 2rem;
      font-weight: 400;
      color: var(--color-primary);
      letter-spacing: -0.02em;
      margin-bottom: 0.25rem;
      line-height: 1;
    }
    .stat-label {
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--color-text);
      margin-bottom: 0.2rem;
    }
    .stat-note {
      font-size: 0.72rem;
      color: var(--color-text-muted);
    }

    /* ── PRODUCTS ── */
    .products-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.25rem;
    }
    @media (max-width: 760px) { .products-grid { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 500px) { .products-grid { grid-template-columns: 1fr; } }

    .product-card {
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      padding: 1.5rem 1.35rem;
      transition: box-shadow 0.15s;
    }
    .product-card:hover {
      box-shadow: 0 4px 16px rgba(0,0,0,0.07);
    }
    .product-status {
      display: inline-flex;
      padding: 0.2rem 0.7rem;
      border-radius: 999px;
      font-size: 0.68rem;
      font-weight: 600;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      margin-bottom: 0.85rem;
    }
    .product-status.launch {
      background: var(--color-primary);
      color: var(--color-primary-fg);
    }
    .product-status.extension {
      background: var(--color-accent-soft);
      color: var(--color-accent);
    }
    .product-status.gate {
      background: hsl(${c.border.hsl});
      color: var(--color-text-muted);
    }
    .product-name {
      font-size: 1.05rem;
      font-weight: 700;
      color: var(--color-text);
      margin-bottom: 0.4rem;
    }
    .product-desc {
      font-size: 0.87rem;
      color: var(--color-text-muted);
      line-height: 1.6;
    }

    /* ── NAMING JOURNEY ── */
    .naming-timeline {
      display: flex;
      align-items: flex-start;
      gap: 0;
      overflow-x: auto;
      padding-bottom: 0.5rem;
    }
    .naming-node {
      flex: 1;
      min-width: 170px;
      position: relative;
    }
    .naming-node:not(:last-child)::after {
      content: '';
      position: absolute;
      top: 20px;
      right: -1px;
      width: calc(100% - 140px);
      height: 2px;
      background: var(--color-border);
      z-index: 0;
      left: 140px;
    }
    .naming-bubble {
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      padding: 1.1rem 1.1rem;
      position: relative;
      z-index: 1;
      margin-right: 1.5rem;
    }
    .naming-node.selected .naming-bubble {
      background: var(--color-primary);
      border-color: var(--color-primary);
      color: var(--color-primary-fg);
    }
    .naming-step-label {
      font-size: 0.65rem;
      font-weight: 700;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--color-text-muted);
      margin-bottom: 0.35rem;
    }
    .naming-node.selected .naming-step-label { color: rgba(248,240,228,0.75); }
    .naming-step-name {
      font-family: var(--font-heading);
      font-size: 1.05rem;
      font-weight: 400;
      color: var(--color-text);
      margin-bottom: 0.3rem;
    }
    .naming-node.selected .naming-step-name { color: var(--color-primary-fg); }
    .naming-step-outcome {
      font-size: 0.72rem;
      font-weight: 600;
      margin-bottom: 0.4rem;
    }
    .naming-step-outcome.rejected { color: #c0392b; }
    .naming-step-outcome.selected-outcome { color: rgba(248,240,228,0.9); }
    .naming-step-note {
      font-size: 0.75rem;
      color: var(--color-text-muted);
      line-height: 1.5;
    }
    .naming-node.selected .naming-step-note { color: rgba(248,240,228,0.8); }
    .naming-survivors {
      margin-top: 0.5rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.3rem;
    }
    .naming-tag {
      font-size: 0.68rem;
      font-weight: 500;
      padding: 0.18rem 0.55rem;
      border-radius: 999px;
      background: var(--color-primary-soft);
      color: var(--color-text-muted);
    }

    /* ── NEXT STEPS ── */
    .next-steps-list {
      display: flex;
      flex-direction: column;
      gap: 0;
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      overflow: hidden;
    }
    .next-step-row {
      display: flex;
      align-items: flex-start;
      gap: 1.25rem;
      padding: 1.2rem 1.5rem;
      border-bottom: 1px solid var(--color-border);
    }
    .next-step-row:last-child { border-bottom: none; }
    .step-num {
      width: 1.8rem;
      height: 1.8rem;
      border-radius: 50%;
      background: var(--color-primary);
      color: var(--color-primary-fg);
      font-size: 0.78rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      margin-top: 0.05rem;
    }
    .step-action {
      font-size: 0.95rem;
      font-weight: 600;
      color: var(--color-text);
      margin-bottom: 0.2rem;
    }
    .step-detail {
      font-size: 0.85rem;
      color: var(--color-text-muted);
      line-height: 1.55;
    }
    .step-done { opacity: 0.55; }
    .step-done .step-num {
      background: var(--color-accent);
      color: var(--color-primary-fg);
      font-size: 0.9rem;
    }
    .step-done .step-action { text-decoration: line-through; }

    /* ── THEME TOGGLE ── */
    .theme-toggle {
      position: fixed;
      top: 1.1rem;
      right: 1.4rem;
      z-index: 200;
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: 999px;
      padding: 0.35rem 0.85rem;
      font-family: var(--font-body);
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--color-text-muted);
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.4rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transition: background 0.15s, border-color 0.15s, color 0.15s, box-shadow 0.15s;
      letter-spacing: 0.03em;
    }
    .theme-toggle:hover {
      background: var(--color-primary-soft);
      border-color: var(--color-primary);
      color: var(--color-text);
      box-shadow: 0 3px 12px rgba(0,0,0,0.12);
    }
    .theme-toggle-icon {
      font-size: 0.85rem;
      line-height: 1;
    }

    /* ── FOOTER ── */
    .doc-footer {
      background: var(--color-primary);
      color: rgba(248,240,228,0.85);
      padding: 2.5rem 2rem;
      text-align: center;
      font-size: 0.82rem;
      line-height: 1.7;
    }
    .doc-footer strong { color: var(--color-primary-fg); }

    /* ── UTILITIES ── */
    .market-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: var(--color-accent-soft);
      color: var(--color-accent);
      padding: 0.35rem 0.9rem;
      border-radius: 999px;
      font-size: 0.78rem;
      font-weight: 600;
      margin-bottom: 2rem;
    }

    .divider {
      height: 1px;
      background: var(--color-border);
      margin: 0;
    }

    .claim-block {
      background: var(--color-primary-soft);
      border-left: 4px solid var(--color-primary);
      border-radius: 0 var(--radius-md) var(--radius-md) 0;
      padding: 1.25rem 1.5rem;
      font-family: var(--font-heading);
      font-size: 1.15rem;
      font-weight: 400;
      font-style: italic;
      color: var(--color-text);
      line-height: 1.65;
      margin-bottom: 2rem;
    }

    .two-col-label {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
    .two-col-label .sub-label {
      font-size: 0.8rem;
      color: var(--color-text-muted);
    }
  `;
  document.head.appendChild(style);
}

function renderHero() {
  const m = CONFIG.meta;
  return `
    <header class="hero">
      <div class="hero-eyebrow">Brand Discovery Document · ${m.businessCode} · ${m.stage}</div>
      <div class="hero-name">${m.businessName}</div>
      <div class="hero-tagline">${m.tagline}${m.taglineEN ? `<br/><span style="font-size:0.75em;opacity:0.7;font-style:normal;">${m.taglineEN}</span>` : ''}</div>
      <div class="hero-meta">
        <span>${m.date}</span>
        <span>${m.market}</span>
        <span>${m.priceRange}</span>
        <span>${m.tamNote}</span>
      </div>
    </header>
  `;
}

function renderProblemSolution() {
  return `
    <section class="section">
      <div class="section-label">Foundation</div>
      <div class="section-title">Problem &amp; Solution</div>
      <div class="claim-block">"${CONFIG.meta.coreClaim}"</div>
      <div class="ps-grid">
        <div class="ps-card problem">
          <div class="ps-card-label">The Problem</div>
          <p class="ps-card-text">${CONFIG.problem}</p>
        </div>
        <div class="ps-card solution">
          <div class="ps-card-label">The Solution</div>
          <p class="ps-card-text">${CONFIG.solution}</p>
        </div>
      </div>
    </section>
  `;
}

function makeSwatch(c) {
  // Detect whether text on this swatch should be dark or light
  // by approximating perceived lightness from the HSL L value
  const parts = c.hsl.split(' ');
  const l = parseFloat(parts[2]);
  const labelColor = l > 55 ? '#1a0f10' : '#f5eeee';
  return `
    <div class="swatch-card">
      <div class="swatch-rect" style="background: hsl(${c.hsl}); position:relative;">
        <span style="position:absolute;bottom:7px;left:9px;font-size:0.67rem;font-weight:600;letter-spacing:0.04em;opacity:0.75;color:${labelColor};">${c.label}</span>
      </div>
      <div class="swatch-info">
        <div class="swatch-hsl">hsl(${c.hsl})</div>
        <div class="swatch-role">${c.role}</div>
      </div>
    </div>
  `;
}

function renderPalette() {
  const lightSwatches = CONFIG.paletteDisplay.map(key => makeSwatch(CONFIG.colours[key])).join('');

  // Dark palette — show same logical roles in dark equivalents
  const darkKeys = ['primary', 'accent', 'background', 'primarySoft', 'accentSoft'];
  const darkSwatches = darkKeys.map(key => makeSwatch(CONFIG.darkColours[key])).join('');

  // Dark mode preview strip — show surface + text + border on a dark bg card
  const d = CONFIG.darkColours;
  const darkPreview = `
    <div class="palette-preview-dark" style="
      grid-column: 1 / -1;
      background: hsl(${d.background.hsl});
      border-radius: var(--radius-lg);
      padding: 1.5rem 1.75rem;
      border: 1px solid hsl(${d.border.hsl});
      display: flex;
      align-items: center;
      gap: 2rem;
      flex-wrap: wrap;
      margin-top: 0.75rem;
    ">
      <div>
        <div style="font-size:0.65rem;font-weight:700;letter-spacing:0.16em;text-transform:uppercase;color:hsl(${d.textMuted.hsl});margin-bottom:0.4rem;">Dark Surface</div>
        <div style="width:3.5rem;height:3.5rem;border-radius:var(--radius-md);background:hsl(${d.surface.hsl});border:1px solid hsl(${d.border.hsl});"></div>
        <div style="font-size:0.68rem;color:hsl(${d.textMuted.hsl});margin-top:0.3rem;">hsl(${d.surface.hsl})</div>
      </div>
      <div>
        <div style="font-size:0.65rem;font-weight:700;letter-spacing:0.16em;text-transform:uppercase;color:hsl(${d.textMuted.hsl});margin-bottom:0.4rem;">Body Text</div>
        <div style="font-size:1.05rem;font-weight:600;color:hsl(${d.text.hsl});">Aa</div>
        <div style="font-size:0.68rem;color:hsl(${d.textMuted.hsl});margin-top:0.2rem;">hsl(${d.text.hsl})</div>
      </div>
      <div>
        <div style="font-size:0.65rem;font-weight:700;letter-spacing:0.16em;text-transform:uppercase;color:hsl(${d.textMuted.hsl});margin-bottom:0.4rem;">Muted Text</div>
        <div style="font-size:1.05rem;font-weight:600;color:hsl(${d.textMuted.hsl});">Aa</div>
        <div style="font-size:0.68rem;color:hsl(${d.textMuted.hsl});margin-top:0.2rem;">hsl(${d.textMuted.hsl})</div>
      </div>
      <div>
        <div style="font-size:0.65rem;font-weight:700;letter-spacing:0.16em;text-transform:uppercase;color:hsl(${d.textMuted.hsl});margin-bottom:0.4rem;">CTA on Dark</div>
        <div style="display:inline-block;background:hsl(${d.primary.hsl});color:hsl(${d.primaryFg.hsl});padding:0.3rem 0.9rem;border-radius:999px;font-size:0.82rem;font-weight:600;">Button</div>
      </div>
      <div>
        <div style="font-size:0.65rem;font-weight:700;letter-spacing:0.16em;text-transform:uppercase;color:hsl(${d.textMuted.hsl});margin-bottom:0.4rem;">Accent Tag</div>
        <div style="display:inline-block;background:hsl(${d.accentSoft.hsl});color:hsl(${d.accent.hsl});padding:0.3rem 0.9rem;border-radius:999px;font-size:0.82rem;font-weight:600;">Tag</div>
      </div>
    </div>
  `;

  return `
    <section class="section">
      <div class="section-label">Visual Identity</div>
      <div class="section-title">Colour Palette</div>
      <p class="section-subtitle">Warm pastels — strawberry milk and muted sage — deliberately recessive. Product images lead; site chrome steps back.</p>

      <div class="two-col-label" style="margin-bottom:0.75rem;">
        <span style="font-size:0.72rem;font-weight:700;letter-spacing:0.14em;text-transform:uppercase;color:var(--color-text-muted);">Light Mode</span>
      </div>
      <div class="palette-grid">
        ${lightSwatches}
      </div>

      <div class="two-col-label" style="margin-top:2rem;margin-bottom:0.75rem;">
        <span style="font-size:0.72rem;font-weight:700;letter-spacing:0.14em;text-transform:uppercase;color:var(--color-text-muted);">Dark Mode</span>
        <span style="font-size:0.72rem;color:var(--color-text-muted);">Rose-espresso family — warm near-black with pink undertone</span>
      </div>
      <div class="palette-grid" style="margin-bottom:0;">
        ${darkSwatches}
      </div>
      <div class="palette-grid" style="grid-template-columns:1fr;">
        ${darkPreview}
      </div>
    </section>
  `;
}

function renderTypography() {
  function fontTable(font) {
    const rows = font.weights.map(w => `
      <tr>
        <td class="type-weight-label">${w.label}</td>
        <td class="type-sample" style="font-weight: ${w.weight}; font-family: '${font.family}', ${font.stack};">${w.sample}</td>
      </tr>
    `).join('');
    return `
      <div class="type-section-header">
        <span class="type-section-name">${font.family}</span>
        <span class="type-section-role">${font.role}</span>
      </div>
      <table class="type-table">
        <thead>
          <tr>
            <th>Weight</th>
            <th>Specimen</th>
          </tr>
        </thead>
        <tbody>
          ${rows}
        </tbody>
      </table>
    `;
  }

  return `
    <section class="section">
      <div class="section-label">Visual Identity</div>
      <div class="section-title">Typography — Dual Font System</div>
      <p class="section-subtitle">Cormorant Garamond for editorial display headings; DM Sans for body copy and UI. Both via Google Fonts — no paid fonts required.</p>
      ${fontTable(CONFIG.fonts.heading)}
      ${fontTable(CONFIG.fonts.body)}
    </section>
  `;
}

function renderPersonality() {
  const rows = CONFIG.personality.map(p => `
    <div class="personality-row">
      <span class="pill pill-positive">${p.positive}</span>
      <span class="pill-not">not</span>
      <span class="pill pill-negative">${p.negative}</span>
    </div>
  `).join('');

  return `
    <section class="section">
      <div class="section-label">Brand Character</div>
      <div class="section-title">Personality Pairs</div>
      <p class="section-subtitle">Five tension pairs define what ${CONFIG.meta.businessName} is — and what it deliberately refuses to become.</p>
      <div class="personality-grid">
        ${rows}
      </div>
    </section>
  `;
}

function renderIcps() {
  const cards = CONFIG.icps.map(icp => `
    <div class="icp-card">
      <div class="icp-id">${icp.id}</div>
      <div class="icp-title">${icp.title}</div>
      <div class="icp-desc">${icp.description}</div>
      <div class="icp-details">${icp.details}</div>
      <div class="icp-buying-label">Buying for</div>
      <ul class="icp-buying-list">
        ${icp.buyingFor.map(b => `<li>${b}</li>`).join('')}
      </ul>
    </div>
  `).join('');

  return `
    <section class="section">
      <div class="section-label">Audience</div>
      <div class="section-title">Ideal Customer Profiles</div>
      <p class="section-subtitle">Two purchase profiles with distinct drivers. ICP-A drives volume; ICP-B drives AOV and packaging investment.</p>
      <div class="icp-grid">
        ${cards}
      </div>
    </section>
  `;
}

function renderForecast() {
  const stats = CONFIG.forecast.map(s => `
    <div class="stat-box">
      <div class="stat-value">${s.value}</div>
      <div class="stat-label">${s.label}</div>
      <div class="stat-note">${s.note}</div>
    </div>
  `).join('');

  return `
    <section class="section">
      <div class="section-label">Performance</div>
      <div class="section-title">90-Day Launch Forecast</div>
      <p class="section-subtitle">P50 targets for the initial 90-day window. Unit economics pending TASK-02 supplier quote — margin targets are constraints, not projections.</p>
      <div class="forecast-grid">
        ${stats}
      </div>
    </section>
  `;
}

function renderMessaging() {
  const phrases = CONFIG.keyPhrases.map(p => `
    <div class="phrase-row${p.primary ? ' phrase-primary' : ''}">
      <div class="phrase-quote">"${p.phrase}"</div>
      <div class="phrase-note">${p.note}</div>
    </div>
  `).join('');

  const avoids = CONFIG.wordsToAvoid.map(a => `
    <div class="avoid-row">
      <div class="avoid-icon">✕</div>
      <div>
        <div class="avoid-term">"${a.term}"</div>
        <div class="avoid-reason">${a.reason}</div>
      </div>
    </div>
  `).join('');

  return `
    <section class="section">
      <div class="section-label">Messaging</div>
      <div class="section-title">Key Phrases &amp; Language Rules</div>
      <p class="section-subtitle">Header tagline plus five supporting lines for all copy. Four hard stops that must never appear in customer-facing text.</p>
      <div class="two-col-label">
        <span style="font-size:0.75rem;font-weight:600;letter-spacing:0.1em;text-transform:uppercase;color:var(--color-text-muted);">Use these</span>
      </div>
      <div class="phrases-list">
        ${phrases}
      </div>
      <div class="two-col-label" style="margin-top:2rem;">
        <span style="font-size:0.75rem;font-weight:600;letter-spacing:0.1em;text-transform:uppercase;color:#c0392b;">Never use</span>
      </div>
      <div class="avoid-list">
        ${avoids}
      </div>
    </section>
  `;
}

function productStatusClass(status) {
  if (status === "Launch hero" || status === "Launch co-primary") return "launch";
  if (status.includes("gate")) return "gate";
  return "extension";
}

function renderProducts() {
  const cards = CONFIG.products.map(p => `
    <div class="product-card">
      <div class="product-status ${productStatusClass(p.status)}">${p.status}</div>
      <div class="product-name">${p.name}</div>
      <div class="product-desc">${p.description}</div>
    </div>
  `).join('');

  return `
    <section class="section">
      <div class="section-label">Product Range</div>
      <div class="section-title">Product Lineup</div>
      <p class="section-subtitle">Five variants across launch, seasonal, deferred, and compliance-gate phases. H1 bag charm and H2 AirPod holder anchor the launch offer.</p>
      <div class="products-grid">
        ${cards}
      </div>
    </section>
  `;
}

function renderNamingJourney() {
  const nj = CONFIG.namingJourney;

  const nodes = [
    // Baseline
    `<div class="naming-node">
      <div class="naming-bubble">
        <div class="naming-step-label">${nj.baseline.label}</div>
        <div class="naming-step-name">${nj.baseline.name}</div>
        <div class="naming-step-outcome rejected">${nj.baseline.outcome}</div>
        <div class="naming-step-note">${nj.baseline.note}</div>
      </div>
    </div>`,
    // Round 1+2
    `<div class="naming-node">
      <div class="naming-bubble">
        <div class="naming-step-label">${nj.rounds[0].label} · ~${nj.rounds[0].count} names</div>
        <div class="naming-step-name">${nj.rounds[0].eliminated} eliminated</div>
        <div class="naming-step-outcome rejected">${nj.rounds[0].reason}</div>
        <div class="naming-step-note">${nj.rounds[0].survivors.length} survived</div>
        <div class="naming-survivors">
          ${nj.rounds[0].survivors.map(s => `<span class="naming-tag">${s}</span>`).join('')}
        </div>
      </div>
    </div>`,
    // Round 3
    `<div class="naming-node">
      <div class="naming-bubble">
        <div class="naming-step-label">${nj.rounds[1].label} · ${nj.rounds[1].count} names</div>
        <div class="naming-step-name">${nj.rounds[1].eliminated} .com taken</div>
        <div class="naming-step-outcome rejected">${nj.rounds[1].reason}</div>
        <div class="naming-step-note">188 .com available — top 20 by score presented</div>
        <div class="naming-survivors">
          ${nj.rounds[1].survivors.map(s => `<span class="naming-tag">${s}</span>`).join('')}
        </div>
      </div>
    </div>`,
    // Selected
    `<div class="naming-node selected">
      <div class="naming-bubble">
        <div class="naming-step-label">Selected</div>
        <div class="naming-step-name">${nj.selected.name} ✓</div>
        <div class="naming-step-outcome selected-outcome">Confirmed by Pete</div>
        <div class="naming-step-note">${nj.selected.rationale}</div>
      </div>
    </div>`,
  ];

  return `
    <section class="section">
      <div class="section-label">Naming</div>
      <div class="section-title">Naming Journey</div>
      <p class="section-subtitle">From internal working code through three systematic research rounds to a confirmed, ownable name with domain availability verified.</p>
      <div class="naming-timeline">
        ${nodes.join('')}
      </div>
    </section>
  `;
}

function renderNextSteps() {
  const rows = CONFIG.nextSteps.map(s => `
    <div class="next-step-row${s.done ? ' step-done' : ''}">
      <div class="step-num">${s.done ? '✓' : s.id}</div>
      <div>
        <div class="step-action">${s.action}</div>
        <div class="step-detail">${s.detail}</div>
      </div>
    </div>
  `).join('');

  return `
    <section class="section">
      <div class="section-label">Execution</div>
      <div class="section-title">Next Steps</div>
      <p class="section-subtitle">Seven actions required to move from ASSESSMENT-12 Complete to launch-ready state. Step 3 complete — steps 1–2 unblock everything downstream.</p>
      <div class="next-steps-list">
        ${rows}
      </div>
    </section>
  `;
}

function renderFooter() {
  const m = CONFIG.meta;
  return `
    <footer class="doc-footer">
      <strong>${m.businessName}</strong> · Brand Discovery Document · ${m.stage}<br/>
      ${m.date} · Business code: ${m.businessCode} · Market: ${m.market}<br/>
      <span style="opacity:0.6;font-size:0.75rem;">Generated by Base-Shop Business OS · Confidential</span>
    </footer>
  `;
}

function toggleTheme() {
  const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
  const next = isDark ? 'light' : 'dark';
  document.documentElement.setAttribute('data-theme', next);
  localStorage.setItem('brand-doc-theme', next);
  updateToggleButton(next);
}

function updateToggleButton(theme) {
  const icon = document.getElementById('theme-toggle-icon');
  const label = document.getElementById('theme-toggle-label');
  if (!icon || !label) return;
  if (theme === 'dark') {
    icon.textContent = '○';
    label.textContent = 'Light';
  } else {
    icon.textContent = '●';
    label.textContent = 'Dark';
  }
}

function renderThemeToggle() {
  const btn = document.createElement('button');
  btn.className = 'theme-toggle';
  btn.setAttribute('onclick', 'toggleTheme()');
  btn.setAttribute('title', 'Toggle dark / light mode');
  btn.setAttribute('aria-label', 'Toggle dark / light mode');
  btn.innerHTML = '<span class="theme-toggle-icon" id="theme-toggle-icon">●</span><span id="theme-toggle-label">Dark</span>';
  document.body.appendChild(btn);
}

function render() {
  injectStyles();
  renderThemeToggle();

  const app = document.getElementById("app");
  app.innerHTML = `
    ${renderHero()}
    <div class="page-body">
      ${renderProblemSolution()}
      ${renderPalette()}
      ${renderTypography()}
      ${renderPersonality()}
      ${renderIcps()}
      ${renderForecast()}
      ${renderMessaging()}
      ${renderProducts()}
      ${renderNamingJourney()}
      ${renderNextSteps()}
    </div>
    ${renderFooter()}
  `;

  // Sync button state with saved theme
  const saved = localStorage.getItem('brand-doc-theme') || 'light';
  updateToggleButton(saved);
}

document.addEventListener("DOMContentLoaded", render);
</script>

<div id="app"></div>

</body>
</html>
