"use strict";(self.webpackChunkcms_monorepo=self.webpackChunkcms_monorepo||[]).push([[3893],{"./packages/ui/src/components/cms/page-builder/GridContainerEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>GridContainerEditor});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),shadcn=__webpack_require__("./packages/ui/src/components/atoms/shadcn/index.ts"),react=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js"),Grid=__webpack_require__("./packages/ui/src/components/atoms/primitives/Grid.tsx");function serializeAreas(matrix){return Array.isArray(matrix)&&0!==matrix.length?matrix.map(row=>`"${row.join(" ")}"`).join("\n"):""}function GridAreasEditor({value,columns,rows,onChange}){const initial=(0,react.useMemo)(()=>function parseAreas(value){const raw=(null!=value?value:"").trim();return raw?raw.split(/\n+/).map(l=>l.trim().replace(/^"|"$/g,"")).filter(Boolean).map(line=>line.split(/\s+/)):[]}(value),[value]),initCols=Math.max(columns||0,initial.reduce((max,r)=>Math.max(max,r.length),0)),initRows=Math.max(rows||0,initial.length),[cols,setCols]=(0,react.useState)(Math.max(1,initCols||4)),[rws,setRws]=(0,react.useState)(Math.max(1,initRows||2)),[matrix,setMatrix]=(0,react.useState)(()=>{const m=[];for(let y=0;y<Math.max(1,initRows||2);y++){const row=[];for(let x=0;x<Math.max(1,initCols||4);x++){var _initial_y,_initial_y_x;row.push(null!==(_initial_y_x=null===(_initial_y=initial[y])||void 0===_initial_y?void 0:_initial_y[x])&&void 0!==_initial_y_x?_initial_y_x:".")}m.push(row)}return m}),names=(0,react.useMemo)(()=>{const s=new Set;return matrix.forEach(row=>row.forEach(c=>{c&&"."!==c&&s.add(c)})),Array.from(s.values())},[matrix]);var _names_;const[brush,setBrush]=(0,react.useState)(null!==(_names_=names[0])&&void 0!==_names_?_names_:"a"),[newName,setNewName]=(0,react.useState)(""),resize=(nextRows,nextCols)=>{const nr=Math.max(1,Math.min(20,0|nextRows)),nc=Math.max(1,Math.min(20,0|nextCols)),out=[];for(let y=0;y<nr;y++){const row=[];for(let x=0;x<nc;x++){var _matrix_y,_matrix_y_x;row.push(null!==(_matrix_y_x=null===(_matrix_y=matrix[y])||void 0===_matrix_y?void 0:_matrix_y[x])&&void 0!==_matrix_y_x?_matrix_y_x:".")}out.push(row)}setRws(nr),setCols(nc),setMatrix(out)};return(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,jsx_runtime.jsx)(shadcn.pd,{label:"Columns",type:"number",value:String(cols),onChange:e=>resize(rws,parseInt(e.target.value||"1",10))}),(0,jsx_runtime.jsx)(shadcn.pd,{label:"Rows",type:"number",value:String(rws),onChange:e=>resize(parseInt(e.target.value||"1",10),cols)}),(0,jsx_runtime.jsxs)(shadcn.l6,{value:brush,onValueChange:setBrush,children:[(0,jsx_runtime.jsx)(shadcn.bq,{children:(0,jsx_runtime.jsx)(shadcn.yv,{placeholder:"Brush"})}),(0,jsx_runtime.jsxs)(shadcn.gC,{children:[0===names.length&&(0,jsx_runtime.jsx)(shadcn.eb,{value:".",children:"."}),names.map(n=>(0,jsx_runtime.jsx)(shadcn.eb,{value:n,children:n},n)),(0,jsx_runtime.jsx)(shadcn.eb,{value:".",children:"."})]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-end gap-2",children:[(0,jsx_runtime.jsx)(shadcn.pd,{label:"Add area",placeholder:"name",value:newName,onChange:e=>setNewName(e.target.value)}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:()=>{const v=newName.trim();v&&(setNewName(""),setBrush(v))},children:"Add"})]})]}),(0,jsx_runtime.jsx)("div",{className:"rounded border p-2",children:(0,jsx_runtime.jsx)(Grid.x,{gap:0,className:"gap-px",style:{gridTemplateColumns:`repeat(${cols}, minmax(0, 1fr))`},children:Array.from({length:rws}).map((_,y)=>(0,jsx_runtime.jsx)(react.Fragment,{children:Array.from({length:cols}).map((__,x)=>{var _matrix_y,_matrix_y_x;return(0,jsx_runtime.jsx)("button",{type:"button",className:"bg-muted/40 hover:bg-muted rounded p-2 text-center text-xs min-h-10 min-w-10",onClick:()=>((y,x)=>{setMatrix(prev=>prev.map((row,ry)=>row.map((cell,cx)=>ry===y&&cx===x?brush:cell)))})(y,x),title:`Row ${y+1}, Col ${x+1}`,children:null!==(_matrix_y_x=null===(_matrix_y=matrix[y])||void 0===_matrix_y?void 0:_matrix_y[x])&&void 0!==_matrix_y_x?_matrix_y_x:"."},`cell-${y}-${x}`)})},`row-${y}`))})}),(0,jsx_runtime.jsx)("div",{className:"flex justify-end",children:(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:()=>{onChange({areas:serializeAreas(matrix),columns:cols,rows:rws})},children:"Apply areas"})})]})}GridAreasEditor.__docgenInfo={description:"",methods:[],displayName:"GridAreasEditor",props:{value:{required:!1,tsType:{name:"string"},description:""},columns:{required:!1,tsType:{name:"number"},description:""},rows:{required:!1,tsType:{name:"number"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(next: { areas: string; columns: number; rows: number }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ areas: string; columns: number; rows: number }",signature:{properties:[{key:"areas",value:{name:"string",required:!0}},{key:"columns",value:{name:"number",required:!0}},{key:"rows",value:{name:"number",required:!0}}]}},name:"next"}],return:{name:"void"}}},description:""}}};var src=__webpack_require__("./packages/i18n/src/index.ts");function GridContainerEditor({component,onChange}){const handle=(field,value)=>onChange({[field]:value}),[areasOpen,setAreasOpen]=react.useState(!1),t=(0,src.c3)();var _component_columns,_component_columnsDesktop,_component_columnsTablet,_component_columnsMobile,_component_areas,_component_autoFlow,_component_rows,_component_rowsDesktop,_component_rowsTablet,_component_rowsMobile,_component_rowHeights,_component_gap,_component_gapDesktop,_component_gapTablet,_component_gapMobile,_component_minColWidth,_component_justifyItems,_component_alignItems;return(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-xs font-semibold text-muted-foreground",children:t("cms.builder.grid.presets")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",className:"h-8 px-2 py-1 text-xs",variant:"outline",onClick:()=>onChange({columns:2,gap:"1rem",areas:void 0}),children:t("cms.builder.grid.presets.cols.2")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",className:"h-8 px-2 py-1 text-xs",variant:"outline",onClick:()=>onChange({columns:3,gap:"1rem",areas:void 0}),children:t("cms.builder.grid.presets.cols.3")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",className:"h-8 px-2 py-1 text-xs",variant:"outline",onClick:()=>onChange({columns:4,gap:"1rem",areas:void 0}),children:t("cms.builder.grid.presets.cols.4")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",className:"h-8 px-2 py-1 text-xs",variant:"outline",title:t("cms.builder.grid.presets.collage121.title"),onClick:()=>onChange({columns:4,gap:"1rem",rows:2,areas:'"a b b c"\n"a b b c"'}),children:t("cms.builder.grid.presets.collage121.label")})]}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,jsx_runtime.jsx)(shadcn.pd,{label:t("cms.builder.grid.cols.base"),type:"number",value:null!==(_component_columns=component.columns)&&void 0!==_component_columns?_component_columns:"",onChange:e=>handle("columns",""===e.target.value?void 0:Number(e.target.value))}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("cms.builder.grid.cols.desktop"),type:"number",value:null!==(_component_columnsDesktop=component.columnsDesktop)&&void 0!==_component_columnsDesktop?_component_columnsDesktop:"",onChange:e=>handle("columnsDesktop",""===e.target.value?void 0:Number(e.target.value))}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("cms.builder.grid.cols.tablet"),type:"number",value:null!==(_component_columnsTablet=component.columnsTablet)&&void 0!==_component_columnsTablet?_component_columnsTablet:"",onChange:e=>handle("columnsTablet",""===e.target.value?void 0:Number(e.target.value))}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("cms.builder.grid.cols.mobile"),type:"number",value:null!==(_component_columnsMobile=component.columnsMobile)&&void 0!==_component_columnsMobile?_component_columnsMobile:"",onChange:e=>handle("columnsMobile",""===e.target.value?void 0:Number(e.target.value))})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between",children:[(0,jsx_runtime.jsx)("label",{className:"text-xs font-semibold text-muted-foreground",children:t("cms.builder.grid.templateAreas.label")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:areasOpen?"default":"outline",className:"h-7 px-2 text-xs",onClick:()=>setAreasOpen(v=>!v),children:t(areasOpen?"cms.builder.grid.templateAreas.toggle.closeEditor":"cms.builder.grid.templateAreas.toggle.editVisually")})]}),!areasOpen&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(shadcn.pd,{label:"",value:null!==(_component_areas=component.areas)&&void 0!==_component_areas?_component_areas:"",onChange:e=>handle("areas",e.target.value||void 0),placeholder:t("cms.builder.grid.templateAreas.placeholder")}),(0,jsx_runtime.jsx)("p",{className:"text-xs text-muted-foreground",children:t("cms.builder.grid.templateAreas.help")})]}),areasOpen&&(0,jsx_runtime.jsx)(GridAreasEditor,{value:component.areas,columns:Number(component.columns)||void 0,rows:Number(component.rows)||void 0,onChange:next=>{onChange({areas:next.areas||void 0,columns:next.columns||void 0,rows:next.rows||void 0})}})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"mb-1 block text-xs font-semibold text-muted-foreground",children:t("cms.builder.grid.autoFlow.label")}),(0,jsx_runtime.jsxs)(shadcn.l6,{value:null!==(_component_autoFlow=component.autoFlow)&&void 0!==_component_autoFlow?_component_autoFlow:"",onValueChange:v=>handle("autoFlow",v||void 0),children:[(0,jsx_runtime.jsx)(shadcn.bq,{children:(0,jsx_runtime.jsx)(shadcn.yv,{placeholder:t("cms.builder.grid.autoFlow.placeholder")})}),(0,jsx_runtime.jsxs)(shadcn.gC,{children:[(0,jsx_runtime.jsx)(shadcn.eb,{value:"row",children:t("cms.builder.grid.autoFlow.option.row")}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"column",children:t("cms.builder.grid.autoFlow.option.column")}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"dense",children:t("cms.builder.grid.autoFlow.option.dense")}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"row dense",children:t("cms.builder.grid.autoFlow.option.rowDense")}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"column dense",children:t("cms.builder.grid.autoFlow.option.columnDense")})]})]})]}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,jsx_runtime.jsx)(shadcn.pd,{label:t("cms.builder.grid.rows.base"),type:"number",value:null!==(_component_rows=component.rows)&&void 0!==_component_rows?_component_rows:"",onChange:e=>handle("rows",""===e.target.value?void 0:Number(e.target.value))}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("cms.builder.grid.rows.desktop"),type:"number",value:null!==(_component_rowsDesktop=component.rowsDesktop)&&void 0!==_component_rowsDesktop?_component_rowsDesktop:"",onChange:e=>handle("rowsDesktop",""===e.target.value?void 0:Number(e.target.value))}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("cms.builder.grid.rows.tablet"),type:"number",value:null!==(_component_rowsTablet=component.rowsTablet)&&void 0!==_component_rowsTablet?_component_rowsTablet:"",onChange:e=>handle("rowsTablet",""===e.target.value?void 0:Number(e.target.value))}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("cms.builder.grid.rows.mobile"),type:"number",value:null!==(_component_rowsMobile=component.rowsMobile)&&void 0!==_component_rowsMobile?_component_rowsMobile:"",onChange:e=>handle("rowsMobile",""===e.target.value?void 0:Number(e.target.value))})]}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("cms.builder.grid.rowHeights.label"),value:null!==(_component_rowHeights=component.rowHeights)&&void 0!==_component_rowHeights?_component_rowHeights:"",onChange:e=>handle("rowHeights",e.target.value||void 0),placeholder:t("cms.builder.grid.rowHeights.placeholder")}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,jsx_runtime.jsx)(shadcn.pd,{label:t("cms.builder.grid.gap.base"),value:null!==(_component_gap=component.gap)&&void 0!==_component_gap?_component_gap:"",onChange:e=>handle("gap",e.target.value||void 0),placeholder:t("cms.builder.grid.gap.placeholder")}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("cms.builder.grid.gap.desktop"),value:null!==(_component_gapDesktop=component.gapDesktop)&&void 0!==_component_gapDesktop?_component_gapDesktop:"",onChange:e=>handle("gapDesktop",e.target.value||void 0)}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("cms.builder.grid.gap.tablet"),value:null!==(_component_gapTablet=component.gapTablet)&&void 0!==_component_gapTablet?_component_gapTablet:"",onChange:e=>handle("gapTablet",e.target.value||void 0)}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("cms.builder.grid.gap.mobile"),value:null!==(_component_gapMobile=component.gapMobile)&&void 0!==_component_gapMobile?_component_gapMobile:"",onChange:e=>handle("gapMobile",e.target.value||void 0)})]}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:component.equalizeRows?"default":"outline",onClick:()=>handle("equalizeRows",!component.equalizeRows),title:t("cms.builder.grid.equalizeRows.title"),children:t("cms.builder.grid.equalizeRows.label")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:component.autoFit?"default":"outline",onClick:()=>handle("autoFit",!component.autoFit),title:t("cms.builder.grid.autoFit.title"),children:t("cms.builder.grid.autoFit.label")}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("cms.builder.grid.minColWidth.label"),placeholder:t("cms.builder.grid.minColWidth.placeholder"),value:null!==(_component_minColWidth=component.minColWidth)&&void 0!==_component_minColWidth?_component_minColWidth:"",onChange:e=>handle("minColWidth",e.target.value||void 0)})]}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"mb-1 block text-xs font-semibold text-muted-foreground",children:t("cms.builder.grid.justifyItems.label")}),(0,jsx_runtime.jsxs)(shadcn.l6,{value:null!==(_component_justifyItems=component.justifyItems)&&void 0!==_component_justifyItems?_component_justifyItems:"",onValueChange:v=>handle("justifyItems",v||void 0),children:[(0,jsx_runtime.jsx)(shadcn.bq,{children:(0,jsx_runtime.jsx)(shadcn.yv,{placeholder:t("cms.builder.layout.containerType.option.default")})}),(0,jsx_runtime.jsx)(shadcn.gC,{children:["start","center","end","stretch"].map(v=>(0,jsx_runtime.jsx)(shadcn.eb,{value:v,children:t(`cms.builder.grid.alignOption.${v}`)},v))})]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"mb-1 block text-xs font-semibold text-muted-foreground",children:t("cms.builder.grid.alignItems.label")}),(0,jsx_runtime.jsxs)(shadcn.l6,{value:null!==(_component_alignItems=component.alignItems)&&void 0!==_component_alignItems?_component_alignItems:"",onValueChange:v=>handle("alignItems",v||void 0),children:[(0,jsx_runtime.jsx)(shadcn.bq,{children:(0,jsx_runtime.jsx)(shadcn.yv,{placeholder:t("cms.builder.layout.containerType.option.default")})}),(0,jsx_runtime.jsx)(shadcn.gC,{children:["start","center","end","stretch"].map(v=>(0,jsx_runtime.jsx)(shadcn.eb,{value:v,children:t(`cms.builder.grid.alignOption.${v}`)},v))})]})]})]})]})}GridContainerEditor.__docgenInfo={description:"",methods:[],displayName:"GridContainerEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}}}]);