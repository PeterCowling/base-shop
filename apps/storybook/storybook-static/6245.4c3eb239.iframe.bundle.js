(self.webpackChunk_apps_storybook=self.webpackChunk_apps_storybook||[]).push([[2439,4985,6245,9034],{"../../packages/i18n/src lazy recursive ^\\.\\/.*\\.json$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./de.json":["../../packages/i18n/src/de.json",3252],"./en.json":["../../packages/i18n/src/en.json"],"./es.json":["../../packages/i18n/src/es.json",5623],"./fr.json":["../../packages/i18n/src/fr.json",2643],"./it.json":["../../packages/i18n/src/it.json",9710],"./ja.json":["../../packages/i18n/src/ja.json",3694],"./ko.json":["../../packages/i18n/src/ko.json",1061]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return Promise.all(ids.slice(1).map(__webpack_require__.e)).then(()=>__webpack_require__.t(id,19))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id="../../packages/i18n/src lazy recursive ^\\.\\/.*\\.json$",module.exports=webpackAsyncContext},"../../packages/platform-core/src/hooks/usePublishLocations.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>usePublishLocations});var _acme_shared_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../packages/shared-utils/src/index.ts"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js");function usePublishLocations(){const[locations,setLocations]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),fetchLocations=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async()=>{setLocations(await async function loadPublishLocations(){try{return await(0,_acme_shared_utils__WEBPACK_IMPORTED_MODULE_0__.x6)("/api/publish-locations")}catch(e){return[]}}())},[]);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{fetchLocations()},[fetchLocations]);return{locations:(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>locations,[locations]),reload:(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{fetchLocations()},[fetchLocations])}}},"../../packages/platform-core/src/validation/options.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{QG:()=>rootPlacementOptions});var process=__webpack_require__("../../node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");function resolveSectionsOnlyFromEnv(){return"true"===process.env.NEXT_PUBLIC_PB_SECTIONS_ONLY}function rootPlacementOptions(overrides){var _overrides_sectionsOnly;return{parent:"ROOT",sectionsOnly:null!==(_overrides_sectionsOnly=null==overrides?void 0:overrides.sectionsOnly)&&void 0!==_overrides_sectionsOnly?_overrides_sectionsOnly:resolveSectionsOnlyFromEnv()}}},"../../packages/platform-core/src/validation/templateValidation.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{w:()=>validateTemplateCreation});var types=__webpack_require__("../../node_modules/.pnpm/zod@3.25.73/node_modules/zod/v3/types.js"),ZodError=__webpack_require__("../../node_modules/.pnpm/zod@3.25.73/node_modules/zod/v3/ZodError.js"),src=__webpack_require__("../../packages/types/src/index.ts");function getChildren(node){const maybeChildren=node.children;if(Array.isArray(maybeChildren))return maybeChildren}function walk(node,fn,depth=0,path=[]){if(!node||"object"!=typeof node)return;fn(node,depth,path);const children=getChildren(node);children&&children.forEach((c,i)=>walk(c,fn,depth+1,[...path,"children",i]))}function isHazardViewportUnit(v){if("string"!=typeof v)return!1;const s=v.trim();return/\b(100vw|100vh)\b/.test(s)}const creationComponentsSchema=types.YO(src.Wd).superRefine((components,ctx)=>{const CONTAINER_TYPES=new Set(["Section","Canvas","MultiColumn","StackFlex","Grid","CarouselContainer","TabsAccordionContainer","Tabs","Dataset","Repeater","Bind"]),COLOR_KEYS=new Set(["color","backgroundColor","borderColor","outlineColor","fill","stroke"]),isRawColor=v=>{if("string"!=typeof v)return!1;const s=v.trim();return!!s&&(!s.startsWith("var(")&&"currentColor"!==s&&"transparent"!==s&&"inherit"!==s&&"initial"!==s&&(!!s.startsWith("#")||(!!/^rgba?\(/i.test(s)||!!/^hsla?\(/i.test(s))))};components.forEach((root,idx)=>{"absolute"===root.position&&ctx.addIssue({code:ZodError.eq.custom,message:`Root component '${root.type}' should not use absolute positioning in templates.`,path:[idx,"position"]});let flagged=!1;walk(root,(n,_d,p)=>{if(flagged)return;const r=n,sizeKeys=["width","widthDesktop","widthTablet","widthMobile","height","heightDesktop","heightTablet","heightMobile","margin","marginDesktop","marginTablet","marginMobile","padding","paddingDesktop","paddingTablet","paddingMobile"];for(const k of sizeKeys)if(isHazardViewportUnit(r[k])){flagged=!0,ctx.addIssue({code:ZodError.eq.custom,message:`Component '${root.type}' uses disallowed viewport unit in '${String(k)}'. Avoid 100vw/100vh.`,path:[idx,...p,k]});break}}),walk(root,(n,_d,p)=>{if("Image"===n.type){const aspect=n.cropAspect;"string"==typeof aspect&&aspect.trim().length>0?/^\d+:\d+$/.test(aspect)||ctx.addIssue({code:ZodError.eq.custom,message:"Image 'cropAspect' should be in 'W:H' format like '16:9' or '4:3'.",path:[idx,...p,"cropAspect"]}):ctx.addIssue({code:ZodError.eq.custom,message:"Image components should specify 'cropAspect' to enforce aspect ratio.",path:[idx,...p,"cropAspect"]})}}),walk(root,(n,_d,p)=>{const r=n;!r.sticky||void 0!==r.stickyOffset&&null!==r.stickyOffset&&""!==String(r.stickyOffset).trim()||ctx.addIssue({code:ZodError.eq.custom,message:"When 'sticky' is set, 'stickyOffset' is required.",path:[idx,...p,"stickyOffset"]})}),walk(root,(n,_d,p)=>{const r=n;"navigate"!==r.clickAction||r.href&&String(r.href).trim()||ctx.addIssue({code:ZodError.eq.custom,message:"clickAction 'navigate' requires 'href'.",path:[idx,...p,"href"]}),"open-modal"!==r.clickAction||r.modalHtml&&String(r.modalHtml).trim()||ctx.addIssue({code:ZodError.eq.custom,message:"clickAction 'open-modal' requires 'modalHtml'.",path:[idx,...p,"modalHtml"]})}),walk(root,(n,_d,p)=>{const r=n;"number"==typeof r.minItems&&"number"==typeof r.maxItems&&r.minItems>r.maxItems&&ctx.addIssue({code:ZodError.eq.custom,message:"minItems cannot be greater than maxItems.",path:[idx,...p,"minItems"]});const checks=[["desktopItems","desktopItems"],["tabletItems","tabletItems"],["mobileItems","mobileItems"]];for(const[key,label]of checks){const val=r[key];"number"==typeof val&&("number"==typeof r.minItems&&val<r.minItems&&ctx.addIssue({code:ZodError.eq.custom,message:`${label} must be ≥ minItems.`,path:[idx,...p,label]}),"number"==typeof r.maxItems&&val>r.maxItems&&ctx.addIssue({code:ZodError.eq.custom,message:`${label} must be ≤ maxItems.`,path:[idx,...p,label]}))}}),walk(root,(n,_d,p)=>{const r=n;!r.animation||"none"===r.animation||"number"==typeof r.animationDuration&&r.animationDuration>0||ctx.addIssue({code:ZodError.eq.custom,message:"When 'animation' is set, a positive 'animationDuration' is required.",path:[idx,...p,"animationDuration"]})}),walk(root,(n,_d,p)=>{const r=n;"number"==typeof r.parallax&&(r.parallax<=0||r.parallax>1)&&ctx.addIssue({code:ZodError.eq.custom,message:"'parallax' should be > 0 and ≤ 1.",path:[idx,...p,"parallax"]})});const foundAbsWithoutAncestor=[];if(function checkAbs(node,positionedAncestor,p){const r=node,isPositioned="relative"===r.position||"sticky"===r.position,nextPositioned=positionedAncestor||isPositioned;"absolute"!==r.position||positionedAncestor||foundAbsWithoutAncestor.push([...p,"position"]);(getChildren(node)||[]).forEach((c,i)=>checkAbs(c,nextPositioned,[...p,"children",i]))}(root,!1,[idx]),foundAbsWithoutAncestor.length)for(const p of foundAbsWithoutAncestor)ctx.addIssue({code:ZodError.eq.custom,message:"Absolute-positioned components must have a positioned (relative/sticky) ancestor in the template.",path:p});walk(root,(n,_d,p)=>{const r=n;"number"!=typeof r.zIndex||r.position&&("relative"===r.position||"absolute"===r.position||"sticky"===r.position)||ctx.addIssue({code:ZodError.eq.custom,message:"'zIndex' requires a positioned element (relative/absolute/sticky).",path:[idx,...p,"zIndex"]})}),walk(root,(n,_d,p)=>{const r=n,keys=["margin","marginDesktop","marginTablet","marginMobile"];for(const k of keys){const v=r[k];if("string"==typeof v&&/^\s*-/.test(v)){ctx.addIssue({code:ZodError.eq.custom,message:`Negative margins are not allowed ('${k}').`,path:[idx,...p,k]});break}}}),walk(root,(n,_d,p)=>{const r=n;for(const k of COLOR_KEYS){const v=r[k];isRawColor(v)&&ctx.addIssue({code:ZodError.eq.custom,message:`Use design tokens (CSS var) instead of raw color in '${k}'.`,path:[idx,...p,k]})}}),walk(root,(n,_d,p)=>{if("Text"===n.type){const r=n,keys=["height","heightDesktop","heightTablet","heightMobile"];for(const k of keys){const v=r[k];if("string"==typeof v&&v.trim()){ctx.addIssue({code:ZodError.eq.custom,message:`Text components should not set '${k}' (can cause clipping).`,path:[idx,...p,k]});break}}}}),walk(root,(n,_d,p)=>{if("Button"===n.type){const h=n.height;if("string"==typeof h){const hs=h.trim();if(hs.endsWith("px")){const numStr=hs.slice(0,-2);let dotCount=0,digitCount=0;for(let i=0;i<numStr.length;i++){const ch=numStr[i];if("."===ch){if(dotCount++,dotCount>1){dotCount=2;break}}else{if(!(ch>="0"&&ch<="9")){dotCount=2;break}digitCount++}}if(dotCount<=1&&digitCount>0){const px=Number(numStr);Number.isFinite(px)&&px<40&&ctx.addIssue({code:ZodError.eq.custom,message:"Button 'height' should be at least 40px for tap size.",path:[idx,...p,"height"]})}}}}}),walk(root,(n,_d,p)=>{if("Image"===n.type){const alt=n.alt;"string"==typeof alt&&alt.trim().length>0||ctx.addIssue({code:ZodError.eq.custom,message:"Image components should include non-empty 'alt' text.",path:[idx,...p,"alt"]})}});let maxDepth=0;walk(root,(_n,depth)=>{depth>maxDepth&&(maxDepth=depth)}),maxDepth>8&&ctx.addIssue({code:ZodError.eq.custom,message:"Template nesting depth exceeds 8 levels.",path:[idx]}),walk(root,(n,_d,p)=>{const t=n.type,r=n;if("ImageSlider"===t){const slides=r.slides;if(Array.isArray(slides)){const min="number"==typeof r.minItems?r.minItems:2;slides.length<min&&ctx.addIssue({code:ZodError.eq.custom,message:`ImageSlider requires at least ${min} slides.`,path:[idx,...p,"slides"]})}}if("ReviewsCarousel"===t){const reviews=r.reviews;Array.isArray(reviews)&&reviews.length<2&&ctx.addIssue({code:ZodError.eq.custom,message:"ReviewsCarousel requires at least 2 reviews.",path:[idx,...p,"reviews"]})}if("TestimonialSlider"===t){const testimonials=r.testimonials;Array.isArray(testimonials)&&testimonials.length<2&&ctx.addIssue({code:ZodError.eq.custom,message:"TestimonialSlider requires at least 2 entries.",path:[idx,...p,"testimonials"]})}if("Gallery"===t){const images=r.images;Array.isArray(images)&&images.length<2&&ctx.addIssue({code:ZodError.eq.custom,message:"Gallery requires at least 2 images.",path:[idx,...p,"images"]})}if("ProductCarousel"===t){const mode=r.mode;if("manual"===mode){const skus=r.skus;(!Array.isArray(skus)||skus.length<2)&&ctx.addIssue({code:ZodError.eq.custom,message:"ProductCarousel (manual) requires at least 2 SKUs.",path:[idx,...p,"skus"]})}else if("collection"===mode){(r.collectionId||"").trim()||ctx.addIssue({code:ZodError.eq.custom,message:"ProductCarousel (collection) requires 'collectionId'.",path:[idx,...p,"collectionId"]})}}}),walk(root,(n,_d,p)=>{const r=n,kids=getChildren(n);if(Array.isArray(kids)&&kids.length>0){const t=String(r.type||"");CONTAINER_TYPES.has(t)||ctx.addIssue({code:ZodError.eq.custom,message:`Component '${t}' cannot have children; only containers may own children.`,path:[idx,...p,"children"]})}})})});function placement_getChildren(node){const maybeChildren=node.children;if(Array.isArray(maybeChildren))return maybeChildren}function placement_walk(node,fn,path=[]){if(!node||"object"!=typeof node)return;fn(node,path);const children=placement_getChildren(node);children&&children.forEach((c,i)=>placement_walk(c,fn,[...path,"children",i]))}const CONTAINER_TYPES=new Set(["Section","Canvas","MultiColumn","StackFlex","Grid","CarouselContainer","TabsAccordionContainer","Tabs","Dataset","Repeater","Bind"]),LAYOUT_TYPES=new Set(["Canvas"]);function isContainerType(t){return CONTAINER_TYPES.has(t)}function isLayoutType(t){return LAYOUT_TYPES.has(t)}function isAllowedChild(parent,childType,sectionsOnly){const allowed=function getAllowedChildren(parent,sectionsOnly){const allowContent=new Set(["__CONTENT__"]);if("ROOT"===parent){const s=new Set;return s.add("Section"),sectionsOnly||s.add("Canvas"),s}if("Section"===parent||"Canvas"===parent){const s=new Set(CONTAINER_TYPES);return s.delete("Section"),s.add("__CONTENT__"),s}return isContainerType(String(parent))||isLayoutType(String(parent))?allowContent:new Set}(parent,sectionsOnly);return!!allowed.has(childType)||!(isContainerType(childType)||isLayoutType(childType)||!allowed.has("__CONTENT__"))}function validatePlacement(nodes,options){const list=Array.isArray(nodes)?nodes:[nodes],sectionsOnly=Boolean(null==options?void 0:options.sectionsOnly),parent=options.parent,issues=[];return list.forEach((root,idx)=>{const rootPath=[idx],t=String(root.type||"");isAllowedChild(parent,t,sectionsOnly)||issues.push({path:rootPath,message:`Type '${t}' is not allowed under ${String(parent)}.`}),placement_walk(root,(n,p)=>{const kids=placement_getChildren(n)||[];if(!kids.length)return;const parentKind=String(n.type||"");kids.forEach((_c,i)=>{const c=kids[i],ct=String((null==c?void 0:c.type)||"");isAllowedChild(parentKind,ct,sectionsOnly)||issues.push({path:[idx,...p.slice(1),"children",i],message:`Type '${ct}' is not allowed under '${parentKind}'.`})})},rootPath)}),issues.length?{ok:!1,errors:Array.from(new Set(issues.map(i=>i.message))),issues}:{ok:!0}}function validateTemplateCreation(components,options){const comp=function validateComponentRules(components){const parsed=creationComponentsSchema.safeParse(components);return parsed.success?{ok:!0}:{ok:!1,errors:parsed.error.issues.map(i=>i.message),issues:parsed.error.issues.map(i=>({path:i.path,message:i.message}))}}(components);if(!1===comp.ok)return comp;const place=validatePlacement(components,options);return!1===place.ok?place:{ok:!0}}},"../../packages/telemetry/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__buffer:()=>__buffer,__flush:()=>__flush,__stripPII:()=>__stripPII,track:()=>track});var process=__webpack_require__("../../node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js"),console=__webpack_require__("../../node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const BUFFER=[],FLUSH_INTERVAL=5e3,MAX_RETRIES=3;var _process_env_NEXT_PUBLIC_TELEMETRY_SAMPLE_RATE;const rawRate=Number(null!==(_process_env_NEXT_PUBLIC_TELEMETRY_SAMPLE_RATE=process.env.NEXT_PUBLIC_TELEMETRY_SAMPLE_RATE)&&void 0!==_process_env_NEXT_PUBLIC_TELEMETRY_SAMPLE_RATE?_process_env_NEXT_PUBLIC_TELEMETRY_SAMPLE_RATE:"1"),SAMPLE_RATE=Number.isNaN(rawRate)?1:Math.min(1,Math.max(0,rawRate)),ENABLED="true"===process.env.NEXT_PUBLIC_ENABLE_TELEMETRY&&!0;var _process_env_NEXT_PUBLIC_TELEMETRY_ENDPOINT;const ENDPOINT=null!==(_process_env_NEXT_PUBLIC_TELEMETRY_ENDPOINT=process.env.NEXT_PUBLIC_TELEMETRY_ENDPOINT)&&void 0!==_process_env_NEXT_PUBLIC_TELEMETRY_ENDPOINT?_process_env_NEXT_PUBLIC_TELEMETRY_ENDPOINT:"/api/telemetry";let timer=null;function stripPII(payload){const result={},piiRegex=/(email|name|phone|address|password|token|id)/i;for(const[key,value]of Object.entries(payload))piiRegex.test(key)||(result[key]=value);return result}async function flush(){if(!BUFFER.length)return;const events=BUFFER.splice(0,BUFFER.length);let attempts=0;for(;attempts<MAX_RETRIES;)try{await fetch(ENDPOINT,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(events)});break}catch(err){attempts++,console.error("Failed to send telemetry",err),attempts>=MAX_RETRIES&&BUFFER.unshift(...events)}}function track(name,payload={}){ENABLED&&(Math.random()>SAMPLE_RATE||"undefined"!=typeof navigator&&!1===navigator.onLine||(BUFFER.push({name,payload:stripPII(payload),ts:Date.now()}),function scheduleFlush(){timer||(timer=setTimeout(async()=>{timer=null,await flush()},FLUSH_INTERVAL))}()))}const __buffer=BUFFER,__flush=flush,__stripPII=stripPII},"../../packages/ui/src/components/atoms/shadcn/Table.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A0:()=>_primitives_table__WEBPACK_IMPORTED_MODULE_0__.A0,BF:()=>_primitives_table__WEBPACK_IMPORTED_MODULE_0__.BF,Hj:()=>_primitives_table__WEBPACK_IMPORTED_MODULE_0__.Hj,XI:()=>_primitives_table__WEBPACK_IMPORTED_MODULE_0__.XI,nA:()=>_primitives_table__WEBPACK_IMPORTED_MODULE_0__.nA,nd:()=>_primitives_table__WEBPACK_IMPORTED_MODULE_0__.nd});var _primitives_table__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../packages/ui/src/components/atoms/primitives/table.tsx")},"../../packages/ui/src/components/cms/ColorInput.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{AN:()=>ColorInput,O9:()=>suggestContrastColor,YL:()=>hslToRgb,bJ:()=>getContrast});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_utils_colorUtils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/utils/colorUtils.ts");function parseHslTriplet(input){const raw=input.trim();if(!raw.startsWith("hsl(")){const parts=raw.split(/\s+/);if(parts.length>=3){const h=parseFloat(parts[0]),s=parseFloat(parts[1]),l=parseFloat(parts[2]);if(Number.isFinite(h)&&Number.isFinite(s)&&Number.isFinite(l))return[h,s/100,l/100]}return null}const tokens=resolveCssVars(raw.slice(4,-1).trim().replace(/,/g," ").replace(/\s+/g," ").trim()).split(" ");if(tokens.length<3)return null;const h=parseFloat(tokens[0]),s=parseFloat(tokens[1]),l=parseFloat(tokens[2]);return Number.isFinite(h)&&Number.isFinite(s)&&Number.isFinite(l)?[h,s/100,l/100]:null}function hslToRgb(hsl){const parsed=parseHslTriplet(hsl);if(!parsed)return[NaN,NaN,NaN];const[h,s,l]=parsed,c=(1-Math.abs(2*l-1))*s,x=c*(1-Math.abs(h/60%2-1)),m=l-c/2;let r=0,g=0,b=0;return 0<=h&&h<60?(r=c,g=x):60<=h&&h<120?(r=x,g=c):120<=h&&h<180?(g=c,b=x):180<=h&&h<240?(g=x,b=c):240<=h&&h<300?(r=x,b=c):(r=c,b=x),[Math.round(255*(r+m)),Math.round(255*(g+m)),Math.round(255*(b+m))]}function colorToRgb(color){const v=color.trim();if(v.startsWith("#"))return function hexToRgb(hex){let value=hex.replace("#","");return 3===value.length&&(value=value.split("").map(c=>c+c).join("")),[parseInt(value.slice(0,2),16),parseInt(value.slice(2,4),16),parseInt(value.slice(4,6),16)]}(v);if(v.toLowerCase().startsWith("rgb")){const parts=v.substring(v.indexOf("(")+1,v.lastIndexOf(")")).replaceAll("/"," ").replace(/,/g," ").trim().split(/\s+/);return[parseFloat(parts[0]),parseFloat(parts[1]),parseFloat(parts[2])].map(n=>Math.max(0,Math.min(255,Math.round(n))))}return hslToRgb(v)}function luminance(rgb){const[r,g,b]=rgb.map(v=>{const c=v/255;return c<=.03928?c/12.92:Math.pow((c+.055)/1.055,2.4)});return.2126*r+.7152*g+.0722*b}function getContrast(color1,color2){const L1=luminance(colorToRgb(resolveCssVars(color1))),L2=luminance(colorToRgb(resolveCssVars(color2)));return(Math.max(L1,L2)+.05)/(Math.min(L1,L2)+.05)}function suggestContrastColor(color,reference,ratio=4.5){const isHex=color.startsWith("#"),parsed=parseHslTriplet(isHex?(0,_utils_colorUtils__WEBPACK_IMPORTED_MODULE_1__.g8)(color):color);if(!parsed)return null;const[h,s,l]=parsed,refLum=luminance(colorToRgb(resolveCssVars(reference))),direction=luminance(colorToRgb(resolveCssVars(color)))>refLum?-1:1;let newL=l;for(let i=0;i<20&&(newL+=.05*direction,!(newL<0||newL>1));i++){const test=`${h} ${Math.round(100*s)}% ${Math.round(100*newL)}%`;if(getContrast(test,resolveCssVars(reference))>=ratio)return isHex?(0,_utils_colorUtils__WEBPACK_IMPORTED_MODULE_1__.Sf)(test):test}return null}function resolveCssVars(input){if(!/var\(/.test(input))return input;try{const d="undefined"!=typeof document?document.documentElement:null;return d?input.replace(/var\((--[a-z0-9-_]+)\)/gi,(_m,name)=>{var _d_style_getPropertyValue;const direct=null===(_d_style_getPropertyValue=d.style.getPropertyValue(name))||void 0===_d_style_getPropertyValue?void 0:_d_style_getPropertyValue.trim(),computed="function"==typeof getComputedStyle?getComputedStyle(d).getPropertyValue(name).trim():"";return direct||computed||`var(${name})`}):input}catch(e){return input}}function ColorInput({value,onChange,id,"aria-label":ariaLabel,"aria-labelledby":ariaLabelledBy}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"color",id,"aria-label":ariaLabel,"aria-labelledby":ariaLabelledBy,value:(0,_utils_colorUtils__WEBPACK_IMPORTED_MODULE_1__.Sf)(value),onChange:e=>onChange((0,_utils_colorUtils__WEBPACK_IMPORTED_MODULE_1__.g8)(e.target.value))})}ColorInput.__docgenInfo={description:"",methods:[],displayName:"ColorInput",props:{value:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},id:{required:!1,tsType:{name:"string"},description:""},"aria-label":{required:!1,tsType:{name:"string"},description:""},"aria-labelledby":{required:!1,tsType:{name:"string"},description:""}}}},"../../packages/ui/src/components/cms/DataTable.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>DataTable});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_acme_shared_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/shared-utils/src/index.ts"),_utils_style__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/ui/src/utils/style/index.ts"),_atoms_shadcn_Table__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/Table.tsx");function DataTable({rows,columns,selectable=!1,onSelectionChange,rowClassName,rowKey}){const[selected,setSelected]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),keyMapRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new WeakMap),keyCounterRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0),toggle=idx=>{const next=(0,_acme_shared_utils__WEBPACK_IMPORTED_MODULE_2__.g6)(selected,idx);setSelected(next),null==onSelectionChange||onSelectionChange(next.map(i=>rows[i]))};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"w-full overflow-x-auto",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn_Table__WEBPACK_IMPORTED_MODULE_4__.XI,{className:"min-w-full w-full",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn_Table__WEBPACK_IMPORTED_MODULE_4__.A0,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn_Table__WEBPACK_IMPORTED_MODULE_4__.Hj,{children:[selectable&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn_Table__WEBPACK_IMPORTED_MODULE_4__.nd,{className:"w-10"}),columns.map(col=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn_Table__WEBPACK_IMPORTED_MODULE_4__.nd,{style:{width:col.width},children:col.header},col.header))]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn_Table__WEBPACK_IMPORTED_MODULE_4__.BF,{children:rows.map((row,i)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn_Table__WEBPACK_IMPORTED_MODULE_4__.Hj,{"data-state":selected.includes(i)?"selected":void 0,onClick:selectable?()=>toggle(i):void 0,className:(0,_utils_style__WEBPACK_IMPORTED_MODULE_3__.cn)(selectable?"cursor-pointer":void 0,null==rowClassName?void 0:rowClassName(row,i)),children:[selectable&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn_Table__WEBPACK_IMPORTED_MODULE_4__.nA,{className:"w-10",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"checkbox",className:"accent-primary size-10",checked:selected.includes(i),onChange:()=>toggle(i),onClick:e=>e.stopPropagation()})}),columns.map(col=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn_Table__WEBPACK_IMPORTED_MODULE_4__.nA,{children:col.render(row)},col.header))]},((row,index)=>{if(rowKey)return rowKey(row,index);if(row&&"object"==typeof row){const keyMap=keyMapRef.current,existing=keyMap.get(row);if(existing)return existing;const next="r-"+ ++keyCounterRef.current;return keyMap.set(row,next),next}return String(row)})(row,i)))})]})})}DataTable.__docgenInfo={description:"",methods:[],displayName:"DataTable",props:{rows:{required:!0,tsType:{name:"Array",elements:[{name:"T"}],raw:"T[]"},description:""},columns:{required:!0,tsType:{name:"Array",elements:[{name:"Column",elements:[{name:"T"}],raw:"Column<T>"}],raw:"Column<T>[]"},description:""},selectable:{required:!1,tsType:{name:"boolean"},description:"Enable checkbox row selection",defaultValue:{value:"false",computed:!1}},onSelectionChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(rows: T[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"T"}],raw:"T[]"},name:"rows"}],return:{name:"void"}}},description:""},rowClassName:{required:!1,tsType:{name:"signature",type:"function",raw:"(row: T, index: number) => string | undefined",signature:{arguments:[{type:{name:"T"},name:"row"},{type:{name:"number"},name:"index"}],return:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}}},description:""},rowKey:{required:!1,tsType:{name:"signature",type:"function",raw:"(row: T, index: number) => string | number",signature:{arguments:[{type:{name:"T"},name:"row"},{type:{name:"number"},name:"index"}],return:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]}}},description:"Optional function to provide a stable key for each row.\nIf not provided, a stable key is generated per row object instance."}}}},"../../packages/ui/src/components/cms/ImageUploaderWithOrientationCheck.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_hooks_useImageOrientationValidation__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/hooks/useImageOrientationValidation.ts"),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_acme_i18n__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../packages/i18n/src/index.ts");const equal=(a,b)=>a.file===b.file&&a.onChange===b.onChange&&a.requiredOrientation===b.requiredOrientation;function ImageUploaderWithOrientationCheckInner({file,onChange,requiredOrientation}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_4__.c3)(),{actual,isValid}=(0,_hooks_useImageOrientationValidation__WEBPACK_IMPORTED_MODULE_2__.M)(file,requiredOrientation),handleFileChange=(0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(e=>{var _e_target_files,_e_target_files_;const nextFile=null!==(_e_target_files_=null===(_e_target_files=e.target.files)||void 0===_e_target_files?void 0:_e_target_files[0])&&void 0!==_e_target_files_?_e_target_files_:null;onChange(nextFile)},[onChange]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{type:"file",accept:"image/*",onChange:handleFileChange,className:"block w-full cursor-pointer rounded-2xl border p-2"}),file&&null!==isValid&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:isValid?"text-sm text-success":"text-sm text-danger","data-token":isValid?"--color-success":"--color-danger",children:isValid?t("cms.image.orientation.ok",{actual:null!=actual?actual:""}):t("cms.image.orientation.bad",{actual:null!=actual?actual:"",required:requiredOrientation})})]})}const __WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_3__.memo)(ImageUploaderWithOrientationCheckInner,equal);ImageUploaderWithOrientationCheckInner.__docgenInfo={description:"",methods:[],displayName:"ImageUploaderWithOrientationCheckInner",props:{file:{required:!0,tsType:{name:"union",raw:"File | null",elements:[{name:"File"},{name:"null"}]},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(file: File | null) => void",signature:{arguments:[{type:{name:"union",raw:"File | null",elements:[{name:"File"},{name:"null"}]},name:"file"}],return:{name:"void"}}},description:""},requiredOrientation:{required:!0,tsType:{name:"z.infer",elements:[{name:"imageOrientationSchema"}],raw:"z.infer<typeof imageOrientationSchema>"},description:""}}}},"../../packages/ui/src/components/cms/LocaleContentAccordion.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>LocaleContentAccordion});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts");function LocaleContentAccordion({panels,defaultOpenLocales}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.nD,{type:"multiple",defaultValue:defaultOpenLocales,className:"space-y-3",children:panels.map(({locale,trigger,content})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.As,{value:locale,className:"border-none",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.$m,{className:"rounded-md border border-border-3 bg-muted/30 px-4 py-2 text-start text-sm font-semibold",children:trigger}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.ub,{className:"pt-3",children:content})]},locale))})}LocaleContentAccordion.__docgenInfo={description:"",methods:[],displayName:"LocaleContentAccordion",props:{panels:{required:!0,tsType:{name:"Array",elements:[{name:"LocalePanelConfig"}],raw:"LocalePanelConfig[]"},description:""},defaultOpenLocales:{required:!0,tsType:{name:"unknown"},description:""}}}},"../../packages/ui/src/components/cms/LocalizedTextInput.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>LocalizedTextInput});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_LocaleContentAccordion__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/ui/src/components/cms/LocaleContentAccordion.tsx"),_acme_i18n_locales__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../packages/i18n/src/locales.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../packages/i18n/src/index.ts");function LocalizedTextInput({label,value="",onChange,locale="en"}){const[mode,setMode]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)("inline"),[search,setSearch]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[selectedKey,setSelectedKey]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),[enMessages,setEnMessages]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({}),[localeMessages,setLocaleMessages]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({}),t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_5__.c3)();(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{let mounted=!0;return(async()=>{const en=(await Promise.resolve().then(__webpack_require__.t.bind(__webpack_require__,"../../packages/i18n/src/en.json",19))).default;mounted&&setEnMessages(en)})(),()=>{mounted=!1}},[]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{let mounted=!0;return(async()=>{if("en"!==locale)try{const m=(await __webpack_require__("../../packages/i18n/src lazy recursive ^\\.\\/.*\\.json$")(`./${locale}.json`)).default;if(!mounted)return;setLocaleMessages(m)}catch(e){setLocaleMessages({})}else setLocaleMessages(enMessages)})(),()=>{mounted=!1}},[locale,enMessages]);const[inlineValues,setInlineValues]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({en:value});(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{setInlineValues(prev=>({...prev,en:value}))},[value]);const localePanels=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>_acme_i18n_locales__WEBPACK_IMPORTED_MODULE_4__.YZ.map(loc=>{var _inlineValues_loc;return{locale:loc,trigger:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-sm font-medium uppercase tracking-wide",children:loc}),content:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"space-y-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.pd,{value:null!==(_inlineValues_loc=inlineValues[loc])&&void 0!==_inlineValues_loc?_inlineValues_loc:"en"===loc?value:"",placeholder:t("cms.localizedText.textPlaceholder",{loc:loc.toUpperCase()}),onChange:e=>{const v=e.target.value;setInlineValues(prev=>({...prev,[loc]:v})),"en"===loc&&onChange(v)}})})}}),[inlineValues,onChange,value,t]),filteredKeys=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{const q=search.trim().toLowerCase();return q?Object.keys(enMessages).filter(k=>k.toLowerCase().includes(q)).slice(0,50):Object.keys(enMessages).slice(0,50)},[search,enMessages]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[label&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-sm font-medium",children:label}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"button",onClick:()=>setMode("inline"),className:"rounded border px-2 py-1 text-xs min-h-10 "+("inline"===mode?"bg-accent":"bg-muted"),"aria-pressed":"inline"===mode,children:t("cms.localizedText.inline")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"button",onClick:()=>setMode("key"),className:"rounded border px-2 py-1 text-xs min-h-10 "+("key"===mode?"bg-accent":"bg-muted"),"aria-pressed":"key"===mode,children:t("cms.localizedText.sharedKey")})]}),"inline"===mode?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.Zp,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.Wu,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_LocaleContentAccordion__WEBPACK_IMPORTED_MODULE_3__.A,{panels:localePanels,defaultOpenLocales:_acme_i18n_locales__WEBPACK_IMPORTED_MODULE_4__.YZ}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-xs text-muted-foreground",children:t("cms.localizedText.promoteLabel")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.$n,{type:"button",size:"sm",onClick:async function promoteToKey(){var _inlineValues_en,_ref;const enVal=(null!==(_ref=null!==(_inlineValues_en=inlineValues.en)&&void 0!==_inlineValues_en?_inlineValues_en:value)&&void 0!==_ref?_ref:"").toString(),suggested=value.toLowerCase().replace(/[^a-z0-9]+/gi,".").replace(/\.+/g,".").replace(/^\.|\.$/g,""),key=window.prompt(t("cms.localizedText.enterKey"),suggested)||"";if(key)try{const res=await fetch("/cms/api/i18n/promote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key,enValue:enVal})});if(!res.ok)throw new Error(await res.text());setMode("key"),setSearch(key),setSelectedKey(key),onChange(enVal),setEnMessages(prev=>({...prev,[key]:enVal})),"en"!==locale&&setLocaleMessages(prev=>({...prev,[key]:enVal}))}catch(e){}},children:t("cms.localizedText.promoteCta")})]})]})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.pd,{value:search,onChange:e=>setSearch(e.target.value),placeholder:t("cms.localizedText.searchKeys")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"max-h-48 overflow-auto rounded border",children:filteredKeys.map(k=>{var _localeMessages_k;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("button",{type:"button",className:"block w-full border-b px-2 py-1 text-start text-sm hover:bg-accent/30 min-h-10 min-w-10",onClick:()=>{const en=enMessages[k];setSelectedKey(k),"string"==typeof en&&onChange(en)},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"font-mono text-xs text-muted-foreground",children:k}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-sm",children:enMessages[k]}),"en"!==locale&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-xs text-muted-foreground",children:null!==(_localeMessages_k=localeMessages[k])&&void 0!==_localeMessages_k?_localeMessages_k:enMessages[k]})]},k)})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center justify-between",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-xs text-muted-foreground",children:t("cms.localizedText.detachLabel")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.$n,{type:"button",size:"sm",disabled:!selectedKey&&!search.trim(),onClick:async function detachKey(){const key=selectedKey||search.trim();if(key)try{const res=await fetch(`/cms/api/i18n/detach?key=${encodeURIComponent(key)}`),json=await res.json();if(!json.success||!json.values)return;const vals=json.values;setInlineValues(prev=>({...prev,...vals})),"string"==typeof vals.en&&onChange(vals.en),setMode("inline")}catch(e){}},children:t("cms.localizedText.detachCta")})]})]})]})}LocalizedTextInput.__docgenInfo={description:"",methods:[],displayName:"LocalizedTextInput",props:{label:{required:!1,tsType:{name:"string"},description:""},value:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},locale:{required:!1,tsType:{name:"Locale"},description:"Current locale for previewing key mode",defaultValue:{value:'"en"',computed:!1}}}}},"../../packages/ui/src/components/cms/PagesTable.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>PagesTable});var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),next_link=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/link.js"),link_default=__webpack_require__.n(next_link),react=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),DataTable=__webpack_require__("../../packages/ui/src/components/cms/DataTable.tsx"),shadcn=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),atoms=__webpack_require__("../../packages/ui/src/components/atoms/index.ts"),style=__webpack_require__("../../packages/ui/src/utils/style/index.ts"),src=__webpack_require__("../../packages/i18n/src/index.ts");function PagesTable({shop,pages,canWrite=!1}){const t=(0,src.c3)(),tt=(key,fallback)=>{const value=t(key);return value===key?fallback:value},[search,setSearch]=(0,react.useState)(""),normalisedQuery=(0,react.useMemo)(()=>search.trim().toLowerCase(),[search]),filteredPages=(0,react.useMemo)(()=>normalisedQuery?pages.filter(page=>{var _page_seo;const slug="string"==typeof page.slug?page.slug.toLowerCase():"",legacyTitle=page.title,titleFromLegacy="string"==typeof legacyTitle?legacyTitle.toLowerCase():"",status=page.status,statusLabel="string"==typeof status?status.toLowerCase():"";var _page_seo_title;const seoMatches=Object.values(null!==(_page_seo_title=null===(_page_seo=page.seo)||void 0===_page_seo?void 0:_page_seo.title)&&void 0!==_page_seo_title?_page_seo_title:{}).filter(value=>"string"==typeof value).some(value=>value.toLowerCase().includes(normalisedQuery));return slug.includes(normalisedQuery)||titleFromLegacy.includes(normalisedQuery)||seoMatches||statusLabel.includes(normalisedQuery)}):pages,[pages,normalisedQuery]),columns=[{header:t("Slug"),render:p=>{const rawTitle=p.title,pageTitle="string"==typeof rawTitle?rawTitle:t("Untitled");return(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,jsx_runtime.jsx)("span",{"aria-hidden":!0,className:"text-muted-foreground",children:"/"}),(0,jsx_runtime.jsx)("span",{className:"font-medium text-foreground",children:p.slug||tt("cms.pages.slug.missing","(no slug)")})]}),(0,jsx_runtime.jsx)("p",{className:"text-xs text-muted-foreground",children:pageTitle})]})}},{header:tt("cms.pages.column.status","Status"),width:"8rem",render:p=>{const rawStatus=p.status,normalized="string"==typeof rawStatus?rawStatus:"",label=normalized||t("common.unknown"),variantClasses="published"===normalized?"bg-success-soft text-foreground":"draft"===normalized?"bg-warning-soft text-foreground":"archived"===normalized?"bg-muted text-foreground":"bg-surface-2 text-foreground";return(0,jsx_runtime.jsx)(atoms.vw,{className:(0,style.cn)("rounded-lg px-2 py-1 text-xs",variantClasses),children:label})}}];return canWrite&&columns.push({header:tt("cms.pages.column.actions","Actions"),width:"6rem",render:p=>(0,jsx_runtime.jsx)(link_default(),{href:`/cms/shop/${shop}/pages/${p.slug||p.id}/builder`,className:"inline-flex h-8 items-center justify-center rounded-lg border border-border/30 px-3 text-xs text-foreground hover:bg-surface-2",children:tt("cms.pages.actions.edit","Edit")})}),(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[canWrite&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(link_default(),{href:`/cms/shop/${shop}/pages/new/builder`,className:"inline-flex h-10 items-center justify-center rounded-xl bg-success px-4 text-sm font-semibold text-success-foreground shadow-elevation-3 hover:brightness-110",children:t("New Page")}),(0,jsx_runtime.jsx)(link_default(),{href:`/cms/shop/${shop}/pages/new/componenteditor`,className:"inline-flex h-10 items-center justify-center rounded-xl border border-border/30 px-4 text-sm font-semibold text-foreground hover:bg-surface-2",children:t("Component editor")})]}),(0,jsx_runtime.jsx)(shadcn.pd,{type:"search",value:search,onChange:event=>setSearch(event.target.value),placeholder:t("Search pages by slug, title, or status…"),"aria-label":t("Search pages"),className:"h-10 w-full sm:w-64 rounded-lg border-border/20 bg-input text-sm text-foreground placeholder:text-muted-foreground focus-visible:ring focus-visible:ring-offset-2"})]}),(0,jsx_runtime.jsx)(shadcn.Zp,{className:"border border-border/10 bg-surface-2 text-foreground",children:(0,jsx_runtime.jsx)(shadcn.Wu,{className:"px-0 py-0",children:(0,jsx_runtime.jsx)(DataTable.A,{rows:filteredPages,columns})})})]})}PagesTable.__docgenInfo={description:"",methods:[],displayName:"PagesTable",props:{shop:{required:!0,tsType:{name:"string"},description:""},pages:{required:!0,tsType:{name:"Array",elements:[{name:"Page"}],raw:"Page[]"},description:""},canWrite:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}}},"../../packages/ui/src/components/cms/ProductFilters.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>ProductFilters});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_atoms_primitives_Inline__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Inline.tsx"),_acme_i18n__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/i18n/src/index.ts");const statuses=["all","active","draft","archived"];function ProductFilters({search,status,onSearchChange,onStatusChange}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_3__.c3)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_primitives_Inline__WEBPACK_IMPORTED_MODULE_2__.c,{className:"gap-3",wrap:!0,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{type:"search",placeholder:t("filters.searchPlaceholder"),className:"w-64",value:search,onChange:e=>onSearchChange(e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("select",{className:"rounded-md border px-3 py-2 text-sm",value:status,onChange:e=>onStatusChange(e.target.value),children:statuses.map(s=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option",{value:s,children:t("all"===s?"filters.allStatuses":`status.${s}`)},s))})]})}ProductFilters.__docgenInfo={description:"",methods:[],displayName:"ProductFilters",props:{search:{required:!0,tsType:{name:"string"},description:""},status:{required:!0,tsType:{name:"string"},description:""}}}},"../../packages/ui/src/components/cms/blocks/StoreLocatorSection.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>StoreLocatorSection});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_acme_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/i18n/src/index.ts"),_organisms_StoreLocatorMap__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/ui/src/components/organisms/StoreLocatorMap.tsx");function haversine(a,b){const toRad=d=>d*Math.PI/180,dLat=toRad(b.lat-a.lat),dLng=toRad(b.lng-a.lng),lat1=toRad(a.lat),lat2=toRad(b.lat),s=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.sin(dLng/2)*Math.sin(dLng/2)*Math.cos(lat1)*Math.cos(lat2);return 6371*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))}const Grid=props=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{...props});function StoreLocatorSection({stores:inputStores=[],adapter,enableGeolocation=!0,radiusKm=100,emitLocalBusiness=!1,className,...rest}){var _selected_openingHours;const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_2__.c3)(),[stores,setStores]=react__WEBPACK_IMPORTED_MODULE_1__.useState(inputStores),[origin,setOrigin]=react__WEBPACK_IMPORTED_MODULE_1__.useState(null),[selected,setSelected]=react__WEBPACK_IMPORTED_MODULE_1__.useState(null);react__WEBPACK_IMPORTED_MODULE_1__.useEffect(()=>{setStores(inputStores)},[inputStores]),react__WEBPACK_IMPORTED_MODULE_1__.useEffect(()=>{let active=!0;if(adapter)return adapter().then(s=>{active&&setStores(s)}).catch(()=>{}),()=>{active=!1}},[adapter]),react__WEBPACK_IMPORTED_MODULE_1__.useEffect(()=>{enableGeolocation&&"undefined"!=typeof navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(pos=>setOrigin({lat:pos.coords.latitude,lng:pos.coords.longitude}),()=>setOrigin(null),{enableHighAccuracy:!1,maximumAge:6e4,timeout:1e4})},[enableGeolocation]);const filtered=react__WEBPACK_IMPORTED_MODULE_1__.useMemo(()=>origin?stores.map(s=>({s,d:haversine(origin,s)})).filter(x=>x.d<=radiusKm).sort((a,b)=>a.d-b.d).map(({s})=>s):stores,[stores,origin,radiusKm]),jsonLd=react__WEBPACK_IMPORTED_MODULE_1__.useMemo(()=>{if(!emitLocalBusiness||!selected)return null;const data={"@context":"https://schema.org","@type":"LocalBusiness",name:selected.label,url:selected.url,telephone:selected.phone,address:selected.address?{"@type":"PostalAddress",streetAddress:selected.address}:void 0,geo:{"@type":"GeoCoordinates",latitude:selected.lat,longitude:selected.lng},openingHours:selected.openingHours};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(data)}})},[emitLocalBusiness,selected]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("section",{className,...rest,children:[jsonLd,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(Grid,{className:"mx-auto grid grid-cols-1 gap-6 md:grid-cols-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("aside",{className:"space-y-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"text-lg font-semibold",children:t("storeLocator.findAStore")}),origin?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm text-neutral-600",children:t("storeLocator.showingWithin",{radiusKm})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm text-neutral-600",children:t("storeLocator.enableLocationToSort")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("ul",{className:"divide-y border rounded",children:filtered.map(s=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("li",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("button",{type:"button",className:["block w-full text-left p-3 min-h-10",(null==selected?void 0:selected.id)===s.id?"bg-neutral-50":"bg-white"].join(" "),onClick:()=>setSelected(s),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"font-medium",children:s.label}),s.address?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-sm text-neutral-600",children:s.address}):null,s.stockNote?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-xs text-emerald-700",children:s.stockNote}):null]})},s.id))})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"md:col-span-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_organisms_StoreLocatorMap__WEBPACK_IMPORTED_MODULE_3__.W,{locations:selected?[selected]:stores,heightClass:"h-96"}),selected?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mt-3 rounded border p-3 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"font-medium",children:selected.label}),selected.address?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{children:selected.address}):null,selected.phone?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{children:t("storeLocator.tel",{phone:selected.phone})}):null,(null===(_selected_openingHours=selected.openingHours)||void 0===_selected_openingHours?void 0:_selected_openingHours.length)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("ul",{className:"mt-2 list-disc ps-4",children:selected.openingHours.map(h=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("li",{children:h},h))}):null,selected.url?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("a",{href:selected.url,className:"mt-2 inline-block text-blue-600 underline min-h-10 min-w-10",children:t("storeLocator.viewStorePage")}):null]}):null]})]})]})}StoreLocatorSection.__docgenInfo={description:"",methods:[],displayName:"StoreLocatorSection",props:{stores:{required:!1,tsType:{name:"Array",elements:[{name:"intersection",raw:"Location & {\n  id: string;\n  address?: string;\n  phone?: string;\n  url?: string;\n  openingHours?: string[];\n  stockNote?: string;\n}",elements:[{name:"Location"},{name:"signature",type:"object",raw:"{\n  id: string;\n  address?: string;\n  phone?: string;\n  url?: string;\n  openingHours?: string[];\n  stockNote?: string;\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"address",value:{name:"string",required:!1}},{key:"phone",value:{name:"string",required:!1}},{key:"url",value:{name:"string",required:!1}},{key:"openingHours",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"stockNote",value:{name:"string",required:!1}}]}}]}],raw:"Store[]"},description:"",defaultValue:{value:"[]",computed:!1}},adapter:{required:!1,tsType:{name:"signature",type:"function",raw:"() => Promise<Store[]>",signature:{arguments:[],return:{name:"Promise",elements:[{name:"Array",elements:[{name:"intersection",raw:"Location & {\n  id: string;\n  address?: string;\n  phone?: string;\n  url?: string;\n  openingHours?: string[];\n  stockNote?: string;\n}",elements:[{name:"Location"},{name:"signature",type:"object",raw:"{\n  id: string;\n  address?: string;\n  phone?: string;\n  url?: string;\n  openingHours?: string[];\n  stockNote?: string;\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"address",value:{name:"string",required:!1}},{key:"phone",value:{name:"string",required:!1}},{key:"url",value:{name:"string",required:!1}},{key:"openingHours",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"stockNote",value:{name:"string",required:!1}}]}}]}],raw:"Store[]"}],raw:"Promise<Store[]>"}}},description:"Optional async adapter to load stores"},enableGeolocation:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},radiusKm:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"100",computed:!1}},emitLocalBusiness:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}}},"../../packages/ui/src/components/cms/marketing/discounts/DiscountFieldGroups.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{G:()=>DiscountConfigurationCard,l:()=>DiscountScheduleCard});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/i18n/src/index.ts");function DiscountConfigurationCard({values,errors,onChange}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_2__.c3)(),MIN_ID="discount-min-purchase";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.Zp,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.Wu,{className:"grid gap-4 sm:grid-cols-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:"discount-code",className:"text-sm font-medium",children:t("Code")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{id:"discount-code",value:values.code,onChange:event=>onChange("code",event.target.value.toUpperCase()),"aria-invalid":errors.code?"true":"false","aria-describedby":errors.code?"discount-code-error":void 0}),errors.code&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{id:"discount-code-error",className:"text-danger text-xs","data-token":"--color-danger",children:errors.code})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{className:"text-sm font-medium",children:t("Discount type")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.l6,{value:values.type,onValueChange:value=>onChange("type",value),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.bq,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.yv,{})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.gC,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:"percentage",children:t("Percentage")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:"fixed",children:t("Fixed amount")})]})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:"discount-value",className:"text-sm font-medium",children:t("Value")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{id:"discount-value",type:"number",min:1,value:String(values.value),onChange:event=>onChange("value",Number(event.target.value||0)),"aria-invalid":errors.value?"true":"false","aria-describedby":errors.value?"discount-value-error":void 0}),errors.value&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{id:"discount-value-error",className:"text-danger text-xs","data-token":"--color-danger",children:errors.value})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:MIN_ID,className:"text-sm font-medium",children:t("Minimum purchase")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{id:MIN_ID,type:"number",min:0,value:String(values.minPurchase),onChange:event=>onChange("minPurchase",Number(event.target.value||0)),"aria-invalid":errors.minPurchase?"true":"false","aria-describedby":errors.minPurchase?"discount-min-error":void 0}),errors.minPurchase&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{id:"discount-min-error",className:"text-danger text-xs","data-token":"--color-danger",children:errors.minPurchase})]})]})})}function DiscountScheduleCard({values,errors,onChange}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_2__.c3)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.Zp,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.Wu,{className:"grid gap-4 sm:grid-cols-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:"discount-start",className:"text-sm font-medium",children:t("Start date")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{id:"discount-start",type:"date",value:values.startDate,onChange:event=>onChange("startDate",event.target.value),"aria-invalid":errors.startDate?"true":"false","aria-describedby":errors.startDate?"discount-start-error":void 0}),errors.startDate&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{id:"discount-start-error",className:"text-danger text-xs","data-token":"--color-danger",children:errors.startDate})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:"discount-end",className:"text-sm font-medium",children:t("End date")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{id:"discount-end",type:"date",value:values.endDate,onChange:event=>onChange("endDate",event.target.value),"aria-invalid":errors.endDate?"true":"false","aria-describedby":errors.endDate?"discount-end-error":void 0}),errors.endDate&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{id:"discount-end-error",className:"text-danger text-xs","data-token":"--color-danger",children:errors.endDate})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:"discount-usage",className:"text-sm font-medium",children:t("Usage limit")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{id:"discount-usage",type:"number",min:0,value:String(values.usageLimit),onChange:event=>onChange("usageLimit",Number(event.target.value||0))})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1 sm:col-span-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:"discount-applies",className:"text-sm font-medium",children:t("Applies to")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.TM,{id:"discount-applies",rows:2,value:values.appliesTo,onChange:event=>onChange("appliesTo",event.target.value),"aria-invalid":errors.appliesTo?"true":"false","aria-describedby":errors.appliesTo?"discount-applies-error":void 0}),errors.appliesTo&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{id:"discount-applies-error",className:"text-danger text-xs","data-token":"--color-danger",children:errors.appliesTo})]})]})})}DiscountConfigurationCard.__docgenInfo={description:"",methods:[],displayName:"DiscountConfigurationCard",props:{values:{required:!0,tsType:{name:"DiscountFormValues"},description:""},errors:{required:!0,tsType:{name:"Partial",elements:[{name:"Record",elements:[{name:"DiscountFormValues"},{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}],raw:"Record<TField, string | undefined>"}],raw:"Partial<\n  Record<TField, string | undefined>\n>"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends DiscountField>(\n  key: K,\n  value: DiscountFormValues[K]\n) => void",signature:{arguments:[{type:{name:"K"},name:"key"},{type:{name:"DiscountFormValues[K]",raw:"DiscountFormValues[K]"},name:"value"}],return:{name:"void"}}},description:""}}},DiscountScheduleCard.__docgenInfo={description:"",methods:[],displayName:"DiscountScheduleCard",props:{values:{required:!0,tsType:{name:"DiscountFormValues"},description:""},errors:{required:!0,tsType:{name:"Partial",elements:[{name:"Record",elements:[{name:"DiscountFormValues"},{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}],raw:"Record<TField, string | undefined>"}],raw:"Partial<\n  Record<TField, string | undefined>\n>"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends DiscountField>(\n  key: K,\n  value: DiscountFormValues[K]\n) => void",signature:{arguments:[{type:{name:"K"},name:"key"},{type:{name:"DiscountFormValues[K]",raw:"DiscountFormValues[K]"},name:"value"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/marketing/discounts/DiscountForm.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_atoms__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/atoms/index.ts"),_utils_style__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/ui/src/utils/style/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../packages/i18n/src/index.ts"),_DiscountFieldGroups__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../packages/ui/src/components/cms/marketing/discounts/DiscountFieldGroups.tsx"),_hooks_useDiscountFormState__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../packages/ui/src/components/cms/marketing/discounts/hooks/useDiscountFormState.ts");function DiscountForm({defaultValues,validationErrors,onSubmit,onPreviewChange,onStatusChange,submitLabel,className,busy}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_4__.c3)(),{values,errors,status,toast,update,handleSubmit,dismissToast}=(0,_hooks_useDiscountFormState__WEBPACK_IMPORTED_MODULE_6__.S)({defaultValues,validationErrors,onSubmit,onPreviewChange,onStatusChange});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("form",{onSubmit:handleSubmit,noValidate:!0,className:(0,_utils_style__WEBPACK_IMPORTED_MODULE_3__.cn)("space-y-6",className),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_DiscountFieldGroups__WEBPACK_IMPORTED_MODULE_5__.G,{values,errors,onChange:update}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_DiscountFieldGroups__WEBPACK_IMPORTED_MODULE_5__.l,{values,errors,onChange:update}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex justify-end",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.$n,{type:"submit",disabled:busy||"submitting"===status,children:"submitting"===status?t("Saving…"):null!=submitLabel?submitLabel:t("Save discount")})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_2__.y8,{open:toast.open,message:toast.message,onClose:dismissToast})]})}const __WEBPACK_DEFAULT_EXPORT__=DiscountForm;DiscountForm.__docgenInfo={description:"",methods:[],displayName:"DiscountForm",props:{defaultValues:{required:!1,tsType:{name:"Partial",elements:[{name:"DiscountFormValues"}],raw:"Partial<DiscountFormValues>"},description:""},validationErrors:{required:!1,tsType:{name:"Partial",elements:[{name:"Record",elements:[{name:"DiscountFormValues"},{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}],raw:"Record<TField, string | undefined>"}],raw:"Partial<\n  Record<TField, string | undefined>\n>"},description:""},onSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(\n  values: TValues\n) => Promise<void> | void",signature:{arguments:[{type:{name:"DiscountFormValues"},name:"values"}],return:{name:"union",raw:"Promise<void> | void",elements:[{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"void"}]}}},description:""},onPreviewChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(preview: DiscountPreviewData) => void",signature:{arguments:[{type:{name:"DiscountPreviewData"},name:"preview"}],return:{name:"void"}}},description:""},onStatusChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(status: SubmissionStatus) => void",signature:{arguments:[{type:{name:"union",raw:'| "idle"\n| "validating"\n| "submitting"\n| "success"\n| "error"',elements:[{name:"literal",value:'"idle"'},{name:"literal",value:'"validating"'},{name:"literal",value:'"submitting"'},{name:"literal",value:'"success"'},{name:"literal",value:'"error"'}]},name:"status"}],return:{name:"void"}}},description:""},submitLabel:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},busy:{required:!1,tsType:{name:"boolean"},description:""}}}},"../../packages/ui/src/components/cms/marketing/discounts/DiscountPreviewPanel.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/index.ts"),_shared__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/cms/marketing/shared/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/i18n/src/index.ts");function DiscountPreviewPanel({data,className}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_3__.c3)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_shared__WEBPACK_IMPORTED_MODULE_2__.xH,{title:t("Discount preview"),description:t("Visual confirmation of what customers will see."),data,className,renderPreview:preview=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_1__.vw,{variant:"default",className:"text-xs",children:preview.code}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-medium",children:preview.label})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-muted-foreground text-xs uppercase",children:t("Validity")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{children:preview.validity})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-muted-foreground text-xs uppercase",children:t("Applies to")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{children:preview.appliesTo})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-muted-foreground text-xs",children:preview.usageLabel})]})})}const __WEBPACK_DEFAULT_EXPORT__=DiscountPreviewPanel;DiscountPreviewPanel.__docgenInfo={description:"",methods:[],displayName:"DiscountPreviewPanel",props:{data:{required:!0,tsType:{name:"DiscountPreviewData"},description:""},className:{required:!1,tsType:{name:"string"},description:""}}}},"../../packages/ui/src/components/cms/marketing/discounts/DiscountSummaryCard.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/index.ts"),_shared__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/cms/marketing/shared/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/i18n/src/index.ts");function DiscountSummaryCard({data,statusLabel,description,actions,footer}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_3__.c3)(),metrics=[{label:t("Offer"),value:data.label},{label:t("Validity"),value:data.validity},{label:t("Usage"),value:data.usageLabel},{label:t("Applies to"),value:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_1__.vw,{variant:"default",className:"text-xs",children:data.appliesTo})}];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_shared__WEBPACK_IMPORTED_MODULE_2__.Hv,{title:data.code,status:{label:null!=statusLabel?statusLabel:t("Active"),tone:"success"},description:null!=description?description:t("Keep an eye on redemptions to ensure margin targets are protected."),metrics,actions,footer})}const __WEBPACK_DEFAULT_EXPORT__=DiscountSummaryCard;DiscountSummaryCard.__docgenInfo={description:"",methods:[],displayName:"DiscountSummaryCard",props:{data:{required:!0,tsType:{name:"DiscountPreviewData"},description:""},statusLabel:{required:!1,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"string"},description:""},actions:{required:!1,tsType:{name:"ReactNode"},description:""},footer:{required:!1,tsType:{name:"ReactNode"},description:""}}}},"../../packages/ui/src/components/cms/marketing/discounts/hooks/useDiscountFormState.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>useDiscountFormState});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_acme_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/i18n/src/index.ts"),_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/cms/marketing/discounts/types.ts");function useDiscountFormState({defaultValues,validationErrors,onSubmit,onPreviewChange,onStatusChange}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_1__.c3)(),[values,setValues]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({..._types__WEBPACK_IMPORTED_MODULE_2__.T,...defaultValues}),[internalErrors,setInternalErrors]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({}),[status,setStatus]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("idle"),[toast,setToast]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({open:!1,message:""});(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{setValues({..._types__WEBPACK_IMPORTED_MODULE_2__.T,...defaultValues})},[defaultValues]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{null==onPreviewChange||onPreviewChange((0,_types__WEBPACK_IMPORTED_MODULE_2__.e)(values,t))},[values,onPreviewChange,t]);const errors=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>({...internalErrors,...null!=validationErrors?validationErrors:{}}),[internalErrors,validationErrors]),update=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((key,value)=>{setValues(prev=>({...prev,[key]:value})),setInternalErrors(prev=>{if(!prev[key])return prev;const next={...prev};return delete next[key],next})},[]),dismissToast=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{setToast(prev=>({...prev,open:!1}))},[]),handleSubmit=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async event=>{event.preventDefault(),setStatus("validating"),null==onStatusChange||onStatusChange("validating");const nextErrors=function validate(values){const errors={};return values.code||(errors.code="Promo code is required."),values.value<=0&&(errors.value="Discount must be greater than zero."),values.minPurchase<0&&(errors.minPurchase="Minimum purchase cannot be negative."),values.startDate||(errors.startDate="Start date required."),values.endDate&&values.startDate&&values.endDate<values.startDate&&(errors.endDate="End date must be after start date."),values.appliesTo||(errors.appliesTo="Describe the scope of the discount."),errors}(values);if(setInternalErrors(nextErrors),Object.keys(nextErrors).length>0)return setStatus("error"),null==onStatusChange||onStatusChange("error"),void setToast({open:!0,message:t("Resolve the highlighted issues before continuing.")});if(!onSubmit)return setStatus("success"),null==onStatusChange||onStatusChange("success"),void setToast({open:!0,message:t("Discount draft saved.")});try{setStatus("submitting"),null==onStatusChange||onStatusChange("submitting"),await onSubmit(values),setStatus("success"),null==onStatusChange||onStatusChange("success"),setToast({open:!0,message:t("Discount saved.")})}catch(error){setStatus("error"),null==onStatusChange||onStatusChange("error");const fallback=error instanceof Error?error.message:t("Unable to save discount.");setToast({open:!0,message:fallback})}},[onStatusChange,onSubmit,t,values]);return{values,errors,status,toast,update,handleSubmit,dismissToast}}},"../../packages/ui/src/components/cms/marketing/discounts/types.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>defaultDiscountValues,e:()=>getDiscountPreview});const defaultDiscountValues={code:"",type:"percentage",value:10,minPurchase:0,startDate:"",endDate:"",usageLimit:0,appliesTo:""};function getDiscountPreview(values,t){const amountLabel="percentage"===values.type?t?t("cms.marketing.discounts.offer.percentage",{value:values.value}):`${values.value}% off`:t?t("cms.marketing.discounts.offer.fixed",{amount:values.value.toFixed(2)}):`$${values.value.toFixed(2)} off`,validity=values.startDate?values.endDate?t?t("cms.marketing.discounts.validity.range",{start:values.startDate,end:values.endDate}):`${values.startDate} → ${values.endDate}`:t?t("cms.marketing.discounts.validity.starts",{date:values.startDate}):`Starts ${values.startDate}`:t?t("cms.marketing.discounts.validity.pending"):"Schedule pending",usageLabel=values.usageLimit>0?t?t("cms.marketing.discounts.usage.remaining",{count:values.usageLimit}):`${values.usageLimit} uses remaining`:t?t("cms.marketing.discounts.usage.unlimited"):"Unlimited use";return{code:values.code||"NEWCODE",label:amountLabel,validity,appliesTo:values.appliesTo||(t?t("cms.marketing.discounts.appliesTo.entireCatalog"):"Entire catalog"),usageLabel}}},"../../packages/ui/src/components/cms/marketing/emailScheduling/EmailScheduleForm.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_atoms__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/atoms/index.ts"),_utils_style__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/ui/src/utils/style/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../packages/i18n/src/index.ts"),_ScheduleTimingFields__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../packages/ui/src/components/cms/marketing/emailScheduling/ScheduleTimingFields.tsx"),_FollowUpControls__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../packages/ui/src/components/cms/marketing/emailScheduling/FollowUpControls.tsx"),_hooks_useEmailScheduleFormState__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../packages/ui/src/components/cms/marketing/emailScheduling/hooks/useEmailScheduleFormState.ts");function EmailScheduleForm({defaultValues,validationErrors,onSubmit,onPreviewChange,onStatusChange,submitLabel,className,busy}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_4__.c3)(),{values,errors,status,toast,updateValue,handleSubmit,dismissToast}=(0,_hooks_useEmailScheduleFormState__WEBPACK_IMPORTED_MODULE_7__.S)({defaultValues,validationErrors,onSubmit,onPreviewChange,onStatusChange});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("form",{onSubmit:handleSubmit,noValidate:!0,className:(0,_utils_style__WEBPACK_IMPORTED_MODULE_3__.cn)("space-y-6",className),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.Zp,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.Wu,{className:"space-y-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:"email-subject",className:"text-sm font-medium",children:t("emailScheduling.subjectLabel")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{id:"email-subject",value:values.subject,onChange:event=>updateValue("subject",event.target.value),"aria-invalid":errors.subject?"true":"false","aria-describedby":errors.subject?"email-subject-error":void 0}),errors.subject&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{id:"email-subject-error",className:"text-danger text-xs","data-token":"--color-danger",children:errors.subject})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:"email-preheader",className:"text-sm font-medium",children:t("emailScheduling.preheaderLabel")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.TM,{id:"email-preheader",rows:2,value:values.preheader,onChange:event=>updateValue("preheader",event.target.value)})]})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ScheduleTimingFields__WEBPACK_IMPORTED_MODULE_5__.v,{values,errors,onUpdate:updateValue}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_FollowUpControls__WEBPACK_IMPORTED_MODULE_6__.D,{values,error:errors.followUpDelayHours,onUpdate:updateValue}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex justify-end",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.$n,{type:"submit",disabled:busy||"submitting"===status,children:"submitting"===status?t("emailScheduling.scheduling"):null!=submitLabel?submitLabel:t("emailScheduling.scheduleSend")})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_2__.y8,{open:toast.open,message:toast.message,onClose:dismissToast})]})}const __WEBPACK_DEFAULT_EXPORT__=EmailScheduleForm;EmailScheduleForm.__docgenInfo={description:"",methods:[],displayName:"EmailScheduleForm",props:{defaultValues:{required:!1,tsType:{name:"Partial",elements:[{name:"EmailScheduleFormValues"}],raw:"Partial<EmailScheduleFormValues>"},description:""},validationErrors:{required:!1,tsType:{name:"Partial",elements:[{name:"Record",elements:[{name:"EmailScheduleFormValues"},{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}],raw:"Record<TField, string | undefined>"}],raw:"Partial<\n  Record<TField, string | undefined>\n>"},description:""},onSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(\n  values: TValues\n) => Promise<void> | void",signature:{arguments:[{type:{name:"EmailScheduleFormValues"},name:"values"}],return:{name:"union",raw:"Promise<void> | void",elements:[{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"void"}]}}},description:""},onPreviewChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(preview: EmailSchedulePreviewData) => void",signature:{arguments:[{type:{name:"EmailSchedulePreviewData"},name:"preview"}],return:{name:"void"}}},description:""},onStatusChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(status: SubmissionStatus) => void",signature:{arguments:[{type:{name:"union",raw:'| "idle"\n| "validating"\n| "submitting"\n| "success"\n| "error"',elements:[{name:"literal",value:'"idle"'},{name:"literal",value:'"validating"'},{name:"literal",value:'"submitting"'},{name:"literal",value:'"success"'},{name:"literal",value:'"error"'}]},name:"status"}],return:{name:"void"}}},description:""},submitLabel:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},busy:{required:!1,tsType:{name:"boolean"},description:""}}}},"../../packages/ui/src/components/cms/marketing/emailScheduling/EmailSchedulePreviewPanel.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/index.ts"),_shared__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/cms/marketing/shared/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/i18n/src/index.ts");function EmailSchedulePreviewPanel({data,className}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_3__.c3)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_shared__WEBPACK_IMPORTED_MODULE_2__.xH,{title:t("emailScheduling.preview.title"),description:t("emailScheduling.preview.description"),data,className,renderPreview:preview=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-muted-foreground text-xs uppercase",children:t("emailScheduling.preview.subjectLabel")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-base font-medium",children:preview.subject})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"grid gap-2 sm:grid-cols-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-muted-foreground text-xs uppercase",children:t("emailScheduling.preview.scheduledForLabel")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{children:preview.sendAtLabel})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-muted-foreground text-xs uppercase",children:t("emailScheduling.preview.timezoneLabel")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_1__.vw,{variant:"default",className:"text-xs",children:preview.timezone})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-muted-foreground text-xs uppercase",children:t("emailScheduling.preview.segmentLabel")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_1__.vw,{variant:"success",className:"text-xs",children:preview.segment})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-muted-foreground text-xs",children:preview.followUpSummary})]})})}const __WEBPACK_DEFAULT_EXPORT__=EmailSchedulePreviewPanel;EmailSchedulePreviewPanel.__docgenInfo={description:"",methods:[],displayName:"EmailSchedulePreviewPanel",props:{data:{required:!0,tsType:{name:"EmailSchedulePreviewData"},description:""},className:{required:!1,tsType:{name:"string"},description:""}}}},"../../packages/ui/src/components/cms/marketing/emailScheduling/EmailScheduleSummaryCard.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{h:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/index.ts"),_shared__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/cms/marketing/shared/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/i18n/src/index.ts");function EmailScheduleSummaryCard({data,statusLabel,description,actions,footer}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_3__.c3)(),metrics=[{label:t("emailScheduling.summary.sendTimeLabel"),value:data.sendAtLabel},{label:t("emailScheduling.summary.timezoneLabel"),value:data.timezone},{label:t("emailScheduling.summary.segmentLabel"),value:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_1__.vw,{variant:"success",className:"text-xs",children:data.segment})},{label:t("emailScheduling.summary.followUpLabel"),value:data.followUpSummary}];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_shared__WEBPACK_IMPORTED_MODULE_2__.Hv,{title:data.subject,status:{label:null!=statusLabel?statusLabel:t("emailScheduling.summary.status.scheduled"),tone:"success"},description:null!=description?description:t("emailScheduling.summary.defaultDescription"),metrics,actions,footer})}const __WEBPACK_DEFAULT_EXPORT__=EmailScheduleSummaryCard;EmailScheduleSummaryCard.__docgenInfo={description:"",methods:[],displayName:"EmailScheduleSummaryCard",props:{data:{required:!0,tsType:{name:"EmailSchedulePreviewData"},description:""},statusLabel:{required:!1,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"string"},description:""},actions:{required:!1,tsType:{name:"ReactNode"},description:""},footer:{required:!1,tsType:{name:"ReactNode"},description:""}}}},"../../packages/ui/src/components/cms/marketing/emailScheduling/FollowUpControls.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>FollowUpControls});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_atoms__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/atoms/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/i18n/src/index.ts");function FollowUpControls({values,error,onUpdate}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_3__.c3)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.Zp,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.Wu,{className:"space-y-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"text-sm font-medium",children:t("emailScheduling.followUp.title")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-muted-foreground text-xs",children:t("emailScheduling.followUp.helpText")})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_2__.dO,{checked:values.followUpEnabled,onChange:event=>onUpdate("followUpEnabled",event.target.checked),"aria-checked":values.followUpEnabled})]}),values.followUpEnabled&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label",{htmlFor:"follow-up-delay",className:"text-sm font-medium",children:[" ",t("emailScheduling.followUp.delayLabel")]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{id:"follow-up-delay",type:"number",min:1,value:String(values.followUpDelayHours),onChange:event=>onUpdate("followUpDelayHours",Number(event.target.value||0)),"aria-invalid":error?"true":"false","aria-describedby":error?"follow-up-delay-error":void 0}),error&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{id:"follow-up-delay-error",className:"text-danger text-xs","data-token":"--color-danger",children:error})]})]})})}FollowUpControls.__docgenInfo={description:"",methods:[],displayName:"FollowUpControls",props:{values:{required:!0,tsType:{name:"Pick",elements:[{name:"EmailScheduleFormValues"},{name:"union",raw:'"followUpEnabled" | "followUpDelayHours"',elements:[{name:"literal",value:'"followUpEnabled"'},{name:"literal",value:'"followUpDelayHours"'}]}],raw:"Pick<EmailScheduleFormValues, FollowUpField>"},description:""},error:{required:!1,tsType:{name:'Partial["followUpDelayHours"]',raw:'EmailScheduleErrors["followUpDelayHours"]'},description:""},onUpdate:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends FollowUpField>(\n  key: K,\n  value: EmailScheduleFormValues[K]\n) => void",signature:{arguments:[{type:{name:"K"},name:"key"},{type:{name:"EmailScheduleFormValues[K]",raw:"EmailScheduleFormValues[K]"},name:"value"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/marketing/emailScheduling/ScheduleTimingFields.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{v:()=>ScheduleTimingFields});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/i18n/src/index.ts");const timezoneOptions=["America/New_York","America/Los_Angeles","Europe/Berlin","Europe/London","Asia/Tokyo"],segmentOptions=["all","vip","winback","abandoned"];function ScheduleTimingFields({values,errors,onUpdate}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_2__.c3)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.Zp,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.Wu,{className:"grid gap-4 sm:grid-cols-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label",{htmlFor:"email-send-date",className:"text-sm font-medium",children:[" ",t("emailScheduling.form.sendDateLabel")]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{id:"email-send-date",type:"date",value:values.sendDate,onChange:event=>onUpdate("sendDate",event.target.value),"aria-invalid":errors.sendDate?"true":"false","aria-describedby":errors.sendDate?"email-send-date-error":void 0}),errors.sendDate&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{id:"email-send-date-error",className:"text-danger text-xs","data-token":"--color-danger",children:errors.sendDate})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label",{htmlFor:"email-send-time",className:"text-sm font-medium",children:[" ",t("emailScheduling.form.sendTimeLabel")]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{id:"email-send-time",type:"time",value:values.sendTime,onChange:event=>onUpdate("sendTime",event.target.value),"aria-invalid":errors.sendTime?"true":"false","aria-describedby":errors.sendTime?"email-send-time-error":void 0}),errors.sendTime&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{id:"email-send-time-error",className:"text-danger text-xs","data-token":"--color-danger",children:errors.sendTime})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{className:"text-sm font-medium",children:t("emailScheduling.form.timezoneLabel")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.l6,{value:values.timezone,onValueChange:value=>onUpdate("timezone",value),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.bq,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.yv,{placeholder:String(t("emailScheduling.form.selectTimezonePlaceholder"))})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.gC,{children:timezoneOptions.map(zone=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:zone,children:[zone," "]},zone))})]}),errors.timezone&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"text-danger text-xs","data-token":"--color-danger",children:[" ",errors.timezone]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{className:"text-sm font-medium",children:t("emailScheduling.form.segmentLabel")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.l6,{value:values.segment,onValueChange:value=>onUpdate("segment",value),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.bq,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.yv,{placeholder:String(t("emailScheduling.form.selectSegmentPlaceholder"))})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.gC,{children:segmentOptions.map(segment=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:segment,children:t(`emailScheduling.segment.${segment}`)},segment))})]}),errors.segment&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"text-danger text-xs","data-token":"--color-danger",children:[" ",errors.segment]})]})]})})}ScheduleTimingFields.__docgenInfo={description:"",methods:[],displayName:"ScheduleTimingFields",props:{values:{required:!0,tsType:{name:"Pick",elements:[{name:"EmailScheduleFormValues"},{name:"union",raw:'"sendDate" | "sendTime" | "timezone" | "segment"',elements:[{name:"literal",value:'"sendDate"'},{name:"literal",value:'"sendTime"'},{name:"literal",value:'"timezone"'},{name:"literal",value:'"segment"'}]}],raw:"Pick<EmailScheduleFormValues, ScheduleTimingField>"},description:""},errors:{required:!0,tsType:{name:"Pick",elements:[{name:"Partial",elements:[{name:"Record",elements:[{name:"EmailScheduleFormValues"},{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}],raw:"Record<TField, string | undefined>"}],raw:"Partial<\n  Record<TField, string | undefined>\n>"},{name:"union",raw:'"sendDate" | "sendTime" | "timezone" | "segment"',elements:[{name:"literal",value:'"sendDate"'},{name:"literal",value:'"sendTime"'},{name:"literal",value:'"timezone"'},{name:"literal",value:'"segment"'}]}],raw:"Pick<EmailScheduleErrors, ScheduleTimingField>"},description:""},onUpdate:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends ScheduleTimingField>(\n  key: K,\n  value: EmailScheduleFormValues[K]\n) => void",signature:{arguments:[{type:{name:"K"},name:"key"},{type:{name:"EmailScheduleFormValues[K]",raw:"EmailScheduleFormValues[K]"},name:"value"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/marketing/emailScheduling/hooks/useEmailScheduleFormState.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>useEmailScheduleFormState});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_acme_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/i18n/src/index.ts"),_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/cms/marketing/emailScheduling/types.ts");function useEmailScheduleFormState({defaultValues,validationErrors,onSubmit,onPreviewChange,onStatusChange}){const tHook=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_1__.c3)(),t=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((key,vars)=>String(tHook(key,vars)),[tHook]),[values,setValues]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({..._types__WEBPACK_IMPORTED_MODULE_2__.t,...defaultValues}),[internalErrors,setInternalErrors]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({}),[status,setStatus]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("idle"),[toast,setToast]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({open:!1,message:""});(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{setValues({..._types__WEBPACK_IMPORTED_MODULE_2__.t,...defaultValues})},[defaultValues]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{if(!onPreviewChange)return;const preview={subject:values.subject||t("emailScheduling.preview.untitled"),sendAtLabel:values.sendDate?t("emailScheduling.preview.sendAt",{date:values.sendDate,time:values.sendTime}):t("emailScheduling.preview.pending"),timezone:values.timezone,segment:t(`emailScheduling.segment.${values.segment}`),followUpSummary:values.followUpEnabled?t("emailScheduling.preview.followUpEnabled",{hours:values.followUpDelayHours}):t("emailScheduling.preview.followUpDisabled")};onPreviewChange(preview)},[values,onPreviewChange,t]);const errors=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>({...internalErrors,...null!=validationErrors?validationErrors:{}}),[internalErrors,validationErrors]),updateValue=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((key,value)=>{setValues(prev=>({...prev,[key]:value})),setInternalErrors(prev=>{if(!prev[key])return prev;const next={...prev};return delete next[key],next})},[]),dismissToast=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{setToast(prev=>({...prev,open:!1}))},[]),handleSubmit=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async event=>{event.preventDefault(),setStatus("validating"),null==onStatusChange||onStatusChange("validating");const nextErrors=function validate(values,t){const errors={};return values.subject||(errors.subject=t("emailScheduling.validation.subjectRequired")),values.sendDate||(errors.sendDate=t("emailScheduling.validation.sendDateRequired")),values.sendTime||(errors.sendTime=t("emailScheduling.validation.sendTimeRequired")),values.timezone||(errors.timezone=t("emailScheduling.validation.timezoneRequired")),values.segment||(errors.segment=t("emailScheduling.validation.segmentRequired")),values.followUpEnabled&&values.followUpDelayHours<=0&&(errors.followUpDelayHours=t("emailScheduling.validation.delayGreaterThanZero")),errors}(values,t);if(setInternalErrors(nextErrors),Object.keys(nextErrors).length>0)return setStatus("error"),null==onStatusChange||onStatusChange("error"),void setToast({open:!0,message:t("emailScheduling.toast.resolveHighlighted")});if(!onSubmit)return setStatus("success"),null==onStatusChange||onStatusChange("success"),void setToast({open:!0,message:t("emailScheduling.toast.draftSaved")});try{setStatus("submitting"),null==onStatusChange||onStatusChange("submitting"),await onSubmit(values),setStatus("success"),null==onStatusChange||onStatusChange("success"),setToast({open:!0,message:t("emailScheduling.toast.emailScheduled")})}catch(error){setStatus("error"),null==onStatusChange||onStatusChange("error");const fallback=error instanceof Error?error.message:t("emailScheduling.toast.schedulingFailed");setToast({open:!0,message:fallback})}},[values,onSubmit,onStatusChange,t]);return{values,errors,status,toast,updateValue,handleSubmit,dismissToast}}},"../../packages/ui/src/components/cms/marketing/emailScheduling/types.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{t:()=>defaultEmailScheduleValues,w:()=>getEmailSchedulePreview});const defaultEmailScheduleValues={subject:"",preheader:"",sendDate:"",sendTime:"09:00",timezone:"America/New_York",segment:"all",followUpEnabled:!1,followUpDelayHours:24};function getEmailSchedulePreview(values){const sendAtLabel=values.sendDate?`${values.sendDate} ${values.sendTime}`:"";return{subject:values.subject||"",sendAtLabel,timezone:values.timezone,segment:values.segment,followUpSummary:""}}},"../../packages/ui/src/components/cms/marketing/shared/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{xH:()=>PreviewPanel,SK:()=>StepIndicator,Hv:()=>SummaryCard});var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),shadcn=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),molecules=__webpack_require__("../../packages/ui/src/components/molecules/index.ts"),style=__webpack_require__("../../packages/ui/src/utils/style/index.ts"),src=__webpack_require__("../../packages/i18n/src/index.ts"),primitives=__webpack_require__("../../packages/ui/src/components/atoms/primitives/index.ts");function PreviewPanel({title,description,data,renderPreview,footer,actions,className,emptyLabel}){const t=(0,src.c3)(),content=null==renderPreview?void 0:renderPreview(data),fallbackPreview=data?JSON.stringify(data,null,2):String(null!=emptyLabel?emptyLabel:t("cms.preview.notAvailable")),previewBody=content?(0,jsx_runtime.jsx)("div",{className:"p-4",children:content}):(0,jsx_runtime.jsx)(molecules.NG,{code:fallbackPreview,className:"p-4",preClassName:"bg-transparent text-xs text-muted-foreground border-none p-0 pe-12"});return(0,jsx_runtime.jsx)(shadcn.Zp,{className:(0,style.cn)("space-y-4",className),children:(0,jsx_runtime.jsxs)(shadcn.Wu,{className:"space-y-4",children:[(0,jsx_runtime.jsxs)(primitives.cV,{className:"justify-between items-start gap-3",children:[(0,jsx_runtime.jsxs)(primitives.BJ,{className:"space-y-1",children:[(0,jsx_runtime.jsx)("h3",{className:"text-lg font-semibold",children:title}),description&&(0,jsx_runtime.jsx)("p",{className:"text-muted-foreground text-sm",children:description})]}),actions&&(0,jsx_runtime.jsx)(primitives.cV,{className:"items-center gap-2",children:actions})]}),(0,jsx_runtime.jsx)("div",{className:"rounded-lg border bg-muted/40 text-sm",children:previewBody}),footer]})})}PreviewPanel.__docgenInfo={description:"",methods:[],displayName:"PreviewPanel",props:{title:{required:!0,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"string"},description:""},data:{required:!0,tsType:{name:"TData"},description:""},renderPreview:{required:!1,tsType:{name:"signature",type:"function",raw:"(data: TData) => ReactNode",signature:{arguments:[{type:{name:"TData"},name:"data"}],return:{name:"ReactNode"}}},description:"Optional renderer for the preview body. Defaults to JSON output."},footer:{required:!1,tsType:{name:"ReactNode"},description:""},actions:{required:!1,tsType:{name:"ReactNode"},description:""},className:{required:!1,tsType:{name:"string"},description:""},emptyLabel:{required:!1,tsType:{name:"string"},description:""}}};var atoms=__webpack_require__("../../packages/ui/src/components/atoms/index.ts");function AnalyticsSummaryCard({title,description,status,metrics,actions,footer,loading=!1,className}){var _status_tone;return(0,jsx_runtime.jsx)(atoms.Zp,{className:(0,style.cn)("space-y-4",className),children:(0,jsx_runtime.jsxs)(atoms.Wu,{className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,jsx_runtime.jsx)("h3",{className:"text-lg font-semibold",children:title}),status&&(0,jsx_runtime.jsxs)(atoms.vw,{variant:null!==(_status_tone=status.tone)&&void 0!==_status_tone?_status_tone:"default",children:[status.icon,status.label]})]}),description&&(0,jsx_runtime.jsx)("p",{className:"text-muted-foreground text-sm leading-relaxed",children:description})]}),actions&&(0,jsx_runtime.jsx)(primitives.cV,{gap:2,alignY:"center",children:actions})]}),(0,jsx_runtime.jsx)(primitives.xA,{gap:4,className:"sm:grid-cols-2",children:(0,jsx_runtime.jsx)("dl",{className:"contents",children:metrics.map(metric=>{var _metric_badge_tone,value;return(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("dt",{className:"text-muted-foreground text-xs uppercase tracking-wide",children:metric.label}),(0,jsx_runtime.jsxs)("dd",{className:"space-y-2",children:[loading?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(atoms.EA,{className:"h-7 w-24"}),(0,jsx_runtime.jsx)(atoms.EA,{className:"h-2 w-full"})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"text-xl font-semibold leading-tight",children:metric.value}),metric.progress&&(0,jsx_runtime.jsx)(atoms.ke,{value:(value=metric.progress.value,Number.isFinite(value)?value<0?0:value>100?100:value:0),label:metric.progress.label})]}),!loading&&metric.helper&&(0,jsx_runtime.jsx)("p",{className:"text-muted-foreground text-xs",children:metric.helper}),!loading&&metric.badge&&(0,jsx_runtime.jsx)(atoms.vw,{variant:null!==(_metric_badge_tone=metric.badge.tone)&&void 0!==_metric_badge_tone?_metric_badge_tone:"default",children:metric.badge.label})]})]},metric.label)})})}),footer&&(0,jsx_runtime.jsx)("div",{children:footer})]})})}function SummaryCard({title,description,status,metrics,footer,actions,className}){var _status_tone;return(0,jsx_runtime.jsx)(shadcn.Zp,{className:(0,style.cn)("space-y-4",className),children:(0,jsx_runtime.jsxs)(shadcn.Wu,{className:"space-y-4",children:[(0,jsx_runtime.jsxs)(primitives.cV,{className:"items-start justify-between gap-3",children:[(0,jsx_runtime.jsxs)(primitives.BJ,{className:"space-y-2",children:[(0,jsx_runtime.jsxs)(primitives.cV,{className:"items-center gap-2",children:[(0,jsx_runtime.jsx)("h3",{className:"text-lg font-semibold",children:title}),status&&(0,jsx_runtime.jsx)(shadcn.vw,{variant:null!==(_status_tone=status.tone)&&void 0!==_status_tone?_status_tone:"default",children:(0,jsx_runtime.jsxs)(primitives.cV,{className:"items-center gap-1",children:[status.icon,status.label]})})]}),description&&(0,jsx_runtime.jsx)("p",{className:"text-muted-foreground text-sm leading-relaxed",children:description})]}),actions&&(0,jsx_runtime.jsx)(primitives.cV,{className:"items-center gap-2",children:actions})]}),metrics&&metrics.length>0&&(0,jsx_runtime.jsx)(primitives.xA,{cols:1,gap:4,className:"sm:grid-cols-2",children:metrics.map(({label,value,badge,hint})=>{var _badge_tone;return(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsx)("dt",{className:"text-muted-foreground text-xs uppercase tracking-wide",children:label}),(0,jsx_runtime.jsx)("dd",{className:"text-base font-medium",children:"string"==typeof value||"number"==typeof value?(0,jsx_runtime.jsx)("span",{children:value}):value}),hint&&(0,jsx_runtime.jsx)("p",{className:"text-muted-foreground text-xs",children:hint}),badge&&(0,jsx_runtime.jsx)(shadcn.vw,{variant:null!==(_badge_tone=badge.tone)&&void 0!==_badge_tone?_badge_tone:"default",className:"text-xs",children:badge.label})]},label)})}),footer]})})}AnalyticsSummaryCard.__docgenInfo={description:"",methods:[],displayName:"AnalyticsSummaryCard",props:{title:{required:!0,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"ReactNode"},description:""},status:{required:!1,tsType:{name:"signature",type:"object",raw:'{ label: ReactNode; tone?: TagProps["variant"]; icon?: ReactNode }',signature:{properties:[{key:"label",value:{name:"ReactNode",required:!0}},{key:"tone",value:{name:'TagProps["variant"]',raw:'TagProps["variant"]',required:!1}},{key:"icon",value:{name:"ReactNode",required:!1}}]}},description:""},metrics:{required:!0,tsType:{name:"Array",elements:[{name:"AnalyticsSummaryMetric"}],raw:"AnalyticsSummaryMetric[]"},description:""},actions:{required:!1,tsType:{name:"ReactNode"},description:""},footer:{required:!1,tsType:{name:"ReactNode"},description:""},loading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""}}},SummaryCard.__docgenInfo={description:"",methods:[],displayName:"SummaryCard",props:{title:{required:!0,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"string"},description:""},status:{required:!1,tsType:{name:"signature",type:"object",raw:'{\n  label: string;\n  tone?: TagProps["variant"];\n  icon?: ReactNode;\n}',signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"tone",value:{name:'TagProps["variant"]',raw:'TagProps["variant"]',required:!1}},{key:"icon",value:{name:"ReactNode",required:!1}}]}},description:""},metrics:{required:!1,tsType:{name:"Array",elements:[{name:"SummaryMetric"}],raw:"SummaryMetric[]"},description:""},footer:{required:!1,tsType:{name:"ReactNode"},description:""},actions:{required:!1,tsType:{name:"ReactNode"},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};var Inline=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Inline.tsx");function StepIndicator({steps,currentStep,className,onStepSelect}){const t=(0,src.c3)(),progressValue=steps.length>0?(currentStep+1)/steps.length*100:0,active=steps[currentStep];return(0,jsx_runtime.jsxs)("div",{className:(0,style.cn)("space-y-3",className),children:[(0,jsx_runtime.jsxs)(Inline.c,{className:"justify-between text-sm text-muted-foreground",children:[(0,jsx_runtime.jsx)("span",{children:t("pb.tour.stepXofY",{current:Math.min(currentStep+1,steps.length),total:steps.length})}),(0,jsx_runtime.jsx)("span",{children:t("common.percentComplete",{percent:Math.round(progressValue)})})]}),(0,jsx_runtime.jsx)(atoms.ke,{value:progressValue,"aria-label":String(t("common.progress"))}),(0,jsx_runtime.jsx)(Inline.c,{className:"gap-2",children:steps.map((step,index)=>{const isActive=index===currentStep,isCompleted=index<currentStep,tag=(0,jsx_runtime.jsx)(atoms.vw,{variant:isActive?"warning":isCompleted?"success":"default",className:(0,style.cn)("cursor-default text-xs uppercase tracking-wide",onStepSelect&&"cursor-pointer"),children:(0,jsx_runtime.jsxs)(Inline.c,{className:"items-center gap-1",children:[(0,jsx_runtime.jsxs)("span",{className:"font-medium",children:[index+1,"."]}),step.label]})},step.id);return onStepSelect?(0,jsx_runtime.jsx)("button",{type:"button",onClick:()=>onStepSelect(index,step),className:"appearance-none border-0 bg-transparent p-0 min-h-10 min-w-10",children:tag},step.id):tag})}),(null==active?void 0:active.description)&&(0,jsx_runtime.jsx)("p",{className:"text-muted-foreground text-sm",children:active.description})]})}StepIndicator.__docgenInfo={description:"",methods:[],displayName:"StepIndicator",props:{steps:{required:!0,tsType:{name:"unknown"},description:""},currentStep:{required:!0,tsType:{name:"number"},description:""},className:{required:!1,tsType:{name:"string"},description:""},onStepSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(index: number, step: StepDefinition) => void",signature:{arguments:[{type:{name:"number"},name:"index"},{type:{name:"StepDefinition"},name:"step"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/AnnouncementBarEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>AnnouncementBarEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_LocalizedTextInput__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/cms/LocalizedTextInput.tsx");function AnnouncementBarEditor({component,onChange}){const handleInput=(field,value)=>{onChange({[field]:value})};var _component_text,_component_link;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_LocalizedTextInput__WEBPACK_IMPORTED_MODULE_2__.A,{label:"Text",value:null!==(_component_text=component.text)&&void 0!==_component_text?_component_text:"",onChange:v=>handleInput("text",v)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{value:null!==(_component_link=component.link)&&void 0!==_component_link?_component_link:"",onChange:e=>handleInput("link",e.target.value),placeholder:"link"})]})}AnnouncementBarEditor.__docgenInfo={description:"",methods:[],displayName:"AnnouncementBarEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/Block.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),dompurify__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/dompurify@3.2.6/node_modules/dompurify/dist/purify.es.mjs"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_blocks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/ui/src/components/cms/blocks/index.ts"),_utils_style_cssVars__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../packages/ui/src/utils/style/cssVars.ts"),_scrollEffects__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/scrollEffects.ts"),_timeline__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/timeline.ts"),_lottie__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/lottie.ts");function Block({component,locale}){if("Text"===component.type){const{text}=component;var _text_locale;const value="string"==typeof text?text:null!==(_text_locale=null==text?void 0:text[locale])&&void 0!==_text_locale?_text_locale:"",sanitized=dompurify__WEBPACK_IMPORTED_MODULE_1__.A.sanitize(value);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{dangerouslySetInnerHTML:{__html:sanitized}})}const entry=_blocks__WEBPACK_IMPORTED_MODULE_3__.RW[component.type];if(!entry)return null;const Comp=entry.component,{id:_id,type:_type,clickAction,href,animation,animationDuration,animationDelay,animationEasing,...props}=component,{reveal:_revealIgnored,parallax:_parallaxIgnored,sticky:_stickyIgnored,stickyOffset:_stickyOffsetIgnored,hoverScale:_hoverScaleIgnored,hoverOpacity:_hoverOpacityIgnored,staggerChildren:_staggerIgnored,timeline:_timelineIgnored,lottieUrl:_lottieUrlIgnored,lottieAutoplay:_lottieAutoplayIgnored,lottieLoop:_lottieLoopIgnored,lottieSpeed:_lottieSpeedIgnored,lottieTrigger:_lottieTriggerIgnored,gridArea:_gridAreaIgnored,gridColumn:_gridColumnIgnored,gridRow:_gridRowIgnored,styles:_stylesIgnored,widthDesktop:_widthDesktopIgnored,widthTablet:_widthTabletIgnored,widthMobile:_widthMobileIgnored,heightDesktop:_heightDesktopIgnored,heightTablet:_heightTabletIgnored,heightMobile:_heightMobileIgnored,marginDesktop:_marginDesktopIgnored,marginTablet:_marginTabletIgnored,marginMobile:_marginMobileIgnored,paddingDesktop:_paddingDesktopIgnored,paddingTablet:_paddingTabletIgnored,paddingMobile:_paddingMobileIgnored,leftDesktop:_leftDesktopIgnored,leftTablet:_leftTabletIgnored,leftMobile:_leftMobileIgnored,topDesktop:_topDesktopIgnored,topTablet:_topTabletIgnored,topMobile:_topMobileIgnored,pbViewport:_pbViewportIgnored,zIndex:_zIndexIgnored,locked:_lockedIgnored,anchorId:_anchorIdIgnored,...safeProps}=props,compProps={...safeProps};"navigate"===clickAction&&href&&(compProps.href=href);let styleVars={};try{const raw=component.styles,parsed=raw?JSON.parse(String(raw)):void 0,overrides=parsed&&"object"==typeof parsed?parsed:void 0;styleVars=(0,_utils_style_cssVars__WEBPACK_IMPORTED_MODULE_7__.O)(overrides)}catch(e){}let rendered=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Comp,{...compProps,locale});"navigate"===clickAction&&href&&"Button"!==component.type&&(rendered=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("a",{href,onClick:e=>e.preventDefault(),className:"cursor-pointer inline-block min-h-10 min-w-10",children:rendered}));const animationClass=animation&&"none"!==animation&&{fade:"pb-animate-fade",slide:"pb-animate-slide","slide-up":"pb-animate-slide-up","slide-down":"pb-animate-slide-down","slide-left":"pb-animate-slide-left","slide-right":"pb-animate-slide-right",zoom:"pb-animate-zoom",rotate:"pb-animate-rotate"}[animation]||void 0,{reveal,parallax,sticky,stickyOffset,hoverScale,hoverOpacity,staggerChildren,timeline,lottieUrl,lottieAutoplay,lottieLoop,lottieSpeed,lottieTrigger,gridArea,gridColumn,gridRow}=component,needsHover="number"==typeof hoverScale||"number"==typeof hoverOpacity;if(!(!!animationClass||!!reveal||"number"==typeof parallax||!!sticky||needsHover||Object.keys(styleVars).length>0||"number"==typeof staggerChildren))return rendered;const wrapStyleVars={...styleVars},staticTransform=wrapStyleVars["--pb-static-transform"];if("number"==typeof animationDuration&&(styleVars["--pb-anim-duration"]=`${animationDuration}ms`),"number"==typeof animationDelay&&(styleVars["--pb-anim-delay"]=`${animationDelay}ms`),animationEasing&&(styleVars["--pb-anim-ease"]=`${animationEasing}`),void 0!==stickyOffset){const val="number"==typeof stickyOffset?`${stickyOffset}px`:String(stickyOffset);wrapStyleVars["--pb-sticky-offset"]=val}"number"==typeof hoverScale&&(wrapStyleVars["--pb-hover-scale"]=String(hoverScale)),"number"==typeof hoverOpacity&&(wrapStyleVars["--pb-hover-opacity"]=String(hoverOpacity)),gridArea&&(wrapStyleVars.gridArea=gridArea),gridColumn&&(wrapStyleVars.gridColumn=gridColumn),gridRow&&(wrapStyleVars.gridRow=gridRow);const className=[animationClass?"pb-animate":void 0,animationClass].filter(Boolean).join(" ");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:className||void 0,"data-pb-duration":"number"==typeof animationDuration?animationDuration:void 0,"data-pb-delay":"number"==typeof animationDelay?animationDelay:void 0,"data-pb-ease":animationEasing||void 0,"data-pb-reveal":reveal||void 0,"data-pb-parallax":"number"==typeof parallax?parallax:void 0,"data-pb-sticky":sticky||void 0,"data-pb-sticky-offset":void 0!==stickyOffset?String(stickyOffset):void 0,"data-pb-hover":needsHover?"1":void 0,"data-pb-click":"open-modal"===clickAction||"scroll-to"===clickAction?clickAction:void 0,"data-pb-href":href||void 0,"data-pb-modal":component.modalHtml||void 0,"data-pb-stagger":"number"==typeof staggerChildren?String(staggerChildren):void 0,"data-pb-timeline":"object"==typeof timeline&&null!==timeline&&"steps"in timeline&&Array.isArray(timeline.steps)&&timeline.steps.length?JSON.stringify(timeline):void 0,"data-pb-lottie-url":lottieUrl||void 0,"data-pb-lottie-autoplay":lottieAutoplay?"1":void 0,"data-pb-lottie-loop":lottieLoop?"1":void 0,"data-pb-lottie-speed":"number"==typeof lottieSpeed?String(lottieSpeed):void 0,"data-pb-lottie-trigger":lottieTrigger||void 0,style:wrapStyleVars,children:needsHover?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"pb-hover-target",children:rendered}):staticTransform?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{transform:staticTransform},children:rendered})}):rendered})}!function injectAnimations(){if("undefined"==typeof document)return;if(document.getElementById("pb-animations"))return;const style=document.createElement("style");style.id="pb-animations",style.textContent="\n@keyframes pb-fade { from { opacity: 0; } to { opacity: 1; } }\n@keyframes pb-slide { from { transform: translateY(1rem); opacity: 0; } to { transform: translateY(0); opacity: 1; } }\n@keyframes pb-slide-up { from { transform: translateY(1rem); opacity: 0; } to { transform: translateY(0); opacity: 1; } }\n@keyframes pb-slide-down { from { transform: translateY(-1rem); opacity: 0; } to { transform: translateY(0); opacity: 1; } }\n@keyframes pb-slide-left { from { transform: translateX(1rem); opacity: 0; } to { transform: translateX(0); opacity: 1; } }\n@keyframes pb-slide-right { from { transform: translateX(-1rem); opacity: 0; } to { transform: translateX(0); opacity: 1; } }\n@keyframes pb-zoom { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }\n@keyframes pb-rotate { from { transform: rotate(-8deg); opacity: 0; } to { transform: rotate(0deg); opacity: 1; } }\n\n.pb-animate { animation-duration: var(--pb-anim-duration, .5s); animation-delay: var(--pb-anim-delay, 0s); animation-timing-function: var(--pb-anim-ease, ease); animation-fill-mode: both; will-change: transform, opacity; }\n.pb-animate-fade { animation-name: pb-fade; }\n.pb-animate-slide { animation-name: pb-slide; }\n.pb-animate-slide-up { animation-name: pb-slide-up; }\n.pb-animate-slide-down { animation-name: pb-slide-down; }\n.pb-animate-slide-left { animation-name: pb-slide-left; }\n.pb-animate-slide-right { animation-name: pb-slide-right; }\n.pb-animate-zoom { animation-name: pb-zoom; }\n.pb-animate-rotate { animation-name: pb-rotate; }\n",document.head.appendChild(style)}(),(0,_scrollEffects__WEBPACK_IMPORTED_MODULE_6__.aC)(),(0,_timeline__WEBPACK_IMPORTED_MODULE_4__.P)(),(0,_lottie__WEBPACK_IMPORTED_MODULE_5__.k)();const __WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(Block);Block.__docgenInfo={description:"",methods:[],displayName:"Block",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},locale:{required:!0,tsType:{name:"Locale"},description:""}}}},"../../packages/ui/src/components/cms/page-builder/ButtonEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>ButtonEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_useComponentInputs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useComponentInputs.ts");function ButtonEditor({component,onChange}){const{handleInput}=(0,_useComponentInputs__WEBPACK_IMPORTED_MODULE_2__.A)(onChange),handleHiddenVariantInput=event=>{const rawValue=event.currentTarget.value;handleInput("variant",rawValue||void 0)};var _component_variant,_component_label,_component_href,_component_variant1;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"hidden",value:null!==(_component_variant=component.variant)&&void 0!==_component_variant?_component_variant:"",onInput:handleHiddenVariantInput,onChange:handleHiddenVariantInput}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:"Label",value:null!==(_component_label=component.label)&&void 0!==_component_label?_component_label:"",onChange:e=>handleInput("label",e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:"URL",value:null!==(_component_href=component.href)&&void 0!==_component_href?_component_href:"",onChange:e=>handleInput("href",e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.l6,{value:null!==(_component_variant1=component.variant)&&void 0!==_component_variant1?_component_variant1:"",onValueChange:v=>handleInput("variant",v||void 0),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.bq,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.yv,{placeholder:"Variant"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.gC,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:"default",children:"default"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:"outline",children:"outline"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:"ghost",children:"ghost"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:"destructive",children:"destructive"})]})]})]})}ButtonEditor.__docgenInfo={description:"",methods:[],displayName:"ButtonEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/CanvasItem.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>page_builder_CanvasItem});var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),utilities_esm=__webpack_require__("../../node_modules/.pnpm/@dnd-kit+utilities@3.2.2_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@dnd-kit/utilities/dist/utilities.esm.js"),purify_es=__webpack_require__("../../node_modules/.pnpm/dompurify@3.2.6/node_modules/dompurify/dist/purify.es.mjs"),useSortableBlock=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useSortableBlock.ts"),useBlockDimensions=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useBlockDimensions.ts"),useBlockTransform=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useBlockTransform.ts"),useLocalizedTextEditor=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useLocalizedTextEditor.ts");__webpack_require__("../../node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");function parseSpacing(value){if(!value)return[0,0,0,0];const parts=value.split(/\s+/).filter(Boolean).map(p=>parseFloat(p));return 1===parts.length?[parts[0],parts[0],parts[0],parts[0]]:2===parts.length?[parts[0],parts[1],parts[0],parts[1]]:3===parts.length?[parts[0],parts[1],parts[2],parts[1]]:[parts[0],parts[1],parts[2],parts[3]]}function formatSpacing(values){return values.map(v=>`${Math.round(v)}px`).join(" ")}function sideIndex(side){return"top"===side?0:"right"===side?1:"bottom"===side?2:3}function useCanvasSpacing({componentId,marginKey,paddingKey,marginVal,paddingVal,dispatch,containerRef,baselineSnap=!1,baselineStep=8}){const startRef=(0,react.useRef)(null),[active,setActive]=(0,react.useState)(null),[overlay,setOverlay]=(0,react.useState)(null),kbTimer=(0,react.useRef)(null),rafRef=(0,react.useRef)(null),lastEventRef=(0,react.useRef)(null);(0,react.useEffect)(()=>{if(!active)return;const processMove=e=>{if(!startRef.current)return;const{x,y,margin,padding,width,height}=startRef.current,dx=e.clientX-x,dy=e.clientY-y,delta="left"===active.side||"right"===active.side?dx:dy,current="margin"===active.type?[...margin]:[...padding],idx=sideIndex(active.side),nextRaw="padding"===active.type?Math.max(0,current[idx]+delta):current[idx]+delta;var val;current[idx]=(val=nextRaw,baselineSnap&&baselineStep>0?Math.round(val/baselineStep)*baselineStep:val);const patchVal=formatSpacing(current);if(dispatch({type:"resize",id:componentId,["margin"===active.type?marginKey:paddingKey]:patchVal}),"padding"===active.type){let top=0,left=0,w=width,h=height;"top"===active.side?h=current[0]:"bottom"===active.side?(h=current[2],top=height-h):"left"===active.side?w=current[3]:"right"===active.side&&(w=current[1],left=width-w),setOverlay({type:"padding",side:active.side,top,left,width:w,height:h})}else{let top=0,left=0,w=width,h=height;"top"===active.side?(h=current[0],top=-h):"bottom"===active.side?(h=current[2],top=height):"left"===active.side?(w=current[3],left=-w):"right"===active.side&&(w=current[1],left=width),setOverlay({type:"margin",side:active.side,top,left,width:w,height:h})}},handleMove=e=>{lastEventRef.current=e;1?null==rafRef.current&&(rafRef.current=window.requestAnimationFrame(()=>{const ev=lastEventRef.current;ev&&processMove(ev),rafRef.current=null})):processMove(e)},stop=()=>{if(setActive(null),setOverlay(null),null!=rafRef.current){try{cancelAnimationFrame(rafRef.current)}catch(e){}rafRef.current=null}},onKeyDown=ke=>{"Escape"===ke.key&&stop()};try{window.addEventListener("pointermove",handleMove,{passive:!0})}catch(e){window.addEventListener("pointermove",handleMove)}return window.addEventListener("pointerup",stop),window.addEventListener("blur",stop),window.addEventListener("keydown",onKeyDown),()=>{try{window.removeEventListener("pointermove",handleMove)}catch(e){}window.removeEventListener("pointerup",stop),window.removeEventListener("blur",stop),window.removeEventListener("keydown",onKeyDown)}},[active,componentId,dispatch,marginKey,paddingKey,baselineSnap,baselineStep]);return{startSpacing:(e,type,side)=>{e.stopPropagation();const el=containerRef.current;el&&(startRef.current={x:e.clientX,y:e.clientY,margin:parseSpacing(marginVal),padding:parseSpacing(paddingVal),width:el.offsetWidth,height:el.offsetHeight},setActive({type,side}))},overlay,nudgeSpacingByKeyboard:(type,side,delta)=>{const el=containerRef.current;if(!el)return;const margin=parseSpacing(marginVal),padding=parseSpacing(paddingVal),current="margin"===type?[...margin]:[...padding],idx=sideIndex(side),raw="padding"===type?Math.max(0,current[idx]+delta):current[idx]+delta,nextVal=(val=raw,baselineSnap&&baselineStep>0?Math.round(val/baselineStep)*baselineStep:val);var val;current[idx]=nextVal;const patchVal=formatSpacing(current);if(dispatch({type:"resize",id:componentId,["margin"===type?marginKey:paddingKey]:patchVal}),"padding"===type){let top=0,left=0,w=el.offsetWidth,h=el.offsetHeight;"top"===side?h=current[0]:"bottom"===side?(h=current[2],top=el.offsetHeight-h):"left"===side?w=current[3]:"right"===side&&(w=current[1],left=el.offsetWidth-w),setOverlay({type:"padding",side,top,left,width:w,height:h})}else{let top=0,left=0,w=el.offsetWidth,h=el.offsetHeight;"top"===side?(h=current[0],top=-h):"bottom"===side?(h=current[2],top=el.offsetHeight):"left"===side?(w=current[3],left=-w):"right"===side&&(w=current[1],left=el.offsetWidth),setOverlay({type:"margin",side,top,left,width:w,height:h})}kbTimer.current&&window.clearTimeout(kbTimer.current),kbTimer.current=window.setTimeout(()=>setOverlay(null),300)}}}var dist=__webpack_require__("../../node_modules/.pnpm/@tiptap+react@2.24.1_@tiptap+core@2.24.1_@tiptap+pm@2.24.1__@tiptap+pm@2.24.1_react-dom_b138374a6315c616c3d84fda7e8df92f/node_modules/@tiptap/react/dist/index.js"),shadcn=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),LinkPicker=__webpack_require__("../../packages/ui/src/components/cms/page-builder/LinkPicker.tsx");function LinkModal({open,initialUrl,onClose,onSave}){const[value,setValue]=(0,react.useState)(null!=initialUrl?initialUrl:""),valid=(0,react.useMemo)(()=>function isValidHref(href){return!!href&&[/^(https?:)\/\//i,/^(mailto:)/i,/^(tel:)/i,/^\//,/^#\w+/,/^(\.\.?)\//].some(re=>re.test(href.trim()))}(value),[value]),[pickerOpen,setPickerOpen]=(0,react.useState)(!1),inputRef=(0,react.useRef)(null);return(0,react.useEffect)(()=>{open&&setValue(null!=initialUrl?initialUrl:"")},[open,initialUrl]),(0,react.useEffect)(()=>{if(!open)return;const id=window.setTimeout(()=>{var _inputRef_current;return null===(_inputRef_current=inputRef.current)||void 0===_inputRef_current?void 0:_inputRef_current.focus()},0);return()=>window.clearTimeout(id)},[open]),(0,jsx_runtime.jsx)(shadcn.lG,{open,onOpenChange:o=>o?void 0:onClose(),children:(0,jsx_runtime.jsxs)(shadcn.Cf,{children:[(0,jsx_runtime.jsxs)(shadcn.c7,{children:[(0,jsx_runtime.jsx)(shadcn.L3,{children:"Insert Link"}),(0,jsx_runtime.jsx)(shadcn.rr,{children:"Enter a valid URL or path"})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-end gap-2",children:[(0,jsx_runtime.jsx)("div",{className:"grow",children:(0,jsx_runtime.jsx)(shadcn.pd,{ref:inputRef,value,placeholder:"https://example.com or /page",onChange:e=>setValue(e.target.value)})}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:()=>setPickerOpen(!0),children:"Pick Internal"})]}),(0,jsx_runtime.jsxs)(shadcn.Es,{children:[(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:onClose,children:"Cancel"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",onClick:()=>valid&&onSave(value.trim()),disabled:!valid,children:"Save"})]}),(0,jsx_runtime.jsx)(LinkPicker.A,{open:pickerOpen,onClose:()=>setPickerOpen(!1),onPick:href=>{setValue(href),setPickerOpen(!1)}})]})})}function MenuBar({editor}){const[open,setOpen]=(0,react.useState)(!1),currentHref=(0,react.useMemo)(()=>{if(!editor)return"";try{var _editor_getAttributes_href;return null!==(_editor_getAttributes_href=editor.getAttributes("link").href)&&void 0!==_editor_getAttributes_href?_editor_getAttributes_href:""}catch(e){return""}},[editor]);return editor?(0,jsx_runtime.jsxs)("div",{className:"mb-1 flex flex-wrap gap-1 border-b pb-1",children:[(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:editor.isActive("bold")?"default":"outline",onClick:()=>editor.chain().focus().toggleBold().run(),children:"B"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:editor.isActive("italic")?"default":"outline",onClick:()=>editor.chain().focus().toggleItalic().run(),children:"I"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:editor.isActive("code")?"default":"outline",onClick:()=>editor.chain().focus().toggleCode().run(),children:"Code"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:editor.isActive("blockquote")?"default":"outline",onClick:()=>editor.chain().focus().toggleBlockquote().run(),children:">"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:editor.isActive("bulletList")?"default":"outline",onClick:()=>editor.chain().focus().toggleBulletList().run(),children:"• List"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:editor.isActive("orderedList")?"default":"outline",onClick:()=>editor.chain().focus().toggleOrderedList().run(),children:"1. List"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:editor.isActive("heading",{level:1})?"default":"outline",onClick:()=>editor.chain().focus().toggleHeading({level:1}).run(),children:"H1"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:editor.isActive("heading",{level:2})?"default":"outline",onClick:()=>editor.chain().focus().toggleHeading({level:2}).run(),children:"H2"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:editor.isActive("heading",{level:3})?"default":"outline",onClick:()=>editor.chain().focus().toggleHeading({level:3}).run(),children:"H3"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:editor.isActive("link")?"default":"outline",onClick:()=>setOpen(!0),children:"Link"}),editor.isActive("link")&&(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:()=>editor.chain().focus().unsetLink().run(),children:"Unlink"}),(0,jsx_runtime.jsx)(LinkModal,{open,initialUrl:currentHref,onClose:()=>setOpen(!1),onSave:href=>{editor.chain().focus().extendMarkRange("link").setLink({href}).run(),setOpen(!1)}})]}):null}LinkModal.__docgenInfo={description:"",methods:[],displayName:"LinkModal",props:{open:{required:!0,tsType:{name:"boolean"},description:""},initialUrl:{required:!1,tsType:{name:"string"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onSave:{required:!0,tsType:{name:"signature",type:"function",raw:"(href: string) => void",signature:{arguments:[{type:{name:"string"},name:"href"}],return:{name:"void"}}},description:""}}};const page_builder_MenuBar=MenuBar;MenuBar.__docgenInfo={description:"",methods:[],displayName:"MenuBar",props:{editor:{required:!0,tsType:{name:"union",raw:"Editor | null",elements:[{name:"Editor"},{name:"null"}]},description:""}}};var react_icons_esm=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-icons@1.3.2_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-icons/dist/react-icons.esm.js");const TextBlockView=({selected,attributes,listeners,setNodeRef,containerRef,isDragging,style,guides,snapping,editor,editing,onStartEditing,onFinishEditing,startDrag,startResize,startRotate,onKeyDown,onSelect,onRemove,content,zIndex,locked=!1,kbResizing=!1,spacingOverlay,rotating=!1,rotateAngle=0,staticTransform})=>{const sanitized=purify_es.A.sanitize(content),[toolbarPos,setToolbarPos]=(0,react.useState)({x:0,y:0,visible:!1}),[linkOpen,setLinkOpen]=(0,react.useState)(!1);(0,react.useEffect)(()=>{if(!editor||!editing)return;const update=()=>{try{var _window_getSelection,_window,_containerRef_current;const sel=null===(_window_getSelection=(_window=window).getSelection)||void 0===_window_getSelection?void 0:_window_getSelection.call(_window);if(!sel||0===sel.rangeCount)return void setToolbarPos(p=>({...p,visible:!1}));const rect=sel.getRangeAt(0).getBoundingClientRect(),host=null===(_containerRef_current=containerRef.current)||void 0===_containerRef_current?void 0:_containerRef_current.getBoundingClientRect();if(!host||!rect||0===rect.width&&0===rect.height)return void setToolbarPos(p=>({...p,visible:!1}));const x=Math.max(0,rect.left-host.left+rect.width/2),y=Math.max(0,rect.top-host.top)-32;setToolbarPos({x,y,visible:!0})}catch(e){setToolbarPos(p=>({...p,visible:!1}))}};return update(),editor.on("selectionUpdate",update),editor.on("transaction",update),()=>{try{editor.off("selectionUpdate",update)}catch(e){}try{editor.off("transaction",update)}catch(e){}}},[editor,editing,containerRef]);const assignNodeRef=(0,react.useCallback)(node=>{setNodeRef(node),containerRef.current=node},[setNodeRef,containerRef]);return(0,jsx_runtime.jsxs)("div",{ref:assignNodeRef,onClick:onSelect,role:"listitem","aria-label":"Canvas item",tabIndex:0,onKeyDown,style:{...void 0!==zIndex?{zIndex}:{},...style},className:"relative rounded border"+(selected?" ring-2 ring-blue-500":"")+(snapping?" border-primary":""),children:[(0,jsx_runtime.jsx)("div",{className:"absolute start-0 top-0 z-10 h-6 w-6 cursor-move bg-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",...attributes,...null!=listeners?listeners:{},role:"button",tabIndex:0,"aria-pressed":isDragging,"aria-describedby":"pb-drag-instructions",title:"Drag or press space/enter to move",onPointerDown:e=>{e.stopPropagation(),onSelect(),locked||startDrag(e)}}),(null!==guides.x||null!==guides.y)&&(0,jsx_runtime.jsxs)("div",{className:"pointer-events-none absolute inset-0 z-20",children:[null!==guides.x&&(0,jsx_runtime.jsx)("div",{className:"absolute top-0 bottom-0 w-px bg-primary",style:{left:guides.x}}),null!==guides.y&&(0,jsx_runtime.jsx)("div",{className:"absolute start-0 end-0 h-px bg-primary",style:{top:guides.y}})]}),locked&&(0,jsx_runtime.jsx)("div",{className:"absolute end-1 top-1 z-30 text-xs",title:"Locked","aria-hidden":!0,children:(0,jsx_runtime.jsx)(react_icons_esm.JD_,{})}),spacingOverlay&&(0,jsx_runtime.jsx)("div",{className:"pointer-events-none absolute z-30 bg-primary/20",style:{top:spacingOverlay.top,left:spacingOverlay.left,width:spacingOverlay.width,height:spacingOverlay.height}}),kbResizing&&(0,jsx_runtime.jsx)("div",{className:"pointer-events-none absolute -top-5 start-0 z-30 rounded bg-black/75 px-1 font-mono text-xs text-white shadow dark:bg-white/75 dark:text-black",children:containerRef.current?`${Math.round(containerRef.current.offsetWidth)}×${Math.round(containerRef.current.offsetHeight)}`:""}),rotating&&(0,jsx_runtime.jsxs)("div",{className:"pointer-events-none absolute -top-8 start-1/2 z-30 -translate-x-1/2 rounded bg-black/75 px-1 font-mono text-xs text-white shadow dark:bg-white/75 dark:text-black",children:[Math.round(rotateAngle),"°"]}),editing?(0,jsx_runtime.jsxs)("div",{role:"presentation",onBlur:onFinishEditing,onPointerDown:e=>e.stopPropagation(),children:[(0,jsx_runtime.jsx)(page_builder_MenuBar,{editor}),(0,jsx_runtime.jsx)(dist.$Z,{editor,className:"min-h-4 outline-none",onKeyDown:e=>{if("Enter"===e.key&&(e.preventDefault(),onFinishEditing()),(e.metaKey||e.ctrlKey)&&("u"===e.key||"U"===e.key)){e.preventDefault();try{var _editor_chain_focus_toggleUnderline,_editor_chain_focus;null==editor||null===(_editor_chain_focus_toggleUnderline=(_editor_chain_focus=editor.chain().focus()).toggleUnderline)||void 0===_editor_chain_focus_toggleUnderline||_editor_chain_focus_toggleUnderline.call(_editor_chain_focus).run()}catch(e){}}}}),toolbarPos.visible&&(0,jsx_runtime.jsxs)("div",{className:"pointer-events-auto absolute z-40 flex -translate-x-1/2 gap-1 rounded border bg-background p-1 shadow",style:{left:toolbarPos.x,top:toolbarPos.y},children:[(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded px-1 text-xs hover:bg-muted",onClick:()=>null==editor?void 0:editor.chain().focus().toggleBold().run(),"aria-label":"Bold",children:"B"}),(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded px-1 text-xs hover:bg-muted",onClick:()=>null==editor?void 0:editor.chain().focus().toggleItalic().run(),"aria-label":"Italic",children:"I"}),(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded px-1 text-xs hover:bg-muted",onClick:()=>{var _editor_chain_focus_toggleUnderline,_editor_chain_focus;return null==editor||null===(_editor_chain_focus_toggleUnderline=(_editor_chain_focus=editor.chain().focus()).toggleUnderline)||void 0===_editor_chain_focus_toggleUnderline?void 0:_editor_chain_focus_toggleUnderline.call(_editor_chain_focus).run()},"aria-label":"Underline",children:"U"}),(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded px-1 text-xs hover:bg-muted",onClick:()=>setLinkOpen(!0),"aria-label":"Link",children:"Link"}),(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded px-1 text-xs hover:bg-muted",onClick:()=>null==editor?void 0:editor.chain().focus().toggleBulletList().run(),"aria-label":"Bulleted",children:"•"}),(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded px-1 text-xs hover:bg-muted",onClick:()=>null==editor?void 0:editor.chain().focus().toggleOrderedList().run(),"aria-label":"Numbered",children:"1."}),(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded px-1 text-xs hover:bg-muted",onClick:()=>null==editor?void 0:editor.chain().focus().toggleHeading({level:2}).run(),"aria-label":"H2",children:"H2"})]}),(0,jsx_runtime.jsx)(LinkPicker.A,{open:linkOpen,onClose:()=>setLinkOpen(!1),onPick:href=>{null==editor||editor.chain().focus().extendMarkRange("link").setLink({href}).run(),setLinkOpen(!1)}})]}):staticTransform?(0,jsx_runtime.jsx)("div",{style:{transform:staticTransform},children:(0,jsx_runtime.jsx)("div",{role:"button",tabIndex:0,onClick:e=>{e.stopPropagation(),onStartEditing()},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),onStartEditing())},dangerouslySetInnerHTML:{__html:sanitized}})}):(0,jsx_runtime.jsx)("div",{role:"button",tabIndex:0,onClick:e=>{e.stopPropagation(),onStartEditing()},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),onStartEditing())},dangerouslySetInnerHTML:{__html:sanitized}}),selected&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[startRotate&&(0,jsx_runtime.jsxs)("div",{className:"absolute -top-5 start-1/2 -translate-x-1/2 group pointer-events-auto",children:[(0,jsx_runtime.jsx)("div",{onPointerDown:e=>!locked&&startRotate(e),title:"Rotate (Shift = precise)",className:"h-3 w-3 cursor-crosshair rounded-full bg-primary"}),(0,jsx_runtime.jsx)("div",{className:"pointer-events-none absolute -top-7 start-1/2 -translate-x-1/2 rounded bg-black/60 px-1 text-xs text-white opacity-0 shadow transition-opacity duration-200 delay-200 group-hover:opacity-100 group-hover:delay-0 dark:bg-white/70 dark:text-black",children:"Shift = precise"})]}),(0,jsx_runtime.jsx)("div",{onPointerDown:e=>!locked&&startResize(e,"nw"),className:"absolute -top-1 -start-1 h-2 w-2 cursor-nwse-resize bg-primary"}),(0,jsx_runtime.jsx)("div",{onPointerDown:e=>!locked&&startResize(e,"ne"),className:"absolute -top-1 -end-1 h-2 w-2 cursor-nesw-resize bg-primary"}),(0,jsx_runtime.jsx)("div",{onPointerDown:e=>!locked&&startResize(e,"sw"),className:"absolute -bottom-1 -start-1 h-2 w-2 cursor-nesw-resize bg-primary"}),(0,jsx_runtime.jsx)("div",{onPointerDown:e=>!locked&&startResize(e,"se"),className:"absolute -end-1 -bottom-1 h-2 w-2 cursor-nwse-resize bg-primary"}),(0,jsx_runtime.jsx)("div",{onPointerDown:e=>!locked&&startResize(e,"n"),className:"absolute -top-1 start-1/2 h-2 w-3 -translate-x-1/2 cursor-ns-resize bg-primary"}),(0,jsx_runtime.jsx)("div",{onPointerDown:e=>!locked&&startResize(e,"s"),className:"absolute -bottom-1 start-1/2 h-2 w-3 -translate-x-1/2 cursor-ns-resize bg-primary"}),(0,jsx_runtime.jsx)("div",{onPointerDown:e=>!locked&&startResize(e,"w"),className:"absolute top-1/2 -start-1 h-3 w-2 -translate-y-1/2 cursor-ew-resize bg-primary"}),(0,jsx_runtime.jsx)("div",{onPointerDown:e=>!locked&&startResize(e,"e"),className:"absolute top-1/2 -end-1 h-3 w-2 -translate-y-1/2 cursor-ew-resize bg-primary"})]}),(0,jsx_runtime.jsx)("button",{type:"button",onClick:onRemove,className:"absolute top-1 end-1 rounded bg-danger px-2 text-xs","data-token":"--color-danger",children:(0,jsx_runtime.jsx)("span",{className:"text-danger-foreground","data-token":"--color-danger-fg",children:"×"})})]})},page_builder_TextBlockView=TextBlockView;TextBlockView.__docgenInfo={description:"",methods:[],displayName:"TextBlockView",props:{selected:{required:!0,tsType:{name:"boolean"},description:""},attributes:{required:!0,tsType:{name:"DraggableAttributes"},description:""},listeners:{required:!1,tsType:{name:"SyntheticListenerMap"},description:""},setNodeRef:{required:!0,tsType:{name:"signature",type:"function",raw:"(node: HTMLDivElement | null) => void",signature:{arguments:[{type:{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}]},name:"node"}],return:{name:"void"}}},description:""},containerRef:{required:!0,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLDivElement | null>",elements:[{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}]}]},description:""},isDragging:{required:!0,tsType:{name:"boolean"},description:""},style:{required:!0,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:""},guides:{required:!0,tsType:{name:"Guides"},description:""},snapping:{required:!0,tsType:{name:"boolean"},description:""},kbResizing:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},editor:{required:!0,tsType:{name:"union",raw:"Editor | null",elements:[{name:"Editor"},{name:"null"}]},description:""},editing:{required:!0,tsType:{name:"boolean"},description:""},onStartEditing:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onFinishEditing:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},startDrag:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: React.PointerEvent) => void",signature:{arguments:[{type:{name:"ReactPointerEvent",raw:"React.PointerEvent"},name:"e"}],return:{name:"void"}}},description:""},startResize:{required:!0,tsType:{name:"signature",type:"function",raw:'(e: React.PointerEvent, handle?: "se" | "ne" | "sw" | "nw" | "e" | "w" | "n" | "s") => void',signature:{arguments:[{type:{name:"ReactPointerEvent",raw:"React.PointerEvent"},name:"e"},{type:{name:"union",raw:'"se" | "ne" | "sw" | "nw" | "e" | "w" | "n" | "s"',elements:[{name:"literal",value:'"se"'},{name:"literal",value:'"ne"'},{name:"literal",value:'"sw"'},{name:"literal",value:'"nw"'},{name:"literal",value:'"e"'},{name:"literal",value:'"w"'},{name:"literal",value:'"n"'},{name:"literal",value:'"s"'}]},name:"handle"}],return:{name:"void"}}},description:""},startRotate:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: React.PointerEvent) => void",signature:{arguments:[{type:{name:"ReactPointerEvent",raw:"React.PointerEvent"},name:"e"}],return:{name:"void"}}},description:""},onKeyDown:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: React.KeyboardEvent<HTMLDivElement>) => void",signature:{arguments:[{type:{name:"ReactKeyboardEvent",raw:"React.KeyboardEvent<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},name:"e"}],return:{name:"void"}}},description:""},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onRemove:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},content:{required:!0,tsType:{name:"string"},description:""},zIndex:{required:!1,tsType:{name:"number"},description:""},locked:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},spacingOverlay:{required:!1,tsType:{name:"union",raw:'{ type: "margin" | "padding"; side: "top" | "right" | "bottom" | "left"; top: number; left: number; width: number; height: number } | null',elements:[{name:"signature",type:"object",raw:'{ type: "margin" | "padding"; side: "top" | "right" | "bottom" | "left"; top: number; left: number; width: number; height: number }',signature:{properties:[{key:"type",value:{name:"union",raw:'"margin" | "padding"',elements:[{name:"literal",value:'"margin"'},{name:"literal",value:'"padding"'}],required:!0}},{key:"side",value:{name:"union",raw:'"top" | "right" | "bottom" | "left"',elements:[{name:"literal",value:'"top"'},{name:"literal",value:'"right"'},{name:"literal",value:'"bottom"'},{name:"literal",value:'"left"'}],required:!0}},{key:"top",value:{name:"number",required:!0}},{key:"left",value:{name:"number",required:!0}},{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]}},{name:"null"}]},description:""},rotating:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},rotateAngle:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},staticTransform:{required:!1,tsType:{name:"string"},description:""}}};var cssVars=__webpack_require__("../../packages/ui/src/utils/style/cssVars.ts");function setRotate(styles,angleDeg){let obj={};try{obj=styles?JSON.parse(String(styles)):{}}catch(e){obj={}}var _obj_effects;const effects=null!==(_obj_effects=obj.effects)&&void 0!==_obj_effects?_obj_effects:{};return effects.transformRotate=`${Math.round(angleDeg)}deg`,obj.effects=effects,JSON.stringify(obj)}function useCanvasRotate({componentId,styles,dispatch,containerRef,zoom=1}){const startRef=(0,react.useRef)(null),[rotating,setRotating]=(0,react.useState)(!1),[angle,setAngle]=(0,react.useState)(0),captureRef=(0,react.useRef)({el:null,id:null});(0,react.useEffect)(()=>{if(!rotating)return;const onMove=e=>{if(!startRef.current)return;const{cx,cy,startPointerAngle,startValueAngle}=startRef.current,dx=(e.clientX-cx)/Math.max(zoom,1e-4),dy=(e.clientY-cy)/Math.max(zoom,1e-4);let next=180*Math.atan2(dy,dx)/Math.PI-startPointerAngle+startValueAngle;for(;next>180;)next-=360;for(;next<-180;)next+=360;const snapped=!e.shiftKey?15*Math.round(next/15):next;setAngle(snapped),dispatch({type:"update",id:componentId,patch:{styles:setRotate(styles,snapped)}})},onUp=()=>{setRotating(!1);try{var _captureRef_current,_captureRef_current1,_captureRef_current_el_releasePointerCapture,_captureRef_current_el;if((null===(_captureRef_current=captureRef.current)||void 0===_captureRef_current?void 0:_captureRef_current.el)&&null!=(null===(_captureRef_current1=captureRef.current)||void 0===_captureRef_current1?void 0:_captureRef_current1.id))null===(_captureRef_current_el_releasePointerCapture=(_captureRef_current_el=captureRef.current.el).releasePointerCapture)||void 0===_captureRef_current_el_releasePointerCapture||_captureRef_current_el_releasePointerCapture.call(_captureRef_current_el,captureRef.current.id)}catch(e){}captureRef.current={el:null,id:null},startRef.current=null},onKey=ke=>{"Escape"===ke.key&&onUp()};try{window.addEventListener("pointermove",onMove,{passive:!0})}catch(e){window.addEventListener("pointermove",onMove)}return window.addEventListener("pointerup",onUp,{once:!0}),window.addEventListener("blur",onUp,{once:!0}),window.addEventListener("keydown",onKey),()=>{try{window.removeEventListener("pointermove",onMove)}catch(e){}try{window.removeEventListener("pointerup",onUp)}catch(e){}try{window.removeEventListener("blur",onUp)}catch(e){}window.removeEventListener("keydown",onKey)}},[rotating,componentId,dispatch,styles,zoom]);return{startRotate:e=>{e.stopPropagation();const el=containerRef.current;if(!el)return;const rect=el.getBoundingClientRect(),cx=rect.left+rect.width/2,cy=rect.top+rect.height/2,dx=(e.clientX-cx)/Math.max(zoom,1e-4),dy=(e.clientY-cy)/Math.max(zoom,1e-4),startPointerAngle=180*Math.atan2(dy,dx)/Math.PI,startValueAngle=function parseRotate(styles){if(!styles)return 0;try{var _obj_effects;const obj=JSON.parse(String(styles)),val=null==obj||null===(_obj_effects=obj.effects)||void 0===_obj_effects?void 0:_obj_effects.transformRotate;if(!val)return 0;const s=String(val).trim();if(s.endsWith("deg"))return parseFloat(s.slice(0,-3))||0;const n=parseFloat(s);return Number.isFinite(n)?n:0}catch(e){return 0}}(styles);startRef.current={cx,cy,startPointerAngle,startValueAngle};try{var _e_target_setPointerCapture,_e_target;null===(_e_target=e.target)||void 0===_e_target||null===(_e_target_setPointerCapture=_e_target.setPointerCapture)||void 0===_e_target_setPointerCapture||_e_target_setPointerCapture.call(_e_target,e.pointerId),captureRef.current={el:e.target,id:e.pointerId}}catch(e){}setAngle(startValueAngle),setRotating(!0)},rotating,angle}}const TextBlock=(0,react.memo)(function TextBlock({component,index,parentId,selectedIds,onSelect,onRemove,dispatch,locale,gridEnabled=!1,gridCols,viewport,editor,zoom=1,preferParentOnClick=!1}){var _component_text;const selected=selectedIds.includes(component.id);var _editor_component_id;const flags=null!==(_editor_component_id=null==editor?void 0:editor[component.id])&&void 0!==_editor_component_id?_editor_component_id:{};var _flags_locked,_ref;const effLocked=null!==(_ref=null!==(_flags_locked=flags.locked)&&void 0!==_flags_locked?_flags_locked:component.locked)&&void 0!==_ref&&_ref;var _flags_zIndex;const effZIndex=null!==(_flags_zIndex=flags.zIndex)&&void 0!==_flags_zIndex?_flags_zIndex:component.zIndex,{attributes,listeners,setNodeRef,transform,isDragging}=(0,useSortableBlock.A)(component.id,index,parentId),containerRef=(0,react.useRef)(null),{widthKey,heightKey,widthVal,heightVal,marginKey,paddingKey,marginVal,paddingVal}=(0,useBlockDimensions.A)({component,viewport}),{editor:textEditor,editing,startEditing,finishEditing}=(0,useLocalizedTextEditor.A)(component,locale),{startResize,startDrag,guides,snapping,nudgeByKeyboard,kbResizing}=(0,useBlockTransform.A)(component.id,{widthKey,heightKey,widthVal,heightVal,dispatch,gridEnabled,gridCols,containerRef,disabled:editing||!!effLocked,zoom}),{nudgeSpacingByKeyboard,overlay:spacingOverlay}=useCanvasSpacing({componentId:component.id,marginKey,paddingKey,marginVal,paddingVal,dispatch,containerRef}),{startRotate,rotating,angle}=useCanvasRotate({componentId:component.id,styles:component.styles,dispatch,containerRef,zoom}),handleFinishEditing=(0,react.useCallback)(()=>{const patch=finishEditing();patch&&dispatch({type:"update",id:component.id,patch})},[finishEditing,dispatch,component.id]),style={transform:utilities_esm.Ks.Transform.toString(transform),...widthVal?{width:widthVal}:{},...heightVal?{height:heightVal}:{},...marginVal?{margin:marginVal}:{},...paddingVal?{padding:paddingVal}:{},...component.position?{position:component.position}:{},...component.top?{top:component.top}:{},...component.left?{left:component.left}:{}};let styleVars={};try{const raw=component.styles,overrides=raw?JSON.parse(String(raw)):void 0;styleVars=(0,cssVars.O)(overrides)}catch(e){}const staticTransform=styleVars["--pb-static-transform"];var _component_text_locale;const content=purify_es.A.sanitize("string"==typeof component.text?component.text:null!==(_component_text_locale=null===(_component_text=component.text)||void 0===_component_text?void 0:_component_text[locale])&&void 0!==_component_text_locale?_component_text_locale:"");return(0,jsx_runtime.jsxs)("div",{className:"relative","data-component-id":component.id,children:[(0,jsx_runtime.jsx)("div",{className:"absolute top-1 end-10",children:(0,jsx_runtime.jsxs)(shadcn.rI,{children:[(0,jsx_runtime.jsx)(shadcn.ty,{asChild:!0,children:(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",className:"h-6 px-2 py-1 text-xs",children:"⋯"})}),(0,jsx_runtime.jsxs)(shadcn.SQ,{align:"end",className:"w-40",children:[(0,jsx_runtime.jsx)(shadcn._2,{onClick:e=>{e.stopPropagation(),dispatch({type:"update-editor",id:component.id,patch:{zIndex:999}})},children:"Bring to front"}),(0,jsx_runtime.jsx)(shadcn._2,{onClick:e=>{e.stopPropagation(),dispatch({type:"update-editor",id:component.id,patch:{zIndex:0}})},children:"Send to back"}),(0,jsx_runtime.jsx)(shadcn._2,{onClick:e=>{var _flags_zIndex;e.stopPropagation();const z=null!==(_flags_zIndex=flags.zIndex)&&void 0!==_flags_zIndex?_flags_zIndex:0;dispatch({type:"update-editor",id:component.id,patch:{zIndex:z+1}})},children:"Forward"}),(0,jsx_runtime.jsx)(shadcn._2,{onClick:e=>{var _flags_zIndex;e.stopPropagation();const z=null!==(_flags_zIndex=flags.zIndex)&&void 0!==_flags_zIndex?_flags_zIndex:0;dispatch({type:"update-editor",id:component.id,patch:{zIndex:Math.max(0,z-1)}})},children:"Backward"})]})]})}),(0,jsx_runtime.jsx)(page_builder_TextBlockView,{selected,attributes,listeners:effLocked?void 0:listeners,setNodeRef,containerRef,isDragging,style:{...style,...styleVars},guides,snapping,kbResizing,editor:textEditor,editing,onStartEditing:()=>{onSelect(component.id),startEditing()},onFinishEditing:handleFinishEditing,startDrag,startResize,startRotate,spacingOverlay,staticTransform,rotating,rotateAngle:angle,onKeyDown:e=>{if(effLocked||editing)return;const key=e.key.toLowerCase();if("arrowleft"===key||"arrowright"===key||"arrowup"===key||"arrowdown"===key){if(e.ctrlKey||e.metaKey){e.preventDefault(),e.stopPropagation();const el=containerRef.current;var _el_parentElement;const parent=null!==(_el_parentElement=null==el?void 0:el.parentElement)&&void 0!==_el_parentElement?_el_parentElement:null,unit=gridEnabled&&parent?parent.offsetWidth/gridCols:void 0,step=null!=unit?unit:e.altKey?10:1,type=e.altKey?"padding":"margin";return void nudgeSpacingByKeyboard(type,"arrowleft"===key?"left":"arrowright"===key?"right":"arrowup"===key?"top":"bottom","arrowleft"===key||"arrowup"===key?-step:step)}if(e.shiftKey){e.preventDefault(),e.stopPropagation();const el=containerRef.current;var _el_parentElement1;const parent=null!==(_el_parentElement1=null==el?void 0:el.parentElement)&&void 0!==_el_parentElement1?_el_parentElement1:null,unit=gridEnabled&&parent?parent.offsetWidth/gridCols:void 0,step=null!=unit?unit:e.altKey?10:1;nudgeByKeyboard("arrowleft"===key?"left":"arrowright"===key?"right":"arrowup"===key?"up":"down",step)}}},onSelect:()=>onSelect(preferParentOnClick&&parentId?parentId:component.id),onRemove,content,zIndex:effZIndex,locked:!!effLocked})]})}),page_builder_TextBlock=TextBlock;TextBlock.__docgenInfo={description:"",methods:[],displayName:"TextBlock",props:{component:{required:!0,tsType:{name:"intersection",raw:"BaseTextComponent & {\n  text?: string | Record<string, string>;\n  styles?: string;\n  [key: string]: unknown;\n}",elements:[{name:"BaseTextComponent"},{name:"signature",type:"object",raw:"{\n  text?: string | Record<string, string>;\n  styles?: string;\n  [key: string]: unknown;\n}",signature:{properties:[{key:"text",value:{name:"union",raw:"string | Record<string, string>",elements:[{name:"string"},{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"}],required:!1}},{key:"styles",value:{name:"string",required:!1}},{key:{name:"string"},value:{name:"unknown",required:!0}}]}}]},description:""},index:{required:!0,tsType:{name:"number"},description:""},parentId:{required:!0,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, e?: React.MouseEvent) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"e"}],return:{name:"void"}}},description:""},onRemove:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},dispatch:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<Action>",elements:[{name:"union",raw:"| ChangeAction\n| UndoAction\n| RedoAction\n| SetGridColsAction\n| SetBreakpointsAction\n| UpdateEditorAction",elements:[{name:"union",raw:"| AddAction\n| MoveAction\n| RemoveAction\n| DuplicateAction\n| UpdateAction\n| ResizeAction\n| SetAction",elements:[{name:"signature",type:"object",raw:'{\n  type: "add";\n  component: PageComponent;\n  parentId?: string;\n  index?: number;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"add"',required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!1}}]}},{name:"signature",type:"object",raw:'{\n  type: "move";\n  from: { parentId?: string; index: number };\n  to: { parentId?: string; index: number };\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"move"',required:!0}},{key:"from",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}},{key:"to",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "remove"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"remove"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "duplicate"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"duplicate"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update";\n  id: string;\n  patch: Partial<PageComponent>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"Partial<PageComponent>",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "resize";\n  id: string;\n  width?: string;\n  height?: string;\n  left?: string;\n  top?: string;\n  right?: string;\n  bottom?: string;\n  leftDesktop?: string;\n  leftTablet?: string;\n  leftMobile?: string;\n  topDesktop?: string;\n  topTablet?: string;\n  topMobile?: string;\n  widthDesktop?: string;\n  widthTablet?: string;\n  widthMobile?: string;\n  heightDesktop?: string;\n  heightTablet?: string;\n  heightMobile?: string;\n  marginDesktop?: string;\n  marginTablet?: string;\n  marginMobile?: string;\n  paddingDesktop?: string;\n  paddingTablet?: string;\n  paddingMobile?: string;\n  [key: string]: string | undefined;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"resize"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!1}},{key:"height",value:{name:"string",required:!1}},{key:"left",value:{name:"string",required:!1}},{key:"top",value:{name:"string",required:!1}},{key:"right",value:{name:"string",required:!1}},{key:"bottom",value:{name:"string",required:!1}},{key:"leftDesktop",value:{name:"string",required:!1}},{key:"leftTablet",value:{name:"string",required:!1}},{key:"leftMobile",value:{name:"string",required:!1}},{key:"topDesktop",value:{name:"string",required:!1}},{key:"topTablet",value:{name:"string",required:!1}},{key:"topMobile",value:{name:"string",required:!1}},{key:"widthDesktop",value:{name:"string",required:!1}},{key:"widthTablet",value:{name:"string",required:!1}},{key:"widthMobile",value:{name:"string",required:!1}},{key:"heightDesktop",value:{name:"string",required:!1}},{key:"heightTablet",value:{name:"string",required:!1}},{key:"heightMobile",value:{name:"string",required:!1}},{key:"marginDesktop",value:{name:"string",required:!1}},{key:"marginTablet",value:{name:"string",required:!1}},{key:"marginMobile",value:{name:"string",required:!1}},{key:"paddingDesktop",value:{name:"string",required:!1}},{key:"paddingTablet",value:{name:"string",required:!1}},{key:"paddingMobile",value:{name:"string",required:!1}},{key:{name:"string"},value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set"; components: PageComponent[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set"',required:!0}},{key:"components",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"PageComponent[]",required:!0}}]}}]},{name:"signature",type:"object",raw:'{ type: "undo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"undo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "redo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"redo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-grid-cols"; gridCols: number }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-grid-cols"',required:!0}},{key:"gridCols",value:{name:"number",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-breakpoints"; breakpoints: { id: string; label: string; min?: number; max?: number }[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-breakpoints"',required:!0}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update-editor";\n  id: string;\n  patch: Partial<EditorFlags>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update-editor"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  hiddenDeviceIds?: string[];\n  /** Legacy single strategy (mobile); kept for backwards-compat */\n  stackStrategy?: "default" | "reverse" | "custom";\n  /** Per-device stacking strategies */\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  /** Custom orders per device (used when corresponding strategy === "custom") */\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n  global?: {\n    id: string;\n    overrides?: unknown;\n    pinned?: boolean;\n    editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n  };\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"hiddenDeviceIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Legacy single strategy (mobile); kept for backwards-compat"},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Per-device stacking strategies"},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1},description:'Custom orders per device (used when corresponding strategy === "custom")'},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}},{key:"global",value:{name:"signature",type:"object",raw:'{\n  id: string;\n  overrides?: unknown;\n  pinned?: boolean;\n  editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"overrides",value:{name:"unknown",required:!1}},{key:"pinned",value:{name:"boolean",required:!1}},{key:"editingSize",value:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]}],raw:'Record<"desktop" | "tablet" | "mobile", number | null>'}],raw:'Partial<Record<"desktop" | "tablet" | "mobile", number | null>>',required:!1}}]},required:!1}}]}}],raw:"Partial<EditorFlags>",required:!0}}]}}]}]},description:""},locale:{required:!0,tsType:{name:"Locale"},description:""},gridEnabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},gridCols:{required:!0,tsType:{name:"number"},description:""},viewport:{required:!0,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:""},editor:{required:!1,tsType:{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},description:""},zoom:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},preferParentOnClick:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};var src=__webpack_require__("../../packages/i18n/src/index.ts"),isHiddenForViewport=__webpack_require__("../../packages/ui/src/components/cms/page-builder/state/layout/utils/isHiddenForViewport.ts");function useBlockItemInlineEditing(component){const isInlineEditableButton="Button"===component.type,inlineAll=function useInlineText(component,key){var _component_key;const initial=null!==(_component_key=null==component?void 0:component[key])&&void 0!==_component_key?_component_key:"",[editing,setEditing]=(0,react.useState)(!1),[value,setValue]=(0,react.useState)(initial),ref=(0,react.useRef)(null),startEditing=(0,react.useCallback)(()=>{setEditing(!0),requestAnimationFrame(()=>{const el=ref.current;if(el){const range=document.createRange(),sel=window.getSelection();range.selectNodeContents(el),range.collapse(!1),null==sel||sel.removeAllRanges(),null==sel||sel.addRange(range),el.focus()}})},[]),finishEditing=(0,react.useCallback)(()=>{setEditing(!1);const el=ref.current;var _el_textContent,_ref;const current=null!==(_ref=null!==(_el_textContent=null==el?void 0:el.textContent)&&void 0!==_el_textContent?_el_textContent:value)&&void 0!==_ref?_ref:"";return setValue(current),{[key]:current}},[key,value]);return{editing,value,startEditing,finishEditing,bind:{ref:node=>{ref.current=node},contentEditable:!0,suppressContentEditableWarning:!0,onInput:e=>{const el=e.target;var _el_textContent;setValue(null!==(_el_textContent=el.textContent)&&void 0!==_el_textContent?_el_textContent:"")},onBlur:()=>{setEditing(!1)}}}}(component,"label");return{isInlineEditableButton,inline:isInlineEditableButton?inlineAll:null}}var useBlockDnD=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useBlockDnD.ts"),useCanvasResize=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useCanvasResize.ts"),useCanvasDrag=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useCanvasDrag.ts");function useBlockItemStyles({component,parentId,flags,effZIndex,transform,dimensions}){return(0,react.useMemo)(()=>{const baseStyle=function computeBlockStyle({transform,zIndex,containerType,containerName,widthVal,heightVal,marginVal,paddingVal,position,leftVal,topVal,dockX,dockY,responsiveBehavior}){const style={transform:utilities_esm.Ks.Transform.toString(transform)};void 0!==zIndex&&(style.zIndex=zIndex),"size"!==containerType&&"inline-size"!==containerType||(style.containerType=containerType),containerName&&(style.containerName=containerName),widthVal&&(style.width=widthVal),heightVal&&(style.height=heightVal),marginVal&&(style.margin=marginVal),paddingVal&&(style.padding=paddingVal),"absolute"!==position&&"relative"!==position&&"fixed"!==position&&"sticky"!==position&&"static"!==position||(style.position=position);const pos={};if("absolute"===position?("right"===dockX||("center"===dockX?(pos.left=0,pos.right=0,pos.marginLeft="auto",pos.marginRight="auto"):leftVal&&(pos.left=leftVal)),"bottom"===dockY||("center"===dockY?(pos.top=0,pos.bottom=0,pos.marginTop="auto",pos.marginBottom="auto"):topVal&&(pos.top=topVal))):(topVal&&(pos.top=topVal),leftVal&&(pos.left=leftVal)),("scale-proportional"===responsiveBehavior||void 0===responsiveBehavior)&&"absolute"!==position&&"scale-proportional"===responsiveBehavior){const toNum=v=>{if(void 0===v)return;if("number"==typeof v)return Number.isFinite(v)?v:void 0;const s=String(v).trim(),raw=s.endsWith("px")?s.slice(0,-2).trim():s;if(!raw)return;let sawDot=!1;for(let i=0;i<raw.length;i++){const ch=raw[i];if("."!==ch){if(ch<"0"||ch>"9")return}else{if(sawDot)return;sawDot=!0}}const n=Number(raw);return Number.isFinite(n)?n:void 0},w=toNum(widthVal),h=toNum(heightVal);w&&h&&(style.aspectRatio=`${w} / ${h}`,style.width="100%",delete style.height)}return{...style,...pos}}({transform,zIndex:effZIndex,containerType:component.containerType,containerName:component.containerName,widthVal:dimensions.widthVal,heightVal:dimensions.heightVal,marginVal:dimensions.marginVal,paddingVal:dimensions.paddingVal,position:component.position,leftVal:dimensions.leftVal,topVal:dimensions.topVal,dockX:component.dockX,dockY:component.dockY,responsiveBehavior:flags.responsiveBehavior});return{...baseStyle,...getPinnedStyle(parentId,flags),...getCursorStyle(component)}},[component,dimensions.heightVal,dimensions.leftVal,dimensions.marginVal,dimensions.paddingVal,dimensions.topVal,dimensions.widthVal,effZIndex,flags,parentId,transform])}function getPinnedStyle(parentId,flags){const isTopLevel=!parentId,pinned=!!(null==flags?void 0:flags.pinned);return isTopLevel&&pinned?{position:"sticky",top:0,zIndex:30}:{}}function getCursorStyle(component){const cur=component.cursor,url=component.cursorUrl;return cur&&"default"!==cur?"custom"===cur&&url?{cursor:`url(${url}), auto`}:{cursor:cur}:{}}var styleClipboard=__webpack_require__("../../packages/ui/src/components/cms/page-builder/style/styleClipboard.ts");function useBlockItemContextMenu({component,effLocked,flags,selectedIds,editor,dispatch,onRemove}){const[ctxOpen,setCtxOpen]=(0,react.useState)(!1),[ctxPos,setCtxPos]=(0,react.useState)({x:0,y:0}),t=(0,src.c3)(),ctxItems=(0,react.useMemo)(()=>function buildBlockContextMenuItems({componentId,componentStyles,effLocked,flagsZIndex,selectedIds,editor,dispatch,onRemove,t}){const locked=!!effLocked,z=flagsZIndex,canPasteStyle=null!=(0,styleClipboard.at)()&&!locked,selectionSet=new Set((selectedIds||[]).length>0?selectedIds:[componentId]);selectionSet.has(componentId)||selectionSet.add(componentId);const selection=Array.from(selectionSet),isLocked=id=>{var _editor_id;return Boolean(null==editor||null===(_editor_id=editor[id])||void 0===_editor_id?void 0:_editor_id.locked)},unlocked=selection.filter(id=>!isLocked(id)),lockedSel=selection.filter(id=>isLocked(id)),pasteTargets=unlocked,multiCount=selection.length,items=[{label:String(t?t("pb.menu.duplicate"):"pb.menu.duplicate"),onClick:()=>dispatch({type:"duplicate",id:componentId}),disabled:locked},{label:String(t?t(locked?"pb.menu.unlock":"pb.menu.lock"):locked?"pb.menu.unlock":"pb.menu.lock"),onClick:()=>dispatch({type:"update-editor",id:componentId,patch:{locked:!locked}}),disabled:!1}];return multiCount>1?(items.push({type:"separator"}),items.push({label:String(t?t("pb.menu.groupIntoSection"):"pb.menu.groupIntoSection"),onClick:()=>{try{window.dispatchEvent(new CustomEvent("pb:group",{detail:{kind:"Section"}}))}catch(e){}}},{label:String(t?t("pb.menu.groupIntoColumns"):"pb.menu.groupIntoColumns"),onClick:()=>{try{window.dispatchEvent(new CustomEvent("pb:group",{detail:{kind:"MultiColumn"}}))}catch(e){}}})):1===multiCount&&(items.push({type:"separator"}),items.push({label:String(t?t("pb.menu.ungroup"):"pb.menu.ungroup"),onClick:()=>{try{window.dispatchEvent(new Event("pb:ungroup"))}catch(e){}}})),multiCount>1&&items.push({label:lockedSel.length>0?String(t?t("pb.menu.unlockSelectionN",{count:lockedSel.length}):"pb.menu.unlockSelectionN"):String(t?t("pb.menu.lockSelectionN",{count:unlocked.length}):"pb.menu.lockSelectionN"),onClick:()=>{if(lockedSel.length>0){lockedSel.forEach(id=>dispatch({type:"update-editor",id,patch:{locked:!1}}));try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:String(t?t("pb.toast.unlockedN",{count:lockedSel.length}):"pb.toast.unlockedN")}))}catch(e){}}else if(unlocked.length>0){unlocked.forEach(id=>dispatch({type:"update-editor",id,patch:{locked:!0}}));try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:String(t?t("pb.toast.lockedN",{count:unlocked.length}):"pb.toast.lockedN")}))}catch(e){}}},disabled:0===multiCount}),items.push({label:String(t?t("cms.delete"):"cms.delete"),onClick:()=>onRemove(),disabled:locked}),multiCount>1&&items.push({label:String(t?t("pb.menu.duplicateSelectionN",{count:unlocked.length}):"pb.menu.duplicateSelectionN"),onClick:()=>{unlocked.forEach(id=>dispatch({type:"duplicate",id}));try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:String(t?t("pb.toast.duplicatedN",{count:unlocked.length}):"pb.toast.duplicatedN")}))}catch(e){}},disabled:0===unlocked.length}),multiCount>1&&items.push({label:String(t?t("pb.menu.deleteSelectionN",{count:unlocked.length}):"pb.menu.deleteSelectionN"),onClick:()=>{unlocked.forEach(id=>dispatch({type:"remove",id}));try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:String(t?t("pb.toast.deletedN",{count:unlocked.length}):"pb.toast.deletedN")}))}catch(e){}},disabled:0===unlocked.length}),items.push({label:String(t?t("pb.menu.bringToFront"):"pb.menu.bringToFront"),onClick:()=>dispatch({type:"update-editor",id:componentId,patch:{zIndex:999}}),disabled:locked},{label:String(t?t("pb.menu.sendToBack"):"pb.menu.sendToBack"),onClick:()=>dispatch({type:"update-editor",id:componentId,patch:{zIndex:0}}),disabled:locked},{label:String(t?t("pb.menu.forward"):"pb.menu.forward"),onClick:()=>dispatch({type:"update-editor",id:componentId,patch:{zIndex:(null!=z?z:0)+1}}),disabled:locked},{label:String(t?t("pb.menu.backward"):"pb.menu.backward"),onClick:()=>dispatch({type:"update-editor",id:componentId,patch:{zIndex:Math.max(0,(null!=z?z:0)-1)}}),disabled:locked}),multiCount>1&&items.push({label:String(t?t("pb.menu.bringSelectionToFrontN",{count:unlocked.length}):"pb.menu.bringSelectionToFrontN"),onClick:()=>{unlocked.forEach(id=>dispatch({type:"update-editor",id,patch:{zIndex:999}}));try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:String(t?t("pb.toast.broughtToFrontN",{count:unlocked.length}):"pb.toast.broughtToFrontN")}))}catch(e){}},disabled:0===unlocked.length},{label:String(t?t("pb.menu.sendSelectionToBackN",{count:unlocked.length}):"pb.menu.sendSelectionToBackN"),onClick:()=>{unlocked.forEach(id=>dispatch({type:"update-editor",id,patch:{zIndex:0}}));try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:String(t?t("pb.toast.sentToBackN",{count:unlocked.length}):"pb.toast.sentToBackN")}))}catch(e){}},disabled:0===unlocked.length}),items.push({label:String(t?t("pb.menu.copyStyle"):"pb.menu.copyStyle"),onClick:()=>{let overrides={};try{overrides=componentStyles?JSON.parse(String(componentStyles)):{}}catch(e){overrides={}}(0,styleClipboard.wi)(overrides);try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:String(t?t("pb.toast.stylesCopied"):"pb.toast.stylesCopied")}))}catch(e){}},disabled:!1},{label:pasteTargets.length>1?String(t?t("pb.menu.pasteStyleN",{count:pasteTargets.length}):"pb.menu.pasteStyleN"):String(t?t("pb.menu.pasteStyle"):"pb.menu.pasteStyle"),onClick:()=>{const clip2=(0,styleClipboard.at)();if(clip2)try{pasteTargets.forEach(id=>{dispatch({type:"update",id,patch:{styles:JSON.stringify(clip2)}})});try{const detail=pasteTargets.length>1?String(t?t("pb.toast.stylesPastedToN",{count:pasteTargets.length}):"pb.toast.stylesPastedToN"):String(t?t("pb.toast.stylesPasted"):"pb.toast.stylesPasted");window.dispatchEvent(new CustomEvent("pb-live-message",{detail}))}catch(e){}}catch(e){}},disabled:!canPasteStyle}),items}({componentId:component.id,componentStyles:component.styles,effLocked,flagsZIndex:flags.zIndex,selectedIds,editor,dispatch,onRemove,t}),[component.id,component.styles,dispatch,editor,effLocked,flags,onRemove,selectedIds,t]);return{ctxItems,ctxOpen,ctxPos,openContextMenu:(0,react.useCallback)(event=>{event.preventDefault(),setCtxPos({x:event.clientX,y:event.clientY}),setCtxOpen(!0)},[]),closeContextMenu:(0,react.useCallback)(()=>setCtxOpen(!1),[])}}var Block=__webpack_require__("../../packages/ui/src/components/cms/page-builder/Block.tsx");function InlineEditableButton({component,locale,inline,onCommit}){const t=(0,src.c3)();var _component_label;const label=null!==(_component_label=component.label)&&void 0!==_component_label?_component_label:String(t("cms.builder.button.defaultLabel"));var _component_href;const href=null!==(_component_href=component.href)&&void 0!==_component_href?_component_href:"#";var _component_variant;const variant=null!==(_component_variant=component.variant)&&void 0!==_component_variant?_component_variant:"default";var _component_size;const size=null!==(_component_size=component.size)&&void 0!==_component_size?_component_size:"md";if(!inline)return null;const sizeClass="sm"===size?"px-2 py-1 text-sm":"lg"===size?"px-6 py-3 text-lg":"px-4 py-2";return(0,jsx_runtime.jsx)(shadcn.$n,{asChild:!0,variant,className:sizeClass,children:(0,jsx_runtime.jsx)("a",{href,onClick:e=>e.preventDefault(),children:(0,jsx_runtime.jsx)("span",{...inline.bind,role:"textbox",tabIndex:0,"aria-label":String(t("cms.builder.button.editLabelAria")),onClick:e=>{e.stopPropagation(),inline.editing||inline.startEditing()},onBlur:e=>{e.stopPropagation();const patch=inline.finishEditing();onCommit(patch)},onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();const patch=inline.finishEditing();onCommit(patch)}},children:inline.value||label})})})}function BlockContent({component,locale,isInlineEditableButton,inline,dispatch}){return isInlineEditableButton?(0,jsx_runtime.jsx)(InlineEditableButton,{component,locale,inline,onCommit:patch=>dispatch({type:"update",id:component.id,patch})}):(0,jsx_runtime.jsx)(Block.A,{component,locale})}InlineEditableButton.__docgenInfo={description:"",methods:[],displayName:"InlineEditableButton",props:{component:{required:!0,tsType:{name:"signature",type:"object",raw:'{ label?: string; href?: string; variant?: string; size?: "sm" | "md" | "lg" | string }',signature:{properties:[{key:"label",value:{name:"string",required:!1}},{key:"href",value:{name:"string",required:!1}},{key:"variant",value:{name:"string",required:!1}},{key:"size",value:{name:"union",raw:'"sm" | "md" | "lg" | string',elements:[{name:"literal",value:'"sm"'},{name:"literal",value:'"md"'},{name:"literal",value:'"lg"'},{name:"string"}],required:!1}}]}},description:""},locale:{required:!0,tsType:{name:"Locale"},description:""},inline:{required:!0,tsType:{name:"ReturnType",elements:[{name:"useInlineText"}],raw:"ReturnType<typeof useInlineText<T, K>>"},description:""},onCommit:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Record<string, unknown>) => void",signature:{arguments:[{type:{name:"Record",elements:[{name:"string"},{name:"unknown"}],raw:"Record<string, unknown>"},name:"patch"}],return:{name:"void"}}},description:""}}},BlockContent.__docgenInfo={description:"",methods:[],displayName:"BlockContent",props:{component:{required:!0,tsType:{name:"intersection",raw:'PageComponent & { pbViewport?: "desktop" | "tablet" | "mobile" }',elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},{name:"signature",type:"object",raw:'{ pbViewport?: "desktop" | "tablet" | "mobile" }',signature:{properties:[{key:"pbViewport",value:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}],required:!1}}]}}]},description:""},locale:{required:!0,tsType:{name:"Locale"},description:""},isInlineEditableButton:{required:!0,tsType:{name:"boolean"},description:""},inline:{required:!0,tsType:{name:"union",raw:'InlineTextApi<{ label?: string }, "label"> | null',elements:[{name:"ReturnType",elements:[{name:"useInlineText"}],raw:"ReturnType<typeof useInlineText<T, K>>"},{name:"null"}]},description:""},dispatch:{required:!0,tsType:{name:"ReactDispatch",raw:'React.Dispatch<import("./state").Action>',elements:[{name:"unknown"}]},description:""}}};const cornerHandles=[{handle:"nw",className:"pointer-events-auto absolute -top-2 -start-2 h-6 w-6 cursor-nwse-resize bg-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",ariaLabel:"Resize from top-left"},{handle:"ne",className:"pointer-events-auto absolute -top-2 -end-2 h-6 w-6 cursor-nesw-resize bg-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",ariaLabel:"Resize from top-right"},{handle:"sw",className:"pointer-events-auto absolute -bottom-2 -start-2 h-6 w-6 cursor-nesw-resize bg-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",ariaLabel:"Resize from bottom-left"},{handle:"se",className:"pointer-events-auto absolute -end-2 -bottom-2 h-6 w-6 cursor-nwse-resize bg-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",ariaLabel:"Resize from bottom-right"}],edgeHandles=[{handle:"n",className:"pointer-events-auto absolute -top-2 start-1/2 h-6 w-8 -translate-x-1/2 cursor-ns-resize bg-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",ariaLabel:"Resize from top"},{handle:"s",className:"pointer-events-auto absolute -bottom-2 start-1/2 h-6 w-8 -translate-x-1/2 cursor-ns-resize bg-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",ariaLabel:"Resize from bottom"},{handle:"w",className:"pointer-events-auto absolute top-1/2 -start-2 h-8 w-6 -translate-y-1/2 cursor-ew-resize bg-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",ariaLabel:"Resize from left"},{handle:"e",className:"pointer-events-auto absolute top-1/2 -end-2 h-8 w-6 -translate-y-1/2 cursor-ew-resize bg-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",ariaLabel:"Resize from right"}],spacingHandles=[{type:"margin",side:"top",className:"pointer-events-auto absolute -top-3 start-1/2 h-2 w-10 -translate-x-1/2 cursor-n-resize bg-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",ariaLabel:"Adjust margin top"},{type:"margin",side:"bottom",className:"pointer-events-auto absolute -bottom-3 start-1/2 h-2 w-10 -translate-x-1/2 cursor-s-resize bg-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",ariaLabel:"Adjust margin bottom"},{type:"margin",side:"left",className:"pointer-events-auto absolute top-1/2 -left-3 h-10 w-2 -translate-y-1/2 cursor-w-resize bg-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",ariaLabel:"Adjust margin left"},{type:"margin",side:"right",className:"pointer-events-auto absolute top-1/2 -right-3 h-10 w-2 -translate-y-1/2 cursor-e-resize bg-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",ariaLabel:"Adjust margin right"},{type:"padding",side:"top",className:"pointer-events-auto absolute -top-1 start-1/2 h-2 w-10 -translate-x-1/2 cursor-n-resize bg-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",ariaLabel:"Adjust padding top"},{type:"padding",side:"bottom",className:"pointer-events-auto absolute -bottom-1 start-1/2 h-2 w-10 -translate-x-1/2 cursor-s-resize bg-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",ariaLabel:"Adjust padding bottom"},{type:"padding",side:"left",className:"pointer-events-auto absolute top-1/2 -left-1 h-10 w-2 -translate-y-1/2 cursor-w-resize bg-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",ariaLabel:"Adjust padding left"},{type:"padding",side:"right",className:"pointer-events-auto absolute top-1/2 -end-1 h-10 w-2 -translate-y-1/2 cursor-e-resize bg-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",ariaLabel:"Adjust padding right"}],interactiveHandleProps={role:"button",tabIndex:0};function BlockResizer({selected,startResize,startSpacing,startRotate}){const t=(0,src.c3)();return selected?(0,jsx_runtime.jsxs)("div",{className:"relative",children:[startRotate&&(0,jsx_runtime.jsx)("div",{className:"absolute -top-7 start-1/2 -translate-x-1/2 pointer-events-auto",onPointerDown:event=>startRotate(event),title:String(t("Rotate (Shift = precise)")),"aria-label":"Rotate block",...interactiveHandleProps,children:(0,jsx_runtime.jsxs)("div",{className:"group relative",children:[(0,jsx_runtime.jsx)("div",{className:"h-6 w-6 cursor-crosshair rounded-full bg-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary"}),(0,jsx_runtime.jsx)("div",{className:"pointer-events-none absolute -top-7 start-1/2 -translate-x-1/2 rounded bg-black/60 px-1 text-xs text-white opacity-0 shadow transition-opacity duration-200 delay-200 group-hover:opacity-100 group-hover:delay-0 dark:bg-white/70 dark:text-black",children:t("Shift = precise")})]})}),cornerHandles.map(({handle,className,ariaLabel})=>(0,jsx_runtime.jsx)("div",{className,onPointerDown:event=>startResize(event,handle),"aria-label":ariaLabel,...interactiveHandleProps},handle)),edgeHandles.map(({handle,className,ariaLabel})=>(0,jsx_runtime.jsx)("div",{className,onPointerDown:event=>startResize(event,handle),"aria-label":ariaLabel,...interactiveHandleProps},handle)),spacingHandles.map(({type,side,className,ariaLabel})=>(0,jsx_runtime.jsx)("div",{className,onPointerDown:event=>startSpacing(event,type,side),"aria-label":ariaLabel,...interactiveHandleProps},`${type}-${side}`))]}):null}BlockResizer.__docgenInfo={description:"",methods:[],displayName:"BlockResizer",props:{selected:{required:!0,tsType:{name:"boolean"},description:""},startResize:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: PointerEvent, handle?: ResizeHandle) => void",signature:{arguments:[{type:{name:"PointerEvent"},name:"e"},{type:{name:"union",raw:'"se" | "ne" | "sw" | "nw" | "e" | "w" | "n" | "s"',elements:[{name:"literal",value:'"se"'},{name:"literal",value:'"ne"'},{name:"literal",value:'"sw"'},{name:"literal",value:'"nw"'},{name:"literal",value:'"e"'},{name:"literal",value:'"w"'},{name:"literal",value:'"n"'},{name:"literal",value:'"s"'}]},name:"handle"}],return:{name:"void"}}},description:""},startSpacing:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: PointerEvent, type: SpacingType, side: SpacingSide) => void",signature:{arguments:[{type:{name:"PointerEvent"},name:"e"},{type:{name:"union",raw:'"margin" | "padding"',elements:[{name:"literal",value:'"margin"'},{name:"literal",value:'"padding"'}]},name:"type"},{type:{name:"union",raw:'"top" | "bottom" | "left" | "right"',elements:[{name:"literal",value:'"top"'},{name:"literal",value:'"bottom"'},{name:"literal",value:'"left"'},{name:"literal",value:'"right"'}]},name:"side"}],return:{name:"void"}}},description:""},startRotate:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: PointerEvent) => void",signature:{arguments:[{type:{name:"PointerEvent"},name:"e"}],return:{name:"void"}}},description:""}}};var sortable_esm=__webpack_require__("../../node_modules/.pnpm/@dnd-kit+sortable@10.0.0_@dnd-kit+core@6.3.1_react-dom@19.2.0-canary-3fbfb9ba-20250409__571aab38212e666fc4f105bb05843619/node_modules/@dnd-kit/sortable/dist/sortable.esm.js"),GridOverlay=__webpack_require__("../../packages/ui/src/components/cms/page-builder/GridOverlay.tsx"),InlineInsert=__webpack_require__("../../packages/ui/src/components/cms/page-builder/InlineInsert.tsx");function GridChildControls({parent,child,dispatch,containerElRef,enabled}){const spanColHandleRef=(0,react.useRef)(null),spanRowHandleRef=(0,react.useRef)(null);if(!enabled)return null;const parentRecord=parent,childRecord=child,maxCols=Math.max(1,Number(parentRecord.columns)||12),rowsProp=Number(parentRecord.rows)||0,parseSpan=(val,limit)=>{const s=String(null!=val?val:"").trim(),m=/span\s+(\d+)/i.exec(s);return m?Math.max(1,Math.min(limit,parseInt(m[1],10))):1},currCol=parseSpan(childRecord.gridColumn,maxCols),currRow=parseSpan(childRecord.gridRow,Math.max(1,rowsProp||1)),setColSpan=n=>dispatch({type:"update",id:child.id,patch:{gridColumn:`span ${Math.max(1,Math.min(maxCols,n))}`}}),setRowSpan=n=>dispatch({type:"update",id:child.id,patch:{gridRow:`span ${Math.max(1,rowsProp?Math.min(Math.max(1,rowsProp),n):n)}`}});return(0,jsx_runtime.jsxs)("div",{className:"relative",children:[(0,jsx_runtime.jsxs)("div",{className:"absolute -top-3 start-0 flex gap-1",children:[(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded bg-black/60 px-2 text-xs text-white shadow dark:bg-white/70 dark:text-black min-h-10 min-w-10","aria-label":"Decrease column span",onClick:e=>{e.stopPropagation(),setColSpan(currCol-1)},children:"−"}),(0,jsx_runtime.jsxs)("span",{className:"rounded bg-black/40 px-1 text-xs text-white dark:bg-white/50 dark:text-black",children:[currCol," col"]}),(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded bg-black/60 px-2 text-xs text-white shadow dark:bg-white/70 dark:text-black min-h-10 min-w-10","aria-label":"Increase column span",onClick:e=>{e.stopPropagation(),setColSpan(currCol+1)},children:"＋"})]}),(0,jsx_runtime.jsxs)("div",{className:"absolute -bottom-3 start-0 flex gap-1",children:[(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded bg-black/60 px-2 text-xs text-white shadow dark:bg-white/70 dark:text-black min-h-10 min-w-10","aria-label":"Decrease row span",onClick:e=>{e.stopPropagation(),setRowSpan(currRow-1)},children:"−"}),(0,jsx_runtime.jsxs)("span",{className:"rounded bg-black/40 px-1 text-xs text-white dark:bg-white/50 dark:text-black",children:[currRow," row"]}),(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded bg-black/60 px-2 text-xs text-white shadow dark:bg-white/70 dark:text-black min-h-10 min-w-10","aria-label":"Increase row span",onClick:e=>{e.stopPropagation(),setRowSpan(currRow+1)},children:"＋"})]}),(0,jsx_runtime.jsx)("div",{ref:spanColHandleRef,className:"absolute top-0 bottom-0 end-0 w-1 cursor-col-resize bg-transparent",onPointerDown:e=>{e.preventDefault(),e.stopPropagation();const el=containerElRef.current,colWidth=el?el.clientWidth/maxCols:0,startX=e.clientX,initial=parseSpan(childRecord.gridColumn,maxCols),move=ev=>{const dx=ev.clientX-startX,delta=colWidth>0?Math.round(dx/Math.max(1,colWidth)):0,next=Math.max(1,Math.min(maxCols,initial+delta));dispatch({type:"update",id:child.id,patch:{gridColumn:`span ${next}`}})},up=()=>{window.removeEventListener("pointermove",move),window.removeEventListener("pointerup",up)};window.addEventListener("pointermove",move),window.addEventListener("pointerup",up,{once:!0})},title:"Drag to change column span","aria-label":"Resize grid column span"}),(0,jsx_runtime.jsx)("div",{ref:spanRowHandleRef,className:"absolute bottom-0 start-0 end-0 h-1 cursor-row-resize bg-transparent",onPointerDown:e=>{if(e.preventDefault(),e.stopPropagation(),!rowsProp)return;const el=containerElRef.current,rowCount=Math.max(1,rowsProp),rowHeight=el?el.clientHeight/rowCount:0,startY=e.clientY,initial=parseSpan(childRecord.gridRow,rowCount),move=ev=>{const dy=ev.clientY-startY,delta=rowHeight>0?Math.round(dy/Math.max(1,rowHeight)):0,next=Math.max(1,Math.min(rowCount,initial+delta));dispatch({type:"update",id:child.id,patch:{gridRow:`span ${next}`}})},up=()=>{window.removeEventListener("pointermove",move),window.removeEventListener("pointerup",up)};window.addEventListener("pointermove",move),window.addEventListener("pointerup",up,{once:!0})},title:"Drag to change row span","aria-label":"Resize grid row span"})]})}function DefaultChildrenList({component,visibleChildren,underlyingChildren:_underlyingChildren,selectedIds,onSelect,dispatch,locale,effGridEnabled,effGridCols,viewport,device,editor,baselineSnap,baselineStep,containerElRef,toUnderlyingIndex,compType,insertParentId,insertIndex,dropAllowed,preferParentOnClick=!1}){const t=(0,src.c3)(),isGrid="Grid"===compType;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[visibleChildren.map((child,i)=>(0,jsx_runtime.jsxs)("div",{className:"relative group",children:[insertParentId===component.id&&insertIndex===i&&(0,jsx_runtime.jsx)("div",{"data-placeholder":!0,className:(!1===dropAllowed?"border-danger bg-danger/10 ring-2 ring-danger":"border-primary bg-primary/10 ring-2 ring-primary")+" mb-1 h-4 w-full rounded border-2 border-dashed transition-all duration-150 motion-reduce:transition-none"}),isGrid&&(0,jsx_runtime.jsx)(GridChildControls,{enabled:!0,parent:component,child,dispatch,containerElRef}),(0,jsx_runtime.jsx)(InlineInsert.A,{index:i,context:"child",containerType:component.type,onInsert:(newComponent,index)=>{const insertAt=toUnderlyingIndex(index);dispatch({type:"add",component:newComponent,parentId:component.id,index:insertAt});try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:t("pb.blockInserted")}))}catch(e){}}}),(0,jsx_runtime.jsx)(page_builder_CanvasItem,{component:child,index:i,parentId:component.id,parentType:component.type,parentSlots:void 0,selectedIds,onSelect,onRemove:()=>dispatch({type:"remove",id:child.id}),dispatch,locale,gridEnabled:effGridEnabled,gridCols:effGridCols,viewport,device,editor,baselineSnap,baselineStep,insertParentId,insertIndex,dropAllowed,preferParentOnClick})]},child.id)),insertParentId===component.id&&insertIndex===visibleChildren.length&&(0,jsx_runtime.jsx)("div",{"data-placeholder":!0,className:(!1===dropAllowed?"border-danger bg-danger/10 ring-2 ring-danger":"border-primary bg-primary/10 ring-2 ring-primary")+" mt-1 h-4 w-full rounded border-2 border-dashed transition-all duration-150 motion-reduce:transition-none"}),(0,jsx_runtime.jsx)(InlineInsert.A,{index:visibleChildren.length,context:"child",containerType:component.type,onInsert:(newComponent,index)=>{const insertAt=toUnderlyingIndex(index);dispatch({type:"add",component:newComponent,parentId:component.id,index:insertAt});try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:t("pb.blockInserted")}))}catch(e){}}})]})}GridChildControls.__docgenInfo={description:"",methods:[],displayName:"GridChildControls",props:{parent:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},child:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},dispatch:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<Action>",elements:[{name:"union",raw:"| ChangeAction\n| UndoAction\n| RedoAction\n| SetGridColsAction\n| SetBreakpointsAction\n| UpdateEditorAction",elements:[{name:"union",raw:"| AddAction\n| MoveAction\n| RemoveAction\n| DuplicateAction\n| UpdateAction\n| ResizeAction\n| SetAction",elements:[{name:"signature",type:"object",raw:'{\n  type: "add";\n  component: PageComponent;\n  parentId?: string;\n  index?: number;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"add"',required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!1}}]}},{name:"signature",type:"object",raw:'{\n  type: "move";\n  from: { parentId?: string; index: number };\n  to: { parentId?: string; index: number };\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"move"',required:!0}},{key:"from",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}},{key:"to",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "remove"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"remove"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "duplicate"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"duplicate"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update";\n  id: string;\n  patch: Partial<PageComponent>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"Partial<PageComponent>",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "resize";\n  id: string;\n  width?: string;\n  height?: string;\n  left?: string;\n  top?: string;\n  right?: string;\n  bottom?: string;\n  leftDesktop?: string;\n  leftTablet?: string;\n  leftMobile?: string;\n  topDesktop?: string;\n  topTablet?: string;\n  topMobile?: string;\n  widthDesktop?: string;\n  widthTablet?: string;\n  widthMobile?: string;\n  heightDesktop?: string;\n  heightTablet?: string;\n  heightMobile?: string;\n  marginDesktop?: string;\n  marginTablet?: string;\n  marginMobile?: string;\n  paddingDesktop?: string;\n  paddingTablet?: string;\n  paddingMobile?: string;\n  [key: string]: string | undefined;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"resize"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!1}},{key:"height",value:{name:"string",required:!1}},{key:"left",value:{name:"string",required:!1}},{key:"top",value:{name:"string",required:!1}},{key:"right",value:{name:"string",required:!1}},{key:"bottom",value:{name:"string",required:!1}},{key:"leftDesktop",value:{name:"string",required:!1}},{key:"leftTablet",value:{name:"string",required:!1}},{key:"leftMobile",value:{name:"string",required:!1}},{key:"topDesktop",value:{name:"string",required:!1}},{key:"topTablet",value:{name:"string",required:!1}},{key:"topMobile",value:{name:"string",required:!1}},{key:"widthDesktop",value:{name:"string",required:!1}},{key:"widthTablet",value:{name:"string",required:!1}},{key:"widthMobile",value:{name:"string",required:!1}},{key:"heightDesktop",value:{name:"string",required:!1}},{key:"heightTablet",value:{name:"string",required:!1}},{key:"heightMobile",value:{name:"string",required:!1}},{key:"marginDesktop",value:{name:"string",required:!1}},{key:"marginTablet",value:{name:"string",required:!1}},{key:"marginMobile",value:{name:"string",required:!1}},{key:"paddingDesktop",value:{name:"string",required:!1}},{key:"paddingTablet",value:{name:"string",required:!1}},{key:"paddingMobile",value:{name:"string",required:!1}},{key:{name:"string"},value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set"; components: PageComponent[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set"',required:!0}},{key:"components",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"PageComponent[]",required:!0}}]}}]},{name:"signature",type:"object",raw:'{ type: "undo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"undo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "redo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"redo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-grid-cols"; gridCols: number }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-grid-cols"',required:!0}},{key:"gridCols",value:{name:"number",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-breakpoints"; breakpoints: { id: string; label: string; min?: number; max?: number }[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-breakpoints"',required:!0}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update-editor";\n  id: string;\n  patch: Partial<EditorFlags>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update-editor"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  hiddenDeviceIds?: string[];\n  /** Legacy single strategy (mobile); kept for backwards-compat */\n  stackStrategy?: "default" | "reverse" | "custom";\n  /** Per-device stacking strategies */\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  /** Custom orders per device (used when corresponding strategy === "custom") */\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n  global?: {\n    id: string;\n    overrides?: unknown;\n    pinned?: boolean;\n    editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n  };\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"hiddenDeviceIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Legacy single strategy (mobile); kept for backwards-compat"},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Per-device stacking strategies"},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1},description:'Custom orders per device (used when corresponding strategy === "custom")'},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}},{key:"global",value:{name:"signature",type:"object",raw:'{\n  id: string;\n  overrides?: unknown;\n  pinned?: boolean;\n  editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"overrides",value:{name:"unknown",required:!1}},{key:"pinned",value:{name:"boolean",required:!1}},{key:"editingSize",value:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]}],raw:'Record<"desktop" | "tablet" | "mobile", number | null>'}],raw:'Partial<Record<"desktop" | "tablet" | "mobile", number | null>>',required:!1}}]},required:!1}}]}}],raw:"Partial<EditorFlags>",required:!0}}]}}]}]},description:""},containerElRef:{required:!0,tsType:{name:"ReactMutableRefObject",raw:"React.MutableRefObject<HTMLDivElement | null>",elements:[{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}]}]},description:""},enabled:{required:!0,tsType:{name:"boolean"},description:""}}},DefaultChildrenList.__docgenInfo={description:"",methods:[],displayName:"DefaultChildrenList",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},visibleChildren:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},underlyingChildren:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, e?: React.MouseEvent) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"e"}],return:{name:"void"}}},description:""},dispatch:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<Action>",elements:[{name:"union",raw:"| ChangeAction\n| UndoAction\n| RedoAction\n| SetGridColsAction\n| SetBreakpointsAction\n| UpdateEditorAction",elements:[{name:"union",raw:"| AddAction\n| MoveAction\n| RemoveAction\n| DuplicateAction\n| UpdateAction\n| ResizeAction\n| SetAction",elements:[{name:"signature",type:"object",raw:'{\n  type: "add";\n  component: PageComponent;\n  parentId?: string;\n  index?: number;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"add"',required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!1}}]}},{name:"signature",type:"object",raw:'{\n  type: "move";\n  from: { parentId?: string; index: number };\n  to: { parentId?: string; index: number };\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"move"',required:!0}},{key:"from",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}},{key:"to",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "remove"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"remove"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "duplicate"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"duplicate"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update";\n  id: string;\n  patch: Partial<PageComponent>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"Partial<PageComponent>",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "resize";\n  id: string;\n  width?: string;\n  height?: string;\n  left?: string;\n  top?: string;\n  right?: string;\n  bottom?: string;\n  leftDesktop?: string;\n  leftTablet?: string;\n  leftMobile?: string;\n  topDesktop?: string;\n  topTablet?: string;\n  topMobile?: string;\n  widthDesktop?: string;\n  widthTablet?: string;\n  widthMobile?: string;\n  heightDesktop?: string;\n  heightTablet?: string;\n  heightMobile?: string;\n  marginDesktop?: string;\n  marginTablet?: string;\n  marginMobile?: string;\n  paddingDesktop?: string;\n  paddingTablet?: string;\n  paddingMobile?: string;\n  [key: string]: string | undefined;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"resize"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!1}},{key:"height",value:{name:"string",required:!1}},{key:"left",value:{name:"string",required:!1}},{key:"top",value:{name:"string",required:!1}},{key:"right",value:{name:"string",required:!1}},{key:"bottom",value:{name:"string",required:!1}},{key:"leftDesktop",value:{name:"string",required:!1}},{key:"leftTablet",value:{name:"string",required:!1}},{key:"leftMobile",value:{name:"string",required:!1}},{key:"topDesktop",value:{name:"string",required:!1}},{key:"topTablet",value:{name:"string",required:!1}},{key:"topMobile",value:{name:"string",required:!1}},{key:"widthDesktop",value:{name:"string",required:!1}},{key:"widthTablet",value:{name:"string",required:!1}},{key:"widthMobile",value:{name:"string",required:!1}},{key:"heightDesktop",value:{name:"string",required:!1}},{key:"heightTablet",value:{name:"string",required:!1}},{key:"heightMobile",value:{name:"string",required:!1}},{key:"marginDesktop",value:{name:"string",required:!1}},{key:"marginTablet",value:{name:"string",required:!1}},{key:"marginMobile",value:{name:"string",required:!1}},{key:"paddingDesktop",value:{name:"string",required:!1}},{key:"paddingTablet",value:{name:"string",required:!1}},{key:"paddingMobile",value:{name:"string",required:!1}},{key:{name:"string"},value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set"; components: PageComponent[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set"',required:!0}},{key:"components",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"PageComponent[]",required:!0}}]}}]},{name:"signature",type:"object",raw:'{ type: "undo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"undo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "redo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"redo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-grid-cols"; gridCols: number }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-grid-cols"',required:!0}},{key:"gridCols",value:{name:"number",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-breakpoints"; breakpoints: { id: string; label: string; min?: number; max?: number }[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-breakpoints"',required:!0}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update-editor";\n  id: string;\n  patch: Partial<EditorFlags>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update-editor"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  hiddenDeviceIds?: string[];\n  /** Legacy single strategy (mobile); kept for backwards-compat */\n  stackStrategy?: "default" | "reverse" | "custom";\n  /** Per-device stacking strategies */\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  /** Custom orders per device (used when corresponding strategy === "custom") */\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n  global?: {\n    id: string;\n    overrides?: unknown;\n    pinned?: boolean;\n    editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n  };\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"hiddenDeviceIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Legacy single strategy (mobile); kept for backwards-compat"},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Per-device stacking strategies"},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1},description:'Custom orders per device (used when corresponding strategy === "custom")'},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}},{key:"global",value:{name:"signature",type:"object",raw:'{\n  id: string;\n  overrides?: unknown;\n  pinned?: boolean;\n  editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"overrides",value:{name:"unknown",required:!1}},{key:"pinned",value:{name:"boolean",required:!1}},{key:"editingSize",value:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]}],raw:'Record<"desktop" | "tablet" | "mobile", number | null>'}],raw:'Partial<Record<"desktop" | "tablet" | "mobile", number | null>>',required:!1}}]},required:!1}}]}}],raw:"Partial<EditorFlags>",required:!0}}]}}]}]},description:""},locale:{required:!0,tsType:{name:"Locale"},description:""},effGridEnabled:{required:!0,tsType:{name:"boolean"},description:""},effGridCols:{required:!0,tsType:{name:"number"},description:""},viewport:{required:!0,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:""},device:{required:!1,tsType:{name:"signature",type:"object",raw:'{\n  id: string;\n  label: string;\n  width: number;\n  height: number;\n  type: "desktop" | "tablet" | "mobile";\n  orientation: "portrait" | "landscape";\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}},{key:"type",value:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}],required:!0}},{key:"orientation",value:{name:"union",raw:'"portrait" | "landscape"',elements:[{name:"literal",value:'"portrait"'},{name:"literal",value:'"landscape"'}],required:!0}}]}},description:""},editor:{required:!1,tsType:{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},description:""},baselineSnap:{required:!0,tsType:{name:"boolean"},description:""},baselineStep:{required:!0,tsType:{name:"number"},description:""},containerElRef:{required:!0,tsType:{name:"ReactMutableRefObject",raw:"React.MutableRefObject<HTMLDivElement | null>",elements:[{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}]}]},description:""},toUnderlyingIndex:{required:!0,tsType:{name:"signature",type:"function",raw:"(uiIndex: number) => number",signature:{arguments:[{type:{name:"number"},name:"uiIndex"}],return:{name:"number"}}},description:""},compType:{required:!0,tsType:{name:"string"},description:""},insertParentId:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},insertIndex:{required:!1,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:""},dropAllowed:{required:!1,tsType:{name:"union",raw:"boolean | null",elements:[{name:"boolean"},{name:"null"}]},description:""},preferParentOnClick:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};var Cluster=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Cluster.tsx"),clsx=__webpack_require__("../../node_modules/.pnpm/clsx@2.1.1/node_modules/clsx/dist/clsx.mjs");function TabbedChildren({component,visibleChildren,underlyingChildren:_underlyingChildren,slots,selectedIds,onSelect,dispatch,locale,effGridEnabled,effGridCols,viewport,device,editor,baselineSnap:_baselineSnap,baselineStep:_baselineStep,toUnderlyingIndex,insertParentId,insertIndex,dropAllowed,preferParentOnClick=!1}){const t=(0,src.c3)(),[dragActive,setDragActive]=(0,react.useState)(!1),[hoverTab,setHoverTab]=(0,react.useState)(null);return(0,react.useEffect)(()=>{const onStart=()=>setDragActive(!0),onEnd=()=>{setDragActive(!1),setHoverTab(null)};return window.addEventListener("pb-drag-start",onStart),window.addEventListener("pb-drag-end",onEnd),()=>{window.removeEventListener("pb-drag-start",onStart),window.removeEventListener("pb-drag-end",onEnd)}},[]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[dragActive&&(0,jsx_runtime.jsx)(Cluster.d,{gap:2,wrap:!0,className:"sticky top-0 mb-2 bg-background/80 p-2 backdrop-blur",children:slots.map((s,i)=>(0,jsx_runtime.jsx)("button",{type:"button",onMouseEnter:()=>{setHoverTab(i);try{window.dispatchEvent(new CustomEvent("pb-tab-hover",{detail:{parentId:component.id,tabIndex:i}}))}catch(e){}},onMouseLeave:()=>setHoverTab(prev=>prev===i?null:prev),onFocus:()=>setHoverTab(i),onBlur:()=>setHoverTab(prev=>prev===i?null:prev),"aria-pressed":hoverTab===i,className:(0,clsx.$)("rounded border px-2 py-1 text-xs",hoverTab===i?"border-primary bg-primary/10 ring-2 ring-primary":"border-dashed"),children:s.title},`tab-head-${s.key}`))}),slots.map((slot,sIdx)=>{const slotChildren=visibleChildren.filter(c=>{const sk=c.slotKey;return sk===String(sIdx)||null==sk&&0===sIdx}),firstIdx=slotChildren.length>0?visibleChildren.findIndex(c=>c.id===slotChildren[0].id):visibleChildren.findIndex(c=>{const sk=c.slotKey;return(null!=sk?Number(sk):0)>=sIdx}),startIndex=firstIdx>=0?firstIdx:visibleChildren.length,endIndex=slotChildren.length>0?visibleChildren.findIndex(c=>c.id===slotChildren[slotChildren.length-1].id)+1:startIndex;return(0,jsx_runtime.jsxs)("div",{className:"rounded border p-2",children:[(0,jsx_runtime.jsx)("div",{className:"mb-2 text-xs font-medium "+(dragActive&&hoverTab===sIdx?"text-primary":"text-muted-foreground"),children:slot.title}),(0,jsx_runtime.jsx)(InlineInsert.A,{index:startIndex,context:"child",containerType:component.type,onInsert:(newComponent,index)=>{newComponent.slotKey=String(sIdx);const insertAt=toUnderlyingIndex(index);dispatch({type:"add",component:newComponent,parentId:component.id,index:insertAt});try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:t("pb.blockInserted")}))}catch(e){}}}),insertParentId===component.id&&insertIndex===startIndex&&(0,jsx_runtime.jsx)("div",{"data-placeholder":!0,className:(0,clsx.$)("mb-1 h-4 w-full rounded border-2 border-dashed transition-all duration-150 motion-reduce:transition-none",!1===dropAllowed?"border-danger bg-danger/10 ring-2 ring-danger":"border-primary bg-primary/10 ring-2 ring-primary")}),slotChildren.map(child=>{const i=visibleChildren.findIndex(c=>c.id===child.id);var _child_slotKey;return(0,jsx_runtime.jsxs)("div",{className:"relative group",children:[insertParentId===component.id&&insertIndex===i&&(0,jsx_runtime.jsx)("div",{"data-placeholder":!0,className:(0,clsx.$)("mb-1 h-4 w-full rounded border-2 border-dashed transition-all duration-150 motion-reduce:transition-none",!1===dropAllowed?"border-danger bg-danger/10 ring-2 ring-danger":"border-primary bg-primary/10 ring-2 ring-primary")}),(0,jsx_runtime.jsx)("div",{className:"absolute -top-3 -start-2.5",children:(0,jsx_runtime.jsxs)(shadcn.l6,{value:String(null!==(_child_slotKey=child.slotKey)&&void 0!==_child_slotKey?_child_slotKey:0),onValueChange:v=>dispatch({type:"update",id:child.id,patch:{slotKey:v}}),children:[(0,jsx_runtime.jsx)(shadcn.bq,{className:"h-6 w-24 px-2 py-0 text-xs",children:(0,jsx_runtime.jsx)(shadcn.yv,{})}),(0,jsx_runtime.jsx)(shadcn.gC,{children:slots.map((s,idx2)=>(0,jsx_runtime.jsx)(shadcn.eb,{value:String(idx2),children:s.title},s.key))})]})}),(0,jsx_runtime.jsx)(page_builder_CanvasItem,{component:child,index:i,parentId:component.id,parentType:component.type,parentSlots:slots.length,selectedIds,onSelect,onRemove:()=>dispatch({type:"remove",id:child.id}),dispatch,locale,gridEnabled:effGridEnabled,gridCols:effGridCols,viewport,device,editor,insertParentId,insertIndex,dropAllowed,preferParentOnClick}),(0,jsx_runtime.jsx)(InlineInsert.A,{index:i+1,context:"child",containerType:component.type,onInsert:(newComponent,index)=>{newComponent.slotKey=String(sIdx);const insertAt=toUnderlyingIndex(index);dispatch({type:"add",component:newComponent,parentId:component.id,index:insertAt});try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:t("pb.blockInserted")}))}catch(e){}}}),insertParentId===component.id&&insertIndex===i+1&&(0,jsx_runtime.jsx)("div",{"data-placeholder":!0,className:(0,clsx.$)("mt-1 h-4 w-full rounded border-2 border-dashed transition-all duration-150 motion-reduce:transition-none",!1===dropAllowed?"border-danger bg-danger/10 ring-2 ring-danger":"border-primary bg-primary/10 ring-2 ring-primary")})]},child.id)}),(0,jsx_runtime.jsx)(InlineInsert.A,{index:endIndex,context:"child",containerType:component.type,onInsert:(newComponent,index)=>{newComponent.slotKey=String(sIdx);const insertAt=toUnderlyingIndex(index);dispatch({type:"add",component:newComponent,parentId:component.id,index:insertAt});try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:t("pb.blockInserted")}))}catch(e){}}}),insertParentId===component.id&&insertIndex===endIndex&&(0,jsx_runtime.jsx)("div",{"data-placeholder":!0,className:(0,clsx.$)("mt-1 h-4 w-full rounded border-2 border-dashed transition-all duration-150 motion-reduce:transition-none",!1===dropAllowed?"border-danger bg-danger/10 ring-2 ring-danger":"border-primary bg-primary/10 ring-2 ring-primary")})]},slot.key)})]})}function GridAreaChildren({component,visibleChildren,underlyingChildren:_underlyingChildren,selectedIds,onSelect,dispatch,locale,effGridEnabled,effGridCols,viewport,device,editor,baselineSnap,baselineStep,toUnderlyingIndex,insertParentId,insertIndex,dropAllowed,preferParentOnClick=!1}){const t=(0,src.c3)(),raw="Grid"===component.type&&"string"==typeof component.areas?component.areas:"",names=new Set;raw.split(/\n+/).map(line=>line.trim().replace(/^"|"$/g,"")).filter(Boolean).forEach(line=>{line.split(/\s+/).forEach(token=>{token&&"."!==token&&names.add(token)})});const gridAreas=Array.from(names.values());return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:gridAreas.map(area=>{const areaChildren=visibleChildren.filter(c=>String(c.gridArea)===area),firstIdx=areaChildren.length>0?visibleChildren.findIndex(c=>c.id===areaChildren[0].id):visibleChildren.length,endIndex=areaChildren.length>0?visibleChildren.findIndex(c=>c.id===areaChildren[areaChildren.length-1].id)+1:firstIdx;return(0,jsx_runtime.jsxs)("div",{className:"rounded border p-2",children:[(0,jsx_runtime.jsxs)("div",{className:"text-muted-foreground mb-2 text-xs font-medium",children:[t("pb.grid.areaLabel")," ",(0,jsx_runtime.jsx)("code",{children:area})]}),(0,jsx_runtime.jsx)(InlineInsert.A,{index:firstIdx,context:"child",containerType:component.type,onInsert:(newComponent,index)=>{newComponent.gridArea=area;const insertAt=toUnderlyingIndex(index);dispatch({type:"add",component:newComponent,parentId:component.id,index:insertAt});try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:t("pb.blockInserted")}))}catch(e){}}}),insertParentId===component.id&&insertIndex===firstIdx&&(0,jsx_runtime.jsx)("div",{"data-placeholder":!0,className:(!1===dropAllowed?"border-danger bg-danger/10 ring-2 ring-danger":"border-primary bg-primary/10 ring-2 ring-primary")+" mb-1 h-4 w-full rounded border-2 border-dashed transition-all duration-150 motion-reduce:transition-none"}),areaChildren.map(child=>{const i=visibleChildren.findIndex(c=>c.id===child.id);var _child_gridArea;return(0,jsx_runtime.jsxs)("div",{className:"relative group",children:[insertParentId===component.id&&insertIndex===i&&(0,jsx_runtime.jsx)("div",{"data-placeholder":!0,className:(!1===dropAllowed?"border-danger bg-danger/10 ring-2 ring-danger":"border-primary bg-primary/10 ring-2 ring-primary")+" mb-1 h-4 w-full rounded border-2 border-dashed transition-all duration-150 motion-reduce:transition-none"}),(0,jsx_runtime.jsx)("div",{className:"absolute -top-3 -start-2.5",children:(0,jsx_runtime.jsxs)(shadcn.l6,{value:String(null!==(_child_gridArea=child.gridArea)&&void 0!==_child_gridArea?_child_gridArea:area),onValueChange:v=>dispatch({type:"update",id:child.id,patch:{gridArea:v}}),children:[(0,jsx_runtime.jsx)(shadcn.bq,{className:"h-6 w-28 px-2 py-0 text-xs",children:(0,jsx_runtime.jsx)(shadcn.yv,{})}),(0,jsx_runtime.jsx)(shadcn.gC,{children:gridAreas.map(g=>(0,jsx_runtime.jsx)(shadcn.eb,{value:g,children:g},g))})]})}),(0,jsx_runtime.jsx)(page_builder_CanvasItem,{component:child,index:i,parentId:component.id,parentType:component.type,parentSlots:void 0,selectedIds,onSelect,onRemove:()=>dispatch({type:"remove",id:child.id}),dispatch,locale,gridEnabled:effGridEnabled,gridCols:effGridCols,viewport,device,editor,baselineSnap,baselineStep,insertParentId,insertIndex,dropAllowed,preferParentOnClick}),(0,jsx_runtime.jsx)(InlineInsert.A,{index:i+1,context:"child",containerType:component.type,onInsert:(newComponent,index)=>{newComponent.gridArea=area;const insertAt=toUnderlyingIndex(index);dispatch({type:"add",component:newComponent,parentId:component.id,index:insertAt});try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:t("pb.blockInserted")}))}catch(e){}}}),insertParentId===component.id&&insertIndex===i+1&&(0,jsx_runtime.jsx)("div",{"data-placeholder":!0,className:(!1===dropAllowed?"border-danger bg-danger/10 ring-2 ring-danger":"border-primary bg-primary/10 ring-2 ring-primary")+" mt-1 h-4 w-full rounded border-2 border-dashed transition-all duration-150 motion-reduce:transition-none"})]},child.id)}),(0,jsx_runtime.jsx)(InlineInsert.A,{index:endIndex,context:"child",containerType:component.type,onInsert:(newComponent,index)=>{newComponent.gridArea=area;const insertAt=toUnderlyingIndex(index);dispatch({type:"add",component:newComponent,parentId:component.id,index:insertAt});try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:t("pb.blockInserted")}))}catch(e){}}}),insertParentId===component.id&&insertIndex===endIndex&&(0,jsx_runtime.jsx)("div",{"data-placeholder":!0,className:(!1===dropAllowed?"border-danger bg-danger/10 ring-2 ring-danger":"border-primary bg-primary/10 ring-2 ring-primary")+" mt-1 h-4 w-full rounded border-2 border-dashed transition-all duration-150 motion-reduce:transition-none"})]},area)})})}function BlockChildren({component,childComponents,selectedIds,onSelect,dispatch,locale,gridEnabled=!1,gridCols,viewport,device,isOver,setDropRef,editor,baselineSnap=!1,baselineStep=8,dropAllowed,insertParentId,insertIndex,preferParentOnClick=!1}){const t=(0,src.c3)(),containerElRef=(0,react.useRef)(null),underlyingChildren=null!=childComponents?childComponents:[];let visibleChildren=underlyingChildren.filter(c=>!(0,isHiddenForViewport.E)(c.id,editor,c.hidden,viewport));{var _editor_component_id;const flags=null!==(_editor_component_id=null==editor?void 0:editor[component.id])&&void 0!==_editor_component_id?_editor_component_id:{},cap=s=>s.charAt(0).toUpperCase()+s.slice(1);var _flags_stackStrategy,_flags_devKey;const strategy=null!==(_flags_devKey=flags[`stack${cap(viewport)}`])&&void 0!==_flags_devKey?_flags_devKey:"mobile"===viewport&&null!==(_flags_stackStrategy=flags.stackStrategy)&&void 0!==_flags_stackStrategy?_flags_stackStrategy:"default";"reverse"===strategy?visibleChildren=[...visibleChildren].reverse():"custom"===strategy&&(visibleChildren=[...visibleChildren].sort((a,b)=>{var _e_a_id,_e_b_id;const key=`order${cap(viewport)}`,e=editor,oa=null==e||null===(_e_a_id=e[a.id])||void 0===_e_a_id?void 0:_e_a_id[key],ob=null==e||null===(_e_b_id=e[b.id])||void 0===_e_b_id?void 0:_e_b_id[key],da=void 0===oa?Number.POSITIVE_INFINITY:oa,db=void 0===ob?Number.POSITIVE_INFINITY:ob;return da===db?0:da<db?-1:1}))}const handleSetContainerRef=(0,react.useCallback)(node=>{containerElRef.current=node,setDropRef(node)},[setDropRef]);if(0===visibleChildren.length)return null;const section=component;var _section_gridCols;const effGridCols=Number.isFinite(section.gridCols)&&(null!==(_section_gridCols=section.gridCols)&&void 0!==_section_gridCols?_section_gridCols:0)>0?section.gridCols:gridCols,effGridEnabled=void 0!==section.gridSnap?!!section.gridSnap:gridEnabled,effGutter=section.gridGutter,childIds=visibleChildren.map(c=>c.id),toUnderlyingIndex=uiIndex=>{if(uiIndex<visibleChildren.length){var _visibleChildren_uiIndex;const targetId=null===(_visibleChildren_uiIndex=visibleChildren[uiIndex])||void 0===_visibleChildren_uiIndex?void 0:_visibleChildren_uiIndex.id;if(targetId){const idx=underlyingChildren.findIndex(c=>c.id===targetId);return idx>=0?idx:underlyingChildren.length}}return underlyingChildren.length},compType=component.type,isTabbed="Tabs"===compType||"TabsAccordionContainer"===compType,isGridArea="Grid"===compType&&"string"==typeof component.areas&&component.areas.trim().length>0;let slots=null;if(isTabbed){let titles;if("Tabs"===compType){var _component_labels;const labels=null!==(_component_labels=component.labels)&&void 0!==_component_labels?_component_labels:[];var _component_tabs;const legacyTabs=null!==(_component_tabs=component.tabs)&&void 0!==_component_tabs?_component_tabs:[];titles=labels.length>0?labels:legacyTabs}else{var _component_tabs1;titles=null!==(_component_tabs1=component.tabs)&&void 0!==_component_tabs1?_component_tabs1:[]}slots=(titles.length>0?titles:[t("Content 1"),t("Content 2")]).map((title,i)=>({key:String(i),title}));const slotIndex=c=>{const s=c.slotKey,num=null!=s?Number(s):0;return Number.isFinite(num)?num:0};visibleChildren=[...visibleChildren].sort((a,b)=>{const sa=slotIndex(a),sb=slotIndex(b);return sa===sb?0:sa<sb?-1:1})}const containerClass="border-muted relative m-2 flex flex-col gap-4 border border-dashed p-2 "+(isOver&&!1===dropAllowed?"ring-2 ring-danger border-danger cursor-not-allowed":"");return(0,jsx_runtime.jsx)(sortable_esm.gB,{id:`context-${component.id}`,items:childIds,strategy:sortable_esm.kL,children:(0,jsx_runtime.jsxs)("div",{ref:handleSetContainerRef,id:`container-${component.id}`,role:"list","aria-label":t("Container"),"data-cy":"pb-container","data-cy-parent-id":component.id,className:containerClass,"data-tab-titles":isTabbed&&slots?JSON.stringify(slots.map(s=>s.title)):void 0,children:[effGridEnabled&&(0,jsx_runtime.jsx)("div",{className:"absolute inset-0",children:(0,jsx_runtime.jsx)(GridOverlay.A,{gridCols:effGridCols,gutter:effGutter})}),isOver&&insertParentId===component.id&&0===insertIndex&&(0,jsx_runtime.jsx)("div",{"data-placeholder":!0,className:(!1===dropAllowed?"border-danger bg-danger/10 ring-2 ring-danger":"border-primary bg-primary/10 ring-2 ring-primary")+" h-4 w-full rounded border-2 border-dashed"}),!isTabbed&&!isGridArea&&(0,jsx_runtime.jsx)(DefaultChildrenList,{component,visibleChildren,underlyingChildren,selectedIds,onSelect,dispatch,locale,effGridEnabled,effGridCols,viewport,device,editor,baselineSnap,baselineStep,containerElRef,toUnderlyingIndex,compType,insertParentId,insertIndex,dropAllowed,preferParentOnClick}),isTabbed&&slots&&(0,jsx_runtime.jsx)(TabbedChildren,{component,visibleChildren,underlyingChildren,slots,selectedIds,onSelect,dispatch,locale,effGridEnabled,effGridCols,viewport,device,editor,baselineSnap,baselineStep,toUnderlyingIndex,insertParentId,insertIndex,dropAllowed,preferParentOnClick}),isGridArea&&(0,jsx_runtime.jsx)(GridAreaChildren,{component,visibleChildren,underlyingChildren,selectedIds,onSelect,dispatch,locale,effGridEnabled,effGridCols,viewport,device,editor,baselineSnap,baselineStep,toUnderlyingIndex,insertParentId,insertIndex,dropAllowed,preferParentOnClick})]})})}function CanvasOverlays({guides,distances,spacingOverlay,showSizePosition,overlayWidth,overlayHeight,overlayLeft,overlayTop,rotating,angle}){var _guides_x,_guides_x1,_guides_y,_guides_y1;return(0,jsx_runtime.jsxs)("div",{className:"relative",children:[(0,jsx_runtime.jsxs)("div",{className:"pointer-events-none absolute inset-0",children:[(0,jsx_runtime.jsx)("div",{className:"bg-primary absolute top-0 bottom-0 w-px transition-opacity duration-150 motion-reduce:transition-none",style:{left:null!==(_guides_x=guides.x)&&void 0!==_guides_x?_guides_x:0,opacity:null!==guides.x?1:0}}),null!==distances.x&&(0,jsx_runtime.jsx)("div",{className:"absolute -top-4 rounded bg-black/75 px-1 font-mono text-xs text-white shadow transition-opacity duration-150 motion-reduce:transition-none dark:bg-white/75 dark:text-black",style:{left:(null!==(_guides_x1=guides.x)&&void 0!==_guides_x1?_guides_x1:0)+4,opacity:null!==guides.x?1:0},children:Math.round(distances.x)}),(0,jsx_runtime.jsx)("div",{className:"bg-primary absolute end-0 start-0 h-px transition-opacity duration-150 motion-reduce:transition-none",style:{top:null!==(_guides_y=guides.y)&&void 0!==_guides_y?_guides_y:0,opacity:null!==guides.y?1:0}}),null!==distances.y&&(0,jsx_runtime.jsx)("div",{className:"absolute -left-4 rounded bg-black/75 px-1 font-mono text-xs text-white shadow transition-opacity duration-150 motion-reduce:transition-none dark:bg-white/75 dark:text-black",style:{top:(null!==(_guides_y1=guides.y)&&void 0!==_guides_y1?_guides_y1:0)+4,opacity:null!==guides.y?1:0},children:Math.round(distances.y)})]}),spacingOverlay&&(0,jsx_runtime.jsx)("div",{className:"bg-primary/20 pointer-events-none absolute",style:{top:spacingOverlay.top,left:spacingOverlay.left,width:spacingOverlay.width,height:spacingOverlay.height}}),showSizePosition&&(0,jsx_runtime.jsxs)("div",{className:"pointer-events-none absolute -top-5 start-0 rounded bg-black/75 px-1 font-mono text-xs text-white shadow dark:bg-white/75 dark:text-black",children:[Math.round(overlayWidth),"×",Math.round(overlayHeight)," px | ",Math.round(overlayLeft),", ",Math.round(overlayTop)," px"]}),rotating&&(0,jsx_runtime.jsxs)("div",{className:"pointer-events-none absolute -top-8 start-1/2 -translate-x-1/2 rounded bg-black/75 px-1 font-mono text-xs text-white shadow dark:bg-white/75 dark:text-black",children:[Math.round(angle),"°"]})]})}function DeleteButton({locked,onRemove}){return(0,jsx_runtime.jsx)("button",{type:"button",onClick:()=>{locked||onRemove()},className:"bg-danger absolute top-1 end-1 rounded px-2 text-xs disabled:opacity-50","data-token":"--color-danger",disabled:!!locked,"aria-disabled":!!locked,"aria-label":locked?"Delete disabled while locked":"Delete",title:locked?"Unlock to delete":"Delete",children:(0,jsx_runtime.jsx)("span",{className:"text-danger-foreground","data-token":"--color-danger-fg",children:"×"})})}function DragHandle({attributes,listeners,isDragging,locked,onPointerDown}){return(0,jsx_runtime.jsx)("div",{className:"bg-muted absolute top-0 start-0 z-10 h-6 w-6 cursor-move rounded-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",...attributes,...locked?{}:listeners,role:"button",tabIndex:0,"aria-pressed":isDragging,"aria-describedby":"pb-drag-instructions",title:"Drag or press space/enter to move",onPointerDown})}function HiddenBadge({hiddenList,isHiddenHere,viewport,componentId,editor,dispatch}){return 0===hiddenList.length?null:(0,jsx_runtime.jsx)("div",{className:"relative",children:(0,jsx_runtime.jsxs)("div",{className:"absolute start-1 top-1 rounded bg-amber-500/90 px-1 py-0.5 text-xs text-white shadow",title:isHiddenHere?`Hidden on ${viewport}`:`Hidden on ${hiddenList.join(", ")}`,children:[isHiddenHere?`Hidden on ${viewport}`:`Hidden on ${hiddenList.join(", ")}`,isHiddenHere&&(0,jsx_runtime.jsx)("button",{type:"button",className:"ms-2 inline-flex min-h-10 min-w-10 items-center justify-center px-2 py-1 underline",onClick:e=>{var _componentId,_componentId_hidden;e.stopPropagation();const cur=null!==(_componentId_hidden=null===(_componentId=(null!=editor?editor:{})[componentId])||void 0===_componentId?void 0:_componentId.hidden)&&void 0!==_componentId_hidden?_componentId_hidden:[],set=new Set(cur);set.delete(viewport),dispatch({type:"update-editor",id:componentId,patch:{hidden:Array.from(set)}});try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:`Shown on ${viewport}`}))}catch(e){}},children:"Show for this device"})]})})}function ImageFocalOverlay({value,onChange,visible=!1,disabled=!1}){const[dragging,setDragging]=(0,react.useState)(!1),overlayRef=(0,react.useRef)(null),crosshairRef=(0,react.useRef)(null),t=(0,src.c3)(),toNormalized=(0,react.useCallback)((clientX,clientY)=>{const el=overlayRef.current;if(!el)return null;const rect=el.getBoundingClientRect(),x=(clientX-rect.left)/rect.width,y=(clientY-rect.top)/rect.height;return{x:Math.min(1,Math.max(0,x)),y:Math.min(1,Math.max(0,y))}},[]),handlePointerDown=(0,react.useCallback)(e=>{var _e_target_setPointerCapture,_e_target;if(disabled)return;e.preventDefault(),e.stopPropagation(),null===(_e_target_setPointerCapture=(_e_target=e.target).setPointerCapture)||void 0===_e_target_setPointerCapture||_e_target_setPointerCapture.call(_e_target,e.pointerId),setDragging(!0);const fp=toNormalized(e.clientX,e.clientY);fp&&onChange(fp)},[disabled,toNormalized,onChange]),handlePointerMove=(0,react.useCallback)(e=>{if(!dragging||disabled)return;e.preventDefault(),e.stopPropagation();const fp=toNormalized(e.clientX,e.clientY);fp&&onChange(fp)},[dragging,disabled,toNormalized,onChange]),handlePointerUp=(0,react.useCallback)(e=>{if(dragging){e.preventDefault(),e.stopPropagation();try{var _e_target_releasePointerCapture,_e_target;null===(_e_target_releasePointerCapture=(_e_target=e.target).releasePointerCapture)||void 0===_e_target_releasePointerCapture||_e_target_releasePointerCapture.call(_e_target,e.pointerId)}catch(e){}setDragging(!1)}},[dragging]);(0,react.useEffect)(()=>{const el=overlayRef.current;if(!el)return;const onKey=ev=>{if(disabled||!visible)return;const key=ev.key.toLowerCase();if(!["arrowleft","arrowright","arrowup","arrowdown"].includes(key))return;ev.preventDefault();const step=ev.shiftKey?.05:.01,v=null!=value?value:{x:.5,y:.5},next={x:Math.min(1,Math.max(0,v.x+("arrowleft"===key?-step:"arrowright"===key?step:0))),y:Math.min(1,Math.max(0,v.y+("arrowup"===key?-step:"arrowdown"===key?step:0)))};onChange(next)};return el.addEventListener("keydown",onKey),()=>el.removeEventListener("keydown",onKey)},[value,visible,disabled,onChange]);const fp=null!=value?value:{x:.5,y:.5};return(0,react.useEffect)(()=>{const dot=crosshairRef.current;dot&&(dot.style.left=`${(100*fp.x).toFixed(2)}%`,dot.style.top=`${(100*fp.y).toFixed(2)}%`)},[fp.x,fp.y]),visible?(0,jsx_runtime.jsxs)("div",{ref:overlayRef,role:"slider","aria-label":String(t("cms.builder.focal.ariaLabel")),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round(50*(fp.x+fp.y)),tabIndex:0,className:"pointer-events-auto relative select-none",onPointerDown:handlePointerDown,onPointerMove:handlePointerMove,onPointerUp:handlePointerUp,children:[(0,jsx_runtime.jsx)("div",{ref:crosshairRef,className:"absolute h-4 w-4 -translate-x-1/2 -translate-y-1/2 transform rounded-full border-2 border-white bg-primary shadow outline-none","aria-hidden":!0}),(0,jsx_runtime.jsx)("div",{className:"absolute start-2 top-2 rounded bg-black/60 px-2 py-1 text-xs text-white shadow dark:bg-white/70 dark:text-black",children:t("cms.builder.focal.help")})]}):null}TabbedChildren.__docgenInfo={description:"",methods:[],displayName:"TabbedChildren",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},visibleChildren:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},underlyingChildren:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},slots:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ key: string; title: string }",signature:{properties:[{key:"key",value:{name:"string",required:!0}},{key:"title",value:{name:"string",required:!0}}]}}],raw:"SlotDef[]"},description:""},selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, e?: React.MouseEvent) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"e"}],return:{name:"void"}}},description:""},dispatch:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<Action>",elements:[{name:"union",raw:"| ChangeAction\n| UndoAction\n| RedoAction\n| SetGridColsAction\n| SetBreakpointsAction\n| UpdateEditorAction",elements:[{name:"union",raw:"| AddAction\n| MoveAction\n| RemoveAction\n| DuplicateAction\n| UpdateAction\n| ResizeAction\n| SetAction",elements:[{name:"signature",type:"object",raw:'{\n  type: "add";\n  component: PageComponent;\n  parentId?: string;\n  index?: number;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"add"',required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!1}}]}},{name:"signature",type:"object",raw:'{\n  type: "move";\n  from: { parentId?: string; index: number };\n  to: { parentId?: string; index: number };\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"move"',required:!0}},{key:"from",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}},{key:"to",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "remove"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"remove"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "duplicate"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"duplicate"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update";\n  id: string;\n  patch: Partial<PageComponent>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"Partial<PageComponent>",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "resize";\n  id: string;\n  width?: string;\n  height?: string;\n  left?: string;\n  top?: string;\n  right?: string;\n  bottom?: string;\n  leftDesktop?: string;\n  leftTablet?: string;\n  leftMobile?: string;\n  topDesktop?: string;\n  topTablet?: string;\n  topMobile?: string;\n  widthDesktop?: string;\n  widthTablet?: string;\n  widthMobile?: string;\n  heightDesktop?: string;\n  heightTablet?: string;\n  heightMobile?: string;\n  marginDesktop?: string;\n  marginTablet?: string;\n  marginMobile?: string;\n  paddingDesktop?: string;\n  paddingTablet?: string;\n  paddingMobile?: string;\n  [key: string]: string | undefined;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"resize"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!1}},{key:"height",value:{name:"string",required:!1}},{key:"left",value:{name:"string",required:!1}},{key:"top",value:{name:"string",required:!1}},{key:"right",value:{name:"string",required:!1}},{key:"bottom",value:{name:"string",required:!1}},{key:"leftDesktop",value:{name:"string",required:!1}},{key:"leftTablet",value:{name:"string",required:!1}},{key:"leftMobile",value:{name:"string",required:!1}},{key:"topDesktop",value:{name:"string",required:!1}},{key:"topTablet",value:{name:"string",required:!1}},{key:"topMobile",value:{name:"string",required:!1}},{key:"widthDesktop",value:{name:"string",required:!1}},{key:"widthTablet",value:{name:"string",required:!1}},{key:"widthMobile",value:{name:"string",required:!1}},{key:"heightDesktop",value:{name:"string",required:!1}},{key:"heightTablet",value:{name:"string",required:!1}},{key:"heightMobile",value:{name:"string",required:!1}},{key:"marginDesktop",value:{name:"string",required:!1}},{key:"marginTablet",value:{name:"string",required:!1}},{key:"marginMobile",value:{name:"string",required:!1}},{key:"paddingDesktop",value:{name:"string",required:!1}},{key:"paddingTablet",value:{name:"string",required:!1}},{key:"paddingMobile",value:{name:"string",required:!1}},{key:{name:"string"},value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set"; components: PageComponent[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set"',required:!0}},{key:"components",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"PageComponent[]",required:!0}}]}}]},{name:"signature",type:"object",raw:'{ type: "undo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"undo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "redo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"redo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-grid-cols"; gridCols: number }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-grid-cols"',required:!0}},{key:"gridCols",value:{name:"number",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-breakpoints"; breakpoints: { id: string; label: string; min?: number; max?: number }[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-breakpoints"',required:!0}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update-editor";\n  id: string;\n  patch: Partial<EditorFlags>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update-editor"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  hiddenDeviceIds?: string[];\n  /** Legacy single strategy (mobile); kept for backwards-compat */\n  stackStrategy?: "default" | "reverse" | "custom";\n  /** Per-device stacking strategies */\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  /** Custom orders per device (used when corresponding strategy === "custom") */\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n  global?: {\n    id: string;\n    overrides?: unknown;\n    pinned?: boolean;\n    editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n  };\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"hiddenDeviceIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Legacy single strategy (mobile); kept for backwards-compat"},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Per-device stacking strategies"},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1},description:'Custom orders per device (used when corresponding strategy === "custom")'},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}},{key:"global",value:{name:"signature",type:"object",raw:'{\n  id: string;\n  overrides?: unknown;\n  pinned?: boolean;\n  editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"overrides",value:{name:"unknown",required:!1}},{key:"pinned",value:{name:"boolean",required:!1}},{key:"editingSize",value:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]}],raw:'Record<"desktop" | "tablet" | "mobile", number | null>'}],raw:'Partial<Record<"desktop" | "tablet" | "mobile", number | null>>',required:!1}}]},required:!1}}]}}],raw:"Partial<EditorFlags>",required:!0}}]}}]}]},description:""},locale:{required:!0,tsType:{name:"Locale"},description:""},effGridEnabled:{required:!0,tsType:{name:"boolean"},description:""},effGridCols:{required:!0,tsType:{name:"number"},description:""},viewport:{required:!0,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:""},device:{required:!1,tsType:{name:"signature",type:"object",raw:'{\n  id: string;\n  label: string;\n  width: number;\n  height: number;\n  type: "desktop" | "tablet" | "mobile";\n  orientation: "portrait" | "landscape";\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}},{key:"type",value:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}],required:!0}},{key:"orientation",value:{name:"union",raw:'"portrait" | "landscape"',elements:[{name:"literal",value:'"portrait"'},{name:"literal",value:'"landscape"'}],required:!0}}]}},description:""},editor:{required:!1,tsType:{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},description:""},baselineSnap:{required:!0,tsType:{name:"boolean"},description:""},baselineStep:{required:!0,tsType:{name:"number"},description:""},toUnderlyingIndex:{required:!0,tsType:{name:"signature",type:"function",raw:"(uiIndex: number) => number",signature:{arguments:[{type:{name:"number"},name:"uiIndex"}],return:{name:"number"}}},description:""},insertParentId:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},insertIndex:{required:!1,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:""},dropAllowed:{required:!1,tsType:{name:"union",raw:"boolean | null",elements:[{name:"boolean"},{name:"null"}]},description:""},preferParentOnClick:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}},GridAreaChildren.__docgenInfo={description:"",methods:[],displayName:"GridAreaChildren",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},visibleChildren:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},underlyingChildren:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, e?: React.MouseEvent) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"e"}],return:{name:"void"}}},description:""},dispatch:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<Action>",elements:[{name:"union",raw:"| ChangeAction\n| UndoAction\n| RedoAction\n| SetGridColsAction\n| SetBreakpointsAction\n| UpdateEditorAction",elements:[{name:"union",raw:"| AddAction\n| MoveAction\n| RemoveAction\n| DuplicateAction\n| UpdateAction\n| ResizeAction\n| SetAction",elements:[{name:"signature",type:"object",raw:'{\n  type: "add";\n  component: PageComponent;\n  parentId?: string;\n  index?: number;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"add"',required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!1}}]}},{name:"signature",type:"object",raw:'{\n  type: "move";\n  from: { parentId?: string; index: number };\n  to: { parentId?: string; index: number };\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"move"',required:!0}},{key:"from",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}},{key:"to",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "remove"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"remove"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "duplicate"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"duplicate"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update";\n  id: string;\n  patch: Partial<PageComponent>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"Partial<PageComponent>",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "resize";\n  id: string;\n  width?: string;\n  height?: string;\n  left?: string;\n  top?: string;\n  right?: string;\n  bottom?: string;\n  leftDesktop?: string;\n  leftTablet?: string;\n  leftMobile?: string;\n  topDesktop?: string;\n  topTablet?: string;\n  topMobile?: string;\n  widthDesktop?: string;\n  widthTablet?: string;\n  widthMobile?: string;\n  heightDesktop?: string;\n  heightTablet?: string;\n  heightMobile?: string;\n  marginDesktop?: string;\n  marginTablet?: string;\n  marginMobile?: string;\n  paddingDesktop?: string;\n  paddingTablet?: string;\n  paddingMobile?: string;\n  [key: string]: string | undefined;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"resize"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!1}},{key:"height",value:{name:"string",required:!1}},{key:"left",value:{name:"string",required:!1}},{key:"top",value:{name:"string",required:!1}},{key:"right",value:{name:"string",required:!1}},{key:"bottom",value:{name:"string",required:!1}},{key:"leftDesktop",value:{name:"string",required:!1}},{key:"leftTablet",value:{name:"string",required:!1}},{key:"leftMobile",value:{name:"string",required:!1}},{key:"topDesktop",value:{name:"string",required:!1}},{key:"topTablet",value:{name:"string",required:!1}},{key:"topMobile",value:{name:"string",required:!1}},{key:"widthDesktop",value:{name:"string",required:!1}},{key:"widthTablet",value:{name:"string",required:!1}},{key:"widthMobile",value:{name:"string",required:!1}},{key:"heightDesktop",value:{name:"string",required:!1}},{key:"heightTablet",value:{name:"string",required:!1}},{key:"heightMobile",value:{name:"string",required:!1}},{key:"marginDesktop",value:{name:"string",required:!1}},{key:"marginTablet",value:{name:"string",required:!1}},{key:"marginMobile",value:{name:"string",required:!1}},{key:"paddingDesktop",value:{name:"string",required:!1}},{key:"paddingTablet",value:{name:"string",required:!1}},{key:"paddingMobile",value:{name:"string",required:!1}},{key:{name:"string"},value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set"; components: PageComponent[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set"',required:!0}},{key:"components",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"PageComponent[]",required:!0}}]}}]},{name:"signature",type:"object",raw:'{ type: "undo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"undo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "redo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"redo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-grid-cols"; gridCols: number }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-grid-cols"',required:!0}},{key:"gridCols",value:{name:"number",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-breakpoints"; breakpoints: { id: string; label: string; min?: number; max?: number }[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-breakpoints"',required:!0}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update-editor";\n  id: string;\n  patch: Partial<EditorFlags>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update-editor"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  hiddenDeviceIds?: string[];\n  /** Legacy single strategy (mobile); kept for backwards-compat */\n  stackStrategy?: "default" | "reverse" | "custom";\n  /** Per-device stacking strategies */\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  /** Custom orders per device (used when corresponding strategy === "custom") */\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n  global?: {\n    id: string;\n    overrides?: unknown;\n    pinned?: boolean;\n    editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n  };\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"hiddenDeviceIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Legacy single strategy (mobile); kept for backwards-compat"},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Per-device stacking strategies"},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1},description:'Custom orders per device (used when corresponding strategy === "custom")'},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}},{key:"global",value:{name:"signature",type:"object",raw:'{\n  id: string;\n  overrides?: unknown;\n  pinned?: boolean;\n  editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"overrides",value:{name:"unknown",required:!1}},{key:"pinned",value:{name:"boolean",required:!1}},{key:"editingSize",value:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]}],raw:'Record<"desktop" | "tablet" | "mobile", number | null>'}],raw:'Partial<Record<"desktop" | "tablet" | "mobile", number | null>>',required:!1}}]},required:!1}}]}}],raw:"Partial<EditorFlags>",required:!0}}]}}]}]},description:""},locale:{required:!0,tsType:{name:"Locale"},description:""},effGridEnabled:{required:!0,tsType:{name:"boolean"},description:""},effGridCols:{required:!0,tsType:{name:"number"},description:""},viewport:{required:!0,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:""},device:{required:!1,tsType:{name:"signature",type:"object",raw:'{\n  id: string;\n  label: string;\n  width: number;\n  height: number;\n  type: "desktop" | "tablet" | "mobile";\n  orientation: "portrait" | "landscape";\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}},{key:"type",value:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}],required:!0}},{key:"orientation",value:{name:"union",raw:'"portrait" | "landscape"',elements:[{name:"literal",value:'"portrait"'},{name:"literal",value:'"landscape"'}],required:!0}}]}},description:""},editor:{required:!1,tsType:{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},description:""},baselineSnap:{required:!0,tsType:{name:"boolean"},description:""},baselineStep:{required:!0,tsType:{name:"number"},description:""},toUnderlyingIndex:{required:!0,tsType:{name:"signature",type:"function",raw:"(uiIndex: number) => number",signature:{arguments:[{type:{name:"number"},name:"uiIndex"}],return:{name:"number"}}},description:""},insertParentId:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},insertIndex:{required:!1,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:""},dropAllowed:{required:!1,tsType:{name:"union",raw:"boolean | null",elements:[{name:"boolean"},{name:"null"}]},description:""},preferParentOnClick:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}},BlockChildren.__docgenInfo={description:"",methods:[],displayName:"BlockChildren",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},childComponents:{required:!1,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, e?: React.MouseEvent) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"e"}],return:{name:"void"}}},description:""},dispatch:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<Action>",elements:[{name:"union",raw:"| ChangeAction\n| UndoAction\n| RedoAction\n| SetGridColsAction\n| SetBreakpointsAction\n| UpdateEditorAction",elements:[{name:"union",raw:"| AddAction\n| MoveAction\n| RemoveAction\n| DuplicateAction\n| UpdateAction\n| ResizeAction\n| SetAction",elements:[{name:"signature",type:"object",raw:'{\n  type: "add";\n  component: PageComponent;\n  parentId?: string;\n  index?: number;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"add"',required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!1}}]}},{name:"signature",type:"object",raw:'{\n  type: "move";\n  from: { parentId?: string; index: number };\n  to: { parentId?: string; index: number };\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"move"',required:!0}},{key:"from",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}},{key:"to",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "remove"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"remove"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "duplicate"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"duplicate"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update";\n  id: string;\n  patch: Partial<PageComponent>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"Partial<PageComponent>",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "resize";\n  id: string;\n  width?: string;\n  height?: string;\n  left?: string;\n  top?: string;\n  right?: string;\n  bottom?: string;\n  leftDesktop?: string;\n  leftTablet?: string;\n  leftMobile?: string;\n  topDesktop?: string;\n  topTablet?: string;\n  topMobile?: string;\n  widthDesktop?: string;\n  widthTablet?: string;\n  widthMobile?: string;\n  heightDesktop?: string;\n  heightTablet?: string;\n  heightMobile?: string;\n  marginDesktop?: string;\n  marginTablet?: string;\n  marginMobile?: string;\n  paddingDesktop?: string;\n  paddingTablet?: string;\n  paddingMobile?: string;\n  [key: string]: string | undefined;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"resize"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!1}},{key:"height",value:{name:"string",required:!1}},{key:"left",value:{name:"string",required:!1}},{key:"top",value:{name:"string",required:!1}},{key:"right",value:{name:"string",required:!1}},{key:"bottom",value:{name:"string",required:!1}},{key:"leftDesktop",value:{name:"string",required:!1}},{key:"leftTablet",value:{name:"string",required:!1}},{key:"leftMobile",value:{name:"string",required:!1}},{key:"topDesktop",value:{name:"string",required:!1}},{key:"topTablet",value:{name:"string",required:!1}},{key:"topMobile",value:{name:"string",required:!1}},{key:"widthDesktop",value:{name:"string",required:!1}},{key:"widthTablet",value:{name:"string",required:!1}},{key:"widthMobile",value:{name:"string",required:!1}},{key:"heightDesktop",value:{name:"string",required:!1}},{key:"heightTablet",value:{name:"string",required:!1}},{key:"heightMobile",value:{name:"string",required:!1}},{key:"marginDesktop",value:{name:"string",required:!1}},{key:"marginTablet",value:{name:"string",required:!1}},{key:"marginMobile",value:{name:"string",required:!1}},{key:"paddingDesktop",value:{name:"string",required:!1}},{key:"paddingTablet",value:{name:"string",required:!1}},{key:"paddingMobile",value:{name:"string",required:!1}},{key:{name:"string"},value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set"; components: PageComponent[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set"',required:!0}},{key:"components",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"PageComponent[]",required:!0}}]}}]},{name:"signature",type:"object",raw:'{ type: "undo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"undo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "redo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"redo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-grid-cols"; gridCols: number }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-grid-cols"',required:!0}},{key:"gridCols",value:{name:"number",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-breakpoints"; breakpoints: { id: string; label: string; min?: number; max?: number }[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-breakpoints"',required:!0}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update-editor";\n  id: string;\n  patch: Partial<EditorFlags>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update-editor"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  hiddenDeviceIds?: string[];\n  /** Legacy single strategy (mobile); kept for backwards-compat */\n  stackStrategy?: "default" | "reverse" | "custom";\n  /** Per-device stacking strategies */\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  /** Custom orders per device (used when corresponding strategy === "custom") */\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n  global?: {\n    id: string;\n    overrides?: unknown;\n    pinned?: boolean;\n    editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n  };\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"hiddenDeviceIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Legacy single strategy (mobile); kept for backwards-compat"},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Per-device stacking strategies"},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1},description:'Custom orders per device (used when corresponding strategy === "custom")'},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}},{key:"global",value:{name:"signature",type:"object",raw:'{\n  id: string;\n  overrides?: unknown;\n  pinned?: boolean;\n  editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"overrides",value:{name:"unknown",required:!1}},{key:"pinned",value:{name:"boolean",required:!1}},{key:"editingSize",value:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]}],raw:'Record<"desktop" | "tablet" | "mobile", number | null>'}],raw:'Partial<Record<"desktop" | "tablet" | "mobile", number | null>>',required:!1}}]},required:!1}}]}}],raw:"Partial<EditorFlags>",required:!0}}]}}]}]},description:""},locale:{required:!0,tsType:{name:"Locale"},description:""},gridEnabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},gridCols:{required:!0,tsType:{name:"number"},description:""},viewport:{required:!0,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:""},device:{required:!1,tsType:{name:"signature",type:"object",raw:'{\n  id: string;\n  label: string;\n  width: number;\n  height: number;\n  type: "desktop" | "tablet" | "mobile";\n  orientation: "portrait" | "landscape";\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}},{key:"type",value:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}],required:!0}},{key:"orientation",value:{name:"union",raw:'"portrait" | "landscape"',elements:[{name:"literal",value:'"portrait"'},{name:"literal",value:'"landscape"'}],required:!0}}]}},description:""},isOver:{required:!0,tsType:{name:"boolean"},description:""},setDropRef:{required:!0,tsType:{name:"signature",type:"function",raw:"(node: HTMLDivElement | null) => void",signature:{arguments:[{type:{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}]},name:"node"}],return:{name:"void"}}},description:""},editor:{required:!1,tsType:{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},description:""},baselineSnap:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},baselineStep:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"8",computed:!1}},dropAllowed:{required:!1,tsType:{name:"union",raw:"boolean | null",elements:[{name:"boolean"},{name:"null"}]},description:""},insertParentId:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},insertIndex:{required:!1,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:""},preferParentOnClick:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}},CanvasOverlays.__docgenInfo={description:"",methods:[],displayName:"CanvasOverlays",props:{guides:{required:!0,tsType:{name:"signature",type:"object",raw:"{ x: number | null; y: number | null }",signature:{properties:[{key:"x",value:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}],required:!0}},{key:"y",value:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}],required:!0}}]}},description:""},distances:{required:!0,tsType:{name:"signature",type:"object",raw:"{ x: number | null; y: number | null }",signature:{properties:[{key:"x",value:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}],required:!0}},{key:"y",value:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}],required:!0}}]}},description:""},spacingOverlay:{required:!1,tsType:{name:"union",raw:"{ top: number; left: number; width: number; height: number } | null",elements:[{name:"signature",type:"object",raw:"{ top: number; left: number; width: number; height: number }",signature:{properties:[{key:"top",value:{name:"number",required:!0}},{key:"left",value:{name:"number",required:!0}},{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]}},{name:"null"}]},description:""},showSizePosition:{required:!0,tsType:{name:"boolean"},description:""},overlayWidth:{required:!0,tsType:{name:"number"},description:""},overlayHeight:{required:!0,tsType:{name:"number"},description:""},overlayLeft:{required:!0,tsType:{name:"number"},description:""},overlayTop:{required:!0,tsType:{name:"number"},description:""},rotating:{required:!0,tsType:{name:"boolean"},description:""},angle:{required:!0,tsType:{name:"number"},description:""}}},DeleteButton.__docgenInfo={description:"",methods:[],displayName:"DeleteButton",props:{locked:{required:!0,tsType:{name:"boolean"},description:""},onRemove:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}},DragHandle.__docgenInfo={description:"",methods:[],displayName:"DragHandle",props:{attributes:{required:!0,tsType:{name:"unknown"},description:""},listeners:{required:!0,tsType:{name:"union",raw:'import("@dnd-kit/core/dist/hooks/utilities").SyntheticListenerMap | undefined',elements:[{name:"unknown"},{name:"undefined"}]},description:""},isDragging:{required:!0,tsType:{name:"boolean"},description:""},locked:{required:!0,tsType:{name:"boolean"},description:""},onPointerDown:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: React.PointerEvent) => void",signature:{arguments:[{type:{name:"ReactPointerEvent",raw:"React.PointerEvent"},name:"e"}],return:{name:"void"}}},description:""}}},HiddenBadge.__docgenInfo={description:"",methods:[],displayName:"HiddenBadge",props:{hiddenList:{required:!0,tsType:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]'},description:""},isHiddenHere:{required:!0,tsType:{name:"boolean"},description:""},viewport:{required:!0,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:""},componentId:{required:!0,tsType:{name:"string"},description:""},editor:{required:!1,tsType:{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},description:""},dispatch:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<Action>",elements:[{name:"union",raw:"| ChangeAction\n| UndoAction\n| RedoAction\n| SetGridColsAction\n| SetBreakpointsAction\n| UpdateEditorAction",elements:[{name:"union",raw:"| AddAction\n| MoveAction\n| RemoveAction\n| DuplicateAction\n| UpdateAction\n| ResizeAction\n| SetAction",elements:[{name:"signature",type:"object",raw:'{\n  type: "add";\n  component: PageComponent;\n  parentId?: string;\n  index?: number;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"add"',required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!1}}]}},{name:"signature",type:"object",raw:'{\n  type: "move";\n  from: { parentId?: string; index: number };\n  to: { parentId?: string; index: number };\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"move"',required:!0}},{key:"from",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}},{key:"to",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "remove"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"remove"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "duplicate"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"duplicate"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update";\n  id: string;\n  patch: Partial<PageComponent>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"Partial<PageComponent>",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "resize";\n  id: string;\n  width?: string;\n  height?: string;\n  left?: string;\n  top?: string;\n  right?: string;\n  bottom?: string;\n  leftDesktop?: string;\n  leftTablet?: string;\n  leftMobile?: string;\n  topDesktop?: string;\n  topTablet?: string;\n  topMobile?: string;\n  widthDesktop?: string;\n  widthTablet?: string;\n  widthMobile?: string;\n  heightDesktop?: string;\n  heightTablet?: string;\n  heightMobile?: string;\n  marginDesktop?: string;\n  marginTablet?: string;\n  marginMobile?: string;\n  paddingDesktop?: string;\n  paddingTablet?: string;\n  paddingMobile?: string;\n  [key: string]: string | undefined;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"resize"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!1}},{key:"height",value:{name:"string",required:!1}},{key:"left",value:{name:"string",required:!1}},{key:"top",value:{name:"string",required:!1}},{key:"right",value:{name:"string",required:!1}},{key:"bottom",value:{name:"string",required:!1}},{key:"leftDesktop",value:{name:"string",required:!1}},{key:"leftTablet",value:{name:"string",required:!1}},{key:"leftMobile",value:{name:"string",required:!1}},{key:"topDesktop",value:{name:"string",required:!1}},{key:"topTablet",value:{name:"string",required:!1}},{key:"topMobile",value:{name:"string",required:!1}},{key:"widthDesktop",value:{name:"string",required:!1}},{key:"widthTablet",value:{name:"string",required:!1}},{key:"widthMobile",value:{name:"string",required:!1}},{key:"heightDesktop",value:{name:"string",required:!1}},{key:"heightTablet",value:{name:"string",required:!1}},{key:"heightMobile",value:{name:"string",required:!1}},{key:"marginDesktop",value:{name:"string",required:!1}},{key:"marginTablet",value:{name:"string",required:!1}},{key:"marginMobile",value:{name:"string",required:!1}},{key:"paddingDesktop",value:{name:"string",required:!1}},{key:"paddingTablet",value:{name:"string",required:!1}},{key:"paddingMobile",value:{name:"string",required:!1}},{key:{name:"string"},value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set"; components: PageComponent[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set"',required:!0}},{key:"components",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"PageComponent[]",required:!0}}]}}]},{name:"signature",type:"object",raw:'{ type: "undo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"undo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "redo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"redo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-grid-cols"; gridCols: number }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-grid-cols"',required:!0}},{key:"gridCols",value:{name:"number",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-breakpoints"; breakpoints: { id: string; label: string; min?: number; max?: number }[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-breakpoints"',required:!0}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update-editor";\n  id: string;\n  patch: Partial<EditorFlags>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update-editor"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  hiddenDeviceIds?: string[];\n  /** Legacy single strategy (mobile); kept for backwards-compat */\n  stackStrategy?: "default" | "reverse" | "custom";\n  /** Per-device stacking strategies */\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  /** Custom orders per device (used when corresponding strategy === "custom") */\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n  global?: {\n    id: string;\n    overrides?: unknown;\n    pinned?: boolean;\n    editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n  };\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"hiddenDeviceIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Legacy single strategy (mobile); kept for backwards-compat"},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Per-device stacking strategies"},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1},description:'Custom orders per device (used when corresponding strategy === "custom")'},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}},{key:"global",value:{name:"signature",type:"object",raw:'{\n  id: string;\n  overrides?: unknown;\n  pinned?: boolean;\n  editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"overrides",value:{name:"unknown",required:!1}},{key:"pinned",value:{name:"boolean",required:!1}},{key:"editingSize",value:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]}],raw:'Record<"desktop" | "tablet" | "mobile", number | null>'}],raw:'Partial<Record<"desktop" | "tablet" | "mobile", number | null>>',required:!1}}]},required:!1}}]}}],raw:"Partial<EditorFlags>",required:!0}}]}}]}]},description:""}}},ImageFocalOverlay.__docgenInfo={description:"",methods:[],displayName:"ImageFocalOverlay",props:{value:{required:!1,tsType:{name:"signature",type:"object",raw:"{ x: number; y: number }",signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]}},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(next: FocalPoint) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ x: number; y: number }",signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]}},name:"next"}],return:{name:"void"}}},description:""},visible:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const PRESETS=[{label:"Auto",value:void 0},{label:"1:1",value:"1:1"},{label:"3:2",value:"3:2"},{label:"4:3",value:"4:3"},{label:"16:9",value:"16:9"}];function ImageAspectToolbar({value,onChange}){return(0,jsx_runtime.jsx)("div",{className:"relative",children:(0,jsx_runtime.jsxs)("div",{className:"absolute end-1 top-1 flex items-center gap-1 rounded bg-black/60 p-1 text-white shadow backdrop-blur-sm dark:bg-white/70 dark:text-black",children:[PRESETS.map(p=>(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:p.value===value?"default":"outline",className:"h-6 px-2 text-xs",onClick:()=>onChange(p.value),children:p.label},p.label)),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",className:"h-6 px-2 text-xs",onClick:()=>onChange(function flip(aspect){if(!aspect)return;const[w,h]=aspect.split(":").map(n=>Number(n));return!isFinite(w)||!isFinite(h)||w<=0||h<=0?aspect:`${h}:${w}`}(value)),title:"Flip orientation","aria-label":"Flip orientation",children:"↔︎"})]})})}function toAspectString(ratio,max=100){let best={err:Number.POSITIVE_INFINITY,w:1,h:1};for(let h=1;h<=max;h++){const w=Math.max(1,Math.round(ratio*h)),err=Math.abs(ratio-w/h);err<best.err&&(best={err,w,h})}const d=function gcd(a,b){let x=Math.abs(a),y=Math.abs(b);for(;y;){const t=y;y=x%y,x=t}return x||1}(best.w,best.h);return`${Math.max(1,Math.round(best.w/d))}:${Math.max(1,Math.round(best.h/d))}`}function ImageCropOverlay({value,onChange,visible=!1}){var _wrapRef_current;const wrapRef=(0,react.useRef)(null),[box,setBox]=(0,react.useState)({w:100,h:100}),[dragging,setDragging]=(0,react.useState)(null),t=(0,src.c3)(),targetRatio=(0,react.useMemo)(()=>function parseAspect(aspect){if(!aspect)return;const[w,h]=String(aspect).split(":").map(n=>Number(n));return!isFinite(w)||!isFinite(h)||w<=0||h<=0?void 0:w/h}(value),[value]);(0,react.useEffect)(()=>{var _wrapRef_current;if(!visible)return;const el=null===(_wrapRef_current=wrapRef.current)||void 0===_wrapRef_current?void 0:_wrapRef_current.parentElement;if(!el)return;const W=el.clientWidth||0,H=el.clientHeight||0;if(W<=0||H<=0)return;const r=null!=targetRatio?targetRatio:W/Math.max(1,H),w=Math.min(W,Math.max(40,Math.round(Math.min(W,H*r)))),h=Math.max(40,Math.round(w/Math.max(.01,r)));setBox({w,h})},[targetRatio,visible]);const commit=(0,react.useCallback)((w,h)=>{const ratio=Math.max(.01,w/Math.max(1,h));onChange(toAspectString(ratio))},[onChange]),start=(0,react.useCallback)((e,mode)=>{var _wrapRef_current;e.preventDefault(),e.stopPropagation();const root=null===(_wrapRef_current=wrapRef.current)||void 0===_wrapRef_current?void 0:_wrapRef_current.parentElement;if(!root)return;const W=root.clientWidth||0,H=root.clientHeight||0,startX=e.clientX,startY=e.clientY,init={...box};setDragging(mode);const lockedRatio=init.w/Math.max(1,init.h),onMove=ev=>{const dx=ev.clientX-startX,dy=ev.clientY-startY,shift=!!ev.shiftKey;let w=init.w,h=init.h;"e"!==mode&&"se"!==mode||(w=Math.min(W,Math.max(40,init.w+dx))),"s"!==mode&&"se"!==mode||(h=Math.min(H,Math.max(40,init.h+dy))),shift&&("e"===mode?h=Math.max(40,Math.min(H,Math.round(w/Math.max(.01,lockedRatio)))):"s"===mode?w=Math.max(40,Math.min(W,Math.round(h*lockedRatio))):h=Math.max(40,Math.min(H,Math.round(w/Math.max(.01,lockedRatio))))),setBox({w,h}),commit(w,h)},onUp=()=>{setDragging(null);try{window.removeEventListener("pointermove",onMove)}catch(e){}try{window.removeEventListener("pointerup",onUp)}catch(e){}};window.addEventListener("pointermove",onMove),window.addEventListener("pointerup",onUp,{once:!0})},[box,commit]);if(!visible)return null;const el=null===(_wrapRef_current=wrapRef.current)||void 0===_wrapRef_current?void 0:_wrapRef_current.parentElement,W=(null==el?void 0:el.clientWidth)||0,H=(null==el?void 0:el.clientHeight)||0,left=Math.max(0,Math.round((W-box.w)/2)),top=Math.max(0,Math.round((H-box.h)/2));return(0,jsx_runtime.jsxs)("div",{ref:wrapRef,className:"pointer-events-none absolute inset-0 select-none",children:[(0,jsx_runtime.jsx)("div",{className:"absolute inset-0 bg-black/35","aria-hidden":"true"}),(0,jsx_runtime.jsxs)("div",{className:"absolute border-2 border-sky-400/90",style:{left,top,width:box.w,height:box.h},children:[(0,jsx_runtime.jsx)("div",{className:"pointer-events-auto absolute -end-1 top-1/2 h-2 w-2 -translate-y-1/2 cursor-ew-resize rounded bg-sky-400",onPointerDown:e=>start(e,"e"),title:String(t("cms.builder.crop.dragHoriz"))}),(0,jsx_runtime.jsx)("div",{className:"pointer-events-auto absolute start-1/2 -bottom-1 h-2 w-2 -translate-x-1/2 cursor-ns-resize rounded bg-sky-400",onPointerDown:e=>start(e,"s"),title:String(t("cms.builder.crop.dragVert"))}),(0,jsx_runtime.jsx)("div",{className:"pointer-events-auto absolute -end-1 -bottom-1 h-3 w-3 cursor-nwse-resize rounded bg-sky-500",onPointerDown:e=>start(e,"se"),title:String(t("cms.builder.crop.dragAny"))}),(0,jsx_runtime.jsxs)("div",{className:"pointer-events-none absolute -top-5 start-0 flex items-center gap-1",children:[(0,jsx_runtime.jsxs)("div",{className:"pointer-events-none rounded bg-black/70 px-1 text-xs text-white shadow dark:bg-white/70 dark:text-black",children:[toAspectString(Math.max(.01,box.w/Math.max(1,box.h))),dragging?t("cms.builder.crop.draggingSuffix"):""]}),(0,jsx_runtime.jsx)("button",{type:"button",className:"pointer-events-auto inline-flex min-h-10 min-w-10 items-center justify-center rounded bg-black/60 px-1 text-xs text-white shadow hover:bg-black/70 dark:bg-white/70 dark:text-black dark:hover:bg-white",onClick:e=>{e.preventDefault(),e.stopPropagation(),onChange(void 0)},title:String(t("cms.builder.crop.resetTitle")),children:t("actions.reset")}),(0,jsx_runtime.jsx)("div",{className:"pointer-events-none rounded bg-black/50 px-1 text-xs text-white dark:bg-white/60 dark:text-black",children:t("cms.builder.crop.shiftLock")})]})]})]})}function ImageEditingOverlays({enabled,component,dispatch}){if(!enabled||"Image"!==component.type)return null;const c=component;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ImageFocalOverlay,{value:c.focalPoint,visible:!0,onChange:fp=>dispatch({type:"update",id:c.id,patch:{focalPoint:fp}})}),(0,jsx_runtime.jsx)(ImageAspectToolbar,{value:c.cropAspect,onChange:next=>dispatch({type:"update",id:c.id,patch:{cropAspect:next}})}),(0,jsx_runtime.jsx)(ImageCropOverlay,{value:c.cropAspect,visible:!0,onChange:next=>dispatch({type:"update",id:c.id,patch:{cropAspect:next}})})]})}function ContextMenu({x,y,open,onClose,items}){const style=(0,react.useMemo)(()=>({left:x,top:y}),[x,y]),actionable=(0,react.useMemo)(()=>items.map((it,idx)=>({it,idx})).filter(({it})=>!("type"in it&&"separator"===it.type||it.disabled)),[items]),[activePos,setActivePos]=(0,react.useState)(0),rootRef=(0,react.useRef)(null);(0,react.useEffect)(()=>{if(!open)return;const handle=e=>{const target=e.target;(null==target?void 0:target.closest("[data-pb-contextmenu]"))||(null==target?void 0:target.closest("[data-pb-contextmenu-trigger]"))||onClose()},onEsc=e=>{"Escape"===e.key&&onClose()};return window.addEventListener("mousedown",handle),window.addEventListener("contextmenu",handle),window.addEventListener("keydown",onEsc),()=>{window.removeEventListener("mousedown",handle),window.removeEventListener("contextmenu",handle),window.removeEventListener("keydown",onEsc)}},[open,onClose]),(0,react.useEffect)(()=>{var _actionable_firstPos,_rootRef_current;if(!open)return;var _actionable_firstPos_idx;const idx=null!==(_actionable_firstPos_idx=null===(_actionable_firstPos=actionable[0])||void 0===_actionable_firstPos?void 0:_actionable_firstPos.idx)&&void 0!==_actionable_firstPos_idx?_actionable_firstPos_idx:-1;setActivePos(0);const el=idx>=0?null===(_rootRef_current=rootRef.current)||void 0===_rootRef_current?void 0:_rootRef_current.querySelector(`[data-index='${idx}']`):null;null==el||el.focus()},[open,actionable]);return open?(0,jsx_runtime.jsx)("div",{className:"relative",children:(0,jsx_runtime.jsx)("div",{className:"absolute min-w-40 overflow-hidden rounded border bg-popover p-1 text-popover-foreground shadow-elevation-2",style,role:"menu","data-pb-contextmenu":!0,tabIndex:-1,ref:rootRef,onKeyDown:e=>{if(!open)return;const max=actionable.length-1;if("ArrowDown"===e.key){var _actionable_nextPos,_rootRef_current;e.preventDefault();const nextPos=activePos>=max?0:activePos+1;var _actionable_nextPos_idx;setActivePos(nextPos);const nextIdx=null!==(_actionable_nextPos_idx=null===(_actionable_nextPos=actionable[nextPos])||void 0===_actionable_nextPos?void 0:_actionable_nextPos.idx)&&void 0!==_actionable_nextPos_idx?_actionable_nextPos_idx:-1,btn=nextIdx>=0?null===(_rootRef_current=rootRef.current)||void 0===_rootRef_current?void 0:_rootRef_current.querySelector(`[data-index='${nextIdx}']`):null;null==btn||btn.focus()}else if("ArrowUp"===e.key){var _actionable_prevPos,_rootRef_current1;e.preventDefault();const prevPos=activePos<=0?max:activePos-1;var _actionable_prevPos_idx;setActivePos(prevPos);const prevIdx=null!==(_actionable_prevPos_idx=null===(_actionable_prevPos=actionable[prevPos])||void 0===_actionable_prevPos?void 0:_actionable_prevPos.idx)&&void 0!==_actionable_prevPos_idx?_actionable_prevPos_idx:-1,btn=prevIdx>=0?null===(_rootRef_current1=rootRef.current)||void 0===_rootRef_current1?void 0:_rootRef_current1.querySelector(`[data-index='${prevIdx}']`):null;null==btn||btn.focus()}else if("Enter"===e.key){e.preventDefault();const entry=actionable[activePos],item=null==entry?void 0:entry.it;var _item_onClick;if(item)null===(_item_onClick=item.onClick)||void 0===_item_onClick||_item_onClick.call(item),onClose()}else"Escape"===e.key&&(e.preventDefault(),onClose())},children:(()=>{let sepCounter=0;return items.map((i,idx)=>{var _actionable_activePos;if("separator"===i.type)return sepCounter+=1,(0,jsx_runtime.jsx)("div",{role:"separator",className:"my-1 h-px bg-border"},`sep-${sepCounter}`);const item=i,isActive=(null===(_actionable_activePos=actionable[activePos])||void 0===_actionable_activePos?void 0:_actionable_activePos.idx)===idx,btnClass="w-full rounded px-2 py-1 text-left text-sm hover:bg-muted focus:outline-none "+(item.disabled?"cursor-not-allowed opacity-50":isActive?"ring-1 ring-primary":"");return(0,jsx_runtime.jsx)("button",{type:"button",className:btnClass,onClick:()=>{var _item_onClick;item.disabled||(null===(_item_onClick=item.onClick)||void 0===_item_onClick||_item_onClick.call(item),onClose())},role:"menuitem",disabled:item.disabled,"data-index":idx,children:item.label},item.label)})})()})}):null}ImageAspectToolbar.__docgenInfo={description:"",methods:[],displayName:"ImageAspectToolbar",props:{value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(next?: string) => void",signature:{arguments:[{type:{name:"string"},name:"next"}],return:{name:"void"}}},description:""}}},ImageCropOverlay.__docgenInfo={description:"",methods:[],displayName:"ImageCropOverlay",props:{value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(next?: string) => void",signature:{arguments:[{type:{name:"string"},name:"next"}],return:{name:"void"}}},description:""},visible:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}},ImageEditingOverlays.__docgenInfo={description:"",methods:[],displayName:"ImageEditingOverlays",props:{enabled:{required:!0,tsType:{name:"boolean"},description:""},component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},dispatch:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<Action>",elements:[{name:"union",raw:"| ChangeAction\n| UndoAction\n| RedoAction\n| SetGridColsAction\n| SetBreakpointsAction\n| UpdateEditorAction",elements:[{name:"union",raw:"| AddAction\n| MoveAction\n| RemoveAction\n| DuplicateAction\n| UpdateAction\n| ResizeAction\n| SetAction",elements:[{name:"signature",type:"object",raw:'{\n  type: "add";\n  component: PageComponent;\n  parentId?: string;\n  index?: number;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"add"',required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!1}}]}},{name:"signature",type:"object",raw:'{\n  type: "move";\n  from: { parentId?: string; index: number };\n  to: { parentId?: string; index: number };\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"move"',required:!0}},{key:"from",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}},{key:"to",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "remove"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"remove"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "duplicate"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"duplicate"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update";\n  id: string;\n  patch: Partial<PageComponent>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"Partial<PageComponent>",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "resize";\n  id: string;\n  width?: string;\n  height?: string;\n  left?: string;\n  top?: string;\n  right?: string;\n  bottom?: string;\n  leftDesktop?: string;\n  leftTablet?: string;\n  leftMobile?: string;\n  topDesktop?: string;\n  topTablet?: string;\n  topMobile?: string;\n  widthDesktop?: string;\n  widthTablet?: string;\n  widthMobile?: string;\n  heightDesktop?: string;\n  heightTablet?: string;\n  heightMobile?: string;\n  marginDesktop?: string;\n  marginTablet?: string;\n  marginMobile?: string;\n  paddingDesktop?: string;\n  paddingTablet?: string;\n  paddingMobile?: string;\n  [key: string]: string | undefined;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"resize"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!1}},{key:"height",value:{name:"string",required:!1}},{key:"left",value:{name:"string",required:!1}},{key:"top",value:{name:"string",required:!1}},{key:"right",value:{name:"string",required:!1}},{key:"bottom",value:{name:"string",required:!1}},{key:"leftDesktop",value:{name:"string",required:!1}},{key:"leftTablet",value:{name:"string",required:!1}},{key:"leftMobile",value:{name:"string",required:!1}},{key:"topDesktop",value:{name:"string",required:!1}},{key:"topTablet",value:{name:"string",required:!1}},{key:"topMobile",value:{name:"string",required:!1}},{key:"widthDesktop",value:{name:"string",required:!1}},{key:"widthTablet",value:{name:"string",required:!1}},{key:"widthMobile",value:{name:"string",required:!1}},{key:"heightDesktop",value:{name:"string",required:!1}},{key:"heightTablet",value:{name:"string",required:!1}},{key:"heightMobile",value:{name:"string",required:!1}},{key:"marginDesktop",value:{name:"string",required:!1}},{key:"marginTablet",value:{name:"string",required:!1}},{key:"marginMobile",value:{name:"string",required:!1}},{key:"paddingDesktop",value:{name:"string",required:!1}},{key:"paddingTablet",value:{name:"string",required:!1}},{key:"paddingMobile",value:{name:"string",required:!1}},{key:{name:"string"},value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set"; components: PageComponent[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set"',required:!0}},{key:"components",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"PageComponent[]",required:!0}}]}}]},{name:"signature",type:"object",raw:'{ type: "undo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"undo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "redo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"redo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-grid-cols"; gridCols: number }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-grid-cols"',required:!0}},{key:"gridCols",value:{name:"number",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-breakpoints"; breakpoints: { id: string; label: string; min?: number; max?: number }[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-breakpoints"',required:!0}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update-editor";\n  id: string;\n  patch: Partial<EditorFlags>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update-editor"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  hiddenDeviceIds?: string[];\n  /** Legacy single strategy (mobile); kept for backwards-compat */\n  stackStrategy?: "default" | "reverse" | "custom";\n  /** Per-device stacking strategies */\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  /** Custom orders per device (used when corresponding strategy === "custom") */\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n  global?: {\n    id: string;\n    overrides?: unknown;\n    pinned?: boolean;\n    editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n  };\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"hiddenDeviceIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Legacy single strategy (mobile); kept for backwards-compat"},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Per-device stacking strategies"},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1},description:'Custom orders per device (used when corresponding strategy === "custom")'},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}},{key:"global",value:{name:"signature",type:"object",raw:'{\n  id: string;\n  overrides?: unknown;\n  pinned?: boolean;\n  editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"overrides",value:{name:"unknown",required:!1}},{key:"pinned",value:{name:"boolean",required:!1}},{key:"editingSize",value:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]}],raw:'Record<"desktop" | "tablet" | "mobile", number | null>'}],raw:'Partial<Record<"desktop" | "tablet" | "mobile", number | null>>',required:!1}}]},required:!1}}]}}],raw:"Partial<EditorFlags>",required:!0}}]}}]}]},description:""}}},ContextMenu.__docgenInfo={description:"Lightweight context menu rendered at fixed page coordinates.\nCloses on outside click, blur or Escape.",methods:[],displayName:"ContextMenu",props:{x:{required:!0,tsType:{name:"number"},description:""},y:{required:!0,tsType:{name:"number"},description:""},open:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},items:{required:!0,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"(MenuItem | MenuSeparator)[]"},description:""}}};var atoms=__webpack_require__("../../packages/ui/src/components/atoms/index.ts");function ZIndexMenu({componentId,currentZ,dispatch}){const t=(0,src.c3)();return(0,jsx_runtime.jsx)("div",{className:"absolute top-1 end-10",children:(0,jsx_runtime.jsxs)(shadcn.rI,{children:[(0,jsx_runtime.jsx)(shadcn.ty,{asChild:!0,children:(0,jsx_runtime.jsx)(atoms.m_,{text:t("pb.menu.layerOrder"),children:(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",className:"h-6 px-2 py-1 text-xs","aria-label":t("pb.menu.layerOrder"),children:"⋯"})})}),(0,jsx_runtime.jsxs)(shadcn.SQ,{align:"end",className:"w-40",children:[(0,jsx_runtime.jsx)(shadcn._2,{onClick:e=>{e.stopPropagation();dispatch({type:"update-editor",id:componentId,patch:{zIndex:999}})},children:t("pb.menu.bringToFront")}),(0,jsx_runtime.jsx)(shadcn._2,{onClick:e=>{e.stopPropagation();dispatch({type:"update-editor",id:componentId,patch:{zIndex:0}})},children:t("pb.menu.sendToBack")}),(0,jsx_runtime.jsx)(shadcn._2,{onClick:e=>{e.stopPropagation();dispatch({type:"update-editor",id:componentId,patch:{zIndex:(null!=currentZ?currentZ:0)+1}})},children:t("pb.menu.forward")}),(0,jsx_runtime.jsx)(shadcn._2,{onClick:e=>{e.stopPropagation();const z=null!=currentZ?currentZ:0,patch={zIndex:Math.max(0,z-1)};dispatch({type:"update-editor",id:componentId,patch})},children:t("pb.menu.backward")})]})]})})}function buildBlockKeyDownHandler({locked,inlineEditing,containerRef,gridEnabled,gridCols,nudgeSpacingByKeyboard,nudgeResizeByKeyboard,parentSlots,parentType,currSlotKey,componentId,dispatch,viewport:_viewport,t}){return e=>{if(locked||inlineEditing)return;const key=e.key.toLowerCase();if("arrowleft"===key||"arrowright"===key||"arrowup"===key||"arrowdown"===key){if(e.ctrlKey||e.metaKey){e.preventDefault(),e.stopPropagation();const el=containerRef.current;var _el_parentElement;const parent=null!==(_el_parentElement=null==el?void 0:el.parentElement)&&void 0!==_el_parentElement?_el_parentElement:null,unit=gridEnabled&&parent?parent.offsetWidth/gridCols:void 0,step=null!=unit?unit:e.altKey?10:1,type=e.altKey?"padding":"margin";nudgeSpacingByKeyboard(type,"arrowleft"===key?"left":"arrowright"===key?"right":"arrowup"===key?"top":"bottom","arrowleft"===key||"arrowup"===key?-step:step)}if(e.shiftKey){e.preventDefault(),e.stopPropagation();const el=containerRef.current;var _el_parentElement1;const parent=null!==(_el_parentElement1=null==el?void 0:el.parentElement)&&void 0!==_el_parentElement1?_el_parentElement1:null,unit=gridEnabled&&parent?parent.offsetWidth/gridCols:void 0,step=null!=unit?unit:e.altKey?10:1;nudgeResizeByKeyboard("arrowleft"===key?"left":"arrowright"===key?"right":"arrowup"===key?"up":"down",step)}if(e.altKey&&!e.metaKey&&!e.ctrlKey&&("arrowleft"===key||"arrowright"===key)){const count="number"==typeof parentSlots?parentSlots:void 0;if(("Tabs"===parentType||"TabsAccordionContainer"===parentType)&&count&&count>0){e.preventDefault(),e.stopPropagation();const raw=currSlotKey,curr=null==raw||Number.isNaN(Number(raw))?0:Number(raw),delta="arrowleft"===key?-1:1,next=Math.max(0,Math.min(count-1,curr+delta));if(next!==curr){dispatch({type:"update",id:componentId,patch:{slotKey:String(next)}});try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:String(t?t("pb.toast.movedToTab",{tab:next+1}):`Moved to tab ${next+1}`)}))}catch(e){}}}}}}}ZIndexMenu.__docgenInfo={description:"",methods:[],displayName:"ZIndexMenu",props:{componentId:{required:!0,tsType:{name:"string"},description:""},currentZ:{required:!1,tsType:{name:"union",raw:"number | undefined",elements:[{name:"number"},{name:"undefined"}]},description:""},dispatch:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<Action>",elements:[{name:"union",raw:"| ChangeAction\n| UndoAction\n| RedoAction\n| SetGridColsAction\n| SetBreakpointsAction\n| UpdateEditorAction",elements:[{name:"union",raw:"| AddAction\n| MoveAction\n| RemoveAction\n| DuplicateAction\n| UpdateAction\n| ResizeAction\n| SetAction",elements:[{name:"signature",type:"object",raw:'{\n  type: "add";\n  component: PageComponent;\n  parentId?: string;\n  index?: number;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"add"',required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!1}}]}},{name:"signature",type:"object",raw:'{\n  type: "move";\n  from: { parentId?: string; index: number };\n  to: { parentId?: string; index: number };\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"move"',required:!0}},{key:"from",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}},{key:"to",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "remove"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"remove"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "duplicate"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"duplicate"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update";\n  id: string;\n  patch: Partial<PageComponent>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"Partial<PageComponent>",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "resize";\n  id: string;\n  width?: string;\n  height?: string;\n  left?: string;\n  top?: string;\n  right?: string;\n  bottom?: string;\n  leftDesktop?: string;\n  leftTablet?: string;\n  leftMobile?: string;\n  topDesktop?: string;\n  topTablet?: string;\n  topMobile?: string;\n  widthDesktop?: string;\n  widthTablet?: string;\n  widthMobile?: string;\n  heightDesktop?: string;\n  heightTablet?: string;\n  heightMobile?: string;\n  marginDesktop?: string;\n  marginTablet?: string;\n  marginMobile?: string;\n  paddingDesktop?: string;\n  paddingTablet?: string;\n  paddingMobile?: string;\n  [key: string]: string | undefined;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"resize"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!1}},{key:"height",value:{name:"string",required:!1}},{key:"left",value:{name:"string",required:!1}},{key:"top",value:{name:"string",required:!1}},{key:"right",value:{name:"string",required:!1}},{key:"bottom",value:{name:"string",required:!1}},{key:"leftDesktop",value:{name:"string",required:!1}},{key:"leftTablet",value:{name:"string",required:!1}},{key:"leftMobile",value:{name:"string",required:!1}},{key:"topDesktop",value:{name:"string",required:!1}},{key:"topTablet",value:{name:"string",required:!1}},{key:"topMobile",value:{name:"string",required:!1}},{key:"widthDesktop",value:{name:"string",required:!1}},{key:"widthTablet",value:{name:"string",required:!1}},{key:"widthMobile",value:{name:"string",required:!1}},{key:"heightDesktop",value:{name:"string",required:!1}},{key:"heightTablet",value:{name:"string",required:!1}},{key:"heightMobile",value:{name:"string",required:!1}},{key:"marginDesktop",value:{name:"string",required:!1}},{key:"marginTablet",value:{name:"string",required:!1}},{key:"marginMobile",value:{name:"string",required:!1}},{key:"paddingDesktop",value:{name:"string",required:!1}},{key:"paddingTablet",value:{name:"string",required:!1}},{key:"paddingMobile",value:{name:"string",required:!1}},{key:{name:"string"},value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set"; components: PageComponent[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set"',required:!0}},{key:"components",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"PageComponent[]",required:!0}}]}}]},{name:"signature",type:"object",raw:'{ type: "undo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"undo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "redo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"redo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-grid-cols"; gridCols: number }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-grid-cols"',required:!0}},{key:"gridCols",value:{name:"number",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-breakpoints"; breakpoints: { id: string; label: string; min?: number; max?: number }[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-breakpoints"',required:!0}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update-editor";\n  id: string;\n  patch: Partial<EditorFlags>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update-editor"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  hiddenDeviceIds?: string[];\n  /** Legacy single strategy (mobile); kept for backwards-compat */\n  stackStrategy?: "default" | "reverse" | "custom";\n  /** Per-device stacking strategies */\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  /** Custom orders per device (used when corresponding strategy === "custom") */\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n  global?: {\n    id: string;\n    overrides?: unknown;\n    pinned?: boolean;\n    editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n  };\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"hiddenDeviceIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Legacy single strategy (mobile); kept for backwards-compat"},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Per-device stacking strategies"},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1},description:'Custom orders per device (used when corresponding strategy === "custom")'},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}},{key:"global",value:{name:"signature",type:"object",raw:'{\n  id: string;\n  overrides?: unknown;\n  pinned?: boolean;\n  editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"overrides",value:{name:"unknown",required:!1}},{key:"pinned",value:{name:"boolean",required:!1}},{key:"editingSize",value:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]}],raw:'Record<"desktop" | "tablet" | "mobile", number | null>'}],raw:'Partial<Record<"desktop" | "tablet" | "mobile", number | null>>',required:!1}}]},required:!1}}]}}],raw:"Partial<EditorFlags>",required:!0}}]}}]}]},description:""}}};const BlockItem=(0,react.memo)(function BlockItemComponent({component,index,parentId,selectedIds,parentType,parentSlots,onSelect,onRemove,dispatch,locale,gridEnabled=!1,gridCols,viewport,device,editor,zoom=1,baselineSnap=!1,baselineStep=8,dropAllowed,insertParentId,insertIndex,preferParentOnClick=!1}){const t=(0,src.c3)(),{selected,flags,effLocked,effZIndex,hiddenList,isHiddenHere}=function useBlockItemMetadata({component,selectedIds,editor,viewport}){var _editor_component_id;const selected=selectedIds.includes(component.id),flags=(0,react.useMemo)(()=>{var _editor_component_id;return null!==(_editor_component_id=null==editor?void 0:editor[component.id])&&void 0!==_editor_component_id?_editor_component_id:{}},[editor,component.id]);var _flags_locked,_flags_zIndex,_editor_component_id_hidden;return{selected,flags,effLocked:null!==(_flags_locked=flags.locked)&&void 0!==_flags_locked&&_flags_locked,effZIndex:null!==(_flags_zIndex=flags.zIndex)&&void 0!==_flags_zIndex?_flags_zIndex:component.zIndex,hiddenList:null!==(_editor_component_id_hidden=null==editor||null===(_editor_component_id=editor[component.id])||void 0===_editor_component_id?void 0:_editor_component_id.hidden)&&void 0!==_editor_component_id_hidden?_editor_component_id_hidden:[],isHiddenHere:(0,isHiddenForViewport.E)(component.id,editor,component.hidden,viewport)}}({component,selectedIds,editor,viewport}),{isInlineEditableButton,inline}=useBlockItemInlineEditing(component),{dnd,dimensions,resize,drag,spacing,rotate,overlay}=function useBlockItemInteractions({component,index,parentId,dispatch,gridEnabled=!1,gridCols,effLocked,inlineEditing,baselineSnap=!1,baselineStep=8,zoom=1,viewport}){const dnd=(0,useBlockDnD.A)(component.id,index,parentId),dimensions=(0,useBlockDimensions.A)({component,viewport}),resize=(0,useCanvasResize.A)({componentId:component.id,widthKey:dimensions.widthKey,heightKey:dimensions.heightKey,widthVal:dimensions.widthVal,heightVal:dimensions.heightVal,dispatch,gridEnabled,gridCols,containerRef:dnd.containerRef,disabled:!!effLocked||inlineEditing,leftKey:dimensions.leftKey,topKey:dimensions.topKey,dockX:component.dockX,dockY:component.dockY,zoom}),drag=(0,useCanvasDrag.A)({componentId:component.id,dispatch,gridEnabled,gridCols,containerRef:dnd.containerRef,disabled:!!effLocked||inlineEditing,leftKey:dimensions.leftKey,topKey:dimensions.topKey,dockX:component.dockX,dockY:component.dockY,zoom}),spacing=useCanvasSpacing({componentId:component.id,marginKey:dimensions.marginKey,paddingKey:dimensions.paddingKey,marginVal:dimensions.marginVal,paddingVal:dimensions.paddingVal,dispatch,containerRef:dnd.containerRef,baselineSnap,baselineStep}),rotate=useCanvasRotate({componentId:component.id,styles:component.styles,dispatch,containerRef:dnd.containerRef,zoom}),overlay=(0,react.useMemo)(()=>{const usingResizeGuides=null!==resize.guides.x||null!==resize.guides.y;return{guides:usingResizeGuides?resize.guides:drag.guides,distances:usingResizeGuides?resize.distances:drag.distances,snapping:resize.snapping||drag.snapping,showOverlay:resize.resizing||drag.moving||resize.kbResizing,overlayWidth:resize.resizing?resize.width:drag.width,overlayHeight:resize.resizing?resize.height:drag.height,overlayLeft:resize.resizing?resize.left:drag.left,overlayTop:resize.resizing?resize.top:drag.top}},[drag.distances,drag.guides,drag.height,drag.left,drag.moving,drag.snapping,drag.top,drag.width,resize.distances,resize.guides,resize.height,resize.kbResizing,resize.left,resize.resizing,resize.snapping,resize.top,resize.width]);return{dnd,dimensions,resize,drag,spacing,rotate,overlay}}({component,index,parentId,dispatch,gridEnabled,gridCols,effLocked:!!effLocked,inlineEditing:!!(null==inline?void 0:inline.editing),baselineSnap,baselineStep,zoom,viewport}),style=useBlockItemStyles({component,parentId,flags,effZIndex,transform:dnd.transform,dimensions:{widthVal:dimensions.widthVal,heightVal:dimensions.heightVal,marginVal:dimensions.marginVal,paddingVal:dimensions.paddingVal,leftVal:dimensions.leftVal,topVal:dimensions.topVal}}),{ctxItems,ctxOpen,ctxPos,openContextMenu,closeContextMenu}=useBlockItemContextMenu({component,effLocked:!!effLocked,flags,selectedIds,editor,dispatch,onRemove}),selectableId=preferParentOnClick&&parentId?parentId:component.id,childComponents=component.children,wrapperClass="hover:border-primary relative rounded border hover:border-dashed"+(selected?" ring-2 ring-blue-500":"")+(overlay.snapping?" border-primary":"")+(dnd.isOver||dnd.isDragging?!1===dropAllowed?" border-danger border-dashed cursor-not-allowed":" border-primary border-dashed":"");var _spacing_overlay;return(0,jsx_runtime.jsxs)("div",{ref:dnd.setNodeRef,onClick:event=>onSelect(selectableId,event),onContextMenu:event=>{onSelect(selectableId,event),openContextMenu(event)},role:"listitem","aria-label":t("Canvas item"),tabIndex:0,id:component.anchorId||void 0,"data-component-id":component.id,"data-pb-contextmenu-trigger":!0,onKeyDown:buildBlockKeyDownHandler({locked:!!effLocked,inlineEditing:!!(null==inline?void 0:inline.editing),containerRef:dnd.containerRef,gridEnabled:!!gridEnabled,gridCols,nudgeSpacingByKeyboard:spacing.nudgeSpacingByKeyboard,nudgeResizeByKeyboard:resize.nudgeByKeyboard,parentSlots,parentType,currSlotKey:component.slotKey,componentId:component.id,dispatch,viewport,t}),style,className:wrapperClass,children:[(0,jsx_runtime.jsx)(DragHandle,{attributes:dnd.attributes,listeners:dnd.listeners,isDragging:dnd.isDragging,locked:!!effLocked,onPointerDown:event=>{event.stopPropagation(),onSelect(component.id,event),effLocked||"absolute"!==component.position||drag.startDrag(event)}}),effLocked&&(0,jsx_runtime.jsx)("div",{className:"absolute end-1 top-1 text-xs",title:t("Locked"),"aria-hidden":!0,children:(0,jsx_runtime.jsx)(react_icons_esm.JD_,{})}),(0,jsx_runtime.jsx)(CanvasOverlays,{guides:overlay.guides,distances:overlay.distances,spacingOverlay:null!==(_spacing_overlay=spacing.overlay)&&void 0!==_spacing_overlay?_spacing_overlay:null,showSizePosition:overlay.showOverlay,overlayWidth:overlay.overlayWidth,overlayHeight:overlay.overlayHeight,overlayLeft:overlay.overlayLeft,overlayTop:overlay.overlayTop,rotating:rotate.rotating,angle:rotate.angle}),(0,jsx_runtime.jsx)(BlockContent,{component:{...component,pbViewport:viewport},locale,isInlineEditableButton,inline,dispatch}),(0,jsx_runtime.jsx)(ImageEditingOverlays,{enabled:selected&&!effLocked,component,dispatch}),(0,jsx_runtime.jsx)(BlockResizer,{selected,startResize:event=>{effLocked||resize.startResize(event)},startSpacing:(event,type,side)=>{effLocked||spacing.startSpacing(event,type,side)},startRotate:event=>{effLocked||rotate.startRotate(event)}}),(0,jsx_runtime.jsx)(DeleteButton,{locked:!!effLocked,onRemove}),(0,jsx_runtime.jsx)(ZIndexMenu,{componentId:component.id,currentZ:effZIndex,dispatch}),(0,jsx_runtime.jsx)(BlockChildren,{component,childComponents,selectedIds,onSelect,dispatch,locale,gridEnabled,gridCols,viewport,device,isOver:dnd.isOver,setDropRef:dnd.setDropRef,baselineSnap,baselineStep,dropAllowed,insertParentId,insertIndex,editor,preferParentOnClick}),(0,jsx_runtime.jsx)(HiddenBadge,{hiddenList,isHiddenHere,viewport,componentId:component.id,editor,dispatch}),(0,jsx_runtime.jsx)(ContextMenu,{x:ctxPos.x,y:ctxPos.y,open:ctxOpen,onClose:closeContextMenu,items:ctxItems})]})}),page_builder_BlockItem=BlockItem;BlockItem.__docgenInfo={description:"",methods:[],displayName:"BlockItem",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},index:{required:!0,tsType:{name:"number"},description:""},parentId:{required:!0,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},parentType:{required:!1,tsType:{name:"string"},description:""},parentSlots:{required:!1,tsType:{name:"number"},description:""},selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, e?: React.MouseEvent) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"e"}],return:{name:"void"}}},description:""},onRemove:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},dispatch:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<Action>",elements:[{name:"union",raw:"| ChangeAction\n| UndoAction\n| RedoAction\n| SetGridColsAction\n| SetBreakpointsAction\n| UpdateEditorAction",elements:[{name:"union",raw:"| AddAction\n| MoveAction\n| RemoveAction\n| DuplicateAction\n| UpdateAction\n| ResizeAction\n| SetAction",elements:[{name:"signature",type:"object",raw:'{\n  type: "add";\n  component: PageComponent;\n  parentId?: string;\n  index?: number;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"add"',required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!1}}]}},{name:"signature",type:"object",raw:'{\n  type: "move";\n  from: { parentId?: string; index: number };\n  to: { parentId?: string; index: number };\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"move"',required:!0}},{key:"from",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}},{key:"to",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "remove"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"remove"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "duplicate"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"duplicate"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update";\n  id: string;\n  patch: Partial<PageComponent>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"Partial<PageComponent>",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "resize";\n  id: string;\n  width?: string;\n  height?: string;\n  left?: string;\n  top?: string;\n  right?: string;\n  bottom?: string;\n  leftDesktop?: string;\n  leftTablet?: string;\n  leftMobile?: string;\n  topDesktop?: string;\n  topTablet?: string;\n  topMobile?: string;\n  widthDesktop?: string;\n  widthTablet?: string;\n  widthMobile?: string;\n  heightDesktop?: string;\n  heightTablet?: string;\n  heightMobile?: string;\n  marginDesktop?: string;\n  marginTablet?: string;\n  marginMobile?: string;\n  paddingDesktop?: string;\n  paddingTablet?: string;\n  paddingMobile?: string;\n  [key: string]: string | undefined;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"resize"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!1}},{key:"height",value:{name:"string",required:!1}},{key:"left",value:{name:"string",required:!1}},{key:"top",value:{name:"string",required:!1}},{key:"right",value:{name:"string",required:!1}},{key:"bottom",value:{name:"string",required:!1}},{key:"leftDesktop",value:{name:"string",required:!1}},{key:"leftTablet",value:{name:"string",required:!1}},{key:"leftMobile",value:{name:"string",required:!1}},{key:"topDesktop",value:{name:"string",required:!1}},{key:"topTablet",value:{name:"string",required:!1}},{key:"topMobile",value:{name:"string",required:!1}},{key:"widthDesktop",value:{name:"string",required:!1}},{key:"widthTablet",value:{name:"string",required:!1}},{key:"widthMobile",value:{name:"string",required:!1}},{key:"heightDesktop",value:{name:"string",required:!1}},{key:"heightTablet",value:{name:"string",required:!1}},{key:"heightMobile",value:{name:"string",required:!1}},{key:"marginDesktop",value:{name:"string",required:!1}},{key:"marginTablet",value:{name:"string",required:!1}},{key:"marginMobile",value:{name:"string",required:!1}},{key:"paddingDesktop",value:{name:"string",required:!1}},{key:"paddingTablet",value:{name:"string",required:!1}},{key:"paddingMobile",value:{name:"string",required:!1}},{key:{name:"string"},value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set"; components: PageComponent[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set"',required:!0}},{key:"components",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"PageComponent[]",required:!0}}]}}]},{name:"signature",type:"object",raw:'{ type: "undo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"undo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "redo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"redo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-grid-cols"; gridCols: number }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-grid-cols"',required:!0}},{key:"gridCols",value:{name:"number",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-breakpoints"; breakpoints: { id: string; label: string; min?: number; max?: number }[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-breakpoints"',required:!0}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update-editor";\n  id: string;\n  patch: Partial<EditorFlags>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update-editor"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  hiddenDeviceIds?: string[];\n  /** Legacy single strategy (mobile); kept for backwards-compat */\n  stackStrategy?: "default" | "reverse" | "custom";\n  /** Per-device stacking strategies */\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  /** Custom orders per device (used when corresponding strategy === "custom") */\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n  global?: {\n    id: string;\n    overrides?: unknown;\n    pinned?: boolean;\n    editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n  };\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"hiddenDeviceIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Legacy single strategy (mobile); kept for backwards-compat"},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Per-device stacking strategies"},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1},description:'Custom orders per device (used when corresponding strategy === "custom")'},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}},{key:"global",value:{name:"signature",type:"object",raw:'{\n  id: string;\n  overrides?: unknown;\n  pinned?: boolean;\n  editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"overrides",value:{name:"unknown",required:!1}},{key:"pinned",value:{name:"boolean",required:!1}},{key:"editingSize",value:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]}],raw:'Record<"desktop" | "tablet" | "mobile", number | null>'}],raw:'Partial<Record<"desktop" | "tablet" | "mobile", number | null>>',required:!1}}]},required:!1}}]}}],raw:"Partial<EditorFlags>",required:!0}}]}}]}]},description:""},locale:{required:!0,tsType:{name:"Locale"},description:""},gridEnabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},gridCols:{required:!0,tsType:{name:"number"},description:""},viewport:{required:!0,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:""},device:{required:!1,tsType:{name:"signature",type:"object",raw:'{\n  id: string;\n  label: string;\n  width: number;\n  height: number;\n  type: "desktop" | "tablet" | "mobile";\n  orientation: "portrait" | "landscape";\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}},{key:"type",value:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}],required:!0}},{key:"orientation",value:{name:"union",raw:'"portrait" | "landscape"',elements:[{name:"literal",value:'"portrait"'},{name:"literal",value:'"landscape"'}],required:!0}}]}},description:""},editor:{required:!1,tsType:{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},description:""},zoom:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},baselineSnap:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},baselineStep:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"8",computed:!1}},dropAllowed:{required:!1,tsType:{name:"union",raw:"boolean | null",elements:[{name:"boolean"},{name:"null"}]},description:""},insertParentId:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},insertIndex:{required:!1,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:""},preferParentOnClick:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const CanvasItem=(0,react.memo)(function CanvasItemComponent(props){return"Text"===props.component.type?(0,jsx_runtime.jsx)(page_builder_TextBlock,{...props,component:props.component}):(0,jsx_runtime.jsx)(page_builder_BlockItem,{...props})}),page_builder_CanvasItem=CanvasItem;CanvasItem.__docgenInfo={description:"",methods:[],displayName:"CanvasItem",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},index:{required:!0,tsType:{name:"number"},description:""},parentId:{required:!0,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},parentType:{required:!1,tsType:{name:"string"},description:""},parentSlots:{required:!1,tsType:{name:"number"},description:""},selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, e?: React.MouseEvent) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"e"}],return:{name:"void"}}},description:""},onRemove:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},dispatch:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<Action>",elements:[{name:"union",raw:"| ChangeAction\n| UndoAction\n| RedoAction\n| SetGridColsAction\n| SetBreakpointsAction\n| UpdateEditorAction",elements:[{name:"union",raw:"| AddAction\n| MoveAction\n| RemoveAction\n| DuplicateAction\n| UpdateAction\n| ResizeAction\n| SetAction",elements:[{name:"signature",type:"object",raw:'{\n  type: "add";\n  component: PageComponent;\n  parentId?: string;\n  index?: number;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"add"',required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!1}}]}},{name:"signature",type:"object",raw:'{\n  type: "move";\n  from: { parentId?: string; index: number };\n  to: { parentId?: string; index: number };\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"move"',required:!0}},{key:"from",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}},{key:"to",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "remove"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"remove"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "duplicate"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"duplicate"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update";\n  id: string;\n  patch: Partial<PageComponent>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"Partial<PageComponent>",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "resize";\n  id: string;\n  width?: string;\n  height?: string;\n  left?: string;\n  top?: string;\n  right?: string;\n  bottom?: string;\n  leftDesktop?: string;\n  leftTablet?: string;\n  leftMobile?: string;\n  topDesktop?: string;\n  topTablet?: string;\n  topMobile?: string;\n  widthDesktop?: string;\n  widthTablet?: string;\n  widthMobile?: string;\n  heightDesktop?: string;\n  heightTablet?: string;\n  heightMobile?: string;\n  marginDesktop?: string;\n  marginTablet?: string;\n  marginMobile?: string;\n  paddingDesktop?: string;\n  paddingTablet?: string;\n  paddingMobile?: string;\n  [key: string]: string | undefined;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"resize"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!1}},{key:"height",value:{name:"string",required:!1}},{key:"left",value:{name:"string",required:!1}},{key:"top",value:{name:"string",required:!1}},{key:"right",value:{name:"string",required:!1}},{key:"bottom",value:{name:"string",required:!1}},{key:"leftDesktop",value:{name:"string",required:!1}},{key:"leftTablet",value:{name:"string",required:!1}},{key:"leftMobile",value:{name:"string",required:!1}},{key:"topDesktop",value:{name:"string",required:!1}},{key:"topTablet",value:{name:"string",required:!1}},{key:"topMobile",value:{name:"string",required:!1}},{key:"widthDesktop",value:{name:"string",required:!1}},{key:"widthTablet",value:{name:"string",required:!1}},{key:"widthMobile",value:{name:"string",required:!1}},{key:"heightDesktop",value:{name:"string",required:!1}},{key:"heightTablet",value:{name:"string",required:!1}},{key:"heightMobile",value:{name:"string",required:!1}},{key:"marginDesktop",value:{name:"string",required:!1}},{key:"marginTablet",value:{name:"string",required:!1}},{key:"marginMobile",value:{name:"string",required:!1}},{key:"paddingDesktop",value:{name:"string",required:!1}},{key:"paddingTablet",value:{name:"string",required:!1}},{key:"paddingMobile",value:{name:"string",required:!1}},{key:{name:"string"},value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set"; components: PageComponent[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set"',required:!0}},{key:"components",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"PageComponent[]",required:!0}}]}}]},{name:"signature",type:"object",raw:'{ type: "undo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"undo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "redo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"redo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-grid-cols"; gridCols: number }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-grid-cols"',required:!0}},{key:"gridCols",value:{name:"number",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-breakpoints"; breakpoints: { id: string; label: string; min?: number; max?: number }[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-breakpoints"',required:!0}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update-editor";\n  id: string;\n  patch: Partial<EditorFlags>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update-editor"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  hiddenDeviceIds?: string[];\n  /** Legacy single strategy (mobile); kept for backwards-compat */\n  stackStrategy?: "default" | "reverse" | "custom";\n  /** Per-device stacking strategies */\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  /** Custom orders per device (used when corresponding strategy === "custom") */\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n  global?: {\n    id: string;\n    overrides?: unknown;\n    pinned?: boolean;\n    editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n  };\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"hiddenDeviceIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Legacy single strategy (mobile); kept for backwards-compat"},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Per-device stacking strategies"},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1},description:'Custom orders per device (used when corresponding strategy === "custom")'},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}},{key:"global",value:{name:"signature",type:"object",raw:'{\n  id: string;\n  overrides?: unknown;\n  pinned?: boolean;\n  editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"overrides",value:{name:"unknown",required:!1}},{key:"pinned",value:{name:"boolean",required:!1}},{key:"editingSize",value:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]}],raw:'Record<"desktop" | "tablet" | "mobile", number | null>'}],raw:'Partial<Record<"desktop" | "tablet" | "mobile", number | null>>',required:!1}}]},required:!1}}]}}],raw:"Partial<EditorFlags>",required:!0}}]}}]}]},description:""},locale:{required:!0,tsType:{name:"Locale"},description:""},gridEnabled:{required:!1,tsType:{name:"boolean"},description:""},gridCols:{required:!0,tsType:{name:"number"},description:""},viewport:{required:!0,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:""},device:{required:!1,tsType:{name:"signature",type:"object",raw:'{\n  id: string;\n  label: string;\n  width: number;\n  height: number;\n  type: "desktop" | "tablet" | "mobile";\n  orientation: "portrait" | "landscape";\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}},{key:"type",value:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}],required:!0}},{key:"orientation",value:{name:"union",raw:'"portrait" | "landscape"',elements:[{name:"literal",value:'"portrait"'},{name:"literal",value:'"landscape"'}],required:!0}}]}},description:""},editor:{required:!1,tsType:{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},description:""},zoom:{required:!1,tsType:{name:"number"},description:""},baselineSnap:{required:!1,tsType:{name:"boolean"},description:""},baselineStep:{required:!1,tsType:{name:"number"},description:""},dropAllowed:{required:!1,tsType:{name:"union",raw:"boolean | null",elements:[{name:"boolean"},{name:"null"}]},description:""},insertParentId:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},insertIndex:{required:!1,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:""},preferParentOnClick:{required:!1,tsType:{name:"boolean"},description:""}}}},"../../packages/ui/src/components/cms/page-builder/ContactFormEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>ContactFormEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts");function ContactFormEditor({component,onChange}){const handleInput=(field,value)=>{onChange({[field]:value})};var _component_action,_component_method;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{value:null!==(_component_action=component.action)&&void 0!==_component_action?_component_action:"",onChange:e=>handleInput("action",e.target.value),placeholder:"action"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{value:null!==(_component_method=component.method)&&void 0!==_component_method?_component_method:"",onChange:e=>handleInput("method",e.target.value),placeholder:"method"})]})}ContactFormEditor.__docgenInfo={description:"",methods:[],displayName:"ContactFormEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/CountdownTimerEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>CountdownTimerEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_useComponentInputs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useComponentInputs.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/i18n/src/index.ts");function CountdownTimerEditor({component,onChange}){const{handleInput}=(0,_useComponentInputs__WEBPACK_IMPORTED_MODULE_2__.A)(onChange),t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_3__.c3)();var _component_targetDate,_component_timezone,_component_completionText,_component_styles;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:t("cms.builder.countdown.targetDate.label"),type:"datetime-local",value:null!==(_component_targetDate=component.targetDate)&&void 0!==_component_targetDate?_component_targetDate:"",onChange:e=>handleInput("targetDate",e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:t("cms.builder.countdown.timezone.label"),value:null!==(_component_timezone=component.timezone)&&void 0!==_component_timezone?_component_timezone:"",onChange:e=>handleInput("timezone",e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:t("cms.builder.countdown.completionText.label"),value:null!==(_component_completionText=component.completionText)&&void 0!==_component_completionText?_component_completionText:"",onChange:e=>handleInput("completionText",e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:t("cms.builder.countdown.styles.label"),value:null!==(_component_styles=component.styles)&&void 0!==_component_styles?_component_styles:"",onChange:e=>handleInput("styles",e.target.value)})]})}CountdownTimerEditor.__docgenInfo={description:"",methods:[],displayName:"CountdownTimerEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/CustomHtmlEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>CustomHtmlEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_useComponentInputs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useComponentInputs.ts");function CustomHtmlEditor({component,onChange}){const{handleInput}=(0,_useComponentInputs__WEBPACK_IMPORTED_MODULE_2__.A)(onChange);var _component_html;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.TM,{label:"HTML",value:null!==(_component_html=component.html)&&void 0!==_component_html?_component_html:"",onChange:e=>handleInput("html",e.target.value)})}CustomHtmlEditor.__docgenInfo={description:"",methods:[],displayName:"CustomHtmlEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/DatasetEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>DatasetEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/i18n/src/index.ts");function DatasetEditor({component,onChange}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_2__.c3)();var _component_source,_component_limit,_component_collectionId,_component_sortBy,_component_sortOrder,_component_itemRoutePattern;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:"dataset-source",className:"mb-1 block text-xs font-semibold text-muted-foreground",children:t("cms.builder.dataset.source.label")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.l6,{value:null!==(_component_source=component.source)&&void 0!==_component_source?_component_source:"products",onValueChange:v=>onChange({source:v}),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.bq,{id:"dataset-source",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.yv,{placeholder:t("cms.builder.dataset.source.placeholder")})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.gC,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:"products",children:t("cms.builder.dataset.source.products")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:"manual",children:t("cms.builder.dataset.source.manual")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:"blog",children:t("cms.builder.dataset.source.blogSanity")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:"sanity",children:t("cms.builder.dataset.source.sanityCustom")})]})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:t("cms.builder.dataset.limit"),type:"number",value:null!==(_component_limit=component.limit)&&void 0!==_component_limit?_component_limit:"",onChange:e=>onChange({limit:""===e.target.value?void 0:Number(e.target.value)})})})]}),"products"===component.source&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:t("cms.builder.dataset.collectionId"),placeholder:t("cms.builder.dataset.collectionId.placeholder"),value:null!==(_component_collectionId=component.collectionId)&&void 0!==_component_collectionId?_component_collectionId:"",onChange:e=>onChange({collectionId:e.target.value})}),"manual"===component.source&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.TM,{label:t("cms.builder.dataset.skus"),placeholder:t("cms.builder.dataset.skus.placeholder"),value:(()=>{const raw=component.skus;return(Array.isArray(raw)?raw:[]).map(s=>"string"==typeof s?s:s&&"object"==typeof s&&"id"in s?String(s.id):"").filter(Boolean).join(",")})(),onChange:e=>onChange({skus:e.target.value.split(/[\s,]+/).map(s=>s.trim()).filter(Boolean).map(id=>({id}))})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:t("cms.builder.dataset.sortBy"),placeholder:t("cms.builder.dataset.sortBy.placeholder"),value:null!==(_component_sortBy=component.sortBy)&&void 0!==_component_sortBy?_component_sortBy:"",onChange:e=>onChange({sortBy:e.target.value||void 0})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:"dataset-order",className:"mb-1 block text-xs font-semibold text-muted-foreground",children:t("cms.builder.dataset.order")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.l6,{value:null!==(_component_sortOrder=component.sortOrder)&&void 0!==_component_sortOrder?_component_sortOrder:"asc",onValueChange:v=>onChange({sortOrder:v}),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.bq,{id:"dataset-order",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.yv,{})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.gC,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:"asc",children:t("cms.builder.dataset.order.asc")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:"desc",children:t("cms.builder.dataset.order.desc")})]})]})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:t("cms.builder.dataset.itemRoutePattern"),placeholder:t("cms.builder.dataset.itemRoutePattern.placeholder"),value:null!==(_component_itemRoutePattern=component.itemRoutePattern)&&void 0!==_component_itemRoutePattern?_component_itemRoutePattern:"",onChange:e=>onChange({itemRoutePattern:e.target.value||void 0})})]})}DatasetEditor.__docgenInfo={description:"",methods:[],displayName:"DatasetEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/DesignMenu.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{b:()=>DesignMenuContent});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_ThemePanel__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("../../packages/ui/src/components/atoms/index.ts"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/ThemePanel.tsx")),_panels_BreakpointsPanel__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/panels/BreakpointsPanel.tsx"),_acme_i18n__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../packages/i18n/src/index.ts");function DesignMenuContent({breakpoints=[],onChangeBreakpoints}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_6__.c3)(),[themeOpen,setThemeOpen]=react__WEBPACK_IMPORTED_MODULE_1__.useState(!1),[breakpointsOpen,setBreakpointsOpen]=react__WEBPACK_IMPORTED_MODULE_1__.useState(!1);return react__WEBPACK_IMPORTED_MODULE_1__.useEffect(()=>{const open=()=>setThemeOpen(!0);return window.addEventListener("pb:open-theme",open),()=>window.removeEventListener("pb:open-theme",open)},[]),react__WEBPACK_IMPORTED_MODULE_1__.useEffect(()=>{const open=()=>setBreakpointsOpen(!0);return window.addEventListener("pb:open-breakpoints",open),()=>window.removeEventListener("pb:open-breakpoints",open)},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-col gap-2 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.lG,{open:themeOpen,onOpenChange:setThemeOpen,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.zM,{asChild:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.$n,{variant:"outline",children:t("cms.builder.design.theme")})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ThemePanel__WEBPACK_IMPORTED_MODULE_4__.A,{})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.lG,{open:breakpointsOpen,onOpenChange:setBreakpointsOpen,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.zM,{asChild:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.$n,{variant:"outline",children:t("cms.builder.design.breakpoints")})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_panels_BreakpointsPanel__WEBPACK_IMPORTED_MODULE_5__.A,{breakpoints,onChange:list=>null==onChangeBreakpoints?void 0:onChangeBreakpoints(list)})]})]})}DesignMenuContent.__docgenInfo={description:"",methods:[],displayName:"DesignMenuContent",props:{breakpoints:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"Breakpoint[]"},description:"",defaultValue:{value:"[]",computed:!1}},onChangeBreakpoints:{required:!1,tsType:{name:"signature",type:"function",raw:"(list: Breakpoint[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"Breakpoint[]"},name:"list"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/FAQBlockEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>FAQBlockEditor});var _useArrayEditor__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useArrayEditor.tsx");function FAQBlockEditor({component,onChange}){return(0,_useArrayEditor__WEBPACK_IMPORTED_MODULE_0__.W)(onChange)("items",component.items,["question","answer"],{minItems:component.minItems,maxItems:component.maxItems})}},"../../packages/ui/src/components/cms/page-builder/FormBuilderEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>FormBuilderEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_acme_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/i18n/src/index.ts"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts");function FormBuilderEditor({component,onChange}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_1__.c3)();var _component_fields;const fields=null!==(_component_fields=component.fields)&&void 0!==_component_fields?_component_fields:[],updateField=(idx,key,value)=>{const next=[...fields];next[idx]={...next[idx],[key]:value},onChange({fields:next})};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[fields.map((field,idx)=>{var _field_name,_field_label,_field_options;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1 rounded border p-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.l6,{value:field.type,onValueChange:v=>updateField(idx,"type",v),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.bq,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.yv,{placeholder:t("type")})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.gC,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.eb,{value:"text",children:t("text")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.eb,{value:"email",children:t("email")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.eb,{value:"select",children:t("select")})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.pd,{value:null!==(_field_name=field.name)&&void 0!==_field_name?_field_name:"",onChange:e=>updateField(idx,"name",e.target.value),placeholder:t("name")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.pd,{value:null!==(_field_label=field.label)&&void 0!==_field_label?_field_label:"",onChange:e=>updateField(idx,"label",e.target.value),placeholder:t("label")}),"select"===field.type&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.pd,{value:(null!==(_field_options=field.options)&&void 0!==_field_options?_field_options:[]).map(o=>o.label).join(","),onChange:e=>updateField(idx,"options",e.target.value.split(",").map(v=>v.trim()).filter(Boolean).map(v=>({label:v,value:v}))),placeholder:t("options (comma separated)")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.$n,{variant:"destructive",onClick:()=>(idx=>{const next=fields.filter((_,i)=>i!==idx);onChange({fields:next})})(idx),children:t("Remove")})]},idx)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.$n,{onClick:()=>{onChange({fields:[...fields,{type:"text",name:"",label:""}]})},children:t("Add field")})]})}FormBuilderEditor.__docgenInfo={description:"",methods:[],displayName:"FormBuilderEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/GalleryEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>GalleryEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_useArrayEditor__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useArrayEditor.tsx"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/i18n/src/index.ts");function GalleryEditor({component,onChange}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_3__.c3)(),arrayEditor=(0,_useArrayEditor__WEBPACK_IMPORTED_MODULE_1__.W)(onChange);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.Sc,{checked:!!component.openInLightbox,onCheckedChange:v=>onChange({openInLightbox:!0===v})}),t("Open images in lightbox")]}),arrayEditor("images",component.images,["src","alt"],{minItems:component.minItems,maxItems:component.maxItems})]})}GalleryEditor.__docgenInfo={description:"",methods:[],displayName:"GalleryEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/GiftCardEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>GiftCardEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/i18n/src/index.ts");function GiftCardEditor({component,onChange}){var _component_denominations;const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_2__.c3)();var _component_denominations_join,_component_description;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{value:null!==(_component_denominations_join=null===(_component_denominations=component.denominations)||void 0===_component_denominations?void 0:_component_denominations.join(","))&&void 0!==_component_denominations_join?_component_denominations_join:"",onChange:e=>onChange({denominations:e.target.value.split(/[\s,]+/).map(s=>parseInt(s.trim(),10)).filter(n=>!isNaN(n))}),placeholder:t("Amounts (comma separated)")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.TM,{value:null!==(_component_description=component.description)&&void 0!==_component_description?_component_description:"",onChange:e=>onChange({description:e.target.value}),placeholder:t("Description")})]})}GiftCardEditor.__docgenInfo={description:"",methods:[],displayName:"GiftCardEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/GridOverlay.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js");const GridOverlay=({gridCols,gutter,baselineStep})=>{const cols=Number.isFinite(gridCols)&&gridCols>0?Math.floor(gridCols):1,style={display:"grid",gridTemplateColumns:`repeat(${cols}, 1fr)`};return gutter&&(style.columnGap=gutter),baselineStep&&baselineStep>0&&(style.backgroundImage=`repeating-linear-gradient(to bottom, hsl(var(--muted-foreground, 0 0% 45%)/.35) 0, hsl(var(--muted-foreground, 0 0% 45%)/.35) 1px, transparent 1px, transparent ${baselineStep}px)`),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"relative h-full w-full",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"pointer-events-none absolute inset-0","data-cy":"pb-grid-overlay",style,children:Array.from({length:cols}).map((_,i)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"border-muted-foreground/40 border-l border-dashed"},i))})})},__WEBPACK_DEFAULT_EXPORT__=GridOverlay;GridOverlay.__docgenInfo={description:"",methods:[],displayName:"GridOverlay",props:{gridCols:{required:!0,tsType:{name:"number"},description:""},gutter:{required:!1,tsType:{name:"string"},description:""},baselineStep:{required:!1,tsType:{name:"number"},description:"Draw horizontal baseline lines every N px on top"}}}},"../../packages/ui/src/components/cms/page-builder/HeroBannerEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>HeroBannerEditor});var _useArrayEditor__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useArrayEditor.tsx");function HeroBannerEditor({component,onChange}){return(0,_useArrayEditor__WEBPACK_IMPORTED_MODULE_0__.W)(onChange)("slides",component.slides,["src","alt","headlineKey","ctaKey"],{minItems:component.minItems,maxItems:component.maxItems})}},"../../packages/ui/src/components/cms/page-builder/ImageBlockEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>page_builder_ImageBlockEditor});var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),i18n_src=__webpack_require__("../../packages/i18n/src/index.ts"),shadcn=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),useRemoteImageProbe=__webpack_require__("../../packages/ui/src/hooks/useRemoteImageProbe.ts"),ImagePicker=__webpack_require__("../../packages/ui/src/components/cms/page-builder/ImagePicker.tsx"),ImageEditor=__webpack_require__("../../packages/ui/src/components/cms/page-builder/ImageEditor.tsx");function ImageSourcePanel({src,alt,cropAspect,focalPoint,onChange,initialFilter,onApplyFilter}){const t=(0,i18n_src.c3)(),[url,setUrl]=(0,react.useState)(null!=src?src:""),[altText,setAltText]=(0,react.useState)(null!=alt?alt:""),[decorative,setDecorative]=(0,react.useState)(!1),{probe,loading,error,valid}=(0,useRemoteImageProbe.A)(),[editorOpen,setEditorOpen]=(0,react.useState)(!1),[editState,setEditState]=(0,react.useState)({cropAspect,focalPoint});(0,react.useEffect)(()=>{setUrl(null!=src?src:"")},[src]),(0,react.useEffect)(()=>{setAltText(null!=alt?alt:"")},[alt]),(0,react.useEffect)(()=>{setEditState({cropAspect,focalPoint})},[cropAspect,focalPoint]),(0,react.useEffect)(()=>{url&&probe(url)},[url,probe]);const handleUrl=(0,react.useCallback)(e=>{const value=e.target.value;setUrl(value),onChange({src:value})},[onChange]),handleAlt=(0,react.useCallback)(e=>{const value=e.target.value;setAltText(value),onChange({alt:value})},[onChange]),handleDecorative=(0,react.useCallback)(checked=>{setDecorative(!!checked);const value=checked?"":altText;setAltText(value),onChange({alt:value})},[altText,onChange]),handleSelect=(0,react.useCallback)(url=>{setUrl(url),onChange({src:url})},[onChange]);return(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-start gap-2",children:[(0,jsx_runtime.jsx)(shadcn.pd,{value:url,onChange:handleUrl,placeholder:t("cms.image.url"),className:"flex-1"}),(0,jsx_runtime.jsx)(ImagePicker.A,{onSelect:handleSelect,children:(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",asChild:!0,children:(0,jsx_runtime.jsx)("span",{children:t("cms.image.upload")})})}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",disabled:!url,onClick:()=>setEditorOpen(!0),children:"Edit"})]}),loading&&(0,jsx_runtime.jsx)("p",{className:"text-sm text-muted-foreground",children:t("cms.image.probing")}),!loading&&error&&(0,jsx_runtime.jsx)("p",{className:"text-sm text-danger",role:"alert",children:t("cms.image.probeError")}),(0,jsx_runtime.jsx)(shadcn.pd,{value:altText,onChange:handleAlt,placeholder:t("cms.image.alt"),disabled:decorative}),(0,jsx_runtime.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,jsx_runtime.jsx)(shadcn.Sc,{checked:decorative,onCheckedChange:handleDecorative}),t("cms.image.decorative")]}),!decorative&&""===altText.trim()&&(0,jsx_runtime.jsx)("p",{className:"text-warning text-sm",role:"alert",children:t("cms.image.altWarning")}),!1===valid&&!error&&(0,jsx_runtime.jsx)("p",{className:"text-warning text-sm",role:"alert",children:t("cms.image.probeError")}),editorOpen&&url?(0,jsx_runtime.jsx)(ImageEditor.A,{open:editorOpen,src:url,initial:editState,initialFilter,onClose:()=>setEditorOpen(!1),onApply:next=>{setEditState(next),onChange({cropAspect:next.cropAspect,focalPoint:next.focalPoint})},onApplyFilter}):null]})}const page_builder_ImageSourcePanel=(0,react.memo)(ImageSourcePanel);function ImageBlockEditor({component,onChange}){const handleChange=(0,react.useCallback)(patch=>{onChange(patch)},[onChange]),initialFilter=(()=>{try{var _parsed_effects;const raw=component.styles;if("string"!=typeof raw)return;if(!raw)return;const parsed=JSON.parse(String(raw));return null==parsed||null===(_parsed_effects=parsed.effects)||void 0===_parsed_effects?void 0:_parsed_effects.filter}catch(e){return}})(),applyFilter=(0,react.useCallback)(filter=>{try{const raw=component.styles,base="string"==typeof raw&&raw?JSON.parse(String(raw)):{};var _base_effects;const next={...base,effects:{...null!==(_base_effects=base.effects)&&void 0!==_base_effects?_base_effects:{},filter}};onChange({styles:JSON.stringify(next)})}catch(e){const next={effects:{filter}};onChange({styles:JSON.stringify(next)})}},[component,onChange]);return(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)(page_builder_ImageSourcePanel,{src:component.src,alt:component.alt,cropAspect:component.cropAspect,focalPoint:component.focalPoint,onChange:handleChange,initialFilter,onApplyFilter:applyFilter}),(0,jsx_runtime.jsx)("p",{className:"text-xs text-muted-foreground",children:"Tip: When the image block is selected on the canvas, drag the focal point dot to adjust framing."})]})}ImageSourcePanel.__docgenInfo={description:"",methods:[],displayName:"ImageSourcePanel",props:{src:{required:!1,tsType:{name:"string"},description:""},alt:{required:!1,tsType:{name:"string"},description:""},cropAspect:{required:!1,tsType:{name:"string"},description:""},focalPoint:{required:!1,tsType:{name:"signature",type:"object",raw:"{ x: number; y: number }",signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]}},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: { src?: string; alt?: string; cropAspect?: string; focalPoint?: { x: number; y: number } }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ src?: string; alt?: string; cropAspect?: string; focalPoint?: { x: number; y: number } }",signature:{properties:[{key:"src",value:{name:"string",required:!1}},{key:"alt",value:{name:"string",required:!1}},{key:"cropAspect",value:{name:"string",required:!1}},{key:"focalPoint",value:{name:"signature",type:"object",raw:"{ x: number; y: number }",signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!1}}]}},name:"patch"}],return:{name:"void"}}},description:""},initialFilter:{required:!1,tsType:{name:"string"},description:"Optional seed + persistence for quick filter adjustments"},onApplyFilter:{required:!1,tsType:{name:"signature",type:"function",raw:"(filter: string | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},name:"filter"}],return:{name:"void"}}},description:""}}};const page_builder_ImageBlockEditor=react.memo(ImageBlockEditor);ImageBlockEditor.__docgenInfo={description:"",methods:[],displayName:"ImageBlockEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/ImageEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>ImageEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),next_image__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../__mocks__/next/image.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts");const aspectPresets=[{label:"Auto",value:void 0},{label:"1:1",value:"1:1"},{label:"4:3",value:"4:3"},{label:"3:2",value:"3:2"},{label:"16:9",value:"16:9"}];function composeFilter(v){if(!(Math.abs(v.brightness-1)<1e-6&&Math.abs(v.contrast-1)<1e-6&&Math.abs(v.saturate-1)<1e-6&&Math.abs(v.blur)<1e-6))return`brightness(${v.brightness}) contrast(${v.contrast}) saturate(${v.saturate}) blur(${v.blur}px)`}function ImageEditor({open,src,initial,onClose,onApply,initialFilter,onApplyFilter}){const[aspect,setAspect]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null==initial?void 0:initial.cropAspect);var _initial_focalPoint;const[focal,setFocal]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null!==(_initial_focalPoint=null==initial?void 0:initial.focalPoint)&&void 0!==_initial_focalPoint?_initial_focalPoint:{x:.5,y:.5}),containerRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),[brightness,setBrightness]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(1),[contrast,setContrast]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(1),[saturate,setSaturate]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(1),[blur,setBlur]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{if(open){var _initial_focalPoint;setAspect(null==initial?void 0:initial.cropAspect),setFocal(null!==(_initial_focalPoint=null==initial?void 0:initial.focalPoint)&&void 0!==_initial_focalPoint?_initial_focalPoint:{x:.5,y:.5});const parsed=function parseFilter(input){if(!input)return{brightness:1,contrast:1,saturate:1,blur:0};const out={brightness:1,contrast:1,saturate:1,blur:0};try{const parts=input.split(/\)\s*/).map(p=>p.trim()).filter(Boolean);for(const p of parts)if(p.startsWith("brightness(")){const v=p.slice(11);out.brightness=v.endsWith("%")?Number(v.slice(0,-1))/100:Number(v)}else if(p.startsWith("contrast(")){const v=p.slice(9);out.contrast=v.endsWith("%")?Number(v.slice(0,-1))/100:Number(v)}else if(p.startsWith("saturate(")){const v=p.slice(9);out.saturate=v.endsWith("%")?Number(v.slice(0,-1))/100:Number(v)}else if(p.startsWith("blur(")){const v=p.slice(5);out.blur=v.endsWith("px")?Number(v.slice(0,-2)):Number(v)}}catch(e){}const clamp=(n,min,max)=>Number.isFinite(n)?Math.min(max,Math.max(min,n)):min;return{brightness:clamp(out.brightness||1,0,4),contrast:clamp(out.contrast||1,0,4),saturate:clamp(out.saturate||1,0,4),blur:clamp(out.blur||0,0,100)}}(initialFilter);setBrightness(parsed.brightness),setContrast(parsed.contrast),setSaturate(parsed.saturate),setBlur(parsed.blur)}},[open,null==initial?void 0:initial.cropAspect,null==initial?void 0:initial.focalPoint,initialFilter]);const aspectRatio=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>function parseAspect(aspect){if(!aspect)return;const[w,h]=aspect.split(":").map(n=>Number(n));return!isFinite(w)||!isFinite(h)||w<=0||h<=0?void 0:w/h}(aspect),[aspect]),handlePickFocal=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(e=>{const el=containerRef.current;if(!el)return;const rect=el.getBoundingClientRect(),x=(e.clientX-rect.left)/rect.width,y=(e.clientY-rect.top)/rect.height;setFocal({x:Math.min(1,Math.max(0,x)),y:Math.min(1,Math.max(0,y))})},[]),handleKeyAdjust=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(e=>{const step=e.shiftKey?.1:.02;let handled=!1;"ArrowLeft"===e.key?(setFocal(f=>({x:Math.max(0,f.x-step),y:f.y})),handled=!0):"ArrowRight"===e.key?(setFocal(f=>({x:Math.min(1,f.x+step),y:f.y})),handled=!0):"ArrowUp"===e.key?(setFocal(f=>({x:f.x,y:Math.max(0,f.y-step)})),handled=!0):"ArrowDown"===e.key?(setFocal(f=>({x:f.x,y:Math.min(1,f.y+step)})),handled=!0):"Enter"!==e.key&&" "!==e.key||(setFocal({x:.5,y:.5}),handled=!0),handled&&(e.preventDefault(),e.stopPropagation())},[]),handleApply=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{onApply({cropAspect:aspect,focalPoint:focal});const filter=composeFilter({brightness,contrast,saturate,blur});null==onApplyFilter||onApplyFilter(filter),onClose()},[aspect,focal,brightness,contrast,saturate,blur,onApply,onApplyFilter,onClose]),handleReset=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{setAspect(void 0),setFocal({x:.5,y:.5}),setBrightness(1),setContrast(1),setSaturate(1),setBlur(0)},[]),filterStyle=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>({filter:composeFilter({brightness,contrast,saturate,blur})||void 0}),[brightness,contrast,saturate,blur]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.lG,{open,onOpenChange:v=>v?void 0:onClose(),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.Cf,{className:"w-full",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.c7,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.L3,{children:"Image Editor"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.rr,{children:"Choose an aspect ratio and click on the image to set the focal point."})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-wrap gap-2",children:[aspectPresets.map(a=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.$n,{type:"button",variant:a.value===aspect?"default":"outline",onClick:()=>setAspect(a.value),children:a.label},a.label)),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.pd,{placeholder:"W:H (e.g. 21:9)",value:null!=aspect?aspect:"",onChange:e=>setAspect(e.target.value||void 0),className:"w-40"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-xs text-muted-foreground",children:"Custom"})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"relative",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{ref:containerRef,className:"relative w-full overflow-hidden bg-muted",style:aspectRatio?{aspectRatio:String(aspectRatio)}:{minHeight:240},onClick:handlePickFocal,role:"button",tabIndex:0,"aria-label":"Image area: click or use arrow keys to set focal point",onKeyDown:handleKeyAdjust,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(next_image__WEBPACK_IMPORTED_MODULE_2__.A,{src,alt:"preview",fill:!0,draggable:!1,"data-aspect":aspect||"auto",className:"absolute inset-0 h-full w-full select-none object-cover",style:{objectPosition:`${(100*focal.x).toFixed(2)}% ${(100*focal.y).toFixed(2)}%`,...filterStyle}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"absolute h-4 w-4 -translate-x-1/2 -translate-y-1/2 transform rounded-full border-2 border-white bg-primary shadow",style:{left:100*focal.x+"%",top:100*focal.y+"%"},"aria-hidden":!0})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"mt-2 text-xs text-muted-foreground",children:"Tip: The image preview simulates responsive cropping with object-fit: cover."})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mt-2 space-y-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-xs font-semibold text-muted-foreground",children:"Quick adjustments"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"grid grid-cols-2 items-center gap-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label",{className:"text-xs text-muted-foreground",children:["Brightness (",Math.round(100*brightness),"%)"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"range",min:0,max:200,value:Math.round(100*brightness),onChange:e=>setBrightness(Number(e.target.value)/100)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label",{className:"text-xs text-muted-foreground",children:["Contrast (",Math.round(100*contrast),"%)"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"range",min:0,max:200,value:Math.round(100*contrast),onChange:e=>setContrast(Number(e.target.value)/100)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label",{className:"text-xs text-muted-foreground",children:["Saturation (",Math.round(100*saturate),"%)"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"range",min:0,max:200,value:Math.round(100*saturate),onChange:e=>setSaturate(Number(e.target.value)/100)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label",{className:"text-xs text-muted-foreground",children:["Blur (",blur,"px)"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"range",min:0,max:20,value:Math.round(blur),onChange:e=>setBlur(Number(e.target.value))})]})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.Es,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.$n,{type:"button",variant:"outline",onClick:handleReset,children:"Reset"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.$n,{type:"button",onClick:handleApply,children:"Apply"})]})]})})}ImageEditor.__docgenInfo={description:"",methods:[],displayName:"ImageEditor",props:{open:{required:!0,tsType:{name:"boolean"},description:""},src:{required:!0,tsType:{name:"string"},description:""},initial:{required:!1,tsType:{name:"ImageEditState"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onApply:{required:!0,tsType:{name:"signature",type:"function",raw:"(next: ImageEditState) => void",signature:{arguments:[{type:{name:"ImageEditState"},name:"next"}],return:{name:"void"}}},description:""},initialFilter:{required:!1,tsType:{name:"string"},description:"Optional existing CSS filter to seed quick adjustments"},onApplyFilter:{required:!1,tsType:{name:"signature",type:"function",raw:"(filter: string | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},name:"filter"}],return:{name:"void"}}},description:"Persist quick adjustments into style effects (e.g. effects.filter)"}}}},"../../packages/ui/src/components/cms/page-builder/ImagePicker.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_ui_hooks_useFileUpload__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/hooks/useFileUpload.tsx"),next_image__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../__mocks__/next/image.js"),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_atoms_Loader__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../packages/ui/src/components/atoms/Loader.tsx"),_atoms_primitives_Grid__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Grid.tsx"),_useMediaLibrary__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useMediaLibrary.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../packages/i18n/src/index.ts");function ImagePicker({onSelect,children}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_8__.c3)(),[open,setOpen]=(0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(!1),[search,setSearch]=(0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(""),[previewUrl,setPreviewUrl]=(0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null),{media,setMedia,loadMedia,shop,loading,error:mediaError}=(0,_useMediaLibrary__WEBPACK_IMPORTED_MODULE_7__.A)(),{pendingFile,altText,setAltText,isValid,actual,inputRef,onFileChange,handleUpload,error:uploadError,progress}=(0,_ui_hooks_useFileUpload__WEBPACK_IMPORTED_MODULE_1__.Ay)({shop:null!=shop?shop:"",requiredOrientation:"landscape",onUploaded:item=>{setMedia(m=>[item,...m])}});(0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>{if(pendingFile){const url=URL.createObjectURL(pendingFile);return setPreviewUrl(url),()=>URL.revokeObjectURL(url)}setPreviewUrl(null)},[pendingFile]),(0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>{open&&(setSearch(""),loadMedia())},[open,loadMedia]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_4__.lG,{open,onOpenChange:setOpen,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_4__.zM,{asChild:!0,children}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_4__.Cf,{className:"w-full space-y-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_4__.L3,{children:"Select image"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_4__.rr,{className:"sr-only",children:t("cms.media.picker.description")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_4__.pd,{ref:inputRef,type:"file",accept:"image/*",onChange:onFileChange,className:"flex-1"}),pendingFile&&isValid&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_4__.$n,{type:"button",onClick:handleUpload,children:"Upload"})]}),previewUrl&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"relative w-full overflow-hidden rounded","data-aspect":"16/9",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(next_image__WEBPACK_IMPORTED_MODULE_2__.A,{src:previewUrl,alt:"preview",fill:!0,className:"object-cover",unoptimized:!0}),progress&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/50 text-white",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_Loader__WEBPACK_IMPORTED_MODULE_5__.a,{className:"mb-2"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{className:"text-xs",children:["Uploading… ",progress.done,"/",progress.total]})]})]}),pendingFile&&isValid&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_4__.pd,{value:altText,onChange:e=>setAltText(e.target.value),placeholder:"Alt text"}),pendingFile&&null!==isValid&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm",children:isValid?`Image orientation is ${actual}`:`Selected image is ${actual}; please upload a landscape image.`}),uploadError&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm text-danger","data-token":"--color-danger",children:uploadError}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_4__.pd,{value:search,onChange:e=>{const q=e.target.value;setSearch(q),loadMedia(q)},placeholder:t("cms.media.picker.search.placeholder")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"max-h-64 overflow-auto",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_primitives_Grid__WEBPACK_IMPORTED_MODULE_6__.x,{cols:3,gap:2,children:[loading&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"col-span-3 flex items-center justify-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_Loader__WEBPACK_IMPORTED_MODULE_5__.a,{})}),!loading&&mediaError&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-danger col-span-3 text-sm","data-token":"--color-danger",children:mediaError}),!loading&&!mediaError&&media.filter(m=>"image"===m.type).map(m=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"button",onClick:()=>{onSelect(m.url),setOpen(!1)},className:"relative aspect-square min-h-10 min-w-10",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(next_image__WEBPACK_IMPORTED_MODULE_2__.A,{src:m.url,alt:m.altText||"media",fill:!0,className:"object-cover"})},m.url)),!loading&&!mediaError&&0===media.filter(m=>"image"===m.type).length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-muted-foreground col-span-3 text-sm",children:t("cms.media.picker.empty")})]})})]})]})}const __WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_3__.memo)(ImagePicker);ImagePicker.__docgenInfo={description:"",methods:[],displayName:"ImagePicker",props:{onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(url: string) => void",signature:{arguments:[{type:{name:"string"},name:"url"}],return:{name:"void"}}},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}}},"../../packages/ui/src/components/cms/page-builder/ImageSliderEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>ImageSliderEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_ImagePicker__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/ImagePicker.tsx");const t=s=>s;function ImageSliderEditor({component,onChange}){var _component_slides;const slides=null!==(_component_slides=component.slides)&&void 0!==_component_slides?_component_slides:[];var _component_minItems;const min=null!==(_component_minItems=component.minItems)&&void 0!==_component_minItems?_component_minItems:0;var _component_maxItems;const max=null!==(_component_maxItems=component.maxItems)&&void 0!==_component_maxItems?_component_maxItems:1/0,keysRef=react__WEBPACK_IMPORTED_MODULE_1__.useRef([]),newKey=()=>{var _globalThis_crypto_randomUUID,_globalThis_crypto,_globalThis_crypto_randomUUID1;return null!==(_globalThis_crypto_randomUUID1=null===(_globalThis_crypto=globalThis.crypto)||void 0===_globalThis_crypto||null===(_globalThis_crypto_randomUUID=_globalThis_crypto.randomUUID)||void 0===_globalThis_crypto_randomUUID?void 0:_globalThis_crypto_randomUUID.call(_globalThis_crypto))&&void 0!==_globalThis_crypto_randomUUID1?_globalThis_crypto_randomUUID1:Math.random().toString(36).slice(2)};react__WEBPACK_IMPORTED_MODULE_1__.useEffect(()=>{const keys=keysRef.current;if(keys.length<slides.length)for(;keys.length<slides.length;)keys.push(newKey());else keys.length>slides.length&&keys.splice(slides.length)},[slides.length]);const update=(idx,field,value)=>{const next=[...slides];next[idx]={...next[idx],[field]:value},onChange({slides:next})},move=(from,to)=>{const next=[...slides],[item]=next.splice(from,1);next.splice(to,0,item),onChange({slides:next});const k=keysRef.current.splice(from,1)[0];keysRef.current.splice(to,0,k)};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.Sc,{checked:!!component.openInLightbox,onCheckedChange:v=>onChange({openInLightbox:!!v})}),t("Open images in lightbox")]}),slides.map((s,idx)=>{var _s_src,_s_alt,_s_caption,_keysRef_current_idx;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1 rounded border p-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-start gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.pd,{value:null!==(_s_src=s.src)&&void 0!==_s_src?_s_src:"",onChange:e=>update(idx,"src",e.target.value),placeholder:t("src"),className:"flex-1"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ImagePicker__WEBPACK_IMPORTED_MODULE_3__.A,{onSelect:url=>update(idx,"src",url),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.$n,{type:"button",variant:"outline",children:t("Pick")})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.pd,{value:null!==(_s_alt=s.alt)&&void 0!==_s_alt?_s_alt:"",onChange:e=>update(idx,"alt",e.target.value),placeholder:t("alt")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.pd,{value:null!==(_s_caption=s.caption)&&void 0!==_s_caption?_s_caption:"",onChange:e=>update(idx,"caption",e.target.value),placeholder:t("caption")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.$n,{type:"button",onClick:()=>move(idx,idx-1),disabled:0===idx,children:t("Up")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.$n,{type:"button",onClick:()=>move(idx,idx+1),disabled:idx===slides.length-1,children:t("Down")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.$n,{type:"button",variant:"destructive",onClick:()=>(idx=>{const next=slides.filter((_,i)=>i!==idx);onChange({slides:next}),keysRef.current.splice(idx,1)})(idx),disabled:slides.length<=min,children:t("Remove")})]})]},null!==(_keysRef_current_idx=keysRef.current[idx])&&void 0!==_keysRef_current_idx?_keysRef_current_idx:keysRef.current[idx]=newKey())}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.$n,{onClick:()=>{onChange({slides:[...slides,{src:"",alt:"",caption:""}]}),keysRef.current.push(newKey())},disabled:slides.length>=max,children:t("Add")})]})}ImageSliderEditor.__docgenInfo={description:"",methods:[],displayName:"ImageSliderEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/InlineInsert.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),next_image__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../__mocks__/next/image.js"),ulid__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../node_modules/.pnpm/ulid@3.0.1/node_modules/ulid/dist/browser/index.js"),_defaults__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/defaults.ts"),_rules__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/rules.ts"),_atoms__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../packages/ui/src/components/atoms/index.ts"),_blocks__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../packages/ui/src/components/cms/blocks/index.ts"),_atoms_primitives_Stack__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Stack.tsx"),_acme_i18n__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../packages/i18n/src/index.ts");const createPaletteItems=registry=>Object.keys(registry).sort().map(t=>{var _registry_t,_registry_t_previewImage;return{type:t,label:t.replace(/([A-Z])/g," $1").trim(),icon:null!==(_registry_t_previewImage=null===(_registry_t=registry[t])||void 0===_registry_t?void 0:_registry_t.previewImage)&&void 0!==_registry_t_previewImage?_registry_t_previewImage:"/window.svg"}}),INLINE_PALETTE={layout:createPaletteItems(_blocks__WEBPACK_IMPORTED_MODULE_6__._g),containers:createPaletteItems(_blocks__WEBPACK_IMPORTED_MODULE_6__.RR),atoms:createPaletteItems(_blocks__WEBPACK_IMPORTED_MODULE_6__.ll),molecules:createPaletteItems(_blocks__WEBPACK_IMPORTED_MODULE_6__.GF),organisms:createPaletteItems(_blocks__WEBPACK_IMPORTED_MODULE_6__.I2)},InlineInsert=(0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(function InlineInsert({index,onInsert,context="top",containerType}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_8__.c3)(),[open,setOpen]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[search,setSearch]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[active,setActive]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0),contentRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),items=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{const entries=Object.entries(INLINE_PALETTE).flatMap(([category,list])=>list.filter(i=>i.label.toLowerCase().includes(search.toLowerCase())).map(i=>({...i,category})));if("child"===context){const parent=null!=containerType?containerType:"",allowed=(0,_rules__WEBPACK_IMPORTED_MODULE_4__.gw)(parent);return entries.filter(e=>allowed.has(e.type))}return entries.filter(e=>(0,_rules__WEBPACK_IMPORTED_MODULE_4__.Ai)(e.type))},[search,context,containerType]),handleChoose=type=>{const isContainer=_defaults__WEBPACK_IMPORTED_MODULE_3__.K3.includes(type);var _defaults_type;const component={id:(0,ulid__WEBPACK_IMPORTED_MODULE_9__.Z0)(),type,...null!==(_defaults_type=_defaults__WEBPACK_IMPORTED_MODULE_3__.NT[type])&&void 0!==_defaults_type?_defaults_type:{},...isContainer?{children:[]}:{}};onInsert(component,index),setOpen(!1)};(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{open&&setActive(0)},[open,search,context]);const itemButtons=items.map((i,idx)=>{const label=i.label,category=i.category;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("button",{type:"button","data-index":idx,className:"inline-flex items-center gap-2 rounded border p-1 text-sm hover:bg-muted focus:outline-none min-h-10 min-w-10 "+(active===idx?"ring-1 ring-primary":""),onClick:()=>handleChoose(i.type),role:"option","aria-selected":active===idx,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(next_image__WEBPACK_IMPORTED_MODULE_2__.A,{src:i.icon,alt:"",width:20,height:20,className:"rounded"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"flex-1 text-start",children:label}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-muted-foreground text-xs capitalize",children:category})]},`${i.category}-${i.type}`)});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"relative my-1 flex w-full justify-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms__WEBPACK_IMPORTED_MODULE_5__.AM,{open,onOpenChange:setOpen,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_5__.Wv,{asChild:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"button","aria-label":"Insert block here",className:"opacity-0 transition-opacity duration-150 hover:opacity-100 focus:opacity-100 group-hover:opacity-100 group/button inline-flex items-center justify-center min-h-10 min-w-10",onClick:()=>setOpen(v=>!v),onMouseEnter:()=>setOpen(v=>v),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"rounded-full border bg-muted px-2 text-xs group-hover/button:bg-primary group-hover/button:text-primary-foreground",children:t("actions.add")})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms__WEBPACK_IMPORTED_MODULE_5__.hl,{className:"w-72 p-2",onKeyDown:e=>{if(!open)return;const max=items.length-1;if("ArrowDown"===e.key){var _contentRef_current;e.preventDefault();const next=active>=max?0:active+1;setActive(next);const btn=null===(_contentRef_current=contentRef.current)||void 0===_contentRef_current?void 0:_contentRef_current.querySelector(`button[data-index='${next}']`);null==btn||btn.focus()}else if("ArrowUp"===e.key){var _contentRef_current1;e.preventDefault();const prev=active<=0?max:active-1;setActive(prev);const btn=null===(_contentRef_current1=contentRef.current)||void 0===_contentRef_current1?void 0:_contentRef_current1.querySelector(`button[data-index='${prev}']`);null==btn||btn.focus()}else if("Enter"===e.key){e.preventDefault();const sel=items[active];sel&&handleChoose(sel.type)}else"Escape"===e.key&&(e.preventDefault(),setOpen(!1))},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mb-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"text",value:search,onChange:e=>setSearch(e.target.value),placeholder:t("pb.inline.searchBlocks"),className:"w-full rounded border p-1 text-sm"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref:contentRef,className:"max-h-64 overflow-auto",role:"listbox","aria-label":"Insert block list",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_primitives_Stack__WEBPACK_IMPORTED_MODULE_7__.B,{gap:1,children:[itemButtons,0===items.length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-muted-foreground p-2 text-center text-xs",children:t("search.noResults")})]})})]})]})})}),__WEBPACK_DEFAULT_EXPORT__=InlineInsert;InlineInsert.__docgenInfo={description:"",methods:[],displayName:"InlineInsert",props:{index:{required:!0,tsType:{name:"number"},description:""},onInsert:{required:!0,tsType:{name:"signature",type:"function",raw:"(component: PageComponent, index: number) => void",signature:{arguments:[{type:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},name:"component"},{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""},context:{required:!1,tsType:{name:"union",raw:'"top" | "child"',elements:[{name:"literal",value:'"top"'},{name:"literal",value:'"child"'}]},description:"Simple context hint: 'top' for page canvas, 'child' for inside a container",defaultValue:{value:'"top"',computed:!1}},containerType:{required:!1,tsType:{name:"string"},description:"Parent container type when context is 'child' (e.g., 'Section', 'MultiColumn')"}}}},"../../packages/ui/src/components/cms/page-builder/MapBlockEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>MapBlockEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts");function MapBlockEditor({component,onChange}){const handleNumber=(field,value)=>{const num=""===value?void 0:Number(value);onChange({[field]:num})};var _component_lat,_component_lng,_component_zoom;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:"Latitude",type:"number",value:null!==(_component_lat=component.lat)&&void 0!==_component_lat?_component_lat:"",onChange:e=>handleNumber("lat",e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:"Longitude",type:"number",value:null!==(_component_lng=component.lng)&&void 0!==_component_lng?_component_lng:"",onChange:e=>handleNumber("lng",e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:"Zoom",type:"number",value:null!==(_component_zoom=component.zoom)&&void 0!==_component_zoom?_component_zoom:"",onChange:e=>handleNumber("zoom",e.target.value)})]})}MapBlockEditor.__docgenInfo={description:"",methods:[],displayName:"MapBlockEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/NewsletterSignupEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>NewsletterSignupEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_LocalizedTextInput__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/cms/LocalizedTextInput.tsx");function NewsletterSignupEditor({component,onChange}){const handleInput=(field,value)=>{onChange({[field]:value})};var _component_text,_component_action,_component_placeholder,_component_submitLabel;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_LocalizedTextInput__WEBPACK_IMPORTED_MODULE_2__.A,{label:"Text",value:null!==(_component_text=component.text)&&void 0!==_component_text?_component_text:"",onChange:v=>handleInput("text",v)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{value:null!==(_component_action=component.action)&&void 0!==_component_action?_component_action:"",onChange:e=>handleInput("action",e.target.value),placeholder:"action"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_LocalizedTextInput__WEBPACK_IMPORTED_MODULE_2__.A,{label:"Placeholder",value:null!==(_component_placeholder=component.placeholder)&&void 0!==_component_placeholder?_component_placeholder:"",onChange:v=>handleInput("placeholder",v)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_LocalizedTextInput__WEBPACK_IMPORTED_MODULE_2__.A,{label:"Submit label",value:null!==(_component_submitLabel=component.submitLabel)&&void 0!==_component_submitLabel?_component_submitLabel:"",onChange:v=>handleInput("submitLabel",v)})]})}NewsletterSignupEditor.__docgenInfo={description:"",methods:[],displayName:"NewsletterSignupEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/PageBuilder.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>page_builder_PageBuilder});var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),PageBuilderLayout=__webpack_require__("../../packages/ui/src/components/cms/page-builder/PageBuilderLayout.tsx"),locales=__webpack_require__("../../packages/i18n/src/locales.ts"),browser=__webpack_require__("../../node_modules/.pnpm/ulid@3.0.1/node_modules/ulid/dist/browser/index.js"),useFileUpload=__webpack_require__("../../packages/ui/src/hooks/useFileUpload.tsx"),console=__webpack_require__("../../node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const hooks_useFileDrop=({shop,dispatch,allowExternalUrl,debounceMs=600})=>{const[dragOver,setDragOver]=(0,react.useState)(!1),lastDropRef=(0,react.useRef)(0),{onDrop,processDataTransfer,handleUpload,isUploading,progress,isValid}=(0,useFileUpload.Ay)({shop,requiredOrientation:"landscape",allowExternalUrl,onUploaded:item=>{dispatch({type:"add",component:{id:(0,browser.Z0)(),type:"Image",src:item.url,alt:item.altText}})}}),handleFileDrop=(0,react.useCallback)(async ev=>{setDragOver(!1);const now=Date.now();if(!(now-lastDropRef.current<debounceMs)){lastDropRef.current=now;try{if(ev.preventDefault(),isUploading)return;if("function"==typeof processDataTransfer){const kind=await processDataTransfer(ev);if("file"===kind||"url"===kind)return void("function"!=typeof handleUpload||isUploading||await handleUpload());"none"===kind&&("function"==typeof onDrop&&onDrop(ev),"function"!=typeof handleUpload||isUploading||await handleUpload())}else"function"==typeof onDrop&&onDrop(ev),"function"!=typeof handleUpload||isUploading||await handleUpload()}catch(err){console.error(err)}}},[processDataTransfer,onDrop,handleUpload,isUploading,debounceMs]);return{dragOver,setDragOver,handleFileDrop,progress,isValid}};var usePageBuilderState=__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/usePageBuilderState.ts"),usePageBuilderControls=__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/usePageBuilderControls.ts"),usePreviewTokens=__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/usePreviewTokens.ts");const KEY="pb:layer-selection-parent-first";var useLocalStrings=__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/useLocalStrings.ts");var libraryStore=__webpack_require__("../../packages/ui/src/components/cms/page-builder/libraryStore.ts");const getSelectedFlags=(state,selectedIds)=>{const sel=selectedIds[0];if(!sel)return null;var _state_editor;var _editor_sel;return null!==(_editor_sel=(null!==(_state_editor=state.editor)&&void 0!==_state_editor?_state_editor:{})[sel])&&void 0!==_editor_sel?_editor_sel:null},resolveExtraDevices=(controls,state,selectedIds,shop)=>{var _flags_global;const pageExtra=controls.extraDevices||[],flags=getSelectedFlags(state,selectedIds),isGlobal=!!(null==flags||null===(_flags_global=flags.global)||void 0===_flags_global?void 0:_flags_global.id);var _flags_globalBreakpoints;let globalBreakpoints=isGlobal&&null!==(_flags_globalBreakpoints=null==flags?void 0:flags.globalBreakpoints)&&void 0!==_flags_globalBreakpoints?_flags_globalBreakpoints:[];if(isGlobal&&(!globalBreakpoints||0===globalBreakpoints.length))try{var _flags_global1;const gid=String((null==flags||null===(_flags_global1=flags.global)||void 0===_flags_global1?void 0:_flags_global1.id)||""),found=(0,libraryStore.hV)(shop).find(i=>i.globalId===gid);var _found_breakpoints;globalBreakpoints=null!==(_found_breakpoints=null==found?void 0:found.breakpoints)&&void 0!==_found_breakpoints?_found_breakpoints:[]}catch(e){globalBreakpoints=[]}if(!Array.isArray(globalBreakpoints)||!globalBreakpoints.length)return pageExtra;const devices=globalBreakpoints.map(bp=>{const width=(bp=>{const base="number"==typeof bp.max&&bp.max>0?bp.max:"number"==typeof bp.min?bp.min:1024;return Math.max(320,Math.min(1920,base))})(bp),type=(width=>width>=1024?"desktop":width>=768?"tablet":"mobile")(width);return{id:`global-bp-${bp.id}`,label:bp.label,width,height:800,type,orientation:"portrait"}}),deduped=new Map;return[...pageExtra,...devices].forEach(device=>{deduped.has(device.id)||deduped.set(device.id,device)}),Array.from(deduped.values())};function createToolbarProps({controls,selectedIds,state,dispatch,shop,progress,isValid,locales,pagesNav}){const breakpoints=((state,selectedIds,shop)=>{var _flags_global,_flags_global1;const flags=getSelectedFlags(state,selectedIds);var _state_breakpoints;if(!(null==flags||null===(_flags_global=flags.global)||void 0===_flags_global?void 0:_flags_global.id))return null!==(_state_breakpoints=state.breakpoints)&&void 0!==_state_breakpoints?_state_breakpoints:[];if(Array.isArray(null==flags?void 0:flags.globalBreakpoints))return flags.globalBreakpoints;const gid=String((null===(_flags_global1=flags.global)||void 0===_flags_global1?void 0:_flags_global1.id)||"");if(!gid)return[];try{const found=(0,libraryStore.hV)(shop).find(g=>g.globalId===gid);var _found_breakpoints;return null!==(_found_breakpoints=null==found?void 0:found.breakpoints)&&void 0!==_found_breakpoints?_found_breakpoints:[]}catch(e){return[]}})(state,selectedIds,shop);var _controls_editingSizePx;return function buildToolbarProps(args){return{...args}}({deviceId:controls.deviceId,setDeviceId:controls.setDeviceId,orientation:controls.orientation,setOrientation:controls.setOrientation,locale:controls.locale,setLocale:controls.setLocale,locales,progress,isValid,zoom:controls.zoom,setZoom:controls.setZoom,breakpoints,setBreakpoints:list=>{const sel=selectedIds[0];if(sel){var _flags_global;const flags=getSelectedFlags(state,selectedIds);if(!!(null==flags||null===(_flags_global=flags.global)||void 0===_flags_global?void 0:_flags_global.id)){dispatch({type:"update-editor",id:sel,patch:{globalBreakpoints:list}});try{var _flags_global1;const gid=String((null==flags||null===(_flags_global1=flags.global)||void 0===_flags_global1?void 0:_flags_global1.id)||"");gid&&(0,libraryStore.VJ)(shop,gid,{breakpoints:list})}catch(e){}return}}dispatch({type:"set-breakpoints",breakpoints:list})},extraDevices:resolveExtraDevices(controls,state,selectedIds,shop),editingSizePx:null!==(_controls_editingSizePx=controls.editingSizePx)&&void 0!==_controls_editingSizePx?_controls_editingSizePx:null,setEditingSizePx:controls.setEditingSizePx,pagesNav})}const cloneWithNewIds=node=>{const{children,...rest}=node,cloned={...rest,id:(0,browser.Z0)()};return Array.isArray(children)&&(cloned.children=children.map(cloneWithNewIds)),cloned},page_builder_useSectionModeInitialSelection=({mode,components,setSelectedIds})=>{(0,react.useEffect)(()=>{if("section"!==mode)return;const firstSection=components.find(component=>"Section"===component.type);firstSection&&setSelectedIds([firstSection.id])},[mode,components,setSelectedIds])};var src=__webpack_require__("../../packages/i18n/src/index.ts"),usePresetActions_console=__webpack_require__("../../node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");var navigation=__webpack_require__("../../__mocks__/next/navigation.js"),shared_utils_src=__webpack_require__("../../packages/shared-utils/src/index.ts");var usePageBuilderDnD=__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/usePageBuilderDnD.ts"),defaults=__webpack_require__("../../packages/ui/src/components/cms/page-builder/defaults.ts");var rules=__webpack_require__("../../packages/ui/src/components/cms/page-builder/rules.ts");const clampIndex=(value,length)=>Math.max(0,Math.min(value,length)),isValidIndex=value=>"number"==typeof value&&Number.isFinite(value),findComponentById=(nodes,id)=>{for(const node of nodes){if(node.id===id)return node;const children="children"in node?node.children:void 0;if(Array.isArray(children)){const match=findComponentById(children,id);if(match)return match}}};const page_builder_useMediaLibraryListener=listener=>{(0,react.useEffect)(()=>{if(listener)return window.addEventListener("pb:insert-image",listener),()=>{window.removeEventListener("pb:insert-image",listener)}},[listener])};function useInsertSetup({components,selectedIds,setSelectedIds,insertIndex,insertParentId,dispatch,t}){const handlers=function useInsertHandlers({components,selectedIds,setSelectedIds,insertIndex,insertParentId,dispatch,t}){const selectedIsSection=(0,react.useMemo)(()=>{if(!selectedIds.length)return!1;const target=components.find(c=>c.id===selectedIds[0]);return"Section"===(null==target?void 0:target.type)},[components,selectedIds]),resolveInsertTarget=(0,react.useCallback)(options=>{var _options_preferSection;const preferSection=null!==(_options_preferSection=null==options?void 0:options.preferSection)&&void 0!==_options_preferSection&&_options_preferSection;if(insertParentId){const parent=findComponentById(components,insertParentId);if(parent){const length=(Array.isArray(parent.children)?parent.children:[]).length,index=isValidIndex(insertIndex)?clampIndex(insertIndex,length):length;return{parentId:insertParentId,index}}}if(isValidIndex(insertIndex))return{index:clampIndex(insertIndex,components.length)};if(preferSection&&selectedIsSection&&selectedIds.length>0){const sel=components.find(c=>c.id===selectedIds[0]);var _sel_children;const kids=sel&&"children"in sel&&null!==(_sel_children=sel.children)&&void 0!==_sel_children?_sel_children:[];return{parentId:selectedIds[0],index:kids.length}}if(selectedIds.length>0){const pos=components.findIndex(c=>c.id===selectedIds[0]);return{index:pos>=0?pos+1:components.length}}return{index:components.length}},[components,insertIndex,insertParentId,selectedIds,selectedIsSection]),handleAddFromPalette=(0,react.useCallback)(type=>{const target=resolveInsertTarget({preferSection:!0});if(!target.parentId&&!(0,rules.Ai)(type)){try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:t("cannot_add_at_root",{type})}))}catch(e){}return}const isContainer=defaults.K3.includes(type);var _defaults_type;const component={id:(0,browser.Z0)(),type,...null!==(_defaults_type=defaults.NT[type])&&void 0!==_defaults_type?_defaults_type:{},...isContainer?{children:[]}:{}};dispatch({type:"add",component,...target.parentId?{parentId:target.parentId}:{},index:target.index}),setSelectedIds([component.id])},[dispatch,resolveInsertTarget,setSelectedIds,t]),computeInsertTarget=(0,react.useCallback)(()=>resolveInsertTarget(),[resolveInsertTarget]),handleInsertImageAsset=(0,react.useCallback)(url=>{const component={id:(0,browser.Z0)(),type:"Image",src:url},target=computeInsertTarget();dispatch({type:"add",component,...target.parentId?{parentId:target.parentId}:{},index:target.index}),setSelectedIds([component.id])},[computeInsertTarget,dispatch,setSelectedIds]),handleSetSectionBackground=(0,react.useCallback)(url=>{if(!selectedIsSection||!selectedIds.length)return;const id=selectedIds[0];dispatch({type:"update",id,patch:{backgroundImageUrl:url}})},[dispatch,selectedIds,selectedIsSection]),handleInsertPreset=(0,react.useCallback)(template=>{const withNewIds=node=>{const cloned={...node,id:(0,browser.Z0)()},children="children"in node?node.children:void 0;return Array.isArray(children)&&(cloned.children=children.map(withNewIds)),cloned},component=withNewIds(template),target=computeInsertTarget();dispatch({type:"add",component,...target.parentId?{parentId:target.parentId}:{},index:target.index}),setSelectedIds([component.id])},[computeInsertTarget,dispatch,setSelectedIds]),mediaLibraryListener=(0,react.useCallback)(e=>{try{const d=null==e?void 0:e.detail;if(!(null==d?void 0:d.url))return;const component={id:(0,browser.Z0)(),type:"Image",src:d.url,alt:d.alt,cropAspect:d.cropAspect},target=computeInsertTarget();dispatch({type:"add",component,...target.parentId?{parentId:target.parentId}:{},index:target.index}),setSelectedIds([component.id]);try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:t("image_inserted")}))}catch(e){}}catch(e){}},[computeInsertTarget,dispatch,setSelectedIds,t]);return{selectedIsSection,handleAddFromPalette,handleInsertImageAsset,handleSetSectionBackground,handleInsertPreset,mediaLibraryListener}}({components,selectedIds,setSelectedIds,insertIndex,insertParentId,dispatch,t});return page_builder_useMediaLibraryListener(handlers.mediaLibraryListener),handlers}var usePageBuilderSave=__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/usePageBuilderSave.ts");function walk(node,fn){if(!node||"object"!=typeof node)return;fn(node);const children=function getChildren(node){const maybeChildren=node.children;if(Array.isArray(maybeChildren))return maybeChildren}(node);children&&children.forEach(c=>walk(c,fn))}function usePublishWithValidation({components,handlePublish,setToast}){const t=(0,src.c3)();return(0,react.useCallback)(async()=>{try{const result=function validateSectionRules(sections){const errors=[],heroTypes=new Set(["HeroBanner","CampaignHeroSection"]);let heroCount=0;for(const s of sections)walk(s.template,n=>{heroTypes.has(n.type)&&(heroCount+=1)});heroCount>1&&errors.push(`Only one hero section is allowed per page (found ${heroCount}).`);for(const s of sections)walk(s.template,n=>{const t=n.type;"HeroBanner"!==t&&"CampaignHeroSection"!==t||"image"in n||"src"in n||"media"in n||errors.push(`Hero section "${s.label}" may lack a large image; ensure ≥1440px width.`)});return errors.length?{ok:!1,errors}:{ok:!0}}((components||[]).filter(c=>"Section"===c.type).map((c,idx)=>({id:`local-${idx}`,label:c.label||`Section ${idx+1}`,status:"draft",template:c,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),createdBy:"editor"})));if(!1===result.ok){var _result_errors;const msg=(null===(_result_errors=result.errors)||void 0===_result_errors?void 0:_result_errors.join("\n"))||t("cms.builder.validation.failed");return void setToast({open:!0,message:msg})}}catch(e){}await handlePublish()},[components,handlePublish,setToast,t])}const DEFAULT_TOAST={open:!1,message:""};function useSavePublish({page,components,state,onSave,onPublish,shop,clearHistory,t,rotateDevice,togglePreview}){const{setToast,toastProps}=function useToastState(){const[toast,setToast]=(0,react.useState)(DEFAULT_TOAST),toastProps=function buildToastProps(args){return{...args}}({open:toast.open,message:toast.message,retry:toast.retry,onClose:()=>setToast(current=>({...current,open:!1}))});return{toast,setToast,toastProps}}(),safeOnSave=null!=onSave?onSave:async()=>({}),safeOnPublish=null!=onPublish?onPublish:async()=>({}),{handlePublish,handleSave,autoSaveState}=(0,usePageBuilderSave.A)({page,components,state,onSave:safeOnSave,onPublish:safeOnPublish,formDataDeps:[components,state],shop,onAutoSaveError:retry=>{setToast({open:!0,message:t("Auto-save failed. Click to retry."),retry:()=>{setToast(current=>({...current,open:!1})),retry()}})},clearHistory}),publishWithValidation=usePublishWithValidation({components,handlePublish,setToast});return function useKeyboardShortcuts({onPublish,rotateDevice,togglePreview}){(0,react.useEffect)(()=>{const handler=e=>{if(e.target instanceof HTMLElement&&("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName||"SELECT"===e.target.tagName||e.target.isContentEditable))return;const k=e.key.toLowerCase();if(e.ctrlKey||e.metaKey){if(e.shiftKey){if("s"===k){e.preventDefault();try{window.dispatchEvent(new Event("pb:save-version"))}catch(e){}return}if("p"===k)return e.preventDefault(),void onPublish();if("]"===k)return e.preventDefault(),void rotateDevice("right");if("["===k)return e.preventDefault(),void rotateDevice("left")}if((e.altKey||e.altGraphKey)&&"p"===k)return e.preventDefault(),void togglePreview()}};return window.addEventListener("keydown",handler),()=>window.removeEventListener("keydown",handler)},[onPublish,rotateDevice,togglePreview])}({onPublish:()=>publishWithValidation(),rotateDevice,togglePreview}),{handleSave,publishWithValidation,autoSaveState,toastProps,setToast}}var process=__webpack_require__("../../node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");const page_builder_usePageBuilderLayout=({page,history:historyProp,onSave,onPublish,saving=!1,publishing=!1,saveError,publishError,onChange,style,presetsSourceUrl,pagesNav,mode="page"})=>{const shop=function useShop(){var _usePathname;const pathname=null!==(_usePathname=(0,navigation.usePathname)())&&void 0!==_usePathname?_usePathname:"";return(0,react.useMemo)(()=>(0,shared_utils_src.e6)(pathname),[pathname])}(),saveRef=(0,react.useRef)(()=>{}),togglePreviewRef=(0,react.useRef)(()=>{}),rotateDeviceRef=(0,react.useRef)(()=>{}),{state,components,dispatch,selectedIds,setSelectedIds,liveMessage,clearHistory}=(0,usePageBuilderState.A)({page,history:historyProp,onChange,onSaveShortcut:()=>saveRef.current(),onTogglePreview:()=>togglePreviewRef.current(),onRotateDevice:direction=>rotateDeviceRef.current(direction)}),controls=(0,usePageBuilderControls.A)({state,dispatch});togglePreviewRef.current=controls.togglePreview,rotateDeviceRef.current=controls.rotateDevice;const{dragOver,setDragOver,handleFileDrop,progress,isValid}=hooks_useFileDrop({shop:null!=shop?shop:"",dispatch}),canvasRef=(0,react.useRef)(null),scrollRef=(0,react.useRef)(null),[snapPosition,setSnapPosition]=(0,react.useState)(null),[showComments,setShowComments]=(0,react.useState)(!0),previewTokens=(0,usePreviewTokens.Ay)(),t=(0,useLocalStrings.A)(controls.locale),gridSize=function useGridSize(canvasRef,opts){const[gridSize,setGridSize]=(0,react.useState)(1);return(0,react.useEffect)(()=>{opts.showGrid&&canvasRef.current?setGridSize(canvasRef.current.offsetWidth/opts.gridCols):setGridSize(1)},[opts.showGrid,opts.gridCols,opts.deviceKey,canvasRef]),gridSize}(canvasRef,{showGrid:controls.showGrid,gridCols:controls.gridCols,deviceKey:`${controls.deviceId}:${controls.orientation}`}),{dndContext,insertIndex,insertParentId,activeType,dropAllowed,dragMeta}=function useDnDSetup({components,dispatch,selectId,gridSize,canvasRef,setSnapPosition,editor,viewport,scrollRef,zoom,t}){return(0,usePageBuilderDnD.Ay)({components,dispatch,defaults:defaults.NT,containerTypes:defaults.K3,selectId,gridSize,canvasRef,setSnapPosition,editor,viewport,scrollRef,zoom,t})}({components,dispatch,selectId:id=>setSelectedIds([id]),gridSize,canvasRef,setSnapPosition,editor:state.editor,viewport:controls.viewport,scrollRef,zoom:controls.zoom,t}),{selectedIsSection,handleAddFromPalette,handleInsertImageAsset,handleSetSectionBackground,handleInsertPreset}=useInsertSetup({components,selectedIds,setSelectedIds,insertIndex,insertParentId,dispatch,t}),{handleSave,publishWithValidation,autoSaveState,toastProps,setToast}=useSavePublish({page,components,state,onSave,onPublish,shop,clearHistory,t,rotateDevice:direction=>rotateDeviceRef.current(direction),togglePreview:()=>togglePreviewRef.current()});saveRef.current=handleSave;const toolbarProps=createToolbarProps({controls,selectedIds,state,dispatch,shop,progress,isValid,locales:locales.IB,pagesNav}),gridProps=function buildGridProps(args){return{...args}}({showGrid:controls.showGrid,toggleGrid:controls.toggleGrid,snapToGrid:controls.snapToGrid,toggleSnap:controls.toggleSnap,gridCols:controls.gridCols,setGridCols:controls.setGridCols,zoom:controls.zoom,setZoom:controls.setZoom,showRulers:controls.showRulers,toggleRulers:controls.toggleRulers,showBaseline:controls.showBaseline,toggleBaseline:controls.toggleBaseline,baselineStep:controls.baselineStep,setBaselineStep:controls.setBaselineStep}),canvasProps=function buildCanvasProps(args){return{...args}}({components,selectedIds,onSelectIds:setSelectedIds,canvasRef,dragOver,setDragOver,onFileDrop:handleFileDrop,insertIndex,dispatch,locale:controls.locale,containerStyle:{width:"100%",...previewTokens},showGrid:controls.showGrid,gridCols:controls.gridCols,snapEnabled:controls.snapToGrid,showRulers:controls.showRulers,viewport:controls.viewport,device:controls.device,snapPosition,editor:state.editor,shop,pageId:page.id,showComments,zoom:controls.zoom,showBaseline:controls.showBaseline,baselineStep:controls.baselineStep}),previewProps=function buildPreviewProps(args){return{...args}}({components,locale:controls.locale,deviceId:controls.previewDeviceId,onChange:controls.setPreviewDeviceId,editor:state.editor,extraDevices:controls.extraDevices}),historyProps=function buildHistoryProps(args){return{...args}}({canUndo:!!state.past.length,canRedo:!!state.future.length,onUndo:()=>dispatch({type:"undo"}),onRedo:()=>dispatch({type:"redo"}),onSave:handleSave,onPublish:publishWithValidation,saving,publishing,saveError,publishError,autoSaveState,shop,pageId:page.id,currentComponents:components,editor:state.editor,onRestoreVersion:restored=>{dispatch({type:"set",components:restored}),handleSave()}}),tourProps=function buildTourProps(args){return{...args}}({steps:controls.tourSteps,run:controls.runTour,callback:controls.handleTourCallback}),{parentFirst,setParentFirst}=function useLayerSelectionPreference(){const[parentFirst,setParentFirst]=react.useState(()=>{try{return"1"===localStorage.getItem(KEY)}catch(e){return!1}});return react.useEffect(()=>{try{localStorage.setItem(KEY,parentFirst?"1":"0")}catch(e){}},[parentFirst]),{parentFirst,setParentFirst}}();page_builder_useSectionModeInitialSelection({mode,components,setSelectedIds});const handleInsertLinkedSection=(({shop,components,selectedIds,dispatch,setSelectedIds})=>async({globalId,label,component})=>{try{await(0,libraryStore.Vf)(shop,{globalId,label,createdAt:Date.now(),template:component})}catch(e){}const cloned=cloneWithNewIds(component),index=((components,selectedIds)=>{const list=components,sel=selectedIds[0];if(!sel)return list.length;const pos=list.findIndex(c=>c.id===sel);return pos>=0?pos+1:list.length})(components,selectedIds);dispatch({type:"add",component:cloned,index}),dispatch({type:"update-editor",id:cloned.id,patch:{global:{id:globalId}}}),setSelectedIds([cloned.id])})({shop,components,selectedIds,dispatch,setSelectedIds}),{canSavePreset,onSavePreset}=function usePresetActions({shop,components,selectedIds,setToast}){const t=(0,src.c3)();return{canSavePreset:(0,react.useMemo)(()=>{if(!Array.isArray(selectedIds)||1!==selectedIds.length)return!1;const id=selectedIds[0],c=(components||[]).find(x=>x.id===id);return!!c&&"Section"===c.type},[components,selectedIds]),onSavePreset:(0,react.useCallback)(async()=>{try{if(!Array.isArray(selectedIds)||1!==selectedIds.length)return void setToast({open:!0,message:t("cms.builder.presets.save.selectSingleSection")});const id=selectedIds[0],c=(components||[]).find(x=>x.id===id);if(!c||"Section"!==c.type)return void setToast({open:!0,message:t("cms.builder.presets.save.notASection")});const label=window.prompt(t("cms.builder.presets.save.labelPrompt"),c.label||t("cms.builder.presets.save.labelDefault"))||"";if(!label.trim())return;const locked=(window.prompt(t("cms.builder.presets.save.lockedKeysPrompt"),"")||"").split(",").map(s=>s.trim()).filter(Boolean),preset={id:`${Date.now()}`,label,template:c,locked:locked.length?locked:void 0,tags:[],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),createdBy:"editor"},target=shop?`/api/sections/${encodeURIComponent(shop)}/presets`:"/api/sections/default/presets";if(!(await fetch(target,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({preset})})).ok)throw new Error(t("cms.builder.presets.save.error"));setToast({open:!0,message:t("cms.builder.presets.save.success")})}catch(err){usePresetActions_console.error("save preset failed",err),setToast({open:!0,message:t("cms.builder.presets.save.error")})}},[components,selectedIds,setToast,shop,t])}}({shop,components,selectedIds,setToast});var _dragMeta_thumbnail,_controls_editingSizePx;return{style,paletteOnAdd:handleAddFromPalette,onInsertImageAsset:handleInsertImageAsset,onSetSectionBackground:handleSetSectionBackground,selectedIsSection,onInsertPreset:handleInsertPreset,onInsertLinkedSection:handleInsertLinkedSection,presetsSourceUrl:null!=presetsSourceUrl?presetsSourceUrl:process.env.NEXT_PUBLIC_PAGEBUILDER_PRESETS_URL,toolbarProps,gridProps,startTour:controls.startTour,togglePreview:controls.togglePreview,showPreview:controls.showPreview,toggleComments:()=>setShowComments(value=>!value),showComments,liveMessage,dndContext,dropAllowed,dragMeta:dragMeta?{from:dragMeta.from,type:dragMeta.type,count:dragMeta.count,label:dragMeta.label,thumbnail:null!==(_dragMeta_thumbnail=dragMeta.thumbnail)&&void 0!==_dragMeta_thumbnail?_dragMeta_thumbnail:null}:null,frameClass:controls.frameClass,viewport:controls.viewport,viewportStyle:controls.viewportStyle,zoom:controls.zoom,scrollRef,canvasProps:{...canvasProps,dropAllowed,insertParentId,preferParentOnClick:parentFirst},activeType,previewProps,historyProps,sidebarProps:{components,selectedIds,onSelectIds:setSelectedIds,dispatch,editor:state.editor,viewport:controls.viewport,breakpoints:Array.isArray(state.breakpoints)?state.breakpoints:[],pageId:page.id,crossNotices:controls.crossBreakpointNotices},toast:toastProps,tourProps,parentFirst,onParentFirstChange:setParentFirst,shop,pageId:page.id,editingSizePx:null!==(_controls_editingSizePx=controls.editingSizePx)&&void 0!==_controls_editingSizePx?_controls_editingSizePx:null,setEditingSizePx:controls.setEditingSizePx,crossBreakpointNotices:controls.crossBreakpointNotices,onCrossBreakpointNoticesChange:controls.setCrossBreakpointNotices,mode,canSavePreset,onSavePreset}},PageBuilder=(0,react.memo)(function PageBuilder(props){const layoutProps=page_builder_usePageBuilderLayout(props);return(0,jsx_runtime.jsx)(PageBuilderLayout.A,{...layoutProps})}),page_builder_PageBuilder=PageBuilder;PageBuilder.__docgenInfo={description:"",methods:[],displayName:"PageBuilder",props:{page:{required:!0,tsType:{name:"Page"},description:""},history:{required:!1,tsType:{name:"HistoryState"},description:""},onSave:{required:!0,tsType:{name:"signature",type:"function",raw:"(fd: FormData) => Promise<unknown>",signature:{arguments:[{type:{name:"FormData"},name:"fd"}],return:{name:"Promise",elements:[{name:"unknown"}],raw:"Promise<unknown>"}}},description:""},onPublish:{required:!0,tsType:{name:"signature",type:"function",raw:"(fd: FormData) => Promise<unknown>",signature:{arguments:[{type:{name:"FormData"},name:"fd"}],return:{name:"Promise",elements:[{name:"unknown"}],raw:"Promise<unknown>"}}},description:""},saving:{required:!1,tsType:{name:"boolean"},description:""},publishing:{required:!1,tsType:{name:"boolean"},description:""},saveError:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},publishError:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(components: PageComponent[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},name:"components"}],return:{name:"void"}}},description:""},style:{required:!1,tsType:{name:"CSSProperties"},description:""},presetsSourceUrl:{required:!1,tsType:{name:"string"},description:""},pagesNav:{required:!1,tsType:{name:"signature",type:"object",raw:"{ items: { label: string; value: string; href: string }[]; current: string }",signature:{properties:[{key:"items",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ label: string; value: string; href: string }",signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}},{key:"href",value:{name:"string",required:!0}}]}}],raw:"{ label: string; value: string; href: string }[]",required:!0}},{key:"current",value:{name:"string",required:!0}}]}},description:""},mode:{required:!1,tsType:{name:"union",raw:'"page" | "section"',elements:[{name:"literal",value:'"page"'},{name:"literal",value:'"section"'}]},description:""}}}},"../../packages/ui/src/components/cms/page-builder/PageBuilderLayout.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>page_builder_PageBuilderLayout});var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),core_esm=__webpack_require__("../../node_modules/.pnpm/@dnd-kit+core@6.3.1_react-dom@19.2.0-canary-3fbfb9ba-20250409_react@19.2.0-canary-3fbfb_fe9249e4a42fbe7e42b4e4091f9a4c62/node_modules/@dnd-kit/core/dist/core.esm.js"),atoms=__webpack_require__("../../packages/ui/src/components/atoms/index.ts"),PageBuilderTour=__webpack_require__("../../packages/ui/src/components/cms/page-builder/PageBuilderTour.tsx"),PageSidebar=__webpack_require__("../../packages/ui/src/components/cms/page-builder/PageSidebar.tsx"),react=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),src=__webpack_require__("../../packages/i18n/src/index.ts"),react_icons_esm=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-icons@1.3.2_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-icons/dist/react-icons.esm.js"),Stack=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Stack.tsx");function MoreMenu({items=[],content}){return(0,jsx_runtime.jsxs)(atoms.AM,{children:[(0,jsx_runtime.jsx)(atoms.m_,{text:"More actions",children:(0,jsx_runtime.jsx)(atoms.Wv,{asChild:!0,children:(0,jsx_runtime.jsx)(atoms.$n,{variant:"outline",className:"h-10 w-10 rounded-md","aria-label":"More actions",children:"⋯"})})}),(0,jsx_runtime.jsx)(atoms.hl,{className:"w-56 p-2",children:(0,jsx_runtime.jsxs)(Stack.B,{gap:2,children:[items.length>0&&(0,jsx_runtime.jsx)(Stack.B,{gap:1,children:items.map(i=>(0,jsx_runtime.jsx)(atoms.$n,{variant:"ghost",className:"justify-start",onClick:i.onClick,children:i.label},i.label))}),content&&(0,jsx_runtime.jsx)("div",{children:content})]})})]})}function ViewMenuContent({showPreview,togglePreview,showComments,toggleComments,startTour:_startTour,showPalette,togglePalette,parentFirst,onParentFirstChange,gridProps,crossBreakpointNotices,onCrossBreakpointNoticesChange}){const t=(0,src.c3)();return(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-medium",children:t("cms.builder.view.title")}),(0,jsx_runtime.jsxs)("label",{className:"flex items-center justify-between gap-4 text-sm",children:[(0,jsx_runtime.jsx)("span",{children:t("cms.builder.preview.title")}),(0,jsx_runtime.jsx)(atoms.dO,{checked:showPreview,onChange:togglePreview})]}),(0,jsx_runtime.jsxs)("label",{className:"flex items-center justify-between gap-4 text-sm",children:[(0,jsx_runtime.jsx)("span",{children:t("cms.builder.view.comments")}),(0,jsx_runtime.jsx)(atoms.dO,{checked:showComments,onChange:toggleComments})]}),"boolean"==typeof showPalette&&togglePalette&&(0,jsx_runtime.jsxs)("label",{className:"flex items-center justify-between gap-4 text-sm",children:[(0,jsx_runtime.jsx)("span",{children:t("cms.builder.drag.palette")}),(0,jsx_runtime.jsx)(atoms.dO,{checked:showPalette,onChange:togglePalette})]}),(0,jsx_runtime.jsxs)("label",{className:"flex items-center justify-between gap-4 text-sm",children:[(0,jsx_runtime.jsx)("span",{children:t("cms.builder.view.layerSelectionParentFirst")}),(0,jsx_runtime.jsx)(atoms.dO,{checked:!!parentFirst,onChange:()=>null==onParentFirstChange?void 0:onParentFirstChange(!parentFirst)})]}),(0,jsx_runtime.jsxs)("label",{className:"flex items-center justify-between gap-4 text-sm",children:[(0,jsx_runtime.jsx)("span",{children:t("cms.builder.view.crossBreakpointNotifications")}),(0,jsx_runtime.jsx)(atoms.dO,{checked:!!crossBreakpointNotices,onChange:()=>null==onCrossBreakpointNoticesChange?void 0:onCrossBreakpointNoticesChange(!crossBreakpointNotices)})]}),gridProps&&(0,jsx_runtime.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-medium",children:t("cms.builder.view.canvasIndications")}),(0,jsx_runtime.jsxs)("label",{className:"flex items-center justify-between gap-4 text-sm",children:[(0,jsx_runtime.jsx)("span",{children:t("cms.builder.view.grid")}),(0,jsx_runtime.jsx)(atoms.dO,{checked:!!gridProps.showGrid,onChange:gridProps.toggleGrid})]}),(0,jsx_runtime.jsxs)("label",{className:"flex items-center justify-between gap-4 text-sm",children:[(0,jsx_runtime.jsx)("span",{children:t("cms.builder.view.snapToGrid")}),(0,jsx_runtime.jsx)(atoms.dO,{checked:!!gridProps.snapToGrid,onChange:gridProps.toggleSnap})]}),(0,jsx_runtime.jsxs)("label",{className:"flex items-center justify-between gap-4 text-sm",children:[(0,jsx_runtime.jsx)("span",{children:t("cms.builder.view.rulers")}),(0,jsx_runtime.jsx)(atoms.dO,{checked:!!gridProps.showRulers,onChange:gridProps.toggleRulers})]}),(0,jsx_runtime.jsxs)("label",{className:"flex items-center justify-between gap-4 text-sm",children:[(0,jsx_runtime.jsx)("span",{children:t("cms.builder.view.baselineGrid")}),(0,jsx_runtime.jsx)(atoms.dO,{checked:!!gridProps.showBaseline,onChange:gridProps.toggleBaseline})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-sm",children:t("cms.builder.view.baselineStep")}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("input",{type:"range",min:2,max:64,step:1,value:gridProps.baselineStep,onChange:e=>{var _gridProps_setBaselineStep;return null===(_gridProps_setBaselineStep=gridProps.setBaselineStep)||void 0===_gridProps_setBaselineStep?void 0:_gridProps_setBaselineStep.call(gridProps,Number(e.target.value))}}),(0,jsx_runtime.jsx)("span",{className:"w-8 text-end text-sm",children:gridProps.baselineStep})]})]})]})]})}function ViewMenu(props){const{open,onOpenChange,...rest}=props,contentProps=rest,t=(0,src.c3)();return(0,jsx_runtime.jsxs)(atoms.AM,{open,onOpenChange,children:[(0,jsx_runtime.jsx)(atoms.m_,{text:t("cms.builder.view.options"),children:(0,jsx_runtime.jsx)(atoms.Wv,{asChild:!0,children:(0,jsx_runtime.jsx)(atoms.$n,{variant:"outline","aria-label":t("cms.builder.view.options"),children:t("cms.builder.view.title")})})}),(0,jsx_runtime.jsx)(atoms.hl,{className:"w-64",children:(0,jsx_runtime.jsx)(ViewMenuContent,{...contentProps})})]})}MoreMenu.__docgenInfo={description:"",methods:[],displayName:"MoreMenu",props:{items:{required:!1,tsType:{name:"Array",elements:[{name:"Item"}],raw:"Item[]"},description:"",defaultValue:{value:"[]",computed:!1}},content:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}},ViewMenuContent.__docgenInfo={description:"",methods:[],displayName:"ViewMenuContent",props:{showPreview:{required:!0,tsType:{name:"boolean"},description:""},togglePreview:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},showComments:{required:!0,tsType:{name:"boolean"},description:""},toggleComments:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},startTour:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},showPalette:{required:!1,tsType:{name:"boolean"},description:""},togglePalette:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},parentFirst:{required:!1,tsType:{name:"boolean"},description:""},onParentFirstChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(v: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"v"}],return:{name:"void"}}},description:""},gridProps:{required:!1,tsType:{name:"ComponentProps",elements:[{name:"GridSettings"}],raw:"ComponentProps<typeof GridSettings>"},description:""},crossBreakpointNotices:{required:!1,tsType:{name:"boolean"},description:""},onCrossBreakpointNoticesChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(v: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"v"}],return:{name:"void"}}},description:""},open:{required:!1,tsType:{name:"boolean"},description:""},onOpenChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""}}},ViewMenu.__docgenInfo={description:"",methods:[],displayName:"ViewMenu",props:{showPreview:{required:!0,tsType:{name:"boolean"},description:""},togglePreview:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},showComments:{required:!0,tsType:{name:"boolean"},description:""},toggleComments:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},startTour:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},showPalette:{required:!1,tsType:{name:"boolean"},description:""},togglePalette:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},parentFirst:{required:!1,tsType:{name:"boolean"},description:""},onParentFirstChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(v: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"v"}],return:{name:"void"}}},description:""},gridProps:{required:!1,tsType:{name:"ComponentProps",elements:[{name:"GridSettings"}],raw:"ComponentProps<typeof GridSettings>"},description:""},crossBreakpointNotices:{required:!1,tsType:{name:"boolean"},description:""},onCrossBreakpointNoticesChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(v: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"v"}],return:{name:"void"}}},description:""},open:{required:!1,tsType:{name:"boolean"},description:""},onOpenChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""}}};var DesignMenu=__webpack_require__("../../packages/ui/src/components/cms/page-builder/DesignMenu.tsx");function Item({label,onClick,icon,active=!1}){return(0,jsx_runtime.jsx)(atoms.m_,{text:label,children:(0,jsx_runtime.jsx)("button",{type:"button",className:`h-10 w-10 rounded-md border ${active?"bg-primary/10 border-primary ring-1 ring-primary/30":"bg-surface-2"} hover:bg-surface-3`,"aria-label":label,onClick,title:label,"aria-pressed":active,children:(0,jsx_runtime.jsx)("span",{"aria-hidden":!0,className:"text-foreground",children:icon})})})}function LeftRail({onOpenAdd,onOpenSections,onOpenLayers,onOpenPages,onOpenSiteStyles,onOpenGlobalSections,onOpenCMS,onToggleInspector,isAddActive=!1,isSectionsActive=!1,isLayersActive=!1,isInspectorActive=!1,isFontsActive=!1,isSiteStylesActive=!1,gridProps,startTour,toggleComments,showComments,togglePreview,showPreview,showPalette,togglePalette,parentFirst,onParentFirstChange,crossBreakpointNotices,onCrossBreakpointNoticesChange,breakpoints,setBreakpoints,hideAddElements,hidePages,hideGlobalSections,hideSiteStyles,hideCMS,onOpenFonts}){const t=(0,src.c3)();return(0,jsx_runtime.jsxs)("aside",{className:"ms-6 flex w-16 shrink-0 flex-col items-center gap-4 border-r bg-surface-1/80 py-4",children:[(0,jsx_runtime.jsx)(Item,{label:String(t("cms.builder.presets.addSection")),onClick:onOpenSections,icon:(0,jsx_runtime.jsx)(react_icons_esm.DNu,{className:"h-5 w-5"}),active:isSectionsActive}),!hideAddElements&&(0,jsx_runtime.jsx)(Item,{label:String(t("cms.builder.leftRail.addElements")),onClick:onOpenAdd,icon:(0,jsx_runtime.jsx)(react_icons_esm.c11,{className:"h-5 w-5"}),active:isAddActive}),(0,jsx_runtime.jsx)(Item,{label:String(t("cms.builder.layers.title")),onClick:onOpenLayers,icon:(0,jsx_runtime.jsx)(react_icons_esm.mLz,{className:"h-5 w-5"}),active:isLayersActive}),!hidePages&&(0,jsx_runtime.jsx)(Item,{label:String(t("cms.breadcrumb.pages")),onClick:onOpenPages,icon:(0,jsx_runtime.jsx)(react_icons_esm.XKI,{className:"h-5 w-5"})}),!hideGlobalSections&&(0,jsx_runtime.jsx)(Item,{label:String(t("cms.builder.leftRail.globalSections")),onClick:onOpenGlobalSections,icon:(0,jsx_runtime.jsx)(react_icons_esm.DNu,{className:"h-5 w-5"})}),!hideSiteStyles&&(0,jsx_runtime.jsx)(Item,{label:String(t("cms.builder.leftRail.siteStyles")),onClick:onOpenSiteStyles,icon:(0,jsx_runtime.jsx)(react_icons_esm.WHp,{className:"h-5 w-5"}),active:isSiteStylesActive}),onOpenFonts&&(0,jsx_runtime.jsx)(Item,{label:String(t("cms.builder.leftRail.typography")),onClick:onOpenFonts,icon:(0,jsx_runtime.jsx)(react_icons_esm.NQl,{className:"h-5 w-5"}),active:isFontsActive}),!hideCMS&&(0,jsx_runtime.jsx)(Item,{label:String(t("cms.builder.leftRail.cms")),onClick:onOpenCMS,icon:(0,jsx_runtime.jsx)(react_icons_esm.KbA,{className:"h-5 w-5"})}),(0,jsx_runtime.jsx)("div",{className:"mt-auto"}),(0,jsx_runtime.jsx)(Item,{label:String(t("cms.builder.leftRail.toggleInspector")),onClick:onToggleInspector,icon:(0,jsx_runtime.jsx)(react_icons_esm.vKP,{className:"h-5 w-5"}),active:isInspectorActive}),(0,jsx_runtime.jsx)("div",{className:"mt-8",children:(0,jsx_runtime.jsx)(MoreMenu,{content:(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-4",children:[gridProps&&(0,jsx_runtime.jsx)(ViewMenuContent,{showPreview:!!showPreview,togglePreview:togglePreview||(()=>{}),showComments:!!showComments,toggleComments:toggleComments||(()=>{}),startTour:startTour||(()=>{}),showPalette:!!showPalette,togglePalette:togglePalette||(()=>{}),parentFirst,onParentFirstChange,gridProps,crossBreakpointNotices,onCrossBreakpointNoticesChange}),(0,jsx_runtime.jsx)(DesignMenu.b,{breakpoints:null!=breakpoints?breakpoints:[],onChangeBreakpoints:list=>null==setBreakpoints?void 0:setBreakpoints(list)})]})})})]})}LeftRail.__docgenInfo={description:"",methods:[],displayName:"LeftRail",props:{onOpenAdd:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onOpenSections:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onOpenLayers:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onOpenPages:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onOpenSiteStyles:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onOpenFonts:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onOpenGlobalSections:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onOpenCMS:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onToggleInspector:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},isAddActive:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isSectionsActive:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isLayersActive:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isInspectorActive:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isFontsActive:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isSiteStylesActive:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},gridProps:{required:!1,tsType:{name:"ReactComponentProps",raw:"React.ComponentProps<typeof GridSettings>",elements:[{name:"GridSettings"}]},description:""},startTour:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},toggleComments:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},showComments:{required:!1,tsType:{name:"boolean"},description:""},togglePreview:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},showPreview:{required:!1,tsType:{name:"boolean"},description:""},showPalette:{required:!1,tsType:{name:"boolean"},description:""},togglePalette:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},parentFirst:{required:!1,tsType:{name:"boolean"},description:""},onParentFirstChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(v: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"v"}],return:{name:"void"}}},description:""},crossBreakpointNotices:{required:!1,tsType:{name:"boolean"},description:""},onCrossBreakpointNoticesChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(v: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"v"}],return:{name:"void"}}},description:""},breakpoints:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"Breakpoint[]"},description:""},setBreakpoints:{required:!1,tsType:{name:"signature",type:"function",raw:"(list: Breakpoint[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"Breakpoint[]"},name:"list"}],return:{name:"void"}}},description:""},hideAddElements:{required:!1,tsType:{name:"boolean"},description:""},hidePages:{required:!1,tsType:{name:"boolean"},description:""},hideGlobalSections:{required:!1,tsType:{name:"boolean"},description:""},hideSiteStyles:{required:!1,tsType:{name:"boolean"},description:""},hideCMS:{required:!1,tsType:{name:"boolean"},description:""}}};var Palette=__webpack_require__("../../packages/ui/src/components/cms/page-builder/Palette.tsx");const PaletteSidebar=({width:_width,onWidthChange,onAdd,onInsertImage,onSetSectionBackground,selectedIsSection,onInsertPreset,mode="all"})=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("aside",{className:"shrink-0",style:{width:350},"data-tour":"palette","data-cy":"pb-palette",children:(0,jsx_runtime.jsx)(Palette.A,{onAdd,onInsertImage,onSetSectionBackground,selectedIsSection,onInsertPreset,mode})}),(0,jsx_runtime.jsx)("div",{role:"separator","aria-label":"Resize palette",className:"w-1 shrink-0 cursor-col-resize select-none bg-border/50 hover:bg-border",onPointerDown:e=>{e.clientX;const onMove=ev=>{ev.clientX;onWidthChange(350)},onUp=()=>{window.removeEventListener("pointermove",onMove),window.removeEventListener("pointerup",onUp)};window.addEventListener("pointermove",onMove),window.addEventListener("pointerup",onUp)}})]}),page_builder_PaletteSidebar=PaletteSidebar;PaletteSidebar.__docgenInfo={description:"Renders the left palette sidebar, including a drag-resize handle.\nSingle purpose: palette column UI + width resize behavior.",methods:[],displayName:"PaletteSidebar",props:{width:{required:!0,tsType:{name:"number"},description:""},onWidthChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(w: number) => void",signature:{arguments:[{type:{name:"number"},name:"w"}],return:{name:"void"}}},description:""},onAdd:{required:!0,tsType:{name:"signature",type:"function",raw:"(type: ComponentType) => void",signature:{arguments:[{type:{name:"union",raw:"| keyof typeof atomRegistry\n| keyof typeof moleculeRegistry\n| keyof typeof organismRegistry\n| keyof typeof containerRegistry\n| keyof typeof layoutRegistry",elements:[{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"}]},name:"type"}],return:{name:"void"}}},description:""},onInsertImage:{required:!0,tsType:{name:"signature",type:"function",raw:"(url: string) => void",signature:{arguments:[{type:{name:"string"},name:"url"}],return:{name:"void"}}},description:""},onSetSectionBackground:{required:!0,tsType:{name:"signature",type:"function",raw:"(url: string) => void",signature:{arguments:[{type:{name:"string"},name:"url"}],return:{name:"void"}}},description:""},selectedIsSection:{required:!0,tsType:{name:"boolean"},description:""},onInsertPreset:{required:!1,tsType:{name:"signature",type:"function",raw:"(component: PageComponent) => void",signature:{arguments:[{type:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},name:"component"}],return:{name:"void"}}},description:""},mode:{required:!1,tsType:{name:"union",raw:'"elements" | "sections" | "all"',elements:[{name:"literal",value:'"elements"'},{name:"literal",value:'"sections"'},{name:"literal",value:'"all"'}]},description:"",defaultValue:{value:'"all"',computed:!1}}}};var shadcn=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),browser=__webpack_require__("../../node_modules/.pnpm/ulid@3.0.1/node_modules/ulid/dist/browser/index.js"),builtInSections_data=__webpack_require__("../../packages/ui/src/components/cms/page-builder/builtInSections.data.ts"),previewImages=__webpack_require__("../../packages/ui/src/components/cms/page-builder/previewImages.ts"),next_image=__webpack_require__("../../__mocks__/next/image.js"),Grid=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Grid.tsx"),Inline=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Inline.tsx");function cloneWithIds(node){const base=node,cloned={...base,id:(0,browser.Z0)()},children=base.children;return Array.isArray(children)&&(cloned.children=children.map(c=>cloneWithIds(c))),cloned}function SectionsPanel({shop,onInsert,onInsertLinked}){const t=(0,src.c3)(),builtInSections=react.useMemo(()=>(0,builtInSections_data.G)(k=>t(k)),[t]),[items,setItems]=(0,react.useState)([]),[q,setQ]=(0,react.useState)(""),[_allTags,setAllTags]=(0,react.useState)([]),[_selectedTags,setSelectedTags]=(0,react.useState)([]),[page,setPage]=(0,react.useState)(1),[total,setTotal]=(0,react.useState)(0),[loading,setLoading]=(0,react.useState)(!1),abortRef=(0,react.useRef)(null),debounceRef=(0,react.useRef)(null),load=reset=>{const s=String(shop||"");if(!s)return;abortRef.current&&abortRef.current.abort();const ctrl=new AbortController;abortRef.current=ctrl,setLoading(!0);const params=new URLSearchParams;q.trim()&&params.set("q",q.trim()),params.set("page",String(reset?1:page)),params.set("pageSize",String(100)),fetch(`/cms/api/sections/${encodeURIComponent(s)}?${params.toString()}`,{signal:ctrl.signal}).then(r=>r.ok?r.json():Promise.reject(new Error(String(r.status)))).then(json=>{json&&(Array.isArray(json)?(setItems(json),setTotal(json.length),setAllTags([])):json&&Array.isArray(json.items)&&(setItems(prev=>reset?json.items:[...prev,...json.items]),setTotal(Number(json.total||0)),setAllTags(Array.isArray(json.allTags)?json.allTags:[])))}).catch(()=>{}).finally(()=>setLoading(!1))};(0,react.useEffect)(()=>{setItems([]),setPage(1),setTotal(0),setAllTags([]),setSelectedTags([]),load(!0)},[shop]),(0,react.useEffect)(()=>(debounceRef.current&&window.clearTimeout(debounceRef.current),debounceRef.current=window.setTimeout(()=>{setPage(1),setItems([]),load(!0)},250),()=>{debounceRef.current&&window.clearTimeout(debounceRef.current)}),[q]);const hasMore=items.length<total;return(0,jsx_runtime.jsxs)("aside",{className:"w-full shrink-0","data-cy":"pb-sections-panel",children:[(0,jsx_runtime.jsx)("div",{className:"flex items-center justify-between gap-2 p-2",children:(0,jsx_runtime.jsx)("div",{className:"text-sm font-semibold",children:t("cms.builder.sections.title")})}),(0,jsx_runtime.jsx)("div",{className:"p-2",children:(0,jsx_runtime.jsx)(shadcn.pd,{value:q,onChange:e=>setQ(e.target.value),placeholder:t("cms.builder.sections.search.placeholder"),"aria-label":t("cms.builder.sections.search.aria")})}),(0,jsx_runtime.jsxs)("div",{className:"px-2 pb-2",children:[(0,jsx_runtime.jsx)("div",{className:"mb-1 text-xs font-semibold text-muted-foreground",children:t("cms.builder.sections.demoPresets")}),(0,jsx_runtime.jsxs)(Inline.c,{gap:1,className:"flex-wrap",children:[(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded border px-2 py-1 text-xs min-h-10 min-w-10",onClick:()=>onInsert(cloneWithIds({id:(0,browser.Z0)(),type:"Section",children:[{id:(0,browser.Z0)(),type:"Text",text:t("cms.builder.sections.presets.titlePlusButton.text")},{id:(0,browser.Z0)(),type:"Button",label:t("cms.builder.cta"),href:"/shop"}]})),children:t("cms.builder.sections.presets.titleCta")}),(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded border px-2 py-1 text-xs min-h-10 min-w-10",onClick:()=>onInsert(cloneWithIds({id:(0,browser.Z0)(),type:"Section",children:[{id:(0,browser.Z0)(),type:"Image",src:"/hero/slide-1.jpg",alt:""}]})),children:t("cms.builder.sections.presets.imageHero")})]})]}),(0,jsx_runtime.jsxs)("div",{className:"px-2 pb-2",children:[(0,jsx_runtime.jsx)("div",{className:"mb-1 text-xs font-semibold text-muted-foreground",children:t("cms.builder.sections.builtin")}),(()=>{const groups={};for(const s of builtInSections){var _groups,_key;const key=s.previewType.startsWith("HeaderSection")?String(t("cms.builder.sections.groups.headers")):s.previewType.startsWith("FooterSection")?String(t("cms.builder.sections.groups.footers")):String(t("cms.builder.sections.groups.essentials"));((_groups=groups)[_key=key]||(_groups[_key]=[])).push(s)}return[String(t("cms.builder.sections.groups.headers")),String(t("cms.builder.sections.groups.footers")),String(t("cms.builder.sections.groups.essentials"))].filter(k=>Array.isArray(groups[k])&&groups[k].length>0).map(k=>(0,jsx_runtime.jsxs)("div",{className:"mb-2",children:[(0,jsx_runtime.jsx)("div",{className:"mb-1 text-xs font-medium text-muted-foreground",children:k}),(0,jsx_runtime.jsx)(Grid.x,{cols:1,gap:2,children:groups[k].map(p=>{const resolvedPreview="/window.svg"===p.preview?(0,previewImages.w)(p.previewType):p.preview;var _p_label;const labelNode=p.labelKey?t(p.labelKey):null!==(_p_label=p.label)&&void 0!==_p_label?_p_label:"";var _p_description;const descNode=p.descriptionKey?t(p.descriptionKey):null!==(_p_description=p.description)&&void 0!==_p_description?_p_description:"";var _p_label1;const titleText=String(p.labelKey?t(p.labelKey):null!==(_p_label1=p.label)&&void 0!==_p_label1?_p_label1:"");return(0,jsx_runtime.jsxs)("button",{type:"button",className:"rounded border p-1 text-start hover:bg-muted min-h-10 min-w-10",title:titleText,onClick:()=>onInsert(cloneWithIds(p.build())),children:[(0,jsx_runtime.jsx)("div",{className:"relative w-full aspect-video",children:(0,jsx_runtime.jsx)(next_image.A,{src:resolvedPreview,alt:"",fill:!0,className:"rounded border bg-muted object-cover","aria-hidden":!0})}),(0,jsx_runtime.jsx)("div",{className:"mt-1 truncate text-xs",title:titleText,children:labelNode}),Boolean(p.descriptionKey||p.description)&&(0,jsx_runtime.jsx)("div",{className:"truncate text-xs text-muted-foreground",title:String(descNode),children:descNode})]},p.id)})})]},k))})()]}),(0,jsx_runtime.jsxs)(Stack.B,{gap:2,className:"overflow-auto p-2",style:{maxHeight:"calc(100svh - 6rem)"},children:[0===items.length&&!loading&&(0,jsx_runtime.jsx)("div",{className:"p-2 text-sm text-muted-foreground",children:t("cms.builder.sections.none")}),items.map(s=>(0,jsx_runtime.jsxs)("div",{className:"space-y-1 rounded border p-2",children:[(0,jsx_runtime.jsx)("div",{className:"truncate text-sm font-medium",children:s.label}),(0,jsx_runtime.jsx)("div",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:s.status}),s.thumbnail?(0,jsx_runtime.jsx)("div",{className:"relative mt-1 aspect-video overflow-hidden rounded border bg-muted",children:(0,jsx_runtime.jsx)(next_image.A,{src:s.thumbnail,alt:"",fill:!0,className:"object-cover","aria-hidden":!0,"data-aspect":"16/9"})}):(0,jsx_runtime.jsx)("div",{className:"mt-1 aspect-video rounded border bg-muted/40"}),Array.isArray(s.tags)&&s.tags.length>0&&(0,jsx_runtime.jsx)(Inline.c,{className:"mt-1",gap:1,children:s.tags.map(t=>(0,jsx_runtime.jsx)("span",{className:"rounded bg-muted px-1.5 py-0.5 text-xs text-muted-foreground",children:t},t))}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 pt-1",children:[(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",className:"min-h-10 min-w-10 px-2 text-xs",onClick:()=>onInsert(cloneWithIds(s.template)),children:t("cms.builder.sections.insertCopy")}),onInsertLinked&&(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",className:"min-h-10 min-w-10 px-2 text-xs",onClick:()=>onInsertLinked({globalId:s.id,label:s.label,component:s.template}),children:t("cms.builder.sections.insertLinked")})]})]},s.id)),(loading||hasMore)&&(0,jsx_runtime.jsx)("div",{className:"p-2",children:(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",className:"min-h-10 px-2 text-xs w-full",disabled:loading,onClick:()=>{loading||(setPage(p=>p+1),load(!1))},children:t(loading?"cms.builder.loading":hasMore?"cms.builder.loadMore":"cms.builder.loaded")})})]})]})}SectionsPanel.__docgenInfo={description:"",methods:[],displayName:"SectionsPanel",props:{shop:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},onInsert:{required:!0,tsType:{name:"signature",type:"function",raw:"(component: PageComponent) => void",signature:{arguments:[{type:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},name:"component"}],return:{name:"void"}}},description:""},onInsertLinked:{required:!1,tsType:{name:"signature",type:"function",raw:"(item: { globalId: string; label: string; component: PageComponent }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ globalId: string; label: string; component: PageComponent }",signature:{properties:[{key:"globalId",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}}]}},name:"item"}],return:{name:"void"}}},description:""}}};var LayersPanel=__webpack_require__("../../packages/ui/src/components/cms/page-builder/LayersPanel.tsx");const LayersSidebar=({width,onWidthChange,components,selectedIds,onSelectIds,dispatch,editor,viewport,crossNotices=!0})=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("aside",{className:"shrink-0",style:{width},"data-cy":"pb-layers-left",children:(0,jsx_runtime.jsx)("div",{className:"p-2",children:(0,jsx_runtime.jsx)(LayersPanel.A,{components,selectedIds,onSelectIds,dispatch,editor,viewport,crossNotices})})}),(0,jsx_runtime.jsx)("div",{role:"separator","aria-label":"Resize layers",className:"w-1 shrink-0 cursor-col-resize select-none bg-border/50 hover:bg-border",onPointerDown:e=>{const startX=e.clientX,startW=width,onMove=ev=>{const dx=ev.clientX-startX,next=Math.min(Math.max(startW+dx,200),360);onWidthChange(next)},onUp=()=>{window.removeEventListener("pointermove",onMove),window.removeEventListener("pointerup",onUp)};window.addEventListener("pointermove",onMove),window.addEventListener("pointerup",onUp)}})]}),page_builder_LayersSidebar=LayersSidebar;LayersSidebar.__docgenInfo={description:"",methods:[],displayName:"LayersSidebar",props:{width:{required:!0,tsType:{name:"number"},description:""},onWidthChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(w: number) => void",signature:{arguments:[{type:{name:"number"},name:"w"}],return:{name:"void"}}},description:""},components:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onSelectIds:{required:!0,tsType:{name:"signature",type:"function",raw:"(ids: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"ids"}],return:{name:"void"}}},description:""},dispatch:{required:!0,tsType:{name:"signature",type:"function",raw:"(action: Action) => void",signature:{arguments:[{type:{name:"union",raw:"| ChangeAction\n| UndoAction\n| RedoAction\n| SetGridColsAction\n| SetBreakpointsAction\n| UpdateEditorAction",elements:[{name:"union",raw:"| AddAction\n| MoveAction\n| RemoveAction\n| DuplicateAction\n| UpdateAction\n| ResizeAction\n| SetAction",elements:[{name:"signature",type:"object",raw:'{\n  type: "add";\n  component: PageComponent;\n  parentId?: string;\n  index?: number;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"add"',required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!1}}]}},{name:"signature",type:"object",raw:'{\n  type: "move";\n  from: { parentId?: string; index: number };\n  to: { parentId?: string; index: number };\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"move"',required:!0}},{key:"from",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}},{key:"to",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "remove"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"remove"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "duplicate"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"duplicate"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update";\n  id: string;\n  patch: Partial<PageComponent>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"Partial<PageComponent>",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "resize";\n  id: string;\n  width?: string;\n  height?: string;\n  left?: string;\n  top?: string;\n  right?: string;\n  bottom?: string;\n  leftDesktop?: string;\n  leftTablet?: string;\n  leftMobile?: string;\n  topDesktop?: string;\n  topTablet?: string;\n  topMobile?: string;\n  widthDesktop?: string;\n  widthTablet?: string;\n  widthMobile?: string;\n  heightDesktop?: string;\n  heightTablet?: string;\n  heightMobile?: string;\n  marginDesktop?: string;\n  marginTablet?: string;\n  marginMobile?: string;\n  paddingDesktop?: string;\n  paddingTablet?: string;\n  paddingMobile?: string;\n  [key: string]: string | undefined;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"resize"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!1}},{key:"height",value:{name:"string",required:!1}},{key:"left",value:{name:"string",required:!1}},{key:"top",value:{name:"string",required:!1}},{key:"right",value:{name:"string",required:!1}},{key:"bottom",value:{name:"string",required:!1}},{key:"leftDesktop",value:{name:"string",required:!1}},{key:"leftTablet",value:{name:"string",required:!1}},{key:"leftMobile",value:{name:"string",required:!1}},{key:"topDesktop",value:{name:"string",required:!1}},{key:"topTablet",value:{name:"string",required:!1}},{key:"topMobile",value:{name:"string",required:!1}},{key:"widthDesktop",value:{name:"string",required:!1}},{key:"widthTablet",value:{name:"string",required:!1}},{key:"widthMobile",value:{name:"string",required:!1}},{key:"heightDesktop",value:{name:"string",required:!1}},{key:"heightTablet",value:{name:"string",required:!1}},{key:"heightMobile",value:{name:"string",required:!1}},{key:"marginDesktop",value:{name:"string",required:!1}},{key:"marginTablet",value:{name:"string",required:!1}},{key:"marginMobile",value:{name:"string",required:!1}},{key:"paddingDesktop",value:{name:"string",required:!1}},{key:"paddingTablet",value:{name:"string",required:!1}},{key:"paddingMobile",value:{name:"string",required:!1}},{key:{name:"string"},value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set"; components: PageComponent[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set"',required:!0}},{key:"components",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"PageComponent[]",required:!0}}]}}]},{name:"signature",type:"object",raw:'{ type: "undo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"undo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "redo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"redo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-grid-cols"; gridCols: number }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-grid-cols"',required:!0}},{key:"gridCols",value:{name:"number",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-breakpoints"; breakpoints: { id: string; label: string; min?: number; max?: number }[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-breakpoints"',required:!0}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update-editor";\n  id: string;\n  patch: Partial<EditorFlags>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update-editor"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  hiddenDeviceIds?: string[];\n  /** Legacy single strategy (mobile); kept for backwards-compat */\n  stackStrategy?: "default" | "reverse" | "custom";\n  /** Per-device stacking strategies */\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  /** Custom orders per device (used when corresponding strategy === "custom") */\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n  global?: {\n    id: string;\n    overrides?: unknown;\n    pinned?: boolean;\n    editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n  };\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"hiddenDeviceIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Legacy single strategy (mobile); kept for backwards-compat"},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Per-device stacking strategies"},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1},description:'Custom orders per device (used when corresponding strategy === "custom")'},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}},{key:"global",value:{name:"signature",type:"object",raw:'{\n  id: string;\n  overrides?: unknown;\n  pinned?: boolean;\n  editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"overrides",value:{name:"unknown",required:!1}},{key:"pinned",value:{name:"boolean",required:!1}},{key:"editingSize",value:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]}],raw:'Record<"desktop" | "tablet" | "mobile", number | null>'}],raw:'Partial<Record<"desktop" | "tablet" | "mobile", number | null>>',required:!1}}]},required:!1}}]}}],raw:"Partial<EditorFlags>",required:!0}}]}}]},name:"action"}],return:{name:"void"}}},description:""},editor:{required:!1,tsType:{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},description:""},viewport:{required:!1,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:""},crossNotices:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}};const QuickPaletteControls=({onAdd,onInsertImage,onSetSectionBackground,selectedIsSection,onShowPalette})=>(0,jsx_runtime.jsxs)("div",{className:"shrink-0 w-8 flex flex-col items-center gap-2 pt-2",children:[(0,jsx_runtime.jsxs)(atoms.AM,{children:[(0,jsx_runtime.jsx)(atoms.Wv,{asChild:!0,children:(0,jsx_runtime.jsx)(atoms.m_,{text:"Quick components",children:(0,jsx_runtime.jsx)("button",{type:"button","aria-label":"Quick components",className:"rounded border border-border-2 bg-surface-2 px-1 text-xs min-h-10 min-w-10 text-center",children:"🧩"})})}),(0,jsx_runtime.jsx)(atoms.hl,{className:"w-80 p-2",children:(0,jsx_runtime.jsx)("div",{className:"overflow-auto max-h-[calc(100svh-6rem)]",children:(0,jsx_runtime.jsx)(Palette.A,{onAdd,onInsertImage,onSetSectionBackground,selectedIsSection,defaultTab:"components"})})})]}),(0,jsx_runtime.jsx)(atoms.m_,{text:"Show palette",children:(0,jsx_runtime.jsx)("button",{type:"button","aria-label":"Show palette",className:"rounded border border-border-2 bg-surface-2 px-1 text-xs min-h-10 min-w-10 text-center",onClick:onShowPalette,title:"Show palette",children:"▶"})})]}),page_builder_QuickPaletteControls=QuickPaletteControls;QuickPaletteControls.__docgenInfo={description:"",methods:[],displayName:"QuickPaletteControls",props:{onAdd:{required:!0,tsType:{name:"signature",type:"function",raw:"(type: ComponentType) => void",signature:{arguments:[{type:{name:"union",raw:"| keyof typeof atomRegistry\n| keyof typeof moleculeRegistry\n| keyof typeof organismRegistry\n| keyof typeof containerRegistry\n| keyof typeof layoutRegistry",elements:[{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"}]},name:"type"}],return:{name:"void"}}},description:""},onInsertImage:{required:!0,tsType:{name:"signature",type:"function",raw:"(url: string) => void",signature:{arguments:[{type:{name:"string"},name:"url"}],return:{name:"void"}}},description:""},onSetSectionBackground:{required:!0,tsType:{name:"signature",type:"function",raw:"(url: string) => void",signature:{arguments:[{type:{name:"string"},name:"url"}],return:{name:"void"}}},description:""},selectedIsSection:{required:!0,tsType:{name:"boolean"},description:""},onShowPalette:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var Cluster=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Cluster.tsx"),usePreviewTokens=__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/usePreviewTokens.ts"),navigation=__webpack_require__("../../__mocks__/next/navigation.js"),shared_utils_src=__webpack_require__("../../packages/shared-utils/src/index.ts"),presets=__webpack_require__("../../packages/ui/src/components/cms/style/presets.json");function FontsPanel({open,onOpenChange,variant="dialog"}){var _usePathname;const pathname=null!==(_usePathname=(0,navigation.usePathname)())&&void 0!==_usePathname?_usePathname:"",shop=(0,react.useMemo)(()=>{var _getShopFromPath;return null!==(_getShopFromPath=(0,shared_utils_src.e6)(pathname))&&void 0!==_getShopFromPath?_getShopFromPath:""},[pathname]),preview=(0,usePreviewTokens.Ay)(),[tokens,setTokens]=(0,react.useState)(preview),[baseTokens,setBaseTokens]=(0,react.useState)({}),tokensRef=(0,react.useRef)(tokens),baseTokensRef=(0,react.useRef)(baseTokens);(0,react.useEffect)(()=>{tokensRef.current=tokens},[tokens]),(0,react.useEffect)(()=>{baseTokensRef.current=baseTokens},[baseTokens]);const pendingRef=(0,react.useRef)({}),timeoutRef=(0,react.useRef)(null),scheduleSave=(0,react.useCallback)(patch=>{0!==Object.keys(patch).length&&(pendingRef.current={...pendingRef.current,...patch},timeoutRef.current&&window.clearTimeout(timeoutRef.current),timeoutRef.current=window.setTimeout(async()=>{const body={themeOverrides:pendingRef.current};pendingRef.current={};try{shop&&await fetch(`/cms/api/shops/${shop}/theme`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(body)})}catch(e){}},500))},[shop]),diffTokens=(0,react.useCallback)((prev,next)=>{const patch={};return Object.entries(next).forEach(([key,value])=>{prev[key]!==value&&(patch[key]=value)}),Object.keys(prev).forEach(key=>{key in next||(patch[key]=null)}),patch},[]),applyTokens=(0,react.useCallback)(next=>{const previous=tokensRef.current,patch=diffTokens(previous,next);tokensRef.current=next,setTokens(next),(0,usePreviewTokens._5)(next),Object.keys(patch).length>0&&scheduleSave(patch)},[diffTokens,scheduleSave]);(0,react.useEffect)(()=>{let cancelled=!1;return open&&(async()=>{if(shop)try{const res=await fetch(`/cms/api/shops/${shop}/theme`);if(!res.ok)return;const data=await res.json();if(cancelled)return;const defaults=data.themeDefaults,themeTokens=data.themeTokens;baseTokensRef.current=defaults,tokensRef.current=themeTokens,setBaseTokens(defaults),setTokens(themeTokens),(0,usePreviewTokens._5)(themeTokens)}catch(e){}})(),()=>{cancelled=!0}},[shop,open]);const googleFamilies=(0,react.useMemo)(()=>new Set(["Inter","Space Grotesk","Playfair Display","Lato","Source Sans 3","Montserrat","Rubik","Work Sans","Nunito","Quicksand","Open Sans","Roboto","Merriweather","Poppins"]),[]),ensureGoogle=(0,react.useCallback)(name=>{if(!name)return;const id=`google-font-${name}`;if(!document.getElementById(id)){const link=document.createElement("link");link.id=id,link.rel="stylesheet",link.href=`https://fonts.googleapis.com/css2?family=${name.replace(/ /g,"+")}&display=swap`,document.head.appendChild(link)}},[]),firstFamilyFromStack=(0,react.useCallback)(stack=>{var _stack_split_;if(!stack)return null;const m=stack.match(/"([^"]+)"/);if(m)return m[1];const first=null===(_stack_split_=stack.split(",")[0])||void 0===_stack_split_?void 0:_stack_split_.trim();return!first||first.startsWith("var(")?null:first.replace(/^["']|["']$/g,"")},[]);var _tokens_fontbody,_ref,_ref1,_ref2;const currentBody=null!==(_ref2=null!==(_ref1=null!==(_ref=null!==(_tokens_fontbody=tokens["--font-body"])&&void 0!==_tokens_fontbody?_tokens_fontbody:baseTokens["--font-body"])&&void 0!==_ref?_ref:tokens["--font-sans"])&&void 0!==_ref1?_ref1:baseTokens["--font-sans"])&&void 0!==_ref2?_ref2:"var(--font-sans)";var _tokens_fontheading1,_ref3;const currentH1=null!==(_ref3=null!==(_tokens_fontheading1=tokens["--font-heading-1"])&&void 0!==_tokens_fontheading1?_tokens_fontheading1:baseTokens["--font-heading-1"])&&void 0!==_ref3?_ref3:currentBody;var _tokens_fontheading2,_ref4;const currentH2=null!==(_ref4=null!==(_tokens_fontheading2=tokens["--font-heading-2"])&&void 0!==_tokens_fontheading2?_tokens_fontheading2:baseTokens["--font-heading-2"])&&void 0!==_ref4?_ref4:currentBody;(0,react.useEffect)(()=>{[currentBody,currentH1,currentH2].forEach(stack=>{const name=firstFamilyFromStack(stack);name&&googleFamilies.has(name)&&ensureGoogle(name)})},[currentBody,currentH1,currentH2,firstFamilyFromStack,ensureGoogle,googleFamilies]);const[headingSample,setHeadingSample]=(0,react.useState)("Grumpy wizards make toxic brew"),[bodySample,setBodySample]=(0,react.useState)("The quick brown fox jumps over the lazy dog"),[sizeH1,setSizeH1]=(0,react.useState)(36),[sizeH2,setSizeH2]=(0,react.useState)(24),[sizeBody,setSizeBody]=(0,react.useState)(16),pairings=(0,react.useMemo)(()=>presets.filter(p=>p.id.startsWith("type-")),[]),[tagFilter,setTagFilter]=(0,react.useState)(""),allTags=(0,react.useMemo)(()=>{const t=new Set;return pairings.forEach(p=>(p.tags||[]).forEach(tag=>t.add(tag))),Array.from(t).sort()},[pairings]),filteredPairs=(0,react.useMemo)(()=>tagFilter?pairings.filter(p=>(p.tags||[]).some(t=>t===tagFilter)):pairings,[pairings,tagFilter]),applyPairing=(0,react.useCallback)(p=>{const next={...tokensRef.current};["--font-body","--font-heading-1","--font-heading-2"].forEach(k=>{p.tokens[k]&&(next[k]=p.tokens[k])}),Object.values(p.tokens).forEach(v=>{const name=firstFamilyFromStack(v);name&&googleFamilies.has(name)&&ensureGoogle(name)}),applyTokens(next)},[applyTokens,ensureGoogle,firstFamilyFromStack,googleFamilies]),content=(0,jsx_runtime.jsxs)("div",{className:"space-y-6 p-3",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-semibold",children:"Typography"}),(0,jsx_runtime.jsx)("p",{className:"text-sm text-muted-foreground",children:"Choose three fonts: Body, Heading 1 (H1–H3), Heading 2 (H4–H6). Previews render in the actual fonts."}),(0,jsx_runtime.jsxs)("div",{className:"rounded border bg-surface-2 p-4",children:[(0,jsx_runtime.jsxs)(Inline.c,{wrap:!0,alignY:"end",className:"mb-3 gap-4",children:[(0,jsx_runtime.jsxs)("label",{className:"text-xs",children:["Heading sample",(0,jsx_runtime.jsx)("input",{className:"ms-2 h-8 w-60 rounded border px-2 text-sm",value:headingSample,onChange:e=>setHeadingSample(e.target.value)})]}),(0,jsx_runtime.jsxs)("label",{className:"text-xs",children:["Body sample",(0,jsx_runtime.jsx)("input",{className:"ms-2 h-8 w-60 rounded border px-2 text-sm",value:bodySample,onChange:e=>setBodySample(e.target.value)})]}),(0,jsx_runtime.jsxs)("label",{className:"text-xs",children:["H1 size",(0,jsx_runtime.jsx)("input",{className:"ms-2 align-middle",type:"range",min:20,max:64,value:sizeH1,onChange:e=>setSizeH1(Number(e.target.value))})]}),(0,jsx_runtime.jsxs)("label",{className:"text-xs",children:["H2 size",(0,jsx_runtime.jsx)("input",{className:"ms-2 align-middle",type:"range",min:16,max:40,value:sizeH2,onChange:e=>setSizeH2(Number(e.target.value))})]}),(0,jsx_runtime.jsxs)("label",{className:"text-xs",children:["Body size",(0,jsx_runtime.jsx)("input",{className:"ms-2 align-middle",type:"range",min:12,max:24,value:sizeBody,onChange:e=>setSizeBody(Number(e.target.value))})]})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)("div",{className:"text-xs text-foreground",children:["Heading 1 (H1–H3)"," ",(0,jsx_runtime.jsx)("span",{className:"ms-2 align-middle text-xs text-foreground/70",children:firstFamilyFromStack(currentH1)||""})]}),(0,jsx_runtime.jsx)("div",{className:"text-foreground",style:{fontFamily:currentH1,fontSize:`${sizeH1}px`,lineHeight:1.2},children:headingSample}),(0,jsx_runtime.jsxs)("div",{className:"mt-3 text-xs text-foreground",children:["Heading 2 (H4–H6)"," ",(0,jsx_runtime.jsx)("span",{className:"ms-2 align-middle text-xs text-foreground/70",children:firstFamilyFromStack(currentH2)||""})]}),(0,jsx_runtime.jsx)("div",{className:"text-foreground",style:{fontFamily:currentH2,fontSize:`${sizeH2}px`,lineHeight:1.25},children:headingSample}),(0,jsx_runtime.jsxs)("div",{className:"mt-3 text-xs text-foreground",children:["Body"," ",(0,jsx_runtime.jsx)("span",{className:"ms-2 align-middle text-xs text-foreground/70",children:firstFamilyFromStack(currentBody)||""})]}),(0,jsx_runtime.jsx)("div",{className:"text-foreground",style:{fontFamily:currentBody,fontSize:`${sizeBody}px`,lineHeight:1.5},children:bodySample})]})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)(Cluster.d,{alignY:"center",justify:"between",children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-semibold",children:"Suggested Pairings"}),(0,jsx_runtime.jsxs)(Inline.c,{alignY:"center",className:"text-xs gap-2",children:[(0,jsx_runtime.jsx)("label",{className:"text-foreground",children:"Tag"}),(0,jsx_runtime.jsxs)("select",{className:"rounded border border-border-2 bg-input p-1 text-foreground focus:outline-none focus-visible:focus:ring-2 focus-visible:focus:ring-primary",value:tagFilter,onChange:e=>setTagFilter(e.target.value),children:[(0,jsx_runtime.jsx)("option",{value:"",children:"All"}),allTags.map(t=>(0,jsx_runtime.jsx)("option",{value:t,children:t},t))]})]})]}),(0,jsx_runtime.jsx)(Grid.x,{cols:1,gap:3,children:filteredPairs.map(p=>{const body=p.tokens["--font-body"]||currentBody,h1=p.tokens["--font-heading-1"]||body,h2=p.tokens["--font-heading-2"]||body;return[body,h1,h2].forEach(stack=>{const name=firstFamilyFromStack(stack);name&&googleFamilies.has(name)&&ensureGoogle(name)}),(0,jsx_runtime.jsxs)("div",{className:"rounded border bg-surface-2 p-3",children:[(0,jsx_runtime.jsxs)(Cluster.d,{className:"mb-1 gap-2",alignY:"center",justify:"between",children:[(0,jsx_runtime.jsx)("div",{className:"truncate text-sm font-medium",children:p.name}),(0,jsx_runtime.jsx)("button",{type:"button",className:"min-h-10 min-w-10 rounded border border-border-2 bg-surface-3 px-3 py-1 text-xs text-foreground transition-colors hover:bg-surface-2 focus:outline-none focus-visible:focus:ring-2 focus-visible:focus:ring-primary",onClick:()=>applyPairing(p),children:"Use pairing"})]}),p.tags&&p.tags.length>0&&(0,jsx_runtime.jsx)(Cluster.d,{wrap:!0,className:"mb-2 gap-1 text-xs text-foreground/80",children:p.tags.map(t=>(0,jsx_runtime.jsx)("span",{className:"rounded border border-border-2 bg-surface-3 px-1",children:t},t))}),(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsxs)("div",{className:"text-xs text-foreground",children:["Heading 1"," ",(0,jsx_runtime.jsx)("span",{className:"ms-2 align-middle text-xs text-foreground/70",children:firstFamilyFromStack(h1)||""})]}),(0,jsx_runtime.jsx)("div",{className:"text-foreground",style:{fontFamily:h1,fontSize:`${sizeH1}px`,lineHeight:1.2},children:headingSample}),(0,jsx_runtime.jsxs)("div",{className:"mt-2 text-xs text-foreground",children:["Heading 2"," ",(0,jsx_runtime.jsx)("span",{className:"ms-2 align-middle text-xs text-foreground/70",children:firstFamilyFromStack(h2)||""})]}),(0,jsx_runtime.jsx)("div",{className:"text-foreground",style:{fontFamily:h2,fontSize:`${sizeH2}px`,lineHeight:1.25},children:headingSample}),(0,jsx_runtime.jsxs)("div",{className:"mt-2 text-xs text-foreground",children:["Body"," ",(0,jsx_runtime.jsx)("span",{className:"ms-2 align-middle text-xs text-foreground/70",children:firstFamilyFromStack(body)||""})]}),(0,jsx_runtime.jsx)("div",{className:"text-foreground",style:{fontFamily:body,fontSize:`${sizeBody}px`,lineHeight:1.5},children:bodySample})]})]},p.id)})})]})]});return"sidebar"===variant?(0,jsx_runtime.jsx)("aside",{className:"h-full max-h-full overflow-auto bg-surface-3",role:"region","aria-label":"Typography Panel",children:content}):(0,jsx_runtime.jsx)(shadcn.lG,{open,onOpenChange,children:(0,jsx_runtime.jsxs)(shadcn.Cf,{className:"overflow-auto border bg-surface-3 p-0 shadow-elevation-4",style:{maxHeight:"90dvh",width:"min(100dvw - 2rem, 80rem)"},onOpenAutoFocus:e=>e.preventDefault(),children:[(0,jsx_runtime.jsx)(shadcn.L3,{children:"Typography"}),content]})})}FontsPanel.__docgenInfo={description:"",methods:[],displayName:"FontsPanel",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(v: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"v"}],return:{name:"void"}}},description:""},variant:{required:!1,tsType:{name:"union",raw:'"dialog" | "sidebar"',elements:[{name:"literal",value:'"dialog"'},{name:"literal",value:'"sidebar"'}]},description:"Render mode: dialog (default) or sidebar inline panel",defaultValue:{value:'"dialog"',computed:!1}}}};var ThemePanel=__webpack_require__("../../packages/ui/src/components/cms/page-builder/ThemePanel.tsx");const SidebarPane=({width,children})=>(0,jsx_runtime.jsx)("div",{className:"shrink-0",style:{width},children}),page_builder_SidebarPane=SidebarPane;SidebarPane.__docgenInfo={description:"Simple fixed-width sidebar pane wrapper used in the Page Builder.\nNote: Uses inline style for dynamic width; scoped here to avoid rule noise.",methods:[],displayName:"SidebarPane",props:{width:{required:!0,tsType:{name:"number"},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const PageBuilderLeftPanel=({showPalette,showSections,showLayers,showInspector,paletteWidth,onPaletteWidthChange,layersWidth,onLayersWidthChange,openPalette,openSections,openLayers,onTogglePalette,onToggleInspector,paletteOnAdd,onInsertImageAsset,onSetSectionBackground,selectedIsSection,onInsertPreset,onInsertLinkedSection,gridProps,startTour,toggleComments,showComments,togglePreview,showPreview,parentFirst,onParentFirstChange,crossBreakpointNotices,onCrossBreakpointNoticesChange,breakpoints,setBreakpoints,shop,sidebarProps,mode,onOpenPages,onOpenGlobals,onOpenCMS,onOpenFonts,showFonts,onOpenTheme,showTheme})=>{const showQuickPalette=!showPalette&&!showSections,paletteMode="section"===mode?"elements":"all";return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(LeftRail,{onOpenAdd:openPalette,onOpenSections:openSections,onOpenLayers:openLayers,onOpenPages,onOpenGlobalSections:onOpenGlobals,onOpenSiteStyles:onOpenTheme||(()=>{}),onOpenFonts,onOpenCMS,onToggleInspector,isAddActive:showPalette,isSectionsActive:showSections,isLayersActive:showLayers,isInspectorActive:showInspector,isFontsActive:!!showFonts,isSiteStylesActive:!!showTheme,gridProps,startTour,toggleComments,showComments,togglePreview,showPreview,showPalette,togglePalette:onTogglePalette,parentFirst,onParentFirstChange,crossBreakpointNotices,onCrossBreakpointNoticesChange,breakpoints,setBreakpoints,hideAddElements:"section"===mode,hidePages:"section"===mode,hideGlobalSections:"section"===mode,hideSiteStyles:"section"===mode,hideCMS:"section"===mode}),showPalette&&(0,jsx_runtime.jsx)(page_builder_PaletteSidebar,{width:paletteWidth,onWidthChange:onPaletteWidthChange,onAdd:paletteOnAdd,onInsertImage:onInsertImageAsset,onSetSectionBackground,selectedIsSection,onInsertPreset,mode:paletteMode}),showSections&&(0,jsx_runtime.jsx)(page_builder_SidebarPane,{width:paletteWidth,children:(0,jsx_runtime.jsx)(SectionsPanel,{shop,onInsert:c=>null==onInsertPreset?void 0:onInsertPreset(c),onInsertLinked:g=>null==onInsertLinkedSection?void 0:onInsertLinkedSection(g)})}),showFonts&&(0,jsx_runtime.jsx)(page_builder_SidebarPane,{width:paletteWidth,children:(0,jsx_runtime.jsx)(FontsPanel,{open:!0,variant:"sidebar",onOpenChange:()=>{}})}),showTheme&&(0,jsx_runtime.jsx)(page_builder_SidebarPane,{width:paletteWidth,children:(0,jsx_runtime.jsx)("aside",{className:"overflow-auto bg-surface-3 min-h-dvh",role:"region","aria-label":"Theme Panel",children:(0,jsx_runtime.jsx)(ThemePanel.A,{variant:"sidebar"})})}),showLayers&&(0,jsx_runtime.jsx)(page_builder_LayersSidebar,{width:layersWidth,onWidthChange:onLayersWidthChange,components:sidebarProps.components,selectedIds:sidebarProps.selectedIds,onSelectIds:sidebarProps.onSelectIds,dispatch:sidebarProps.dispatch,editor:sidebarProps.editor,viewport:sidebarProps.viewport,crossNotices:sidebarProps.crossNotices}),showQuickPalette&&(0,jsx_runtime.jsx)(page_builder_QuickPaletteControls,{onAdd:paletteOnAdd,onInsertImage:onInsertImageAsset,onSetSectionBackground,selectedIsSection,onShowPalette:openPalette})]})},page_builder_PageBuilderLeftPanel=PageBuilderLeftPanel;PageBuilderLeftPanel.__docgenInfo={description:"",methods:[],displayName:"PageBuilderLeftPanel",props:{showPalette:{required:!0,tsType:{name:"boolean"},description:""},showSections:{required:!0,tsType:{name:"boolean"},description:""},showLayers:{required:!0,tsType:{name:"boolean"},description:""},showInspector:{required:!0,tsType:{name:"boolean"},description:""},paletteWidth:{required:!0,tsType:{name:"number"},description:""},onPaletteWidthChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(width: number) => void",signature:{arguments:[{type:{name:"number"},name:"width"}],return:{name:"void"}}},description:""},layersWidth:{required:!0,tsType:{name:"number"},description:""},onLayersWidthChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(width: number) => void",signature:{arguments:[{type:{name:"number"},name:"width"}],return:{name:"void"}}},description:""},openPalette:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},openSections:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},openLayers:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onTogglePalette:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onToggleInspector:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},paletteOnAdd:{required:!0,tsType:{name:"signature",type:"function",raw:"(type: ComponentType) => void",signature:{arguments:[{type:{name:"union",raw:"| keyof typeof atomRegistry\n| keyof typeof moleculeRegistry\n| keyof typeof organismRegistry\n| keyof typeof containerRegistry\n| keyof typeof layoutRegistry",elements:[{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"}]},name:"type"}],return:{name:"void"}}},description:""},onInsertImageAsset:{required:!0,tsType:{name:"signature",type:"function",raw:"(url: string) => void",signature:{arguments:[{type:{name:"string"},name:"url"}],return:{name:"void"}}},description:""},onSetSectionBackground:{required:!0,tsType:{name:"signature",type:"function",raw:"(url: string) => void",signature:{arguments:[{type:{name:"string"},name:"url"}],return:{name:"void"}}},description:""},selectedIsSection:{required:!0,tsType:{name:"boolean"},description:""},onInsertPreset:{required:!1,tsType:{name:"signature",type:"function",raw:"(component: PageComponent) => void",signature:{arguments:[{type:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},name:"component"}],return:{name:"void"}}},description:""},onInsertLinkedSection:{required:!1,tsType:{name:"signature",type:"function",raw:"(item: { globalId: string; label: string; component: PageComponent }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ globalId: string; label: string; component: PageComponent }",signature:{properties:[{key:"globalId",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}}]}},name:"item"}],return:{name:"void"}}},description:""},gridProps:{required:!0,tsType:{name:"ComponentProps",elements:[{name:"GridSettings"}],raw:"ComponentProps<typeof GridSettings>"},description:""},startTour:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},toggleComments:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},showComments:{required:!0,tsType:{name:"boolean"},description:""},togglePreview:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},showPreview:{required:!0,tsType:{name:"boolean"},description:""},parentFirst:{required:!1,tsType:{name:"boolean"},description:""},onParentFirstChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(v: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"v"}],return:{name:"void"}}},description:""},crossBreakpointNotices:{required:!1,tsType:{name:"boolean"},description:""},onCrossBreakpointNoticesChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(v: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"v"}],return:{name:"void"}}},description:""},breakpoints:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"Breakpoint[]"},description:""},setBreakpoints:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: Breakpoint[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"Breakpoint[]"},name:"value"}],return:{name:"void"}}},description:""},shop:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},sidebarProps:{required:!0,tsType:{name:"ComponentProps",elements:[{name:"PageSidebar"}],raw:"ComponentProps<typeof PageSidebar>"},description:""},mode:{required:!0,tsType:{name:"union",raw:'"page" | "section"',elements:[{name:"literal",value:'"page"'},{name:"literal",value:'"section"'}]},description:""},onOpenPages:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onOpenGlobals:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onOpenCMS:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onOpenFonts:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},showFonts:{required:!1,tsType:{name:"boolean"},description:""},onOpenTheme:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},showTheme:{required:!1,tsType:{name:"boolean"},description:""}}};var PageToolbar=__webpack_require__("../../packages/ui/src/components/cms/page-builder/PageToolbar.tsx"),primitives=__webpack_require__("../../packages/ui/src/components/atoms/primitives/index.ts"),isHiddenForViewport=__webpack_require__("../../packages/ui/src/components/cms/page-builder/state/layout/utils/isHiddenForViewport.ts");function decorateTreeForViewport(list,editor,viewport){return list.map(n=>{const merged=function decorateComponentForViewport(node,editor,viewport){var _node_id;const flags=null!==(_node_id=(null!=editor?editor:{})[node.id])&&void 0!==_node_id?_node_id:{},hidden=(0,isHiddenForViewport.E)(node.id,editor,(()=>{const v=node.hidden;return"boolean"==typeof v?v:void 0})(),viewport),merged={...node};return void 0!==flags.name&&(merged.name=flags.name),void 0!==flags.locked&&(merged.locked=flags.locked),void 0!==flags.zIndex&&(merged.zIndex=flags.zIndex),void 0!==hidden&&(merged.hidden=hidden),merged}(n,editor,viewport),children=merged.children;return Array.isArray(children)&&(merged.children=decorateTreeForViewport(children,editor,viewport)),merged})}var devicePresets=__webpack_require__("../../packages/ui/src/utils/devicePresets.ts"),useViewport=__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/useViewport.ts"),DeviceSelector=__webpack_require__("../../packages/ui/src/components/common/DeviceSelector.tsx"),DynamicRenderer=__webpack_require__("../../packages/ui/src/components/DynamicRenderer.tsx");const PreviewPane=({components,locale,deviceId,onChange,editor,extraDevices=[]})=>{const previewDevice=(0,react.useMemo)(()=>{const list=[...extraDevices,...devicePresets.vh];var _list_find;return null!==(_list_find=list.find(d=>d.id===deviceId))&&void 0!==_list_find?_list_find:list[0]},[deviceId,extraDevices]),previewViewport=previewDevice.type,{viewportStyle,frameClass}=(0,useViewport.A)(previewDevice);let decorated=decorateTreeForViewport(components,editor,previewViewport);const bpId=deviceId.startsWith("bp-")?deviceId.slice(3):null;if(bpId){const map=null!=editor?editor:{},hideByBp=nodes=>nodes.map(n=>{const flags=map[n.id];var _flags_hiddenDeviceIds;const hideHere=(null!==(_flags_hiddenDeviceIds=null==flags?void 0:flags.hiddenDeviceIds)&&void 0!==_flags_hiddenDeviceIds?_flags_hiddenDeviceIds:[]).includes(bpId),kids=n.children,merged={...n,...hideHere?{hidden:!0}:{}};return Array.isArray(kids)&&(merged.children=hideByBp(kids)),merged});decorated=hideByBp(decorated)}const previewTokens=(0,usePreviewTokens.Ay)();return(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-2 shrink-0",children:[(0,jsx_runtime.jsx)(DeviceSelector.A,{deviceId,onChange,showLegacyButtons:!0,extraDevices}),(0,jsx_runtime.jsx)("div",{className:`${frameClass[previewViewport]} shrink-0`,style:{...viewportStyle,...previewTokens},children:(0,jsx_runtime.jsx)(DynamicRenderer.A,{components:decorated,locale,editor})})]})},page_builder_PreviewPane=PreviewPane;PreviewPane.__docgenInfo={description:"",methods:[],displayName:"PreviewPane",props:{components:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},locale:{required:!0,tsType:{name:"Locale"},description:""},deviceId:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},editor:{required:!1,tsType:{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},description:""},extraDevices:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:'import("../../../utils/devicePresets").DevicePreset[]'},description:"Optional extra devices from page breakpoints",defaultValue:{value:"[]",computed:!1}}}};const VersionList=({versions,selectedId,onSelect})=>{const items=(0,react.useMemo)(()=>null!=versions?versions:[],[versions]);return(0,jsx_runtime.jsxs)("div",{className:"col-span-1",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-medium mb-2",children:"Versions"}),(0,jsx_runtime.jsxs)("div",{className:"max-h-64 overflow-y-auto rounded border",children:[items.map(v=>(0,jsx_runtime.jsxs)("button",{type:"button",onClick:()=>onSelect(v.id),className:"flex w-full items-center justify-between px-2 py-1 text-left text-sm hover:bg-accent "+(selectedId===v.id?"bg-accent":""),"aria-label":`Select version ${v.label}`,children:[(0,jsx_runtime.jsx)("span",{className:"truncate",title:v.label,children:v.label}),(0,jsx_runtime.jsx)("time",{className:"ms-2 shrink-0 text-muted-foreground",dateTime:v.timestamp,children:new Date(v.timestamp).toLocaleString()})]},v.id)),0===items.length&&(0,jsx_runtime.jsx)("div",{className:"p-2 text-sm text-muted-foreground",children:"No versions yet"})]})]})},versions_panel_VersionList=VersionList;VersionList.__docgenInfo={description:"",methods:[],displayName:"VersionList",props:{versions:{required:!0,tsType:{name:"union",raw:"VersionEntry[] | null",elements:[{name:"Array",elements:[{name:"VersionEntry"}],raw:"VersionEntry[]"},{name:"null"}]},description:""},selectedId:{required:!0,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""}}};const CreateVersionForm=({onCreate,autoFocusLabel=!1})=>{const[label,setLabel]=(0,react.useState)(""),[saving,setSaving]=(0,react.useState)(!1),inputRef=(0,react.useRef)(null);return(0,react.useEffect)(()=>{if(!autoFocusLabel)return;const id=requestAnimationFrame(()=>{var _inputRef_current;return null===(_inputRef_current=inputRef.current)||void 0===_inputRef_current?void 0:_inputRef_current.focus()});return()=>cancelAnimationFrame(id)},[autoFocusLabel]),(0,jsx_runtime.jsxs)("div",{className:"flex items-end gap-2",children:[(0,jsx_runtime.jsxs)("div",{className:"flex-1",children:[(0,jsx_runtime.jsx)("label",{className:"text-sm font-medium",children:"Create version"}),(0,jsx_runtime.jsx)(shadcn.pd,{placeholder:"Label (e.g. hero color tweak)",value:label,onChange:e=>setLabel(e.target.value),ref:inputRef})]}),(0,jsx_runtime.jsx)(shadcn.$n,{onClick:async()=>{if(label.trim()){setSaving(!0);try{await onCreate(label.trim()),setLabel("")}finally{setSaving(!1)}}},disabled:saving||!label.trim(),children:saving?"Saving…":"Save Version"})]})},versions_panel_CreateVersionForm=CreateVersionForm;CreateVersionForm.__docgenInfo={description:"",methods:[],displayName:"CreateVersionForm",props:{onCreate:{required:!0,tsType:{name:"signature",type:"function",raw:"(label: string) => Promise<void> | void",signature:{arguments:[{type:{name:"string"},name:"label"}],return:{name:"union",raw:"Promise<void> | void",elements:[{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"void"}]}}},description:""},autoFocusLabel:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const DiffSummaryView=({diff})=>{var _diff_addedIds,_diff_removedIds,_diff_modifiedList,_diff_addedIds_length,_diff_removedIds_length,_diff_modifiedList_length;return diff?(0,jsx_runtime.jsxs)("div",{className:"rounded border bg-muted/40 p-2 text-sm text-muted-foreground",children:[(0,jsx_runtime.jsx)("span",{className:"font-medium",children:"Changes:"}),(0,jsx_runtime.jsxs)("span",{className:"ms-2",children:[diff.modified," modified"]}),(0,jsx_runtime.jsxs)("span",{className:"ms-2",children:[diff.added," added"]}),(0,jsx_runtime.jsxs)("span",{className:"ms-2",children:[diff.removed," removed"]}),(null!==(_diff_addedIds_length=null===(_diff_addedIds=diff.addedIds)||void 0===_diff_addedIds?void 0:_diff_addedIds.length)&&void 0!==_diff_addedIds_length?_diff_addedIds_length:0)>0&&(0,jsx_runtime.jsxs)("div",{className:"mt-1",children:[(0,jsx_runtime.jsx)("span",{className:"font-medium",children:"Added:"}),(0,jsx_runtime.jsxs)("span",{className:"ms-1",children:[diff.addedIds.slice(0,5).join(", "),diff.addedIds.length>5?"…":""]})]}),(null!==(_diff_removedIds_length=null===(_diff_removedIds=diff.removedIds)||void 0===_diff_removedIds?void 0:_diff_removedIds.length)&&void 0!==_diff_removedIds_length?_diff_removedIds_length:0)>0&&(0,jsx_runtime.jsxs)("div",{className:"mt-1",children:[(0,jsx_runtime.jsx)("span",{className:"font-medium",children:"Removed:"}),(0,jsx_runtime.jsxs)("span",{className:"ms-1",children:[diff.removedIds.slice(0,5).join(", "),diff.removedIds.length>5?"…":""]})]}),(null!==(_diff_modifiedList_length=null===(_diff_modifiedList=diff.modifiedList)||void 0===_diff_modifiedList?void 0:_diff_modifiedList.length)&&void 0!==_diff_modifiedList_length?_diff_modifiedList_length:0)>0&&(0,jsx_runtime.jsxs)("div",{className:"mt-1",children:[(0,jsx_runtime.jsx)("span",{className:"font-medium",children:"Modified:"}),(0,jsx_runtime.jsx)("ul",{className:"ms-2 list-disc",children:diff.modifiedList.slice(0,5).map(m=>(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsxs)("span",{className:"me-1",children:[m.id,":"]}),(0,jsx_runtime.jsxs)("span",{className:"opacity-80",children:[m.keys.slice(0,6).join(", "),m.keys.length>6?"…":""]})]},m.id))})]})]}):null},DiffSummary=DiffSummaryView;DiffSummaryView.__docgenInfo={description:"",methods:[],displayName:"DiffSummaryView",props:{diff:{required:!0,tsType:{name:"union",raw:"DiffSummary | null",elements:[{name:"DiffSummary"},{name:"null"}]},description:""}}};const DiffDetails=({diff,current,onRestore})=>{var _diff_modifiedList,_diff_modifiedList_length;return diff&&0!==(null!==(_diff_modifiedList_length=null===(_diff_modifiedList=diff.modifiedList)||void 0===_diff_modifiedList?void 0:_diff_modifiedList.length)&&void 0!==_diff_modifiedList_length?_diff_modifiedList_length:0)?(0,jsx_runtime.jsxs)("div",{className:"rounded border bg-background p-2 text-sm space-y-2",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-medium",children:"Detailed Diff"}),diff.modifiedList.slice(0,5).map(m=>{var _diff_a_m_id;const before=null!==(_diff_a_m_id=diff.a[m.id])&&void 0!==_diff_a_m_id?_diff_a_m_id:{};var _diff_b_m_id;const after=null!==(_diff_b_m_id=diff.b[m.id])&&void 0!==_diff_b_m_id?_diff_b_m_id:{};return(0,jsx_runtime.jsxs)("div",{className:"border rounded p-2",children:[(0,jsx_runtime.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,jsx_runtime.jsx)("div",{className:"font-medium",children:m.id}),(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",onClick:()=>{const replacement=diff.b[m.id],next=function replaceComponentById(list,targetId,replacement){const walk=nodes=>nodes.map(n=>{if(n.id===targetId&&replacement)return replacement;const kids=n.children;if(Array.isArray(kids)){const nextKids=walk(kids);if(nextKids!==kids)return{...n,children:nextKids}}return n});return walk(list)}(current,m.id,replacement);onRestore(next)},children:"Restore this component"})]}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,jsx_runtime.jsxs)("div",{className:"rounded border p-2",children:[(0,jsx_runtime.jsx)("div",{className:"font-medium mb-1",children:"Current"}),m.keys.map(k=>(0,jsx_runtime.jsxs)("div",{className:"mb-1",children:[(0,jsx_runtime.jsxs)("span",{className:"me-1 text-muted-foreground",children:[k,":"]}),(0,jsx_runtime.jsx)("span",{className:"bg-red-50 dark:bg-red-900/30 px-1 rounded break-words",children:JSON.stringify(before[k])})]},k))]}),(0,jsx_runtime.jsxs)("div",{className:"rounded border p-2",children:[(0,jsx_runtime.jsx)("div",{className:"font-medium mb-1",children:"Selected"}),m.keys.map(k=>(0,jsx_runtime.jsxs)("div",{className:"mb-1",children:[(0,jsx_runtime.jsxs)("span",{className:"me-1 text-muted-foreground",children:[k,":"]}),(0,jsx_runtime.jsx)("span",{className:"bg-green-50 dark:bg-green-900/30 px-1 rounded break-words",children:JSON.stringify(after[k])})]},k))]})]})]},m.id)})]}):null},versions_panel_DiffDetails=DiffDetails;DiffDetails.__docgenInfo={description:"",methods:[],displayName:"DiffDetails",props:{diff:{required:!0,tsType:{name:"union",raw:"DiffSummary | null",elements:[{name:"DiffSummary"},{name:"null"}]},description:""},current:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},onRestore:{required:!0,tsType:{name:"signature",type:"function",raw:"(components: PageComponent[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},name:"components"}],return:{name:"void"}}},description:""}}};const RenameDeleteControls=({selected,onRename,onDelete})=>{const[renaming,setRenaming]=(0,react.useState)(null),[renameValue,setRenameValue]=(0,react.useState)(""),[busy,setBusy]=(0,react.useState)(!1);if(!selected)return null;return(0,jsx_runtime.jsx)(Inline.c,{gap:2,alignY:"center",children:renaming===selected.id?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(shadcn.pd,{placeholder:"New label",value:renameValue,onChange:e=>setRenameValue(e.target.value)}),(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",onClick:()=>setRenaming(null),children:"Cancel"}),(0,jsx_runtime.jsx)(shadcn.$n,{onClick:async()=>{if(renameValue.trim()){setBusy(!0);try{await onRename(renameValue.trim()),setRenaming(null),setRenameValue("")}finally{setBusy(!1)}}},disabled:!renameValue.trim()||busy,children:"Save"})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",onClick:()=>{setRenaming(selected.id),setRenameValue(selected.label)},children:"Rename"}),(0,jsx_runtime.jsx)(shadcn.$n,{variant:"destructive",onClick:async()=>{setBusy(!0);try{await onDelete()}finally{setBusy(!1)}},disabled:busy,children:"Delete"})]})})},versions_panel_RenameDeleteControls=RenameDeleteControls;RenameDeleteControls.__docgenInfo={description:"",methods:[],displayName:"RenameDeleteControls",props:{selected:{required:!0,tsType:{name:"union",raw:"VersionEntry | null",elements:[{name:"VersionEntry"},{name:"null"}]},description:""},onRename:{required:!0,tsType:{name:"signature",type:"function",raw:"(newLabel: string) => Promise<void> | void",signature:{arguments:[{type:{name:"string"},name:"newLabel"}],return:{name:"union",raw:"Promise<void> | void",elements:[{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"void"}]}}},description:""},onDelete:{required:!0,tsType:{name:"signature",type:"function",raw:"() => Promise<void> | void",signature:{arguments:[],return:{name:"union",raw:"Promise<void> | void",elements:[{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"void"}]}}},description:""}}};const ExperimentForm=({onCreate})=>{const[label,setLabel]=(0,react.useState)(""),[splitA,setSplitA]=(0,react.useState)(50),[busy,setBusy]=(0,react.useState)(!1);return(0,jsx_runtime.jsxs)("div",{className:"col-span-1 space-y-2",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-medium",children:"Create experiment"}),(0,jsx_runtime.jsx)(shadcn.pd,{placeholder:"Label (optional)",value:label,onChange:e=>setLabel(e.target.value)}),(0,jsx_runtime.jsx)(shadcn.pd,{type:"number",min:0,max:100,value:splitA,onChange:e=>setSplitA(Number(e.target.value))}),(0,jsx_runtime.jsx)(shadcn.$n,{onClick:async()=>{setBusy(!0);try{await onCreate(label||void 0,splitA),setLabel(""),setSplitA(50)}finally{setBusy(!1)}},disabled:busy,children:busy?"Creating…":"Create Experiment"})]})},versions_panel_ExperimentForm=ExperimentForm;ExperimentForm.__docgenInfo={description:"",methods:[],displayName:"ExperimentForm",props:{onCreate:{required:!0,tsType:{name:"signature",type:"function",raw:"(label: string | undefined, splitA: number) => Promise<void> | void",signature:{arguments:[{type:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},name:"label"},{type:{name:"number"},name:"splitA"}],return:{name:"union",raw:"Promise<void> | void",elements:[{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"void"}]}}},description:""}}};const SchedulePublishForm=({onSchedule})=>{const[publishAt,setPublishAt]=(0,react.useState)(""),[busy,setBusy]=(0,react.useState)(!1);return(0,jsx_runtime.jsxs)("div",{className:"col-span-1 space-y-2",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-medium",children:"Schedule publish"}),(0,jsx_runtime.jsx)(shadcn.pd,{type:"datetime-local",value:publishAt,onChange:e=>setPublishAt(e.target.value)}),(0,jsx_runtime.jsx)(shadcn.$n,{onClick:async()=>{if(publishAt){setBusy(!0);try{await onSchedule(publishAt),setPublishAt("")}finally{setBusy(!1)}}},disabled:busy||!publishAt,children:busy?"Scheduling…":"Schedule"})]})},versions_panel_SchedulePublishForm=SchedulePublishForm;SchedulePublishForm.__docgenInfo={description:"",methods:[],displayName:"SchedulePublishForm",props:{onSchedule:{required:!0,tsType:{name:"signature",type:"function",raw:"(publishAt: string) => Promise<void> | void",signature:{arguments:[{type:{name:"string"},name:"publishAt"}],return:{name:"union",raw:"Promise<void> | void",elements:[{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"void"}]}}},description:""}}};const PreviewLinkForm=({onCreate})=>{const[password,setPassword]=(0,react.useState)(""),[busy,setBusy]=(0,react.useState)(!1),[url,setUrl]=(0,react.useState)(""),fullUrl=`${url}${password?`?pw=${encodeURIComponent(password)}`:""}`;return(0,jsx_runtime.jsxs)("div",{className:"col-span-1 space-y-2",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-medium",children:"Shareable preview"}),(0,jsx_runtime.jsx)(shadcn.pd,{type:"password",placeholder:"Password (optional)",value:password,onChange:e=>setPassword(e.target.value)}),(0,jsx_runtime.jsx)(shadcn.$n,{onClick:async()=>{setBusy(!0);try{const res=await onCreate(password||void 0);"string"==typeof res&&setUrl(res)}finally{setBusy(!1)}},disabled:busy,children:busy?"Creating…":"Create Link"}),url&&(0,jsx_runtime.jsxs)("div",{className:"text-xs break-all",children:[(0,jsx_runtime.jsxs)("div",{className:"mb-1",children:["URL: ",fullUrl]}),(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",onClick:()=>{var _navigator_clipboard;return null===(_navigator_clipboard=navigator.clipboard)||void 0===_navigator_clipboard?void 0:_navigator_clipboard.writeText(fullUrl)},children:"Copy link"})]})]})},versions_panel_PreviewLinkForm=PreviewLinkForm;function VersionsPanel({shop,pageId,current,editor,onRestore,autoFocusLabel=!1}){const t=(0,src.c3)(),[versions,setVersions]=(0,react.useState)(null),[selectedId,setSelectedId]=(0,react.useState)(null),[error,setError]=(0,react.useState)(null),selected=(0,react.useMemo)(()=>{var _versions_find;return null!==(_versions_find=null==versions?void 0:versions.find(v=>v.id===selectedId))&&void 0!==_versions_find?_versions_find:null},[versions,selectedId]),diffSummary=(0,react.useMemo)(()=>{var _selected_components;return function computeDiffSummary(current,selected){if(!selected)return null;const flat=list=>{const out={},walk=n=>{const node=n;out[node.id]=n;const kids=node.children;Array.isArray(kids)&&kids.forEach(walk)};return list.forEach(walk),out},a=flat(current),b=flat(selected),aIds=new Set(Object.keys(a)),bIds=new Set(Object.keys(b)),addedIds=[],removedIds=[],modifiedList=[];return bIds.forEach(id=>{aIds.has(id)||addedIds.push(id)}),aIds.forEach(id=>{bIds.has(id)||removedIds.push(id)}),aIds.forEach(id=>{if(!bIds.has(id))return;const aa=a[id],bb=b[id],changed=Array.from(new Set([...Object.keys(null!=aa?aa:{}),...Object.keys(null!=bb?bb:{})])).filter(k=>"id"!==k).filter(k=>JSON.stringify(null==aa?void 0:aa[k])!==JSON.stringify(null==bb?void 0:bb[k]));changed.length>0&&modifiedList.push({id,keys:changed})}),{added:addedIds.length,removed:removedIds.length,modified:modifiedList.length,addedIds,removedIds,modifiedList,a,b}}(current,null!==(_selected_components=null==selected?void 0:selected.components)&&void 0!==_selected_components?_selected_components:null)},[current,selected]),load=async()=>{try{setError(null);const data=await async function fetchVersions(shop,pageId){const res=await fetch(`/cms/api/page-versions/${shop}/${pageId}`);if(!res.ok)throw new Error(`Failed to fetch versions: ${res.status}`);return await res.json()}(shop,pageId);setVersions(data),data.length&&!selectedId&&setSelectedId(data[0].id)}catch(err){setError(err.message)}};(0,react.useEffect)(()=>{load()},[shop,pageId]);return(0,jsx_runtime.jsxs)("div",{className:"space-y-3",children:[(0,jsx_runtime.jsx)(versions_panel_CreateVersionForm,{onCreate:async label=>{try{setError(null),await async function createVersionApi(params){const{shop,pageId,label,components,editor}=params,res=await fetch(`/cms/api/page-versions/${shop}/${pageId}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({label,components,editor})});if(!res.ok)throw new Error(`Failed to save version: ${res.status}`)}({shop,pageId,label,components:current,editor}),await load()}catch(err){setError(err.message)}},autoFocusLabel}),error&&(0,jsx_runtime.jsx)("p",{className:"text-sm text-red-500",children:error}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,jsx_runtime.jsx)(versions_panel_VersionList,{versions,selectedId,onSelect:setSelectedId}),(0,jsx_runtime.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-medium mb-1",children:t("cms.builder.versions.current")}),(0,jsx_runtime.jsx)(page_builder_PreviewPane,{components:current,locale:"en",deviceId:"desktop",onChange:()=>{},editor})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-medium mb-1",children:t("cms.builder.versions.selected")}),(0,jsx_runtime.jsx)("div",{className:"rounded border min-h-10",children:selected?(0,jsx_runtime.jsx)(page_builder_PreviewPane,{components:selected.components,locale:"en",deviceId:"desktop",onChange:()=>{},editor:selected.editor}):(0,jsx_runtime.jsx)("div",{className:"p-2 text-sm text-muted-foreground",children:t("cms.builder.versions.selectToPreview")})})]})]}),(0,jsx_runtime.jsx)(DiffSummary,{diff:diffSummary}),(0,jsx_runtime.jsx)(versions_panel_DiffDetails,{diff:diffSummary,current,onRestore}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,jsx_runtime.jsx)(versions_panel_RenameDeleteControls,{selected,onRename:async newLabel=>{if(selectedId)try{setError(null),await async function renameVersion(shop,pageId,versionId,label){const res=await fetch(`/cms/api/page-versions/${shop}/${pageId}/${versionId}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({label})});if(!res.ok)throw new Error(`Failed to rename: ${res.status}`)}(shop,pageId,selectedId,newLabel),await load()}catch(err){setError(err.message)}},onDelete:async()=>{if(selectedId&&window.confirm(t("cms.builder.versions.confirmDelete")))try{setError(null),await async function deleteVersion(shop,pageId,versionId){const res=await fetch(`/cms/api/page-versions/${shop}/${pageId}/${versionId}`,{method:"DELETE"});if(204!==res.status)throw new Error(`Failed to delete: ${res.status}`)}(shop,pageId,selectedId),setSelectedId(null),await load()}catch(err){setError(err.message)}}}),(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",onClick:()=>selected&&onRestore(selected.components),disabled:!selected,children:t("cms.builder.versions.restoreSelected")})]}),selected&&(0,jsx_runtime.jsxs)("div",{className:"mt-3 grid grid-cols-3 gap-2",children:[(0,jsx_runtime.jsx)(versions_panel_ExperimentForm,{onCreate:async(label,splitA)=>{if(selectedId)try{setError(null),await async function createExperimentApi(shop,pageId,versionId,params){const res=await fetch(`/cms/api/page-versions/${shop}/${pageId}/${versionId}/experiment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(params)});if(!res.ok)throw new Error(`Failed to create experiment: ${res.status}`)}(shop,pageId,selectedId,{label,splitA})}catch(err){setError(err.message)}}}),(0,jsx_runtime.jsx)(versions_panel_SchedulePublishForm,{onSchedule:async publishAt=>{if(selectedId)try{setError(null),await async function schedulePublishApi(shop,pageId,versionId,publishAt){const res=await fetch(`/cms/api/page-versions/${shop}/${pageId}/${versionId}/schedule`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({publishAt})});if(!res.ok)throw new Error(`Failed to schedule publish: ${res.status}`)}(shop,pageId,selectedId,publishAt)}catch(err){setError(err.message)}}}),(0,jsx_runtime.jsx)(versions_panel_PreviewLinkForm,{onCreate:async password=>{if(!selectedId)return"";try{setError(null);const url=await async function createPreviewLinkApi(shop,pageId,versionId,password){const res=await fetch(`/cms/api/page-versions/${shop}/${pageId}/${versionId}/preview-link`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password})});if(!res.ok)throw new Error(`Failed to create preview link: ${res.status}`);return(await res.json()).url}(shop,pageId,selectedId,password);return url}catch(err){return setError(err.message),""}}})]})]})]})]})}PreviewLinkForm.__docgenInfo={description:"",methods:[],displayName:"PreviewLinkForm",props:{onCreate:{required:!0,tsType:{name:"signature",type:"function",raw:"(password?: string) => Promise<string> | Promise<void> | string | void",signature:{arguments:[{type:{name:"string"},name:"password"}],return:{name:"union",raw:"Promise<string> | Promise<void> | string | void",elements:[{name:"Promise",elements:[{name:"string"}],raw:"Promise<string>"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"string"},{name:"void"}]}}},description:""}}},VersionsPanel.__docgenInfo={description:"",methods:[],displayName:"VersionsPanel",props:{shop:{required:!0,tsType:{name:"string"},description:""},pageId:{required:!0,tsType:{name:"string"},description:""},current:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},editor:{required:!1,tsType:{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},description:""},onRestore:{required:!0,tsType:{name:"signature",type:"function",raw:"(components: PageComponent[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},name:"components"}],return:{name:"void"}}},description:""},autoFocusLabel:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const HistoryControls=({canUndo,canRedo,onUndo,onRedo,onSave,onPublish,saving,publishing,saveError,publishError,autoSaveState,shop,pageId,currentComponents,editor,onRestoreVersion,showUndoRedo=!0,showSavePublish=!0,showVersions=!0})=>{const[isOpenSave,setIsOpenSave]=(0,react.useState)(!1),[isOpenManage,setIsOpenManage]=(0,react.useState)(!1);return(0,react.useEffect)(()=>{const openSave=()=>setIsOpenSave(!0),openManage=()=>setIsOpenManage(!0);return window.addEventListener("pb:save-version",openSave),window.addEventListener("pb:open-versions",openManage),()=>{window.removeEventListener("pb:save-version",openSave),window.removeEventListener("pb:open-versions",openManage)}},[]),(0,jsx_runtime.jsxs)(primitives.cV,{gap:2,children:[showUndoRedo&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(atoms.m_,{text:"Undo (Ctrl/⌘+Z)",children:(0,jsx_runtime.jsx)(shadcn.$n,{onClick:onUndo,disabled:!canUndo,"aria-label":"Undo",size:"icon",children:(0,jsx_runtime.jsx)(react_icons_esm.HTp,{className:"h-4 w-4","aria-hidden":"true"})})}),(0,jsx_runtime.jsx)(atoms.m_,{text:"Redo (Ctrl/⌘+Y)",children:(0,jsx_runtime.jsx)(shadcn.$n,{onClick:onRedo,disabled:!canRedo,"aria-label":"Redo",size:"icon",children:(0,jsx_runtime.jsx)(react_icons_esm.dAw,{className:"h-4 w-4","aria-hidden":"true"})})})]}),showSavePublish&&(0,jsx_runtime.jsxs)(primitives.BJ,{gap:1,children:[(0,jsx_runtime.jsxs)(primitives.cV,{gap:2,alignY:"center",children:[(0,jsx_runtime.jsx)(atoms.m_,{text:"Save (Ctrl/⌘+S)",children:(0,jsx_runtime.jsx)(shadcn.$n,{onClick:onSave,disabled:saving,children:saving?(0,jsx_runtime.jsx)(atoms.y$,{className:"h-4 w-4"}):"Save"})}),"saving"===autoSaveState&&(0,jsx_runtime.jsxs)(primitives.cV,{gap:1,alignY:"center",className:"text-sm text-muted-foreground",children:[(0,jsx_runtime.jsx)(atoms.y$,{className:"h-4 w-4"})," Saving…"]}),"saved"===autoSaveState&&(0,jsx_runtime.jsxs)(primitives.cV,{gap:1,alignY:"center",className:"text-sm text-muted-foreground",children:[(0,jsx_runtime.jsx)(react_icons_esm.Srz,{className:"h-4 w-4 text-green-500"})," All changes saved"]})]}),saveError&&(0,jsx_runtime.jsx)("p",{className:"text-sm text-red-500",children:saveError})]}),showSavePublish&&(0,jsx_runtime.jsxs)(primitives.BJ,{gap:1,children:[(0,jsx_runtime.jsx)(atoms.m_,{text:"Publish page",children:(0,jsx_runtime.jsx)(shadcn.$n,{variant:"default",className:"h-9 px-4",onClick:onPublish,disabled:publishing,"data-tour":"publish",children:publishing?(0,jsx_runtime.jsx)(atoms.y$,{className:"h-4 w-4"}):"Publish"})}),publishError&&(0,jsx_runtime.jsx)("p",{className:"text-sm text-red-500",children:publishError})]}),showVersions&&shop&&pageId&&currentComponents&&onRestoreVersion&&(0,jsx_runtime.jsxs)(shadcn.lG,{open:isOpenManage,onOpenChange:setIsOpenManage,children:[(0,jsx_runtime.jsx)(shadcn.zM,{asChild:!0,children:(0,jsx_runtime.jsx)(atoms.m_,{text:"Manage versions (Ctrl/⌘+Shift+V)",children:(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",onClick:()=>setIsOpenManage(!0),children:"Versions"})})}),(0,jsx_runtime.jsxs)(shadcn.Cf,{className:"w-full",children:[(0,jsx_runtime.jsx)(shadcn.L3,{children:"Versions"}),(0,jsx_runtime.jsx)(VersionsPanel,{shop,pageId,current:currentComponents,editor,onRestore:onRestoreVersion})]})]}),showVersions&&shop&&pageId&&currentComponents&&onRestoreVersion&&(0,jsx_runtime.jsxs)(shadcn.lG,{open:isOpenSave,onOpenChange:setIsOpenSave,children:[(0,jsx_runtime.jsx)(shadcn.zM,{asChild:!0,children:(0,jsx_runtime.jsx)(atoms.m_,{text:"Save version snapshot (Ctrl/⌘+Shift+S)",children:(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",onClick:()=>setIsOpenSave(!0),children:"Save Version"})})}),(0,jsx_runtime.jsxs)(shadcn.Cf,{className:"w-full",children:[(0,jsx_runtime.jsx)(shadcn.L3,{children:"Save Version"}),(0,jsx_runtime.jsx)(VersionsPanel,{shop,pageId,current:currentComponents,editor,onRestore:onRestoreVersion,autoFocusLabel:!0})]})]})]})},page_builder_HistoryControls=HistoryControls;HistoryControls.__docgenInfo={description:"",methods:[],displayName:"HistoryControls",props:{canUndo:{required:!0,tsType:{name:"boolean"},description:""},canRedo:{required:!0,tsType:{name:"boolean"},description:""},onUndo:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onRedo:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onSave:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onPublish:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},saving:{required:!0,tsType:{name:"boolean"},description:""},publishing:{required:!0,tsType:{name:"boolean"},description:""},saveError:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},publishError:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},autoSaveState:{required:!0,tsType:{name:"union",raw:'"idle" | "saving" | "saved" | "error"',elements:[{name:"literal",value:'"idle"'},{name:"literal",value:'"saving"'},{name:"literal",value:'"saved"'},{name:"literal",value:'"error"'}]},description:""},shop:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},pageId:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},currentComponents:{required:!1,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},editor:{required:!1,tsType:{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},description:""},onRestoreVersion:{required:!1,tsType:{name:"signature",type:"function",raw:"(components: PageComponent[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},name:"components"}],return:{name:"void"}}},description:""},showUndoRedo:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},showSavePublish:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},showVersions:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}};const GridSettings=({showGrid,toggleGrid,snapToGrid=!0,toggleSnap,gridCols,setGridCols,zoom=1,setZoom,showRulers=!1,toggleRulers,showBaseline=!1,toggleBaseline,baselineStep=8,setBaselineStep})=>{const baselineId=(0,react.useId)(),zoomId=(0,react.useId)();return(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,jsx_runtime.jsx)(shadcn.$n,{variant:showGrid?"default":"outline",onClick:toggleGrid,children:showGrid?"Hide grid":"Show grid"}),(0,jsx_runtime.jsx)(shadcn.$n,{variant:snapToGrid?"default":"outline",onClick:toggleSnap,children:snapToGrid?"Snap on":"Snap off"}),(0,jsx_runtime.jsx)(shadcn.$n,{variant:showRulers?"default":"outline",onClick:toggleRulers,children:showRulers?"Rulers on":"Rulers off"}),(0,jsx_runtime.jsx)(shadcn.$n,{variant:showBaseline?"default":"outline",onClick:toggleBaseline,children:showBaseline?"Baseline on":"Baseline off"}),(0,jsx_runtime.jsx)(shadcn.pd,{type:"number",min:1,max:24,value:gridCols,onChange:e=>setGridCols(Number(e.target.value)),className:"w-16"}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("label",{className:"text-sm",htmlFor:baselineId,children:"Baseline"}),(0,jsx_runtime.jsx)("input",{id:baselineId,type:"range",min:2,max:64,step:1,value:baselineStep,onChange:e=>null==setBaselineStep?void 0:setBaselineStep(Number(e.target.value))}),(0,jsx_runtime.jsx)("span",{className:"w-8 text-end text-sm",children:baselineStep})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("label",{className:"text-sm",htmlFor:zoomId,children:"Zoom"}),(0,jsx_runtime.jsx)("input",{id:zoomId,type:"range",min:.25,max:2,step:.05,value:zoom,onChange:e=>null==setZoom?void 0:setZoom(Number(e.target.value))}),(0,jsx_runtime.jsxs)("span",{className:"w-10 text-end text-sm",children:[Math.round(100*zoom),"%"]})]})]})},page_builder_GridSettings=GridSettings;function CanvasControlsMenu({gridProps}){const t=(0,src.c3)();return(0,jsx_runtime.jsxs)(atoms.AM,{children:[(0,jsx_runtime.jsx)(atoms.m_,{text:t("Canvas settings"),children:(0,jsx_runtime.jsx)(atoms.Wv,{asChild:!0,children:(0,jsx_runtime.jsx)(atoms.$n,{variant:"outline","aria-label":t("Canvas settings"),children:t("Canvas")})})}),(0,jsx_runtime.jsx)(atoms.hl,{children:(0,jsx_runtime.jsxs)("div",{className:"space-y-3",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-medium",children:t("Canvas")}),(0,jsx_runtime.jsx)(page_builder_GridSettings,{...gridProps})]})})]})}function ResponsiveRightActions({gridProps,onInsertPreset:_onInsertPreset,presetsSourceUrl:_presetsSourceUrl,startTour,toggleComments,showComments,togglePreview,showPreview,showPalette,togglePalette,parentFirst,onParentFirstChange,crossBreakpointNotices,onCrossBreakpointNoticesChange}){const containerRef=react.useRef(null),[w,setW]=react.useState(0),[viewOpen,setViewOpen]=react.useState(!1);react.useEffect(()=>{const open=()=>setViewOpen(!0);return window.addEventListener("pb:open-view",open),()=>window.removeEventListener("pb:open-view",open)},[]),react.useEffect(()=>{const el=containerRef.current;if(!el)return;const ro=new ResizeObserver(entries=>{var _entry_contentRect;const entry=entries[0];var _entry_contentRect_width;const width=null!==(_entry_contentRect_width=null==entry||null===(_entry_contentRect=entry.contentRect)||void 0===_entry_contentRect?void 0:_entry_contentRect.width)&&void 0!==_entry_contentRect_width?_entry_contentRect_width:el.clientWidth;setW(width)});return ro.observe(el),()=>ro.disconnect()},[]);const showView=w>=380;return(0,jsx_runtime.jsxs)("div",{ref:containerRef,className:"flex flex-wrap items-center gap-2 justify-end w-full",children:[(0,jsx_runtime.jsx)(CanvasControlsMenu,{gridProps}),showView?(0,jsx_runtime.jsx)(ViewMenu,{open:viewOpen,onOpenChange:setViewOpen,showPreview,togglePreview,showComments,toggleComments,startTour,showPalette,togglePalette,parentFirst,onParentFirstChange,gridProps,crossBreakpointNotices,onCrossBreakpointNoticesChange}):null,!showView&&null]})}GridSettings.__docgenInfo={description:"",methods:[],displayName:"GridSettings",props:{showGrid:{required:!0,tsType:{name:"boolean"},description:""},toggleGrid:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},snapToGrid:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},toggleSnap:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},gridCols:{required:!0,tsType:{name:"number"},description:""},setGridCols:{required:!0,tsType:{name:"signature",type:"function",raw:"(n: number) => void",signature:{arguments:[{type:{name:"number"},name:"n"}],return:{name:"void"}}},description:""},zoom:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},setZoom:{required:!1,tsType:{name:"signature",type:"function",raw:"(z: number) => void",signature:{arguments:[{type:{name:"number"},name:"z"}],return:{name:"void"}}},description:""},showRulers:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},toggleRulers:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},showBaseline:{required:!1,tsType:{name:"boolean"},description:"Show baseline horizontal grid",defaultValue:{value:"false",computed:!1}},toggleBaseline:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},baselineStep:{required:!1,tsType:{name:"number"},description:"Baseline step in px",defaultValue:{value:"8",computed:!1}},setBaselineStep:{required:!1,tsType:{name:"signature",type:"function",raw:"(n: number) => void",signature:{arguments:[{type:{name:"number"},name:"n"}],return:{name:"void"}}},description:""}}},CanvasControlsMenu.__docgenInfo={description:"",methods:[],displayName:"CanvasControlsMenu",props:{gridProps:{required:!0,tsType:{name:"ReactComponentProps",raw:"React.ComponentProps<typeof GridSettings>",elements:[{name:"GridSettings"}]},description:""}}},ResponsiveRightActions.__docgenInfo={description:"",methods:[],displayName:"ResponsiveRightActions",props:{gridProps:{required:!0,tsType:{name:"ReactComponentProps",raw:"React.ComponentProps<typeof GridSettings>",elements:[{name:"GridSettings"}]},description:""},onInsertPreset:{required:!1,tsType:{name:"signature",type:"function",raw:"(component: PageComponent) => void",signature:{arguments:[{type:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},name:"component"}],return:{name:"void"}}},description:""},presetsSourceUrl:{required:!1,tsType:{name:"string"},description:""},startTour:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},toggleComments:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},showComments:{required:!0,tsType:{name:"boolean"},description:""},togglePreview:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},showPreview:{required:!0,tsType:{name:"boolean"},description:""},showPalette:{required:!0,tsType:{name:"boolean"},description:""},togglePalette:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},parentFirst:{required:!1,tsType:{name:"boolean"},description:""},onParentFirstChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(v: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"v"}],return:{name:"void"}}},description:""},crossBreakpointNotices:{required:!1,tsType:{name:"boolean"},description:""},onCrossBreakpointNoticesChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(v: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"v"}],return:{name:"void"}}},description:""}}};var usePresence=__webpack_require__("../../packages/ui/src/components/cms/page-builder/collab/usePresence.ts");function PresenceAvatars({shop,pageId}){const w=globalThis;var _w___PB_USER_ID,_w___PB_USER_NAME;const{peers}=(0,usePresence.A)({shop,pageId,meId:(null!==(_w___PB_USER_ID=w.__PB_USER_ID)&&void 0!==_w___PB_USER_ID?_w___PB_USER_ID:null)||"me",label:(null!==(_w___PB_USER_NAME=w.__PB_USER_NAME)&&void 0!==_w___PB_USER_NAME?_w___PB_USER_NAME:null)||"Me",selectedIds:[],editingId:null}),show=(0,react.useMemo)(()=>peers.slice(0,4),[peers]);return 0===show.length?null:(0,jsx_runtime.jsxs)(Inline.c,{alignY:"center",className:"-space-x-2",children:[show.map(p=>{var _p_label;return(0,jsx_runtime.jsx)("div",{className:"inline-flex h-6 w-6 items-center justify-center rounded-full border-2 border-surface-1 text-xs",style:{backgroundColor:p.color},title:p.label,"aria-label":p.label,children:(0,jsx_runtime.jsx)("span",{className:"mix-blend-difference text-white",children:null===(_p_label=p.label)||void 0===_p_label?void 0:_p_label.slice(0,2).toUpperCase()})},p.id)}),peers.length>show.length&&(0,jsx_runtime.jsxs)("div",{className:"inline-flex h-6 w-6 items-center justify-center rounded-full border-2 border-surface-1 bg-muted text-xs",title:`+${peers.length-show.length} more`,children:["+",peers.length-show.length]})]})}PresenceAvatars.__docgenInfo={description:"",methods:[],displayName:"PresenceAvatars",props:{shop:{required:!0,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},pageId:{required:!0,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""}}};var next_link=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/link.js"),link_default=__webpack_require__.n(next_link);function StudioMenu({shop}){const container=document.body;return(0,jsx_runtime.jsxs)(atoms.AM,{children:[(0,jsx_runtime.jsx)(atoms.m_,{text:"Project menu",children:(0,jsx_runtime.jsx)(atoms.Wv,{asChild:!0,children:(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",size:"icon","aria-label":"Project menu",className:"h-10 w-10",children:(0,jsx_runtime.jsx)(react_icons_esm.sKQ,{className:"h-5 w-5"})})})}),(0,jsx_runtime.jsx)(atoms.hl,{align:"start",className:"w-64 text-sm",container,children:(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,jsx_runtime.jsx)(link_default(),{className:"rounded px-2 py-1 hover:bg-muted min-h-10",href:"/cms",children:"Dashboard"}),shop&&(0,jsx_runtime.jsx)(link_default(),{className:"rounded px-2 py-1 hover:bg-muted min-h-10",href:`/cms/shop/${shop}`,children:"Site"}),shop&&(0,jsx_runtime.jsx)(link_default(),{className:"rounded px-2 py-1 hover:bg-muted min-h-10",href:`/cms/shop/${shop}/sections`,children:"Sections"}),shop&&(0,jsx_runtime.jsx)(link_default(),{className:"rounded px-2 py-1 hover:bg-muted min-h-10",href:`/cms/shop/${shop}/settings`,children:"Tools"}),shop&&(0,jsx_runtime.jsx)(link_default(),{className:"rounded px-2 py-1 hover:bg-muted min-h-10",href:`/cms/shop/${shop}/marketing/email`,children:"Email Campaigns"}),(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded px-2 py-1 text-start hover:bg-muted min-h-10 min-w-10",onClick:()=>{try{window.dispatchEvent(new Event("pb:open-view"))}catch(e){}},children:"View…"}),(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded px-2 py-1 text-start hover:bg-muted min-h-10 min-w-10",onClick:()=>{try{window.dispatchEvent(new Event("pb:open-design"))}catch(e){}},children:"Design…"}),(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded px-2 py-1 text-start hover:bg-muted min-h-10 min-w-10",onClick:()=>{try{window.dispatchEvent(new Event("pb:open-breakpoints"))}catch(e){}},children:"Device Manager…"})]})})]})}function TopActionBar({onSave,onPublish,saving=!1,publishing=!1,showPreview,togglePreview,showVersions=!0,showPreviewButton=!0,publishLabel}){const t=(0,src.c3)(),publishText=null!=publishLabel?publishLabel:t("cms.builder.topBar.publish");return(0,jsx_runtime.jsxs)("div",{className:"flex w-full items-center justify-end gap-2",children:[(0,jsx_runtime.jsx)(atoms.m_,{text:t("cms.builder.topBar.save.tooltip"),children:(0,jsx_runtime.jsx)(shadcn.$n,{onClick:onSave,disabled:saving,children:saving?(0,jsx_runtime.jsx)(atoms.y$,{className:"h-4 w-4"}):t("cms.builder.topBar.save")})}),(0,jsx_runtime.jsx)(atoms.m_,{text:publishText,children:(0,jsx_runtime.jsx)(shadcn.$n,{variant:"default",className:"h-9 px-4",onClick:onPublish,disabled:publishing,"data-tour":"publish",children:publishing?(0,jsx_runtime.jsx)(atoms.y$,{className:"h-4 w-4"}):publishText})}),showPreviewButton&&"boolean"==typeof showPreview&&togglePreview&&(0,jsx_runtime.jsx)(atoms.m_,{text:t("cms.builder.topBar.preview.toggle.tooltip"),children:(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",className:"h-9 px-3 text-sm",onClick:()=>{const next=!showPreview;try{window.dispatchEvent(new CustomEvent("pb:notify",{detail:{type:"preview",title:t(next?"cms.builder.preview.enabled":"cms.builder.preview.disabled")}}))}catch(e){}togglePreview()},"aria-label":t(showPreview?"cms.builder.topBar.preview.hide":"cms.builder.topBar.preview.show"),title:t(showPreview?"cms.builder.topBar.preview.hide":"cms.builder.topBar.preview.show"),children:t(showPreview?"cms.builder.topBar.mode.editing":"cms.builder.preview.title")})}),showVersions&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(atoms.m_,{text:t("cms.builder.topBar.versions.tooltip"),children:(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",onClick:()=>{try{window.dispatchEvent(new Event("pb:open-versions"))}catch(e){}},children:t("cms.builder.topBar.versions")})}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("cms.builder.topBar.saveVersion.tooltip"),children:(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",onClick:()=>{try{window.dispatchEvent(new Event("pb:save-version"))}catch(e){}},children:t("cms.builder.topBar.saveVersion")})})]})]})}function NotificationsBell({shop,pageId}){const t=(0,src.c3)(),[count,setCount]=react.useState(0),[items,setItems]=react.useState([]),[commentCount,setCommentCount]=react.useState(0);return react.useEffect(()=>{let active=!0;const load=async()=>{try{if(!shop||!pageId)return;const res=await fetch(`/api/comments/${encodeURIComponent(shop)}/${encodeURIComponent(pageId)}`);if(!res.ok)return;const list=await res.json();if(!active)return;const unresolved=list.filter(t=>!t.resolved);setCommentCount(unresolved.length),setItems(prev=>{const fromComments=unresolved.slice(0,10).map(t=>{var _messages_;const r=t;var _r_id;const id=String(null!==(_r_id=r.id)&&void 0!==_r_id?_r_id:"");var _r_messages;const messages=null!==(_r_messages=r.messages)&&void 0!==_r_messages?_r_messages:[];return{id:`c:${id}`,title:(null==messages||null===(_messages_=messages[0])||void 0===_messages_?void 0:_messages_.text)||"Comment",ts:r.updatedAt||r.createdAt,source:"comments"}}),merged=[...fromComments,...prev.filter(p=>"comments"!==p.source)].slice(0,50),extra=merged.filter(i=>"comments"!==i.source).length;return setCount(Math.min(99,unresolved.length+extra)),merged})}catch(e){}};load();const id=setInterval(load,3e4);return()=>{active=!1,clearInterval(id)}},[shop,pageId]),react.useEffect(()=>{const onLive=e=>{try{const ce=e,text=("string"==typeof ce.detail?ce.detail:null==ce?void 0:ce.detail)||"Update";setItems(prev=>{const next=[{id:`m:${Date.now()}`,title:String(text),ts:(new Date).toISOString(),source:"messages"},...prev].slice(0,50),extra=next.filter(i=>"comments"!==i.source).length,commentsNow=prev.filter(i=>"comments"===i.source).length;return setCount(Math.min(99,commentsNow+extra)),next})}catch(e){}},onNotify=e=>{try{const d=e.detail||{},title=d.title||d.message||"Event";setItems(prev=>{const next=[{id:`e:${Date.now()}`,title:String(title),ts:(new Date).toISOString(),source:d.type||"event"},...prev].slice(0,50),extra=next.filter(i=>"comments"!==i.source).length,commentsNow=prev.filter(i=>"comments"===i.source).length;return setCount(Math.min(99,commentsNow+extra)),next})}catch(e){}};return window.addEventListener("pb-live-message",onLive),window.addEventListener("pb:notify",onNotify),()=>{window.removeEventListener("pb-live-message",onLive),window.removeEventListener("pb:notify",onNotify)}},[]),(0,jsx_runtime.jsxs)(atoms.AM,{children:[(0,jsx_runtime.jsx)(atoms.Wv,{asChild:!0,children:(0,jsx_runtime.jsx)(atoms.m_,{text:count>0?`${count} notifications`:"Notifications",children:(0,jsx_runtime.jsxs)("button",{type:"button","aria-label":"Notifications",className:"relative rounded border px-2 py-1 text-sm min-h-10 min-w-10 inline-flex items-center justify-center",children:[(0,jsx_runtime.jsx)(react_icons_esm.XFE,{className:"h-4 w-4"}),count>0&&(0,jsx_runtime.jsx)("span",{className:"absolute -end-1 -top-1 inline-flex h-4 min-w-4 items-center justify-center rounded-full bg-red-500 px-1 text-xs font-semibold text-white",children:count})]})})}),(0,jsx_runtime.jsxs)(atoms.hl,{align:"end",className:"w-80 text-sm",children:[(0,jsx_runtime.jsxs)("div",{className:"mb-2 flex items-center gap-2 text-xs text-muted-foreground",children:[(0,jsx_runtime.jsxs)("span",{className:"rounded bg-muted px-1",children:["All ",count]})," ",(0,jsx_runtime.jsxs)("span",{className:"rounded bg-muted px-1",children:["Comments ",commentCount]})," ",(0,jsx_runtime.jsxs)("span",{className:"rounded bg-muted px-1",children:["Events ",Math.max(0,count-commentCount)]})," "]}),0===items.length?(0,jsx_runtime.jsx)("div",{className:"text-muted-foreground",children:t("pb.notifications.none")}):(0,jsx_runtime.jsx)("ul",{className:"max-h-80 space-y-1 overflow-auto",children:items.map(it=>(0,jsx_runtime.jsx)("li",{children:(0,jsx_runtime.jsxs)("button",{type:"button",className:"w-full text-start rounded border px-2 py-1 hover:bg-muted focus-visible:outline focus-visible:outline-2 focus-visible:outline-primary min-h-10 min-w-10",onClick:()=>{if("comments"===it.source){const tid=it.id.startsWith("c:")?it.id.slice(2):it.id;try{window.dispatchEvent(new CustomEvent("pb:open-comment",{detail:{id:tid}}))}catch(e){}}},children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,jsx_runtime.jsx)("div",{className:"truncate",children:it.title}),(0,jsx_runtime.jsx)("span",{className:"text-xs uppercase text-muted-foreground",children:it.source||"event"})]}),it.ts&&(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted-foreground",children:new Date(it.ts).toLocaleString()})]})},it.id))})]})]})}StudioMenu.__docgenInfo={description:"",methods:[],displayName:"StudioMenu",props:{shop:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""}}},TopActionBar.__docgenInfo={description:"",methods:[],displayName:"TopActionBar",props:{onSave:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onPublish:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},saving:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},publishing:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},showPreview:{required:!1,tsType:{name:"boolean"},description:""},togglePreview:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},showVersions:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},showPreviewButton:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},publishLabel:{required:!1,tsType:{name:"string"},description:""}}},NotificationsBell.__docgenInfo={description:"",methods:[],displayName:"NotificationsBell",props:{shop:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},pageId:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""}}};const PageBuilderTopBar=({historyProps,showPreview,togglePreview,mode,shop,pageId,toolbarProps,gridProps,onInsertPreset,presetsSourceUrl,startTour,toggleComments,showComments,showPalette,onTogglePalette,parentFirst,onParentFirstChange,crossBreakpointNotices,onCrossBreakpointNoticesChange,showInspector,onToggleInspector,helpOpen,onHelpOpenChange,canSavePreset,onSavePreset})=>{const t=(0,src.c3)();return(0,jsx_runtime.jsxs)("div",{className:"sticky top-0 w-full overflow-x-hidden bg-surface-1/95 backdrop-blur",children:[(0,jsx_runtime.jsxs)("div",{className:"flex w-full items-center gap-2 py-2",children:[(0,jsx_runtime.jsxs)(Inline.c,{gap:2,alignY:"center",className:"min-w-0",children:["saving"===(null==historyProps?void 0:historyProps.autoSaveState)&&(0,jsx_runtime.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs text-muted-foreground",children:[(0,jsx_runtime.jsx)(react_icons_esm.jfu,{className:"h-3 w-3 animate-spin"})," ",t("actions.saving")]}),"saved"===(null==historyProps?void 0:historyProps.autoSaveState)&&(0,jsx_runtime.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs text-muted-foreground",children:[(0,jsx_runtime.jsx)(react_icons_esm.Srz,{className:"h-3 w-3"})," ",t("actions.autosaved")]})]}),(0,jsx_runtime.jsx)("div",{className:"min-w-0 flex-1"}),(0,jsx_runtime.jsx)(TopActionBar,{onSave:historyProps.onSave,onPublish:historyProps.onPublish,saving:historyProps.saving,publishing:historyProps.publishing,showPreview,togglePreview,showVersions:"section"!==mode,publishLabel:t("section"===mode?"cms.builder.publish.section":"actions.publish")}),(0,jsx_runtime.jsx)(NotificationsBell,{shop:null!=shop?shop:null,pageId:null!=pageId?pageId:null}),(0,jsx_runtime.jsx)(shadcn.$n,{asChild:!0,variant:"outline",size:"sm","aria-label":t("dev.viewSession"),children:(0,jsx_runtime.jsx)("a",{href:"/api/auth/session",target:"_blank",rel:"noreferrer",children:t("dev.session")})}),(0,jsx_runtime.jsxs)(shadcn.lG,{open:helpOpen,onOpenChange:onHelpOpenChange,children:[(0,jsx_runtime.jsx)(shadcn.zM,{asChild:!0,children:(0,jsx_runtime.jsx)(atoms.m_,{text:t("cms.builder.help.keyboardMouse"),children:(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",size:"icon","aria-label":t("actions.help"),children:"?"})})}),(0,jsx_runtime.jsxs)(shadcn.Cf,{className:"space-y-2",children:[(0,jsx_runtime.jsx)(shadcn.L3,{children:t("cms.builder.help.keyboardMouse")}),(0,jsx_runtime.jsxs)("ul",{className:"space-y-1 text-sm",children:[(0,jsx_runtime.jsx)("li",{className:"font-medium mt-1",children:t("cms.builder.help.mouse")}),(0,jsx_runtime.jsx)("li",{children:t("cms.builder.help.mouse.dragResize",{Shift:"Shift"})}),(0,jsx_runtime.jsx)("li",{children:t("cms.builder.help.mouse.quickSizing")}),(0,jsx_runtime.jsx)("li",{children:t("cms.builder.help.mouse.pan",{Space:"Space"})}),(0,jsx_runtime.jsx)("li",{className:"font-medium mt-3",children:t("cms.builder.help.keyboard")}),(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)("kbd",{children:"Ctrl"}),"/",(0,jsx_runtime.jsx)("kbd",{children:"⌘"})," + ",(0,jsx_runtime.jsx)("kbd",{children:"S"})," ",t("actions.save")]}),(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)("kbd",{children:"Ctrl"}),"/",(0,jsx_runtime.jsx)("kbd",{children:"⌘"})," + ",(0,jsx_runtime.jsx)("kbd",{children:"Alt"})," + ",(0,jsx_runtime.jsx)("kbd",{children:"P"}),t("actions.togglePreview")]}),(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)("kbd",{children:"Ctrl"}),"/",(0,jsx_runtime.jsx)("kbd",{children:"⌘"})," + ",(0,jsx_runtime.jsx)("kbd",{children:"B"})," ",t("actions.togglePalette")]}),(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)("kbd",{children:"Ctrl"}),"/",(0,jsx_runtime.jsx)("kbd",{children:"⌘"})," + ",(0,jsx_runtime.jsx)("kbd",{children:"Shift"})," + ",(0,jsx_runtime.jsx)("kbd",{children:"P"}),t("actions.publish")]}),(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)("kbd",{children:"Shift"})," + ",(0,jsx_runtime.jsx)("kbd",{children:"Arrow"})," ",t("cms.builder.help.keyboard.resizeSelection")]}),(0,jsx_runtime.jsx)("li",{children:t("cms.builder.help.keyboard.lockAxis",{Shift:"Shift"})}),(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)("kbd",{children:"Ctrl"}),"/",(0,jsx_runtime.jsx)("kbd",{children:"⌘"})," + ",(0,jsx_runtime.jsx)("kbd",{children:"Arrow"})," ",t("cms.builder.help.keyboard.adjustSpacing")]}),(0,jsx_runtime.jsx)("li",{children:t("cms.builder.help.keyboard.moveComponents",{Space:"Space",Enter:"Enter",Arrow:"Arrow",Esc:"Esc"})}),(0,jsx_runtime.jsx)("li",{className:"text-xs text-muted-foreground",children:t("cms.builder.help.keyboard.snapInfo")}),(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)("kbd",{children:"Ctrl"}),"/",(0,jsx_runtime.jsx)("kbd",{children:"⌘"})," + ",(0,jsx_runtime.jsx)("kbd",{children:"Shift"})," + ",(0,jsx_runtime.jsx)("kbd",{children:"["}),t("cms.builder.help.keyboard.rotateLeft")]}),(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)("kbd",{children:"Ctrl"}),"/",(0,jsx_runtime.jsx)("kbd",{children:"⌘"})," + ",(0,jsx_runtime.jsx)("kbd",{children:"Shift"})," + ",(0,jsx_runtime.jsx)("kbd",{children:"]"}),t("cms.builder.help.keyboard.rotateRight")]}),(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)("kbd",{children:"Ctrl"}),"/",(0,jsx_runtime.jsx)("kbd",{children:"⌘"})," + ",(0,jsx_runtime.jsx)("kbd",{children:"Z"})," ",t("actions.undo")]}),(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)("kbd",{children:"Ctrl"}),"/",(0,jsx_runtime.jsx)("kbd",{children:"⌘"})," + ",(0,jsx_runtime.jsx)("kbd",{children:"Y"})," ",t("actions.redo")]}),(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)("kbd",{children:"Ctrl"}),"/",(0,jsx_runtime.jsx)("kbd",{children:"⌘"})," + ",(0,jsx_runtime.jsx)("kbd",{children:"1"})," ",t("cms.builder.view.desktop")]}),(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)("kbd",{children:"Ctrl"}),"/",(0,jsx_runtime.jsx)("kbd",{children:"⌘"})," + ",(0,jsx_runtime.jsx)("kbd",{children:"2"})," ",t("cms.builder.view.tablet")]}),(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)("kbd",{children:"Ctrl"}),"/",(0,jsx_runtime.jsx)("kbd",{children:"⌘"})," + ",(0,jsx_runtime.jsx)("kbd",{children:"3"})," ",t("cms.builder.view.mobile")]}),(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)("kbd",{children:"Ctrl"}),"/",(0,jsx_runtime.jsx)("kbd",{children:"⌘"})," + ",(0,jsx_runtime.jsx)("kbd",{children:"Shift"})," + ",(0,jsx_runtime.jsx)("kbd",{children:"S"}),t("cms.builder.versions.saveVersion")]}),(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)("kbd",{children:"Ctrl"}),"/",(0,jsx_runtime.jsx)("kbd",{children:"⌘"})," + ",(0,jsx_runtime.jsx)("kbd",{children:"Shift"})," + ",(0,jsx_runtime.jsx)("kbd",{children:"V"}),t("cms.builder.versions.openVersions")]})]}),(0,jsx_runtime.jsx)("div",{className:"pt-2",children:(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",onClick:()=>{try{startTour()}finally{onHelpOpenChange(!1)}},children:t("cms.builder.tour.start")})})]})]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex w-full flex-wrap items-center gap-2 py-2",children:[(0,jsx_runtime.jsx)("div",{className:"flex items-center gap-2",children:(0,jsx_runtime.jsx)(StudioMenu,{shop:null!=shop?shop:null})}),(0,jsx_runtime.jsx)("div",{"data-tour":"toolbar",className:"min-w-0 flex-1 overflow-x-hidden",children:(0,jsx_runtime.jsx)(PageToolbar.A,{...toolbarProps,hideDeviceManager:"section"===mode,hidePagesNav:"section"===mode,pagesNav:"section"===mode?void 0:toolbarProps.pagesNav})}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(atoms.m_,{text:t("cms.builder.presets.insertLayout.tooltip"),children:(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",size:"sm",onClick:()=>{try{window.dispatchEvent(new Event("pb:open-presets"))}catch(e){}},"aria-label":t("cms.builder.presets.insertPreset"),children:t("cms.builder.presets.insertPreset")})}),onSavePreset&&(0,jsx_runtime.jsx)(atoms.m_,{text:t(canSavePreset?"cms.builder.presets.saveSelected.tooltip":"cms.builder.presets.selectToSave.tooltip"),children:(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",size:"sm",disabled:!canSavePreset,onClick:onSavePreset,"aria-disabled":!canSavePreset,children:t("cms.builder.presets.saveAsPreset")})}),(0,jsx_runtime.jsx)(ResponsiveRightActions,{gridProps,onInsertPreset,presetsSourceUrl,startTour,toggleComments,showComments,togglePreview,showPreview,showPalette,togglePalette:onTogglePalette,parentFirst,onParentFirstChange,crossBreakpointNotices,onCrossBreakpointNoticesChange}),(0,jsx_runtime.jsx)(PresenceAvatars,{shop:null!=shop?shop:null,pageId:null!=pageId?pageId:null}),(0,jsx_runtime.jsx)(page_builder_HistoryControls,{...historyProps,showUndoRedo:!0,showSavePublish:!1,showVersions:!1}),(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded border px-2 py-1 text-sm min-h-10 min-w-10",onClick:onToggleInspector,"aria-label":t(showInspector?"cms.builder.inspector.hide":"cms.builder.inspector.show"),title:t(showInspector?"cms.builder.inspector.hide":"cms.builder.inspector.show"),children:showInspector?(0,jsx_runtime.jsx)("span",{className:"inline-flex items-center","aria-hidden":!0,children:"›"}):(0,jsx_runtime.jsx)("span",{className:"inline-flex items-center","aria-hidden":!0,children:"‹"})})]})]})]})},page_builder_PageBuilderTopBar=PageBuilderTopBar;PageBuilderTopBar.__docgenInfo={description:"",methods:[],displayName:"PageBuilderTopBar",props:{historyProps:{required:!0,tsType:{name:"ComponentProps",elements:[{name:"HistoryControls"}],raw:"ComponentProps<typeof HistoryControls>"},description:""},showPreview:{required:!0,tsType:{name:"boolean"},description:""},togglePreview:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},mode:{required:!0,tsType:{name:"union",raw:'"page" | "section"',elements:[{name:"literal",value:'"page"'},{name:"literal",value:'"section"'}]},description:""},shop:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},pageId:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},toolbarProps:{required:!0,tsType:{name:"ComponentProps",elements:[{name:"PageToolbar"}],raw:"ComponentProps<typeof PageToolbar>"},description:""},gridProps:{required:!0,tsType:{name:"ComponentProps",elements:[{name:"GridSettings"}],raw:"ComponentProps<typeof GridSettings>"},description:""},onInsertPreset:{required:!1,tsType:{name:"signature",type:"function",raw:"(component: PageComponent) => void",signature:{arguments:[{type:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},name:"component"}],return:{name:"void"}}},description:""},presetsSourceUrl:{required:!1,tsType:{name:"string"},description:""},startTour:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},toggleComments:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},showComments:{required:!0,tsType:{name:"boolean"},description:""},showPalette:{required:!0,tsType:{name:"boolean"},description:""},onTogglePalette:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},parentFirst:{required:!1,tsType:{name:"boolean"},description:""},onParentFirstChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(v: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"v"}],return:{name:"void"}}},description:""},crossBreakpointNotices:{required:!1,tsType:{name:"boolean"},description:""},onCrossBreakpointNoticesChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(v: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"v"}],return:{name:"void"}}},description:""},showInspector:{required:!0,tsType:{name:"boolean"},description:""},onToggleInspector:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},helpOpen:{required:!0,tsType:{name:"boolean"},description:""},onHelpOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},canSavePreset:{required:!1,tsType:{name:"boolean"},description:""},onSavePreset:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const PlaceholderAnimations=()=>(0,jsx_runtime.jsx)("style",{children:"\n    @media (prefers-reduced-motion: no-preference) {\n      @keyframes pb-fade-scale-in { from { transform: scale(0.96); opacity: .65 } to { transform: scale(1); opacity: 1 } }\n      [data-placeholder] { transform-origin: center; animation: pb-fade-scale-in 140ms cubic-bezier(0.16,1,0.3,1); }\n    }\n  "}),page_builder_PlaceholderAnimations=PlaceholderAnimations;PlaceholderAnimations.__docgenInfo={description:"Injects small animation keyframes for placeholders, respecting reduced motion.",methods:[],displayName:"PlaceholderAnimations"};var console=__webpack_require__("../../node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");class ErrorBoundaryImpl extends react.Component{static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(error,info){try{console.error("PageBuilder error boundary caught:",error,null==info?void 0:info.componentStack)}catch(e){}try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:String(this.props.t("pb.error.interactionCanceled"))}))}catch(e){}var _info_componentStack;this.setState({hasError:!0,info:null!==(_info_componentStack=null==info?void 0:info.componentStack)&&void 0!==_info_componentStack?_info_componentStack:void 0})}render(){return this.state.hasError?(0,jsx_runtime.jsxs)("div",{className:"m-2 rounded border border-danger/40 bg-danger/5 p-3 text-sm",children:[(0,jsx_runtime.jsx)("div",{className:"mb-2 font-medium",children:this.props.t("pb.error.somethingWrong")}),(0,jsx_runtime.jsx)("div",{className:"mb-3 text-muted-foreground",children:this.props.t("pb.error.editorPaused")}),(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded border px-2 py-1 min-h-10 min-w-10",onClick:this.reset,"aria-label":String(this.props.t("pb.error.tryAgain")),children:this.props.t("pb.error.tryAgain")})]}):this.props.children}constructor(props){super(props),this.reset=()=>{this.setState({hasError:!1,info:void 0})},this.state={hasError:!1}}}function ErrorBoundary(props){const t=(0,src.c3)();return(0,jsx_runtime.jsx)(ErrorBoundaryImpl,{...props,t})}ErrorBoundary.__docgenInfo={description:"",methods:[],displayName:"ErrorBoundary",props:{children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};var PageCanvas=__webpack_require__("../../packages/ui/src/components/cms/page-builder/PageCanvas.tsx");function EmptyCanvasOverlay({onAddSection,onOpenPalette,onOpenPresets}){return(0,jsx_runtime.jsx)("div",{className:"relative w-full h-full",children:(0,jsx_runtime.jsx)(Cluster.d,{alignY:"center",justify:"center",className:"pointer-events-none absolute inset-0",children:(0,jsx_runtime.jsxs)("div",{className:"pointer-events-auto w-full sm:w-96 rounded border bg-surface-1/95 p-4 text-center shadow",children:[(0,jsx_runtime.jsx)("div",{className:"mb-2 text-base font-semibold",children:"Start by adding a Section"}),(0,jsx_runtime.jsx)("p",{className:"mb-3 text-sm text-muted-foreground",children:"Drag from the palette, or use the quick actions below to get going."}),(0,jsx_runtime.jsxs)(Cluster.d,{justify:"center",wrap:!0,className:"gap-2",children:[(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",onClick:onAddSection,children:"Add Section"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:onOpenPalette,children:"Open Palette"}),onOpenPresets&&(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:onOpenPresets,children:"Section Library"})]}),(0,jsx_runtime.jsx)("div",{className:"mt-3 text-xs text-muted-foreground",children:'Tip: Press "/" or ⌘/Ctrl+K to insert anything'})]})})})}EmptyCanvasOverlay.__docgenInfo={description:"",methods:[],displayName:"EmptyCanvasOverlay",props:{onAddSection:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onOpenPalette:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onOpenPresets:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var DevToolsOverlay=__webpack_require__("../../packages/ui/src/components/cms/page-builder/devtools/DevToolsOverlay.tsx");function useReducedMotion(){const[prefersReducedMotion,setPrefersReducedMotion]=(0,react.useState)(!1);return(0,react.useEffect)(()=>{if("function"!=typeof window.matchMedia)return;const mq=window.matchMedia("(prefers-reduced-motion: reduce)"),update=()=>setPrefersReducedMotion(!!mq.matches);update();try{return mq.addEventListener("change",update),()=>mq.removeEventListener("change",update)}catch(e){var _mq_addListener;return null===(_mq_addListener=mq.addListener)||void 0===_mq_addListener||_mq_addListener.call(mq,update),()=>{var _mq_removeListener;return null===(_mq_removeListener=mq.removeListener)||void 0===_mq_removeListener?void 0:_mq_removeListener.call(mq,update)}}},[]),prefersReducedMotion}var paletteData=__webpack_require__("../../packages/ui/src/components/cms/page-builder/paletteData.ts"),appInstallStore=__webpack_require__("../../packages/ui/src/components/cms/page-builder/appInstallStore.ts");const buildPaletteIndex=installedApps=>{const index=new Map;for(const category of(0,paletteData.Us)(installedApps))for(const item of category.items)index.set(item.type,item);return index};function DragOverlayPreview({dragMeta,allowed,locale:_locale="en",shop=null}){const t=(0,src.c3)(),reducedMotion=useReducedMotion(),[ready,setReady]=(0,react.useState)(reducedMotion),[paletteIndex,setPaletteIndex]=(0,react.useState)(()=>buildPaletteIndex((0,appInstallStore.Jg)(null!=shop?shop:null)));(0,react.useEffect)(()=>(setPaletteIndex(buildPaletteIndex((0,appInstallStore.Jg)(null!=shop?shop:null))),(0,appInstallStore.HQ)(null!=shop?shop:null,apps=>{setPaletteIndex(buildPaletteIndex(apps))})),[shop]),(0,react.useEffect)(()=>{if(reducedMotion)return;const id=requestAnimationFrame(()=>setReady(!0));return()=>cancelAnimationFrame(id)},[reducedMotion]);const findIcon=(0,react.useCallback)(type=>{if(!type)return null;const entry=paletteIndex.get(type);return(null==entry?void 0:entry.previewImage)?entry.previewImage:(null==entry?void 0:entry.icon)?entry.icon:paletteData.DE},[paletteIndex]);if(!dragMeta)return null;const icon="library"===dragMeta.from&&dragMeta.thumbnail?dragMeta.thumbnail:findIcon(dragMeta.type),label=dragMeta.label?dragMeta.label:dragMeta.type?dragMeta.type:"library"===dragMeta.from?"number"==typeof dragMeta.count?1===dragMeta.count?t("cms.builder.drag.blockCount.one",{count:dragMeta.count}):t("cms.builder.drag.blockCount.many",{count:dragMeta.count}):t("cms.builder.drag.libraryItem"):t("cms.builder.drag.block"),note="palette"===dragMeta.from?t("cms.builder.drag.palette"):"library"===dragMeta.from?t("cms.builder.drag.library"):t("cms.builder.drag.canvas"),danger=!1===allowed;return(0,jsx_runtime.jsx)("div",{className:"pointer-events-none select-none rounded-md border bg-surface-2 px-3 py-2 shadow-elevation-3 transform-gpu "+(reducedMotion?"":" transition-[transform,opacity] duration-[180ms] ease-[cubic-bezier(0.16,1,0.3,1)]")+(ready&&!reducedMotion?" scale-100 opacity-100":reducedMotion?"":" scale-[0.96] opacity-[0.85]")+(danger?" border-danger ring-2 ring-danger/50 cursor-not-allowed":" border-border-2"),"aria-disabled":danger,children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[icon?(0,jsx_runtime.jsx)(next_image.A,{src:icon,alt:"",width:24,height:24,className:"h-6 w-6 rounded"}):(0,jsx_runtime.jsx)("div",{className:"h-6 w-6 rounded bg-muted"}),(0,jsx_runtime.jsxs)("div",{className:"flex flex-col",children:[(0,jsx_runtime.jsx)("span",{className:"text-sm "+(danger?"text-danger":""),children:label}),(0,jsx_runtime.jsx)("span",{className:"text-muted-foreground text-xs",children:note})]}),danger&&(0,jsx_runtime.jsx)("span",{className:"ms-2 text-danger","aria-hidden":!0,children:"⛔"})]})})}DragOverlayPreview.__docgenInfo={description:"",methods:[],displayName:"DragOverlayPreview",props:{dragMeta:{required:!0,tsType:{name:"union",raw:"DragMeta | null",elements:[{name:"signature",type:"object",raw:'{\n  from: "palette" | "library" | "canvas";\n  type?: ComponentType;\n  count?: number;\n  label?: string;\n  thumbnail?: string | null;\n}',signature:{properties:[{key:"from",value:{name:"union",raw:'"palette" | "library" | "canvas"',elements:[{name:"literal",value:'"palette"'},{name:"literal",value:'"library"'},{name:"literal",value:'"canvas"'}],required:!0}},{key:"type",value:{name:"union",raw:"| keyof typeof atomRegistry\n| keyof typeof moleculeRegistry\n| keyof typeof organismRegistry\n| keyof typeof containerRegistry\n| keyof typeof layoutRegistry",elements:[{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"}],required:!1}},{key:"count",value:{name:"number",required:!1}},{key:"label",value:{name:"string",required:!1}},{key:"thumbnail",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}}]}},{name:"null"}]},description:""},allowed:{required:!0,tsType:{name:"union",raw:"boolean | null",elements:[{name:"boolean"},{name:"null"}]},description:""},locale:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'en'",computed:!1}},shop:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:"",defaultValue:{value:"null",computed:!1}}}};const PageBuilderCanvasArea=({scrollRef,onPointerDown,zoom,frameClass,viewport,viewportStyle,canvasProps,paletteOnAdd,showDevTools,dragMeta,dropAllowed,reducedMotion,activeType,toolbarLocale,previewProps,showPreview,openPalette,setEditingSizePx})=>{const t=(0,src.c3)();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(page_builder_PlaceholderAnimations,{}),(0,jsx_runtime.jsx)("div",{className:"flex flex-1 gap-4 min-h-0",children:(0,jsx_runtime.jsxs)(ErrorBoundary,{children:[(0,jsx_runtime.jsx)("div",{ref:scrollRef,className:"relative max-h-full overflow-auto overscroll-contain min-h-0",onPointerDown,children:(0,jsx_runtime.jsx)("div",{style:{transform:`scale(${zoom})`,transformOrigin:"top center"},children:(0,jsx_runtime.jsxs)("div",{className:`${frameClass[viewport]} shrink-0`,style:viewportStyle,"data-tour":"canvas","data-viewport":viewport,children:[(0,jsx_runtime.jsxs)("div",{className:"relative",children:[setEditingSizePx&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{role:"separator","aria-label":t("pb.canvas.resizeNarrowerAria"),className:"absolute start-0 top-0 h-full w-1 cursor-col-resize bg-transparent",onPointerDown:event=>{const host=event.currentTarget.parentElement;if(!host)return;const startX=event.clientX,startW=host.offsetWidth/(zoom||1),onMove=ev=>{const dx=(ev.clientX-startX)/(zoom||1),next=Math.max(320,Math.min(1920,Math.round(startW-dx)));setEditingSizePx(next)},onUp=()=>{window.removeEventListener("pointermove",onMove),window.removeEventListener("pointerup",onUp)};window.addEventListener("pointermove",onMove),window.addEventListener("pointerup",onUp)}}),(0,jsx_runtime.jsx)("div",{role:"separator","aria-label":t("pb.canvas.resizeWiderAria"),className:"absolute end-0 top-0 h-full w-1 cursor-col-resize bg-transparent",onPointerDown:event=>{const host=event.currentTarget.parentElement;if(!host)return;const startX=event.clientX,startW=host.offsetWidth/(zoom||1),onMove=ev=>{const dx=(ev.clientX-startX)/(zoom||1),next=Math.max(320,Math.min(1920,Math.round(startW+dx)));setEditingSizePx(next)},onUp=()=>{window.removeEventListener("pointermove",onMove),window.removeEventListener("pointerup",onUp)};window.addEventListener("pointermove",onMove),window.addEventListener("pointerup",onUp)}})]}),(0,jsx_runtime.jsx)(PageCanvas.A,{...canvasProps}),0===canvasProps.components.length&&(0,jsx_runtime.jsx)(EmptyCanvasOverlay,{onAddSection:()=>paletteOnAdd("Section"),onOpenPalette:openPalette,onOpenPresets:()=>window.dispatchEvent(new Event("pb:open-presets"))})]}),showDevTools&&(0,jsx_runtime.jsx)(DevToolsOverlay.A,{scrollRef})]})})}),(0,jsx_runtime.jsx)(core_esm.Hd,{dropAnimation:reducedMotion?{duration:0,easing:"linear"}:{...core_esm.by,duration:220,easing:"cubic-bezier(0.2, 0.8, 0.2, 1)",sideEffects:(0,core_esm.WB)({styles:{active:{opacity:"0.25"}}})},children:dragMeta?(0,jsx_runtime.jsx)(DragOverlayPreview,{dragMeta,allowed:null!=dropAllowed?dropAllowed:null,locale:toolbarLocale}):activeType?(0,jsx_runtime.jsx)("div",{className:"pointer-events-none rounded border bg-muted px-4 py-2 opacity-50 shadow",children:activeType}):null}),showPreview&&(0,jsx_runtime.jsx)(page_builder_PreviewPane,{...previewProps})]})})]})},page_builder_PageBuilderCanvasArea=PageBuilderCanvasArea;PageBuilderCanvasArea.__docgenInfo={description:"",methods:[],displayName:"PageBuilderCanvasArea",props:{scrollRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}]}],raw:"RefObject<HTMLDivElement | null>"},description:""},onPointerDown:{required:!0,tsType:{name:"signature",type:"function",raw:"(event: ReactPointerEvent<HTMLDivElement>) => void",signature:{arguments:[{type:{name:"ReactPointerEvent",elements:[{name:"HTMLDivElement"}],raw:"ReactPointerEvent<HTMLDivElement>"},name:"event"}],return:{name:"void"}}},description:""},zoom:{required:!0,tsType:{name:"number"},description:""},frameClass:{required:!0,tsType:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"},description:""},viewport:{required:!0,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:""},viewportStyle:{required:!0,tsType:{name:"CSSProperties"},description:""},canvasProps:{required:!0,tsType:{name:"ComponentProps",elements:[{name:"PageCanvas"}],raw:"ComponentProps<typeof PageCanvas>"},description:""},paletteOnAdd:{required:!0,tsType:{name:"signature",type:"function",raw:"(type: ComponentType) => void",signature:{arguments:[{type:{name:"union",raw:"| keyof typeof atomRegistry\n| keyof typeof moleculeRegistry\n| keyof typeof organismRegistry\n| keyof typeof containerRegistry\n| keyof typeof layoutRegistry",elements:[{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"}]},name:"type"}],return:{name:"void"}}},description:""},showDevTools:{required:!0,tsType:{name:"boolean"},description:""},dragMeta:{required:!1,tsType:{name:"union",raw:"DragMeta | null",elements:[{name:"signature",type:"object",raw:'{\n  from: "palette" | "library" | "canvas";\n  type?: ComponentType;\n  count?: number;\n  label?: string;\n  thumbnail?: string | null;\n}',signature:{properties:[{key:"from",value:{name:"union",raw:'"palette" | "library" | "canvas"',elements:[{name:"literal",value:'"palette"'},{name:"literal",value:'"library"'},{name:"literal",value:'"canvas"'}],required:!0}},{key:"type",value:{name:"union",raw:"| keyof typeof atomRegistry\n| keyof typeof moleculeRegistry\n| keyof typeof organismRegistry\n| keyof typeof containerRegistry\n| keyof typeof layoutRegistry",elements:[{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"}],required:!1}},{key:"count",value:{name:"number",required:!1}},{key:"label",value:{name:"string",required:!1}},{key:"thumbnail",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}}]}},{name:"null"}]},description:""},dropAllowed:{required:!1,tsType:{name:"union",raw:"boolean | null",elements:[{name:"boolean"},{name:"null"}]},description:""},reducedMotion:{required:!0,tsType:{name:"boolean"},description:""},activeType:{required:!0,tsType:{name:"union",raw:"ComponentType | null",elements:[{name:"union",raw:"| keyof typeof atomRegistry\n| keyof typeof moleculeRegistry\n| keyof typeof organismRegistry\n| keyof typeof containerRegistry\n| keyof typeof layoutRegistry",elements:[{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"}]},{name:"null"}]},description:""},toolbarLocale:{required:!0,tsType:{name:"string"},description:""},previewProps:{required:!0,tsType:{name:'PageBuilderLayoutProps["previewProps"]',raw:'PageBuilderLayoutProps["previewProps"]'},description:""},showPreview:{required:!0,tsType:{name:"boolean"},description:""},openPalette:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},setEditingSizePx:{required:!1,tsType:{name:"signature",type:"function",raw:"(px: number | null) => void",signature:{arguments:[{type:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},name:"px"}],return:{name:"void"}}},description:""}}};var defaults=__webpack_require__("../../packages/ui/src/components/cms/page-builder/defaults.ts"),rules=__webpack_require__("../../packages/ui/src/components/cms/page-builder/rules.ts"),blocks=__webpack_require__("../../packages/ui/src/components/cms/blocks/index.ts");function findParentInfo(list,id,parentId){for(let i=0;i<list.length;i++){const c=list[i];if(c.id===id)return{parentId,index:i};const kids=c.children;if(Array.isArray(kids)){const found=findParentInfo(kids,id,c.id);if(found)return found}}return null}function CommandPalette({open,onOpenChange,components,selectedIds,dispatch,onSelectIds}){const T=(0,src.c3)(),[q,setQ]=(0,react.useState)(""),inputRef=(0,react.useRef)(null),all=function usePalette(){const registries=[];registries.push(["layout",blocks._g]),registries.push(["containers",blocks.RR]),registries.push(["atoms",blocks.ll]),registries.push(["molecules",blocks.GF]),registries.push(["organisms",blocks.I2]);const out=[];return registries.forEach(([category,reg])=>{Object.keys(reg||{}).sort().forEach(t=>{var _reg_t;const type=t,label=t.replace(/([A-Z])/g," $1").trim(),icon=null===(_reg_t=reg[t])||void 0===_reg_t?void 0:_reg_t.previewImage;out.push({type,label,category,icon})})}),out}(),items=(0,react.useMemo)(()=>{const query=q.trim().toLowerCase(),base=query?all.filter(i=>i.label.toLowerCase().includes(query)||i.type.toLowerCase().includes(query)):all;if(0===selectedIds.length)return base.filter(i=>(0,rules.Ai)(i.type));const info=findParentInfo(components,selectedIds[0]);if(!info||!info.parentId)return base.filter(i=>(0,rules.Ai)(i.type));const parent=(()=>{const stack=[...components];for(;stack.length;){const n=stack.shift();if(n.id===info.parentId)return n;var _n_children;Array.isArray(n.children)&&stack.unshift(...null!==(_n_children=n.children)&&void 0!==_n_children?_n_children:[])}return null})();if(!parent)return base;const allowed=(0,rules.gw)(parent.type);return base.filter(e=>allowed.has(e.type))},[q,all,components,selectedIds]);(0,react.useEffect)(()=>{open?setTimeout(()=>{var _inputRef_current;return null===(_inputRef_current=inputRef.current)||void 0===_inputRef_current?void 0:_inputRef_current.focus()},0):setQ("")},[open]);return(0,jsx_runtime.jsx)(shadcn.lG,{open,onOpenChange,children:(0,jsx_runtime.jsxs)(shadcn.Cf,{className:"w-full",children:[(0,jsx_runtime.jsx)(shadcn.L3,{children:"Insert…"}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)(shadcn.pd,{ref:inputRef,placeholder:"Search components",value:q,onChange:e=>setQ(e.target.value)}),(0,jsx_runtime.jsx)("div",{className:"max-h-64 overflow-auto",children:0===items.length?(0,jsx_runtime.jsx)("div",{className:"p-2 text-sm text-muted-foreground",children:"No results"}):(0,jsx_runtime.jsx)(primitives.xA,{cols:1,gap:1,className:"",children:items.map(i=>(0,jsx_runtime.jsxs)(shadcn.$n,{variant:"outline",className:"justify-start",onClick:()=>(type=>{const isContainer=defaults.K3.includes(type);var _defaults_type;const component={id:(0,browser.Z0)(),type,...null!==(_defaults_type=defaults.NT[type])&&void 0!==_defaults_type?_defaults_type:{},...isContainer?{children:[]}:{}};let parentId,index=components.length;if(selectedIds.length>0){const info=findParentInfo(components,selectedIds[0]);info&&(parentId=info.parentId,index=info.index+1)}const parentType=(()=>{if(!parentId)return"ROOT";const stack=[...components];for(;stack.length;){const n=stack.shift();if(n.id===parentId)return n.type;var _n_children;Array.isArray(n.children)&&stack.unshift(...null!==(_n_children=n.children)&&void 0!==_n_children?_n_children:[])}return"ROOT"})();if(parentId?(0,rules.WL)(parentType,type):(0,rules.Ai)(type)){dispatch({type:"add",component,parentId,index});try{null==onSelectIds||onSelectIds([component.id])}catch(e){}onOpenChange(!1)}else try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:String(T("pb.toast.cannotPlaceHere",{type}))}))}catch(e){}})(i.type),children:[(0,jsx_runtime.jsx)("span",{className:"me-2 rounded border bg-muted px-1 text-xs capitalize",children:i.category}),i.label]},`${i.category}-${i.type}`))})}),(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted-foreground",children:"Enter to insert • Esc to close"})]})]})})}CommandPalette.__docgenInfo={description:"",methods:[],displayName:"CommandPalette",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(v: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"v"}],return:{name:"void"}}},description:""},components:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},dispatch:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<Action>",elements:[{name:"union",raw:"| ChangeAction\n| UndoAction\n| RedoAction\n| SetGridColsAction\n| SetBreakpointsAction\n| UpdateEditorAction",elements:[{name:"union",raw:"| AddAction\n| MoveAction\n| RemoveAction\n| DuplicateAction\n| UpdateAction\n| ResizeAction\n| SetAction",elements:[{name:"signature",type:"object",raw:'{\n  type: "add";\n  component: PageComponent;\n  parentId?: string;\n  index?: number;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"add"',required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!1}}]}},{name:"signature",type:"object",raw:'{\n  type: "move";\n  from: { parentId?: string; index: number };\n  to: { parentId?: string; index: number };\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"move"',required:!0}},{key:"from",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}},{key:"to",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "remove"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"remove"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "duplicate"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"duplicate"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update";\n  id: string;\n  patch: Partial<PageComponent>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"Partial<PageComponent>",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "resize";\n  id: string;\n  width?: string;\n  height?: string;\n  left?: string;\n  top?: string;\n  right?: string;\n  bottom?: string;\n  leftDesktop?: string;\n  leftTablet?: string;\n  leftMobile?: string;\n  topDesktop?: string;\n  topTablet?: string;\n  topMobile?: string;\n  widthDesktop?: string;\n  widthTablet?: string;\n  widthMobile?: string;\n  heightDesktop?: string;\n  heightTablet?: string;\n  heightMobile?: string;\n  marginDesktop?: string;\n  marginTablet?: string;\n  marginMobile?: string;\n  paddingDesktop?: string;\n  paddingTablet?: string;\n  paddingMobile?: string;\n  [key: string]: string | undefined;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"resize"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!1}},{key:"height",value:{name:"string",required:!1}},{key:"left",value:{name:"string",required:!1}},{key:"top",value:{name:"string",required:!1}},{key:"right",value:{name:"string",required:!1}},{key:"bottom",value:{name:"string",required:!1}},{key:"leftDesktop",value:{name:"string",required:!1}},{key:"leftTablet",value:{name:"string",required:!1}},{key:"leftMobile",value:{name:"string",required:!1}},{key:"topDesktop",value:{name:"string",required:!1}},{key:"topTablet",value:{name:"string",required:!1}},{key:"topMobile",value:{name:"string",required:!1}},{key:"widthDesktop",value:{name:"string",required:!1}},{key:"widthTablet",value:{name:"string",required:!1}},{key:"widthMobile",value:{name:"string",required:!1}},{key:"heightDesktop",value:{name:"string",required:!1}},{key:"heightTablet",value:{name:"string",required:!1}},{key:"heightMobile",value:{name:"string",required:!1}},{key:"marginDesktop",value:{name:"string",required:!1}},{key:"marginTablet",value:{name:"string",required:!1}},{key:"marginMobile",value:{name:"string",required:!1}},{key:"paddingDesktop",value:{name:"string",required:!1}},{key:"paddingTablet",value:{name:"string",required:!1}},{key:"paddingMobile",value:{name:"string",required:!1}},{key:{name:"string"},value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set"; components: PageComponent[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set"',required:!0}},{key:"components",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"PageComponent[]",required:!0}}]}}]},{name:"signature",type:"object",raw:'{ type: "undo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"undo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "redo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"redo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-grid-cols"; gridCols: number }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-grid-cols"',required:!0}},{key:"gridCols",value:{name:"number",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-breakpoints"; breakpoints: { id: string; label: string; min?: number; max?: number }[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-breakpoints"',required:!0}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update-editor";\n  id: string;\n  patch: Partial<EditorFlags>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update-editor"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  hiddenDeviceIds?: string[];\n  /** Legacy single strategy (mobile); kept for backwards-compat */\n  stackStrategy?: "default" | "reverse" | "custom";\n  /** Per-device stacking strategies */\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  /** Custom orders per device (used when corresponding strategy === "custom") */\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n  global?: {\n    id: string;\n    overrides?: unknown;\n    pinned?: boolean;\n    editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n  };\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"hiddenDeviceIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Legacy single strategy (mobile); kept for backwards-compat"},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Per-device stacking strategies"},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1},description:'Custom orders per device (used when corresponding strategy === "custom")'},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}},{key:"global",value:{name:"signature",type:"object",raw:'{\n  id: string;\n  overrides?: unknown;\n  pinned?: boolean;\n  editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"overrides",value:{name:"unknown",required:!1}},{key:"pinned",value:{name:"boolean",required:!1}},{key:"editingSize",value:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]}],raw:'Record<"desktop" | "tablet" | "mobile", number | null>'}],raw:'Partial<Record<"desktop" | "tablet" | "mobile", number | null>>',required:!1}}]},required:!1}}]}}],raw:"Partial<EditorFlags>",required:!0}}]}}]}]},description:""},onSelectIds:{required:!1,tsType:{name:"signature",type:"function",raw:"(ids: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"ids"}],return:{name:"void"}}},description:""}}};var drawer=__webpack_require__("../../packages/ui/src/components/atoms/primitives/drawer.tsx"),libraryStore=__webpack_require__("../../packages/ui/src/components/cms/page-builder/libraryStore.ts");function GlobalsPanel({open,onOpenChange,shop=null,pageId=null}){const[query,setQuery]=(0,react.useState)(""),[globals,setGlobals]=(0,react.useState)([]),[pageGlobals,setPageGlobals]=(0,react.useState)([]),[renameId,setRenameId]=(0,react.useState)(null),[renameVal,setRenameVal]=(0,react.useState)(""),refresh=(0,react.useCallback)(()=>{setGlobals((0,libraryStore.hV)(shop)),setPageGlobals((0,libraryStore.nJ)(shop,pageId))},[shop,pageId]);(0,react.useEffect)(()=>{refresh();const onChange=()=>refresh();return window.addEventListener("pb-library-changed",onChange),()=>window.removeEventListener("pb-library-changed",onChange)},[refresh]);const used=(0,react.useMemo)(()=>new Set(pageGlobals.map(g=>g.globalId)),[pageGlobals]),filtered=(0,react.useMemo)(()=>{const q=query.trim().toLowerCase();return q?globals.filter(g=>g.label.toLowerCase().includes(q)||(g.tags||[]).some(t=>t.toLowerCase().includes(q))):globals},[globals,query]);return(0,jsx_runtime.jsx)(drawer._s,{open,onOpenChange,children:(0,jsx_runtime.jsxs)(drawer.zj,{side:"left",width:384,className:"flex h-full flex-col overflow-hidden border-e p-0",children:[(0,jsx_runtime.jsx)(shadcn.c7,{className:"px-4 py-3",children:(0,jsx_runtime.jsx)(shadcn.L3,{children:"Global Sections"})}),(0,jsx_runtime.jsxs)("div",{className:"flex flex-1 flex-col gap-3 p-3 text-sm",children:[(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsx)(shadcn.pd,{placeholder:"Search globals…",value:query,onChange:e=>setQuery(e.target.value)}),(0,jsx_runtime.jsxs)("div",{className:"text-xs text-muted-foreground",children:[filtered.length," ",1===filtered.length?"item":"items"]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex-1 overflow-auto",children:[0===filtered.length&&(0,jsx_runtime.jsx)("div",{className:"p-2 text-muted-foreground",children:"No global sections yet."}),(0,jsx_runtime.jsx)("ul",{className:"space-y-2",children:filtered.map(g=>(0,jsx_runtime.jsx)("li",{className:"rounded border p-2",children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,jsx_runtime.jsx)("div",{className:"min-w-0 flex-1",children:renameId===g.globalId?(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(shadcn.pd,{value:renameVal,onChange:e=>setRenameVal(e.target.value),className:"h-7"}),(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",className:"h-7",onClick:async()=>{await(0,libraryStore.VJ)(shop,g.globalId,{label:renameVal}),setRenameId(null),setRenameVal(""),refresh()},children:"Save"}),(0,jsx_runtime.jsx)(shadcn.$n,{variant:"ghost",className:"h-7",onClick:()=>{setRenameId(null),setRenameVal("")},children:"Cancel"})]}):(0,jsx_runtime.jsxs)("div",{className:"truncate",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{className:"truncate font-medium",children:g.label}),used.has(g.globalId)&&(0,jsx_runtime.jsx)("span",{className:"rounded bg-emerald-500/15 px-1 text-xs text-emerald-700",children:"On this page"})]}),g.tags&&g.tags.length>0&&(0,jsx_runtime.jsx)(Inline.c,{className:"mt-1 text-xs text-muted-foreground",gap:1,children:g.tags.map(t=>(0,jsx_runtime.jsx)("span",{className:"rounded border px-1",children:t},t))})]})}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[used.has(g.globalId)?(0,jsx_runtime.jsx)(atoms.m_,{text:"Remove from this page",children:(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",className:"h-7 px-2",onClick:async()=>{await(0,libraryStore.id)(shop,pageId,g.globalId),refresh()},children:"Remove"})}):(0,jsx_runtime.jsx)(atoms.m_,{text:"Add to this page",children:(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",className:"h-7 px-2",onClick:async()=>{await(0,libraryStore.Dr)(shop,pageId,g),refresh()},children:"Add"})}),(0,jsx_runtime.jsx)(atoms.m_,{text:"Rename",children:(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",className:"h-7 px-2",onClick:()=>{setRenameId(g.globalId),setRenameVal(g.label)},children:"Rename"})}),(0,jsx_runtime.jsx)(atoms.m_,{text:"Delete global",children:(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",className:"h-7 px-2",onClick:async()=>{await(0,libraryStore.QS)(shop,g.globalId),refresh()},children:"Delete"})})]})]})},g.globalId))})]}),(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted-foreground",children:"Tip: Make any section global from the Inspector, then use this panel to add it to other pages. You can pin one global per page using the Inspector."})]})]})})}GlobalsPanel.__docgenInfo={description:"",methods:[],displayName:"GlobalsPanel",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(v: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"v"}],return:{name:"void"}}},description:""},shop:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:"",defaultValue:{value:"null",computed:!1}},pageId:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:"",defaultValue:{value:"null",computed:!1}}}};var Sidebar=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Sidebar.tsx");function notify(detail){try{window.dispatchEvent(new CustomEvent("pb:notify",{detail}))}catch(e){}}async function fetchPages(shop){const res=await fetch(`/cms/api/pages/${shop}`);if(!res.ok)return[];return(await res.json()).map(p=>function normalizePageItem(p){var _rawSeo_image;const raw=p;var _raw_seo;const rawSeo=null!==(_raw_seo=raw.seo)&&void 0!==_raw_seo?_raw_seo:{};var _rawSeo_image_url;const image="string"==typeof rawSeo.image?rawSeo.image:null!==(_rawSeo_image_url=null===(_rawSeo_image=rawSeo.image)||void 0===_rawSeo_image?void 0:_rawSeo_image.url)&&void 0!==_rawSeo_image_url?_rawSeo_image_url:"",seo={...rawSeo,image};var _raw_id,_ref,_raw_slug,_ref1;return{id:String(null!==(_ref=null!==(_raw_id=raw.id)&&void 0!==_raw_id?_raw_id:raw.slug)&&void 0!==_ref?_ref:Math.random().toString(36).slice(2,9)),slug:String(null!==(_ref1=null!==(_raw_slug=raw.slug)&&void 0!==_raw_slug?_raw_slug:raw.path)&&void 0!==_ref1?_ref1:""),title:raw.title,seo,visibility:raw.visibility,updatedAt:raw.updatedAt}}(p))}async function patchPage(shop,id,body){const res=await fetch(`/cms/api/pages/${shop}/${id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(body)});if(!res.ok)return{ok:!1,status:res.status};try{const p=await res.json();return{ok:!0,status:res.status,item:p}}catch(e){return{ok:!0,status:res.status}}}function usePagesState(open,shop){const t=(0,src.c3)(),translate=(0,react.useCallback)((key,vars)=>String(t(key,vars)),[t]),[q,setQ]=(0,react.useState)(""),[pages,setPages]=(0,react.useState)([]),[selectedId,setSelectedId]=(0,react.useState)(null),[orderDirty,setOrderDirty]=(0,react.useState)(!1);(0,react.useEffect)(()=>{open&&(async()=>{try{const items=await fetchPages(shop);setPages(items),items.length&&setSelectedId(prev=>null!=prev?prev:items[0].id)}catch(e){setPages([])}})()},[open,shop]);const filtered=(0,react.useMemo)(()=>{const query=q.trim().toLowerCase();return query?pages.filter(p=>(p.title||"").toLowerCase().includes(query)||(p.slug||"").toLowerCase().includes(query)):pages},[pages,q]),selected=(0,react.useMemo)(()=>pages.find(p=>p.id===selectedId)||null,[pages,selectedId]);return{q,setQ,pages,filtered,selected,selectedId,setSelectedId,orderDirty,updateSelected:patch=>{selected&&setPages(prev=>prev.map(p=>p.id===selected.id?{...p,...patch}:p))},move:(id,dir)=>{setPages(prev=>{const i=prev.findIndex(p=>p.id===id);if(i<0)return prev;const j=i+dir;if(j<0||j>=prev.length)return prev;const next=prev.slice(),[item]=next.splice(i,1);return next.splice(j,0,item),setOrderDirty(!0),next})},addPage:async()=>{const n=pages.length+1,title=translate("cms.pageBuilder.pages.untitledN",{count:n});try{const created=await async function createPage(shop,title){const res=await fetch(`/cms/api/pages/${shop}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title,locale:"en"})});return res.ok?await res.json():null}(shop,title);if(created)return setPages(prev=>[...prev,created]),setSelectedId(created.id),void notify({type:"info",title:translate("cms.pageBuilder.pages.draftCreated")})}catch(e){}const item={id:Math.random().toString(36).slice(2,9),slug:`untitled-${n}`,title,seo:{title:{en:title}},visibility:"hidden"};setPages(prev=>[...prev,item]),setSelectedId(item.id)},saveOrder:async()=>{try{const ids=pages.map(p=>p.id),ok=await async function updateOrder(shop,ids){const res=await fetch(`/cms/api/pages/${shop}/order`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids})});return res.ok||204===res.status}(shop,ids);ok?(setOrderDirty(!1),notify({type:"success",title:translate("cms.pageBuilder.pages.orderSaved")})):notify({type:"error",title:translate("cms.pageBuilder.pages.reorderFailed")})}catch(e){notify({type:"error",title:translate("cms.pageBuilder.pages.reorderFailed")})}},toggleVisibility:async p=>{const next="hidden"===p.visibility?"public":"hidden";setPages(prev=>prev.map(it=>it.id===p.id?{...it,visibility:next}:it));try{var _p_seo;await patchPage(shop,p.id,{updatedAt:p.updatedAt||(new Date).toISOString(),visibility:next,seo:{title:(null===(_p_seo=p.seo)||void 0===_p_seo?void 0:_p_seo.title)||{en:p.title||p.slug}}})}catch(e){notify({type:"error",title:translate("cms.pageBuilder.pages.updateFailed")})}},saveDraft:async()=>{const sel=selected;if(sel)try{var _sel_seo,_sel_seo1,_sel_seo2,_sel_visibility;const body={updatedAt:sel.updatedAt||(new Date).toISOString(),slug:sel.slug,visibility:null!==(_sel_visibility=sel.visibility)&&void 0!==_sel_visibility?_sel_visibility:"public",seo:{title:(null===(_sel_seo=sel.seo)||void 0===_sel_seo?void 0:_sel_seo.title)||{en:sel.title||sel.slug},description:(null===(_sel_seo1=sel.seo)||void 0===_sel_seo1?void 0:_sel_seo1.description)||{},noindex:!!(null===(_sel_seo2=sel.seo)||void 0===_sel_seo2?void 0:_sel_seo2.noindex)}},res=await patchPage(shop,sel.id,body);res.ok&&res.item?(setPages(prev=>prev.map(it=>it.id===res.item.id?{...it,...res.item}:it)),setSelectedId(res.item.id),notify({type:"success",title:translate("cms.pageBuilder.pages.saved")})):409===res.status&&notify({type:"error",title:translate("cms.pageBuilder.pages.conflictTitle"),message:translate("cms.pageBuilder.pages.conflictMessage")})}catch(err){notify({type:"error",title:translate("cms.pageBuilder.pages.saveFailed"),message:String((null==err?void 0:err.message)||err)})}}}}function PagesListItem({page,isSelected,onSelect,onMove,onToggleVisibility}){var _p_seo_title,_p_seo;const p=page,t=(0,src.c3)();return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)("li",{className:"rounded border "+(isSelected?"ring-1 ring-primary":""),children:[(0,jsx_runtime.jsxs)("button",{type:"button",className:"block w-full truncate px-2 py-1 min-h-10 min-w-10 text-start",onClick:()=>onSelect(p.id),children:[(0,jsx_runtime.jsx)("div",{className:"truncate font-medium",children:p.title||(null===(_p_seo=p.seo)||void 0===_p_seo||null===(_p_seo_title=_p_seo.title)||void 0===_p_seo_title?void 0:_p_seo_title.en)||p.slug||p.id}),(0,jsx_runtime.jsxs)("div",{className:"truncate text-xs text-muted-foreground",children:["/",p.slug]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-2 border-t px-2 py-1 text-xs",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",className:"min-h-10 min-w-10 px-2",onClick:()=>onMove(p.id,-1),"aria-label":t("pb.pagesPanel.moveUpAria"),children:(0,jsx_runtime.jsx)("span",{"aria-hidden":!0,children:"↑"})}),(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",className:"min-h-10 min-w-10 px-2",onClick:()=>onMove(p.id,1),"aria-label":t("pb.pagesPanel.moveDownAria"),children:(0,jsx_runtime.jsx)("span",{"aria-hidden":!0,children:"↓"})}),(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",className:"min-h-10 px-2",onClick:()=>onToggleVisibility(p),children:"hidden"===p.visibility?t("cms.builder.layer.show"):t("cms.builder.layer.hide")})]}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",className:"min-h-10 px-2",onClick:()=>onSelect(p.id),children:t("cms.breadcrumb.settings")})})]})]},p.id)})}function PagesList({query,setQuery,filtered,selectedId,onSelect,onMove,onToggleVisibility,onAdd,orderDirty,onSaveOrder,onSaveDraft}){const t=(0,src.c3)();return(0,jsx_runtime.jsxs)("div",{className:"flex h-full flex-col gap-2 border-r p-3 text-sm",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(shadcn.pd,{placeholder:String(t("pb.pagesPanel.searchPlaceholder")),value:query,onChange:e=>setQuery(e.target.value),className:"flex-1"}),(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",className:"h-8 px-2",onClick:onAdd,children:t("actions.add")})]}),(0,jsx_runtime.jsxs)("div",{className:"text-xs text-muted-foreground",children:[filtered.length," ",1===filtered.length?t("pb.noun.page"):t("pb.noun.pages")]}),(0,jsx_runtime.jsxs)("div",{className:"flex-1 overflow-auto",children:[0===filtered.length&&(0,jsx_runtime.jsx)("div",{className:"p-2 text-muted-foreground",children:t("pb.pagesPanel.noneYet")}),(0,jsx_runtime.jsx)("ul",{className:"space-y-2",children:filtered.map(p=>(0,jsx_runtime.jsx)(PagesListItem,{page:p,isSelected:p.id===selectedId,onSelect,onMove,onToggleVisibility},p.id))})]}),(0,jsx_runtime.jsxs)(Cluster.d,{justify:"between",alignY:"center",gap:2,children:[(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted-foreground",children:t("pb.pagesPanel.reorderHint")}),(0,jsx_runtime.jsxs)(Cluster.d,{alignY:"center",gap:2,children:[(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",className:"h-8 px-2",onClick:onSaveOrder,disabled:!orderDirty,children:t(orderDirty?"pb.pagesPanel.saveOrder":"pb.pagesPanel.orderSaved")}),(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",className:"h-8 px-2",onClick:onSaveDraft,children:t("pb.pagesPanel.saveDraft")})]})]})]})}PagesListItem.__docgenInfo={description:"",methods:[],displayName:"PagesListItem",props:{page:{required:!0,tsType:{name:"signature",type:"object",raw:'{\n  id: string;\n  slug: string;\n  title?: string;\n  seo?: {\n    title?: Record<string, string>;\n    description?: Record<string, string>;\n    image?: string;\n    noindex?: boolean;\n  };\n  visibility?: "public" | "hidden";\n  updatedAt?: string;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"slug",value:{name:"string",required:!0}},{key:"title",value:{name:"string",required:!1}},{key:"seo",value:{name:"signature",type:"object",raw:"{\n  title?: Record<string, string>;\n  description?: Record<string, string>;\n  image?: string;\n  noindex?: boolean;\n}",signature:{properties:[{key:"title",value:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>",required:!1}},{key:"description",value:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>",required:!1}},{key:"image",value:{name:"string",required:!1}},{key:"noindex",value:{name:"boolean",required:!1}}]},required:!1}},{key:"visibility",value:{name:"union",raw:'"public" | "hidden"',elements:[{name:"literal",value:'"public"'},{name:"literal",value:'"hidden"'}],required:!1}},{key:"updatedAt",value:{name:"string",required:!1}}]}},description:""},isSelected:{required:!0,tsType:{name:"boolean"},description:""},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},onMove:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, dir: -1 | 1) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"union",raw:"-1 | 1",elements:[{name:"literal",value:"-1"},{name:"literal",value:"1"}]},name:"dir"}],return:{name:"void"}}},description:""},onToggleVisibility:{required:!0,tsType:{name:"signature",type:"function",raw:"(page: PageItem) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:'{\n  id: string;\n  slug: string;\n  title?: string;\n  seo?: {\n    title?: Record<string, string>;\n    description?: Record<string, string>;\n    image?: string;\n    noindex?: boolean;\n  };\n  visibility?: "public" | "hidden";\n  updatedAt?: string;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"slug",value:{name:"string",required:!0}},{key:"title",value:{name:"string",required:!1}},{key:"seo",value:{name:"signature",type:"object",raw:"{\n  title?: Record<string, string>;\n  description?: Record<string, string>;\n  image?: string;\n  noindex?: boolean;\n}",signature:{properties:[{key:"title",value:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>",required:!1}},{key:"description",value:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>",required:!1}},{key:"image",value:{name:"string",required:!1}},{key:"noindex",value:{name:"boolean",required:!1}}]},required:!1}},{key:"visibility",value:{name:"union",raw:'"public" | "hidden"',elements:[{name:"literal",value:'"public"'},{name:"literal",value:'"hidden"'}],required:!1}},{key:"updatedAt",value:{name:"string",required:!1}}]}},name:"page"}],return:{name:"void"}}},description:""}}},PagesList.__docgenInfo={description:"",methods:[],displayName:"PagesList",props:{query:{required:!0,tsType:{name:"string"},description:""},setQuery:{required:!0,tsType:{name:"signature",type:"function",raw:"(q: string) => void",signature:{arguments:[{type:{name:"string"},name:"q"}],return:{name:"void"}}},description:""},filtered:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:'{\n  id: string;\n  slug: string;\n  title?: string;\n  seo?: {\n    title?: Record<string, string>;\n    description?: Record<string, string>;\n    image?: string;\n    noindex?: boolean;\n  };\n  visibility?: "public" | "hidden";\n  updatedAt?: string;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"slug",value:{name:"string",required:!0}},{key:"title",value:{name:"string",required:!1}},{key:"seo",value:{name:"signature",type:"object",raw:"{\n  title?: Record<string, string>;\n  description?: Record<string, string>;\n  image?: string;\n  noindex?: boolean;\n}",signature:{properties:[{key:"title",value:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>",required:!1}},{key:"description",value:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>",required:!1}},{key:"image",value:{name:"string",required:!1}},{key:"noindex",value:{name:"boolean",required:!1}}]},required:!1}},{key:"visibility",value:{name:"union",raw:'"public" | "hidden"',elements:[{name:"literal",value:'"public"'},{name:"literal",value:'"hidden"'}],required:!1}},{key:"updatedAt",value:{name:"string",required:!1}}]}}],raw:"PageItem[]"},description:""},selectedId:{required:!0,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},onMove:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, dir: -1 | 1) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"union",raw:"-1 | 1",elements:[{name:"literal",value:"-1"},{name:"literal",value:"1"}]},name:"dir"}],return:{name:"void"}}},description:""},onToggleVisibility:{required:!0,tsType:{name:"signature",type:"function",raw:"(page: PageItem) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:'{\n  id: string;\n  slug: string;\n  title?: string;\n  seo?: {\n    title?: Record<string, string>;\n    description?: Record<string, string>;\n    image?: string;\n    noindex?: boolean;\n  };\n  visibility?: "public" | "hidden";\n  updatedAt?: string;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"slug",value:{name:"string",required:!0}},{key:"title",value:{name:"string",required:!1}},{key:"seo",value:{name:"signature",type:"object",raw:"{\n  title?: Record<string, string>;\n  description?: Record<string, string>;\n  image?: string;\n  noindex?: boolean;\n}",signature:{properties:[{key:"title",value:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>",required:!1}},{key:"description",value:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>",required:!1}},{key:"image",value:{name:"string",required:!1}},{key:"noindex",value:{name:"boolean",required:!1}}]},required:!1}},{key:"visibility",value:{name:"union",raw:'"public" | "hidden"',elements:[{name:"literal",value:'"public"'},{name:"literal",value:'"hidden"'}],required:!1}},{key:"updatedAt",value:{name:"string",required:!1}}]}},name:"page"}],return:{name:"void"}}},description:""},onAdd:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},orderDirty:{required:!0,tsType:{name:"boolean"},description:""},onSaveOrder:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onSaveDraft:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var useLocalStrings=__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/useLocalStrings.ts");function PageSettings({selected,updateSelected}){var _selected_seo_title,_selected_seo,_selected_seo_description,_selected_seo1,_selected_seo2,_selected_seo_title1,_selected_seo3,_selected_seo_description1,_selected_seo4,_selected_seo5,_selected_seo6;const t=(0,useLocalStrings.A)();return selected?(0,jsx_runtime.jsxs)("div",{className:"space-y-4 overflow-auto",children:[(0,jsx_runtime.jsxs)("section",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-semibold",children:t("Page Info")}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,jsx_runtime.jsxs)("label",{className:"text-xs",children:[(0,jsx_runtime.jsx)("div",{className:"mb-1",children:t("Title")}),(0,jsx_runtime.jsx)(shadcn.pd,{value:null!==(_selected_title=selected.title)&&void 0!==_selected_title?_selected_title:"",onChange:e=>updateSelected({title:e.target.value}),placeholder:t("Page title")})]}),(0,jsx_runtime.jsxs)("label",{className:"text-xs",children:[(0,jsx_runtime.jsx)("div",{className:"mb-1",children:t("Slug")}),(0,jsx_runtime.jsx)(shadcn.pd,{value:selected.slug,onChange:e=>updateSelected({slug:e.target.value.replace(/^\//,"")}),placeholder:t("about-us")})]})]})]}),(0,jsx_runtime.jsxs)("section",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-semibold",children:t("Permissions")}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[(0,jsx_runtime.jsxs)(Sidebar.B,{sideWidth:"w-48",gap:2,className:"items-center",children:[(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted-foreground",children:t("Visibility")}),(0,jsx_runtime.jsxs)(shadcn.l6,{value:null!==(_selected_visibility=selected.visibility)&&void 0!==_selected_visibility?_selected_visibility:"public",onValueChange:v=>updateSelected({visibility:v}),children:[(0,jsx_runtime.jsx)(shadcn.bq,{className:"h-8",children:(0,jsx_runtime.jsx)(shadcn.yv,{placeholder:t("Visibility")})}),(0,jsx_runtime.jsxs)(shadcn.gC,{children:[(0,jsx_runtime.jsx)(shadcn.eb,{value:"public",children:t("Public")}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"hidden",children:t("Hidden")})]})]})]}),(0,jsx_runtime.jsxs)(Sidebar.B,{sideWidth:"w-48",gap:2,className:"items-center",children:[(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted-foreground",children:t("Allowed roles")}),(0,jsx_runtime.jsx)(shadcn.pd,{placeholder:t("e.g. admin, editor (stub)")})]})]})]}),(0,jsx_runtime.jsxs)("section",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-semibold",children:t("SEO Basics")}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,jsx_runtime.jsxs)("label",{className:"text-xs",children:[(0,jsx_runtime.jsx)("div",{className:"mb-1",children:t("SEO Title")}),(0,jsx_runtime.jsx)(shadcn.pd,{value:null!==(_selected_seo_title_en=null===(_selected_seo=selected.seo)||void 0===_selected_seo||null===(_selected_seo_title=_selected_seo.title)||void 0===_selected_seo_title?void 0:_selected_seo_title.en)&&void 0!==_selected_seo_title_en?_selected_seo_title_en:"",onChange:e=>{var _selected_seo;return updateSelected({seo:{...selected.seo||{},title:{...(null===(_selected_seo=selected.seo)||void 0===_selected_seo?void 0:_selected_seo.title)||{},en:e.target.value}}})},placeholder:t("Title for search engines")})]}),(0,jsx_runtime.jsxs)("label",{className:"text-xs",children:[(0,jsx_runtime.jsx)("div",{className:"mb-1",children:t("Description")}),(0,jsx_runtime.jsx)(shadcn.TM,{value:null!==(_selected_seo_description_en=null===(_selected_seo1=selected.seo)||void 0===_selected_seo1||null===(_selected_seo_description=_selected_seo1.description)||void 0===_selected_seo_description?void 0:_selected_seo_description.en)&&void 0!==_selected_seo_description_en?_selected_seo_description_en:"",onChange:e=>{var _selected_seo;return updateSelected({seo:{...selected.seo||{},description:{...(null===(_selected_seo=selected.seo)||void 0===_selected_seo?void 0:_selected_seo.description)||{},en:e.target.value}}})},placeholder:t("Brief summary shown in results")})]}),(0,jsx_runtime.jsxs)("label",{className:"flex items-center gap-2 text-xs",children:[(0,jsx_runtime.jsx)(shadcn.Sc,{checked:!!(null===(_selected_seo2=selected.seo)||void 0===_selected_seo2?void 0:_selected_seo2.noindex),onCheckedChange:v=>updateSelected({seo:{...selected.seo||{},noindex:!!v}})}),(0,jsx_runtime.jsx)("span",{children:t("Noindex (discourage search engines)")})]})]})]}),(0,jsx_runtime.jsxs)("section",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-semibold",children:t("Social Share")}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,jsx_runtime.jsxs)("label",{className:"text-xs",children:[(0,jsx_runtime.jsx)("div",{className:"mb-1",children:t("OG Title")}),(0,jsx_runtime.jsx)(shadcn.pd,{value:null!==(_selected_seo_title_en1=null===(_selected_seo3=selected.seo)||void 0===_selected_seo3||null===(_selected_seo_title1=_selected_seo3.title)||void 0===_selected_seo_title1?void 0:_selected_seo_title1.en)&&void 0!==_selected_seo_title_en1?_selected_seo_title_en1:"",onChange:e=>{var _selected_seo;return updateSelected({seo:{...selected.seo||{},title:{...(null===(_selected_seo=selected.seo)||void 0===_selected_seo?void 0:_selected_seo.title)||{},en:e.target.value}}})},placeholder:t("Title for social cards")})]}),(0,jsx_runtime.jsxs)("label",{className:"text-xs",children:[(0,jsx_runtime.jsx)("div",{className:"mb-1",children:t("OG Description")}),(0,jsx_runtime.jsx)(shadcn.TM,{value:null!==(_selected_seo_description_en1=null===(_selected_seo4=selected.seo)||void 0===_selected_seo4||null===(_selected_seo_description1=_selected_seo4.description)||void 0===_selected_seo_description1?void 0:_selected_seo_description1.en)&&void 0!==_selected_seo_description_en1?_selected_seo_description_en1:"",onChange:e=>{var _selected_seo;return updateSelected({seo:{...selected.seo||{},description:{...(null===(_selected_seo=selected.seo)||void 0===_selected_seo?void 0:_selected_seo.description)||{},en:e.target.value}}})},placeholder:t("Description for social cards")})]}),(0,jsx_runtime.jsxs)("label",{className:"text-xs",children:[(0,jsx_runtime.jsx)("div",{className:"mb-1",children:t("OG Image URL")}),(0,jsx_runtime.jsx)(shadcn.pd,{value:null!==(_selected_seo_image=null===(_selected_seo5=selected.seo)||void 0===_selected_seo5?void 0:_selected_seo5.image)&&void 0!==_selected_seo_image?_selected_seo_image:"",onChange:e=>updateSelected({seo:{...selected.seo||{},image:e.target.value}}),placeholder:t("https://…/image.jpg")})]}),(null===(_selected_seo6=selected.seo)||void 0===_selected_seo6?void 0:_selected_seo6.image)&&(0,jsx_runtime.jsxs)("div",{className:"rounded border p-2",children:[(0,jsx_runtime.jsx)("div",{className:"mb-1 text-xs text-muted-foreground",children:t("Preview")}),(0,jsx_runtime.jsx)("div",{className:"relative h-32 w-full overflow-hidden rounded",children:(0,jsx_runtime.jsx)(next_image.A,{src:selected.seo.image,alt:t("OG preview"),fill:!0,className:"object-cover",sizes:"100vw"})})]})]})]})]}):(0,jsx_runtime.jsx)("div",{className:"p-3 text-sm text-muted-foreground",children:t("Select a page to edit settings.")});var _selected_title,_selected_visibility,_selected_seo_title_en,_selected_seo_description_en,_selected_seo_title_en1,_selected_seo_description_en1,_selected_seo_image}PageSettings.__docgenInfo={description:"",methods:[],displayName:"PageSettings",props:{selected:{required:!0,tsType:{name:"union",raw:"PageItem | null",elements:[{name:"signature",type:"object",raw:'{\n  id: string;\n  slug: string;\n  title?: string;\n  seo?: {\n    title?: Record<string, string>;\n    description?: Record<string, string>;\n    image?: string;\n    noindex?: boolean;\n  };\n  visibility?: "public" | "hidden";\n  updatedAt?: string;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"slug",value:{name:"string",required:!0}},{key:"title",value:{name:"string",required:!1}},{key:"seo",value:{name:"signature",type:"object",raw:"{\n  title?: Record<string, string>;\n  description?: Record<string, string>;\n  image?: string;\n  noindex?: boolean;\n}",signature:{properties:[{key:"title",value:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>",required:!1}},{key:"description",value:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>",required:!1}},{key:"image",value:{name:"string",required:!1}},{key:"noindex",value:{name:"boolean",required:!1}}]},required:!1}},{key:"visibility",value:{name:"union",raw:'"public" | "hidden"',elements:[{name:"literal",value:'"public"'},{name:"literal",value:'"hidden"'}],required:!1}},{key:"updatedAt",value:{name:"string",required:!1}}]}},{name:"null"}]},description:""},updateSelected:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<PageItem>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  id: string;\n  slug: string;\n  title?: string;\n  seo?: {\n    title?: Record<string, string>;\n    description?: Record<string, string>;\n    image?: string;\n    noindex?: boolean;\n  };\n  visibility?: "public" | "hidden";\n  updatedAt?: string;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"slug",value:{name:"string",required:!0}},{key:"title",value:{name:"string",required:!1}},{key:"seo",value:{name:"signature",type:"object",raw:"{\n  title?: Record<string, string>;\n  description?: Record<string, string>;\n  image?: string;\n  noindex?: boolean;\n}",signature:{properties:[{key:"title",value:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>",required:!1}},{key:"description",value:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>",required:!1}},{key:"image",value:{name:"string",required:!1}},{key:"noindex",value:{name:"boolean",required:!1}}]},required:!1}},{key:"visibility",value:{name:"union",raw:'"public" | "hidden"',elements:[{name:"literal",value:'"public"'},{name:"literal",value:'"hidden"'}],required:!1}},{key:"updatedAt",value:{name:"string",required:!1}}]}}],raw:"Partial<PageItem>"},name:"patch"}],return:{name:"void"}}},description:""}}};function PagesPanel({open,onOpenChange,shop:shopProp=null}){const state=usePagesState(open,(0,react.useMemo)(()=>{var _ref;return null!==(_ref=null!=shopProp?shopProp:function deriveShopFromPath(){try{const parts=window.location.pathname.split("/").filter(Boolean),i=parts.findIndex(p=>"shop"===p);if(i>=0&&parts[i+1])return parts[i+1]}catch(e){}}())&&void 0!==_ref?_ref:""},[shopProp]));return(0,jsx_runtime.jsx)(drawer._s,{open,onOpenChange,children:(0,jsx_runtime.jsxs)(drawer.uT,{children:[(0,jsx_runtime.jsx)(atoms.hz,{}),(0,jsx_runtime.jsxs)(drawer.zj,{side:"left",width:"w-[42rem]",className:"flex h-full flex-col p-0",children:[(0,jsx_runtime.jsxs)("div",{className:"flex-none px-4 py-3",children:[(0,jsx_runtime.jsx)(drawer.gk,{children:"Pages"}),(0,jsx_runtime.jsx)(drawer.I6,{className:"sr-only",children:"Manage the site pages list and configure the selected page."})]}),(0,jsx_runtime.jsxs)(Sidebar.B,{sideWidth:"w-72",gap:0,className:"flex-1 min-h-0",children:[(0,jsx_runtime.jsx)(PagesList,{query:state.q,setQuery:state.setQ,filtered:state.filtered,selectedId:state.selectedId,onSelect:state.setSelectedId,onMove:state.move,onToggleVisibility:state.toggleVisibility,onAdd:state.addPage,orderDirty:state.orderDirty,onSaveOrder:state.saveOrder,onSaveDraft:state.saveDraft}),(0,jsx_runtime.jsx)(Stack.B,{className:"h-full p-3",gap:3,children:(0,jsx_runtime.jsx)(PageSettings,{selected:state.selected,updateSelected:state.updateSelected})})]})]})]})})}PagesPanel.__docgenInfo={description:"",methods:[],displayName:"PagesPanel",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(v: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"v"}],return:{name:"void"}}},description:""},shop:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:"",defaultValue:{value:"null",computed:!1}}}};function CMSPanel({open,onOpenChange,components,selectedIds:_selectedIds,onSelectIds}){const[q,setQ]=(0,react.useState)(""),all=(0,react.useMemo)(()=>function flatten(list){const out=[],walk=nodes=>{for(const n of nodes){out.push(n);const maybeKids=n.children;Array.isArray(maybeKids)&&walk(maybeKids)}};return walk(list),out}(components),[components]),datasets=(0,react.useMemo)(()=>all.filter(c=>"Dataset"===c.type),[all]),filtered=(0,react.useMemo)(()=>{const query=q.trim().toLowerCase();return query?datasets.filter(d=>{const nameProp=d.name,name=("string"==typeof nameProp?nameProp:d.id||d.type).toString().toLowerCase(),rawDs=d.dataset,src=(rawDs&&"string"==typeof rawDs.source?rawDs.source:"").toString().toLowerCase();return name.includes(query)||src.includes(query)}):datasets},[datasets,q]);return(0,jsx_runtime.jsx)(drawer._s,{open,onOpenChange,children:(0,jsx_runtime.jsxs)(drawer.uT,{children:[(0,jsx_runtime.jsx)(atoms.hz,{}),(0,jsx_runtime.jsxs)(drawer.zj,{side:"right",width:"w-96",className:"flex h-full flex-col p-0",children:[(0,jsx_runtime.jsxs)("div",{className:"px-4 py-3",children:[(0,jsx_runtime.jsx)(drawer.gk,{children:"CMS Connections"}),(0,jsx_runtime.jsx)(drawer.I6,{className:"sr-only",children:"Browse datasets on the current page and connect them to components."})]}),(0,jsx_runtime.jsxs)("div",{className:"flex flex-1 flex-col gap-3 p-3 text-sm",children:[(0,jsx_runtime.jsx)(shadcn.pd,{placeholder:"Search datasets…",value:q,onChange:e=>setQ(e.target.value)}),(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted-foreground",children:`${filtered.length} dataset${1===filtered.length?"":"s"}`}),(0,jsx_runtime.jsxs)("div",{className:"flex-1 overflow-auto",children:[0===filtered.length&&(0,jsx_runtime.jsx)("div",{className:"p-2 text-muted-foreground",children:"No datasets on this page. Insert a Dataset block to connect elements."}),(0,jsx_runtime.jsx)("ul",{className:"space-y-2",children:filtered.map(d=>{const raw=d.dataset,cfg={source:raw&&"string"==typeof raw.source?raw.source:void 0,mode:raw&&"string"==typeof raw.mode?raw.mode:void 0,maxItems:raw&&"number"==typeof raw.maxItems?raw.maxItems:void 0};var _cfg_maxItems;return(0,jsx_runtime.jsx)("li",{className:"rounded border p-2",children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,jsx_runtime.jsxs)("div",{className:"min-w-0",children:[(0,jsx_runtime.jsx)("div",{className:"truncate font-medium",children:"string"==typeof d.name?d.name:d.type}),(0,jsx_runtime.jsxs)("div",{className:"truncate text-xs text-muted-foreground",children:["Source:"," ",cfg.source||"—"," · ","Mode:"," ",cfg.mode||"read"," · ","Max items:"," ",null!==(_cfg_maxItems=cfg.maxItems)&&void 0!==_cfg_maxItems?_cfg_maxItems:"—"]})]}),(0,jsx_runtime.jsx)("div",{className:"flex items-center gap-1",children:(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",className:"h-7 px-2",onClick:()=>onSelectIds([d.id]),children:"Select"})})]})},d.id)})})]}),(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted-foreground",children:"Tip: Select a Dataset block, then use the Inspector → CMS tab to configure connections and filters."})]})]})]})})}CMSPanel.__docgenInfo={description:"",methods:[],displayName:"CMSPanel",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(v: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"v"}],return:{name:"void"}}},description:""},components:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onSelectIds:{required:!0,tsType:{name:"signature",type:"function",raw:"(ids: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"ids"}],return:{name:"void"}}},description:""}}};const PageBuilderDialogs=({cmdOpen,setCmdOpen,canvasProps,globalsOpen,setGlobalsOpen,fontsOpen:_fontsOpen,setFontsOpen:_setFontsOpen,pagesOpen,setPagesOpen,cmsOpen,setCmsOpen,shop,pageId})=>{const components=canvasProps.components;var _canvasProps_selectedIds;const selectedIds=null!==(_canvasProps_selectedIds=canvasProps.selectedIds)&&void 0!==_canvasProps_selectedIds?_canvasProps_selectedIds:[];var _canvasProps_onSelectIds;const onSelectIds=null!==(_canvasProps_onSelectIds=canvasProps.onSelectIds)&&void 0!==_canvasProps_onSelectIds?_canvasProps_onSelectIds:()=>{};var _canvasProps_dispatch;const dispatch=null!==(_canvasProps_dispatch=canvasProps.dispatch)&&void 0!==_canvasProps_dispatch?_canvasProps_dispatch:()=>{};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(CommandPalette,{open:cmdOpen,onOpenChange:setCmdOpen,components,selectedIds,dispatch,onSelectIds}),(0,jsx_runtime.jsx)(GlobalsPanel,{open:globalsOpen,onOpenChange:setGlobalsOpen,shop:null!=shop?shop:null,pageId:null!=pageId?pageId:null}),(0,jsx_runtime.jsx)(PagesPanel,{open:pagesOpen,onOpenChange:setPagesOpen,shop:null!=shop?shop:null}),(0,jsx_runtime.jsx)(CMSPanel,{open:cmsOpen,onOpenChange:setCmsOpen,components,selectedIds,onSelectIds})]})},page_builder_PageBuilderDialogs=PageBuilderDialogs;PageBuilderDialogs.__docgenInfo={description:"",methods:[],displayName:"PageBuilderDialogs",props:{cmdOpen:{required:!0,tsType:{name:"boolean"},description:""},setCmdOpen:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"boolean"}],raw:"SetStateAction<boolean>"}],raw:"Dispatch<SetStateAction<boolean>>"},description:""},canvasProps:{required:!0,tsType:{name:'PageBuilderLayoutProps["canvasProps"]',raw:'PageBuilderLayoutProps["canvasProps"]'},description:""},globalsOpen:{required:!0,tsType:{name:"boolean"},description:""},setGlobalsOpen:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"boolean"}],raw:"SetStateAction<boolean>"}],raw:"Dispatch<SetStateAction<boolean>>"},description:""},fontsOpen:{required:!0,tsType:{name:"boolean"},description:""},setFontsOpen:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"boolean"}],raw:"SetStateAction<boolean>"}],raw:"Dispatch<SetStateAction<boolean>>"},description:""},pagesOpen:{required:!0,tsType:{name:"boolean"},description:""},setPagesOpen:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"boolean"}],raw:"SetStateAction<boolean>"}],raw:"Dispatch<SetStateAction<boolean>>"},description:""},cmsOpen:{required:!0,tsType:{name:"boolean"},description:""},setCmsOpen:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"boolean"}],raw:"SetStateAction<boolean>"}],raw:"Dispatch<SetStateAction<boolean>>"},description:""},shop:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},pageId:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""}}};const SECTIONS_ONLY="true"===__webpack_require__("../../node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js").env.NEXT_PUBLIC_PB_SECTIONS_ONLY;function usePageBuilderLayoutState({toolbarProps,scrollRef,toggleComments,showComments,mode="page"}){const reducedMotion=useReducedMotion(),{showDevTools}=function useDevToolsToggle(){const[showDevTools,setShowDevTools]=react.useState(()=>{try{return"1"===localStorage.getItem("pb:devtools")}catch(e){return!1}});return react.useEffect(()=>{const onKeyDown=e=>{const target=e.target,tag=null==target?void 0:target.tagName;target&&(target.isContentEditable||"INPUT"===tag||"TEXTAREA"===tag||"SELECT"===tag)||(e.ctrlKey||e.metaKey)&&e.altKey&&"d"===e.key.toLowerCase()&&(e.preventDefault(),setShowDevTools(v=>{try{localStorage.setItem("pb:devtools",v?"0":"1")}catch(e){}return!v}))};return window.addEventListener("keydown",onKeyDown),()=>window.removeEventListener("keydown",onKeyDown)},[]),{showDevTools,setShowDevTools}}(),{showPalette,setShowPalette,paletteWidth,setPaletteWidth}=function usePaletteState(){const[showPalette,setShowPalette]=react.useState(()=>{try{const v=localStorage.getItem("pb:show-palette");return null===v||"1"===v}catch(e){return!0}}),[paletteWidth,setPaletteWidth]=react.useState(()=>{try{return 350}catch(e){return 350}});return react.useEffect(()=>{try{localStorage.setItem("pb:show-palette",showPalette?"1":"0")}catch(e){}},[showPalette]),react.useEffect(()=>{try{localStorage.setItem("pb:palette-width",String(350))}catch(e){}},[paletteWidth]),react.useEffect(()=>{const onKey=e=>{const t=e.target,tag=null==t?void 0:t.tagName;t&&(t.isContentEditable||"INPUT"===tag||"TEXTAREA"===tag||"SELECT"===tag)||(e.ctrlKey||e.metaKey)&&"b"===e.key.toLowerCase()&&(e.preventDefault(),setShowPalette(v=>!v))};return window.addEventListener("keydown",onKey),()=>window.removeEventListener("keydown",onKey)},[]),{showPalette,setShowPalette,paletteWidth,setPaletteWidth}}(),{open:cmdOpen,setOpen:setCmdOpen}=function useCommandPalette(){const[open,setOpen]=react.useState(!1);return react.useEffect(()=>{const onKey=e=>{const t=e.target,tag=null==t?void 0:t.tagName;if(t&&(t.isContentEditable||"INPUT"===tag||"TEXTAREA"===tag||"SELECT"===tag))return;const k=e.key.toLowerCase();"/"!==k||e.ctrlKey||e.metaKey||e.altKey?"k"===k&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),setOpen(!0)):(e.preventDefault(),setOpen(!0))};return window.addEventListener("keydown",onKey),()=>window.removeEventListener("keydown",onKey)},[]),{open,setOpen}}();var _toolbarProps_locale;const toolbarLocale=null!==(_toolbarProps_locale=null==toolbarProps?void 0:toolbarProps.locale)&&void 0!==_toolbarProps_locale?_toolbarProps_locale:"en",a11y=function useDndA11y(locale){return react.useMemo(()=>{const L=null!=locale?locale:"en",messages={en:{picked:"Picked up",moved:"Moved",over:"over",dropped:"Dropped",into:"into",canceled:"Canceled drag",instructions:"To pick up an item, press space or enter. Use arrow keys to move. Press space or enter to drop, or escape to cancel."}},t=k=>(messages[L]||messages.en)[k]||k;return{screenReaderInstructions:{draggable:t("instructions")},announcements:{onDragStart({active}){var _active_data;const dc=null==active||null===(_active_data=active.data)||void 0===_active_data?void 0:_active_data.current;var _active_id;const label="string"==typeof(null==dc?void 0:dc.label)?dc.label:String(null!==(_active_id=null==active?void 0:active.id)&&void 0!==_active_id?_active_id:"item");return`${t("picked")} ${label}`},onDragMove({active,over}){var _active_data,_over_data;if(!over)return;const a=null==active||null===(_active_data=active.data)||void 0===_active_data?void 0:_active_data.current;var _active_id;const label="string"==typeof(null==a?void 0:a.label)?a.label:String(null!==(_active_id=null==active?void 0:active.id)&&void 0!==_active_id?_active_id:"item"),oc=null==over||null===(_over_data=over.data)||void 0===_over_data?void 0:_over_data.current;var _over_id;const overLabel="string"==typeof(null==oc?void 0:oc.label)?oc.label:String(null!==(_over_id=null==over?void 0:over.id)&&void 0!==_over_id?_over_id:"target");return`${t("moved")} ${label} ${t("over")} ${overLabel}`},onDragOver({active,over}){var _active_data,_over_data;if(!over)return;const a=null==active||null===(_active_data=active.data)||void 0===_active_data?void 0:_active_data.current;var _active_id;const label="string"==typeof(null==a?void 0:a.label)?a.label:String(null!==(_active_id=null==active?void 0:active.id)&&void 0!==_active_id?_active_id:"item"),oc=null==over||null===(_over_data=over.data)||void 0===_over_data?void 0:_over_data.current;var _over_id;const overLabel="string"==typeof(null==oc?void 0:oc.label)?oc.label:String(null!==(_over_id=null==over?void 0:over.id)&&void 0!==_over_id?_over_id:"target");return`${t("moved")} ${label} ${t("over")} ${overLabel}`},onDragEnd({active,over}){var _active_data,_over_data;const a=null==active||null===(_active_data=active.data)||void 0===_active_data?void 0:_active_data.current;var _active_id;const label="string"==typeof(null==a?void 0:a.label)?a.label:String(null!==(_active_id=null==active?void 0:active.id)&&void 0!==_active_id?_active_id:"item");if(!over)return`${t("canceled")}`;const oc=null==over||null===(_over_data=over.data)||void 0===_over_data?void 0:_over_data.current;var _over_id;const overLabel="string"==typeof(null==oc?void 0:oc.label)?oc.label:String(null!==(_over_id=null==over?void 0:over.id)&&void 0!==_over_id?_over_id:"target");return`${t("dropped")} ${label} ${t("into")} ${overLabel}`},onDragCancel:()=>`${t("canceled")}`}}},[locale])}(toolbarLocale),{onPointerDown}=function useSpacePanning(scrollRef){const[spacePanning,setSpacePanning]=react.useState(!1);return react.useEffect(()=>{const onKeyDown=e=>{"Space"===e.code&&setSpacePanning(!0)},onKeyUp=e=>{"Space"===e.code&&setSpacePanning(!1)};return window.addEventListener("keydown",onKeyDown),window.addEventListener("keyup",onKeyUp),()=>{window.removeEventListener("keydown",onKeyDown),window.removeEventListener("keyup",onKeyUp)}},[]),{onPointerDown:react.useCallback(e=>{const sc=null==scrollRef?void 0:scrollRef.current;if(!sc)return;if(1!==e.button&&!e.altKey&&!spacePanning)return;e.preventDefault();const startX=e.clientX,startY=e.clientY,startScrollLeft=sc.scrollLeft,startScrollTop=sc.scrollTop,handleMove=ev=>{sc.scrollTo({left:startScrollLeft-(ev.clientX-startX),top:startScrollTop-(ev.clientY-startY)})},stop=()=>{window.removeEventListener("pointermove",handleMove),window.removeEventListener("pointerup",stop)};window.addEventListener("pointermove",handleMove),window.addEventListener("pointerup",stop)},[scrollRef,spacePanning])}}(scrollRef),[showInspector,setShowInspector]=react.useState(!0),[showLayersLeft,setShowLayersLeft]=react.useState(!1),[layersWidth,setLayersWidth]=react.useState(280),[showSections,setShowSections]=react.useState(!1),[showFontsLeft,setShowFontsLeft]=react.useState(!1),[showThemeLeft,setShowThemeLeft]=react.useState(!1),[globalsOpen,setGlobalsOpen]=react.useState(!1),[cmsOpen,setCmsOpen]=react.useState(!1),[fontsOpen,setFontsOpen]=react.useState(!1),[pagesOpen,setPagesOpen]=react.useState(!1),[helpOpen,setHelpOpen]=react.useState(!1);react.useEffect(()=>{const onToggleComments=()=>{if(!showComments)try{toggleComments(),setTimeout(()=>{try{window.dispatchEvent(new Event("pb:toggle-comments"))}catch(e){}},0)}catch(e){}};return window.addEventListener("pb:toggle-comments",onToggleComments),()=>window.removeEventListener("pb:toggle-comments",onToggleComments)},[showComments,toggleComments]);const cycleRef=react.useRef(0);react.useEffect(()=>{const onKeyDown=e=>{const t=e.target;if(t&&("INPUT"===t.tagName||"TEXTAREA"===t.tagName||"SELECT"===t.tagName||t.isContentEditable))return;if(!e.ctrlKey&&!e.metaKey)return;const k=e.key.toLowerCase();if("i"===k)return e.preventDefault(),setShowInspector(v=>!v),void(cycleRef.current=0);if("l"===k)return e.preventDefault(),setShowLayersLeft(v=>{const next=!v;return next&&(setShowPalette(!1),setShowSections(!1)),next}),void(cycleRef.current=0);if("."===k||"›"===k){e.preventDefault(),cycleRef.current=(cycleRef.current+1)%4;switch(cycleRef.current){case 1:setShowPalette(!1),setShowLayersLeft(!1),setShowSections(!1);break;case 2:setShowInspector(!1);break;case 3:setShowInspector(!0),setTimeout(()=>{try{var _document_getElementById;null===(_document_getElementById=document.getElementById("pb-layers-panel"))||void 0===_document_getElementById||_document_getElementById.scrollIntoView()}catch(e){}},0);break;default:setShowPalette(!0)}return}};return window.addEventListener("keydown",onKeyDown),()=>window.removeEventListener("keydown",onKeyDown)},[setShowPalette,setShowSections,setShowLayersLeft,setShowInspector,showPalette,showInspector]),react.useEffect(()=>{SECTIONS_ONLY&&(setShowSections(!0),setShowPalette(!1))},[]),react.useEffect(()=>{"section"===mode&&(setShowSections(!1),setShowPalette(!0))},[]);const openPalette=react.useCallback(()=>{setShowLayersLeft(!1),setShowSections(!1),setShowFontsLeft(!1),setShowThemeLeft(!1),setShowPalette(!0)},[setShowLayersLeft,setShowPalette,setShowSections]),openSections=react.useCallback(()=>{setShowLayersLeft(!1),setShowPalette(!1),setShowFontsLeft(!1),setShowThemeLeft(!1),setShowSections(!0)},[setShowLayersLeft,setShowPalette,setShowSections]),openLayers=react.useCallback(()=>{setShowLayersLeft(!0),setShowPalette(!1),setShowSections(!1),setShowFontsLeft(!1),setShowThemeLeft(!1)},[setShowLayersLeft,setShowPalette,setShowSections]);return{reducedMotion,showDevTools,showPalette,showSections,showFontsLeft,showThemeLeft,showLayersLeft,showInspector,paletteWidth,setPaletteWidth,layersWidth,setLayersWidth,openPalette,openSections,openFonts:react.useCallback(()=>{setShowLayersLeft(!1),setShowPalette(!1),setShowSections(!1),setShowFontsLeft(!0),setShowThemeLeft(!1)},[setShowLayersLeft,setShowPalette,setShowSections,setShowFontsLeft,setShowThemeLeft]),openTheme:react.useCallback(()=>{setShowLayersLeft(!1),setShowPalette(!1),setShowSections(!1),setShowFontsLeft(!1),setShowThemeLeft(!0)},[setShowLayersLeft,setShowPalette,setShowSections,setShowFontsLeft,setShowThemeLeft]),openLayers,togglePaletteWithReset:react.useCallback(()=>{setShowPalette(value=>{const next=!value;return next&&(setShowLayersLeft(!1),setShowSections(!1),setShowFontsLeft(!1)),next})},[setShowLayersLeft,setShowPalette,setShowSections]),toggleInspector:react.useCallback(()=>{setShowInspector(value=>!value)},[]),setShowPalette,globalsOpen,setGlobalsOpen,fontsOpen,setFontsOpen,cmsOpen,setCmsOpen,pagesOpen,setPagesOpen,cmdOpen,setCmdOpen,helpOpen,setHelpOpen,a11y,onPointerDown,toolbarLocale}}const PageBuilderLayout=props=>{const{reducedMotion,showDevTools,showPalette,showSections,showLayersLeft,showFontsLeft,showThemeLeft,showInspector,paletteWidth,setPaletteWidth,layersWidth,setLayersWidth,openPalette,openSections,openLayers,openFonts,openTheme,togglePaletteWithReset,toggleInspector,setShowPalette,globalsOpen,setGlobalsOpen,fontsOpen,setFontsOpen,cmsOpen,setCmsOpen,pagesOpen,setPagesOpen,cmdOpen,setCmdOpen,helpOpen,setHelpOpen,a11y,onPointerDown,toolbarLocale}=usePageBuilderLayoutState({toolbarProps:props.toolbarProps,scrollRef:props.scrollRef,toggleComments:props.toggleComments,showComments:props.showComments,mode:props.mode}),{style,paletteOnAdd,onInsertImageAsset,onSetSectionBackground,selectedIsSection,onInsertPreset,onInsertLinkedSection,presetsSourceUrl,toolbarProps,gridProps,startTour,togglePreview,showPreview,toggleComments,showComments,liveMessage,dndContext,dropAllowed,dragMeta,frameClass,viewport,viewportStyle,zoom=1,scrollRef,canvasProps,activeType,previewProps,historyProps,sidebarProps,toast,tourProps,parentFirst,onParentFirstChange,shop,pageId,setEditingSizePx,crossBreakpointNotices,onCrossBreakpointNoticesChange,mode="page"}=props,breakpoints=null==toolbarProps?void 0:toolbarProps.breakpoints,setBreakpoints=null==toolbarProps?void 0:toolbarProps.setBreakpoints;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(core_esm.Mp,{...dndContext,accessibility:a11y,onDragStart:dndContext.onDragStart||(()=>{}),onDragMove:dndContext.onDragMove||(()=>{}),onDragEnd:dndContext.onDragEnd||(()=>{}),children:(0,jsx_runtime.jsxs)("div",{className:"flex gap-4 min-h-0",style,children:[(0,jsx_runtime.jsx)(PageBuilderTour.A,{...tourProps}),(0,jsx_runtime.jsx)(page_builder_PageBuilderLeftPanel,{showPalette,showSections,showLayers:showLayersLeft,showInspector,paletteWidth,onPaletteWidthChange:setPaletteWidth,layersWidth,onLayersWidthChange:setLayersWidth,openPalette,openSections,openLayers,onTogglePalette:togglePaletteWithReset,onToggleInspector:toggleInspector,paletteOnAdd,onInsertImageAsset,onSetSectionBackground,selectedIsSection,onInsertPreset,onInsertLinkedSection,gridProps,startTour,toggleComments,showComments,togglePreview,showPreview,parentFirst,onParentFirstChange,crossBreakpointNotices,onCrossBreakpointNoticesChange,breakpoints,setBreakpoints,shop,sidebarProps,mode,onOpenPages:()=>setPagesOpen(!0),onOpenGlobals:()=>setGlobalsOpen(!0),onOpenCMS:()=>setCmsOpen(!0),onOpenFonts:()=>openFonts(),showFonts:showFontsLeft,onOpenTheme:()=>openTheme(),showTheme:showThemeLeft}),(0,jsx_runtime.jsxs)("div",{className:"flex flex-1 flex-col gap-4 min-h-0",children:[(0,jsx_runtime.jsx)(page_builder_PageBuilderTopBar,{historyProps,showPreview,togglePreview,mode,shop,pageId,toolbarProps,gridProps,onInsertPreset,presetsSourceUrl,startTour,toggleComments,showComments,showPalette,onTogglePalette:()=>setShowPalette(value=>!value),parentFirst,onParentFirstChange,crossBreakpointNotices,onCrossBreakpointNoticesChange,showInspector,onToggleInspector:toggleInspector,helpOpen,onHelpOpenChange:setHelpOpen,canSavePreset:props.canSavePreset,onSavePreset:props.onSavePreset}),(0,jsx_runtime.jsx)("div",{"aria-live":"polite","aria-atomic":"true",role:"status",className:"sr-only",children:liveMessage}),(0,jsx_runtime.jsx)(page_builder_PageBuilderCanvasArea,{scrollRef,onPointerDown,zoom,frameClass,viewport,viewportStyle,canvasProps,paletteOnAdd,showDevTools,dragMeta,dropAllowed,reducedMotion,activeType,toolbarLocale,previewProps,showPreview,openPalette,setEditingSizePx})]}),showInspector&&(0,jsx_runtime.jsx)(PageSidebar.A,{...sidebarProps}),(0,jsx_runtime.jsx)(atoms.y8,{open:toast.open,onClose:toast.onClose,onClick:toast.retry,message:toast.message})]})}),(0,jsx_runtime.jsx)(page_builder_PageBuilderDialogs,{cmdOpen,setCmdOpen,canvasProps,globalsOpen,setGlobalsOpen,fontsOpen:!1,setFontsOpen:()=>{},pagesOpen,setPagesOpen,cmsOpen,setCmsOpen,shop,pageId})]})},page_builder_PageBuilderLayout=PageBuilderLayout;PageBuilderLayout.__docgenInfo={description:"",methods:[],displayName:"PageBuilderLayout",props:{style:{required:!1,tsType:{name:"CSSProperties"},description:""},paletteOnAdd:{required:!0,tsType:{name:"signature",type:"function",raw:"(type: ComponentType) => void",signature:{arguments:[{type:{name:"union",raw:"| keyof typeof atomRegistry\n| keyof typeof moleculeRegistry\n| keyof typeof organismRegistry\n| keyof typeof containerRegistry\n| keyof typeof layoutRegistry",elements:[{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"}]},name:"type"}],return:{name:"void"}}},description:""},onInsertImageAsset:{required:!0,tsType:{name:"signature",type:"function",raw:"(url: string) => void",signature:{arguments:[{type:{name:"string"},name:"url"}],return:{name:"void"}}},description:""},onSetSectionBackground:{required:!0,tsType:{name:"signature",type:"function",raw:"(url: string) => void",signature:{arguments:[{type:{name:"string"},name:"url"}],return:{name:"void"}}},description:""},selectedIsSection:{required:!0,tsType:{name:"boolean"},description:""},onInsertPreset:{required:!1,tsType:{name:"signature",type:"function",raw:"(component: PageComponent) => void",signature:{arguments:[{type:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},name:"component"}],return:{name:"void"}}},description:""},onInsertLinkedSection:{required:!1,tsType:{name:"signature",type:"function",raw:"(item: { globalId: string; label: string; component: PageComponent }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ globalId: string; label: string; component: PageComponent }",signature:{properties:[{key:"globalId",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}}]}},name:"item"}],return:{name:"void"}}},description:""},presetsSourceUrl:{required:!1,tsType:{name:"string"},description:""},toolbarProps:{required:!0,tsType:{name:"ComponentProps",elements:[{name:'import("./PageToolbar").default'}],raw:"ComponentProps<PageToolbarComponent>"},description:""},gridProps:{required:!0,tsType:{name:"ComponentProps",elements:[{name:'import("./GridSettings").default'}],raw:"ComponentProps<GridSettingsComponent>"},description:""},startTour:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},togglePreview:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},showPreview:{required:!0,tsType:{name:"boolean"},description:""},toggleComments:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},showComments:{required:!0,tsType:{name:"boolean"},description:""},liveMessage:{required:!0,tsType:{name:"string"},description:""},dndContext:{required:!0,tsType:{name:"ComponentProps",elements:[{name:'import("@dnd-kit/core").DndContext'}],raw:"ComponentProps<DndContextComponent>"},description:""},dropAllowed:{required:!1,tsType:{name:"union",raw:"boolean | null",elements:[{name:"boolean"},{name:"null"}]},description:""},dragMeta:{required:!1,tsType:{name:"union",raw:"DragMeta | null",elements:[{name:"signature",type:"object",raw:'{\n  from: "palette" | "library" | "canvas";\n  type?: ComponentType;\n  count?: number;\n  label?: string;\n  thumbnail?: string | null;\n}',signature:{properties:[{key:"from",value:{name:"union",raw:'"palette" | "library" | "canvas"',elements:[{name:"literal",value:'"palette"'},{name:"literal",value:'"library"'},{name:"literal",value:'"canvas"'}],required:!0}},{key:"type",value:{name:"union",raw:"| keyof typeof atomRegistry\n| keyof typeof moleculeRegistry\n| keyof typeof organismRegistry\n| keyof typeof containerRegistry\n| keyof typeof layoutRegistry",elements:[{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"}],required:!1}},{key:"count",value:{name:"number",required:!1}},{key:"label",value:{name:"string",required:!1}},{key:"thumbnail",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}}]}},{name:"null"}]},description:""},frameClass:{required:!0,tsType:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"},description:""},viewport:{required:!0,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:""},viewportStyle:{required:!0,tsType:{name:"CSSProperties"},description:""},zoom:{required:!1,tsType:{name:"number"},description:""},scrollRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}]}],raw:"RefObject<HTMLDivElement | null>"},description:""},canvasProps:{required:!0,tsType:{name:"ComponentProps",elements:[{name:'import("./PageCanvas").default'}],raw:"ComponentProps<PageCanvasComponent>"},description:""},activeType:{required:!0,tsType:{name:"union",raw:"ComponentType | null",elements:[{name:"union",raw:"| keyof typeof atomRegistry\n| keyof typeof moleculeRegistry\n| keyof typeof organismRegistry\n| keyof typeof containerRegistry\n| keyof typeof layoutRegistry",elements:[{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"}]},{name:"null"}]},description:""},previewProps:{required:!0,tsType:{name:"signature",type:"object",raw:"{\n  components: PageComponent[];\n  locale: Locale;\n  deviceId: string;\n  onChange: (id: string) => void;\n}",signature:{properties:[{key:"components",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]",required:!0}},{key:"locale",value:{name:"Locale",required:!0}},{key:"deviceId",value:{name:"string",required:!0}},{key:"onChange",value:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}},required:!0}}]}},description:""},historyProps:{required:!0,tsType:{name:"ComponentProps",elements:[{name:'import("./HistoryControls").default'}],raw:"ComponentProps<HistoryControlsComponent>"},description:""},sidebarProps:{required:!0,tsType:{name:"ComponentProps",elements:[{name:'import("./PageSidebar").default'}],raw:"ComponentProps<PageSidebarComponent>"},description:""},toast:{required:!0,tsType:{name:"signature",type:"object",raw:"{ open: boolean; message: string; retry?: () => void; onClose: () => void }",signature:{properties:[{key:"open",value:{name:"boolean",required:!0}},{key:"message",value:{name:"string",required:!0}},{key:"retry",value:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}},required:!1}},{key:"onClose",value:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}},required:!0}}]}},description:""},tourProps:{required:!0,tsType:{name:"signature",type:"object",raw:"{ steps: Step[]; run: boolean; callback: (data: CallBackProps) => void }",signature:{properties:[{key:"steps",value:{name:"Array",elements:[{name:"Step"}],raw:"Step[]",required:!0}},{key:"run",value:{name:"boolean",required:!0}},{key:"callback",value:{name:"signature",type:"function",raw:"(data: CallBackProps) => void",signature:{arguments:[{type:{name:"CallBackProps"},name:"data"}],return:{name:"void"}},required:!0}}]}},description:""},shop:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},pageId:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},parentFirst:{required:!1,tsType:{name:"boolean"},description:""},onParentFirstChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(v: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"v"}],return:{name:"void"}}},description:""},editingSizePx:{required:!1,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:""},setEditingSizePx:{required:!1,tsType:{name:"signature",type:"function",raw:"(px: number | null) => void",signature:{arguments:[{type:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},name:"px"}],return:{name:"void"}}},description:""},crossBreakpointNotices:{required:!1,tsType:{name:"boolean"},description:""},onCrossBreakpointNoticesChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(v: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"v"}],return:{name:"void"}}},description:""},mode:{required:!1,tsType:{name:"union",raw:'"page" | "section"',elements:[{name:"literal",value:'"page"'},{name:"literal",value:'"section"'}]},description:""},canSavePreset:{required:!1,tsType:{name:"boolean"},description:""},onSavePreset:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/PageBuilderTour.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>PageBuilderTour,X:()=>STATUS});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_acme_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/i18n/src/index.ts");const STATUS={FINISHED:"finished",SKIPPED:"skipped"};function PageBuilderTour({steps,run,callback}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_2__.c3)(),[active,setActive]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0),currentStep=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{var _steps_active;return run&&null!==(_steps_active=steps[active])&&void 0!==_steps_active?_steps_active:null},[run,steps,active]),rect=function useStepTargetRect(step){const[rect,setRect]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),rafRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),compute=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{if(!step)return void setRect(null);const el=document.querySelector(step.target);if(!el)return void setRect(null);const r=el.getBoundingClientRect();setRect({top:r.top,left:r.left,width:r.width,height:r.height})},[step]);return(0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(()=>{compute();const onScroll=()=>{rafRef.current&&cancelAnimationFrame(rafRef.current),rafRef.current=requestAnimationFrame(compute)};return window.addEventListener("scroll",onScroll,!0),window.addEventListener("resize",onScroll),()=>{window.removeEventListener("scroll",onScroll,!0),window.removeEventListener("resize",onScroll),rafRef.current&&cancelAnimationFrame(rafRef.current)}},[compute]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{if(!step)return;const el=document.querySelector(step.target);el&&el.scrollIntoView({block:"center",inline:"center",behavior:"smooth"})},[step]),rect}(currentStep);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{run&&setActive(0)},[run]);const finish=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>callback({status:STATUS.FINISHED}),[callback]),skip=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>callback({status:STATUS.SKIPPED}),[callback]);if((0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{if(!run)return;const onKey=e=>{"Escape"===e.key?(e.preventDefault(),skip()):"ArrowRight"===e.key||"Enter"===e.key?(e.preventDefault(),setActive(i=>i+1<steps.length?i+1:i)):"ArrowLeft"===e.key&&(e.preventDefault(),setActive(i=>i-1>=0?i-1:i))};return window.addEventListener("keydown",onKey),()=>window.removeEventListener("keydown",onKey)},[run,steps.length,skip]),!run)return null;const missingTarget=!rect;let tipStyle={};if(rect){const margin=8,belowSpace=window.innerHeight-(rect.top+rect.height),aboveSpace=rect.top;tipStyle={top:belowSpace>=140||belowSpace>=aboveSpace?rect.top+rect.height+margin:Math.max(8,rect.top-120-margin),left:Math.min(Math.max(8,rect.left+rect.width/2-180),window.innerWidth-8-360),width:360}}else tipStyle={top:40,left:40,width:360};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{role:"dialog","aria-modal":"true",className:"relative fixed inset-0 z-50 pointer-events-auto",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"absolute inset-0 bg-black/45 cursor-pointer",role:"button","aria-label":t("pb.tour.skipAria"),tabIndex:0,onClick:skip,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key&&"Spacebar"!==e.key||(e.preventDefault(),skip())}}),rect&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{"aria-hidden":!0,style:{position:"fixed",top:rect.top-6,left:rect.left-6,width:rect.width+12,height:rect.height+12,borderRadius:8,boxShadow:"0 0 0 3px var(--color-bg), 0 0 0 9999px rgba(0,0,0,0.45)",pointerEvents:"none",transition:"top 0.1s, left 0.1s, width 0.1s, height 0.1s"}})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"fixed z-50 rounded-lg border border-white/20 bg-surface-1 text-foreground shadow-xl p-3",style:tipStyle,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"font-semibold mb-2",children:t("pb.tour.stepXofY",{current:Math.min(active+1,steps.length),total:steps.length})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mb-3",children:missingTarget?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:t("pb.tour.preparing")}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:null==currentStep?void 0:currentStep.content})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"button",onClick:skip,className:"bg-transparent text-muted-foreground border-0 px-3 py-2 cursor-pointer min-h-10 min-w-10",children:t("pb.tour.skip")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"button",onClick:()=>setActive(i=>Math.max(0,i-1)),disabled:0===active,className:"bg-surface-2 text-foreground border border-border px-3 py-2 rounded-md disabled:opacity-60 disabled:cursor-not-allowed cursor-pointer min-h-10 min-w-10",children:t("pb.tour.back")}),active+1<steps.length?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"button",onClick:()=>setActive(i=>Math.min(steps.length-1,i+1)),className:"bg-primary text-foreground border border-primary px-3 py-2 rounded-md cursor-pointer min-h-10 min-w-10",children:t("pb.tour.next")}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"button",onClick:finish,className:"bg-primary text-foreground border border-primary px-3 py-2 rounded-md cursor-pointer min-h-10 min-w-10",children:t("pb.tour.done")})]})]})]})]})}PageBuilderTour.__docgenInfo={description:"",methods:[],displayName:"PageBuilderTour",props:{steps:{required:!0,tsType:{name:"Array",elements:[{name:"Step"}],raw:"Step[]"},description:""},run:{required:!0,tsType:{name:"boolean"},description:""},callback:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: CallBackProps) => void",signature:{arguments:[{type:{name:"CallBackProps"},name:"data"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/PageCanvas.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>page_builder_PageCanvas});var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),Block=__webpack_require__("../../packages/ui/src/components/cms/page-builder/Block.tsx"),isHiddenForViewport=__webpack_require__("../../packages/ui/src/components/cms/page-builder/state/layout/utils/isHiddenForViewport.ts"),Stack=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Stack.tsx"),clsx=__webpack_require__("../../node_modules/.pnpm/clsx@2.1.1/node_modules/clsx/dist/clsx.mjs");function PreviewCanvas({components,canvasRef,containerStyle,editor,viewport,locale}){return(0,jsx_runtime.jsx)(Stack.B,{id:"canvas",ref:node=>{canvasRef&&(canvasRef.current=node)},style:containerStyle,className:(0,clsx.$)("relative mx-auto"),gap:4,children:components.filter(c=>!(0,isHiddenForViewport.E)(c.id,editor,c.hidden,viewport)).map(c=>{const flags=(null!=editor?editor:{})[c.id];var _flags_hidden;const hidden=null!==(_flags_hidden=null==flags?void 0:flags.hidden)&&void 0!==_flags_hidden?_flags_hidden:[],hideClasses=[hidden.includes("desktop")?"pb-hide-desktop":"",hidden.includes("tablet")?"pb-hide-tablet":"",hidden.includes("mobile")?"pb-hide-mobile":""].filter(Boolean).join(" "),withViewport={...c,pbViewport:viewport};return(0,jsx_runtime.jsx)("div",{className:["pb-scope",hideClasses].filter(Boolean).join(" ")||void 0,children:(0,jsx_runtime.jsx)(Block.A,{component:withViewport,locale})},c.id)})})}PreviewCanvas.__docgenInfo={description:"",methods:[],displayName:"PreviewCanvas",props:{components:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},canvasRef:{required:!1,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLDivElement | null>",elements:[{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}]}]},description:""},containerStyle:{required:!0,tsType:{name:"CSSProperties"},description:""},editor:{required:!1,tsType:{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},description:""},viewport:{required:!0,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:""},locale:{required:!0,tsType:{name:"Locale"},description:""}}};var sortable_esm=__webpack_require__("../../node_modules/.pnpm/@dnd-kit+sortable@10.0.0_@dnd-kit+core@6.3.1_react-dom@19.2.0-canary-3fbfb9ba-20250409__571aab38212e666fc4f105bb05843619/node_modules/@dnd-kit/sortable/dist/sortable.esm.js"),react=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),style=__webpack_require__("../../packages/ui/src/utils/style/index.ts"),src=__webpack_require__("../../packages/i18n/src/index.ts"),coords=__webpack_require__("../../packages/ui/src/components/cms/page-builder/utils/coords.ts");var usePresence=__webpack_require__("../../packages/ui/src/components/cms/page-builder/collab/usePresence.ts");var walkTree=__webpack_require__("../../packages/ui/src/components/cms/page-builder/state/layout/utils/walkTree.ts");function getParentOfId(list,id){let parent=null;return(0,walkTree.I)(list,(n,p)=>{parent||n.id===id&&(parent=null!=p?p:null)}),parent}const utils_findById=function findById(list,id){for(const c of list){if(c.id===id)return c;const children=c.children;if(Array.isArray(children)){const found=findById(children,id);if(found)return found}}return null};function isSection(node){return!!node&&"Section"===node.type}var useGroupingActions=__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/useGroupingActions.ts");var shadcn=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),geometry=__webpack_require__("../../packages/ui/src/components/cms/page-builder/state/layout/geometry.ts");function SelectionQuickActions({components,selectedIds,dispatch,canvasRef,viewport,disabled=!1,zoom=1}){const[pos,setPos]=(0,react.useState)(null),bubbleRef=(0,react.useRef)(null);(0,react.useEffect)(()=>{if(!canvasRef.current||0===selectedIds.length)return void setPos(null);const bounds=canvasRef.current.getBoundingClientRect(),rects=[];if(selectedIds.forEach(id=>{const el=document.querySelector(`[data-component-id="${id}"]`);if(!el)return;const r=el.getBoundingClientRect(),c=(0,coords.sc)({left:r.left,top:r.top,width:r.width,height:r.height},bounds,zoom);rects.push({left:c.left,top:c.top,right:c.left+c.width,bottom:c.top+c.height})}),0===rects.length)return void setPos(null);const left=Math.min(...rects.map(r=>r.left)),right=Math.max(...rects.map(r=>r.right)),top=Math.min(...rects.map(r=>r.top));setPos({left:(left+right)/2,top:Math.max(0,top-8)})},[canvasRef,selectedIds,zoom]);const vpKey=k=>"desktop"===viewport?`${k}Desktop`:"tablet"===viewport?`${k}Tablet`:`${k}Mobile`,locked=disabled,doPatch=patches=>{patches.forEach(p=>{if(void 0!==p.left){const action={type:"resize",id:p.id,[vpKey("left")]:p.left};dispatch(action)}if(void 0!==p.top){const action={type:"resize",id:p.id,[vpKey("top")]:p.top};dispatch(action)}})},ids=selectedIds,{groupAs,ungroup}=(0,useGroupingActions.A)({components,selectedIds,dispatch});if(!pos||0===selectedIds.length)return null;return(0,jsx_runtime.jsx)("div",{ref:bubbleRef,className:"absolute -translate-x-1/2 -translate-y-full rounded bg-muted/90 px-1 py-1 text-xs text-muted-foreground shadow backdrop-blur",style:{left:pos.left,top:pos.top},children:(0,jsx_runtime.jsxs)("div",{className:"flex flex-wrap items-center gap-1",children:[1===selectedIds.length&&(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",className:"h-6 px-2 py-0 text-xs",variant:"outline",disabled:locked,onClick:ungroup,title:"Ungroup container",children:"Ungroup"}),selectedIds.length>1&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",className:"h-6 px-2 py-0 text-xs",variant:"outline",disabled:locked,onClick:()=>doPatch((0,geometry.Vl)(components,ids,viewport)),children:"L"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",className:"h-6 px-2 py-0 text-xs",variant:"outline",disabled:locked,onClick:()=>doPatch((0,geometry.Wk)(components,ids,viewport)),children:"R"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",className:"h-6 px-2 py-0 text-xs",variant:"outline",disabled:locked,onClick:()=>doPatch((0,geometry.t8)(components,ids,viewport)),children:"T"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",className:"h-6 px-2 py-0 text-xs",variant:"outline",disabled:locked,onClick:()=>doPatch((0,geometry.X9)(components,ids,viewport)),children:"B"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",className:"h-6 px-2 py-0 text-xs",variant:"outline",disabled:locked,onClick:()=>doPatch((0,geometry.l8)(components,ids,viewport)),children:"CX"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",className:"h-6 px-2 py-0 text-xs",variant:"outline",disabled:locked,onClick:()=>doPatch((0,geometry.S9)(components,ids,viewport)),children:"CY"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",className:"h-6 px-2 py-0 text-xs",variant:"outline",disabled:locked,onClick:()=>doPatch((0,geometry.E0)(components,ids,viewport)),children:"DH"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",className:"h-6 px-2 py-0 text-xs",variant:"outline",disabled:locked,onClick:()=>doPatch((0,geometry.YV)(components,ids,viewport)),children:"DV"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",className:"h-6 px-2 py-0 text-xs",variant:"outline",disabled:locked,onClick:()=>groupAs("Section"),title:"Group into Section",children:"Group: Sec"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",className:"h-6 px-2 py-0 text-xs",variant:"outline",disabled:locked,onClick:()=>groupAs("MultiColumn"),title:"Group into Columns",children:"Group: Col"})]}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",className:"h-6 px-2 py-0 text-xs",variant:"outline",disabled:locked,onClick:()=>{ids.forEach(id=>{const el=document.querySelector(`[data-component-id="${id}"]`);var _el_offsetParent,_ref;const parent=null!==(_ref=null!==(_el_offsetParent=null==el?void 0:el.offsetParent)&&void 0!==_el_offsetParent?_el_offsetParent:null==el?void 0:el.parentElement)&&void 0!==_ref?_ref:null;if(!el||!parent)return;const left=Math.round((parent.clientWidth-el.offsetWidth)/2),action={type:"resize",id,[vpKey("left")]:`${left}px`};dispatch(action)})},title:"Center horizontally in parent",children:"C‒P X"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",className:"h-6 px-2 py-0 text-xs",variant:"outline",disabled:locked,onClick:()=>{ids.forEach(id=>{const el=document.querySelector(`[data-component-id="${id}"]`);var _el_offsetParent,_ref;const parent=null!==(_ref=null!==(_el_offsetParent=null==el?void 0:el.offsetParent)&&void 0!==_el_offsetParent?_el_offsetParent:null==el?void 0:el.parentElement)&&void 0!==_ref?_ref:null;if(!el||!parent)return;const top=Math.round((parent.clientHeight-el.offsetHeight)/2),action={type:"resize",id,[vpKey("top")]:`${top}px`};dispatch(action)})},title:"Center vertically in parent",children:"C‒P Y"})]})})}SelectionQuickActions.__docgenInfo={description:"",methods:[],displayName:"SelectionQuickActions",props:{components:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},dispatch:{required:!0,tsType:{name:"signature",type:"function",raw:"(action: Action) => void",signature:{arguments:[{type:{name:"union",raw:"| ChangeAction\n| UndoAction\n| RedoAction\n| SetGridColsAction\n| SetBreakpointsAction\n| UpdateEditorAction",elements:[{name:"union",raw:"| AddAction\n| MoveAction\n| RemoveAction\n| DuplicateAction\n| UpdateAction\n| ResizeAction\n| SetAction",elements:[{name:"signature",type:"object",raw:'{\n  type: "add";\n  component: PageComponent;\n  parentId?: string;\n  index?: number;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"add"',required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!1}}]}},{name:"signature",type:"object",raw:'{\n  type: "move";\n  from: { parentId?: string; index: number };\n  to: { parentId?: string; index: number };\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"move"',required:!0}},{key:"from",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}},{key:"to",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "remove"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"remove"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "duplicate"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"duplicate"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update";\n  id: string;\n  patch: Partial<PageComponent>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"Partial<PageComponent>",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "resize";\n  id: string;\n  width?: string;\n  height?: string;\n  left?: string;\n  top?: string;\n  right?: string;\n  bottom?: string;\n  leftDesktop?: string;\n  leftTablet?: string;\n  leftMobile?: string;\n  topDesktop?: string;\n  topTablet?: string;\n  topMobile?: string;\n  widthDesktop?: string;\n  widthTablet?: string;\n  widthMobile?: string;\n  heightDesktop?: string;\n  heightTablet?: string;\n  heightMobile?: string;\n  marginDesktop?: string;\n  marginTablet?: string;\n  marginMobile?: string;\n  paddingDesktop?: string;\n  paddingTablet?: string;\n  paddingMobile?: string;\n  [key: string]: string | undefined;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"resize"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!1}},{key:"height",value:{name:"string",required:!1}},{key:"left",value:{name:"string",required:!1}},{key:"top",value:{name:"string",required:!1}},{key:"right",value:{name:"string",required:!1}},{key:"bottom",value:{name:"string",required:!1}},{key:"leftDesktop",value:{name:"string",required:!1}},{key:"leftTablet",value:{name:"string",required:!1}},{key:"leftMobile",value:{name:"string",required:!1}},{key:"topDesktop",value:{name:"string",required:!1}},{key:"topTablet",value:{name:"string",required:!1}},{key:"topMobile",value:{name:"string",required:!1}},{key:"widthDesktop",value:{name:"string",required:!1}},{key:"widthTablet",value:{name:"string",required:!1}},{key:"widthMobile",value:{name:"string",required:!1}},{key:"heightDesktop",value:{name:"string",required:!1}},{key:"heightTablet",value:{name:"string",required:!1}},{key:"heightMobile",value:{name:"string",required:!1}},{key:"marginDesktop",value:{name:"string",required:!1}},{key:"marginTablet",value:{name:"string",required:!1}},{key:"marginMobile",value:{name:"string",required:!1}},{key:"paddingDesktop",value:{name:"string",required:!1}},{key:"paddingTablet",value:{name:"string",required:!1}},{key:"paddingMobile",value:{name:"string",required:!1}},{key:{name:"string"},value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set"; components: PageComponent[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set"',required:!0}},{key:"components",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"PageComponent[]",required:!0}}]}}]},{name:"signature",type:"object",raw:'{ type: "undo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"undo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "redo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"redo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-grid-cols"; gridCols: number }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-grid-cols"',required:!0}},{key:"gridCols",value:{name:"number",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-breakpoints"; breakpoints: { id: string; label: string; min?: number; max?: number }[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-breakpoints"',required:!0}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update-editor";\n  id: string;\n  patch: Partial<EditorFlags>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update-editor"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  hiddenDeviceIds?: string[];\n  /** Legacy single strategy (mobile); kept for backwards-compat */\n  stackStrategy?: "default" | "reverse" | "custom";\n  /** Per-device stacking strategies */\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  /** Custom orders per device (used when corresponding strategy === "custom") */\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n  global?: {\n    id: string;\n    overrides?: unknown;\n    pinned?: boolean;\n    editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n  };\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"hiddenDeviceIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Legacy single strategy (mobile); kept for backwards-compat"},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Per-device stacking strategies"},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1},description:'Custom orders per device (used when corresponding strategy === "custom")'},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}},{key:"global",value:{name:"signature",type:"object",raw:'{\n  id: string;\n  overrides?: unknown;\n  pinned?: boolean;\n  editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"overrides",value:{name:"unknown",required:!1}},{key:"pinned",value:{name:"boolean",required:!1}},{key:"editingSize",value:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]}],raw:'Record<"desktop" | "tablet" | "mobile", number | null>'}],raw:'Partial<Record<"desktop" | "tablet" | "mobile", number | null>>',required:!1}}]},required:!1}}]}}],raw:"Partial<EditorFlags>",required:!0}}]}}]},name:"action"}],return:{name:"void"}}},description:""},canvasRef:{required:!0,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLDivElement | null>",elements:[{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}]}]},description:""},viewport:{required:!0,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},zoom:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}}}};var core_esm=__webpack_require__("../../node_modules/.pnpm/@dnd-kit+core@6.3.1_react-dom@19.2.0-canary-3fbfb9ba-20250409_react@19.2.0-canary-3fbfb_fe9249e4a42fbe7e42b4e4091f9a4c62/node_modules/@dnd-kit/core/dist/core.esm.js");function useDropHighlightState(params){const{dropRect:dropRectLocal,handleDragOver,clearHighlight}=function useDropHighlight({preview,canvasRef,zoom,setDragOver}){const[dropRect,setDropRect]=(0,react.useState)(null);return{dropRect,handleDragOver:e=>{if(preview)return;e.preventDefault(),setDragOver(!0);const target=e.target.closest('[role="listitem"], #canvas');if(target instanceof HTMLElement&&(null==canvasRef?void 0:canvasRef.current)){const canvasBounds=canvasRef.current.getBoundingClientRect(),rect=target.getBoundingClientRect(),r=(0,coords.sc)({left:rect.left,top:rect.top,width:rect.width,height:rect.height},canvasBounds,zoom);setDropRect({left:r.left,top:r.top,width:r.width,height:r.height})}else setDropRect(null)},clearHighlight:()=>{setDragOver(!1),setDropRect(null)},setDropRect}}(params),[dropRect,setDropRectState]=(0,react.useState)(null);return(0,react.useEffect)(()=>{setDropRectState(dropRectLocal)},[dropRectLocal]),{dropRect,handleDragOver,clearHighlight}}var primitives=__webpack_require__("../../packages/ui/src/components/atoms/primitives/index.ts");function findPath(list,targetId,stack=[]){for(const c of list){const next=[...stack,c];if(c.id===targetId)return next;const kids=c.children;if(Array.isArray(kids)){const found=findPath(kids,targetId,next);if(found)return found}}return null}function SelectionBreadcrumb({components,selectedIds,onSelectIds}){const t=(0,src.c3)(),path=(0,react.useMemo)(()=>{const id=selectedIds[0];return id&&null!==(_findPath=findPath(components,id))&&void 0!==_findPath?_findPath:[];var _findPath},[components,selectedIds]);return path.length?(0,jsx_runtime.jsx)("div",{className:"relative",children:(0,jsx_runtime.jsx)("div",{className:"absolute start-2 bottom-2 rounded bg-muted/80 px-2 py-1 text-xs text-muted-foreground backdrop-blur",children:(0,jsx_runtime.jsx)(primitives.cV,{gap:1,wrap:!0,children:path.map((node,idx)=>{const label=node.name||node.type,btnClass="rounded border px-1 "+(idx===path.length-1?"bg-primary text-primary-foreground border-primary":"bg-surface-1");return(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)("button",{type:"button",className:btnClass,onClick:e=>{e.stopPropagation(),onSelectIds([node.id]);try{const el=document.querySelector(`[data-component-id="${node.id}"]`);null==el||el.scrollIntoView({block:"center",inline:"center",behavior:"smooth"})}catch(e){}},children:label}),idx<path.length-1&&(0,jsx_runtime.jsx)("span",{"aria-hidden":!0,children:t("breadcrumb.separator")})]},node.id)})})})}):null}SelectionBreadcrumb.__docgenInfo={description:"",methods:[],displayName:"SelectionBreadcrumb",props:{components:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onSelectIds:{required:!0,tsType:{name:"signature",type:"function",raw:"(ids: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"ids"}],return:{name:"void"}}},description:""}}};var atoms=__webpack_require__("../../packages/ui/src/components/atoms/index.ts"),next_link=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/link.js"),link_default=__webpack_require__.n(next_link);function CommentsHelpLauncher(){return(0,jsx_runtime.jsx)("div",{className:"relative",children:(0,jsx_runtime.jsxs)("div",{className:"absolute start-2 bottom-12 flex gap-2",children:[(0,jsx_runtime.jsx)(atoms.m_,{text:"Comments",children:(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded border bg-muted/80 px-3 py-1 text-xs backdrop-blur min-h-10 min-w-10",onClick:()=>{try{window.dispatchEvent(new Event("pb:toggle-comments"))}catch(e){}},children:"💬 Comments"})}),(0,jsx_runtime.jsx)(atoms.m_,{text:"Help",children:(0,jsx_runtime.jsx)(link_default(),{href:"/cms/support",className:"rounded border bg-muted/80 px-3 py-1 text-xs backdrop-blur min-h-10 min-w-10",children:"❔ Help"})})]})})}CommentsHelpLauncher.__docgenInfo={description:"",methods:[],displayName:"CommentsHelpLauncher"};var drawer=__webpack_require__("../../packages/ui/src/components/atoms/primitives/drawer.tsx"),Inline=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Inline.tsx"),Cluster=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Cluster.tsx");function formatTime(ts){try{return ts?new Date(ts).toLocaleString():""}catch(e){return null!=ts?ts:""}}function CommentsThreadList({threads:_threads,filtered,filter,onFilterChange,query,onQueryChange,selectedId,onSelect,componentsOptions,onCreate,flashId}){const[newOpen,setNewOpen]=react.useState(!1),[newCompId,setNewCompId]=react.useState(void 0),[newText,setNewText]=react.useState(""),[newAssign,setNewAssign]=react.useState(""),rowsRef=react.useRef({}),t=(0,src.c3)();return react.useEffect(()=>{const id=flashId||selectedId;if(!id)return;const el=rowsRef.current[id];if(el)try{el.scrollIntoView({block:"nearest",behavior:"smooth"})}catch(e){el.scrollIntoView({block:"nearest"})}},[flashId,selectedId,filtered.length]),(0,jsx_runtime.jsxs)(Stack.B,{className:"h-full w-full border-r",children:[(0,jsx_runtime.jsxs)(Cluster.d,{alignY:"center",className:"border-b p-2 gap-2",children:[(0,jsx_runtime.jsx)(Inline.c,{gap:1,children:["all","open","resolved","assigned"].map(f=>(0,jsx_runtime.jsx)(shadcn.$n,{variant:filter===f?"default":"outline",className:"h-7 px-2 text-xs",onClick:()=>onFilterChange(f),children:t("all"===f?"cms.builder.comments.filter.all":"open"===f?"cms.builder.comments.filter.open":"resolved"===f?"cms.builder.comments.filter.resolved":"cms.builder.comments.filter.assigned")},f))}),(0,jsx_runtime.jsx)(shadcn.pd,{placeholder:t("cms.builder.comments.search.placeholder"),value:query,onChange:e=>onQueryChange(e.target.value),className:"ms-auto h-7 w-32 text-xs"})]}),onCreate&&(0,jsx_runtime.jsx)("div",{className:"border-b p-2",children:newOpen?(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)(Inline.c,{alignY:"center",gap:2,children:[(0,jsx_runtime.jsx)("div",{className:"min-w-0 flex-1",children:(0,jsx_runtime.jsxs)(shadcn.l6,{value:newCompId,onValueChange:v=>setNewCompId(v),children:[(0,jsx_runtime.jsx)(shadcn.bq,{className:"h-8 w-full",children:(0,jsx_runtime.jsx)(shadcn.yv,{placeholder:t("cms.builder.comments.selectComponent")})}),(0,jsx_runtime.jsx)(shadcn.gC,{children:(null!=componentsOptions?componentsOptions:[]).map(o=>(0,jsx_runtime.jsx)(shadcn.eb,{value:o.id,children:o.label},o.id))})]})}),(0,jsx_runtime.jsx)(shadcn.$n,{variant:"ghost",className:"h-8 px-2",onClick:()=>setNewOpen(!1),children:t("common.cancel")})]}),(0,jsx_runtime.jsx)(shadcn.pd,{placeholder:t("cms.builder.comments.assignOptional"),className:"h-8 text-sm",value:newAssign,onChange:e=>setNewAssign(e.target.value)}),(0,jsx_runtime.jsx)(shadcn.pd,{placeholder:t("cms.builder.comments.initialComment"),className:"h-8 text-sm",value:newText,onChange:e=>setNewText(e.target.value)}),(0,jsx_runtime.jsx)(Cluster.d,{justify:"end",children:(0,jsx_runtime.jsx)(shadcn.$n,{onClick:()=>onCreate(newCompId,newText.trim(),newAssign||void 0),disabled:!newCompId||!newText.trim(),children:t("common.create")})})]}):(0,jsx_runtime.jsxs)(Cluster.d,{alignY:"center",justify:"between",children:[(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted-foreground",children:t("cms.builder.comments.hint.pinOnCanvas")}),(0,jsx_runtime.jsx)(shadcn.$n,{className:"h-7 px-2 text-xs",onClick:()=>setNewOpen(!0),children:t("cms.builder.comments.newThread")})]})}),(0,jsx_runtime.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===filtered.length?(0,jsx_runtime.jsx)("div",{className:"p-3 text-sm text-muted-foreground",children:t("cms.builder.comments.noThreads")}):(0,jsx_runtime.jsx)("ul",{children:filtered.map(thr=>{var _thr_messages_;const rowClass=`border-b p-2 text-sm hover:bg-surface-3 ${selectedId===thr.id?"bg-surface-2":""} ${flashId===thr.id?"animate-pulse ring-2 ring-primary":""}`;var _thr_messages__text,_thr_updatedAt;return(0,jsx_runtime.jsx)("li",{ref:el=>{rowsRef.current[thr.id]=el},className:rowClass,children:(0,jsx_runtime.jsxs)("button",{type:"button",className:"block w-full min-h-10 min-w-10 cursor-pointer text-start",onClick:()=>onSelect(thr.id),children:[(0,jsx_runtime.jsxs)(Cluster.d,{alignY:"center",justify:"between",children:[(0,jsx_runtime.jsx)("div",{className:"truncate font-medium",children:thr.componentId}),(0,jsx_runtime.jsx)("div",{className:"ms-2 shrink-0 rounded px-1 text-xs "+(thr.resolved?"bg-success-soft":"bg-warning-soft"),children:thr.resolved?t("cms.builder.comments.resolved"):t("cms.builder.comments.open")})]}),(0,jsx_runtime.jsx)("div",{className:"mt-1 truncate text-xs text-muted-foreground",children:null!==(_thr_messages__text=null===(_thr_messages_=thr.messages[0])||void 0===_thr_messages_?void 0:_thr_messages_.text)&&void 0!==_thr_messages__text?_thr_messages__text:t("cms.builder.comments.emptyMessage")}),(0,jsx_runtime.jsxs)(Cluster.d,{className:"mt-1 text-xs text-muted-foreground",justify:"between",children:[(0,jsx_runtime.jsx)("span",{children:thr.assignedTo?`@${thr.assignedTo}`:t("cms.builder.comments.unassigned")}),(0,jsx_runtime.jsx)("span",{children:formatTime(null!==(_thr_updatedAt=thr.updatedAt)&&void 0!==_thr_updatedAt?_thr_updatedAt:thr.createdAt)})]})]})},thr.id)})})})]})}CommentsThreadList.__docgenInfo={description:"",methods:[],displayName:"CommentsThreadList",props:{threads:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  id: string;\n  componentId: string;\n  resolved: boolean;\n  assignedTo?: string | null;\n  messages: Message[];\n  createdAt?: string;\n  updatedAt?: string;\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"componentId",value:{name:"string",required:!0}},{key:"resolved",value:{name:"boolean",required:!0}},{key:"assignedTo",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"messages",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; text: string; ts: string; author?: string }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"text",value:{name:"string",required:!0}},{key:"ts",value:{name:"string",required:!0}},{key:"author",value:{name:"string",required:!1}}]}}],raw:"Message[]",required:!0}},{key:"createdAt",value:{name:"string",required:!1}},{key:"updatedAt",value:{name:"string",required:!1}}]}}],raw:"CommentThread[]"},description:""},filtered:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  id: string;\n  componentId: string;\n  resolved: boolean;\n  assignedTo?: string | null;\n  messages: Message[];\n  createdAt?: string;\n  updatedAt?: string;\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"componentId",value:{name:"string",required:!0}},{key:"resolved",value:{name:"boolean",required:!0}},{key:"assignedTo",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"messages",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; text: string; ts: string; author?: string }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"text",value:{name:"string",required:!0}},{key:"ts",value:{name:"string",required:!0}},{key:"author",value:{name:"string",required:!1}}]}}],raw:"Message[]",required:!0}},{key:"createdAt",value:{name:"string",required:!1}},{key:"updatedAt",value:{name:"string",required:!1}}]}}],raw:"CommentThread[]"},description:""},filter:{required:!0,tsType:{name:"union",raw:'"all" | "open" | "resolved" | "assigned"',elements:[{name:"literal",value:'"all"'},{name:"literal",value:'"open"'},{name:"literal",value:'"resolved"'},{name:"literal",value:'"assigned"'}]},description:""},onFilterChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(f: ThreadFilter) => void",signature:{arguments:[{type:{name:"union",raw:'"all" | "open" | "resolved" | "assigned"',elements:[{name:"literal",value:'"all"'},{name:"literal",value:'"open"'},{name:"literal",value:'"resolved"'},{name:"literal",value:'"assigned"'}]},name:"f"}],return:{name:"void"}}},description:""},query:{required:!0,tsType:{name:"string"},description:""},onQueryChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(q: string) => void",signature:{arguments:[{type:{name:"string"},name:"q"}],return:{name:"void"}}},description:""},selectedId:{required:!0,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},componentsOptions:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"{ id: string; label: string }[]"},description:""},onCreate:{required:!1,tsType:{name:"signature",type:"function",raw:"(componentId: string, text: string, assignedTo?: string | null) => Promise<void> | void",signature:{arguments:[{type:{name:"string"},name:"componentId"},{type:{name:"string"},name:"text"},{type:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},name:"assignedTo"}],return:{name:"union",raw:"Promise<void> | void",elements:[{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"void"}]}}},description:""},flashId:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""}}};var next_image=__webpack_require__("../../__mocks__/next/image.js"),console=__webpack_require__("../../node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");function CommentsThreadDetails_formatTime(ts){try{return ts?new Date(ts).toLocaleString():""}catch(e){return null!=ts?ts:""}}function renderMessage(text){const parts=[],imgRe=/!\[([^\]]*)\]\((https?:\/\/[^)\s]+)\)/g;let match,lastIndex=0;for(;match=imgRe.exec(text);){const[full,alt,url]=match;match.index>lastIndex&&parts.push({kind:"text",start:lastIndex,text:text.slice(lastIndex,match.index)}),parts.push({kind:"img",start:match.index,alt,url}),lastIndex=match.index+full.length}lastIndex<text.length&&parts.push({kind:"text",start:lastIndex,text:text.slice(lastIndex)});const linkRe=/(https?:\/\/[^\s]+)/g;return parts.flatMap(p=>{if("img"===p.kind)return(0,jsx_runtime.jsx)("div",{className:"my-1 relative w-full h-48 overflow-hidden rounded border",children:(0,jsx_runtime.jsx)(next_image.A,{src:p.url,alt:p.alt||"image",fill:!0,className:"object-contain"})},`img-${p.start}-${p.url}`);const chunks=[];let m,li=0;for(;m=linkRe.exec(p.text);){const[full,url]=m;m.index>li&&chunks.push(p.text.slice(li,m.index)),chunks.push((0,jsx_runtime.jsx)(atoms._3,{href:url,target:"_blank",rel:"noreferrer",children:full},`a-${p.start+m.index}`)),li=m.index+full.length}return li<p.text.length&&chunks.push(p.text.slice(li)),(0,jsx_runtime.jsx)("span",{children:chunks},`t-${p.start}`)})}function CommentsThreadDetails({thread,people,onToggleResolved,onAssign,onAddMessage,onDelete,onJumpTo,shop}){const[assignTo,setAssignTo]=(0,react.useState)(""),[draft,setDraft]=(0,react.useState)(""),[mentionOpen,setMentionOpen]=(0,react.useState)(!1),[mentionQuery,setMentionQuery]=(0,react.useState)(""),[mentionIndex,setMentionIndex]=(0,react.useState)(0),mentionMatches=(0,react.useMemo)(()=>{if(!mentionOpen)return[];const q=mentionQuery.toLowerCase();return people.filter(p=>p.toLowerCase().includes(q)).slice(0,5)},[mentionOpen,mentionQuery,people]),fileRef=(0,react.useRef)(null),[uploading,setUploading]=(0,react.useState)(!1);if(!thread)return(0,jsx_runtime.jsx)("div",{className:"hidden h-full w-full items-center justify-center p-6 text-center text-sm text-muted-foreground md:flex",children:(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"mb-2 text-base font-medium",children:"Select a thread"}),(0,jsx_runtime.jsx)("div",{children:"Choose a comment from the list to view details."})]})});function insertMention(handle){const idx=draft.lastIndexOf("@"+mentionQuery),before=idx>=0?draft.slice(0,idx):draft+" ",after=idx>=0?draft.slice(idx+1+mentionQuery.length):"";setDraft(`${before}@${handle}${after}`),setMentionOpen(!1),setMentionQuery("")}async function uploadScreenshot(file){const data=new FormData;data.append("file",file),setUploading(!0);try{const res=await fetch(`/cms/api/media?shop=${encodeURIComponent(shop)}`,{method:"POST",body:data}),json=await res.json();if(!res.ok)throw new Error((null==json?void 0:json.error)||"Upload failed");const url=null==json?void 0:json.url;url&&setDraft(prev=>prev?`${prev}\n![screenshot](${url})`:`![screenshot](${url})`)}catch(err){console.error("Screenshot upload failed",err),alert(err.message)}finally{setUploading(!1)}}const thr=thread;return(0,jsx_runtime.jsxs)("div",{className:"hidden h-full w-full flex-col md:flex",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 border-b p-3",children:[(0,jsx_runtime.jsxs)("div",{className:"flex-1 min-w-0 truncate text-sm",children:[(0,jsx_runtime.jsx)("span",{className:"text-muted-foreground",children:"Component:"})," ",(0,jsx_runtime.jsx)("code",{className:"text-xs",children:thr.componentId})]}),onJumpTo&&(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",className:"px-3 text-xs min-h-10 min-w-10",onClick:()=>onJumpTo(thr.componentId),children:"Jump"}),onDelete&&(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",className:"px-3 text-xs min-h-10 min-w-10",onClick:async()=>{confirm("Delete this thread?")&&await onDelete(thr.id)},children:"Delete"}),(0,jsx_runtime.jsxs)("label",{className:"ms-1 flex items-center gap-2 text-sm",children:[(0,jsx_runtime.jsx)("input",{type:"checkbox",checked:thr.resolved,onChange:e=>onToggleResolved(thr.id,e.target.checked)}),"Resolved"]})]}),(0,jsx_runtime.jsx)(primitives.cV,{gap:2,className:"border-b p-2",children:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(shadcn.pd,{placeholder:"Assign to (name or email)",className:"h-8 text-sm",value:assignTo,onChange:e=>setAssignTo(e.target.value),onBlur:()=>{onAssign(thr.id,assignTo||null)},list:"comment-people"}),(0,jsx_runtime.jsx)("datalist",{id:"comment-people",children:people.map(p=>(0,jsx_runtime.jsx)("option",{value:p},p))})]})}),(0,jsx_runtime.jsxs)("div",{className:"flex-1 space-y-2 overflow-y-auto p-3 text-sm",children:[thr.messages.map(m=>(0,jsx_runtime.jsxs)("div",{className:"rounded border p-2",children:[(0,jsx_runtime.jsx)("div",{className:"mb-1 text-xs text-muted-foreground",children:CommentsThreadDetails_formatTime(m.ts)}),(0,jsx_runtime.jsx)("div",{className:"break-words",children:renderMessage(m.text)})]},m.id)),0===thr.messages.length&&(0,jsx_runtime.jsx)("div",{className:"text-muted-foreground",children:"No messages"})]}),(0,jsx_runtime.jsx)("div",{className:"border-t p-2",children:(0,jsx_runtime.jsxs)("div",{className:"relative",children:[(0,jsx_runtime.jsx)(shadcn.TM,{placeholder:uploading?"Uploading image...":"Reply (type @ to mention, paste image to attach)",value:draft,onChange:e=>function handleDraftChange(value){setDraft(value);const m=/(^|\s)@([A-Za-z0-9._-]*)$/.exec(value.slice(0));var _m_;m?(setMentionOpen(!0),setMentionQuery(null!==(_m_=m[2])&&void 0!==_m_?_m_:""),setMentionIndex(0)):(setMentionOpen(!1),setMentionQuery(""))}(e.target.value),onPaste:function onPaste(e){var _e_clipboardData;const items=null===(_e_clipboardData=e.clipboardData)||void 0===_e_clipboardData?void 0:_e_clipboardData.items;if(items)for(const item of items)if("file"===item.kind){const file=item.getAsFile();if(file&&file.type.startsWith("image/"))return uploadScreenshot(file),void e.preventDefault()}},onKeyDown:function onKeyDown(e){if(mentionOpen&&0!==mentionMatches.length)if("ArrowDown"===e.key)e.preventDefault(),setMentionIndex(i=>Math.min(mentionMatches.length-1,i+1));else if("ArrowUp"===e.key)e.preventDefault(),setMentionIndex(i=>Math.max(0,i-1));else if("Enter"===e.key||"Tab"===e.key){var _mentionMatches_mentionIndex;e.preventDefault();const handle=null!==(_mentionMatches_mentionIndex=mentionMatches[mentionIndex])&&void 0!==_mentionMatches_mentionIndex?_mentionMatches_mentionIndex:mentionMatches[0];handle&&insertMention(handle)}else"Escape"===e.key&&setMentionOpen(!1)},disabled:uploading,className:"min-h-20 pr-24"}),mentionOpen&&mentionMatches.length>0&&(0,jsx_runtime.jsx)("div",{className:"absolute bottom-2 start-2 max-h-40 w-48 overflow-y-auto rounded border border-border-2 bg-surface-2 text-sm shadow",children:mentionMatches.map((p,idx)=>(0,jsx_runtime.jsxs)("button",{type:"button",className:"w-full cursor-pointer px-2 py-1 text-left hover:bg-surface-3 "+(idx===mentionIndex?"bg-surface-3":""),onMouseDown:e=>{e.preventDefault()},onClick:()=>{insertMention(p)},children:["@",p]},p))}),(0,jsx_runtime.jsxs)("div",{className:"pointer-events-none absolute end-2 top-2 flex gap-2",children:[(0,jsx_runtime.jsxs)("div",{className:"pointer-events-auto",children:[(0,jsx_runtime.jsx)("input",{ref:fileRef,type:"file",accept:"image/*",className:"hidden",onChange:e=>e.target.files&&e.target.files[0]&&void uploadScreenshot(e.target.files[0])}),(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",className:"px-3 text-xs min-h-10 min-w-10",onClick:()=>{var _fileRef_current;return null===(_fileRef_current=fileRef.current)||void 0===_fileRef_current?void 0:_fileRef_current.click()},children:"Attach"})]}),(0,jsx_runtime.jsx)(shadcn.$n,{variant:"default",className:"px-3 text-xs min-h-10 min-w-10",onClick:()=>{(async function handleSend(){draft.trim()&&(await onAddMessage(thr.id,draft.trim()),setDraft(""))})()},disabled:!draft.trim(),children:"Send"})]})]})})]})}CommentsThreadDetails.__docgenInfo={description:"",methods:[],displayName:"CommentsThreadDetails",props:{thread:{required:!0,tsType:{name:"union",raw:"CommentThread | null",elements:[{name:"signature",type:"object",raw:"{\n  id: string;\n  componentId: string;\n  resolved: boolean;\n  assignedTo?: string | null;\n  messages: Message[];\n  createdAt?: string;\n  updatedAt?: string;\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"componentId",value:{name:"string",required:!0}},{key:"resolved",value:{name:"boolean",required:!0}},{key:"assignedTo",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"messages",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; text: string; ts: string; author?: string }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"text",value:{name:"string",required:!0}},{key:"ts",value:{name:"string",required:!0}},{key:"author",value:{name:"string",required:!1}}]}}],raw:"Message[]",required:!0}},{key:"createdAt",value:{name:"string",required:!1}},{key:"updatedAt",value:{name:"string",required:!1}}]}},{name:"null"}]},description:""},people:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onToggleResolved:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, resolved: boolean) => Promise<void> | void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"boolean"},name:"resolved"}],return:{name:"union",raw:"Promise<void> | void",elements:[{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"void"}]}}},description:""},onAssign:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, assignee: string | null) => Promise<void> | void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},name:"assignee"}],return:{name:"union",raw:"Promise<void> | void",elements:[{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"void"}]}}},description:""},onAddMessage:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, text: string) => Promise<void> | void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"string"},name:"text"}],return:{name:"union",raw:"Promise<void> | void",elements:[{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"void"}]}}},description:""},onDelete:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: string) => Promise<void> | void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"union",raw:"Promise<void> | void",elements:[{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"void"}]}}},description:""},onJumpTo:{required:!1,tsType:{name:"signature",type:"function",raw:"(componentId: string) => void",signature:{arguments:[{type:{name:"string"},name:"componentId"}],return:{name:"void"}}},description:""},shop:{required:!0,tsType:{name:"string"},description:""}}};function CommentsDrawer(props){const{open,onOpenChange,threads,selectedId,onSelect,me}=props,[filter,setFilter]=(0,react.useState)("open"),[query,setQuery]=(0,react.useState)(""),[flashThreadId,setFlashThreadId]=(0,react.useState)(null),people=(0,react.useMemo)(()=>props.mentionPeople&&props.mentionPeople.length>0?props.mentionPeople:function extractPeople(threads,me){const set=new Set;me&&set.add(me);for(const t of threads){t.assignedTo&&set.add(t.assignedTo);for(const m of t.messages){const re=/@([A-Za-z0-9._-]+)/g;let match;for(;match=re.exec(m.text);){const handle=match[1];handle&&set.add(handle)}}}return Array.from(set)}(threads,me),[threads,me,props.mentionPeople]),selected=threads.find(t=>t.id===selectedId)||null,filtered=(0,react.useMemo)(()=>{const q=query.trim().toLowerCase();return threads.filter(t=>{if("open"===filter&&t.resolved)return!1;if("resolved"===filter&&!t.resolved)return!1;if("assigned"===filter){const mine=(null!=me?me:"").toLowerCase();return!!t.assignedTo&&(!mine||t.assignedTo.toLowerCase().includes(mine))}return!0}).filter(t=>{if(!q)return!0;var _t_assignedTo;return`${t.componentId} ${null!==(_t_assignedTo=t.assignedTo)&&void 0!==_t_assignedTo?_t_assignedTo:""} ${t.messages.map(m=>m.text).join(" ")}`.toLowerCase().includes(q)}).sort((a,b)=>{if(a.resolved!==b.resolved)return a.resolved?1:-1;var _a_updatedAt,_ref;const au=null!==(_ref=null!==(_a_updatedAt=a.updatedAt)&&void 0!==_a_updatedAt?_a_updatedAt:a.createdAt)&&void 0!==_ref?_ref:"";var _b_updatedAt,_ref1;const bu=null!==(_ref1=null!==(_b_updatedAt=b.updatedAt)&&void 0!==_b_updatedAt?_b_updatedAt:b.createdAt)&&void 0!==_ref1?_ref1:"";return au>bu?-1:au<bu?1:0})},[threads,filter,query,me]);return(0,jsx_runtime.jsx)(drawer._s,{open,onOpenChange,children:(0,jsx_runtime.jsxs)(drawer.uT,{children:[(0,jsx_runtime.jsx)(atoms.hz,{}),(0,jsx_runtime.jsxs)(drawer.zj,{side:"right",width:"w-96",className:"p-0",children:[(0,jsx_runtime.jsx)(drawer.gk,{className:"sr-only",children:"Comments"}),(0,jsx_runtime.jsx)(drawer.I6,{className:"sr-only",children:"Drawer for viewing, filtering, and managing comment threads."}),(0,jsx_runtime.jsxs)("div",{className:"flex h-full",children:[(0,jsx_runtime.jsx)(CommentsThreadList,{threads,filtered,filter,onFilterChange:setFilter,query,onQueryChange:setQuery,selectedId,onSelect:id=>onSelect(id),onCreate:props.onCreate,componentsOptions:props.componentsOptions,flashId:flashThreadId}),(0,jsx_runtime.jsx)(CommentsThreadDetails,{thread:selected,people,onAddMessage:props.onAddMessage,onAssign:props.onAssign,onToggleResolved:props.onToggleResolved,onDelete:props.onDelete,onJumpTo:componentId=>{var _props_onJumpTo;null===(_props_onJumpTo=props.onJumpTo)||void 0===_props_onJumpTo||_props_onJumpTo.call(props,componentId),selected&&(setFlashThreadId(selected.id),setTimeout(()=>setFlashThreadId(null),1200))},shop:props.shop})]})]})]})})}CommentsDrawer.__docgenInfo={description:"",methods:[],displayName:"CommentsDrawer",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},threads:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  id: string;\n  componentId: string;\n  resolved: boolean;\n  assignedTo?: string | null;\n  messages: Message[];\n  createdAt?: string;\n  updatedAt?: string;\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"componentId",value:{name:"string",required:!0}},{key:"resolved",value:{name:"boolean",required:!0}},{key:"assignedTo",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"messages",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; text: string; ts: string; author?: string }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"text",value:{name:"string",required:!0}},{key:"ts",value:{name:"string",required:!0}},{key:"author",value:{name:"string",required:!1}}]}}],raw:"Message[]",required:!0}},{key:"createdAt",value:{name:"string",required:!1}},{key:"updatedAt",value:{name:"string",required:!1}}]}}],raw:"CommentThread[]"},description:""},selectedId:{required:!0,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string | null) => void",signature:{arguments:[{type:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},name:"id"}],return:{name:"void"}}},description:""},onAddMessage:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, text: string) => Promise<void> | void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"string"},name:"text"}],return:{name:"union",raw:"Promise<void> | void",elements:[{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"void"}]}}},description:""},onToggleResolved:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, resolved: boolean) => Promise<void> | void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"boolean"},name:"resolved"}],return:{name:"union",raw:"Promise<void> | void",elements:[{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"void"}]}}},description:""},onAssign:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, assignee: string | null) => Promise<void> | void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},name:"assignee"}],return:{name:"union",raw:"Promise<void> | void",elements:[{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"void"}]}}},description:""},onDelete:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: string) => Promise<void> | void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"union",raw:"Promise<void> | void",elements:[{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"void"}]}}},description:""},onJumpTo:{required:!1,tsType:{name:"signature",type:"function",raw:"(componentId: string) => void",signature:{arguments:[{type:{name:"string"},name:"componentId"}],return:{name:"void"}}},description:""},componentsOptions:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"{ id: string; label: string }[]"},description:""},onCreate:{required:!1,tsType:{name:"signature",type:"function",raw:"(componentId: string, text: string, assignedTo?: string | null) => Promise<void> | void",signature:{arguments:[{type:{name:"string"},name:"componentId"},{type:{name:"string"},name:"text"},{type:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},name:"assignedTo"}],return:{name:"union",raw:"Promise<void> | void",elements:[{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"void"}]}}},description:""},shop:{required:!0,tsType:{name:"string"},description:""},me:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},mentionPeople:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"Optional list of users/handles to power @mentions suggestions."}}};var next_auth_react=__webpack_require__("../../node_modules/.pnpm/next-auth@4.24.11_next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+t_150b50f8e34ca3d390380cb6edee750a/node_modules/next-auth/react/index.js");var CommentsToolbar=__webpack_require__("../../packages/ui/src/components/cms/page-builder/comments/CommentsToolbar.tsx");function CommentsPinsLayer({threads,visibleThreads,positionsRef,dragId,dragPos,onStartDrag,onOpen}){return(0,jsx_runtime.jsxs)("div",{className:"pointer-events-none relative inset-0",children:[visibleThreads.map((t,i)=>{const comp=positionsRef.current[t.componentId];if(!comp)return null;var _t_pos;const rel=dragId===t.id&&!!dragPos?dragPos:null!==(_t_pos=t.pos)&&void 0!==_t_pos?_t_pos:null,pinLeft=comp.left+(rel?rel.x*comp.width:8),pinTop=comp.top+(rel?rel.y*comp.height:8);return(0,jsx_runtime.jsx)("button",{type:"button",className:"pointer-events-auto absolute -translate-y-1/2 translate-x-1/2 rounded-full border px-2 py-1 text-xs shadow "+(t.resolved?"bg-green-200":"bg-amber-200"),style:{left:pinLeft,top:pinTop,cursor:"grab"},onMouseDown:e=>{0===e.button&&(onStartDrag(t.id),e.preventDefault(),e.stopPropagation())},onClick:()=>onOpen(t.id),title:`Comment on ${t.componentId}`,children:i+1},t.id)}),(()=>{const counts=new Map;return threads.forEach(t=>{var _counts_get;return counts.set(t.componentId,(null!==(_counts_get=counts.get(t.componentId))&&void 0!==_counts_get?_counts_get:0)+(t.resolved?0:1))}),Array.from(counts.entries()).map(([cid,count])=>{if(!count)return null;const comp=positionsRef.current[cid];return comp?(0,jsx_runtime.jsx)("div",{className:"pointer-events-none absolute h-5 w-5 -translate-y-1/2 translate-x-1/2 rounded-full bg-red-500 text-center text-xs leading-5 text-white",style:{left:comp.left+comp.width-6,top:comp.top+6},title:`${count} unresolved comments`,children:count},`badge-${cid}`):null})})()]})}const comments_CommentsPinsLayer=CommentsPinsLayer;function UndoToast({lastDeleted,onRestore,onDismiss}){const t=(0,src.c3)();return lastDeleted?(0,jsx_runtime.jsx)(atoms.y8,{open:!!lastDeleted,onClose:onDismiss,onClick:()=>{onRestore()},message:t("comments.threadDeletedTapToUndo")}):null}CommentsPinsLayer.__docgenInfo={description:"",methods:[],displayName:"CommentsPinsLayer",props:{threads:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  id: string;\n  componentId: string;\n  resolved: boolean;\n  assignedTo?: string | null;\n  messages: ThreadMessage[];\n  pos?: { x: number; y: number } | null;\n  createdAt?: string;\n  updatedAt?: string;\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"componentId",value:{name:"string",required:!0}},{key:"resolved",value:{name:"boolean",required:!0}},{key:"assignedTo",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"messages",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; text: string; ts: string }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"text",value:{name:"string",required:!0}},{key:"ts",value:{name:"string",required:!0}}]}}],raw:"ThreadMessage[]",required:!0}},{key:"pos",value:{name:"union",raw:"{ x: number; y: number } | null",elements:[{name:"signature",type:"object",raw:"{ x: number; y: number }",signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]}},{name:"null"}],required:!1}},{key:"createdAt",value:{name:"string",required:!1}},{key:"updatedAt",value:{name:"string",required:!1}}]}}],raw:"Thread[]"},description:""},visibleThreads:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  id: string;\n  componentId: string;\n  resolved: boolean;\n  assignedTo?: string | null;\n  messages: ThreadMessage[];\n  pos?: { x: number; y: number } | null;\n  createdAt?: string;\n  updatedAt?: string;\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"componentId",value:{name:"string",required:!0}},{key:"resolved",value:{name:"boolean",required:!0}},{key:"assignedTo",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"messages",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; text: string; ts: string }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"text",value:{name:"string",required:!0}},{key:"ts",value:{name:"string",required:!0}}]}}],raw:"ThreadMessage[]",required:!0}},{key:"pos",value:{name:"union",raw:"{ x: number; y: number } | null",elements:[{name:"signature",type:"object",raw:"{ x: number; y: number }",signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]}},{name:"null"}],required:!1}},{key:"createdAt",value:{name:"string",required:!1}},{key:"updatedAt",value:{name:"string",required:!1}}]}}],raw:"Thread[]"},description:""},positionsRef:{required:!0,tsType:{name:"ReactMutableRefObject",raw:"React.MutableRefObject<PositionsMap>",elements:[{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:"{ left: number; top: number; width: number; height: number }",signature:{properties:[{key:"left",value:{name:"number",required:!0}},{key:"top",value:{name:"number",required:!0}},{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]}}],raw:"Record<string, ComponentRect>"}]},description:""},dragId:{required:!0,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},dragPos:{required:!0,tsType:{name:"union",raw:"Pos | null",elements:[{name:"signature",type:"object",raw:"{ x: number; y: number }",signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]}},{name:"null"}]},description:""},onStartDrag:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},onOpen:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""}}};const comments_UndoToast=UndoToast;UndoToast.__docgenInfo={description:"",methods:[],displayName:"UndoToast",props:{lastDeleted:{required:!0,tsType:{name:"union",raw:"Thread | null",elements:[{name:"signature",type:"object",raw:"{\n  id: string;\n  componentId: string;\n  resolved: boolean;\n  assignedTo?: string | null;\n  messages: ThreadMessage[];\n  pos?: { x: number; y: number } | null;\n  createdAt?: string;\n  updatedAt?: string;\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"componentId",value:{name:"string",required:!0}},{key:"resolved",value:{name:"boolean",required:!0}},{key:"assignedTo",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"messages",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; text: string; ts: string }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"text",value:{name:"string",required:!0}},{key:"ts",value:{name:"string",required:!0}}]}}],raw:"ThreadMessage[]",required:!0}},{key:"pos",value:{name:"union",raw:"{ x: number; y: number } | null",elements:[{name:"signature",type:"object",raw:"{ x: number; y: number }",signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]}},{name:"null"}],required:!1}},{key:"createdAt",value:{name:"string",required:!1}},{key:"updatedAt",value:{name:"string",required:!1}}]}},{name:"null"}]},description:""},onRestore:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void | Promise<void>",signature:{arguments:[],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},onDismiss:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const comments_useAltClickCreate=function useAltClickCreate(canvasRef,create,onAfterCreate){(0,react.useEffect)(()=>{const canvas=canvasRef.current;if(!canvas)return;const handler=async e=>{var _e_target;if(!(e instanceof MouseEvent))return;if(!e.altKey||0!==e.button)return;const target=null===(_e_target=e.target)||void 0===_e_target?void 0:_e_target.closest("[data-component-id]");if(!target)return;const compId=target.getAttribute("data-component-id");if(!compId)return;const rect=target.getBoundingClientRect(),x=(e.clientX-rect.left)/Math.max(1,rect.width),y=(e.clientY-rect.top)/Math.max(1,rect.height),text=window.prompt("Comment:");text&&text.trim()&&(await create(compId,text.trim(),{pos:{x,y}}),await onAfterCreate(),e.preventDefault(),e.stopPropagation())};return canvas.addEventListener("click",handler,!0),()=>canvas.removeEventListener("click",handler,!0)},[canvasRef,create,onAfterCreate])};var CommentsLayer_console=__webpack_require__("../../node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");function CommentsLayer({canvasRef,components,shop,pageId,selectedIds,onSelectIds}){var _session_user,_session_user1,_session_user2,_session_user3,_session_user4,_session_user5;const t=(0,src.c3)(),[threads,setThreads]=(0,react.useState)([]),[selectedId,setSelectedId]=(0,react.useState)(null),[drawerOpen,setDrawerOpen]=(0,react.useState)(!1),[showResolved,setShowResolved]=(0,react.useState)(!0),[lastDeleted,setLastDeleted]=(0,react.useState)(null),{positions}=function usePositions(canvasRef,deps=[]){const positions=(0,react.useRef)({}),recalcPositions=(0,react.useCallback)(()=>{const canvas=canvasRef.current;if(!canvas)return;const canvasRect=canvas.getBoundingClientRect(),map={};canvas.querySelectorAll("[data-component-id]").forEach(el=>{const id=el.getAttribute("data-component-id");if(!id)return;const r=el.getBoundingClientRect();map[id]={left:Math.max(0,r.left-canvasRect.left),top:Math.max(0,r.top-canvasRect.top),width:r.width,height:r.height}}),positions.current=map},[canvasRef]);return(0,react.useEffect)(()=>{recalcPositions();const handle=()=>recalcPositions();window.addEventListener("resize",handle);const t=setInterval(handle,500);return()=>{window.removeEventListener("resize",handle),clearInterval(t)}},[recalcPositions,...deps]),{positions,recalcPositions}}(canvasRef,[components]),{data:session}=(0,next_auth_react.useSession)();var _session_user_email,_ref;const meId=null!==(_ref=null!==(_session_user_email=null==session||null===(_session_user=session.user)||void 0===_session_user?void 0:_session_user.email)&&void 0!==_session_user_email?_session_user_email:null==session||null===(_session_user1=session.user)||void 0===_session_user1?void 0:_session_user1.name)&&void 0!==_ref?_ref:"me";var _session_user_name,_ref1;const meLabel=null!==(_ref1=null!==(_session_user_name=null==session||null===(_session_user2=session.user)||void 0===_session_user2?void 0:_session_user2.name)&&void 0!==_session_user_name?_session_user_name:null==session||null===(_session_user3=session.user)||void 0===_session_user3?void 0:_session_user3.email)&&void 0!==_ref1?_ref1:"Me";var _selectedIds_;const{peers}=(0,usePresence.A)({shop,pageId,meId,label:meLabel,selectedIds,editingId:null!==(_selectedIds_=selectedIds[0])&&void 0!==_selectedIds_?_selectedIds_:null}),{loadThreads,patchThread,deleteThread,createThread}=function useCommentsApi(shop,pageId){const loadThreads=(0,react.useCallback)(async()=>{const res=await fetch(`/api/comments/${shop}/${pageId}`),json=await res.json();return(Array.isArray(json)?json:[]).map(item=>{const t=item,posRaw=t.pos,pos=posRaw&&"object"==typeof posRaw?{x:Number(posRaw.x)||0,y:Number(posRaw.y)||0}:null,messages=Array.isArray(t.messages)?t.messages:[];var _t_id,_t_componentId;return{id:String(null!==(_t_id=t.id)&&void 0!==_t_id?_t_id:""),componentId:String(null!==(_t_componentId=t.componentId)&&void 0!==_t_componentId?_t_componentId:""),resolved:Boolean(t.resolved),assignedTo:null!=t.assignedTo?String(t.assignedTo):null,messages,pos,createdAt:"string"==typeof t.createdAt?t.createdAt:void 0,updatedAt:"string"==typeof t.updatedAt?t.updatedAt:void 0}})},[shop,pageId]);return{loadThreads,patchThread:(0,react.useCallback)(async(id,body)=>{await fetch(`/api/comments/${shop}/${pageId}/${id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(body)})},[shop,pageId]),deleteThread:(0,react.useCallback)(async id=>{await fetch(`/api/comments/${shop}/${pageId}/${id}`,{method:"DELETE"})},[shop,pageId]),createThread:(0,react.useCallback)(async(componentId,text,extra)=>{var _extra_assignedTo,_extra_pos;const res=await fetch(`/api/comments/${shop}/${pageId}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId,text,assignedTo:null!==(_extra_assignedTo=null==extra?void 0:extra.assignedTo)&&void 0!==_extra_assignedTo?_extra_assignedTo:void 0,pos:null!==(_extra_pos=null==extra?void 0:extra.pos)&&void 0!==_extra_pos?_extra_pos:void 0})}),json=await res.json();return{ok:res.ok,json}},[shop,pageId])}}(shop,pageId),load=(0,react.useCallback)(async()=>{try{setThreads(await loadThreads())}catch(e){}},[loadThreads]);(0,react.useEffect)(()=>{load()},[load]);const mentionPeople=function useMentionPeople(){const[mentionPeople,setMentionPeople]=(0,react.useState)([]);return(0,react.useEffect)(()=>{(async()=>{try{const res=await fetch("/cms/api/rbac/users"),data=await res.json(),arr=Array.isArray(data)?data:Array.isArray(null==data?void 0:data.users)?data.users:[];setMentionPeople(arr.filter(x=>"string"==typeof x&&x.trim()).map(x=>x.trim()))}catch(e){}})()},[]),mentionPeople}(),patchThreadSafely=(0,react.useCallback)(async(id,body,options)=>{try{await patchThread(id,body),(null==options?void 0:options.reload)&&await load()}catch(error){CommentsLayer_console.error("cms.builder.comments.patchThreadFailed",error)}},[patchThread,load]),patchPosition=(0,react.useCallback)(async(id,body)=>{await patchThreadSafely(id,body,{reload:!0})},[patchThreadSafely]),{dragId,dragPos,startDrag}=function useDragPins(canvasRef,positionsRef,threads,patch){const[dragId,setDragId]=(0,react.useState)(null),[dragPos,setDragPos]=(0,react.useState)(null);return(0,react.useEffect)(()=>{const onMove=e=>{if(!dragId)return;const thread=threads.find(t=>t.id===dragId);if(!thread)return;const comp=positionsRef.current[thread.componentId],canvas=canvasRef.current;if(!comp||!canvas)return;const canvasRect=canvas.getBoundingClientRect(),clientX=e.clientX-canvasRect.left-comp.left,clientY=e.clientY-canvasRect.top-comp.top,x=Math.min(1,Math.max(0,clientX/Math.max(1,comp.width))),y=Math.min(1,Math.max(0,clientY/Math.max(1,comp.height)));setDragPos({x,y})},onUp=async()=>{dragId&&dragPos&&await patch(dragId,{pos:dragPos}),setDragId(null),setDragPos(null)};return window.addEventListener("mousemove",onMove),window.addEventListener("mouseup",onUp,!0),()=>{window.removeEventListener("mousemove",onMove),window.removeEventListener("mouseup",onUp,!0)}},[dragId,dragPos,threads,canvasRef,positionsRef,patch]),{dragId,dragPos,startDrag:id=>setDragId(id)}}(canvasRef,positions,threads,patchPosition),open=id=>{setSelectedId(id),setDrawerOpen(!0)};(0,react.useEffect)(()=>{const handler=e=>{try{var _ce_detail;const ce=e,id=null==ce||null===(_ce_detail=ce.detail)||void 0===_ce_detail?void 0:_ce_detail.id;id&&open(id)}catch(e){}};return window.addEventListener("pb:open-comment",handler),()=>window.removeEventListener("pb:open-comment",handler)},[]),(0,react.useEffect)(()=>{const toggle=()=>setDrawerOpen(v=>!v);return window.addEventListener("pb:toggle-comments",toggle),()=>window.removeEventListener("pb:toggle-comments",toggle)},[]);const jumpTo=componentId=>{const canvas=canvasRef.current;if(!canvas)return;const el=canvas.querySelector(`[data-component-id="${componentId}"]`);if(!el)return;try{el.scrollIntoView({block:"center",inline:"center",behavior:"smooth"})}catch(e){}try{null==onSelectIds||onSelectIds([componentId])}catch(e){}const prevOutline=el.style.outline,prevOffset=el.style.outlineOffset;el.classList.add("ring-2","ring-primary"),setTimeout(()=>{el.classList.remove("ring-2","ring-primary"),el.style.outline=prevOutline,el.style.outlineOffset=prevOffset},1200)};comments_useAltClickCreate(canvasRef,createThread,load);const visibleThreads=(0,react.useMemo)(()=>threads.filter(t=>showResolved||!t.resolved),[threads,showResolved]);var _session_user_email1,_ref2;return(0,jsx_runtime.jsx)("div",{className:"relative",children:(0,jsx_runtime.jsxs)("div",{className:"pointer-events-none absolute inset-0",children:[(0,jsx_runtime.jsx)(CommentsToolbar.A,{peers,showResolved,onShowResolvedChange:setShowResolved,onReload:load,onAddForSelected:async()=>{const id=selectedIds[0];if(!id)return;const text=window.prompt(t("cms.builder.comments.prompt.selectedComponent"));text&&text.trim()&&(await createThread(id,text.trim()),await load(),setDrawerOpen(!0))},canAddForSelected:!!selectedIds.length,onToggleDrawer:()=>setDrawerOpen(v=>!v),unresolvedCount:threads.filter(t=>!t.resolved).length}),(0,jsx_runtime.jsx)("div",{"data-pb-portal-root":!0,className:"absolute inset-0 pointer-events-none"}),(0,jsx_runtime.jsx)(comments_CommentsPinsLayer,{threads,visibleThreads,positionsRef:positions,dragId,dragPos,onStartDrag:id=>startDrag(id),onOpen:id=>open(id)}),(0,jsx_runtime.jsx)(CommentsDrawer,{open:drawerOpen,onOpenChange:setDrawerOpen,threads,selectedId,onSelect:id=>{setSelectedId(id);const t=threads.find(x=>x.id===id);t&&jumpTo(t.componentId)},onAddMessage:(id,text)=>(async(id,text)=>{id&&text.trim()&&await patchThreadSafely(id,{action:"addMessage",text:text.trim()},{reload:!0})})(id,text),onToggleResolved:(id,resolved)=>(async(id,resolved)=>{await patchThreadSafely(id,{resolved},{reload:!0})})(id,resolved),onAssign:(id,who)=>(async(id,assignee)=>{await patchThreadSafely(id,{assignedTo:null!=assignee?assignee:null},{reload:!0})})(id,who),onDelete:id=>(async id=>{const t=threads.find(x=>x.id===id)||null;setLastDeleted(t),await deleteThread(id),await load(),selectedId===id&&setSelectedId(null)})(id),onJumpTo:componentId=>jumpTo(componentId),componentsOptions:(()=>{const openCounts=new Map;threads.forEach(t=>{var _openCounts_get;return openCounts.set(t.componentId,(null!==(_openCounts_get=openCounts.get(t.componentId))&&void 0!==_openCounts_get?_openCounts_get:0)+(t.resolved?0:1))});const findType=(list,id)=>{for(const c of list){var _c_type;if(c.id===id)return null!==(_c_type=c.type)&&void 0!==_c_type?_c_type:null;const children=c.children;if(Array.isArray(children)){const t=findType(children,id);if(t)return t}}return null};return Object.keys(positions.current).map(id=>{const type=findType(components,id);var _openCounts_get;const cnt=null!==(_openCounts_get=openCounts.get(id))&&void 0!==_openCounts_get?_openCounts_get:0,suffix=cnt?` (${cnt} open)`:"";return{id,label:`${type?`${type}`:"Component"} • ${id.slice(-4)}${suffix}`}})})(),onCreate:async(componentId,text,assignedTo)=>{const{ok,json}=await createThread(componentId,text,{assignedTo:null!=assignedTo?assignedTo:void 0});await load();const data=json;ok&&(null==data?void 0:data.id)&&(setSelectedId(String(data.id)),setDrawerOpen(!0))},shop,mentionPeople,me:null!==(_ref2=null!==(_session_user_email1=null==session||null===(_session_user4=session.user)||void 0===_session_user4?void 0:_session_user4.email)&&void 0!==_session_user_email1?_session_user_email1:null==session||null===(_session_user5=session.user)||void 0===_session_user5?void 0:_session_user5.name)&&void 0!==_ref2?_ref2:null}),(0,jsx_runtime.jsx)(comments_UndoToast,{lastDeleted,onRestore:()=>{(async()=>{var _t_messages_;const t=lastDeleted;if(!t)return;const first=(null===(_t_messages_=t.messages[0])||void 0===_t_messages_?void 0:_t_messages_.text)||"Restored";var _t_assignedTo,_t_pos;const created=await createThread(t.componentId,first,{assignedTo:null!==(_t_assignedTo=t.assignedTo)&&void 0!==_t_assignedTo?_t_assignedTo:void 0,pos:null!==(_t_pos=t.pos)&&void 0!==_t_pos?_t_pos:void 0});if(created.ok){var _t_messages;const data=created.json;var _data_id;const newId=String(null!==(_data_id=null==data?void 0:data.id)&&void 0!==_data_id?_data_id:"");if(!newId)return;var _t_messages_length;for(let i=1;i<(null!==(_t_messages_length=null===(_t_messages=t.messages)||void 0===_t_messages?void 0:_t_messages.length)&&void 0!==_t_messages_length?_t_messages_length:0);i++){const m=t.messages[i];await patchThreadSafely(newId,{action:"addMessage",text:m.text})}t.resolved&&await patchThreadSafely(newId,{resolved:!0}),await load(),setSelectedId(newId),setDrawerOpen(!0)}setLastDeleted(null)})()},onDismiss:()=>setLastDeleted(null)})]})})}function PeerSelectionsOverlay({peers,positions}){return peers.length?(0,jsx_runtime.jsx)("div",{className:"pointer-events-none relative","aria-hidden":!0,children:(0,jsx_runtime.jsx)("div",{className:"absolute inset-0",children:peers.map(p=>(0,jsx_runtime.jsx)(react.Fragment,{children:(p.selectedIds||[]).map(cid=>{const box=positions[cid];return box?(0,jsx_runtime.jsx)("div",{className:"absolute rounded",style:{left:box.left,top:box.top,width:box.width,height:box.height,outline:`2px solid ${p.color}`,outlineOffset:"2px",boxShadow:`inset 0 0 0 1px ${p.color}66`},title:`${p.label} selected`},`${p.id}:${cid}`):null})},p.id))})}):null}function SoftLockBanner({selectedIds,softLocksById}){if(0===selectedIds.length)return null;const lock=softLocksById.get(selectedIds[0]);if(!lock)return null;return(0,jsx_runtime.jsx)("div",{className:"relative",children:(0,jsx_runtime.jsxs)("div",{className:"pointer-events-none absolute start-2 top-2 rounded bg-amber-100/90 px-2 py-1 text-xs text-amber-900 shadow",children:[lock.label," ","is editing this block"]})})}CommentsLayer.__docgenInfo={description:"",methods:[],displayName:"CommentsLayer",props:{canvasRef:{required:!0,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLDivElement | null>",elements:[{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}]}]},description:""},components:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},shop:{required:!0,tsType:{name:"string"},description:""},pageId:{required:!0,tsType:{name:"string"},description:""},selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onSelectIds:{required:!1,tsType:{name:"signature",type:"function",raw:"(ids: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"ids"}],return:{name:"void"}}},description:""}}},PeerSelectionsOverlay.__docgenInfo={description:"",methods:[],displayName:"PeerSelectionsOverlay",props:{peers:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  id: string;\n  label: string;\n  color: string;\n  selectedIds: string[];\n  editingId: string | null;\n  ts: number;\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"color",value:{name:"string",required:!0}},{key:"selectedIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!0}},{key:"editingId",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}},{key:"ts",value:{name:"number",required:!0}}]}}],raw:"PresencePeer[]"},description:""},positions:{required:!0,tsType:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:"{ left: number; top: number; width: number; height: number }",signature:{properties:[{key:"left",value:{name:"number",required:!0}},{key:"top",value:{name:"number",required:!0}},{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]}}],raw:"Record<string, Rect>"},description:""}}},SoftLockBanner.__docgenInfo={description:"",methods:[],displayName:"SoftLockBanner",props:{selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},softLocksById:{required:!0,tsType:{name:"Map",elements:[{name:"string"},{name:"signature",type:"object",raw:"{\n  id: string;\n  label: string;\n  color: string;\n  selectedIds: string[];\n  editingId: string | null;\n  ts: number;\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"color",value:{name:"string",required:!0}},{key:"selectedIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!0}},{key:"editingId",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}},{key:"ts",value:{name:"number",required:!0}}]}}],raw:"Map<string, PresencePeer>"},description:""}}};function RulersOverlay({show=!1,canvasRef,step=50,viewport,contentWidth,contentAlign="center",contentAlignBase="center",contentAlignSource="base"}){const t=(0,src.c3)(),[size,setSize]=(0,react.useState)({w:0,h:0});(0,react.useEffect)(()=>{const el=null==canvasRef?void 0:canvasRef.current;if(!el)return;const update=()=>setSize({w:el.offsetWidth,h:el.offsetHeight});update();const ro="undefined"!=typeof ResizeObserver?new ResizeObserver(()=>update()):null;return ro&&ro.observe(el),()=>{ro&&ro.disconnect()}},[canvasRef]);const labelsX=(0,react.useMemo)(()=>{const arr=[];if(!size.w)return arr;for(let x=step;x<size.w;x+=step)arr.push(x);return arr},[size.w,step]),labelsY=(0,react.useMemo)(()=>{const arr=[];if(!size.h)return arr;for(let y=step;y<size.h;y+=step)arr.push(y);return arr},[size.h,step]),safeWidth=(val=>{if(!val)return null;const s=String(val).trim();if(s.endsWith("px"))return parseFloat(s.slice(0,-2))||0;if(s.endsWith("%")){const n=parseFloat(s.slice(0,-1))||0;return size.w>0?n/100*size.w:0}if(s.endsWith("rem")){return(parseFloat(s.slice(0,-3))||0)*(parseFloat(getComputedStyle(document.documentElement).fontSize||"16")||16)}const n=parseFloat(s);return Number.isFinite(n)?n:null})(contentWidth||void 0),safeLeft=null!=safeWidth&&Number.isFinite(safeWidth)?"left"===contentAlign?0:"right"===contentAlign?Math.max(0,size.w-safeWidth):Math.max(0,(size.w-safeWidth)/2):null;if(!show)return null;const major="hsl(var(--color-border) / 0.35)",minor="hsl(var(--color-border) / 0.2)";return(0,jsx_runtime.jsx)("div",{className:"pointer-events-none relative inset-0","data-cy":"pb-rulers-overlay",children:(0,jsx_runtime.jsxs)("div",{className:"absolute inset-0",children:[(0,jsx_runtime.jsx)("div",{"aria-hidden":!0,className:"absolute start-0 end-0 h-5",style:{backgroundImage:`repeating-linear-gradient(to right, ${minor}, ${minor} 1px, transparent 1px, transparent 10px), repeating-linear-gradient(to right, ${major}, ${major} 1px, transparent 1px, transparent 50px)`}}),(0,jsx_runtime.jsx)("div",{"aria-hidden":!0,className:"absolute top-0 bottom-0 w-5",style:{backgroundImage:`repeating-linear-gradient(to bottom, ${minor}, ${minor} 1px, transparent 1px, transparent 10px), repeating-linear-gradient(to bottom, ${major}, ${major} 1px, transparent 1px, transparent 50px)`}}),labelsX.map(x=>(0,jsx_runtime.jsx)("div",{className:"absolute top-0 text-xs text-muted-foreground",style:{left:x+2},children:x},`lx-${x}`)),labelsY.map(y=>(0,jsx_runtime.jsx)("div",{className:"absolute start-0 text-xs text-muted-foreground",style:{top:y+2},children:y},`ly-${y}`)),null!=safeWidth&&null!=safeLeft&&safeWidth>0&&(0,jsx_runtime.jsxs)("div",{"aria-hidden":!0,className:"absolute inset-y-0",children:[(0,jsx_runtime.jsx)("div",{className:"bg-red-500/5 absolute inset-y-0 start-0",style:{width:Math.max(0,safeLeft)}}),(0,jsx_runtime.jsx)("div",{className:"bg-red-500/5 absolute inset-y-0 end-0",style:{width:Math.max(0,size.w-(safeLeft+safeWidth))}}),(0,jsx_runtime.jsx)("div",{className:"bg-green-500/5 absolute inset-y-0 border-x border-green-500/40",style:{left:safeLeft,width:safeWidth}}),(0,jsx_runtime.jsx)("div",{className:"absolute top-2 start-1/2 -translate-x-1/2 rounded bg-black/60 px-2 py-0.5 text-xs text-white shadow dark:bg-white/70 dark:text-black opacity-100",children:(()=>{const viewportPrefix="desktop"===viewport?String(t("cms.builder.rulers.viewport.desktop")):"tablet"===viewport?String(t("cms.builder.rulers.viewport.tablet")):"mobile"===viewport?String(t("cms.builder.rulers.viewport.mobile")):"",alignLabel=String(t("left"===contentAlign?"cms.builder.align.left":"right"===contentAlign?"cms.builder.align.right":"cms.builder.align.center")),sourceLabel=String(t("desktop"===contentAlignSource?"cms.builder.source.desktop":"tablet"===contentAlignSource?"cms.builder.source.tablet":"mobile"===contentAlignSource?"cms.builder.source.mobile":"cms.builder.source.base")),baseSuffix="base"!==contentAlignSource&&contentAlignBase?`, ${t("cms.builder.rulers.basePrefix")} ${t(`cms.builder.align.${contentAlignBase}`)}`:"";return t("cms.builder.rulers.safeInfo",{viewport:viewportPrefix,width:Math.round(safeWidth),align:alignLabel,source:sourceLabel,baseSuffix})})()})]})]})})}RulersOverlay.__docgenInfo={description:"",methods:[],displayName:"RulersOverlay",props:{show:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},canvasRef:{required:!1,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLDivElement | null>",elements:[{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}]}]},description:""},step:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"50",computed:!1}},viewport:{required:!1,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:"Builder viewport (affects labels only)"},contentWidth:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:"Optional: when a Section is selected, its effective content width"},contentAlign:{required:!1,tsType:{name:"union",raw:'"left" | "center" | "right"',elements:[{name:"literal",value:'"left"'},{name:"literal",value:'"center"'},{name:"literal",value:'"right"'}]},description:"Optional: content alignment for safe zone positioning",defaultValue:{value:'"center"',computed:!1}},contentAlignBase:{required:!1,tsType:{name:"union",raw:'"left" | "center" | "right"',elements:[{name:"literal",value:'"left"'},{name:"literal",value:'"center"'},{name:"literal",value:'"right"'}]},description:"Base content alignment (used to annotate if override is active)",defaultValue:{value:'"center"',computed:!1}},contentAlignSource:{required:!1,tsType:{name:"union",raw:'"base" | "desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"base"'},{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:"Source of the effective alignment",defaultValue:{value:'"base"',computed:!1}}}};var gridSnap=__webpack_require__("../../packages/ui/src/components/cms/page-builder/gridSnap.ts");function MultiSelectOverlay({canvasRef,ids,gridEnabled=!1,gridCols,onApply,zoom=1}){const[bounds,setBounds]=(0,react.useState)(null),startParentBoundsRef=(0,react.useRef)(null),startMapRef=(0,react.useRef)({}),idToParentRef=(0,react.useRef)({}),groupBoundsRef=(0,react.useRef)(new Map),dragRef=(0,react.useRef)(null),[dragDelta,setDragDelta]=(0,react.useState)({dx:0,dy:0}),rafRef=(0,react.useRef)(null),lastEventRef=(0,react.useRef)(null);(0,react.useEffect)(()=>{if(!(null==canvasRef?void 0:canvasRef.current))return;const canvasRect=canvasRef.current.getBoundingClientRect(),map={},rects=[];if(idToParentRef.current={},groupBoundsRef.current=new Map,ids.forEach(id=>{const el=document.querySelector(`[data-component-id="${id}"]`);if(!el)return;const r=el.getBoundingClientRect(),left=(r.left-canvasRect.left)/Math.max(zoom,1e-4),top=(r.top-canvasRect.top)/Math.max(zoom,1e-4),width=el.offsetWidth,height=el.offsetHeight;var _el_offsetParent,_ref;const parent=null!==(_ref=null!==(_el_offsetParent=el.offsetParent)&&void 0!==_el_offsetParent?_el_offsetParent:el.parentElement)&&void 0!==_ref?_ref:void 0;parent&&(idToParentRef.current[id]=parent);const parentLeft=el.offsetLeft,parentTop=el.offsetTop;if(map[id]={left:parentLeft,top:parentTop,width,height},parent){const gb=groupBoundsRef.current.get(parent),right=parentLeft+width,bottom=parentTop+height;if(gb){const minL=Math.min(gb.left,parentLeft),minT=Math.min(gb.top,parentTop),maxR=Math.max(gb.left+gb.width,right),maxB=Math.max(gb.top+gb.height,bottom);groupBoundsRef.current.set(parent,{left:minL,top:minT,width:maxR-minL,height:maxB-minT})}else groupBoundsRef.current.set(parent,{left:parentLeft,top:parentTop,width,height})}rects.push({left,top,width,height})}),startMapRef.current=map,Object.keys(map).length>0){const minPX=Math.min(...Object.values(map).map(m=>m.left)),minPY=Math.min(...Object.values(map).map(m=>m.top)),maxPX=Math.max(...Object.values(map).map(m=>m.left+m.width)),maxPY=Math.max(...Object.values(map).map(m=>m.top+m.height));startParentBoundsRef.current={left:minPX,top:minPY,width:maxPX-minPX,height:maxPY-minPY}}else startParentBoundsRef.current=null;if(0===rects.length)return void setBounds(null);const minX=Math.min(...rects.map(r=>r.left)),minY=Math.min(...rects.map(r=>r.top)),maxX=Math.max(...rects.map(r=>r.left+r.width)),maxY=Math.max(...rects.map(r=>r.top+r.height));setBounds({left:minX,top:minY,width:maxX-minX,height:maxY-minY}),setDragDelta({dx:0,dy:0})},[ids,canvasRef,zoom]);const handlePointerDown=(e,handle=null)=>{e.stopPropagation(),dragRef.current={x:e.clientX,y:e.clientY,zoom};const onMove=ev=>{lastEventRef.current=ev,null==rafRef.current&&(rafRef.current=window.requestAnimationFrame(()=>{const last=lastEventRef.current;last&&(ev=>{if(!dragRef.current)return;var _dragRef_current_zoom;const startZoom=null!==(_dragRef_current_zoom=dragRef.current.zoom)&&void 0!==_dragRef_current_zoom?_dragRef_current_zoom:zoom,d=(0,coords.kf)({x:dragRef.current.x,y:dragRef.current.y},{x:ev.clientX,y:ev.clientY},startZoom);let dx=d.x,dy=d.y;if(gridEnabled&&(null==canvasRef?void 0:canvasRef.current)){const unit=canvasRef.current.offsetWidth/gridCols;dx=(0,gridSnap.E)(dx,unit)-(0,gridSnap.E)(0,unit),dy=(0,gridSnap.E)(dy,unit)-(0,gridSnap.E)(0,unit)}const out={};if(handle){const vis=bounds;if(!vis)return;let newWVis=vis.width,newHVis=vis.height;handle.includes("e")&&(newWVis=vis.width+dx),handle.includes("w")&&(newWVis=vis.width-dx),handle.includes("s")&&(newHVis=vis.height+dy),handle.includes("n")&&(newHVis=vis.height-dy);const sx=handle.includes("e")||handle.includes("w")?Math.max(.01,newWVis/vis.width):1,sy=handle.includes("n")||handle.includes("s")?Math.max(.01,newHVis/vis.height):1;Object.entries(startMapRef.current).forEach(([id,p])=>{const parent=idToParentRef.current[id],start=parent?groupBoundsRef.current.get(parent):void 0;if(!start)return;const anchorX=handle.includes("w")?start.left+start.width:start.left,anchorY=handle.includes("n")?start.top+start.height:start.top,newLeft=anchorX+(p.left-start.left)*sx,newTop=anchorY+(p.top-start.top)*sy,newWidth=p.width*sx,newHeight=p.height*sy,patch={};1!==sx&&(patch.left=`${Math.round(newLeft)}px`,patch.width=`${Math.round(newWidth)}px`),1!==sy&&(patch.top=`${Math.round(newTop)}px`,patch.height=`${Math.round(newHeight)}px`),out[id]=patch}),setDragDelta({dx:0,dy:0})}else setDragDelta({dx,dy}),Object.entries(startMapRef.current).forEach(([id,p])=>{const parent=idToParentRef.current[id],maxLeft=parent?Math.max(0,parent.offsetWidth-p.width):null,maxTop=parent?Math.max(0,parent.offsetHeight-p.height):null,nextL=p.left+dx,nextT=p.top+dy,clampedL=null==maxLeft?nextL:Math.min(Math.max(0,nextL),maxLeft),clampedT=null==maxTop?nextT:Math.min(Math.max(0,nextT),maxTop);out[id]={left:`${Math.round(clampedL)}px`,top:`${Math.round(clampedT)}px`}});onApply(out)})(last),rafRef.current=null}))},onUp=()=>{dragRef.current=null;try{window.removeEventListener("pointermove",onMoveEvent)}catch(e){}if(window.removeEventListener("pointerup",onUp),window.removeEventListener("keydown",onKey),window.removeEventListener("blur",onUp),null!=rafRef.current){try{cancelAnimationFrame(rafRef.current)}catch(e){}rafRef.current=null}},onKey=ke=>{"Escape"===ke.key&&onUp()},onMoveEvent=ev=>onMove(ev);try{window.addEventListener("pointermove",onMoveEvent,{passive:!0})}catch(e){window.addEventListener("pointermove",onMoveEvent)}window.addEventListener("pointerup",onUp),window.addEventListener("keydown",onKey),window.addEventListener("blur",onUp)},overlayStyle=(0,react.useMemo)(()=>{if(!bounds)return;const{left,top,width,height}=bounds;return{left:left+dragDelta.dx,top:top+dragDelta.dy,width,height}},[bounds,dragDelta]);return bounds?(0,jsx_runtime.jsx)("div",{className:"relative",children:(0,jsx_runtime.jsxs)("div",{className:"absolute",style:overlayStyle,children:[(0,jsx_runtime.jsx)("div",{className:"absolute inset-0 rounded border-2 border-dashed border-primary/70",onPointerDown:e=>handlePointerDown(e,null),role:"button","aria-label":"Move selection",title:"Drag to move selection"}),(0,jsx_runtime.jsx)("div",{onPointerDown:e=>handlePointerDown(e,"nw"),role:"button","aria-label":"Resize group from top-left",tabIndex:0,className:"absolute -top-1 -start-1 h-2 w-2 cursor-nwse-resize bg-primary focus-visible:outline focus-visible:outline-2 focus-visible:outline-primary"}),(0,jsx_runtime.jsx)("div",{onPointerDown:e=>handlePointerDown(e,"ne"),role:"button","aria-label":"Resize group from top-right",tabIndex:0,className:"absolute -top-1 -end-1 h-2 w-2 cursor-nesw-resize bg-primary focus-visible:outline focus-visible:outline-2 focus-visible:outline-primary"}),(0,jsx_runtime.jsx)("div",{onPointerDown:e=>handlePointerDown(e,"sw"),role:"button","aria-label":"Resize group from bottom-left",tabIndex:0,className:"absolute -bottom-1 -start-1 h-2 w-2 cursor-nesw-resize bg-primary focus-visible:outline focus-visible:outline-2 focus-visible:outline-primary"}),(0,jsx_runtime.jsx)("div",{onPointerDown:e=>handlePointerDown(e,"se"),role:"button","aria-label":"Resize group from bottom-right",tabIndex:0,className:"absolute -end-1 -bottom-1 h-2 w-2 cursor-nwse-resize bg-primary focus-visible:outline focus-visible:outline-2 focus-visible:outline-primary"}),(0,jsx_runtime.jsx)("div",{onPointerDown:e=>handlePointerDown(e,"n"),role:"button","aria-label":"Resize group from top",tabIndex:0,className:"absolute -top-1 start-1/2 h-2 w-3 -translate-x-1/2 cursor-ns-resize bg-primary focus-visible:outline focus-visible:outline-2 focus-visible:outline-primary"}),(0,jsx_runtime.jsx)("div",{onPointerDown:e=>handlePointerDown(e,"s"),role:"button","aria-label":"Resize group from bottom",tabIndex:0,className:"absolute -bottom-1 start-1/2 h-2 w-3 -translate-x-1/2 cursor-ns-resize bg-primary focus-visible:outline focus-visible:outline-2 focus-visible:outline-primary"}),(0,jsx_runtime.jsx)("div",{onPointerDown:e=>handlePointerDown(e,"w"),role:"button","aria-label":"Resize group from left",tabIndex:0,className:"absolute top-1/2 -start-1 h-3 w-2 -translate-y-1/2 cursor-ew-resize bg-primary focus-visible:outline focus-visible:outline-2 focus-visible:outline-primary"}),(0,jsx_runtime.jsx)("div",{onPointerDown:e=>handlePointerDown(e,"e"),role:"button","aria-label":"Resize group from right",tabIndex:0,className:"absolute top-1/2 -end-1 h-3 w-2 -translate-y-1/2 cursor-ew-resize bg-primary focus-visible:outline focus-visible:outline-2 focus-visible:outline-primary"})]})}):null}MultiSelectOverlay.__docgenInfo={description:"",methods:[],displayName:"MultiSelectOverlay",props:{canvasRef:{required:!1,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLDivElement | null>",elements:[{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}]}]},description:""},ids:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},viewport:{required:!0,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:""},gridEnabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},gridCols:{required:!0,tsType:{name:"number"},description:""},zoom:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},onApply:{required:!0,tsType:{name:"signature",type:"function",raw:"(patches: Record<string, { left?: string; top?: string; width?: string; height?: string }>) => void",signature:{arguments:[{type:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:"{ left?: string; top?: string; width?: string; height?: string }",signature:{properties:[{key:"left",value:{name:"string",required:!1}},{key:"top",value:{name:"string",required:!1}},{key:"width",value:{name:"string",required:!1}},{key:"height",value:{name:"string",required:!1}}]}}],raw:"Record<string, { left?: string; top?: string; width?: string; height?: string }>"},name:"patches"}],return:{name:"void"}}},description:""}}};var GridOverlay=__webpack_require__("../../packages/ui/src/components/cms/page-builder/GridOverlay.tsx");const SnapLine=({x=null,y=null})=>null===x&&null===y?null:(0,jsx_runtime.jsxs)("div",{className:"relative",children:[null!==x&&(0,jsx_runtime.jsx)("div",{className:"pointer-events-none absolute top-0 bottom-0 w-px bg-primary",style:{left:x}}),null!==y&&(0,jsx_runtime.jsx)("div",{className:"pointer-events-none absolute start-0 end-0 h-px bg-primary",style:{top:y}})]}),page_builder_SnapLine=SnapLine;SnapLine.__docgenInfo={description:"",methods:[],displayName:"SnapLine",props:{x:{required:!1,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:"X-coordinate for a vertical snap line",defaultValue:{value:"null",computed:!1}},y:{required:!1,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:"Y-coordinate for a horizontal snap line",defaultValue:{value:"null",computed:!1}}}};function Overlays(props){const{components,selectedIds,onSelectIds,canvasRef,shop,pageId,showComments,peers,positions,softLocksById,dropRect,showRulers,viewport,ruler,unlockedIds,hasLockedInSelection,gridCols,showGrid,snapEnabled,zoom,snapPosition,marquee,showBaseline,baselineStep,onMultiSelectApply}=props;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(SelectionBreadcrumb,{components,selectedIds,onSelectIds}),(0,jsx_runtime.jsx)(CommentsHelpLauncher,{}),shop&&pageId&&showComments&&(0,jsx_runtime.jsx)(CommentsLayer,{canvasRef:null!=canvasRef?canvasRef:{current:null},components,shop:null!=shop?shop:"",pageId:null!=pageId?pageId:"",selectedIds,onSelectIds}),peers.length>0&&(0,jsx_runtime.jsx)(PeerSelectionsOverlay,{peers,positions}),(0,jsx_runtime.jsx)(SoftLockBanner,{selectedIds,softLocksById}),dropRect&&(0,jsx_runtime.jsx)("div",{className:"relative",children:(0,jsx_runtime.jsx)("div",{className:"pointer-events-none absolute rounded border-2 border-primary/50 bg-primary/10",style:{left:dropRect.left,top:dropRect.top,width:dropRect.width,height:dropRect.height}})}),(0,jsx_runtime.jsx)(RulersOverlay,{show:showRulers,canvasRef,step:100,viewport,contentWidth:ruler.contentWidth,contentAlign:ruler.contentAlign,contentAlignBase:ruler.contentAlignBase,contentAlignSource:ruler.contentAlignSource}),selectedIds.length>1&&unlockedIds.length>0&&(0,jsx_runtime.jsx)(MultiSelectOverlay,{canvasRef,ids:unlockedIds,viewport,gridEnabled:null!=snapEnabled?snapEnabled:showGrid,gridCols,zoom,onApply:patches=>null==onMultiSelectApply?void 0:onMultiSelectApply(patches)}),selectedIds.length>1&&hasLockedInSelection&&(0,jsx_runtime.jsx)("div",{className:"relative",children:(0,jsx_runtime.jsx)("div",{className:"pointer-events-none absolute start-2 top-2 rounded bg-muted/70 px-2 py-1 text-xs text-muted-foreground",children:"Locked items are ignored during group move/resize"})}),showGrid&&(0,jsx_runtime.jsx)(GridOverlay.A,{gridCols,baselineStep:showBaseline?baselineStep:void 0}),(0,jsx_runtime.jsx)(page_builder_SnapLine,{x:snapPosition}),marquee.active&&marquee.rect&&(0,jsx_runtime.jsx)("div",{className:"relative",children:(0,jsx_runtime.jsx)("div",{className:"pointer-events-none absolute rounded border-2 border-primary/40 bg-primary/10",style:{left:marquee.rect.left,top:marquee.rect.top,width:marquee.rect.width,height:marquee.rect.height},"aria-hidden":!0})})]})}Overlays.__docgenInfo={description:"",methods:[],displayName:"Overlays",props:{components:{required:!0,tsType:{name:'Props["components"]',raw:'Props["components"]'},description:""},selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onSelectIds:{required:!0,tsType:{name:'Props["onSelectIds"]',raw:'Props["onSelectIds"]'},description:""},canvasRef:{required:!1,tsType:{name:'Props["canvasRef"]',raw:'Props["canvasRef"]'},description:""},shop:{required:!1,tsType:{name:'Props["shop"]',raw:'Props["shop"]'},description:""},pageId:{required:!1,tsType:{name:'Props["pageId"]',raw:'Props["pageId"]'},description:""},showComments:{required:!0,tsType:{name:'Props["showComments"]',raw:'Props["showComments"]'},description:""},peers:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  id: string;\n  label: string;\n  color: string;\n  selectedIds: string[];\n  editingId: string | null;\n  ts: number;\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"color",value:{name:"string",required:!0}},{key:"selectedIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!0}},{key:"editingId",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}},{key:"ts",value:{name:"number",required:!0}}]}}],raw:"PresencePeer[]"},description:""},positions:{required:!0,tsType:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:"{ left: number; top: number; width: number; height: number }",signature:{properties:[{key:"left",value:{name:"number",required:!0}},{key:"top",value:{name:"number",required:!0}},{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]}}],raw:"Record<string, Rect>"},description:""},softLocksById:{required:!0,tsType:{name:"Map",elements:[{name:"string"},{name:"signature",type:"object",raw:"{\n  id: string;\n  label: string;\n  color: string;\n  selectedIds: string[];\n  editingId: string | null;\n  ts: number;\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"color",value:{name:"string",required:!0}},{key:"selectedIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!0}},{key:"editingId",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}},{key:"ts",value:{name:"number",required:!0}}]}}],raw:"Map<string, PresencePeer>"},description:""},dropRect:{required:!0,tsType:{name:"union",raw:"{ left: number; top: number; width: number; height: number } | null",elements:[{name:"signature",type:"object",raw:"{ left: number; top: number; width: number; height: number }",signature:{properties:[{key:"left",value:{name:"number",required:!0}},{key:"top",value:{name:"number",required:!0}},{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]}},{name:"null"}]},description:""},showRulers:{required:!0,tsType:{name:'Props["showRulers"]',raw:'Props["showRulers"]'},description:""},viewport:{required:!0,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:""},ruler:{required:!0,tsType:{name:"signature",type:"object",raw:'{\n  contentWidth: string | null;\n  contentAlign?: "left" | "center" | "right";\n  contentAlignBase?: "left" | "center" | "right";\n  contentAlignSource?: "base" | "desktop" | "tablet" | "mobile";\n}',signature:{properties:[{key:"contentWidth",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}},{key:"contentAlign",value:{name:"union",raw:'"left" | "center" | "right"',elements:[{name:"literal",value:'"left"'},{name:"literal",value:'"center"'},{name:"literal",value:'"right"'}],required:!1}},{key:"contentAlignBase",value:{name:"union",raw:'"left" | "center" | "right"',elements:[{name:"literal",value:'"left"'},{name:"literal",value:'"center"'},{name:"literal",value:'"right"'}],required:!1}},{key:"contentAlignSource",value:{name:"union",raw:'"base" | "desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"base"'},{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}],required:!1}}]}},description:""},unlockedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},hasLockedInSelection:{required:!0,tsType:{name:"boolean"},description:""},gridCols:{required:!0,tsType:{name:"number"},description:""},showGrid:{required:!0,tsType:{name:"boolean"},description:""},snapEnabled:{required:!1,tsType:{name:"boolean"},description:""},zoom:{required:!0,tsType:{name:"number"},description:""},snapPosition:{required:!0,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:""},marquee:{required:!0,tsType:{name:"signature",type:"object",raw:"{\n  active: boolean;\n  rect?: { left: number; top: number; width: number; height: number } | null;\n}",signature:{properties:[{key:"active",value:{name:"boolean",required:!0}},{key:"rect",value:{name:"union",raw:"{ left: number; top: number; width: number; height: number } | null",elements:[{name:"signature",type:"object",raw:"{ left: number; top: number; width: number; height: number }",signature:{properties:[{key:"left",value:{name:"number",required:!0}},{key:"top",value:{name:"number",required:!0}},{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]}},{name:"null"}],required:!1}}]}},description:""},showBaseline:{required:!0,tsType:{name:"boolean"},description:""},baselineStep:{required:!0,tsType:{name:"number"},description:""},onMultiSelectApply:{required:!1,tsType:{name:"signature",type:"function",raw:"(patches: Record<string, Partial<{ left: string; top: string; width: string; height: string }>>) => void",signature:{arguments:[{type:{name:"Record",elements:[{name:"string"},{name:"Partial",elements:[{name:"signature",type:"object",raw:"{ left: string; top: string; width: string; height: string }",signature:{properties:[{key:"left",value:{name:"string",required:!0}},{key:"top",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!0}},{key:"height",value:{name:"string",required:!0}}]}}],raw:"Partial<{ left: string; top: string; width: string; height: string }>"}],raw:"Record<string, Partial<{ left: string; top: string; width: string; height: string }>>"},name:"patches"}],return:{name:"void"}}},description:""}}};var InlineInsert=__webpack_require__("../../packages/ui/src/components/cms/page-builder/InlineInsert.tsx"),CanvasItem=__webpack_require__("../../packages/ui/src/components/cms/page-builder/CanvasItem.tsx");function InsertPlaceholder({active,dropAllowed,snapPosition}){return active?(0,jsx_runtime.jsx)("div",{"data-placeholder":!0,className:(0,style.cn)("h-4 w-full rounded border-2 border-dashed transition-all duration-150 motion-reduce:transition-none",!1===dropAllowed?"border-danger bg-danger/10 ring-2 ring-danger":"border-primary bg-primary/10",null!==snapPosition&&(!1===dropAllowed?"ring-2 ring-danger":"ring-2 ring-primary"))}):null}function CanvasList(props){const t=(0,src.c3)(),{visibleComponents,toUnderlyingIndex,selectedIds,onSelectIds,dispatch,locale,snapEnabled,showGrid,gridCols,viewport,device,editor,zoom,showBaseline,baselineStep,dropAllowed,insertParentId,insertIndex,snapPosition,preferParentOnClick}=props;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[visibleComponents.map((c,i)=>(0,jsx_runtime.jsxs)("div",{className:"relative group",children:[(0,jsx_runtime.jsx)(InlineInsert.A,{index:i,context:"top",onInsert:(component,index)=>{const insertAt=toUnderlyingIndex(index);dispatch({type:"add",component,index:insertAt}),onSelectIds([component.id]);try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:t("pb.blockInserted")}))}catch(e){}}}),(0,jsx_runtime.jsx)(InsertPlaceholder,{active:void 0===insertParentId&&insertIndex===i,dropAllowed,snapPosition}),(0,jsx_runtime.jsx)(CanvasItem.A,{component:c,index:i,parentId:void 0,selectedIds,onSelect:(id,e)=>{if((null==e?void 0:e.metaKey)||(null==e?void 0:e.ctrlKey)||(null==e?void 0:e.shiftKey)){const exists=selectedIds.includes(id);onSelectIds(exists?selectedIds.filter(sid=>sid!==id):[...selectedIds,id])}else onSelectIds([id]);setTimeout(()=>{var _document_querySelector_focus,_document_querySelector;null===(_document_querySelector=document.querySelector(`[data-component-id="${id}"]`))||void 0===_document_querySelector||null===(_document_querySelector_focus=_document_querySelector.focus)||void 0===_document_querySelector_focus||_document_querySelector_focus.call(_document_querySelector)},0)},onRemove:()=>dispatch({type:"remove",id:c.id}),dispatch,locale,gridEnabled:null!=snapEnabled?snapEnabled:showGrid,gridCols,viewport,device,editor,zoom,baselineSnap:showBaseline,baselineStep,dropAllowed,insertParentId,insertIndex,preferParentOnClick})]},c.id)),(0,jsx_runtime.jsx)(InlineInsert.A,{index:visibleComponents.length,context:"top",onInsert:(component,index)=>{const insertAt=toUnderlyingIndex(index);dispatch({type:"add",component,index:insertAt}),onSelectIds([component.id]);try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:t("pb.blockInserted")}))}catch(e){}}}),(0,jsx_runtime.jsx)(InsertPlaceholder,{active:void 0===insertParentId&&insertIndex===visibleComponents.length,dropAllowed,snapPosition})]})}function EditableCanvas(props){const{components,selectedIds,onSelectIds,canvasRef,dragOver,setDragOver,onFileDrop,insertIndex,insertParentId,dispatch,locale,containerStyle,showGrid,gridCols,snapEnabled,showRulers,viewport,snapPosition,device,editor,shop,pageId,showComments,zoom,showBaseline,baselineStep,dropAllowed,preferParentOnClick=!1}=props,w=window;var _w___PB_USER_ID,_w___PB_USER_NAME,_selectedIds_;const{peers,softLocksById}=(0,usePresence.A)({shop:null!=shop?shop:null,pageId:null!=pageId?pageId:null,meId:(null!==(_w___PB_USER_ID=null==w?void 0:w.__PB_USER_ID)&&void 0!==_w___PB_USER_ID?_w___PB_USER_ID:null)||"me",label:(null!==(_w___PB_USER_NAME=null==w?void 0:w.__PB_USER_NAME)&&void 0!==_w___PB_USER_NAME?_w___PB_USER_NAME:null)||"Me",selectedIds,editingId:null!==(_selectedIds_=selectedIds[0])&&void 0!==_selectedIds_?_selectedIds_:null}),positions=function useSelectionPositions(canvasRef,deps){const[positions,setPositions]=(0,react.useState)({});return(0,react.useEffect)(()=>{const canvas=null==canvasRef?void 0:canvasRef.current;if(!canvas)return;const update=()=>{const rect=canvas.getBoundingClientRect(),map={};canvas.querySelectorAll("[data-component-id]").forEach(el=>{const id=el.getAttribute("data-component-id");if(!id)return;const r=el.getBoundingClientRect();map[id]={left:Math.max(0,r.left-rect.left),top:Math.max(0,r.top-rect.top),width:r.width,height:r.height}}),setPositions(map)};update();const int=window.setInterval(update,500);return window.addEventListener("resize",update),()=>{clearInterval(int),window.removeEventListener("resize",update)}},[null==canvasRef?void 0:canvasRef.current,deps]),positions}(canvasRef,components),{unlockedIds,hasLockedInSelection,lockedIds}=function useSelectionGrouping({components,selectedIds,editor}){const selectedComponents=(0,react.useMemo)(()=>(null!=selectedIds?selectedIds:[]).map(id=>utils_findById(components,id)).filter(Boolean),[components,selectedIds]),canGroupTransform=(0,react.useMemo)(()=>selectedComponents.length>1&&selectedComponents.every(c=>"absolute"===c.position),[selectedComponents]),hasLockedInSelection=(0,react.useMemo)(()=>selectedComponents.some(c=>{var _editor_c_id,_editor_c_id_locked,_ref;return null!==(_ref=null!==(_editor_c_id_locked=null==editor||null===(_editor_c_id=editor[c.id])||void 0===_editor_c_id?void 0:_editor_c_id.locked)&&void 0!==_editor_c_id_locked?_editor_c_id_locked:c.locked)&&void 0!==_ref&&_ref}),[editor,selectedComponents]),unlockedIds=(0,react.useMemo)(()=>selectedComponents.filter(c=>{var _editor_c_id,_editor_c_id_locked,_ref;const isLocked=null!==(_ref=null!==(_editor_c_id_locked=null==editor||null===(_editor_c_id=editor[c.id])||void 0===_editor_c_id?void 0:_editor_c_id.locked)&&void 0!==_editor_c_id_locked?_editor_c_id_locked:c.locked)&&void 0!==_ref&&_ref;return"absolute"===c.position&&!isLocked}).map(c=>c.id),[editor,selectedComponents]),lockedIds=(0,react.useMemo)(()=>selectedComponents.filter(c=>{var _editor_c_id,_editor_c_id_locked,_ref;return null!==(_ref=null!==(_editor_c_id_locked=null==editor||null===(_editor_c_id=editor[c.id])||void 0===_editor_c_id?void 0:_editor_c_id.locked)&&void 0!==_editor_c_id_locked?_editor_c_id_locked:c.locked)&&void 0!==_ref&&_ref}).map(c=>c.id),[editor,selectedComponents]);return{selectedComponents,canGroupTransform,hasLockedInSelection,unlockedIds,lockedIds}}({components,selectedIds,editor}),{groupAs,ungroup}=(0,useGroupingActions.A)({components,selectedIds,dispatch});var _selectedIds_length;!function useGroupEvents(groupAs,ungroup){(0,react.useEffect)(()=>{const onGroup=e=>{try{var _ce_detail;const kind=null==e||null===(_ce_detail=e.detail)||void 0===_ce_detail?void 0:_ce_detail.kind;kind&&groupAs(kind)}catch(e){}},onUngroup=()=>ungroup();return window.addEventListener("pb:group",onGroup),window.addEventListener("pb:ungroup",onUngroup),()=>{window.removeEventListener("pb:group",onGroup),window.removeEventListener("pb:ungroup",onUngroup)}},[groupAs,ungroup])}(groupAs,ungroup),function useDimLockedSelection({enabled,lockedIds}){(0,react.useEffect)(()=>{const dimmed=[];return enabled&&lockedIds.length>0&&lockedIds.forEach(id=>{const el=document.querySelector(`[data-component-id="${id}"]`);el&&(el.dataset.pbPrevOpacity=el.style.opacity,el.style.opacity="0.4",dimmed.push(el))}),()=>{dimmed.forEach(el=>{const prev=el.dataset.pbPrevOpacity;el.style.opacity=null!=prev?prev:"",el.dataset&&delete el.dataset.pbPrevOpacity})}},[enabled,lockedIds])}({enabled:(null!==(_selectedIds_length=null==selectedIds?void 0:selectedIds.length)&&void 0!==_selectedIds_length?_selectedIds_length:0)>1&&selectedIds.length>1&&unlockedIds.length>=0,lockedIds});const marquee=function useMarqueeSelect({canvasRef,zoom=1,editor,viewport,onSelectIds}){const[active,setActive]=(0,react.useState)(!1),[rect,setRect]=(0,react.useState)(null),startRef=(0,react.useRef)(null),baseSelectionRef=(0,react.useRef)(new Set),itemsRef=(0,react.useRef)([]),modeRef=(0,react.useRef)({}),t=(0,src.c3)(),buildItemsSnapshot=(0,react.useCallback)(()=>{const canvas=canvasRef.current;if(!canvas)return[];const canvasRect=canvas.getBoundingClientRect(),els=Array.from(canvas.querySelectorAll("[data-component-id]")),arr=[];for(const el of els){var _editor_id;const id=el.getAttribute("data-component-id");if(!id)continue;const locked=!!(null==editor||null===(_editor_id=editor[id])||void 0===_editor_id?void 0:_editor_id.locked),hidden=(0,isHiddenForViewport.E)(id,editor,el.hidden,viewport);if(locked||hidden)continue;const r=el.getBoundingClientRect(),rr=(0,coords.sc)({left:r.left,top:r.top,width:r.width,height:r.height},canvasRect,zoom);arr.push({id,rect:rr})}return arr},[canvasRef,editor,viewport,zoom]);return{active,rect,start:(0,react.useCallback)((e,currentSelected=[],mods={})=>{let ev;if(ev=e instanceof PointerEvent?e:e.nativeEvent,0!==ev.button)return;const target=ev.target;if(!target)return;if(target.closest('[role="listitem"]')||(node=>{if(!node)return!1;const tag=node.tagName;return"INPUT"===tag||"TEXTAREA"===tag||"SELECT"===tag||!!node.isContentEditable})(target))return;const canvas=canvasRef.current;if(!canvas)return;const cRect=canvas.getBoundingClientRect(),startPt=(0,coords.eG)({x:ev.clientX,y:ev.clientY},cRect,zoom);startRef.current=startPt,baseSelectionRef.current=new Set(currentSelected),itemsRef.current=buildItemsSnapshot(),modeRef.current={...mods},setActive(!0),setRect({left:startPt.x,top:startPt.y,width:0,height:0});const onMove=mv=>{if(!startRef.current)return;const curr=(0,coords.eG)({x:mv.clientX,y:mv.clientY},cRect,zoom),selRect={left:Math.min(startRef.current.x,curr.x),top:Math.min(startRef.current.y,curr.y),width:Math.abs(curr.x-startRef.current.x),height:Math.abs(curr.y-startRef.current.y)};setRect(selRect);const hits=new Set(itemsRef.current.filter(it=>(0,coords.TT)(selRect,it.rect)).map(it=>it.id)),base=baseSelectionRef.current;let next=[];if(modeRef.current.meta){const toggled=new Set(base);hits.forEach(id=>{toggled.has(id)?toggled.delete(id):toggled.add(id)}),next=Array.from(toggled)}else if(modeRef.current.shift){const union=new Set(base);hits.forEach(id=>union.add(id)),next=Array.from(union)}else next=Array.from(hits);onSelectIds(next);try{const noun=1===next.length?t("pb.noun.block"):t("pb.noun.blocks"),msg=t("pb.toast.selectedN",{count:next.length,noun});window.dispatchEvent(new CustomEvent("pb-live-message",{detail:String(msg)}))}catch(e){}},onUp=()=>{setActive(!1),startRef.current=null,setRect(null);try{window.removeEventListener("pointermove",onMove)}catch(e){}window.removeEventListener("pointerup",onUp),window.removeEventListener("keydown",onKey)},onKey=ke=>{"Escape"===ke.key&&onUp()};try{window.addEventListener("pointermove",onMove,{passive:!0})}catch(e){window.addEventListener("pointermove",onMove)}window.addEventListener("pointerup",onUp,{once:!0}),window.addEventListener("keydown",onKey)},[canvasRef,zoom,buildItemsSnapshot,onSelectIds,t])}}({canvasRef:null!=canvasRef?canvasRef:{current:null},zoom,editor,viewport,onSelectIds}),ruler=function useRulerProps({components,selectedIds,editor,viewport}){return{contentWidth:(0,react.useMemo)(()=>{const firstSel=selectedIds[0];if(!firstSel)return null;let node=utils_findById(components,firstSel);for(;node&&!isSection(node);){const parent=getParentOfId(components,node.id);if(!parent)break;node=parent}if(!isSection(node))return null;const sec=node;return"desktop"===viewport&&sec.contentWidthDesktop?sec.contentWidthDesktop:"tablet"===viewport&&sec.contentWidthTablet?sec.contentWidthTablet:"mobile"===viewport&&sec.contentWidthMobile?sec.contentWidthMobile:null!==(_sec_contentWidth=sec.contentWidth)&&void 0!==_sec_contentWidth?_sec_contentWidth:null;var _sec_contentWidth},[components,selectedIds.join(","),viewport,editor]),contentAlign:(0,react.useMemo)(()=>{const firstSel=selectedIds[0];if(!firstSel)return"center";let node=utils_findById(components,firstSel);for(;node&&!isSection(node);){const parent=getParentOfId(components,node.id);if(!parent)break;node=parent}if(!isSection(node))return"center";const sec=node;return"desktop"===viewport&&sec.contentAlignDesktop?sec.contentAlignDesktop:"tablet"===viewport&&sec.contentAlignTablet?sec.contentAlignTablet:"mobile"===viewport&&sec.contentAlignMobile?sec.contentAlignMobile:null!==(_sec_contentAlign=sec.contentAlign)&&void 0!==_sec_contentAlign?_sec_contentAlign:"center";var _sec_contentAlign},[components,selectedIds.join(","),viewport,editor]),contentAlignBase:(0,react.useMemo)(()=>{const firstSel=selectedIds[0];if(!firstSel)return"center";let node=utils_findById(components,firstSel);for(;node&&!isSection(node);){const parent=getParentOfId(components,node.id);if(!parent)break;node=parent}return isSection(node)&&null!==(_sec_contentAlign=node.contentAlign)&&void 0!==_sec_contentAlign?_sec_contentAlign:"center";var _sec_contentAlign},[components,selectedIds.join(",")]),contentAlignSource:(0,react.useMemo)(()=>{const firstSel=selectedIds[0];if(!firstSel)return"base";let node=utils_findById(components,firstSel);for(;node&&!isSection(node);){const parent=getParentOfId(components,node.id);if(!parent)break;node=parent}if(!isSection(node))return"base";const sec=node;return"desktop"===viewport&&sec.contentAlignDesktop?"desktop":"tablet"===viewport&&sec.contentAlignTablet?"tablet":"mobile"===viewport&&sec.contentAlignMobile?"mobile":"base"},[components,selectedIds.join(","),viewport])}}({components,selectedIds,editor,viewport}),{dropRect,handleDragOver,clearHighlight}=useDropHighlightState({preview:!1,canvasRef,zoom,setDragOver}),{assignCanvasRef,isCanvasOver}=function useCanvasRefs(canvasRef){const{setNodeRef:setCanvasDropRef,isOver:isCanvasOver}=(0,core_esm.zM)({id:"canvas",data:{}});return{assignCanvasRef:(0,react.useCallback)(node=>{setCanvasDropRef(node),canvasRef&&(canvasRef.current=node)},[setCanvasDropRef,canvasRef]),isCanvasOver}}(canvasRef),{visibleComponents,toUnderlyingIndex}=function useVisibleComponents(components,editor,viewport){const visibleComponents=components.filter(c=>!(0,isHiddenForViewport.E)(c.id,editor,c.hidden,viewport));return{visibleComponents,toUnderlyingIndex:uiIndex=>{if(uiIndex<visibleComponents.length){var _visibleComponents_uiIndex;const targetId=null===(_visibleComponents_uiIndex=visibleComponents[uiIndex])||void 0===_visibleComponents_uiIndex?void 0:_visibleComponents_uiIndex.id;if(targetId){const idx=components.findIndex(c=>c.id===targetId);return idx>=0?idx:components.length}}return components.length}}}(components,editor,viewport),onMultiSelectApply=(0,react.useMemo)(()=>patches=>{const widthKey="desktop"===viewport?"widthDesktop":"tablet"===viewport?"widthTablet":"widthMobile",heightKey="desktop"===viewport?"heightDesktop":"tablet"===viewport?"heightTablet":"heightMobile",leftKey="desktop"===viewport?"leftDesktop":"tablet"===viewport?"leftTablet":"leftMobile",topKey="desktop"===viewport?"topDesktop":"tablet"===viewport?"topTablet":"topMobile",allowed=new Set(unlockedIds);Object.entries(patches).forEach(([id,p])=>{if(!allowed.has(id))return;if(!p)return;const action={type:"resize",id};void 0!==p.left&&(action[leftKey]=p.left,action.left=p.left),void 0!==p.top&&(action[topKey]=p.top,action.top=p.top),void 0!==p.width&&(action[widthKey]=p.width,action.width=p.width),void 0!==p.height&&(action[heightKey]=p.height,action.height=p.height),dispatch(action)})},[viewport,unlockedIds,dispatch]);return(0,jsx_runtime.jsx)(sortable_esm.gB,{items:visibleComponents.map(c=>c.id),strategy:sortable_esm.kL,children:(0,jsx_runtime.jsxs)("div",{id:"canvas",ref:assignCanvasRef,style:containerStyle,role:"list","aria-label":"Canvas","data-cy":"pb-canvas",onPointerDown:e=>{"PointerEvent"in window&&marquee.start(e,selectedIds,{shift:e.shiftKey,meta:e.metaKey||e.ctrlKey})},onDrop:onFileDrop,onDragOver:handleDragOver,onDragLeave:clearHighlight,onDragEnd:clearHighlight,className:(0,style.cn)("relative mx-auto flex flex-col gap-4 rounded border",(dragOver||isCanvasOver)&&(!1===dropAllowed?"ring-2 ring-danger border-danger cursor-not-allowed":"ring-2 ring-primary")),children:[(0,jsx_runtime.jsx)(Overlays,{components,selectedIds,onSelectIds,canvasRef,shop,pageId,showComments,peers,positions,softLocksById,dropRect,showRulers,viewport,ruler,unlockedIds,hasLockedInSelection,gridCols,showGrid,snapEnabled,zoom,snapPosition,marquee:{active:marquee.active,rect:marquee.rect},showBaseline,baselineStep,onMultiSelectApply}),(0,jsx_runtime.jsx)(CanvasList,{components,visibleComponents,toUnderlyingIndex,selectedIds,onSelectIds,dispatch,locale,snapEnabled,showGrid,gridCols,viewport,device,editor,zoom,showBaseline,baselineStep,dropAllowed,insertParentId,insertIndex,snapPosition,preferParentOnClick}),(0,jsx_runtime.jsx)(SelectionQuickActions,{components,selectedIds,dispatch,canvasRef:null!=canvasRef?canvasRef:{current:null},viewport,disabled:hasLockedInSelection,zoom})]})})}CanvasList.__docgenInfo={description:"",methods:[],displayName:"CanvasList",props:{components:{required:!0,tsType:{name:'Props["components"]',raw:'Props["components"]'},description:""},visibleComponents:{required:!0,tsType:{name:'Props["components"]',raw:'Props["components"]'},description:""},toUnderlyingIndex:{required:!0,tsType:{name:"signature",type:"function",raw:"(uiIndex: number) => number",signature:{arguments:[{type:{name:"number"},name:"uiIndex"}],return:{name:"number"}}},description:""},selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onSelectIds:{required:!0,tsType:{name:'Props["onSelectIds"]',raw:'Props["onSelectIds"]'},description:""},dispatch:{required:!0,tsType:{name:'Props["dispatch"]',raw:'Props["dispatch"]'},description:""},locale:{required:!0,tsType:{name:'Props["locale"]',raw:'Props["locale"]'},description:""},snapEnabled:{required:!1,tsType:{name:'Props["snapEnabled"]',raw:'Props["snapEnabled"]'},description:""},showGrid:{required:!0,tsType:{name:'Props["showGrid"]',raw:'Props["showGrid"]'},description:""},gridCols:{required:!0,tsType:{name:'Props["gridCols"]',raw:'Props["gridCols"]'},description:""},viewport:{required:!0,tsType:{name:'Props["viewport"]',raw:'Props["viewport"]'},description:""},device:{required:!0,tsType:{name:'Props["device"]',raw:'Props["device"]'},description:""},editor:{required:!0,tsType:{name:'Props["editor"]',raw:'Props["editor"]'},description:""},zoom:{required:!0,tsType:{name:'Props["zoom"]',raw:'Props["zoom"]'},description:""},showBaseline:{required:!0,tsType:{name:'Props["showBaseline"]',raw:'Props["showBaseline"]'},description:""},baselineStep:{required:!0,tsType:{name:'Props["baselineStep"]',raw:'Props["baselineStep"]'},description:""},dropAllowed:{required:!1,tsType:{name:'Props["dropAllowed"]',raw:'Props["dropAllowed"]'},description:""},insertParentId:{required:!1,tsType:{name:'Props["insertParentId"]',raw:'Props["insertParentId"]'},description:""},insertIndex:{required:!0,tsType:{name:'Props["insertIndex"]',raw:'Props["insertIndex"]'},description:""},snapPosition:{required:!0,tsType:{name:'Props["snapPosition"]',raw:'Props["snapPosition"]'},description:""},preferParentOnClick:{required:!1,tsType:{name:'Props["preferParentOnClick"]',raw:'Props["preferParentOnClick"]'},description:""}}},EditableCanvas.__docgenInfo={description:"",methods:[],displayName:"EditableCanvas",props:{components:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onSelectIds:{required:!0,tsType:{name:"signature",type:"function",raw:"(ids: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"ids"}],return:{name:"void"}}},description:""},canvasRef:{required:!1,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLDivElement | null>",elements:[{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}]}]},description:""},dragOver:{required:!0,tsType:{name:"boolean"},description:""},setDragOver:{required:!0,tsType:{name:"signature",type:"function",raw:"(v: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"v"}],return:{name:"void"}}},description:""},onFileDrop:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: React.DragEvent<HTMLDivElement>) => void",signature:{arguments:[{type:{name:"ReactDragEvent",raw:"React.DragEvent<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},name:"e"}],return:{name:"void"}}},description:""},insertIndex:{required:!0,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:""},insertParentId:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},dispatch:{required:!0,tsType:{name:"signature",type:"function",raw:"(action: Action) => void",signature:{arguments:[{type:{name:"union",raw:"| ChangeAction\n| UndoAction\n| RedoAction\n| SetGridColsAction\n| SetBreakpointsAction\n| UpdateEditorAction",elements:[{name:"union",raw:"| AddAction\n| MoveAction\n| RemoveAction\n| DuplicateAction\n| UpdateAction\n| ResizeAction\n| SetAction",elements:[{name:"signature",type:"object",raw:'{\n  type: "add";\n  component: PageComponent;\n  parentId?: string;\n  index?: number;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"add"',required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!1}}]}},{name:"signature",type:"object",raw:'{\n  type: "move";\n  from: { parentId?: string; index: number };\n  to: { parentId?: string; index: number };\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"move"',required:!0}},{key:"from",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}},{key:"to",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "remove"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"remove"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "duplicate"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"duplicate"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update";\n  id: string;\n  patch: Partial<PageComponent>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"Partial<PageComponent>",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "resize";\n  id: string;\n  width?: string;\n  height?: string;\n  left?: string;\n  top?: string;\n  right?: string;\n  bottom?: string;\n  leftDesktop?: string;\n  leftTablet?: string;\n  leftMobile?: string;\n  topDesktop?: string;\n  topTablet?: string;\n  topMobile?: string;\n  widthDesktop?: string;\n  widthTablet?: string;\n  widthMobile?: string;\n  heightDesktop?: string;\n  heightTablet?: string;\n  heightMobile?: string;\n  marginDesktop?: string;\n  marginTablet?: string;\n  marginMobile?: string;\n  paddingDesktop?: string;\n  paddingTablet?: string;\n  paddingMobile?: string;\n  [key: string]: string | undefined;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"resize"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!1}},{key:"height",value:{name:"string",required:!1}},{key:"left",value:{name:"string",required:!1}},{key:"top",value:{name:"string",required:!1}},{key:"right",value:{name:"string",required:!1}},{key:"bottom",value:{name:"string",required:!1}},{key:"leftDesktop",value:{name:"string",required:!1}},{key:"leftTablet",value:{name:"string",required:!1}},{key:"leftMobile",value:{name:"string",required:!1}},{key:"topDesktop",value:{name:"string",required:!1}},{key:"topTablet",value:{name:"string",required:!1}},{key:"topMobile",value:{name:"string",required:!1}},{key:"widthDesktop",value:{name:"string",required:!1}},{key:"widthTablet",value:{name:"string",required:!1}},{key:"widthMobile",value:{name:"string",required:!1}},{key:"heightDesktop",value:{name:"string",required:!1}},{key:"heightTablet",value:{name:"string",required:!1}},{key:"heightMobile",value:{name:"string",required:!1}},{key:"marginDesktop",value:{name:"string",required:!1}},{key:"marginTablet",value:{name:"string",required:!1}},{key:"marginMobile",value:{name:"string",required:!1}},{key:"paddingDesktop",value:{name:"string",required:!1}},{key:"paddingTablet",value:{name:"string",required:!1}},{key:"paddingMobile",value:{name:"string",required:!1}},{key:{name:"string"},value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set"; components: PageComponent[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set"',required:!0}},{key:"components",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"PageComponent[]",required:!0}}]}}]},{name:"signature",type:"object",raw:'{ type: "undo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"undo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "redo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"redo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-grid-cols"; gridCols: number }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-grid-cols"',required:!0}},{key:"gridCols",value:{name:"number",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-breakpoints"; breakpoints: { id: string; label: string; min?: number; max?: number }[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-breakpoints"',required:!0}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update-editor";\n  id: string;\n  patch: Partial<EditorFlags>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update-editor"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  hiddenDeviceIds?: string[];\n  /** Legacy single strategy (mobile); kept for backwards-compat */\n  stackStrategy?: "default" | "reverse" | "custom";\n  /** Per-device stacking strategies */\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  /** Custom orders per device (used when corresponding strategy === "custom") */\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n  global?: {\n    id: string;\n    overrides?: unknown;\n    pinned?: boolean;\n    editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n  };\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"hiddenDeviceIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Legacy single strategy (mobile); kept for backwards-compat"},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Per-device stacking strategies"},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1},description:'Custom orders per device (used when corresponding strategy === "custom")'},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}},{key:"global",value:{name:"signature",type:"object",raw:'{\n  id: string;\n  overrides?: unknown;\n  pinned?: boolean;\n  editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"overrides",value:{name:"unknown",required:!1}},{key:"pinned",value:{name:"boolean",required:!1}},{key:"editingSize",value:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]}],raw:'Record<"desktop" | "tablet" | "mobile", number | null>'}],raw:'Partial<Record<"desktop" | "tablet" | "mobile", number | null>>',required:!1}}]},required:!1}}]}}],raw:"Partial<EditorFlags>",required:!0}}]}}]},name:"action"}],return:{name:"void"}}},description:""},locale:{required:!0,tsType:{name:"Locale"},description:""},containerStyle:{required:!0,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:""},showGrid:{required:!0,tsType:{name:"boolean"},description:""},gridCols:{required:!0,tsType:{name:"number"},description:""},snapEnabled:{required:!1,tsType:{name:"boolean"},description:""},showRulers:{required:!0,tsType:{name:"boolean"},description:""},viewport:{required:!0,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:""},snapPosition:{required:!0,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:""},device:{required:!1,tsType:{name:"signature",type:"object",raw:'{\n  id: string;\n  label: string;\n  width: number;\n  height: number;\n  type: "desktop" | "tablet" | "mobile";\n  orientation: "portrait" | "landscape";\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}},{key:"type",value:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}],required:!0}},{key:"orientation",value:{name:"union",raw:'"portrait" | "landscape"',elements:[{name:"literal",value:'"portrait"'},{name:"literal",value:'"landscape"'}],required:!0}}]}},description:""},editor:{required:!1,tsType:{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},description:""},shop:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},pageId:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},showComments:{required:!0,tsType:{name:"boolean"},description:""},zoom:{required:!0,tsType:{name:"number"},description:""},showBaseline:{required:!0,tsType:{name:"boolean"},description:""},baselineStep:{required:!0,tsType:{name:"number"},description:""},dropAllowed:{required:!1,tsType:{name:"union",raw:"boolean | null",elements:[{name:"boolean"},{name:"null"}]},description:""},preferParentOnClick:{required:!1,tsType:{name:"boolean"},description:""}}};const PageCanvas=({components,selectedIds=[],onSelectIds=()=>{},canvasRef,dragOver=!1,setDragOver=()=>{},onFileDrop=()=>{},insertIndex=null,dispatch=()=>{},locale,containerStyle,showGrid=!1,gridCols=1,snapEnabled,showRulers=!1,viewport,snapPosition=null,device,preview=!1,editor,shop,pageId,showComments=!0,zoom=1,showBaseline=!1,baselineStep=8,dropAllowed=null,insertParentId,preferParentOnClick=!1})=>preview?(0,jsx_runtime.jsx)(PreviewCanvas,{components,canvasRef,containerStyle,editor,viewport,locale}):(0,jsx_runtime.jsx)(EditableCanvas,{components,selectedIds,onSelectIds,canvasRef,dragOver,setDragOver,onFileDrop,insertIndex,insertParentId,dispatch,locale,containerStyle,showGrid,gridCols,snapEnabled,showRulers,viewport,snapPosition,device,editor,shop,pageId,showComments,zoom,showBaseline,baselineStep,dropAllowed,preferParentOnClick}),page_builder_PageCanvas=PageCanvas;PageCanvas.__docgenInfo={description:"",methods:[],displayName:"PageCanvas",props:{components:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},selectedIds:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},onSelectIds:{required:!1,tsType:{name:"signature",type:"function",raw:"(ids: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"ids"}],return:{name:"void"}}},description:"",defaultValue:{value:"() => {}",computed:!1}},canvasRef:{required:!1,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLDivElement | null>",elements:[{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}]}]},description:""},dragOver:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},setDragOver:{required:!1,tsType:{name:"signature",type:"function",raw:"(v: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"v"}],return:{name:"void"}}},description:"",defaultValue:{value:"() => {}",computed:!1}},onFileDrop:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: DragEvent<HTMLDivElement>) => void",signature:{arguments:[{type:{name:"DragEvent",elements:[{name:"HTMLDivElement"}],raw:"DragEvent<HTMLDivElement>"},name:"e"}],return:{name:"void"}}},description:"",defaultValue:{value:"() => {}",computed:!1}},insertIndex:{required:!1,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:"",defaultValue:{value:"null",computed:!1}},dispatch:{required:!1,tsType:{name:"signature",type:"function",raw:"(action: Action) => void",signature:{arguments:[{type:{name:"union",raw:"| ChangeAction\n| UndoAction\n| RedoAction\n| SetGridColsAction\n| SetBreakpointsAction\n| UpdateEditorAction",elements:[{name:"union",raw:"| AddAction\n| MoveAction\n| RemoveAction\n| DuplicateAction\n| UpdateAction\n| ResizeAction\n| SetAction",elements:[{name:"signature",type:"object",raw:'{\n  type: "add";\n  component: PageComponent;\n  parentId?: string;\n  index?: number;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"add"',required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!1}}]}},{name:"signature",type:"object",raw:'{\n  type: "move";\n  from: { parentId?: string; index: number };\n  to: { parentId?: string; index: number };\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"move"',required:!0}},{key:"from",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}},{key:"to",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "remove"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"remove"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "duplicate"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"duplicate"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update";\n  id: string;\n  patch: Partial<PageComponent>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"Partial<PageComponent>",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "resize";\n  id: string;\n  width?: string;\n  height?: string;\n  left?: string;\n  top?: string;\n  right?: string;\n  bottom?: string;\n  leftDesktop?: string;\n  leftTablet?: string;\n  leftMobile?: string;\n  topDesktop?: string;\n  topTablet?: string;\n  topMobile?: string;\n  widthDesktop?: string;\n  widthTablet?: string;\n  widthMobile?: string;\n  heightDesktop?: string;\n  heightTablet?: string;\n  heightMobile?: string;\n  marginDesktop?: string;\n  marginTablet?: string;\n  marginMobile?: string;\n  paddingDesktop?: string;\n  paddingTablet?: string;\n  paddingMobile?: string;\n  [key: string]: string | undefined;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"resize"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!1}},{key:"height",value:{name:"string",required:!1}},{key:"left",value:{name:"string",required:!1}},{key:"top",value:{name:"string",required:!1}},{key:"right",value:{name:"string",required:!1}},{key:"bottom",value:{name:"string",required:!1}},{key:"leftDesktop",value:{name:"string",required:!1}},{key:"leftTablet",value:{name:"string",required:!1}},{key:"leftMobile",value:{name:"string",required:!1}},{key:"topDesktop",value:{name:"string",required:!1}},{key:"topTablet",value:{name:"string",required:!1}},{key:"topMobile",value:{name:"string",required:!1}},{key:"widthDesktop",value:{name:"string",required:!1}},{key:"widthTablet",value:{name:"string",required:!1}},{key:"widthMobile",value:{name:"string",required:!1}},{key:"heightDesktop",value:{name:"string",required:!1}},{key:"heightTablet",value:{name:"string",required:!1}},{key:"heightMobile",value:{name:"string",required:!1}},{key:"marginDesktop",value:{name:"string",required:!1}},{key:"marginTablet",value:{name:"string",required:!1}},{key:"marginMobile",value:{name:"string",required:!1}},{key:"paddingDesktop",value:{name:"string",required:!1}},{key:"paddingTablet",value:{name:"string",required:!1}},{key:"paddingMobile",value:{name:"string",required:!1}},{key:{name:"string"},value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set"; components: PageComponent[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set"',required:!0}},{key:"components",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"PageComponent[]",required:!0}}]}}]},{name:"signature",type:"object",raw:'{ type: "undo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"undo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "redo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"redo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-grid-cols"; gridCols: number }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-grid-cols"',required:!0}},{key:"gridCols",value:{name:"number",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-breakpoints"; breakpoints: { id: string; label: string; min?: number; max?: number }[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-breakpoints"',required:!0}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update-editor";\n  id: string;\n  patch: Partial<EditorFlags>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update-editor"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  hiddenDeviceIds?: string[];\n  /** Legacy single strategy (mobile); kept for backwards-compat */\n  stackStrategy?: "default" | "reverse" | "custom";\n  /** Per-device stacking strategies */\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  /** Custom orders per device (used when corresponding strategy === "custom") */\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n  global?: {\n    id: string;\n    overrides?: unknown;\n    pinned?: boolean;\n    editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n  };\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"hiddenDeviceIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Legacy single strategy (mobile); kept for backwards-compat"},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Per-device stacking strategies"},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1},description:'Custom orders per device (used when corresponding strategy === "custom")'},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}},{key:"global",value:{name:"signature",type:"object",raw:'{\n  id: string;\n  overrides?: unknown;\n  pinned?: boolean;\n  editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"overrides",value:{name:"unknown",required:!1}},{key:"pinned",value:{name:"boolean",required:!1}},{key:"editingSize",value:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]}],raw:'Record<"desktop" | "tablet" | "mobile", number | null>'}],raw:'Partial<Record<"desktop" | "tablet" | "mobile", number | null>>',required:!1}}]},required:!1}}]}}],raw:"Partial<EditorFlags>",required:!0}}]}}]},name:"action"}],return:{name:"void"}}},description:"",defaultValue:{value:"() => {}",computed:!1}},locale:{required:!0,tsType:{name:"Locale"},description:""},containerStyle:{required:!0,tsType:{name:"CSSProperties"},description:""},showGrid:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},gridCols:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},snapEnabled:{required:!1,tsType:{name:"boolean"},description:""},showRulers:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},viewport:{required:!0,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:""},snapPosition:{required:!1,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:"",defaultValue:{value:"null",computed:!1}},device:{required:!1,tsType:{name:"signature",type:"object",raw:'{\n  id: string;\n  label: string;\n  width: number;\n  height: number;\n  type: "desktop" | "tablet" | "mobile";\n  orientation: "portrait" | "landscape";\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}},{key:"type",value:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}],required:!0}},{key:"orientation",value:{name:"union",raw:'"portrait" | "landscape"',elements:[{name:"literal",value:'"portrait"'},{name:"literal",value:'"landscape"'}],required:!0}}]}},description:""},preview:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},editor:{required:!1,tsType:{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},description:""},shop:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},pageId:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},showComments:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},zoom:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},showBaseline:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},baselineStep:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"8",computed:!1}},dropAllowed:{required:!1,tsType:{name:"union",raw:"boolean | null",elements:[{name:"boolean"},{name:"null"}]},description:"",defaultValue:{value:"null",computed:!1}},insertParentId:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},preferParentOnClick:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}}},"../../packages/ui/src/components/cms/page-builder/PageSidebar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>page_builder_PageSidebar});var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),src=__webpack_require__("../../packages/i18n/src/index.ts"),shadcn=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),atoms=__webpack_require__("../../packages/ui/src/components/atoms/index.ts"),geometry=__webpack_require__("../../packages/ui/src/components/cms/page-builder/state/layout/geometry.ts");const hooks_useCenterInParent=({components,selectedIds,editor,dispatch,viewport})=>({centerInParentX:(0,react.useCallback)(()=>{const allowed=new Set(components.filter(c=>{var _editor_c_id;return"absolute"===c.position&&!(null==editor||null===(_editor_c_id=editor[c.id])||void 0===_editor_c_id?void 0:_editor_c_id.locked)}).map(c=>c.id));selectedIds.filter(id=>allowed.has(id)).forEach(id=>{const el=document.querySelector(`[data-component-id="${id}"]`);var _el_offsetParent,_ref;const parent=null!==(_ref=null!==(_el_offsetParent=null==el?void 0:el.offsetParent)&&void 0!==_el_offsetParent?_el_offsetParent:null==el?void 0:el.parentElement)&&void 0!==_ref?_ref:null;if(!el||!parent)return;const left=Math.round((parent.clientWidth-el.offsetWidth)/2),leftKey="desktop"===viewport?"leftDesktop":"tablet"===viewport?"leftTablet":"leftMobile";dispatch({type:"resize",id,[leftKey]:`${left}px`})});try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:"Centered horizontally in parent"}))}catch(e){}},[components,dispatch,editor,selectedIds,viewport]),centerInParentY:(0,react.useCallback)(()=>{const allowed=new Set(components.filter(c=>{var _editor_c_id;return"absolute"===c.position&&!(null==editor||null===(_editor_c_id=editor[c.id])||void 0===_editor_c_id?void 0:_editor_c_id.locked)}).map(c=>c.id));selectedIds.filter(id=>allowed.has(id)).forEach(id=>{const el=document.querySelector(`[data-component-id="${id}"]`);var _el_offsetParent,_ref;const parent=null!==(_ref=null!==(_el_offsetParent=null==el?void 0:el.offsetParent)&&void 0!==_el_offsetParent?_el_offsetParent:null==el?void 0:el.parentElement)&&void 0!==_ref?_ref:null;if(!el||!parent)return;const top=Math.round((parent.clientHeight-el.offsetHeight)/2),topKey="desktop"===viewport?"topDesktop":"tablet"===viewport?"topTablet":"topMobile";dispatch({type:"resize",id,[topKey]:`${top}px`})});try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:"Centered vertically in parent"}))}catch(e){}},[components,dispatch,editor,selectedIds,viewport])});var styleClipboard=__webpack_require__("../../packages/ui/src/components/cms/page-builder/style/styleClipboard.ts");const hooks_useStyleClipboardActions=({selectedComponent,selectedIds,components,dispatch})=>({copyStyles:(0,react.useCallback)(()=>{if(!selectedComponent)return;let overrides={};try{overrides=selectedComponent.styles?JSON.parse(String(selectedComponent.styles)):{}}catch(e){overrides={}}(0,styleClipboard.wi)(overrides);try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:"Styles copied"}))}catch(e){}},[selectedComponent]),pasteStyles:(0,react.useCallback)(()=>{const clip=(0,styleClipboard.at)();if(!clip)return;const apply=comp=>{let base={};try{base=comp.styles?JSON.parse(String(comp.styles)):{}}catch(e){base={}}var _base_color,_clip_color,_base_typography,_clip_typography,_base_typographyDesktop,_clip_typographyDesktop,_base_typographyTablet,_clip_typographyTablet,_base_typographyMobile,_clip_typographyMobile;const merged={color:{...null!==(_base_color=base.color)&&void 0!==_base_color?_base_color:{},...null!==(_clip_color=clip.color)&&void 0!==_clip_color?_clip_color:{}},typography:{...null!==(_base_typography=base.typography)&&void 0!==_base_typography?_base_typography:{},...null!==(_clip_typography=clip.typography)&&void 0!==_clip_typography?_clip_typography:{}},typographyDesktop:{...null!==(_base_typographyDesktop=base.typographyDesktop)&&void 0!==_base_typographyDesktop?_base_typographyDesktop:{},...null!==(_clip_typographyDesktop=clip.typographyDesktop)&&void 0!==_clip_typographyDesktop?_clip_typographyDesktop:{}},typographyTablet:{...null!==(_base_typographyTablet=base.typographyTablet)&&void 0!==_base_typographyTablet?_base_typographyTablet:{},...null!==(_clip_typographyTablet=clip.typographyTablet)&&void 0!==_clip_typographyTablet?_clip_typographyTablet:{}},typographyMobile:{...null!==(_base_typographyMobile=base.typographyMobile)&&void 0!==_base_typographyMobile?_base_typographyMobile:{},...null!==(_clip_typographyMobile=clip.typographyMobile)&&void 0!==_clip_typographyMobile?_clip_typographyMobile:{}}};dispatch({type:"update",id:comp.id,patch:{styles:JSON.stringify(merged)}})};selectedIds.length>1?selectedIds.forEach(id=>{const comp=components.find(c=>c.id===id);comp&&apply(comp)}):selectedComponent&&apply(selectedComponent);try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:"Styles pasted"}))}catch(e){}},[components,dispatch,selectedComponent,selectedIds])});var useGroupingActions=__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/useGroupingActions.ts");const PageSidebarMultipleSelection=({components,selectedIds,dispatch,editor,viewport})=>{const t=(0,src.c3)(),{centerInParentX,centerInParentY}=hooks_useCenterInParent({components,selectedIds,editor,dispatch,viewport}),{pasteStyles}=hooks_useStyleClipboardActions({selectedComponent:null,selectedIds,components,dispatch}),{groupAs}=(0,useGroupingActions.A)({components,selectedIds,dispatch}),leftKey="desktop"===viewport?"leftDesktop":"tablet"===viewport?"leftTablet":"leftMobile",topKey="desktop"===viewport?"topDesktop":"tablet"===viewport?"topTablet":"topMobile",locked=new Set(components.filter(c=>{var _editor_c_id;return null==editor||null===(_editor_c_id=editor[c.id])||void 0===_editor_c_id?void 0:_editor_c_id.locked}).map(c=>c.id)),unlockedIds=selectedIds.filter(id=>!locked.has(id));return(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-semibold",children:t("pb.sidebar.multiple.title")}),(0,jsx_runtime.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,jsx_runtime.jsx)(atoms.m_,{text:t("pb.sidebar.multiple.duplicate.tooltip"),children:(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline","aria-label":String(t("pb.sidebar.multiple.duplicate.aria")),onClick:()=>{selectedIds.forEach(id=>dispatch({type:"duplicate",id}));try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:String(t("pb.sidebar.multiple.duplicate.toast"))}))}catch(e){}},children:t("pb.sidebar.multiple.duplicate.label")})}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("pb.sidebar.multiple.delete.tooltip"),children:(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline","aria-label":String(t("pb.sidebar.multiple.delete.aria")),onClick:()=>{selectedIds.forEach(id=>dispatch({type:"remove",id}));try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:String(t("pb.sidebar.multiple.delete.toast"))}))}catch(e){}},children:t("pb.sidebar.multiple.delete.label")})}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("pb.sidebar.multiple.paste.tooltip"),children:(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline","aria-label":String(t("pb.sidebar.multiple.paste.aria")),onClick:pasteStyles,children:t("pb.sidebar.multiple.paste.label")})}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("pb.sidebar.multiple.centerH.tooltip"),children:(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline","aria-label":String(t("pb.sidebar.multiple.centerH.aria")),onClick:centerInParentX,children:t("pb.sidebar.multiple.centerH.label")})}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("pb.sidebar.multiple.centerV.tooltip"),children:(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline","aria-label":String(t("pb.sidebar.multiple.centerV.aria")),onClick:centerInParentY,children:t("pb.sidebar.multiple.centerV.label")})}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("pb.sidebar.multiple.group.section.tooltip"),children:(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline","aria-label":String(t("pb.sidebar.multiple.group.section.aria")),onClick:()=>groupAs("Section"),children:t("pb.sidebar.multiple.group.section.label")})}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("pb.sidebar.multiple.group.multicol.tooltip"),children:(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline","aria-label":String(t("pb.sidebar.multiple.group.multicol.aria")),onClick:()=>groupAs("MultiColumn"),children:t("pb.sidebar.multiple.group.multicol.label")})}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline","aria-label":String(t("pb.sidebar.multiple.align.left.aria")),onClick:()=>{(0,geometry.Vl)(components,unlockedIds,viewport).forEach(p=>dispatch({type:"resize",id:p.id,[leftKey]:p.left}));try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:String(t("pb.sidebar.multiple.align.left.toast"))}))}catch(e){}},children:t("pb.sidebar.multiple.align.left.label")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline","aria-label":String(t("pb.sidebar.multiple.align.right.aria")),onClick:()=>{(0,geometry.Wk)(components,unlockedIds,viewport).forEach(p=>dispatch({type:"resize",id:p.id,[leftKey]:p.left}));try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:String(t("pb.sidebar.multiple.align.right.toast"))}))}catch(e){}},children:t("pb.sidebar.multiple.align.right.label")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline","aria-label":String(t("pb.sidebar.multiple.align.top.aria")),onClick:()=>{(0,geometry.t8)(components,unlockedIds,viewport).forEach(p=>dispatch({type:"resize",id:p.id,[topKey]:p.top}));try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:String(t("pb.sidebar.multiple.align.top.toast"))}))}catch(e){}},children:t("pb.sidebar.multiple.align.top.label")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline","aria-label":String(t("pb.sidebar.multiple.align.bottom.aria")),onClick:()=>{(0,geometry.X9)(components,unlockedIds,viewport).forEach(p=>dispatch({type:"resize",id:p.id,[topKey]:p.top}));try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:String(t("pb.sidebar.multiple.align.bottom.toast"))}))}catch(e){}},children:t("pb.sidebar.multiple.align.bottom.label")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline","aria-label":String(t("pb.sidebar.multiple.centerAcross.h.aria")),onClick:()=>{(0,geometry.l8)(components,unlockedIds,viewport).forEach(p=>dispatch({type:"resize",id:p.id,[leftKey]:p.left}));try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:String(t("pb.sidebar.multiple.centerAcross.h.toast"))}))}catch(e){}},children:t("pb.sidebar.multiple.centerAcross.h.label")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline","aria-label":String(t("pb.sidebar.multiple.centerAcross.v.aria")),onClick:()=>{(0,geometry.S9)(components,unlockedIds,viewport).forEach(p=>dispatch({type:"resize",id:p.id,[topKey]:p.top}));try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:String(t("pb.sidebar.multiple.centerAcross.v.toast"))}))}catch(e){}},children:t("pb.sidebar.multiple.centerAcross.v.label")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline","aria-label":String(t("pb.sidebar.multiple.distribute.h.aria")),onClick:()=>{(0,geometry.E0)(components,unlockedIds,viewport).forEach(p=>dispatch({type:"resize",id:p.id,[leftKey]:p.left}));try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:String(t("pb.sidebar.multiple.distribute.h.toast"))}))}catch(e){}},children:t("pb.sidebar.multiple.distribute.h.label")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline","aria-label":String(t("pb.sidebar.multiple.distribute.v.aria")),onClick:()=>{(0,geometry.YV)(components,unlockedIds,viewport).forEach(p=>dispatch({type:"resize",id:p.id,[topKey]:p.top}));try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:String(t("pb.sidebar.multiple.distribute.v.toast"))}))}catch(e){}},children:t("pb.sidebar.multiple.distribute.v.label")})]})]})},components_PageSidebarMultipleSelection=PageSidebarMultipleSelection;PageSidebarMultipleSelection.__docgenInfo={description:"",methods:[],displayName:"PageSidebarMultipleSelection",props:{components:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},dispatch:{required:!0,tsType:{name:"signature",type:"function",raw:"(action: Action) => void",signature:{arguments:[{type:{name:"union",raw:"| ChangeAction\n| UndoAction\n| RedoAction\n| SetGridColsAction\n| SetBreakpointsAction\n| UpdateEditorAction",elements:[{name:"union",raw:"| AddAction\n| MoveAction\n| RemoveAction\n| DuplicateAction\n| UpdateAction\n| ResizeAction\n| SetAction",elements:[{name:"signature",type:"object",raw:'{\n  type: "add";\n  component: PageComponent;\n  parentId?: string;\n  index?: number;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"add"',required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!1}}]}},{name:"signature",type:"object",raw:'{\n  type: "move";\n  from: { parentId?: string; index: number };\n  to: { parentId?: string; index: number };\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"move"',required:!0}},{key:"from",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}},{key:"to",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "remove"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"remove"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "duplicate"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"duplicate"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update";\n  id: string;\n  patch: Partial<PageComponent>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"Partial<PageComponent>",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "resize";\n  id: string;\n  width?: string;\n  height?: string;\n  left?: string;\n  top?: string;\n  right?: string;\n  bottom?: string;\n  leftDesktop?: string;\n  leftTablet?: string;\n  leftMobile?: string;\n  topDesktop?: string;\n  topTablet?: string;\n  topMobile?: string;\n  widthDesktop?: string;\n  widthTablet?: string;\n  widthMobile?: string;\n  heightDesktop?: string;\n  heightTablet?: string;\n  heightMobile?: string;\n  marginDesktop?: string;\n  marginTablet?: string;\n  marginMobile?: string;\n  paddingDesktop?: string;\n  paddingTablet?: string;\n  paddingMobile?: string;\n  [key: string]: string | undefined;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"resize"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!1}},{key:"height",value:{name:"string",required:!1}},{key:"left",value:{name:"string",required:!1}},{key:"top",value:{name:"string",required:!1}},{key:"right",value:{name:"string",required:!1}},{key:"bottom",value:{name:"string",required:!1}},{key:"leftDesktop",value:{name:"string",required:!1}},{key:"leftTablet",value:{name:"string",required:!1}},{key:"leftMobile",value:{name:"string",required:!1}},{key:"topDesktop",value:{name:"string",required:!1}},{key:"topTablet",value:{name:"string",required:!1}},{key:"topMobile",value:{name:"string",required:!1}},{key:"widthDesktop",value:{name:"string",required:!1}},{key:"widthTablet",value:{name:"string",required:!1}},{key:"widthMobile",value:{name:"string",required:!1}},{key:"heightDesktop",value:{name:"string",required:!1}},{key:"heightTablet",value:{name:"string",required:!1}},{key:"heightMobile",value:{name:"string",required:!1}},{key:"marginDesktop",value:{name:"string",required:!1}},{key:"marginTablet",value:{name:"string",required:!1}},{key:"marginMobile",value:{name:"string",required:!1}},{key:"paddingDesktop",value:{name:"string",required:!1}},{key:"paddingTablet",value:{name:"string",required:!1}},{key:"paddingMobile",value:{name:"string",required:!1}},{key:{name:"string"},value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set"; components: PageComponent[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set"',required:!0}},{key:"components",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"PageComponent[]",required:!0}}]}}]},{name:"signature",type:"object",raw:'{ type: "undo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"undo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "redo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"redo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-grid-cols"; gridCols: number }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-grid-cols"',required:!0}},{key:"gridCols",value:{name:"number",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-breakpoints"; breakpoints: { id: string; label: string; min?: number; max?: number }[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-breakpoints"',required:!0}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update-editor";\n  id: string;\n  patch: Partial<EditorFlags>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update-editor"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  hiddenDeviceIds?: string[];\n  /** Legacy single strategy (mobile); kept for backwards-compat */\n  stackStrategy?: "default" | "reverse" | "custom";\n  /** Per-device stacking strategies */\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  /** Custom orders per device (used when corresponding strategy === "custom") */\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n  global?: {\n    id: string;\n    overrides?: unknown;\n    pinned?: boolean;\n    editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n  };\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"hiddenDeviceIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Legacy single strategy (mobile); kept for backwards-compat"},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Per-device stacking strategies"},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1},description:'Custom orders per device (used when corresponding strategy === "custom")'},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}},{key:"global",value:{name:"signature",type:"object",raw:'{\n  id: string;\n  overrides?: unknown;\n  pinned?: boolean;\n  editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"overrides",value:{name:"unknown",required:!1}},{key:"pinned",value:{name:"boolean",required:!1}},{key:"editingSize",value:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]}],raw:'Record<"desktop" | "tablet" | "mobile", number | null>'}],raw:'Partial<Record<"desktop" | "tablet" | "mobile", number | null>>',required:!1}}]},required:!1}}]}}],raw:"Partial<EditorFlags>",required:!0}}]}}]},name:"action"}],return:{name:"void"}}},description:""},editor:{required:!1,tsType:{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},description:""},viewport:{required:!0,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:""}}};var navigation=__webpack_require__("../../__mocks__/next/navigation.js"),shared_utils_src=__webpack_require__("../../packages/shared-utils/src/index.ts"),browser=__webpack_require__("../../node_modules/.pnpm/ulid@3.0.1/node_modules/ulid/dist/browser/index.js"),libraryStore=__webpack_require__("../../packages/ui/src/components/cms/page-builder/libraryStore.ts"),templateValidation=__webpack_require__("../../packages/platform-core/src/validation/templateValidation.ts"),options=__webpack_require__("../../packages/platform-core/src/validation/options.ts"),useLocalStrings=__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/useLocalStrings.ts");const hooks_useGlobals=({components,editor,dispatch,selectedComponent,pageId})=>{var _usePathname;const pathname=null!==(_usePathname=(0,navigation.usePathname)())&&void 0!==_usePathname?_usePathname:"",shop=(0,react.useMemo)(()=>(0,shared_utils_src.e6)(pathname),[pathname]),[globals,setGlobals]=(0,react.useState)([]),[insertOpen,setInsertOpen]=(0,react.useState)(!1),[insertSearch,setInsertSearch]=(0,react.useState)(""),t=(0,useLocalStrings.A)();(0,react.useEffect)(()=>{const listFn=pageId?libraryStore.nJ:libraryStore.hV;setGlobals(listFn(shop,null!=pageId?pageId:null));const onChange=()=>setGlobals(listFn(shop,null!=pageId?pageId:null));return window.addEventListener("pb-library-changed",onChange),()=>window.removeEventListener("pb-library-changed",onChange)},[shop,pageId]);const makeGlobal=(0,react.useCallback)(async()=>{var _window_prompt,_selectedComponent_name;if(!selectedComponent)return;const labelDefault=null!==(_selectedComponent_name=selectedComponent.name)&&void 0!==_selectedComponent_name?_selectedComponent_name:selectedComponent.type,label=null===(_window_prompt=window.prompt(t("prompt_make_global"),String(labelDefault)))||void 0===_window_prompt?void 0:_window_prompt.trim();if(!label)return;const pre=(0,templateValidation.w)([selectedComponent],(0,options.QG)());if(!1===pre.ok)return void window.alert([t("validation_failed"),...pre.errors||[]].filter(Boolean).join("\n"));const gid=`gid_${(0,browser.Z0)()}`,item={globalId:gid,label,template:selectedComponent,createdAt:Date.now()};pageId?await(0,libraryStore.Dr)(shop,null!=pageId?pageId:null,item):await(0,libraryStore.Vf)(shop,item),dispatch({type:"update-editor",id:selectedComponent.id,patch:{global:{id:gid}}});try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:t("msg_made_global",{label})}))}catch(e){}},[dispatch,selectedComponent,shop,pageId,t]),applyGlobalToTree=(0,react.useCallback)((nodes,eid,globalId,template)=>{const map=null!=eid?eid:{},recur=list=>list.map(n=>{const flags=map[n.id];if((null==flags?void 0:flags.global)&&flags.global.id===globalId){return{...template,id:n.id}}const kids="children"in n?n.children:void 0;if(Array.isArray(kids)){const nextKids=recur(kids);if(nextKids!==kids){return{...n,children:nextKids}}}return n});return recur(nodes)},[]),editGlobally=(0,react.useCallback)(async()=>{var _eidFlags_global;if(!selectedComponent)return;const eidFlags=null==editor?void 0:editor[selectedComponent.id],gid=null==eidFlags||null===(_eidFlags_global=eidFlags.global)||void 0===_eidFlags_global?void 0:_eidFlags_global.id;if(!gid)return void window.alert(t("warn_not_global"));if(!window.confirm(t("confirm_apply_global")))return;{const pre=(0,templateValidation.w)([selectedComponent],(0,options.QG)());if(!1===pre.ok)return void window.alert([t("validation_failed"),...pre.errors||[]].filter(Boolean).join("\n"))}pageId?await(0,libraryStore.zH)(shop,null!=pageId?pageId:null,gid,{template:selectedComponent}):await(0,libraryStore.VJ)(shop,gid,{template:selectedComponent});const next=applyGlobalToTree(components,editor,gid,selectedComponent);next!==components&&dispatch({type:"set",components:next});try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:t("msg_updated_global")}))}catch(e){}},[components,dispatch,editor,selectedComponent,shop,pageId,applyGlobalToTree,t]),insertGlobal=(0,react.useCallback)(g=>{const clone={...g.template,id:(0,browser.Z0)()};dispatch({type:"add",component:clone,index:components.length}),dispatch({type:"update-editor",id:clone.id,patch:{global:{id:g.globalId}}});try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:t("msg_inserted_global",{label:g.label})}))}catch(e){}setInsertOpen(!1)},[components.length,dispatch,t]);return{globals,insertOpen,setInsertOpen,insertSearch,setInsertSearch,makeGlobal,editGlobally,insertGlobal}};const hooks_useLibraryActions=({components,selectedIds})=>{var _usePathname;const pathname=null!==(_usePathname=(0,navigation.usePathname)())&&void 0!==_usePathname?_usePathname:"",shop=(0,react.useMemo)(()=>(0,shared_utils_src.e6)(pathname),[pathname]),t=(0,useLocalStrings.A)();return{saveSelectionToLibrary:(0,react.useCallback)(()=>{if(!selectedIds.length)return;const selectedSet=new Set(selectedIds),out=[],visit=(nodes,ancestorSelected)=>{for(const n of nodes){const isSel=selectedSet.has(n.id);if(isSel&&!ancestorSelected){var _n_children;out.push(n);const children="children"in n&&null!==(_n_children=n.children)&&void 0!==_n_children?_n_children:[];visit(children,!0)}else{var _n_children1;const children="children"in n&&null!==(_n_children1=n.children)&&void 0!==_n_children1?_n_children1:[];visit(children,ancestorSelected||isSel)}}};var _out__name;visit(components,!1);const defaultLabel=1===out.length?null!==(_out__name=out[0].name)&&void 0!==_out__name?_out__name:out[0].type:t("default_blocks_label",{n:out.length}),label=window.prompt(t("prompt_save_to_library"),defaultLabel)||defaultLabel,tags=(window.prompt(t("prompt_add_tags"),"")||"").split(/[\,\n]/).map(t=>t.trim()).filter(Boolean),thumbnail=function createPlaceholderThumbnail(text){try{const size=48,c=document.createElement("canvas");c.width=size,c.height=size;const ctx=c.getContext("2d");if(!ctx)return null;let h=0;for(let i=0;i<text.length;i++)h=31*h+text.charCodeAt(i)>>>0;const r=128+(127&h),g=128+(h>>7&127),b=128+(h>>14&127);ctx.fillStyle=`rgb(${r},${g},${b})`,ctx.fillRect(0,0,size,size);const fg=getComputedStyle(document.documentElement).getPropertyValue("--color-fg").trim();ctx.fillStyle=fg||"white";const ff=getComputedStyle(document.documentElement).getPropertyValue("--font-family").trim();return ctx.font=`bold 20px ${ff||"system-ui"}`,ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillText((text||"?").slice(0,1).toUpperCase(),size/2,size/2),c.toDataURL("image/png")}catch(e){return null}}(label),pre=(0,templateValidation.w)(out,(0,options.QG)());if(!1===pre.ok)return void window.alert([t("validation_failed"),...pre.errors||[]].filter(Boolean).join("\n"));const item=1===out.length?{id:(0,browser.Z0)(),label,template:out[0],createdAt:Date.now(),tags,thumbnail}:{id:(0,browser.Z0)(),label,templates:out,createdAt:Date.now(),tags,thumbnail};(0,libraryStore.dP)(shop,item)},[components,selectedIds,shop,t])}};var useBlockDimensions=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useBlockDimensions.ts"),usePreviewTokens=__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/usePreviewTokens.ts"),page_builder_textThemes=__webpack_require__("../../packages/ui/src/components/cms/page-builder/textThemes.ts"),VisibilityToggles=__webpack_require__("../../packages/ui/src/components/cms/page-builder/components/VisibilityToggles.tsx"),InteractionsPanel=__webpack_require__("../../packages/ui/src/components/cms/page-builder/panels/InteractionsPanel.tsx"),TimelinePanel=__webpack_require__("../../packages/ui/src/components/cms/page-builder/panels/TimelinePanel.tsx"),LottieControls=__webpack_require__("../../packages/ui/src/components/cms/page-builder/panels/LottieControls.tsx");const AnimationTabContent=({component,handleFieldInput})=>(0,jsx_runtime.jsxs)("div",{className:"space-y-3",children:[(0,jsx_runtime.jsx)(InteractionsPanel.A,{component,handleInput:handleFieldInput}),(0,jsx_runtime.jsx)(TimelinePanel.A,{component,handleInput:handleFieldInput}),(0,jsx_runtime.jsx)(LottieControls.A,{component,handleInput:handleFieldInput})]}),PageSidebarSingleSelection_AnimationTabContent=AnimationTabContent;AnimationTabContent.__docgenInfo={description:"",methods:[],displayName:"AnimationTabContent",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},handleFieldInput:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends keyof PageComponent>(field: K, value: PageComponent[K]) => void",signature:{arguments:[{type:{name:"K"},name:"field"},{type:{name:"z.infer[K]",raw:"PageComponent[K]"},name:"value"}],return:{name:"void"}}},description:""}}};const CenterInParentActionButtons=({onCenterX,onCenterY})=>{const t=(0,src.c3)();return(0,jsx_runtime.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,jsx_runtime.jsx)(atoms.m_,{text:t("Center horizontally in parent (absolute only)"),children:(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline","aria-label":t("Center horizontally in parent"),onClick:onCenterX,children:t("Center H in parent")})}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("Center vertically in parent (absolute only)"),children:(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline","aria-label":t("Center vertically in parent"),onClick:onCenterY,children:t("Center V in parent")})})]})},PageSidebarSingleSelection_CenterInParentActionButtons=CenterInParentActionButtons;CenterInParentActionButtons.__docgenInfo={description:"",methods:[],displayName:"CenterInParentActionButtons",props:{onCenterX:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onCenterY:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var react_icons_esm=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-icons@1.3.2_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-icons/dist/react-icons.esm.js");const CenterInParentButtons=({onCenterX,onCenterY})=>(0,jsx_runtime.jsxs)("div",{className:"flex flex-wrap items-center gap-1",children:[(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",size:"icon",title:"Center Horizontally in parent",onClick:onCenterX,children:(0,jsx_runtime.jsx)(react_icons_esm.bL0,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",size:"icon",title:"Center Vertically in parent",onClick:onCenterY,children:(0,jsx_runtime.jsx)(react_icons_esm.hRS,{className:"h-4 w-4"})})]}),PageSidebarSingleSelection_CenterInParentButtons=CenterInParentButtons;CenterInParentButtons.__docgenInfo={description:"",methods:[],displayName:"CenterInParentButtons",props:{onCenterX:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onCenterY:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var DatasetEditor=__webpack_require__("../../packages/ui/src/components/cms/page-builder/DatasetEditor.tsx");const CmsTabContent=({component,onChange})=>{const t=(0,src.c3)(),type=String(component.type);return(0,jsx_runtime.jsx)("div",{className:"space-y-2",children:"Dataset"===type?(0,jsx_runtime.jsx)(DatasetEditor.default,{component,onChange}):(0,jsx_runtime.jsx)("div",{className:"rounded border p-2 text-xs text-muted-foreground",children:t("Connect to CMS: select a Dataset block to edit connections.")})})},PageSidebarSingleSelection_CmsTabContent=CmsTabContent;CmsTabContent.__docgenInfo={description:"",methods:[],displayName:"CmsTabContent",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<PageComponent>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"Partial<PageComponent>"},name:"patch"}],return:{name:"void"}}},description:""}}};var ContentPanel=__webpack_require__("../../packages/ui/src/components/cms/page-builder/panels/ContentPanel.tsx");const ContentTabContent=({component,handleFieldInput,onChange})=>(0,jsx_runtime.jsx)(ContentPanel.A,{component,onChange,handleInput:handleFieldInput}),PageSidebarSingleSelection_ContentTabContent=ContentTabContent;ContentTabContent.__docgenInfo={description:"",methods:[],displayName:"ContentTabContent",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},handleFieldInput:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends keyof PageComponent>(field: K, value: PageComponent[K]) => void",signature:{arguments:[{type:{name:"K"},name:"field"},{type:{name:"z.infer[K]",raw:"PageComponent[K]"},name:"value"}],return:{name:"void"}}},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<PageComponent>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"Partial<PageComponent>"},name:"patch"}],return:{name:"void"}}},description:""}}};var LayoutPanel=__webpack_require__("../../packages/ui/src/components/cms/page-builder/panels/LayoutPanel.tsx"),StylePanel=__webpack_require__("../../packages/ui/src/components/cms/page-builder/StylePanel.tsx");const DesignTabContent=({component,handleFieldInput,handleResizeField,handleFullSizeField,editorFlags,editorMap,onUpdateEditor,updateEditorForId})=>(0,jsx_runtime.jsxs)("div",{className:"space-y-3",children:[(0,jsx_runtime.jsx)(LayoutPanel.A,{component,handleInput:handleFieldInput,handleResize:handleResizeField,handleFullSize:handleFullSizeField,editorFlags,onUpdateEditor,editorMap,updateEditorForId}),(0,jsx_runtime.jsx)(StylePanel.A,{component,handleInput:handleFieldInput})]}),PageSidebarSingleSelection_DesignTabContent=DesignTabContent;DesignTabContent.__docgenInfo={description:"",methods:[],displayName:"DesignTabContent",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},handleFieldInput:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends keyof PageComponent>(field: K, value: PageComponent[K]) => void",signature:{arguments:[{type:{name:"K"},name:"field"},{type:{name:"z.infer[K]",raw:"PageComponent[K]"},name:"value"}],return:{name:"void"}}},description:""},handleResizeField:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, value: string) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},handleFullSizeField:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string) => void",signature:{arguments:[{type:{name:"string"},name:"field"}],return:{name:"void"}}},description:""},editorFlags:{required:!0,tsType:{name:"union",raw:'NonNullable<HistoryState["editor"]>[string] | undefined',elements:[{name:"NonNullable[string]",raw:'NonNullable<HistoryState["editor"]>[string]'},{name:"undefined"}]},description:""},editorMap:{required:!0,tsType:{name:"union",raw:'HistoryState["editor"] | undefined',elements:[{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},{name:"undefined"}]},description:""},onUpdateEditor:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<EditorFlags>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  // Per-element responsive behavior (builder-only flag)\n  responsiveBehavior?: "none" | "scale-proportional";\n  // Legacy single strategy (mobile); kept for backwards-compat\n  stackStrategy?: "default" | "reverse" | "custom";\n  // Per-device stacking strategies\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  // Per-device custom orders on children\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"responsiveBehavior",value:{name:"union",raw:'"none" | "scale-proportional"',elements:[{name:"literal",value:'"none"'},{name:"literal",value:'"scale-proportional"'}],required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1}},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}}]}}],raw:"Partial<EditorFlags>"},name:"patch"}],return:{name:"void"}}},description:""},updateEditorForId:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, patch: Partial<EditorFlags>) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  // Per-element responsive behavior (builder-only flag)\n  responsiveBehavior?: "none" | "scale-proportional";\n  // Legacy single strategy (mobile); kept for backwards-compat\n  stackStrategy?: "default" | "reverse" | "custom";\n  // Per-device stacking strategies\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  // Per-device custom orders on children\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"responsiveBehavior",value:{name:"union",raw:'"none" | "scale-proportional"',elements:[{name:"literal",value:'"none"'},{name:"literal",value:'"scale-proportional"'}],required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1}},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}}]}}],raw:"Partial<EditorFlags>"},name:"patch"}],return:{name:"void"}}},description:""}}};var UnitInput=__webpack_require__("../../packages/ui/src/components/cms/page-builder/panels/layout/UnitInput.tsx");const DimensionInputs=({dims,selectedComponentId,handleResize})=>{var _dims_leftVal,_dims_topVal,_dims_widthVal,_dims_heightVal;return(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,jsx_runtime.jsx)(UnitInput.A,{componentId:selectedComponentId,label:(0,jsx_runtime.jsx)("span",{className:"text-xs",children:"X (Left)"}),value:null!==(_dims_leftVal=dims.leftVal)&&void 0!==_dims_leftVal?_dims_leftVal:"",onChange:v=>handleResize({[dims.leftKey]:v}),axis:"w",cssProp:"left"}),(0,jsx_runtime.jsx)(UnitInput.A,{componentId:selectedComponentId,label:(0,jsx_runtime.jsx)("span",{className:"text-xs",children:"Y (Top)"}),value:null!==(_dims_topVal=dims.topVal)&&void 0!==_dims_topVal?_dims_topVal:"",onChange:v=>handleResize({[dims.topKey]:v}),axis:"h",cssProp:"top"}),(0,jsx_runtime.jsx)(UnitInput.A,{componentId:selectedComponentId,label:(0,jsx_runtime.jsx)("span",{className:"text-xs",children:"W (Width)"}),value:null!==(_dims_widthVal=dims.widthVal)&&void 0!==_dims_widthVal?_dims_widthVal:"",onChange:v=>handleResize({[dims.widthKey]:v}),axis:"w",cssProp:"width"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",className:"h-7 px-2 text-xs","aria-label":"Set full width",title:"Set full width (100%)",onClick:()=>handleResize({[dims.widthKey]:"100%"}),children:"Full W"}),(0,jsx_runtime.jsx)(UnitInput.A,{componentId:selectedComponentId,label:(0,jsx_runtime.jsx)("span",{className:"text-xs",children:"H (Height)"}),value:null!==(_dims_heightVal=dims.heightVal)&&void 0!==_dims_heightVal?_dims_heightVal:"",onChange:v=>handleResize({[dims.heightKey]:v}),axis:"h",cssProp:"height"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",className:"h-7 px-2 text-xs","aria-label":"Set full height",title:"Set full height (100%)",onClick:()=>handleResize({[dims.heightKey]:"100%"}),children:"Full H"})]})},PageSidebarSingleSelection_DimensionInputs=DimensionInputs;DimensionInputs.__docgenInfo={description:"",methods:[],displayName:"DimensionInputs",props:{dims:{required:!0,tsType:{name:"ReturnType",elements:[{name:"useBlockDimensions"}],raw:"ReturnType<typeof useBlockDimensions>"},description:""},selectedComponentId:{required:!0,tsType:{name:"string"},description:""},handleResize:{required:!0,tsType:{name:"signature",type:"function",raw:"(payload: ResizePayload) => void",signature:{arguments:[{type:{name:"Record",elements:[{name:"string"},{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}],raw:"Record<string, string | undefined>"},name:"payload"}],return:{name:"void"}}},description:""}}};const DuplicateButton=({onDuplicate})=>(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:onDuplicate,children:"Duplicate"}),PageSidebarSingleSelection_DuplicateButton=DuplicateButton;DuplicateButton.__docgenInfo={description:"",methods:[],displayName:"DuplicateButton",props:{onDuplicate:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var Cluster=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Cluster.tsx");function GlobalsPicker({globals,search,onSearchChange,onSelect}){const t=(0,src.c3)(),filtered=(0,react.useMemo)(()=>{const q=search.trim().toLowerCase();return q?globals.filter(g=>g.label.toLowerCase().includes(q)||(g.tags||[]).some(t=>t.toLowerCase().includes(q))):globals},[globals,search]);return(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsx)(shadcn.pd,{placeholder:t("globals.searchPlaceholder"),value:search,onChange:e=>onSearchChange(e.target.value),className:"h-8"}),(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted-foreground",children:t("globals.count",{count:filtered.length})})]}),(0,jsx_runtime.jsxs)("div",{className:"max-h-80 overflow-auto",children:[0===filtered.length&&(0,jsx_runtime.jsx)("div",{className:"p-2 text-muted-foreground text-sm",children:t("globals.none")}),(0,jsx_runtime.jsx)("ul",{className:"space-y-2",children:filtered.map(g=>(0,jsx_runtime.jsx)("li",{className:"rounded border p-2",children:(0,jsx_runtime.jsxs)(Cluster.d,{justify:"between",gap:2,className:"items-center",children:[(0,jsx_runtime.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,jsx_runtime.jsx)("div",{className:"truncate font-medium text-sm",children:g.label}),g.tags&&g.tags.length>0&&(0,jsx_runtime.jsx)(Cluster.d,{gap:1,className:"mt-1 text-xs text-muted-foreground",children:g.tags.map(t=>(0,jsx_runtime.jsx)("span",{className:"rounded border px-1",children:t},t))})]}),(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",className:"h-7 px-2",onClick:()=>onSelect(g),children:t("globals.insert")})]})},g.globalId))})]})]})}GlobalsPicker.__docgenInfo={description:"",methods:[],displayName:"GlobalsPicker",props:{globals:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  globalId: string; // stable id used by instances\n  label: string;\n  createdAt: number;\n  template: PageComponent; // single node template\n  tags?: string[];\n  thumbnail?: string | null;\n  // Optional: independent breakpoints for this global\n  breakpoints?: { id: string; label: string; min?: number; max?: number }[];\n}",signature:{properties:[{key:"globalId",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"createdAt",value:{name:"number",required:!0}},{key:"template",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"tags",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"thumbnail",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!1}}]}}],raw:"GlobalItem[]"},description:""},search:{required:!0,tsType:{name:"string"},description:""},onSearchChange:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<string>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<string>",elements:[{name:"string"}]}]},description:""},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(g: GlobalItem) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{\n  globalId: string; // stable id used by instances\n  label: string;\n  createdAt: number;\n  template: PageComponent; // single node template\n  tags?: string[];\n  thumbnail?: string | null;\n  // Optional: independent breakpoints for this global\n  breakpoints?: { id: string; label: string; min?: number; max?: number }[];\n}",signature:{properties:[{key:"globalId",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"createdAt",value:{name:"number",required:!0}},{key:"template",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"tags",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"thumbnail",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!1}}]}},name:"g"}],return:{name:"void"}}},description:""}}};const GlobalActions=({globals,insertOpen,setInsertOpen,insertSearch,setInsertSearch,insertGlobal,makeGlobal,editGlobally})=>{const t=(0,src.c3)();return(0,jsx_runtime.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:makeGlobal,"aria-label":t("Make Global"),children:t("Make Global")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:editGlobally,"aria-label":t("Edit globally"),children:t("Edit Globally")}),(0,jsx_runtime.jsxs)(atoms.AM,{open:insertOpen,onOpenChange:setInsertOpen,children:[(0,jsx_runtime.jsx)(atoms.Wv,{asChild:!0,children:(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline","aria-label":t("Insert Global"),children:t("Insert Global")})}),(0,jsx_runtime.jsx)(atoms.hl,{align:"start",className:"w-72 space-y-2",children:(0,jsx_runtime.jsx)(GlobalsPicker,{globals,search:insertSearch,onSearchChange:setInsertSearch,onSelect:insertGlobal})})]})]})},PageSidebarSingleSelection_GlobalActions=GlobalActions;GlobalActions.__docgenInfo={description:"",methods:[],displayName:"GlobalActions",props:{globals:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  globalId: string; // stable id used by instances\n  label: string;\n  createdAt: number;\n  template: PageComponent; // single node template\n  tags?: string[];\n  thumbnail?: string | null;\n  // Optional: independent breakpoints for this global\n  breakpoints?: { id: string; label: string; min?: number; max?: number }[];\n}",signature:{properties:[{key:"globalId",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"createdAt",value:{name:"number",required:!0}},{key:"template",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"tags",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"thumbnail",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!1}}]}}],raw:"GlobalItem[]"},description:""},insertOpen:{required:!0,tsType:{name:"boolean"},description:""},setInsertOpen:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},insertSearch:{required:!0,tsType:{name:"string"},description:""},setInsertSearch:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"string"}],raw:"SetStateAction<string>"}],raw:"Dispatch<SetStateAction<string>>"},description:""},insertGlobal:{required:!0,tsType:{name:"signature",type:"function",raw:"(item: GlobalItem) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{\n  globalId: string; // stable id used by instances\n  label: string;\n  createdAt: number;\n  template: PageComponent; // single node template\n  tags?: string[];\n  thumbnail?: string | null;\n  // Optional: independent breakpoints for this global\n  breakpoints?: { id: string; label: string; min?: number; max?: number }[];\n}",signature:{properties:[{key:"globalId",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"createdAt",value:{name:"number",required:!0}},{key:"template",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"tags",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"thumbnail",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!1}}]}},name:"item"}],return:{name:"void"}}},description:""},makeGlobal:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},editGlobally:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const LinkedGlobalNotice=({globalId,linkedLabel,onEditGlobally,onUnlink})=>{const t=(0,src.c3)();return globalId&&linkedLabel?(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-2 rounded border bg-muted/60 px-2 py-1 text-xs",title:t("This block is linked to a Global template"),children:[(0,jsx_runtime.jsxs)("div",{className:"truncate",children:[t("Linked to Global:")," ",(0,jsx_runtime.jsx)("span",{className:"font-medium",children:linkedLabel})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",className:"h-7 px-2 text-xs",onClick:onEditGlobally,children:t("Edit globally")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"ghost",className:"h-7 px-2 text-xs",onClick:onUnlink,title:t("Unlink from Global"),children:t("Unlink")})]})]}):null},PageSidebarSingleSelection_LinkedGlobalNotice=LinkedGlobalNotice;LinkedGlobalNotice.__docgenInfo={description:"",methods:[],displayName:"LinkedGlobalNotice",props:{globalId:{required:!1,tsType:{name:"string"},description:""},linkedLabel:{required:!0,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},onEditGlobally:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onUnlink:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const MultiSelectionAlignmentControls=({components,selectedIds,viewport,dispatch})=>{if(selectedIds.length<=1)return null;const viewportSuffix="desktop"===viewport?"Desktop":"tablet"===viewport?"Tablet":"Mobile",leftKey=`left${viewportSuffix}`,topKey=`top${viewportSuffix}`;return(0,jsx_runtime.jsxs)("div",{className:"flex flex-wrap items-center gap-1",children:[(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",size:"icon",title:"Align Left",onClick:()=>(0,geometry.Vl)(components,selectedIds,viewport).forEach(p=>dispatch({type:"resize",id:p.id,[leftKey]:p.left})),children:(0,jsx_runtime.jsx)(react_icons_esm.SBc,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",size:"icon",title:"Align Right",onClick:()=>(0,geometry.Wk)(components,selectedIds,viewport).forEach(p=>dispatch({type:"resize",id:p.id,[leftKey]:p.left})),children:(0,jsx_runtime.jsx)(react_icons_esm.n7i,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",size:"icon",title:"Align Top",onClick:()=>(0,geometry.t8)(components,selectedIds,viewport).forEach(p=>dispatch({type:"resize",id:p.id,[topKey]:p.top})),children:(0,jsx_runtime.jsx)(react_icons_esm.mib,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",size:"icon",title:"Align Bottom",onClick:()=>(0,geometry.X9)(components,selectedIds,viewport).forEach(p=>dispatch({type:"resize",id:p.id,[topKey]:p.top})),children:(0,jsx_runtime.jsx)(react_icons_esm.uYI,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",size:"icon",title:"Center Horizontally",onClick:()=>(0,geometry.l8)(components,selectedIds,viewport).forEach(p=>dispatch({type:"resize",id:p.id,[leftKey]:p.left})),children:(0,jsx_runtime.jsx)(react_icons_esm.bL0,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",size:"icon",title:"Center Vertically",onClick:()=>(0,geometry.S9)(components,selectedIds,viewport).forEach(p=>dispatch({type:"resize",id:p.id,[topKey]:p.top})),children:(0,jsx_runtime.jsx)(react_icons_esm.hRS,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",size:"icon",title:"Distribute Horizontally",onClick:()=>(0,geometry.E0)(components,selectedIds,viewport).forEach(p=>dispatch({type:"resize",id:p.id,[leftKey]:p.left})),children:(0,jsx_runtime.jsx)(react_icons_esm.rnH,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",size:"icon",title:"Distribute Vertically",onClick:()=>(0,geometry.YV)(components,selectedIds,viewport).forEach(p=>dispatch({type:"resize",id:p.id,[topKey]:p.top})),children:(0,jsx_runtime.jsx)(react_icons_esm.$1F,{className:"h-4 w-4"})})]})},PageSidebarSingleSelection_MultiSelectionAlignmentControls=MultiSelectionAlignmentControls;MultiSelectionAlignmentControls.__docgenInfo={description:"",methods:[],displayName:"MultiSelectionAlignmentControls",props:{components:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},viewport:{required:!0,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:""},dispatch:{required:!0,tsType:{name:"signature",type:"function",raw:"(action: Action) => void",signature:{arguments:[{type:{name:"union",raw:"| ChangeAction\n| UndoAction\n| RedoAction\n| SetGridColsAction\n| SetBreakpointsAction\n| UpdateEditorAction",elements:[{name:"union",raw:"| AddAction\n| MoveAction\n| RemoveAction\n| DuplicateAction\n| UpdateAction\n| ResizeAction\n| SetAction",elements:[{name:"signature",type:"object",raw:'{\n  type: "add";\n  component: PageComponent;\n  parentId?: string;\n  index?: number;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"add"',required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!1}}]}},{name:"signature",type:"object",raw:'{\n  type: "move";\n  from: { parentId?: string; index: number };\n  to: { parentId?: string; index: number };\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"move"',required:!0}},{key:"from",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}},{key:"to",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "remove"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"remove"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "duplicate"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"duplicate"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update";\n  id: string;\n  patch: Partial<PageComponent>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"Partial<PageComponent>",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "resize";\n  id: string;\n  width?: string;\n  height?: string;\n  left?: string;\n  top?: string;\n  right?: string;\n  bottom?: string;\n  leftDesktop?: string;\n  leftTablet?: string;\n  leftMobile?: string;\n  topDesktop?: string;\n  topTablet?: string;\n  topMobile?: string;\n  widthDesktop?: string;\n  widthTablet?: string;\n  widthMobile?: string;\n  heightDesktop?: string;\n  heightTablet?: string;\n  heightMobile?: string;\n  marginDesktop?: string;\n  marginTablet?: string;\n  marginMobile?: string;\n  paddingDesktop?: string;\n  paddingTablet?: string;\n  paddingMobile?: string;\n  [key: string]: string | undefined;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"resize"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!1}},{key:"height",value:{name:"string",required:!1}},{key:"left",value:{name:"string",required:!1}},{key:"top",value:{name:"string",required:!1}},{key:"right",value:{name:"string",required:!1}},{key:"bottom",value:{name:"string",required:!1}},{key:"leftDesktop",value:{name:"string",required:!1}},{key:"leftTablet",value:{name:"string",required:!1}},{key:"leftMobile",value:{name:"string",required:!1}},{key:"topDesktop",value:{name:"string",required:!1}},{key:"topTablet",value:{name:"string",required:!1}},{key:"topMobile",value:{name:"string",required:!1}},{key:"widthDesktop",value:{name:"string",required:!1}},{key:"widthTablet",value:{name:"string",required:!1}},{key:"widthMobile",value:{name:"string",required:!1}},{key:"heightDesktop",value:{name:"string",required:!1}},{key:"heightTablet",value:{name:"string",required:!1}},{key:"heightMobile",value:{name:"string",required:!1}},{key:"marginDesktop",value:{name:"string",required:!1}},{key:"marginTablet",value:{name:"string",required:!1}},{key:"marginMobile",value:{name:"string",required:!1}},{key:"paddingDesktop",value:{name:"string",required:!1}},{key:"paddingTablet",value:{name:"string",required:!1}},{key:"paddingMobile",value:{name:"string",required:!1}},{key:{name:"string"},value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set"; components: PageComponent[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set"',required:!0}},{key:"components",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"PageComponent[]",required:!0}}]}}]},{name:"signature",type:"object",raw:'{ type: "undo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"undo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "redo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"redo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-grid-cols"; gridCols: number }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-grid-cols"',required:!0}},{key:"gridCols",value:{name:"number",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-breakpoints"; breakpoints: { id: string; label: string; min?: number; max?: number }[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-breakpoints"',required:!0}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update-editor";\n  id: string;\n  patch: Partial<EditorFlags>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update-editor"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  hiddenDeviceIds?: string[];\n  /** Legacy single strategy (mobile); kept for backwards-compat */\n  stackStrategy?: "default" | "reverse" | "custom";\n  /** Per-device stacking strategies */\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  /** Custom orders per device (used when corresponding strategy === "custom") */\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n  global?: {\n    id: string;\n    overrides?: unknown;\n    pinned?: boolean;\n    editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n  };\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"hiddenDeviceIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Legacy single strategy (mobile); kept for backwards-compat"},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Per-device stacking strategies"},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1},description:'Custom orders per device (used when corresponding strategy === "custom")'},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}},{key:"global",value:{name:"signature",type:"object",raw:'{\n  id: string;\n  overrides?: unknown;\n  pinned?: boolean;\n  editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"overrides",value:{name:"unknown",required:!1}},{key:"pinned",value:{name:"boolean",required:!1}},{key:"editingSize",value:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]}],raw:'Record<"desktop" | "tablet" | "mobile", number | null>'}],raw:'Partial<Record<"desktop" | "tablet" | "mobile", number | null>>',required:!1}}]},required:!1}}]}}],raw:"Partial<EditorFlags>",required:!0}}]}}]},name:"action"}],return:{name:"void"}}},description:""}}};const SaveToLibraryButton=({onSave})=>{const t=(0,src.c3)();return(0,jsx_runtime.jsx)(atoms.m_,{text:t("Save selected blocks as a reusable snippet"),children:(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:onSave,children:t("Save to My Library")})})},PageSidebarSingleSelection_SaveToLibraryButton=SaveToLibraryButton;SaveToLibraryButton.__docgenInfo={description:"",methods:[],displayName:"SaveToLibraryButton",props:{onSave:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const SingleSelectionAlignmentControls=({selectedIds,dims,handleChange,handleResize,centerInParentX,centerInParentY})=>{const selectedId=selectedIds[0],withElement=(0,react.useCallback)(handler=>()=>{if(selectedId)try{const el=document.querySelector(`[data-component-id="${selectedId}"]`);var _el_offsetParent,_ref;const parent=null!==(_ref=null!==(_el_offsetParent=null==el?void 0:el.offsetParent)&&void 0!==_el_offsetParent?_el_offsetParent:null==el?void 0:el.parentElement)&&void 0!==_ref?_ref:null;if(!el||!parent)return;handler(el,parent)}catch(e){}},[selectedId]);return 1===selectedIds.length&&selectedId?(0,jsx_runtime.jsxs)("div",{className:"flex flex-wrap items-center gap-1",children:[(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",size:"icon",title:"Align to parent left",onClick:withElement((el,parent)=>{const rect=el.getBoundingClientRect(),pRect=parent.getBoundingClientRect(),left=Math.round(rect.left-pRect.left);handleChange({dockX:"left"}),handleResize({[dims.leftKey]:`${left}px`,right:void 0})}),children:(0,jsx_runtime.jsx)(react_icons_esm.SBc,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",size:"icon",title:"Align to parent right",onClick:withElement((el,parent)=>{const rect=el.getBoundingClientRect(),pRect=parent.getBoundingClientRect(),right=Math.round(pRect.right-rect.right);handleChange({dockX:"right"}),handleResize({right:`${right}px`,[dims.leftKey]:""})}),children:(0,jsx_runtime.jsx)(react_icons_esm.n7i,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",size:"icon",title:"Align to parent top",onClick:withElement((el,parent)=>{const rect=el.getBoundingClientRect(),pRect=parent.getBoundingClientRect(),top=Math.round(rect.top-pRect.top);handleChange({dockY:"top"}),handleResize({[dims.topKey]:`${top}px`,bottom:""})}),children:(0,jsx_runtime.jsx)(react_icons_esm.mib,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",size:"icon",title:"Align to parent bottom",onClick:withElement((el,parent)=>{const rect=el.getBoundingClientRect(),pRect=parent.getBoundingClientRect(),bottom=Math.round(pRect.bottom-rect.bottom);handleChange({dockY:"bottom"}),handleResize({bottom:`${bottom}px`,[dims.topKey]:""})}),children:(0,jsx_runtime.jsx)(react_icons_esm.uYI,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",size:"icon",title:"Center Horizontally in parent",onClick:centerInParentX,children:(0,jsx_runtime.jsx)(react_icons_esm.bL0,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",size:"icon",title:"Center Vertically in parent",onClick:centerInParentY,children:(0,jsx_runtime.jsx)(react_icons_esm.hRS,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",size:"icon",title:"Stretch horizontally",onClick:withElement((el,parent)=>{const rect=el.getBoundingClientRect(),pRect=parent.getBoundingClientRect(),left=Math.round(rect.left-pRect.left),right=Math.round(pRect.right-rect.right);handleChange({dockX:"left"}),handleResize({[dims.leftKey]:`${left}px`,right:`${right}px`,width:""})}),children:(0,jsx_runtime.jsx)(react_icons_esm.rnH,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",size:"icon",title:"Stretch vertically",onClick:withElement((el,parent)=>{const rect=el.getBoundingClientRect(),pRect=parent.getBoundingClientRect(),top=Math.round(rect.top-pRect.top),bottom=Math.round(pRect.bottom-rect.bottom);handleChange({dockY:"top"}),handleResize({[dims.topKey]:`${top}px`,bottom:`${bottom}px`,height:""})}),children:(0,jsx_runtime.jsx)(react_icons_esm.$1F,{className:"h-4 w-4"})})]}):null},PageSidebarSingleSelection_SingleSelectionAlignmentControls=SingleSelectionAlignmentControls;SingleSelectionAlignmentControls.__docgenInfo={description:"",methods:[],displayName:"SingleSelectionAlignmentControls",props:{selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},dims:{required:!0,tsType:{name:"ReturnType",elements:[{name:"useBlockDimensions"}],raw:"ReturnType<typeof useBlockDimensions>"},description:""},handleChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<PageComponent>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"Partial<PageComponent>"},name:"patch"}],return:{name:"void"}}},description:""},handleResize:{required:!0,tsType:{name:"signature",type:"function",raw:"(payload: ResizePayload) => void",signature:{arguments:[{type:{name:"Record",elements:[{name:"string"},{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}],raw:"Record<string, string | undefined>"},name:"payload"}],return:{name:"void"}}},description:""},centerInParentX:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},centerInParentY:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const StyleClipboardActions=({onCopy,onPaste})=>(0,jsx_runtime.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:onCopy,"aria-label":"Copy styles",children:"Copy Styles"}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:onPaste,"aria-label":"Paste styles",children:"Paste Styles"})]}),PageSidebarSingleSelection_StyleClipboardActions=StyleClipboardActions;StyleClipboardActions.__docgenInfo={description:"",methods:[],displayName:"StyleClipboardActions",props:{onCopy:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onPaste:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var Inline=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Inline.tsx");const tabs=[["design","Design"],["anim","Animations"],["content","Content"],["cms","CMS"]],TabSwitcher=({value,onChange})=>(0,jsx_runtime.jsx)(Inline.c,{className:"mt-1",gap:1,alignY:"center",children:tabs.map(([key,label])=>(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded px-2 py-1 text-xs "+(value===key?"bg-muted font-medium":"border"),onClick:()=>onChange(key),children:label},key))}),PageSidebarSingleSelection_TabSwitcher=TabSwitcher;TabSwitcher.__docgenInfo={description:"",methods:[],displayName:"TabSwitcher",props:{value:{required:!0,tsType:{name:"union",raw:'"design" | "anim" | "content" | "cms"',elements:[{name:"literal",value:'"design"'},{name:"literal",value:'"anim"'},{name:"literal",value:'"content"'},{name:"literal",value:'"cms"'}]},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:'(value: "design" | "anim" | "content" | "cms") => void',signature:{arguments:[{type:{name:"union",raw:'"design" | "anim" | "content" | "cms"',elements:[{name:"literal",value:'"design"'},{name:"literal",value:'"anim"'},{name:"literal",value:'"content"'},{name:"literal",value:'"cms"'}]},name:"value"}],return:{name:"void"}}},description:""}}};const UngroupButton=({show,onUngroup})=>show?(0,jsx_runtime.jsx)(atoms.m_,{text:"Ungroup children from container",children:(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:onUngroup,children:"Ungroup"})}):null,PageSidebarSingleSelection_UngroupButton=UngroupButton;UngroupButton.__docgenInfo={description:"",methods:[],displayName:"UngroupButton",props:{show:{required:!0,tsType:{name:"boolean"},description:""},onUngroup:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const PageSidebarSingleSelection=({components,selectedIds,dispatch,editor,viewport,breakpoints=[],selectedComponent,pageId})=>{var _eid_global,_eid_global1;const t=(0,src.c3)(),previewTokens=(0,usePreviewTokens.Ay)(),textThemes=(0,react.useMemo)(()=>(0,page_builder_textThemes.Z1)(previewTokens),[previewTokens]),{globals,insertOpen,setInsertOpen,insertSearch,setInsertSearch,makeGlobal,editGlobally,insertGlobal}=hooks_useGlobals({components,editor,dispatch,selectedComponent,pageId}),{copyStyles,pasteStyles}=hooks_useStyleClipboardActions({selectedComponent,selectedIds,components,dispatch}),{centerInParentX,centerInParentY}=hooks_useCenterInParent({components,selectedIds,editor,dispatch,viewport}),{ungroup}=(0,useGroupingActions.A)({components,selectedIds,dispatch}),{saveSelectionToLibrary}=hooks_useLibraryActions({components,selectedIds}),dims=(0,useBlockDimensions.A)({component:selectedComponent,viewport}),[tab,setTab]=(0,react.useState)("design"),handleDuplicate=(0,react.useCallback)(()=>{selectedIds.forEach(id=>dispatch({type:"duplicate",id}));try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:t("Block duplicated")}))}catch(e){}},[dispatch,selectedIds,t]),handleChange=(0,react.useCallback)(patch=>{selectedIds[0]&&dispatch({type:"update",id:selectedIds[0],patch})},[dispatch,selectedIds]),handleResize=(0,react.useCallback)(size=>{selectedIds[0]&&dispatch({type:"resize",id:selectedIds[0],...size})},[dispatch,selectedIds]),handleFieldInput=(0,react.useCallback)((field,value)=>{handleChange({[field]:value})},[handleChange]),hasChildren=(0,react.useMemo)(()=>{const maybeChildren=selectedComponent.children;return Array.isArray(maybeChildren)&&maybeChildren.length>0},[selectedComponent]),eid=null==editor?void 0:editor[selectedComponent.id],gid=null==eid||null===(_eid_global=eid.global)||void 0===_eid_global?void 0:_eid_global.id,linkedGlobalLabel=(0,react.useMemo)(()=>{if(!gid)return null;const g=globals.find(x=>x.globalId===gid)||null;return(null==g?void 0:g.label)||gid},[gid,globals]);(0,react.useEffect)(()=>{const handler=event=>{const detail=event.detail;if(!(null==detail?void 0:detail.id))return;if(1!==selectedIds.length){try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:t("Select a block to apply text style")}))}catch(e){}return}const theme=textThemes.find(t=>t.id===detail.id);if(!theme)return;let overrides={};try{const rawStyles=selectedComponent.styles;overrides="string"==typeof rawStyles?JSON.parse(rawStyles):{}}catch(e){overrides={}}const next=(0,page_builder_textThemes.p_)(overrides,theme);handleChange({styles:JSON.stringify(next)});try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:t(`${theme.label} text style applied`)}))}catch(e){}};return window.addEventListener("pb:apply-text-theme",handler),()=>window.removeEventListener("pb:apply-text-theme",handler)},[handleChange,selectedComponent,selectedIds,textThemes,t]),(0,react.useEffect)(()=>{var _eid_global;if(!(null==eid||null===(_eid_global=eid.global)||void 0===_eid_global?void 0:_eid_global.pinned))return;const otherPinned=Object.entries(null!=editor?editor:{}).filter(([id,flags])=>{var _flags_global;if(id===selectedComponent.id)return!1;const pinned=null==flags||null===(_flags_global=flags.global)||void 0===_flags_global?void 0:_flags_global.pinned;return Boolean(pinned)});0!==otherPinned.length&&otherPinned.forEach(([id,flags])=>{const otherGlobal=null==flags?void 0:flags.global;if(!otherGlobal||!otherGlobal.id)return;const nextGlobal={...otherGlobal,pinned:!1};dispatch({type:"update-editor",id,patch:{global:nextGlobal}})})},[dispatch,editor,selectedComponent.id,null==eid||null===(_eid_global1=eid.global)||void 0===_eid_global1?void 0:_eid_global1.pinned]);const handleResizeField=(0,react.useCallback)((field,value)=>handleResize({[field]:value}),[handleResize]),handleFullSizeField=(0,react.useCallback)(field=>handleResize({[field]:"100%"}),[handleResize]),handleUpdateEditor=(0,react.useCallback)(patch=>{selectedIds[0]&&dispatch({type:"update-editor",id:selectedIds[0],patch})},[dispatch,selectedIds]),updateEditorForId=(0,react.useCallback)((id,patch)=>{dispatch({type:"update-editor",id,patch})},[dispatch]),unlinkFromGlobal=(0,react.useCallback)(()=>{const patch={global:void 0};dispatch({type:"update-editor",id:selectedComponent.id,patch})},[dispatch,selectedComponent.id]),showUngroup=1===selectedIds.length&&hasChildren;return(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[1===selectedIds.length&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PageSidebarSingleSelection_SingleSelectionAlignmentControls,{selectedIds,dims,handleChange,handleResize,centerInParentX,centerInParentY}),(0,jsx_runtime.jsx)(PageSidebarSingleSelection_CenterInParentButtons,{onCenterX:centerInParentX,onCenterY:centerInParentY})]}),(0,jsx_runtime.jsx)(PageSidebarSingleSelection_MultiSelectionAlignmentControls,{components,selectedIds,viewport,dispatch}),(0,jsx_runtime.jsx)(PageSidebarSingleSelection_DimensionInputs,{dims,selectedComponentId:selectedComponent.id,handleResize}),(0,jsx_runtime.jsx)(PageSidebarSingleSelection_TabSwitcher,{value:tab,onChange:value=>setTab(value)}),(0,jsx_runtime.jsx)(PageSidebarSingleSelection_LinkedGlobalNotice,{globalId:gid,linkedLabel:linkedGlobalLabel,onEditGlobally:editGlobally,onUnlink:unlinkFromGlobal}),(0,jsx_runtime.jsx)(PageSidebarSingleSelection_DuplicateButton,{onDuplicate:handleDuplicate}),(0,jsx_runtime.jsx)(PageSidebarSingleSelection_GlobalActions,{globals,insertOpen,setInsertOpen,insertSearch,setInsertSearch,insertGlobal,makeGlobal,editGlobally}),(0,jsx_runtime.jsx)(PageSidebarSingleSelection_StyleClipboardActions,{onCopy:copyStyles,onPaste:pasteStyles}),(0,jsx_runtime.jsx)(VisibilityToggles.A,{selectedIds,editor,dispatch,breakpoints}),(0,jsx_runtime.jsx)(PageSidebarSingleSelection_UngroupButton,{show:showUngroup,onUngroup:ungroup}),(0,jsx_runtime.jsx)(PageSidebarSingleSelection_SaveToLibraryButton,{onSave:saveSelectionToLibrary}),(0,jsx_runtime.jsx)(PageSidebarSingleSelection_CenterInParentActionButtons,{onCenterX:centerInParentX,onCenterY:centerInParentY}),"design"===tab&&(0,jsx_runtime.jsx)(PageSidebarSingleSelection_DesignTabContent,{component:selectedComponent,handleFieldInput,handleResizeField,handleFullSizeField,editorFlags:null==editor?void 0:editor[selectedComponent.id],editorMap:editor,onUpdateEditor:handleUpdateEditor,updateEditorForId}),"anim"===tab&&(0,jsx_runtime.jsx)(PageSidebarSingleSelection_AnimationTabContent,{component:selectedComponent,handleFieldInput}),"content"===tab&&(0,jsx_runtime.jsx)(PageSidebarSingleSelection_ContentTabContent,{component:selectedComponent,handleFieldInput,onChange:handleChange}),"cms"===tab&&(0,jsx_runtime.jsx)(PageSidebarSingleSelection_CmsTabContent,{component:selectedComponent,onChange:handleChange})]})},components_PageSidebarSingleSelection=PageSidebarSingleSelection;PageSidebarSingleSelection.__docgenInfo={description:"",methods:[],displayName:"PageSidebarSingleSelection",props:{components:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},dispatch:{required:!0,tsType:{name:"signature",type:"function",raw:"(action: Action) => void",signature:{arguments:[{type:{name:"union",raw:"| ChangeAction\n| UndoAction\n| RedoAction\n| SetGridColsAction\n| SetBreakpointsAction\n| UpdateEditorAction",elements:[{name:"union",raw:"| AddAction\n| MoveAction\n| RemoveAction\n| DuplicateAction\n| UpdateAction\n| ResizeAction\n| SetAction",elements:[{name:"signature",type:"object",raw:'{\n  type: "add";\n  component: PageComponent;\n  parentId?: string;\n  index?: number;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"add"',required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!1}}]}},{name:"signature",type:"object",raw:'{\n  type: "move";\n  from: { parentId?: string; index: number };\n  to: { parentId?: string; index: number };\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"move"',required:!0}},{key:"from",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}},{key:"to",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "remove"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"remove"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "duplicate"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"duplicate"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update";\n  id: string;\n  patch: Partial<PageComponent>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"Partial<PageComponent>",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "resize";\n  id: string;\n  width?: string;\n  height?: string;\n  left?: string;\n  top?: string;\n  right?: string;\n  bottom?: string;\n  leftDesktop?: string;\n  leftTablet?: string;\n  leftMobile?: string;\n  topDesktop?: string;\n  topTablet?: string;\n  topMobile?: string;\n  widthDesktop?: string;\n  widthTablet?: string;\n  widthMobile?: string;\n  heightDesktop?: string;\n  heightTablet?: string;\n  heightMobile?: string;\n  marginDesktop?: string;\n  marginTablet?: string;\n  marginMobile?: string;\n  paddingDesktop?: string;\n  paddingTablet?: string;\n  paddingMobile?: string;\n  [key: string]: string | undefined;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"resize"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!1}},{key:"height",value:{name:"string",required:!1}},{key:"left",value:{name:"string",required:!1}},{key:"top",value:{name:"string",required:!1}},{key:"right",value:{name:"string",required:!1}},{key:"bottom",value:{name:"string",required:!1}},{key:"leftDesktop",value:{name:"string",required:!1}},{key:"leftTablet",value:{name:"string",required:!1}},{key:"leftMobile",value:{name:"string",required:!1}},{key:"topDesktop",value:{name:"string",required:!1}},{key:"topTablet",value:{name:"string",required:!1}},{key:"topMobile",value:{name:"string",required:!1}},{key:"widthDesktop",value:{name:"string",required:!1}},{key:"widthTablet",value:{name:"string",required:!1}},{key:"widthMobile",value:{name:"string",required:!1}},{key:"heightDesktop",value:{name:"string",required:!1}},{key:"heightTablet",value:{name:"string",required:!1}},{key:"heightMobile",value:{name:"string",required:!1}},{key:"marginDesktop",value:{name:"string",required:!1}},{key:"marginTablet",value:{name:"string",required:!1}},{key:"marginMobile",value:{name:"string",required:!1}},{key:"paddingDesktop",value:{name:"string",required:!1}},{key:"paddingTablet",value:{name:"string",required:!1}},{key:"paddingMobile",value:{name:"string",required:!1}},{key:{name:"string"},value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set"; components: PageComponent[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set"',required:!0}},{key:"components",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"PageComponent[]",required:!0}}]}}]},{name:"signature",type:"object",raw:'{ type: "undo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"undo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "redo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"redo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-grid-cols"; gridCols: number }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-grid-cols"',required:!0}},{key:"gridCols",value:{name:"number",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-breakpoints"; breakpoints: { id: string; label: string; min?: number; max?: number }[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-breakpoints"',required:!0}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update-editor";\n  id: string;\n  patch: Partial<EditorFlags>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update-editor"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  hiddenDeviceIds?: string[];\n  /** Legacy single strategy (mobile); kept for backwards-compat */\n  stackStrategy?: "default" | "reverse" | "custom";\n  /** Per-device stacking strategies */\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  /** Custom orders per device (used when corresponding strategy === "custom") */\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n  global?: {\n    id: string;\n    overrides?: unknown;\n    pinned?: boolean;\n    editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n  };\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"hiddenDeviceIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Legacy single strategy (mobile); kept for backwards-compat"},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Per-device stacking strategies"},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1},description:'Custom orders per device (used when corresponding strategy === "custom")'},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}},{key:"global",value:{name:"signature",type:"object",raw:'{\n  id: string;\n  overrides?: unknown;\n  pinned?: boolean;\n  editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"overrides",value:{name:"unknown",required:!1}},{key:"pinned",value:{name:"boolean",required:!1}},{key:"editingSize",value:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]}],raw:'Record<"desktop" | "tablet" | "mobile", number | null>'}],raw:'Partial<Record<"desktop" | "tablet" | "mobile", number | null>>',required:!1}}]},required:!1}}]}}],raw:"Partial<EditorFlags>",required:!0}}]}}]},name:"action"}],return:{name:"void"}}},description:""},editor:{required:!1,tsType:{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},description:""},viewport:{required:!0,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:""},breakpoints:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]"},description:"",defaultValue:{value:"[]",computed:!1}},selectedComponent:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},pageId:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""}}};const PageSidebar=({components,selectedIds,onSelectIds:_onSelectIds,dispatch,editor,viewport="desktop",breakpoints=[],pageId=null,crossNotices:_crossNotices=!0})=>{const selectedComponent=(0,react.useMemo)(()=>{var _components_find;return null!==(_components_find=components.find(c=>c.id===selectedIds[0]))&&void 0!==_components_find?_components_find:null},[components,selectedIds]),t=(0,src.c3)();return(0,jsx_runtime.jsxs)("aside",{className:"w-80 shrink-0 space-y-4 p-2","data-tour":"sidebar",children:[0===selectedIds.length&&(0,jsx_runtime.jsx)("div",{className:"p-2 text-sm text-muted-foreground",children:t("cms.builder.sidebar.selectComponentHint")}),selectedIds.length>1&&(0,jsx_runtime.jsx)(components_PageSidebarMultipleSelection,{components,selectedIds,dispatch,editor,viewport}),selectedIds.length>=1&&selectedComponent&&(0,jsx_runtime.jsx)(components_PageSidebarSingleSelection,{components,selectedIds,dispatch,editor,viewport,breakpoints,selectedComponent,pageId})]})},page_builder_PageSidebar=PageSidebar;PageSidebar.__docgenInfo={description:"",methods:[],displayName:"PageSidebar",props:{components:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onSelectIds:{required:!0,tsType:{name:"signature",type:"function",raw:"(ids: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"ids"}],return:{name:"void"}}},description:""},dispatch:{required:!0,tsType:{name:"signature",type:"function",raw:"(action: Action) => void",signature:{arguments:[{type:{name:"union",raw:"| ChangeAction\n| UndoAction\n| RedoAction\n| SetGridColsAction\n| SetBreakpointsAction\n| UpdateEditorAction",elements:[{name:"union",raw:"| AddAction\n| MoveAction\n| RemoveAction\n| DuplicateAction\n| UpdateAction\n| ResizeAction\n| SetAction",elements:[{name:"signature",type:"object",raw:'{\n  type: "add";\n  component: PageComponent;\n  parentId?: string;\n  index?: number;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"add"',required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!1}}]}},{name:"signature",type:"object",raw:'{\n  type: "move";\n  from: { parentId?: string; index: number };\n  to: { parentId?: string; index: number };\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"move"',required:!0}},{key:"from",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}},{key:"to",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "remove"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"remove"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "duplicate"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"duplicate"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update";\n  id: string;\n  patch: Partial<PageComponent>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"Partial<PageComponent>",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "resize";\n  id: string;\n  width?: string;\n  height?: string;\n  left?: string;\n  top?: string;\n  right?: string;\n  bottom?: string;\n  leftDesktop?: string;\n  leftTablet?: string;\n  leftMobile?: string;\n  topDesktop?: string;\n  topTablet?: string;\n  topMobile?: string;\n  widthDesktop?: string;\n  widthTablet?: string;\n  widthMobile?: string;\n  heightDesktop?: string;\n  heightTablet?: string;\n  heightMobile?: string;\n  marginDesktop?: string;\n  marginTablet?: string;\n  marginMobile?: string;\n  paddingDesktop?: string;\n  paddingTablet?: string;\n  paddingMobile?: string;\n  [key: string]: string | undefined;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"resize"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!1}},{key:"height",value:{name:"string",required:!1}},{key:"left",value:{name:"string",required:!1}},{key:"top",value:{name:"string",required:!1}},{key:"right",value:{name:"string",required:!1}},{key:"bottom",value:{name:"string",required:!1}},{key:"leftDesktop",value:{name:"string",required:!1}},{key:"leftTablet",value:{name:"string",required:!1}},{key:"leftMobile",value:{name:"string",required:!1}},{key:"topDesktop",value:{name:"string",required:!1}},{key:"topTablet",value:{name:"string",required:!1}},{key:"topMobile",value:{name:"string",required:!1}},{key:"widthDesktop",value:{name:"string",required:!1}},{key:"widthTablet",value:{name:"string",required:!1}},{key:"widthMobile",value:{name:"string",required:!1}},{key:"heightDesktop",value:{name:"string",required:!1}},{key:"heightTablet",value:{name:"string",required:!1}},{key:"heightMobile",value:{name:"string",required:!1}},{key:"marginDesktop",value:{name:"string",required:!1}},{key:"marginTablet",value:{name:"string",required:!1}},{key:"marginMobile",value:{name:"string",required:!1}},{key:"paddingDesktop",value:{name:"string",required:!1}},{key:"paddingTablet",value:{name:"string",required:!1}},{key:"paddingMobile",value:{name:"string",required:!1}},{key:{name:"string"},value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set"; components: PageComponent[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set"',required:!0}},{key:"components",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"PageComponent[]",required:!0}}]}}]},{name:"signature",type:"object",raw:'{ type: "undo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"undo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "redo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"redo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-grid-cols"; gridCols: number }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-grid-cols"',required:!0}},{key:"gridCols",value:{name:"number",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-breakpoints"; breakpoints: { id: string; label: string; min?: number; max?: number }[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-breakpoints"',required:!0}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update-editor";\n  id: string;\n  patch: Partial<EditorFlags>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update-editor"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  hiddenDeviceIds?: string[];\n  /** Legacy single strategy (mobile); kept for backwards-compat */\n  stackStrategy?: "default" | "reverse" | "custom";\n  /** Per-device stacking strategies */\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  /** Custom orders per device (used when corresponding strategy === "custom") */\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n  global?: {\n    id: string;\n    overrides?: unknown;\n    pinned?: boolean;\n    editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n  };\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"hiddenDeviceIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Legacy single strategy (mobile); kept for backwards-compat"},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Per-device stacking strategies"},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1},description:'Custom orders per device (used when corresponding strategy === "custom")'},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}},{key:"global",value:{name:"signature",type:"object",raw:'{\n  id: string;\n  overrides?: unknown;\n  pinned?: boolean;\n  editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"overrides",value:{name:"unknown",required:!1}},{key:"pinned",value:{name:"boolean",required:!1}},{key:"editingSize",value:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]}],raw:'Record<"desktop" | "tablet" | "mobile", number | null>'}],raw:'Partial<Record<"desktop" | "tablet" | "mobile", number | null>>',required:!1}}]},required:!1}}]}}],raw:"Partial<EditorFlags>",required:!0}}]}}]},name:"action"}],return:{name:"void"}}},description:""},editor:{required:!1,tsType:{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},description:""},viewport:{required:!1,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:"",defaultValue:{value:'"desktop"',computed:!1}},breakpoints:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]"},description:"",defaultValue:{value:"[]",computed:!1}},pageId:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:"",defaultValue:{value:"null",computed:!1}},crossNotices:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}}},"../../packages/ui/src/components/cms/page-builder/PageToolbar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_acme_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/i18n/src/index.ts"),_radix_ui_react_icons__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-icons@1.3.2_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-icons/dist/react-icons.esm.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_atoms__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../packages/ui/src/components/atoms/index.ts"),_utils_devicePresets__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../packages/ui/src/utils/devicePresets.ts"),_common_DeviceSelector__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../packages/ui/src/components/common/DeviceSelector.tsx"),_panels_BreakpointsPanel__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/panels/BreakpointsPanel.tsx"),_DesignMenu__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/DesignMenu.tsx"),_atoms_primitives_Inline__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Inline.tsx");const PageToolbar=({deviceId,setDeviceId,orientation,setOrientation,locale,setLocale,locales,progress,isValid,breakpoints,setBreakpoints,extraDevices,editingSizePx,setEditingSizePx,pagesNav,hideDeviceManager,hidePagesNav})=>{var _pagesNav_items;const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_1__.c3)();(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{const presets={1:(0,_utils_devicePresets__WEBPACK_IMPORTED_MODULE_5__.Jh)("desktop").id,2:(0,_utils_devicePresets__WEBPACK_IMPORTED_MODULE_5__.Jh)("tablet").id,3:(0,_utils_devicePresets__WEBPACK_IMPORTED_MODULE_5__.Jh)("mobile").id},handler=e=>{if(e.target instanceof HTMLElement&&("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName||"SELECT"===e.target.tagName||e.target.isContentEditable))return;const id=presets[e.key];id&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),setDeviceId(id),setOrientation("portrait"))};return window.addEventListener("keydown",handler),()=>window.removeEventListener("keydown",handler)},[setDeviceId,setOrientation]);const containerRef=react__WEBPACK_IMPORTED_MODULE_2__.useRef(null),[sizeOpen,setSizeOpen]=react__WEBPACK_IMPORTED_MODULE_2__.useState(!1),[sizeDraft,setSizeDraft]=react__WEBPACK_IMPORTED_MODULE_2__.useState(""),[breakpointsOpen,setBreakpointsOpen]=react__WEBPACK_IMPORTED_MODULE_2__.useState(!1),[designOpen,setDesignOpen]=react__WEBPACK_IMPORTED_MODULE_2__.useState(!1);return react__WEBPACK_IMPORTED_MODULE_2__.useEffect(()=>{const open=()=>setBreakpointsOpen(!0);return window.addEventListener("pb:open-breakpoints",open),()=>window.removeEventListener("pb:open-breakpoints",open)},[]),react__WEBPACK_IMPORTED_MODULE_2__.useEffect(()=>{const open=()=>setDesignOpen(!0);return window.addEventListener("pb:open-design",open),()=>window.removeEventListener("pb:open-design",open)},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex w-full flex-wrap items-center gap-2",ref:containerRef,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.lG,{open:designOpen,onOpenChange:setDesignOpen,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.Cf,{className:"w-full sm:w-96",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_DesignMenu__WEBPACK_IMPORTED_MODULE_8__.b,{breakpoints:null!=breakpoints?breakpoints:[],onChangeBreakpoints:list=>null==setBreakpoints?void 0:setBreakpoints(list)})})}),!hidePagesNav&&pagesNav&&(null===(_pagesNav_items=pagesNav.items)||void 0===_pagesNav_items?void 0:_pagesNav_items.length)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.l6,{value:pagesNav.current,onValueChange:v=>{const next=pagesNav.items.find(i=>i.value===v)||null;if(null==next?void 0:next.href)try{window.location.assign(next.href)}catch(e){}},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.bq,{className:"h-8 w-12 text-xs","aria-label":t("cms.preview.meta.page"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.yv,{})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.gC,{children:pagesNav.items.map(p=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.eb,{value:p.value,children:p.label},p.value))})]}):null,!hideDeviceManager&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_common_DeviceSelector__WEBPACK_IMPORTED_MODULE_6__.A,{deviceId,onChange:id=>{setDeviceId(id),setOrientation("portrait")},showLegacyButtons:!0,compact:!0,extraDevices}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.lG,{open:breakpointsOpen,onOpenChange:setBreakpointsOpen,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.zM,{asChild:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_4__.m_,{text:t("cms.builder.toolbar.manageBreakpoints"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.$n,{variant:"outline",size:"icon","aria-label":t("cms.builder.toolbar.manageBreakpoints"),children:"•••"})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_panels_BreakpointsPanel__WEBPACK_IMPORTED_MODULE_7__.A,{breakpoints:null!=breakpoints?breakpoints:[],onChange:list=>null==setBreakpoints?void 0:setBreakpoints(list)})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms__WEBPACK_IMPORTED_MODULE_4__.AM,{open:sizeOpen,onOpenChange:o=>{setSizeOpen(o),o&&setSizeDraft((null!=editingSizePx?editingSizePx:"").toString())},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_4__.m_,{text:t("cms.builder.toolbar.editingSizePx"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_4__.Wv,{asChild:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.$n,{variant:"outline",className:"h-8 px-2 text-xs","aria-label":t("cms.builder.toolbar.editingSizePx"),children:editingSizePx?`${editingSizePx}px`:t("cms.builder.toolbar.size")})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms__WEBPACK_IMPORTED_MODULE_4__.hl,{align:"start",className:"w-40 space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{className:"text-xs text-muted-foreground",htmlFor:"pb-editing-size",children:t("cms.builder.toolbar.editingSizePx")})," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{id:"pb-editing-size",type:"number",className:"h-8 w-full rounded border px-2 text-xs",placeholder:t("cms.builder.toolbar.pxPlaceholder"),value:sizeDraft,onChange:e=>setSizeDraft(e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.$n,{variant:"outline",className:"h-8 px-2 text-xs",onClick:()=>{if(!setEditingSizePx)return void setSizeOpen(!1);const v=sizeDraft.trim();if(!v)return setEditingSizePx(null),void setSizeOpen(!1);const n=parseInt(v,10);Number.isFinite(n)&&setEditingSizePx(Math.max(320,Math.min(1920,n))),setSizeOpen(!1)},children:t("actions.done")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.$n,{variant:"ghost",className:"h-8 px-2 text-xs",onClick:()=>{setSizeOpen(!1)},children:t("actions.cancel")})]})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_4__.m_,{text:t("cms.interactions.rotate"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.$n,{variant:"outline",size:"icon",onClick:()=>setOrientation("portrait"===orientation?"landscape":"portrait"),"aria-label":t("cms.interactions.rotate"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_icons__WEBPACK_IMPORTED_MODULE_10__.jfu,{className:("landscape"===orientation?"rotate-90 ":"")+"h-4 w-4","aria-hidden":"true"})})})]}),locales.length>1?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_primitives_Inline__WEBPACK_IMPORTED_MODULE_9__.c,{wrap:!0,gap:1,className:"ms-auto basis-full md:basis-auto",children:locales.length>3?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.l6,{value:locale,onValueChange:v=>setLocale(v),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.bq,{className:"h-8 w-28 text-xs","aria-label":t("cms.shopOverrides.locale"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.yv,{})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.gC,{children:locales.map(l=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.eb,{value:l,children:l.toUpperCase()},l))})]}):locales.map(l=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.$n,{variant:locale===l?"default":"outline",className:"h-8 px-2 text-xs",onClick:()=>setLocale(l),children:l.toUpperCase()},l))}):null,progress&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"basis-full text-xs",children:t("cms.builder.toolbar.uploadingImage",{done:String(progress.done),total:String(progress.total)})}),!1===isValid&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"basis-full text-xs text-warning",children:t("upload.orientationWrong",{required:t("common.orientation.landscape")})})]})},__WEBPACK_DEFAULT_EXPORT__=PageToolbar;PageToolbar.__docgenInfo={description:"",methods:[],displayName:"PageToolbar",props:{deviceId:{required:!0,tsType:{name:"string"},description:""},setDeviceId:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},orientation:{required:!0,tsType:{name:"union",raw:'"portrait" | "landscape"',elements:[{name:"literal",value:'"portrait"'},{name:"literal",value:'"landscape"'}]},description:""},setOrientation:{required:!0,tsType:{name:"signature",type:"function",raw:'(o: "portrait" | "landscape") => void',signature:{arguments:[{type:{name:"union",raw:'"portrait" | "landscape"',elements:[{name:"literal",value:'"portrait"'},{name:"literal",value:'"landscape"'}]},name:"o"}],return:{name:"void"}}},description:""},locale:{required:!0,tsType:{name:"Locale"},description:""},setLocale:{required:!0,tsType:{name:"signature",type:"function",raw:"(l: Locale) => void",signature:{arguments:[{type:{name:"Locale"},name:"l"}],return:{name:"void"}}},description:""},locales:{required:!0,tsType:{name:"unknown"},description:""},progress:{required:!0,tsType:{name:"union",raw:"{ done: number; total: number } | null",elements:[{name:"signature",type:"object",raw:"{ done: number; total: number }",signature:{properties:[{key:"done",value:{name:"number",required:!0}},{key:"total",value:{name:"number",required:!0}}]}},{name:"null"}]},description:""},isValid:{required:!0,tsType:{name:"union",raw:"boolean | null",elements:[{name:"boolean"},{name:"null"}]},description:""},breakpoints:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"Breakpoint[]"},description:""},setBreakpoints:{required:!1,tsType:{name:"signature",type:"function",raw:"(list: Breakpoint[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"Breakpoint[]"},name:"list"}],return:{name:"void"}}},description:""},extraDevices:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:'import("../../../utils/devicePresets").DevicePreset[]'},description:""},editingSizePx:{required:!1,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:""},setEditingSizePx:{required:!1,tsType:{name:"signature",type:"function",raw:"(px: number | null) => void",signature:{arguments:[{type:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},name:"px"}],return:{name:"void"}}},description:""},zoom:{required:!1,tsType:{name:"number"},description:""},setZoom:{required:!1,tsType:{name:"signature",type:"function",raw:"(z: number) => void",signature:{arguments:[{type:{name:"number"},name:"z"}],return:{name:"void"}}},description:""},pagesNav:{required:!1,tsType:{name:"signature",type:"object",raw:"{ items: { label: string; value: string; href: string }[]; current: string }",signature:{properties:[{key:"items",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ label: string; value: string; href: string }",signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}},{key:"href",value:{name:"string",required:!0}}]}}],raw:"{ label: string; value: string; href: string }[]",required:!0}},{key:"current",value:{name:"string",required:!0}}]}},description:""},hideDeviceManager:{required:!1,tsType:{name:"boolean"},description:""},hidePagesNav:{required:!1,tsType:{name:"boolean"},description:""}}}},"../../packages/ui/src/components/cms/page-builder/Palette.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>page_builder_Palette});var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),src=__webpack_require__("../../packages/i18n/src/index.ts"),navigation=__webpack_require__("../../__mocks__/next/navigation.js"),shared_utils_src=__webpack_require__("../../packages/shared-utils/src/index.ts"),shadcn=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),atoms=__webpack_require__("../../packages/ui/src/components/atoms/index.ts"),next_image=__webpack_require__("../../__mocks__/next/image.js"),types=__webpack_require__("../../node_modules/.pnpm/zod@3.25.73/node_modules/zod/v3/types.js"),browser=__webpack_require__("../../node_modules/.pnpm/ulid@3.0.1/node_modules/ulid/dist/browser/index.js");const presetCategories=["Hero","Features","Testimonials","Commerce"],section=(children,padding="40px")=>({id:(0,browser.Z0)(),type:"Section",padding,children}),presetList=[{id:"hero-simple",label:"Hero: Simple",description:"Centered headline with subcopy and CTA",preview:"/window.svg",previewType:"HeroBanner",category:"Hero",build:()=>section([{id:(0,browser.Z0)(),type:"HeroBanner",title:{en:"Welcome"},subtitle:{en:"Discover our new arrivals"},ctaLabel:{en:"Shop now"},ctaHref:"/shop"}])},{id:"hero-split",label:"Hero: Split Image",description:"Two-column hero with image",preview:"/window.svg",previewType:"MultiColumn",category:"Hero",build:()=>section([{id:(0,browser.Z0)(),type:"TwoColumn",children:[{id:(0,browser.Z0)(),type:"Heading",text:{en:"Elevate your style"}},{id:(0,browser.Z0)(),type:"Image",src:"/hero.jpg",alt:{en:"Hero"}}]}],"48px")},{id:"features-3-col",label:"Features: 3 Columns",description:"Three-value proposition grid",preview:"/window.svg",previewType:"MultiColumn",category:"Features",build:()=>section([{id:(0,browser.Z0)(),type:"MultiColumn",columns:3,children:[{id:(0,browser.Z0)(),type:"ValueProps",title:{en:"Fast"}},{id:(0,browser.Z0)(),type:"ValueProps",title:{en:"Reliable"}},{id:(0,browser.Z0)(),type:"ValueProps",title:{en:"Secure"}}]}],"24px")},{id:"features-4-grid",label:"Features: 4-Grid",description:"Icon grid with captions",preview:"/window.svg",previewType:"Grid",category:"Features",build:()=>section([{id:(0,browser.Z0)(),type:"MultiColumn",columns:4,children:Array.from({length:4}).map((_,i)=>({id:(0,browser.Z0)(),type:"ValueProps",title:{en:`Feature ${i+1}`}}))}])},{id:"testimonials-carousel",label:"Testimonials: Carousel",description:"Auto-playing testimonial quotes",preview:"/window.svg",previewType:"Testimonials",category:"Testimonials",build:()=>section([{id:(0,browser.Z0)(),type:"Testimonials",style:"carousel",items:[{id:(0,browser.Z0)(),quote:{en:"Love this!"},author:{en:"Alex"}},{id:(0,browser.Z0)(),quote:{en:"Changed my workflow."},author:{en:"Sam"}}]}])},{id:"testimonials-grid",label:"Testimonials: Grid",description:"Three-column static quotes",preview:"/window.svg",previewType:"Testimonials",category:"Testimonials",build:()=>section([{id:(0,browser.Z0)(),type:"MultiColumn",columns:3,children:[{id:(0,browser.Z0)(),type:"Testimonial",quote:{en:"Great quality"},author:{en:"Jamie"}},{id:(0,browser.Z0)(),type:"Testimonial",quote:{en:"Fast shipping"},author:{en:"Taylor"}},{id:(0,browser.Z0)(),type:"Testimonial",quote:{en:"Will buy again"},author:{en:"Riley"}}]}])},{id:"commerce-featured",label:"Commerce: Featured Products",description:"Carousel of featured products",preview:"/window.svg",previewType:"ProductCarousel",category:"Commerce",build:()=>section([{id:(0,browser.Z0)(),type:"ProductCarousel",query:{kind:"featured"}}])},{id:"commerce-grid",label:"Commerce: Product Grid",description:"4-up grid from collection",preview:"/window.svg",previewType:"ProductGrid",category:"Commerce",build:()=>section([{id:(0,browser.Z0)(),type:"ProductGrid",columns:4,query:{kind:"collection",handle:"new"}}])},{id:"commerce-cta",label:"Commerce: CTA Banner",description:"Promo strip with CTA",preview:"/window.svg",previewType:"HeroBanner",category:"Commerce",build:()=>section([{id:(0,browser.Z0)(),type:"Callout",title:{en:"Summer Sale"},ctaLabel:{en:"Shop sale"},ctaHref:"/sale"}],"20px")}];var previewImages=__webpack_require__("../../packages/ui/src/components/cms/page-builder/previewImages.ts"),Inline=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Inline.tsx"),Grid=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Grid.tsx");function currentSignature(keys){const parts=keys.map(k=>`${k}:${function readToken(key){try{const root=document.documentElement;return getComputedStyle(root).getPropertyValue(key).trim()||""}catch(e){return""}}(k)}`),isDark=document.documentElement.classList.contains("theme-dark")||window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;return parts.push("dark:"+(isDark?1:0)),parts.join("|")}function useThemeSignature(tokenKeys=["--color-bg","--color-fg"]){const[sig,setSig]=(0,react.useState)(()=>currentSignature(tokenKeys)),keysSig=(0,react.useMemo)(()=>tokenKeys.join("|"),[tokenKeys]),keysList=(0,react.useMemo)(()=>tokenKeys.slice(),[tokenKeys]);return(0,react.useEffect)(()=>{var _mql_addEventListener;let raf=0;const update=()=>{cancelAnimationFrame(raf),raf=requestAnimationFrame(()=>setSig(currentSignature(keysList)))},mo=new MutationObserver(update);mo.observe(document.documentElement,{attributes:!0,attributeFilter:["class","style"]});const mql=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)"),onMql=()=>update();null==mql||null===(_mql_addEventListener=mql.addEventListener)||void 0===_mql_addEventListener||_mql_addEventListener.call(mql,"change",onMql);const onStorage=e=>{"theme"===e.key&&update()};window.addEventListener("storage",onStorage);const onTheme=()=>update();window.addEventListener("pb:theme-changed",onTheme);const onTokens=e=>{try{const det=e.detail;(null==det?void 0:det.keys)&&!det.keys.some(k=>keysList.includes(k))||update()}catch(e){update()}};return window.addEventListener("pb:tokens-changed",onTokens),update(),()=>{var _mql_removeEventListener;cancelAnimationFrame(raf),mo.disconnect(),null==mql||null===(_mql_removeEventListener=mql.removeEventListener)||void 0===_mql_removeEventListener||_mql_removeEventListener.call(mql,"change",onMql),window.removeEventListener("storage",onStorage),window.removeEventListener("pb:theme-changed",onTheme),window.removeEventListener("pb:tokens-changed",onTokens)}},[keysSig,keysList]),(0,react.useMemo)(()=>sig,[sig])}var builtInSections_data=__webpack_require__("../../packages/ui/src/components/cms/page-builder/builtInSections.data.ts");function PresetsModal({onInsert,sourceUrl,open,onOpenChange,hideTrigger=!1}){const t=(0,src.c3)(),[presets,setPresets]=(0,react.useState)(presetList),[search,setSearch]=(0,react.useState)(""),[category,setCategory]=(0,react.useState)("All"),[loadError,setLoadError]=(0,react.useState)("");var _usePathname;const pathname=null!==(_usePathname=(0,navigation.usePathname)())&&void 0!==_usePathname?_usePathname:"",shop=(0,shared_utils_src.e6)(pathname);useThemeSignature(["--color-bg","--color-fg"]);(0,react.useEffect)(()=>{let aborted=!1;const effectiveUrl=sourceUrl||(shop?`/api/sections/${encodeURIComponent(shop)}/presets`:void 0);if(effectiveUrl)return(async()=>{try{const res=await fetch(effectiveUrl);if(!res.ok)return;const data=await res.json(),RemoteItem=types.Ik({id:types.Yj().min(1),label:types.Yj().min(1),description:types.Yj().optional(),preview:types.Yj().url().or(types.Yj().startsWith("/")).or(types.Yj().min(1)),category:types.k5(["Hero","Features","Testimonials","Commerce"]),template:types.Ik({type:types.Yj().min(1)}).passthrough()});var _data_items;const parsed=types.YO(RemoteItem).safeParse(Array.isArray(data)?data:null!==(_data_items=null==data?void 0:data.items)&&void 0!==_data_items?_data_items:[]);if(!parsed.success)return void setLoadError(t("cms.builder.presets.load.invalidFeed"));if(!aborted&&parsed.data.length){const mapped=parsed.data.map(r=>{var _r_template;return{id:r.id,label:r.label,description:r.description,preview:r.preview,previewType:(null===(_r_template=r.template)||void 0===_r_template?void 0:_r_template.type)||void 0,category:r.category,build:()=>r.template}});setPresets(mapped),setLoadError("")}}catch(e){setLoadError(t("cms.builder.presets.load.failed"))}})(),()=>{aborted=!0}},[sourceUrl,shop,t]),(0,react.useEffect)(()=>{let aborted=!1;const s=shop?String(shop):"";if(s)return(async()=>{try{const res=await fetch(`/cms/api/sections/${encodeURIComponent(s)}?page=1&pageSize=500`);if(!res.ok)return;const json=await res.json(),list=Array.isArray(json)?json:Array.isArray(null==json?void 0:json.items)?json.items:[];if(aborted||!Array.isArray(list)||0===list.length)return;const toCategory=tags=>{const t=(tags||[]).map(x=>x.toLowerCase());return t.includes("hero")?"Hero":t.includes("feature")||t.includes("features")?"Features":t.includes("testimonial")||t.includes("testimonials")?"Testimonials":t.includes("commerce")||t.includes("product")||t.includes("grid")||t.includes("carousel")?"Commerce":"Hero"},mapped=list.map(s=>{var _s_template;return{id:`section:${s.id}`,label:s.label,description:Array.isArray(s.tags)&&s.tags.length?s.tags.join(", "):void 0,preview:s.thumbnail||"/window.svg",previewType:(null===(_s_template=s.template)||void 0===_s_template?void 0:_s_template.type)||void 0,category:toCategory(s.tags),build:()=>s.template}});setPresets(prev=>{const existingIds=new Set(prev.map(p=>p.id)),dedup=mapped.filter(m=>!existingIds.has(m.id));return[...prev,...dedup]})}catch(e){}})(),()=>{aborted=!0}},[shop]);const filtered=(0,react.useMemo)(()=>{const q=search.trim().toLowerCase();return presets.filter(p=>("All"===category||p.category===category)&&(!q||(p.label.toLowerCase().includes(q)||(p.description||"").toLowerCase().includes(q))))},[presets,search,category]),builtInSections=(0,react.useMemo)(()=>(0,builtInSections_data.G)(k=>t(k)),[t]),builtInsFiltered=(0,react.useMemo)(()=>{const q=search.trim().toLowerCase();return builtInSections.filter(s=>{if(!q)return!0;var _s_description;return`${s.label}\n${null!==(_s_description=s.description)&&void 0!==_s_description?_s_description:""}`.toLowerCase().includes(q)})},[search,builtInSections]),byCategory=(0,react.useMemo)(()=>{const map=new Map;for(const c of["All",...presetCategories])map.set(c,[]);for(const p of filtered)map.set(p.category,[...map.get(p.category)||[],p]);return map},[filtered]);return(0,jsx_runtime.jsxs)(shadcn.lG,{open,onOpenChange,children:[!hideTrigger&&(0,jsx_runtime.jsx)(shadcn.zM,{asChild:!0,children:(0,jsx_runtime.jsx)(atoms.m_,{text:t("cms.builder.presets.insertSection.tooltip"),children:(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",children:t("cms.builder.presets.addSection")})})}),(0,jsx_runtime.jsxs)(shadcn.Cf,{children:[(0,jsx_runtime.jsx)(shadcn.L3,{children:t("cms.builder.presets.sectionLibrary.title")}),(0,jsx_runtime.jsx)(shadcn.rr,{children:t("cms.builder.presets.sectionLibrary.description")}),loadError&&(0,jsx_runtime.jsx)("div",{className:"rounded border border-red-200 bg-red-50 p-2 text-xs text-red-800",children:loadError}),(0,jsx_runtime.jsxs)(Inline.c,{alignY:"center",gap:2,className:"py-2",children:[(0,jsx_runtime.jsx)("input",{type:"text",value:search,onChange:e=>setSearch(e.target.value),placeholder:t("cms.builder.presets.search.placeholder"),className:"flex-1 rounded border p-2 text-sm","aria-label":t("cms.builder.presets.search.aria")}),(0,jsx_runtime.jsxs)("select",{value:category,onChange:e=>setCategory(e.target.value),className:"rounded border p-2 text-sm","aria-label":t("cms.builder.presets.category.aria"),children:[(0,jsx_runtime.jsx)("option",{value:"All",children:t("cms.builder.presets.category.all")}),presetCategories.map(c=>(0,jsx_runtime.jsx)("option",{value:c,children:c},c))]})]}),builtInsFiltered.length>0&&(0,jsx_runtime.jsxs)("div",{className:"mb-4",children:[(0,jsx_runtime.jsx)("div",{className:"mb-2 text-sm font-semibold",children:t("cms.builder.presets.builtIn.title")}),(0,jsx_runtime.jsx)(Grid.x,{cols:2,gap:4,children:builtInsFiltered.map(p=>{const resolvedPreview="/window.svg"===p.preview?(0,previewImages.w)(p.previewType):p.preview;return(0,jsx_runtime.jsxs)("button",{type:"button",className:"rounded border p-2 text-start hover:bg-accent min-h-10 min-w-10",onClick:()=>onInsert(p.build()),children:[(0,jsx_runtime.jsx)(next_image.A,{src:resolvedPreview,alt:"",width:300,height:160,className:"w-full rounded",..."string"==typeof resolvedPreview&&resolvedPreview.startsWith("data:")?{unoptimized:!0}:{}}),(0,jsx_runtime.jsx)("div",{className:"mt-2 font-medium",children:p.label}),p.description&&(0,jsx_runtime.jsx)("div",{className:"text-sm text-muted-foreground",children:p.description})]},p.id)})})]}),presetCategories.map(c=>{const items=byCategory.get(c)||[];return 0===items.length?null:(0,jsx_runtime.jsxs)("div",{className:"mb-4",children:[(0,jsx_runtime.jsx)("div",{className:"mb-2 text-sm font-semibold",children:c}),(0,jsx_runtime.jsx)(Grid.x,{cols:2,gap:4,children:items.map(p=>{const resolvedPreview="/window.svg"===p.preview?(0,previewImages.w)(p.previewType||"Section"):p.preview;return(0,jsx_runtime.jsxs)("button",{type:"button",className:"rounded border p-2 text-start hover:bg-accent min-h-10 min-w-10",onClick:()=>onInsert(p.build()),children:[(0,jsx_runtime.jsx)(next_image.A,{src:resolvedPreview,alt:"",width:300,height:160,className:"w-full rounded",..."string"==typeof resolvedPreview&&resolvedPreview.startsWith("data:")?{unoptimized:!0}:{}}),(0,jsx_runtime.jsx)("div",{className:"mt-2 font-medium",children:p.label}),p.description&&(0,jsx_runtime.jsx)("div",{className:"text-sm text-muted-foreground",children:p.description})]},p.id)})})]},c)}),Array.from(byCategory.values()).every(arr=>0===(arr||[]).length)&&(0,jsx_runtime.jsx)("div",{className:"rounded border bg-muted/30 p-4 text-sm text-muted-foreground",children:t("cms.builder.presets.empty")})]})]})}PresetsModal.__docgenInfo={description:"",methods:[],displayName:"PresetsModal",props:{onInsert:{required:!0,tsType:{name:"signature",type:"function",raw:"(component: PageComponent) => void",signature:{arguments:[{type:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},name:"component"}],return:{name:"void"}}},description:""},sourceUrl:{required:!1,tsType:{name:"string"},description:""},open:{required:!1,tsType:{name:"boolean"},description:""},onOpenChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},hideTrigger:{required:!1,tsType:{name:"boolean"},description:"When true, do not render the trigger button; control externally via open/onOpenChange",defaultValue:{value:"false",computed:!1}}}};var libraryStore=__webpack_require__("../../packages/ui/src/components/cms/page-builder/libraryStore.ts"),templateValidation=__webpack_require__("../../packages/platform-core/src/validation/templateValidation.ts"),options=__webpack_require__("../../packages/platform-core/src/validation/options.ts"),console=__webpack_require__("../../node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");function LibraryImportExport({shop,onAfterChange}){const t=(0,src.c3)(),translate=(0,react.useCallback)((key,vars)=>String(t(key,vars)),[t]),[open,setOpen]=(0,react.useState)(!1),[message,setMessage]=(0,react.useState)(""),[busy,setBusy]=(0,react.useState)(!1),fileInputRef=(0,react.useRef)(null),[items,setItems]=(0,react.useState)([]),refresh=(0,react.useCallback)(async()=>{const remote=await(0,libraryStore.$r)(shop);setItems(null!=remote?remote:(0,libraryStore.Eb)(shop))},[shop]);(0,react.useEffect)(()=>{open&&refresh()},[open,refresh]);const handleExport=(0,react.useCallback)(async()=>{setBusy(!0);try{await refresh();const blob=new Blob([JSON.stringify(items,null,2)],{type:"application/json"}),a=document.createElement("a"),dt=new Date,ymd=`${dt.getFullYear()}-${String(dt.getMonth()+1).padStart(2,"0")}-${String(dt.getDate()).padStart(2,"0")}`;a.href=URL.createObjectURL(blob),a.download=`pb-library-${shop||"default"}-${ymd}.json`,document.body.appendChild(a),a.click(),a.remove(),setMessage(translate("cms.library.exported"))}catch(err){console.error(err),setMessage(translate("cms.library.exportFailed"))}finally{setBusy(!1)}},[items,refresh,shop,translate]),handleImportFiles=(0,react.useCallback)(async files=>{if(files&&files.length){setBusy(!0);try{const f=files[0],text=await f.text(),parsed=JSON.parse(text),inItems=Array.isArray(parsed)?parsed:"object"==typeof parsed&&null!==parsed&&"items"in parsed&&Array.isArray(parsed.items)?parsed.items:[];if(!inItems.length)throw new Error(translate("cms.library.importInvalid"));const clones=inItems.map(item=>{const clone={...item};return clone.id=(0,browser.Z0)(),delete clone.ownerUserId,clone.shared=!1,clone});for(const it of clones){const templates=it.templates&&Array.isArray(it.templates)?it.templates:it.template?[it.template]:[];if(templates.length){const pre=(0,templateValidation.w)(templates,(0,options.QG)());if(!1===pre.ok)throw new Error([translate("cms.library.importValidationFailed"),...pre.errors||[]].filter(Boolean).join("\n"))}}if(shop)await fetch(`/api/library?shop=${encodeURIComponent(shop)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:clones})}),await refresh();else{for(const clone of clones)await(0,libraryStore.dP)(shop,clone);await refresh()}null==onAfterChange||onAfterChange(),setMessage(translate("cms.library.importedN",{count:inItems.length}))}catch(err){console.error(err),setMessage(translate("cms.library.importFailed"))}finally{setBusy(!1),fileInputRef.current&&(fileInputRef.current.value="")}}},[shop,onAfterChange,refresh,translate]),onDrop=(0,react.useCallback)(e=>{var _e_dataTransfer,_e_dataTransfer_files;e.preventDefault(),e.stopPropagation(),handleImportFiles(null!==(_e_dataTransfer_files=null===(_e_dataTransfer=e.dataTransfer)||void 0===_e_dataTransfer?void 0:_e_dataTransfer.files)&&void 0!==_e_dataTransfer_files?_e_dataTransfer_files:null)},[handleImportFiles]),onDragOver=(0,react.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),canClear=(0,react.useMemo)(()=>items.length>0,[items.length]);return(0,jsx_runtime.jsxs)(shadcn.lG,{open,onOpenChange:setOpen,children:[(0,jsx_runtime.jsx)(shadcn.zM,{asChild:!0,children:(0,jsx_runtime.jsx)(shadcn.$n,{variant:"outline",children:t("cms.library.importExport.button")})}),(0,jsx_runtime.jsxs)(shadcn.Cf,{children:[(0,jsx_runtime.jsx)(shadcn.L3,{children:t("cms.library.importExport.title")}),(0,jsx_runtime.jsx)(shadcn.rr,{className:"text-sm text-muted-foreground",children:t("cms.library.importExport.description")}),(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",disabled:busy,onClick:handleExport,children:t("cms.library.exportJSON")}),(0,jsx_runtime.jsx)("input",{ref:fileInputRef,type:"file",accept:"application/json",className:"hidden",onChange:e=>{handleImportFiles(e.target.files)}})," ",(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",disabled:busy,onClick:()=>{var _fileInputRef_current;return null===(_fileInputRef_current=fileInputRef.current)||void 0===_fileInputRef_current?void 0:_fileInputRef_current.click()},children:t("cms.library.importJSON")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",disabled:busy||!canClear,onClick:async()=>{confirm(translate("cms.library.clearConfirm"))&&(await(0,libraryStore.fV)(shop),await refresh(),null==onAfterChange||onAfterChange())},children:t("cms.library.clear")})]}),(0,jsx_runtime.jsx)("div",{onDrop,onDragOver,className:"rounded border border-dashed p-6 text-center text-sm text-muted-foreground",role:"button",tabIndex:0,onKeyDown:e=>{var _fileInputRef_current;"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),null===(_fileInputRef_current=fileInputRef.current)||void 0===_fileInputRef_current||_fileInputRef_current.click())},"aria-label":translate("cms.library.dropAria"),children:t("cms.library.dropHelp")}),(0,jsx_runtime.jsx)("div",{"aria-live":"polite",className:"text-sm",children:message}),(0,jsx_runtime.jsxs)("div",{className:"text-xs text-muted-foreground",children:[t("cms.library.itemsCount")," ",items.length]})]})]})]})}LibraryImportExport.__docgenInfo={description:"",methods:[],displayName:"LibraryImportExport",props:{shop:{required:!0,tsType:{name:"union",raw:"string | null | undefined",elements:[{name:"string"},{name:"null"},{name:"undefined"}]},description:""},onAfterChange:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var appInstallStore=__webpack_require__("../../packages/ui/src/components/cms/page-builder/appInstallStore.ts");var paletteData=__webpack_require__("../../packages/ui/src/components/cms/page-builder/paletteData.ts");var usePreviewTokens=__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/usePreviewTokens.ts"),page_builder_textThemes=__webpack_require__("../../packages/ui/src/components/cms/page-builder/textThemes.ts");var sortable_esm=__webpack_require__("../../node_modules/.pnpm/@dnd-kit+sortable@10.0.0_@dnd-kit+core@6.3.1_react-dom@19.2.0-canary-3fbfb9ba-20250409__571aab38212e666fc4f105bb05843619/node_modules/@dnd-kit/sortable/dist/sortable.esm.js"),utilities_esm=__webpack_require__("../../node_modules/.pnpm/@dnd-kit+utilities@3.2.2_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@dnd-kit/utilities/dist/utilities.esm.js"),react_icons_esm=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-icons@1.3.2_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-icons/dist/react-icons.esm.js");const ICONS={Header:(0,jsx_runtime.jsx)(react_icons_esm.KcF,{className:"h-6 w-6"}),Footer:(0,jsx_runtime.jsx)(react_icons_esm.mLz,{className:"h-6 w-6"}),Section:(0,jsx_runtime.jsx)(react_icons_esm.DNu,{className:"h-6 w-6"}),MultiColumn:(0,jsx_runtime.jsx)(react_icons_esm.Tvv,{className:"h-6 w-6"}),StackFlex:(0,jsx_runtime.jsx)(react_icons_esm.mLz,{className:"h-6 w-6"}),Grid:(0,jsx_runtime.jsx)(react_icons_esm.Tvv,{className:"h-6 w-6"}),CarouselContainer:(0,jsx_runtime.jsx)(react_icons_esm.Abk,{className:"h-6 w-6"}),TabsAccordionContainer:(0,jsx_runtime.jsx)(react_icons_esm.mLz,{className:"h-6 w-6"}),Dataset:(0,jsx_runtime.jsx)(react_icons_esm.KbA,{className:"h-6 w-6"}),Repeater:(0,jsx_runtime.jsx)(react_icons_esm.mLz,{className:"h-6 w-6"}),Bind:(0,jsx_runtime.jsx)(react_icons_esm.FnH,{className:"h-6 w-6"}),Text:(0,jsx_runtime.jsx)(react_icons_esm.VNq,{className:"h-6 w-6"}),Image:(0,jsx_runtime.jsx)(react_icons_esm.xfq,{className:"h-6 w-6"}),Divider:(0,jsx_runtime.jsx)(react_icons_esm.X_f,{className:"h-6 w-6"}),Spacer:(0,jsx_runtime.jsx)(react_icons_esm.mLz,{className:"h-6 w-6"}),CustomHtml:(0,jsx_runtime.jsx)(react_icons_esm.loI,{className:"h-6 w-6"}),Button:(0,jsx_runtime.jsx)(react_icons_esm.Gg5,{className:"h-6 w-6"}),NewsletterForm:(0,jsx_runtime.jsx)(react_icons_esm.snM,{className:"h-6 w-6"}),PromoBanner:(0,jsx_runtime.jsx)(react_icons_esm.Gg5,{className:"h-6 w-6"}),CategoryList:(0,jsx_runtime.jsx)(react_icons_esm.Tvv,{className:"h-6 w-6"}),AnnouncementBar:(0,jsx_runtime.jsx)(react_icons_esm.Gg5,{className:"h-6 w-6"}),HeroBanner:(0,jsx_runtime.jsx)(react_icons_esm.Gg5,{className:"h-6 w-6"}),ValueProps:(0,jsx_runtime.jsx)(react_icons_esm.Gg5,{className:"h-6 w-6"}),ReviewsCarousel:(0,jsx_runtime.jsx)(react_icons_esm.Abk,{className:"h-6 w-6"}),ProductGrid:(0,jsx_runtime.jsx)(react_icons_esm.Tvv,{className:"h-6 w-6"}),ProductCarousel:(0,jsx_runtime.jsx)(react_icons_esm.Abk,{className:"h-6 w-6"}),RecommendationCarousel:(0,jsx_runtime.jsx)(react_icons_esm.Abk,{className:"h-6 w-6"}),FeaturedProduct:(0,jsx_runtime.jsx)(react_icons_esm.Gg5,{className:"h-6 w-6"}),ImageSlider:(0,jsx_runtime.jsx)(react_icons_esm.xfq,{className:"h-6 w-6"}),CollectionList:(0,jsx_runtime.jsx)(react_icons_esm.Tvv,{className:"h-6 w-6"}),Gallery:(0,jsx_runtime.jsx)(react_icons_esm.xfq,{className:"h-6 w-6"}),Lookbook:(0,jsx_runtime.jsx)(react_icons_esm.xfq,{className:"h-6 w-6"}),ContactForm:(0,jsx_runtime.jsx)(react_icons_esm.XKI,{className:"h-6 w-6"}),ContactFormWithMap:(0,jsx_runtime.jsx)(react_icons_esm.XKI,{className:"h-6 w-6"}),BlogListing:(0,jsx_runtime.jsx)(react_icons_esm.XKI,{className:"h-6 w-6"}),Testimonials:(0,jsx_runtime.jsx)(react_icons_esm.XKI,{className:"h-6 w-6"}),TestimonialSlider:(0,jsx_runtime.jsx)(react_icons_esm.XKI,{className:"h-6 w-6"}),MapBlock:(0,jsx_runtime.jsx)(react_icons_esm.$p$,{className:"h-6 w-6"}),StoreLocatorBlock:(0,jsx_runtime.jsx)(react_icons_esm.$p$,{className:"h-6 w-6"}),VideoBlock:(0,jsx_runtime.jsx)(react_icons_esm.npA,{className:"h-6 w-6"}),FAQBlock:(0,jsx_runtime.jsx)(react_icons_esm.tiF,{className:"h-6 w-6"}),CountdownTimer:(0,jsx_runtime.jsx)(react_icons_esm.O4,{className:"h-6 w-6"}),SocialLinks:(0,jsx_runtime.jsx)(react_icons_esm.FnH,{className:"h-6 w-6"}),SocialFeed:(0,jsx_runtime.jsx)(react_icons_esm.mLz,{className:"h-6 w-6"}),SocialProof:(0,jsx_runtime.jsx)(react_icons_esm.Gg5,{className:"h-6 w-6"}),NewsletterSignup:(0,jsx_runtime.jsx)(react_icons_esm.snM,{className:"h-6 w-6"}),SearchBar:(0,jsx_runtime.jsx)(react_icons_esm.$p$,{className:"h-6 w-6"}),PricingTable:(0,jsx_runtime.jsx)(react_icons_esm.KbA,{className:"h-6 w-6"}),Tabs:(0,jsx_runtime.jsx)(react_icons_esm.mLz,{className:"h-6 w-6"}),ProductComparison:(0,jsx_runtime.jsx)(react_icons_esm.KbA,{className:"h-6 w-6"}),GiftCardBlock:(0,jsx_runtime.jsx)(react_icons_esm.Gg5,{className:"h-6 w-6"}),FormBuilderBlock:(0,jsx_runtime.jsx)(react_icons_esm.XKI,{className:"h-6 w-6"}),PopupModal:(0,jsx_runtime.jsx)(react_icons_esm.FnH,{className:"h-6 w-6"}),ProductBundle:(0,jsx_runtime.jsx)(react_icons_esm.mLz,{className:"h-6 w-6"}),ProductFilter:(0,jsx_runtime.jsx)(react_icons_esm.$p$,{className:"h-6 w-6"}),HeaderSection:(0,jsx_runtime.jsx)(react_icons_esm.KcF,{className:"h-6 w-6"}),FooterSection:(0,jsx_runtime.jsx)(react_icons_esm.mLz,{className:"h-6 w-6"}),CampaignHeroSection:(0,jsx_runtime.jsx)(react_icons_esm.xfq,{className:"h-6 w-6"}),PromoTilesSection:(0,jsx_runtime.jsx)(react_icons_esm.Tvv,{className:"h-6 w-6"}),ShowcaseSection:(0,jsx_runtime.jsx)(react_icons_esm.Abk,{className:"h-6 w-6"}),CollectionSection:(0,jsx_runtime.jsx)(react_icons_esm.Tvv,{className:"h-6 w-6"}),CurrencySelector:(0,jsx_runtime.jsx)(react_icons_esm.FnH,{className:"h-6 w-6"}),RentalAvailabilitySection:(0,jsx_runtime.jsx)(react_icons_esm.O4,{className:"h-6 w-6"}),RentalTermsSection:(0,jsx_runtime.jsx)(react_icons_esm.XKI,{className:"h-6 w-6"}),StructuredDataSection:(0,jsx_runtime.jsx)(react_icons_esm.loI,{className:"h-6 w-6"}),ConsentSection:(0,jsx_runtime.jsx)(react_icons_esm.tiF,{className:"h-6 w-6"}),AnalyticsPixelsSection:(0,jsx_runtime.jsx)(react_icons_esm.Abk,{className:"h-6 w-6"}),ReviewsSection:(0,jsx_runtime.jsx)(react_icons_esm.Gg5,{className:"h-6 w-6"}),CrossSellSection:(0,jsx_runtime.jsx)(react_icons_esm.Tvv,{className:"h-6 w-6"}),FinancingBadge:(0,jsx_runtime.jsx)(react_icons_esm.Gg5,{className:"h-6 w-6"}),CertificateCheck:(0,jsx_runtime.jsx)(react_icons_esm.$p$,{className:"h-6 w-6"}),PoliciesAccordion:(0,jsx_runtime.jsx)(react_icons_esm.XKI,{className:"h-6 w-6"}),StickyBuyBar:(0,jsx_runtime.jsx)(react_icons_esm.FnH,{className:"h-6 w-6"}),PDPDetailsSection:(0,jsx_runtime.jsx)(react_icons_esm.VNq,{className:"h-6 w-6"}),GuidedSellingSection:(0,jsx_runtime.jsx)(react_icons_esm.tiF,{className:"h-6 w-6"}),CartSection:(0,jsx_runtime.jsx)(react_icons_esm.KbA,{className:"h-6 w-6"}),CheckoutSection:(0,jsx_runtime.jsx)(react_icons_esm.KbA,{className:"h-6 w-6"}),ThankYouSection:(0,jsx_runtime.jsx)(react_icons_esm.Gg5,{className:"h-6 w-6"}),StoreLocatorSection:(0,jsx_runtime.jsx)(react_icons_esm.$p$,{className:"h-6 w-6"}),EmailReferralSection:(0,jsx_runtime.jsx)(react_icons_esm.snM,{className:"h-6 w-6"}),DSARSection:(0,jsx_runtime.jsx)(react_icons_esm.XKI,{className:"h-6 w-6"}),AgeGateSection:(0,jsx_runtime.jsx)(react_icons_esm.tiF,{className:"h-6 w-6"}),AccountSection:(0,jsx_runtime.jsx)(react_icons_esm.KbA,{className:"h-6 w-6"}),RentalManageSection:(0,jsx_runtime.jsx)(react_icons_esm.O4,{className:"h-6 w-6"})};const PaletteItem=(0,react.memo)(function PaletteItem({type,label,icon,description,previewImage,onAdd}){const{attributes,listeners,setNodeRef,transform,isDragging}=(0,sortable_esm.gl)({id:type,data:{from:"palette",type}}),[open,setOpen]=(0,react.useState)(!1),handleKeyDown=(0,react.useCallback)(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),onAdd(type,label))},[onAdd,type,label]),glyph=function getPaletteGlyph(type){const generic=(0,jsx_runtime.jsx)(react_icons_esm.FnH,{className:"h-6 w-6"});return function safe(node,fallback){try{return null!=node?node:fallback}catch(e){return fallback}}(ICONS[type],generic)}(type),themeSig=useThemeSignature(["--color-bg","--color-fg"]),finalPreview=(0,react.useMemo)(()=>{const isData="string"==typeof previewImage&&previewImage.startsWith("data:"),isDefault=previewImage===paletteData.DE;return isData||isDefault?(0,previewImages.w)(type):previewImage},[previewImage,type,themeSig]),content=(0,jsx_runtime.jsxs)("div",{ref:setNodeRef,...attributes,...listeners,role:"button",tabIndex:0,"data-cy":`pb-palette-item-${type}`,"aria-pressed":isDragging,"aria-describedby":"pb-drag-instructions",title:"Drag or press space/enter to add",style:{transform:utilities_esm.Ks.Transform.toString(transform)},className:"flex cursor-grab items-center gap-2 rounded border p-2 text-sm",onMouseEnter:()=>setOpen(!0),onMouseLeave:()=>setOpen(!1),onFocus:()=>setOpen(!0),onBlur:()=>setOpen(!1),onKeyDown:handleKeyDown,children:[glyph?(0,jsx_runtime.jsx)("span",{"aria-hidden":!0,className:"text-foreground",children:glyph}):(0,jsx_runtime.jsx)(next_image.A,{src:icon,alt:"","aria-hidden":"true",className:"h-6 w-6 rounded",width:24,height:24,loading:"lazy"}),(0,jsx_runtime.jsx)("span",{children:label})]});return(0,jsx_runtime.jsxs)(atoms.AM,{open,onOpenChange:setOpen,children:[(0,jsx_runtime.jsx)(atoms.Wv,{asChild:!0,children:(0,jsx_runtime.jsx)(atoms.m_,{text:description?`${label} — ${description}`:label,children:content})}),(0,jsx_runtime.jsxs)(atoms.hl,{className:"w-64 space-y-2 text-sm",children:[(()=>{const isData="string"==typeof finalPreview&&finalPreview.startsWith("data:");return(0,jsx_runtime.jsx)(next_image.A,{src:finalPreview,alt:"",className:"w-full rounded",width:400,height:225,loading:"lazy",...isData?{unoptimized:!0}:{}})})(),description&&(0,jsx_runtime.jsx)("p",{children:description})]})]})}),page_builder_PaletteItem=PaletteItem;PaletteItem.__docgenInfo={description:"",methods:[],displayName:"PaletteItem",props:{type:{required:!0,tsType:{name:"union",raw:"| keyof typeof atomRegistry\n| keyof typeof moleculeRegistry\n| keyof typeof organismRegistry\n| keyof typeof containerRegistry\n| keyof typeof layoutRegistry",elements:[{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"}]},description:""},label:{required:!0,tsType:{name:"string"},description:""},icon:{required:!0,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"string"},description:""},previewImage:{required:!0,tsType:{name:"string"},description:""},onAdd:{required:!0,tsType:{name:"signature",type:"function",raw:"(type: ComponentType, label: string) => void",signature:{arguments:[{type:{name:"union",raw:"| keyof typeof atomRegistry\n| keyof typeof moleculeRegistry\n| keyof typeof organismRegistry\n| keyof typeof containerRegistry\n| keyof typeof layoutRegistry",elements:[{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"}]},name:"type"},{type:{name:"string"},name:"label"}],return:{name:"void"}}},description:""}}};var rules=__webpack_require__("../../packages/ui/src/components/cms/page-builder/rules.ts"),primitives=__webpack_require__("../../packages/ui/src/components/atoms/primitives/index.ts");function RecentsList({recents,paletteIndex,onAdd}){return 0===recents.length?null:(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)(primitives.cV,{className:"justify-between",gap:2,children:(0,jsx_runtime.jsx)("h4",{className:"font-semibold capitalize",children:"Recent"})}),(0,jsx_runtime.jsx)(primitives.BJ,{gap:2,children:recents.map(type=>{const match=paletteIndex.get(type);if(match)return match;const label=type.replace(/([A-Z])/g," $1").trim();return{type,label,icon:paletteData.DE,description:"",previewImage:paletteData.DE}}).filter(p=>(0,rules.Ai)(p.type)).map(p=>(0,jsx_runtime.jsx)(page_builder_PaletteItem,{type:p.type,label:p.label,icon:p.icon,description:p.description,previewImage:p.previewImage,onAdd},`recent-${p.type}`))})]})}function LibraryPaletteItem({item,onDelete,onToggleShare,onUpdate,shop}){const t=(0,src.c3)(),{attributes,listeners,setNodeRef,transform,isDragging}=(0,sortable_esm.gl)({id:`lib-${item.id}`,data:{from:"library",template:item.template,templates:item.templates,label:item.label,thumbnail:item.thumbnail}}),[editing,setEditing]=(0,react.useState)(!1),[label,setLabel]=(0,react.useState)(item.label),[tagInput,setTagInput]=(0,react.useState)(""),[tags,setTags]=(0,react.useState)(Array.isArray(item.tags)?item.tags:[]),fileInputRef=(0,react.useRef)(null),addTag=(0,react.useCallback)(()=>{const t=tagInput.trim();t&&(setTags(prev=>prev.includes(t)?prev:[...prev,t]),setTagInput(""))},[tagInput]),handleKeyDown=(0,react.useCallback)(e=>{"Enter"!==e.key&&","!==e.key||(e.preventDefault(),addTag())},[addTag]),handleThumbFile=(0,react.useCallback)(async f=>{if(f)try{if(shop){const fd=new FormData;fd.append("file",f);const res=await fetch(`/api/media?shop=${encodeURIComponent(shop)}&orientation=landscape`,{method:"POST",body:fd});if(res.ok){const media=await res.json(),url=media&&(media.url||media.fileUrl||media.path);if(url)return void onUpdate({thumbnail:url})}}await new Promise((resolve,reject)=>{const reader=new FileReader;reader.onerror=()=>reject(new Error("read error")),reader.onload=()=>{onUpdate({thumbnail:String(reader.result)}),resolve()},reader.readAsDataURL(f)})}catch(e){}finally{fileInputRef.current&&(fileInputRef.current.value="")}},[onUpdate,shop]);return(0,jsx_runtime.jsxs)("div",{ref:setNodeRef,...attributes,...listeners,role:"button",tabIndex:0,"aria-pressed":isDragging,"aria-describedby":"pb-drag-instructions",title:t("pb.library.dragToInsert"),style:{transform:utilities_esm.Ks.Transform.toString(transform)},className:"flex cursor-grab items-center gap-2 rounded border p-2 text-sm",children:[item.thumbnail?(0,jsx_runtime.jsx)(next_image.A,{src:item.thumbnail,alt:"","aria-hidden":"true",className:"h-6 w-6 rounded object-cover",width:24,height:24,loading:"lazy"}):(0,jsx_runtime.jsx)(next_image.A,{src:"/window.svg",alt:"","aria-hidden":"true",className:"h-6 w-6 rounded",width:24,height:24,loading:"lazy"}),editing?(0,jsx_runtime.jsxs)("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:[(0,jsx_runtime.jsx)("input",{className:"min-w-0 flex-1 rounded border px-2 py-1 text-xs",value:label,onChange:e=>setLabel(e.target.value)}),(0,jsx_runtime.jsx)("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:(0,jsx_runtime.jsxs)("div",{className:"flex min-w-0 flex-1 flex-wrap items-center gap-1",children:[tags.map(t=>(0,jsx_runtime.jsxs)("span",{className:"inline-flex items-center gap-1 rounded bg-muted px-2 py-0.5 text-xs",children:[t,(0,jsx_runtime.jsx)("button",{type:"button","aria-label":`Remove ${t}`,className:"inline-flex min-h-10 min-w-10 items-center justify-center rounded border px-1",onClick:e=>{e.stopPropagation(),setTags(prev=>prev.filter(x=>x!==t))},children:"×"})]},t)),(0,jsx_runtime.jsx)("input",{className:"min-w-24 flex-1 rounded border px-2 py-1 text-xs",placeholder:"add tag",value:tagInput,onChange:e=>setTagInput(e.target.value),onKeyDown:handleKeyDown,"aria-label":"Add tag"}),(0,jsx_runtime.jsx)("button",{type:"button",className:"min-h-10 min-w-10 rounded border px-2 text-xs",onClick:e=>{e.stopPropagation(),addTag()},children:"Add"})]})})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("span",{className:"flex-1 truncate",title:item.label,children:item.label}),Array.isArray(item.tags)&&item.tags.length>0&&(0,jsx_runtime.jsx)("span",{className:"hidden md:block text-xs text-muted-foreground truncate w-40",title:item.tags.join(", "),children:item.tags.join(", ")})]}),(0,jsx_runtime.jsx)("input",{ref:fileInputRef,type:"file",accept:"image/*",className:"hidden",onChange:e=>{var _e_target_files;handleThumbFile(null===(_e_target_files=e.target.files)||void 0===_e_target_files?void 0:_e_target_files[0])}}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("pb.library.uploadThumbnail"),children:(0,jsx_runtime.jsx)("button",{type:"button","aria-label":t("pb.library.uploadThumbnail"),className:"min-h-10 min-w-10 rounded border px-2 text-xs",onClick:e=>{var _fileInputRef_current;e.stopPropagation(),null===(_fileInputRef_current=fileInputRef.current)||void 0===_fileInputRef_current||_fileInputRef_current.click()},title:t("pb.library.uploadThumbnail"),children:t("pb.library.thumb")})}),item.thumbnail&&(0,jsx_runtime.jsx)(atoms.m_,{text:t("pb.library.clearThumbnail"),children:(0,jsx_runtime.jsx)("button",{type:"button","aria-label":t("pb.library.clearThumbnail"),className:"min-h-10 min-w-10 rounded border px-2 text-xs",onClick:e=>{e.stopPropagation(),onUpdate({thumbnail:null})},children:t("pb.library.clear")})}),editing?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(atoms.m_,{text:t("pb.library.saveChanges"),children:(0,jsx_runtime.jsx)("button",{type:"button","aria-label":t("pb.library.save"),className:"min-h-10 min-w-10 rounded border px-2 text-xs",onClick:e=>{e.stopPropagation();const nextTags=tags.map(t=>t.trim()).filter(Boolean);onUpdate({label:label.trim()||item.label,tags:nextTags}),setEditing(!1)},children:t("pb.library.save")})}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("pb.library.cancelEditing"),children:(0,jsx_runtime.jsx)("button",{type:"button","aria-label":t("pb.library.cancel"),className:"min-h-10 min-w-10 rounded border px-2 text-xs",onClick:e=>{e.stopPropagation(),setLabel(item.label),setTags(Array.isArray(item.tags)?item.tags:[]),setEditing(!1)},children:t("pb.library.cancel")})})]}):(0,jsx_runtime.jsx)(atoms.m_,{text:t("pb.library.editItem"),children:(0,jsx_runtime.jsx)("button",{type:"button","aria-label":t("pb.library.edit"),className:"min-h-10 min-w-10 rounded border px-2 text-xs",onClick:e=>{e.stopPropagation(),setEditing(!0)},children:t("pb.library.edit")})}),(0,jsx_runtime.jsx)(atoms.m_,{text:item.shared?t("pb.library.unshareWithTeam"):t("pb.library.shareWithTeam"),children:(0,jsx_runtime.jsx)("button",{type:"button","aria-label":item.shared?t("pb.library.unshare"):t("pb.library.share"),className:"min-h-10 min-w-10 rounded border px-2 text-xs "+(item.shared?"bg-green-50":""),onClick:e=>{e.stopPropagation(),onToggleShare()},title:item.shared?t("pb.library.sharedWithTeam"):t("pb.library.private"),children:item.shared?t("pb.library.shared"):t("pb.library.private")})}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("pb.library.deleteFromMyLibrary"),children:(0,jsx_runtime.jsx)("button",{type:"button","aria-label":t("pb.library.deleteFromMyLibrary"),className:"min-h-10 min-w-10 rounded border px-2 text-xs",onClick:e=>{e.stopPropagation(),onDelete()},children:t("pb.library.delete")})})]})}function LibraryList({title,items,scope:_scope,search,onDelete,onToggleShare,onUpdate,shop,headerRight}){if(0===items.length)return null;const q=search.trim().toLowerCase(),filtered=items.filter(i=>{if(!q)return!0;const inLabel=i.label.toLowerCase().includes(q),inTags=(i.tags||[]).some(t=>t.toLowerCase().includes(q));return inLabel||inTags});return filtered.length?(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)(primitives.cV,{className:"justify-between",gap:2,children:[(0,jsx_runtime.jsx)("h4",{className:"font-semibold capitalize",children:title}),headerRight]}),(0,jsx_runtime.jsx)(primitives.BJ,{gap:2,children:filtered.map(i=>(0,jsx_runtime.jsx)(LibraryPaletteItem,{item:i,onDelete:()=>onDelete(i.id),onToggleShare:()=>onToggleShare(i.id,!i.shared),onUpdate:patch=>onUpdate(i.id,patch),shop},i.id))})]}):null}function TextThemesList({textThemes,buildPreviewStyle,onApply}){const t=(0,src.c3)();return 0===textThemes.length?null:(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)(primitives.cV,{className:"justify-between",gap:2,children:[(0,jsx_runtime.jsx)("h4",{className:"font-semibold capitalize",children:t("cms.builder.textThemes.title")}),(0,jsx_runtime.jsx)("span",{className:"text-xs text-muted-foreground",children:t("cms.builder.textThemes.applyHint")})]}),(0,jsx_runtime.jsx)(primitives.BJ,{gap:2,children:textThemes.map(theme=>(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded border p-2 text-start text-sm transition hover:bg-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring min-h-10 min-w-10",onClick:()=>onApply(theme),children:(0,jsx_runtime.jsxs)(primitives.BJ,{gap:1,children:[(0,jsx_runtime.jsx)("span",{className:"font-medium",children:theme.label}),(0,jsx_runtime.jsx)("span",{"aria-hidden":"true",className:"truncate",style:buildPreviewStyle(theme),children:t("cms.builder.textThemes.sample")})]})},theme.id))})]})}function CategoriesList({categories,searchTerm,onAdd}){return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:categories.map(({id,label,items})=>{const filtered=items.filter(p=>p.label.toLowerCase().includes(searchTerm)).filter(p=>(0,rules.Ai)(p.type));return filtered.length?(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("h4",{className:"font-semibold capitalize",children:label}),(0,jsx_runtime.jsx)(primitives.BJ,{gap:2,children:filtered.map(p=>(0,jsx_runtime.jsx)(page_builder_PaletteItem,{type:p.type,label:p.label,icon:p.icon,description:p.description,previewImage:p.previewImage,onAdd},p.type))})]},id):null})})}function SearchInput({value,onChange}){const t=(0,src.c3)();return(0,jsx_runtime.jsx)("input",{type:"text",value,onChange:e=>onChange(e.target.value),placeholder:t("pb.search.components.placeholder"),"aria-label":t("pb.search.components.aria"),className:"rounded border p-2 text-sm"})}RecentsList.__docgenInfo={description:"",methods:[],displayName:"RecentsList",props:{recents:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},paletteIndex:{required:!0,tsType:{name:"Map",elements:[{name:"string"},{name:"PaletteMeta"}],raw:"Map<string, PaletteMeta>"},description:""},onAdd:{required:!0,tsType:{name:"signature",type:"function",raw:"(type: ComponentType, label: string) => void",signature:{arguments:[{type:{name:"union",raw:"| keyof typeof atomRegistry\n| keyof typeof moleculeRegistry\n| keyof typeof organismRegistry\n| keyof typeof containerRegistry\n| keyof typeof layoutRegistry",elements:[{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"}]},name:"type"},{type:{name:"string"},name:"label"}],return:{name:"void"}}},description:""}}},LibraryPaletteItem.__docgenInfo={description:"",methods:[],displayName:"LibraryPaletteItem",props:{item:{required:!0,tsType:{name:"signature",type:"object",raw:"{\n  id: string;\n  label: string;\n  createdAt: number;\n  // Single or multi-node templates\n  template?: PageComponent;\n  templates?: PageComponent[];\n  // Optional metadata\n  tags?: string[];\n  thumbnail?: string | null;\n  // Sharing metadata (best-effort; enforced server-side in CMS API)\n  ownerUserId?: string;\n  shared?: boolean;\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"createdAt",value:{name:"number",required:!0}},{key:"template",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!1}},{key:"templates",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!1}],raw:"PageComponent[]",required:!1}},{key:"tags",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"thumbnail",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"ownerUserId",value:{name:"string",required:!1}},{key:"shared",value:{name:"boolean",required:!1}}]}},description:""},onDelete:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onToggleShare:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onUpdate:{required:!0,tsType:{name:"signature",type:"function",raw:'(patch: Partial<Pick<LibraryItem, "label" | "tags" | "thumbnail">>) => void',signature:{arguments:[{type:{name:"Partial",elements:[{name:"Pick",elements:[{name:"signature",type:"object",raw:"{\n  id: string;\n  label: string;\n  createdAt: number;\n  // Single or multi-node templates\n  template?: PageComponent;\n  templates?: PageComponent[];\n  // Optional metadata\n  tags?: string[];\n  thumbnail?: string | null;\n  // Sharing metadata (best-effort; enforced server-side in CMS API)\n  ownerUserId?: string;\n  shared?: boolean;\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"createdAt",value:{name:"number",required:!0}},{key:"template",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!1}},{key:"templates",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!1}],raw:"PageComponent[]",required:!1}},{key:"tags",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"thumbnail",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"ownerUserId",value:{name:"string",required:!1}},{key:"shared",value:{name:"boolean",required:!1}}]}},{name:"union",raw:'"label" | "tags" | "thumbnail"',elements:[{name:"literal",value:'"label"'},{name:"literal",value:'"tags"'},{name:"literal",value:'"thumbnail"'}]}],raw:'Pick<LibraryItem, "label" | "tags" | "thumbnail">'}],raw:'Partial<Pick<LibraryItem, "label" | "tags" | "thumbnail">>'},name:"patch"}],return:{name:"void"}}},description:""},shop:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""}}},LibraryList.__docgenInfo={description:"",methods:[],displayName:"LibraryList",props:{title:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},items:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  id: string;\n  label: string;\n  createdAt: number;\n  // Single or multi-node templates\n  template?: PageComponent;\n  templates?: PageComponent[];\n  // Optional metadata\n  tags?: string[];\n  thumbnail?: string | null;\n  // Sharing metadata (best-effort; enforced server-side in CMS API)\n  ownerUserId?: string;\n  shared?: boolean;\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"createdAt",value:{name:"number",required:!0}},{key:"template",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!1}},{key:"templates",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!1}],raw:"PageComponent[]",required:!1}},{key:"tags",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"thumbnail",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"ownerUserId",value:{name:"string",required:!1}},{key:"shared",value:{name:"boolean",required:!1}}]}}],raw:"LibraryItem[]"},description:""},scope:{required:!0,tsType:{name:"union",raw:"string | null | undefined",elements:[{name:"string"},{name:"null"},{name:"undefined"}]},description:""},search:{required:!0,tsType:{name:"string"},description:""},onDelete:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},onToggleShare:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, shared: boolean) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"boolean"},name:"shared"}],return:{name:"void"}}},description:""},onUpdate:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, patch: Partial<LibraryItem>) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"Partial",elements:[{name:"signature",type:"object",raw:"{\n  id: string;\n  label: string;\n  createdAt: number;\n  // Single or multi-node templates\n  template?: PageComponent;\n  templates?: PageComponent[];\n  // Optional metadata\n  tags?: string[];\n  thumbnail?: string | null;\n  // Sharing metadata (best-effort; enforced server-side in CMS API)\n  ownerUserId?: string;\n  shared?: boolean;\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"createdAt",value:{name:"number",required:!0}},{key:"template",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!1}},{key:"templates",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!1}],raw:"PageComponent[]",required:!1}},{key:"tags",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"thumbnail",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"ownerUserId",value:{name:"string",required:!1}},{key:"shared",value:{name:"boolean",required:!1}}]}}],raw:"Partial<LibraryItem>"},name:"patch"}],return:{name:"void"}}},description:""},shop:{required:!1,tsType:{name:"union",raw:"string | null | undefined",elements:[{name:"string"},{name:"null"},{name:"undefined"}]},description:""},headerRight:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}},TextThemesList.__docgenInfo={description:"",methods:[],displayName:"TextThemesList",props:{textThemes:{required:!0,tsType:{name:"Array",elements:[{name:"TextTheme"}],raw:"TextTheme[]"},description:""},buildPreviewStyle:{required:!0,tsType:{name:"signature",type:"function",raw:"(theme: TextTheme) => CSSProperties",signature:{arguments:[{type:{name:"TextTheme"},name:"theme"}],return:{name:"CSSProperties"}}},description:""},onApply:{required:!0,tsType:{name:"signature",type:"function",raw:"(theme: TextTheme) => void",signature:{arguments:[{type:{name:"TextTheme"},name:"theme"}],return:{name:"void"}}},description:""}}},CategoriesList.__docgenInfo={description:"",methods:[],displayName:"CategoriesList",props:{categories:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  id: string;\n  label: string;\n  order: number;\n  items: PaletteMeta[];\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"order",value:{name:"number",required:!0}},{key:"items",value:{name:"Array",elements:[{name:"PaletteMeta"}],raw:"PaletteMeta[]",required:!0}}]}}],raw:"PaletteCategoryDefinition[]"},description:""},searchTerm:{required:!0,tsType:{name:"string"},description:""},onAdd:{required:!0,tsType:{name:"signature",type:"function",raw:"(type: ComponentType, label: string) => void",signature:{arguments:[{type:{name:"union",raw:"| keyof typeof atomRegistry\n| keyof typeof moleculeRegistry\n| keyof typeof organismRegistry\n| keyof typeof containerRegistry\n| keyof typeof layoutRegistry",elements:[{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"}]},name:"type"},{type:{name:"string"},name:"label"}],return:{name:"void"}}},description:""}}},SearchInput.__docgenInfo={description:"",methods:[],displayName:"SearchInput",props:{value:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""}}};const Palette=(0,react.memo)(function Palette({onAdd,onInsertImage:_onInsertImage,onSetSectionBackground:_onSetSectionBackground,selectedIsSection:_selectedIsSection,defaultTab:_defaultTab="components",onInsertPreset,mode="all"}){const t=(0,src.c3)(),[search,setSearch]=(0,react.useState)(""),[presetOpen,setPresetOpen]=(0,react.useState)(!1);var _usePathname;const pathname=null!==(_usePathname=(0,navigation.usePathname)())&&void 0!==_usePathname?_usePathname:"",shop=(0,shared_utils_src.e6)(pathname),{liveMessage,setLiveMessage}=function useLiveMessage(){const[liveMessage,setLiveMessage]=(0,react.useState)("");return(0,react.useEffect)(()=>{if(!liveMessage)return;const t=setTimeout(()=>setLiveMessage(""),500);return()=>clearTimeout(t)},[liveMessage]),{liveMessage,setLiveMessage}}(),{recents,pushRecent}=function useRecents(){const[recents,setRecents]=(0,react.useState)(()=>{try{const s=localStorage.getItem("pb:recent-types");return s?JSON.parse(s):[]}catch(e){return[]}}),pushRecent=(0,react.useCallback)(type=>{try{setRecents(prev=>{const next=[type,...prev.filter(t=>t!==type)].slice(0,10);return localStorage.setItem("pb:recent-types",JSON.stringify(next)),next})}catch(e){}},[]);return{recents,pushRecent}}(),installedApps=function useInstalledApps(shop){const[installedApps,setInstalledApps]=(0,react.useState)(()=>(0,appInstallStore.Jg)(null!=shop?shop:null));return(0,react.useEffect)(()=>(setInstalledApps((0,appInstallStore.Jg)(null!=shop?shop:null)),(0,appInstallStore.HQ)(null!=shop?shop:null,apps=>setInstalledApps(apps))),[shop]),installedApps}(shop),paletteCategories=function usePaletteCategories(installedApps,mode){return(0,react.useMemo)(()=>{const cats=(0,paletteData.Us)(installedApps);if("all"===mode)return cats;const elementsSet=new Set(["atoms","molecules","overlays"]),sectionsSet=new Set(["containers","organisms"]);return cats.filter(c=>elementsSet.has(c.id)?"elements"===mode:(sectionsSet.has(c.id)||!(elementsSet.has(c.id)||sectionsSet.has(c.id)||["layout"].includes(c.id)))&&"sections"===mode)},[installedApps,mode])}(installedApps,mode),paletteIndex=function usePaletteIndex(categories){return(0,react.useMemo)(()=>{const index=new Map;for(const category of categories)for(const item of category.items)index.set(item.type,item);return index},[categories])}(paletteCategories),{textThemes,buildPreviewStyle}=function useTextThemesPreview(){const previewTokens=(0,usePreviewTokens.Ay)();return{textThemes:(0,react.useMemo)(()=>(0,page_builder_textThemes.Z1)(previewTokens),[previewTokens]),buildPreviewStyle:(0,react.useCallback)(theme=>{var _theme_tokens_typography;const base=null!==(_theme_tokens_typography=theme.tokens.typography)&&void 0!==_theme_tokens_typography?_theme_tokens_typography:{},style={};return base.fontFamily&&(style.fontFamily=(0,page_builder_textThemes.Sg)(base.fontFamily)),base.fontSize&&(style.fontSize=(0,page_builder_textThemes.Sg)(base.fontSize)),base.fontWeight&&(style.fontWeight=(0,page_builder_textThemes.Sg)(base.fontWeight)),base.lineHeight&&(style.lineHeight=(0,page_builder_textThemes.Sg)(base.lineHeight)),style},[])}}(),{library,setLibrary,globalLibrary,setGlobalLibrary,removeLibrary,updateLibrary}=function useLibraries(shop){const[library,setLibrary]=(0,react.useState)([]),[globalLibrary,setGlobalLibrary]=(0,react.useState)([]);return(0,react.useEffect)(()=>{setLibrary((0,libraryStore.Eb)(shop)),(0,libraryStore.$r)(shop).then(remote=>{remote&&setLibrary(remote)}),setGlobalLibrary((0,libraryStore.Eb)("_global")),(0,libraryStore.$r)("_global").then(remote=>{remote&&setGlobalLibrary(remote)})},[shop]),(0,react.useEffect)(()=>{const handler=()=>{setLibrary((0,libraryStore.Eb)(shop)),setGlobalLibrary((0,libraryStore.Eb)("_global"))};return window.addEventListener("pb-library-changed",handler),()=>window.removeEventListener("pb-library-changed",handler)},[shop]),{library,setLibrary,globalLibrary,setGlobalLibrary,removeLibrary:libraryStore.CY,updateLibrary:libraryStore.ZV}}(shop);(0,react.useEffect)(()=>{const open=()=>setPresetOpen(!0);return window.addEventListener("pb:open-presets",open),()=>window.removeEventListener("pb:open-presets",open)},[]);const searchTerm=search.trim().toLowerCase(),handleApplyTextTheme=(0,react.useCallback)(theme=>{try{window.dispatchEvent(new CustomEvent("pb:apply-text-theme",{detail:{id:theme.id}})),setLiveMessage(`${theme.label} text style applied`)}catch(e){}},[setLiveMessage]),handleAdd=(0,react.useCallback)((type,label)=>{onAdd(type),setLiveMessage(`${label} added`),pushRecent(type)},[onAdd,pushRecent,setLiveMessage]);return(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-4","data-tour":"drag-component",children:[" ",onInsertPreset&&(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(PresetsModal,{onInsert:onInsertPreset,open:presetOpen,onOpenChange:setPresetOpen,hideTrigger:!0})}),(0,jsx_runtime.jsx)(SearchInput,{value:search,onChange:setSearch}),(0,jsx_runtime.jsx)("div",{"aria-live":"polite",className:"sr-only",children:liveMessage}),(0,jsx_runtime.jsx)(RecentsList,{recents,paletteIndex,onAdd:handleAdd}),(0,jsx_runtime.jsx)(LibraryList,{title:t("Global Library"),items:globalLibrary,scope:"_global",search,onDelete:id=>{removeLibrary("_global",id),setGlobalLibrary(prev=>prev.filter(x=>x.id!==id))},onToggleShare:(id,shared)=>{updateLibrary("_global",id,{shared}),setGlobalLibrary(prev=>prev.map(x=>x.id===id?{...x,shared}:x))},onUpdate:(id,patch)=>{updateLibrary("_global",id,patch),setGlobalLibrary(prev=>prev.map(x=>x.id===id?{...x,...patch}:x))}}),(0,jsx_runtime.jsx)(LibraryList,{title:t("My Library"),items:library,scope:shop,search,onDelete:id=>{removeLibrary(shop,id),setLibrary(prev=>prev.filter(x=>x.id!==id))},onToggleShare:(id,shared)=>{updateLibrary(shop,id,{shared}),setLibrary(prev=>prev.map(x=>x.id===id?{...x,shared}:x))},onUpdate:(id,patch)=>{updateLibrary(shop,id,patch),setLibrary(prev=>prev.map(x=>x.id===id?{...x,...patch}:x))},shop,headerRight:(0,jsx_runtime.jsx)(LibraryImportExport,{shop,onAfterChange:()=>{}})}),(0,jsx_runtime.jsx)(TextThemesList,{textThemes,buildPreviewStyle,onApply:handleApplyTextTheme}),(0,jsx_runtime.jsx)(CategoriesList,{categories:paletteCategories,searchTerm,onAdd:handleAdd})]})}),page_builder_Palette=Palette;Palette.__docgenInfo={description:"",methods:[],displayName:"Palette",props:{onAdd:{required:!0,tsType:{name:"signature",type:"function",raw:"(type: ComponentType) => void",signature:{arguments:[{type:{name:"union",raw:"| keyof typeof atomRegistry\n| keyof typeof moleculeRegistry\n| keyof typeof organismRegistry\n| keyof typeof containerRegistry\n| keyof typeof layoutRegistry",elements:[{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"},{name:"unknown"}]},name:"type"}],return:{name:"void"}}},description:""},onInsertImage:{required:!0,tsType:{name:"signature",type:"function",raw:"(url: string) => void",signature:{arguments:[{type:{name:"string"},name:"url"}],return:{name:"void"}}},description:""},onSetSectionBackground:{required:!0,tsType:{name:"signature",type:"function",raw:"(url: string) => void",signature:{arguments:[{type:{name:"string"},name:"url"}],return:{name:"void"}}},description:""},selectedIsSection:{required:!1,tsType:{name:"boolean"},description:""},defaultTab:{required:!1,tsType:{name:"union",raw:'"components" | "media"',elements:[{name:"literal",value:'"components"'},{name:"literal",value:'"media"'}]},description:"",defaultValue:{value:'"components"',computed:!1}},onInsertPreset:{required:!1,tsType:{name:"signature",type:"function",raw:"(component: PageComponent) => void",signature:{arguments:[{type:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},name:"component"}],return:{name:"void"}}},description:""},mode:{required:!1,tsType:{name:"union",raw:'"elements" | "sections" | "all"',elements:[{name:"literal",value:'"elements"'},{name:"literal",value:'"sections"'},{name:"literal",value:'"all"'}]},description:"Optional filter mode to split the palette into basic elements vs sections.\n- elements: atoms, molecules, overlays\n- sections: containers, organisms, and any app-provided categories\n- all (default): show everything",defaultValue:{value:'"all"',computed:!1}}}}},"../../packages/ui/src/components/cms/page-builder/PricingTableEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>PricingTableEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts");function PricingTableEditor({component,onChange}){var _component_plans;const plans=null!==(_component_plans=component.plans)&&void 0!==_component_plans?_component_plans:[];var _component_minItems;const min=null!==(_component_minItems=component.minItems)&&void 0!==_component_minItems?_component_minItems:0;var _component_maxItems;const max=null!==(_component_maxItems=component.maxItems)&&void 0!==_component_maxItems?_component_maxItems:1/0,update=(idx,field,value)=>{const next=[...plans];next[idx]={...next[idx],[field]:value},onChange({plans:next})};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[plans.map((plan,i)=>{var _plan_title,_plan_price,_plan_features,_plan_ctaLabel,_plan_ctaHref,_plan_featured;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1 rounded border p-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{value:null!==(_plan_title=plan.title)&&void 0!==_plan_title?_plan_title:"",onChange:e=>update(i,"title",e.target.value),placeholder:"title",className:"w-full"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{value:null!==(_plan_price=plan.price)&&void 0!==_plan_price?_plan_price:"",onChange:e=>update(i,"price",e.target.value),placeholder:"price",className:"w-full"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.TM,{value:(null!==(_plan_features=plan.features)&&void 0!==_plan_features?_plan_features:[]).join("\n"),onChange:e=>update(i,"features",e.target.value.split(/\n+/).map(f=>f.trim()).filter(Boolean)),placeholder:"one feature per line",className:"w-full"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{value:null!==(_plan_ctaLabel=plan.ctaLabel)&&void 0!==_plan_ctaLabel?_plan_ctaLabel:"",onChange:e=>update(i,"ctaLabel",e.target.value),placeholder:"CTA label",className:"w-full"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{value:null!==(_plan_ctaHref=plan.ctaHref)&&void 0!==_plan_ctaHref?_plan_ctaHref:"",onChange:e=>update(i,"ctaHref",e.target.value),placeholder:"CTA href",className:"w-full"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{className:"text-sm",children:"Featured"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"checkbox",checked:null!==(_plan_featured=plan.featured)&&void 0!==_plan_featured&&_plan_featured,onChange:e=>update(i,"featured",e.target.checked)})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.$n,{variant:"destructive",onClick:()=>{return idx=i,void onChange({plans:plans.filter((_plan,i)=>i!==idx)});var idx},disabled:plans.length<=min,children:"Remove Plan"})]},i)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.$n,{onClick:()=>{onChange({plans:[...plans,{title:"",price:"",features:[],ctaLabel:"",ctaHref:""}]})},disabled:plans.length>=max,children:"Add Plan"})]})}PricingTableEditor.__docgenInfo={description:"",methods:[],displayName:"PricingTableEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/ProductBundleEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>ProductBundleEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts");function ProductBundleEditor({component,onChange}){var _component_skus,_component_discount,_component_quantity;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.TM,{label:"SKUs",placeholder:"skus",value:(null!==(_component_skus=component.skus)&&void 0!==_component_skus?_component_skus:[]).join(","),onChange:e=>(value=>{const items=value.split(/[\s,]+/).map(s=>s.trim()).filter(Boolean);onChange({skus:items})})(e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:"Discount (%)",placeholder:"discount",type:"number",value:null!==(_component_discount=component.discount)&&void 0!==_component_discount?_component_discount:"",onChange:e=>onChange({discount:Number(e.target.value)})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:"Quantity",placeholder:"quantity",type:"number",value:null!==(_component_quantity=component.quantity)&&void 0!==_component_quantity?_component_quantity:"",onChange:e=>onChange({quantity:Number(e.target.value)})})]})}ProductBundleEditor.__docgenInfo={description:"",methods:[],displayName:"ProductBundleEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/ProductComparisonEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>ProductComparisonEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts");function ProductComparisonEditor({component,onChange}){const handleList=(field,value)=>{const items=value.split(/[\s,]+/).map(s=>s.trim()).filter(Boolean);onChange({[field]:items})};var _component_skus,_component_attributes;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.TM,{label:"SKUs (comma or newline separated)",value:(null!==(_component_skus=component.skus)&&void 0!==_component_skus?_component_skus:[]).join(","),onChange:e=>handleList("skus",e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.TM,{label:"Attributes (comma separated)",value:(null!==(_component_attributes=component.attributes)&&void 0!==_component_attributes?_component_attributes:[]).join(","),onChange:e=>handleList("attributes",e.target.value)})]})}ProductComparisonEditor.__docgenInfo={description:"",methods:[],displayName:"ProductComparisonEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/ProductFilterEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>ProductFilterEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_useComponentInputs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useComponentInputs.ts");function ProductFilterEditor({component,onChange}){const{handleInput}=(0,_useComponentInputs__WEBPACK_IMPORTED_MODULE_2__.A)(onChange),sizeId=(0,react__WEBPACK_IMPORTED_MODULE_1__.useId)(),colorId=(0,react__WEBPACK_IMPORTED_MODULE_1__.useId)(),priceId=(0,react__WEBPACK_IMPORTED_MODULE_1__.useId)();var _component_showSize,_component_showColor,_component_showPrice;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{className:"text-sm",htmlFor:sizeId,children:"Show size"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"checkbox",id:sizeId,checked:null===(_component_showSize=component.showSize)||void 0===_component_showSize||_component_showSize,onChange:e=>handleInput("showSize",e.target.checked)})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{className:"text-sm",htmlFor:colorId,children:"Show color"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"checkbox",id:colorId,checked:null===(_component_showColor=component.showColor)||void 0===_component_showColor||_component_showColor,onChange:e=>handleInput("showColor",e.target.checked)})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{className:"text-sm",htmlFor:priceId,children:"Show price"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"checkbox",id:priceId,checked:null===(_component_showPrice=component.showPrice)||void 0===_component_showPrice||_component_showPrice,onChange:e=>handleInput("showPrice",e.target.checked)})]})]})}ProductFilterEditor.__docgenInfo={description:"",methods:[],displayName:"ProductFilterEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/ProductGridEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>ProductGridEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_useComponentInputs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useComponentInputs.ts");function ProductGridEditor({component,onChange}){const{handleInput}=(0,_useComponentInputs__WEBPACK_IMPORTED_MODULE_2__.A)(onChange);var _component_quickView,_component_mode,_component_collectionId,_component_skus;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.Sc,{id:"quickView",checked:null!==(_component_quickView=component.quickView)&&void 0!==_component_quickView&&_component_quickView,onCheckedChange:v=>handleInput("quickView",!!v||void 0)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:"quickView",className:"text-sm",children:"Enable Quick View"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.l6,{value:null!==(_component_mode=component.mode)&&void 0!==_component_mode?_component_mode:"collection",onValueChange:v=>handleInput("mode",v),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.bq,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.yv,{placeholder:"Source"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.gC,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:"collection",children:"Collection"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:"manual",children:"Manual SKUs"})]})]}),"collection"===component.mode?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:"Collection ID",value:null!==(_component_collectionId=component.collectionId)&&void 0!==_component_collectionId?_component_collectionId:"",onChange:e=>handleInput("collectionId",e.target.value)}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.TM,{label:"SKUs (comma separated)",value:(null!==(_component_skus=component.skus)&&void 0!==_component_skus?_component_skus:[]).join(","),onChange:e=>handleInput("skus",e.target.value.split(/[\s,]+/).map(s=>s.trim()).filter(Boolean))})]})}ProductGridEditor.__docgenInfo={description:"",methods:[],displayName:"ProductGridEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/RecommendationCarouselEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>RecommendationCarouselEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts");function RecommendationCarouselEditor({component,onChange}){const handleNum=(field,value)=>{const num=value?Number(value):void 0;onChange({[field]:isNaN(num)?void 0:num})};var _component_endpoint,_component_desktopItems,_component_tabletItems,_component_mobileItems;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:"Endpoint",value:null!==(_component_endpoint=component.endpoint)&&void 0!==_component_endpoint?_component_endpoint:"",onChange:e=>onChange({endpoint:e.target.value})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:"Desktop Items",type:"number",value:null!==(_component_desktopItems=component.desktopItems)&&void 0!==_component_desktopItems?_component_desktopItems:"",onChange:e=>handleNum("desktopItems",e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:"Tablet Items",type:"number",value:null!==(_component_tabletItems=component.tabletItems)&&void 0!==_component_tabletItems?_component_tabletItems:"",onChange:e=>handleNum("tabletItems",e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:"Mobile Items",type:"number",value:null!==(_component_mobileItems=component.mobileItems)&&void 0!==_component_mobileItems?_component_mobileItems:"",onChange:e=>handleNum("mobileItems",e.target.value)})]})}RecommendationCarouselEditor.__docgenInfo={description:"",methods:[],displayName:"RecommendationCarouselEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/ReviewsCarouselEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>ReviewsCarouselEditor});var _useArrayEditor__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useArrayEditor.tsx");function ReviewsCarouselEditor({component,onChange}){return(0,_useArrayEditor__WEBPACK_IMPORTED_MODULE_0__.W)(onChange)("reviews",component.reviews,["nameKey","quoteKey"],{minItems:component.minItems,maxItems:component.maxItems})}},"../../packages/ui/src/components/cms/page-builder/SearchBarEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>SearchBarEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts");function SearchBarEditor({component,onChange}){const handleInput=(field,value)=>{onChange({[field]:value})};var _component_placeholder,_component_limit;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{value:null!==(_component_placeholder=component.placeholder)&&void 0!==_component_placeholder?_component_placeholder:"",onChange:e=>handleInput("placeholder",e.target.value),placeholder:"placeholder"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{type:"number",value:null!==(_component_limit=component.limit)&&void 0!==_component_limit?_component_limit:"",onChange:e=>handleInput("limit",e.target.value?Number(e.target.value):void 0),placeholder:"limit"})]})}SearchBarEditor.__docgenInfo={description:"",methods:[],displayName:"SearchBarEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/SocialFeedEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>SocialFeedEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts");function SocialFeedEditor({component,onChange}){const handleInput=(field,value)=>{onChange({[field]:value})};var _component_platform,_component_account,_component_hashtag;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.l6,{value:null!==(_component_platform=component.platform)&&void 0!==_component_platform?_component_platform:"",onValueChange:v=>handleInput("platform",v),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.bq,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.yv,{placeholder:"platform"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.gC,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:"twitter",children:"twitter"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:"instagram",children:"instagram"})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{value:null!==(_component_account=component.account)&&void 0!==_component_account?_component_account:"",onChange:e=>handleInput("account",e.target.value),placeholder:"account"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{value:null!==(_component_hashtag=component.hashtag)&&void 0!==_component_hashtag?_component_hashtag:"",onChange:e=>handleInput("hashtag",e.target.value),placeholder:"hashtag"})]})}SocialFeedEditor.__docgenInfo={description:"",methods:[],displayName:"SocialFeedEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/SocialLinksEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>SocialLinksEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_useComponentInputs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useComponentInputs.ts");function SocialLinksEditor({component,onChange}){const{handleInput}=(0,_useComponentInputs__WEBPACK_IMPORTED_MODULE_2__.A)(onChange);var _component_facebook,_component_instagram,_component_x,_component_youtube,_component_linkedin;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:"Facebook URL",value:null!==(_component_facebook=component.facebook)&&void 0!==_component_facebook?_component_facebook:"",onChange:e=>handleInput("facebook",e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:"Instagram URL",value:null!==(_component_instagram=component.instagram)&&void 0!==_component_instagram?_component_instagram:"",onChange:e=>handleInput("instagram",e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:"X URL",value:null!==(_component_x=component.x)&&void 0!==_component_x?_component_x:"",onChange:e=>handleInput("x",e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:"YouTube URL",value:null!==(_component_youtube=component.youtube)&&void 0!==_component_youtube?_component_youtube:"",onChange:e=>handleInput("youtube",e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:"LinkedIn URL",value:null!==(_component_linkedin=component.linkedin)&&void 0!==_component_linkedin?_component_linkedin:"",onChange:e=>handleInput("linkedin",e.target.value)})]})}SocialLinksEditor.__docgenInfo={description:"",methods:[],displayName:"SocialLinksEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/SocialProofEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>SocialProofEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts");function SocialProofEditor({component,onChange}){const handleInput=(field,value)=>{onChange({[field]:value})};var _component_source,_component_frequency;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{value:null!==(_component_source=component.source)&&void 0!==_component_source?_component_source:"",onChange:e=>handleInput("source",e.target.value),placeholder:"data source URL"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{type:"number",value:null!==(_component_frequency=component.frequency)&&void 0!==_component_frequency?_component_frequency:"",onChange:e=>handleInput("frequency",""===e.target.value?void 0:Number(e.target.value)),placeholder:"frequency (ms)"})]})}SocialProofEditor.__docgenInfo={description:"",methods:[],displayName:"SocialProofEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/StoreLocatorBlockEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>StoreLocatorBlockEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_useArrayEditor__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useArrayEditor.tsx");function StoreLocatorBlockEditor({component,onChange}){const arrayEditor=(0,_useArrayEditor__WEBPACK_IMPORTED_MODULE_2__.W)(onChange);var _component_zoom;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[arrayEditor("locations",component.locations,["lat","lng","label"]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:"Zoom",type:"number",value:null!==(_component_zoom=component.zoom)&&void 0!==_component_zoom?_component_zoom:"",onChange:e=>((field,value)=>{const num=""===value?void 0:Number(value);onChange({[field]:isNaN(num)?void 0:num})})("zoom",e.target.value)})]})}StoreLocatorBlockEditor.__docgenInfo={description:"",methods:[],displayName:"StoreLocatorBlockEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/StylePanel.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>StylePanel});var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),src=__webpack_require__("../../packages/i18n/src/index.ts"),react=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),ColorInput=__webpack_require__("../../packages/ui/src/components/cms/ColorInput.tsx");var Grid=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Grid.tsx");function composeTransform(fx){if(!fx)return;const parts=[];return fx.transformRotate&&parts.push(`rotate(${fx.transformRotate})`),fx.transformScale&&parts.push(`scale(${fx.transformScale})`),fx.transformSkewX&&parts.push(`skewX(${fx.transformSkewX})`),fx.transformSkewY&&parts.push(`skewY(${fx.transformSkewY})`),parts.length?parts.join(" "):void 0}function previewStyle(value){var _value_effects;const fx=null!==(_value_effects=value.effects)&&void 0!==_value_effects?_value_effects:{};return{borderRadius:fx.borderRadius,boxShadow:fx.boxShadow,outline:fx.outline,outlineOffset:fx.outlineOffset,borderTop:fx.borderTop,borderRight:fx.borderRight,borderBottom:fx.borderBottom,borderLeft:fx.borderLeft,backdropFilter:fx.backdropFilter,opacity:fx.opacity?Number(fx.opacity):void 0,transform:composeTransform(fx),background:"rgba(255,255,255,0.9)"}}function PresetGallery({title,presets,onApply}){return presets&&0!==presets.length?(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsx)("div",{className:"text-xs font-semibold text-muted-foreground",children:title}),(0,jsx_runtime.jsx)(Grid.x,{cols:3,gap:2,children:presets.map(p=>(0,jsx_runtime.jsxs)("button",{type:"button",className:"rounded border p-2 text-start hover:bg-accent/30 min-h-10 min-w-10",onClick:()=>onApply(p.id),title:p.label,"aria-label":`Apply ${p.label}`,children:[(0,jsx_runtime.jsx)("div",{className:"rounded bg-muted p-1",children:(0,jsx_runtime.jsx)("div",{className:"h-8 w-full rounded",style:previewStyle(p.value)})}),(0,jsx_runtime.jsx)("div",{className:"mt-1 truncate text-xs text-muted-foreground",children:p.label})]},p.id))})]}):null}PresetGallery.__docgenInfo={description:"",methods:[],displayName:"PresetGallery",props:{title:{required:!0,tsType:{name:"string"},description:""},presets:{required:!0,tsType:{name:"Array",elements:[{name:"PresetItem"}],raw:"PresetItem[]"},description:""},onApply:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""}}};var shadcn=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts");const t=s=>s;function EffectsEditor({effects,onChange}){const fx=null!=effects?effects:{};var _fx_borderRadius,_fx_boxShadow,_fx_opacity,_fx_backdropFilter,_fx_filter,_fx_outline,_fx_outlineOffset,_fx_borderTop,_fx_borderRight,_fx_borderBottom,_fx_borderLeft,_fx_transformRotate,_fx_transformScale,_fx_transformSkewX,_fx_transformSkewY;return(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Border radius"),value:null!==(_fx_borderRadius=fx.borderRadius)&&void 0!==_fx_borderRadius?_fx_borderRadius:"",onChange:e=>onChange("borderRadius",e.target.value)}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Box shadow"),value:null!==(_fx_boxShadow=fx.boxShadow)&&void 0!==_fx_boxShadow?_fx_boxShadow:"",onChange:e=>onChange("boxShadow",e.target.value)}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Opacity"),value:null!==(_fx_opacity=fx.opacity)&&void 0!==_fx_opacity?_fx_opacity:"",onChange:e=>onChange("opacity",e.target.value),placeholder:t("0..1")}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Backdrop filter"),value:null!==(_fx_backdropFilter=fx.backdropFilter)&&void 0!==_fx_backdropFilter?_fx_backdropFilter:"",onChange:e=>onChange("backdropFilter",e.target.value),placeholder:t("e.g. blur(6px)")}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Filter"),value:null!==(_fx_filter=fx.filter)&&void 0!==_fx_filter?_fx_filter:"",onChange:e=>onChange("filter",e.target.value),placeholder:t("e.g. brightness(1) contrast(1.1)")}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Outline"),value:null!==(_fx_outline=fx.outline)&&void 0!==_fx_outline?_fx_outline:"",onChange:e=>onChange("outline",e.target.value),placeholder:t("e.g. 1px solid var(--color-border)")}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Outline offset"),value:null!==(_fx_outlineOffset=fx.outlineOffset)&&void 0!==_fx_outlineOffset?_fx_outlineOffset:"",onChange:e=>onChange("outlineOffset",e.target.value)}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Border top"),value:null!==(_fx_borderTop=fx.borderTop)&&void 0!==_fx_borderTop?_fx_borderTop:"",onChange:e=>onChange("borderTop",e.target.value)}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Border right"),value:null!==(_fx_borderRight=fx.borderRight)&&void 0!==_fx_borderRight?_fx_borderRight:"",onChange:e=>onChange("borderRight",e.target.value)}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Border bottom"),value:null!==(_fx_borderBottom=fx.borderBottom)&&void 0!==_fx_borderBottom?_fx_borderBottom:"",onChange:e=>onChange("borderBottom",e.target.value)}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Border left"),value:null!==(_fx_borderLeft=fx.borderLeft)&&void 0!==_fx_borderLeft?_fx_borderLeft:"",onChange:e=>onChange("borderLeft",e.target.value)}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Rotate"),value:null!==(_fx_transformRotate=fx.transformRotate)&&void 0!==_fx_transformRotate?_fx_transformRotate:"",onChange:e=>onChange("transformRotate",e.target.value),placeholder:t("e.g. 5deg")}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Scale"),value:null!==(_fx_transformScale=fx.transformScale)&&void 0!==_fx_transformScale?_fx_transformScale:"",onChange:e=>onChange("transformScale",e.target.value),placeholder:t("e.g. 1.05")}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Skew X"),value:null!==(_fx_transformSkewX=fx.transformSkewX)&&void 0!==_fx_transformSkewX?_fx_transformSkewX:"",onChange:e=>onChange("transformSkewX",e.target.value),placeholder:t("e.g. 5deg")}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Skew Y"),value:null!==(_fx_transformSkewY=fx.transformSkewY)&&void 0!==_fx_transformSkewY?_fx_transformSkewY:"",onChange:e=>onChange("transformSkewY",e.target.value),placeholder:t("e.g. 0deg")})]})}function StylePreviewCard_composeTransform(fx){if(!fx)return;const parts=[];return fx.transformRotate&&parts.push(`rotate(${fx.transformRotate})`),fx.transformScale&&parts.push(`scale(${fx.transformScale})`),fx.transformSkewX&&parts.push(`skewX(${fx.transformSkewX})`),fx.transformSkewY&&parts.push(`skewY(${fx.transformSkewY})`),parts.length?parts.join(" "):void 0}function StylePreviewCard({effects,hoverScale,hoverOpacity}){const t=(0,src.c3)(),[hoverOn,setHoverOn]=(0,react.useState)(!1),baseStyle=(0,react.useMemo)(()=>function styleFromEffects(effects){const fx=null!=effects?effects:{};return{borderRadius:fx.borderRadius,boxShadow:fx.boxShadow,outline:fx.outline,outlineOffset:fx.outlineOffset,borderTop:fx.borderTop,borderRight:fx.borderRight,borderBottom:fx.borderBottom,borderLeft:fx.borderLeft,backdropFilter:fx.backdropFilter,filter:fx.filter,opacity:fx.opacity?Number(fx.opacity):void 0,transform:StylePreviewCard_composeTransform(fx),transition:"transform 200ms ease, opacity 200ms ease"}}(effects),[effects]),simulated=(0,react.useMemo)(()=>{if(!hoverOn)return baseStyle;const scale="number"==typeof hoverScale?hoverScale:1.05,opacity="number"==typeof hoverOpacity?hoverOpacity:.9,nextTransform=`${baseStyle.transform||""} scale(${scale})`.trim();return{...baseStyle,transform:nextTransform,opacity}},[baseStyle,hoverOn,hoverScale,hoverOpacity]);return(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between",children:[(0,jsx_runtime.jsx)("div",{className:"text-xs font-semibold text-muted-foreground",children:t("cms.builder.preview.title")}),(0,jsx_runtime.jsxs)("label",{className:"flex cursor-pointer items-center gap-2 text-xs text-muted-foreground",children:[(0,jsx_runtime.jsx)("input",{type:"checkbox",checked:hoverOn,onChange:e=>setHoverOn(e.target.checked)}),t("cms.builder.preview.hover")]})]}),(0,jsx_runtime.jsx)("div",{className:"rounded border bg-muted p-3",children:(0,jsx_runtime.jsxs)("div",{className:"mx-auto w-full sm:w-80 rounded bg-background p-4",style:simulated,children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-semibold",children:t("cms.builder.preview.sampleTitle")}),(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted-foreground",children:t("cms.builder.preview.sampleDesc")}),(0,jsx_runtime.jsx)("div",{className:"mt-2 rounded bg-muted px-2 py-1 text-center text-xs",children:t("cms.builder.preview.button")})]})})]})}function ColorEditor({values,labels,placeholder,onChange}){var _values_fg,_values_bg,_values_border;return(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)(shadcn.pd,{label:labels.fg,value:null!==(_values_fg=values.fg)&&void 0!==_values_fg?_values_fg:"",placeholder,onChange:e=>onChange("fg",e.target.value)}),(0,jsx_runtime.jsx)(shadcn.pd,{label:labels.bg,value:null!==(_values_bg=values.bg)&&void 0!==_values_bg?_values_bg:"",placeholder,onChange:e=>onChange("bg",e.target.value)}),(0,jsx_runtime.jsx)(shadcn.pd,{label:labels.border,value:null!==(_values_border=values.border)&&void 0!==_values_border?_values_border:"",placeholder,onChange:e=>onChange("border",e.target.value)})]})}function TypographyEditor({base,desktop,tablet,mobile,labels,onBase,onBp}){var _base_fontFamily,_base_fontSize,_base_fontWeight,_base_lineHeight,_desktop_fontSize,_desktop_lineHeight,_tablet_fontSize,_tablet_lineHeight,_mobile_fontSize,_mobile_lineHeight;return(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)(shadcn.pd,{label:labels.base.fontFamily,value:null!==(_base_fontFamily=base.fontFamily)&&void 0!==_base_fontFamily?_base_fontFamily:"",onChange:e=>onBase("fontFamily",e.target.value)}),(0,jsx_runtime.jsx)(shadcn.pd,{label:labels.base.fontSize,value:null!==(_base_fontSize=base.fontSize)&&void 0!==_base_fontSize?_base_fontSize:"",onChange:e=>onBase("fontSize",e.target.value)}),(0,jsx_runtime.jsx)(shadcn.pd,{label:labels.base.fontWeight,value:null!==(_base_fontWeight=base.fontWeight)&&void 0!==_base_fontWeight?_base_fontWeight:"",onChange:e=>onBase("fontWeight",e.target.value)}),(0,jsx_runtime.jsx)(shadcn.pd,{label:labels.base.lineHeight,value:null!==(_base_lineHeight=base.lineHeight)&&void 0!==_base_lineHeight?_base_lineHeight:"",onChange:e=>onBase("lineHeight",e.target.value)}),(0,jsx_runtime.jsxs)("div",{className:"mt-3 border-t pt-2",children:[(0,jsx_runtime.jsx)("div",{className:"text-xs font-semibold text-muted-foreground",children:labels.desktop.heading}),(0,jsx_runtime.jsx)(shadcn.pd,{label:labels.desktop.fontSize,value:null!==(_desktop_fontSize=null==desktop?void 0:desktop.fontSize)&&void 0!==_desktop_fontSize?_desktop_fontSize:"",onChange:e=>onBp("Desktop","fontSize",e.target.value)}),(0,jsx_runtime.jsx)(shadcn.pd,{label:labels.desktop.lineHeight,value:null!==(_desktop_lineHeight=null==desktop?void 0:desktop.lineHeight)&&void 0!==_desktop_lineHeight?_desktop_lineHeight:"",onChange:e=>onBp("Desktop","lineHeight",e.target.value)})]}),(0,jsx_runtime.jsxs)("div",{className:"border-t pt-2",children:[(0,jsx_runtime.jsx)("div",{className:"text-xs font-semibold text-muted-foreground",children:labels.tablet.heading}),(0,jsx_runtime.jsx)(shadcn.pd,{label:labels.tablet.fontSize,value:null!==(_tablet_fontSize=null==tablet?void 0:tablet.fontSize)&&void 0!==_tablet_fontSize?_tablet_fontSize:"",onChange:e=>onBp("Tablet","fontSize",e.target.value)}),(0,jsx_runtime.jsx)(shadcn.pd,{label:labels.tablet.lineHeight,value:null!==(_tablet_lineHeight=null==tablet?void 0:tablet.lineHeight)&&void 0!==_tablet_lineHeight?_tablet_lineHeight:"",onChange:e=>onBp("Tablet","lineHeight",e.target.value)})]}),(0,jsx_runtime.jsxs)("div",{className:"border-t pt-2",children:[(0,jsx_runtime.jsx)("div",{className:"text-xs font-semibold text-muted-foreground",children:labels.mobile.heading}),(0,jsx_runtime.jsx)(shadcn.pd,{label:labels.mobile.fontSize,value:null!==(_mobile_fontSize=null==mobile?void 0:mobile.fontSize)&&void 0!==_mobile_fontSize?_mobile_fontSize:"",onChange:e=>onBp("Mobile","fontSize",e.target.value)}),(0,jsx_runtime.jsx)(shadcn.pd,{label:labels.mobile.lineHeight,value:null!==(_mobile_lineHeight=null==mobile?void 0:mobile.lineHeight)&&void 0!==_mobile_lineHeight?_mobile_lineHeight:"",onChange:e=>onBp("Mobile","lineHeight",e.target.value)})]})]})}EffectsEditor.__docgenInfo={description:"",methods:[],displayName:"EffectsEditor",props:{effects:{required:!1,tsType:{name:"NonNullable",elements:[{name:'StyleOverrides["effects"]',raw:'StyleOverrides["effects"]'}],raw:'NonNullable<StyleOverrides["effects"]>'},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:'(key: keyof NonNullable<StyleOverrides["effects"]>, value: string) => void',signature:{arguments:[{type:{name:"NonNullable",elements:[{name:'StyleOverrides["effects"]',raw:'StyleOverrides["effects"]'}],raw:'NonNullable<StyleOverrides["effects"]>'},name:"key"},{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""}}},StylePreviewCard.__docgenInfo={description:"",methods:[],displayName:"StylePreviewCard",props:{effects:{required:!1,tsType:{name:"NonNullable",elements:[{name:'StyleOverrides["effects"]',raw:'StyleOverrides["effects"]'}],raw:'NonNullable<StyleOverrides["effects"]>'},description:""},hoverScale:{required:!1,tsType:{name:"number"},description:""},hoverOpacity:{required:!1,tsType:{name:"number"},description:""}}},ColorEditor.__docgenInfo={description:"",methods:[],displayName:"ColorEditor",props:{values:{required:!0,tsType:{name:"ColorValues"},description:""},labels:{required:!0,tsType:{name:"signature",type:"object",raw:"{ fg: string; bg: string; border: string }",signature:{properties:[{key:"fg",value:{name:"string",required:!0}},{key:"bg",value:{name:"string",required:!0}},{key:"border",value:{name:"string",required:!0}}]}},description:""},placeholder:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: keyof ColorValues, value: string) => void",signature:{arguments:[{type:{name:"ColorValues"},name:"key"},{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""}}},TypographyEditor.__docgenInfo={description:"",methods:[],displayName:"TypographyEditor",props:{base:{required:!0,tsType:{name:"TypographyValues"},description:""},desktop:{required:!1,tsType:{name:"TypographyValues"},description:""},tablet:{required:!1,tsType:{name:"TypographyValues"},description:""},mobile:{required:!1,tsType:{name:"TypographyValues"},description:""},labels:{required:!0,tsType:{name:"signature",type:"object",raw:"{\n  base: { fontFamily: string; fontSize: string; fontWeight: string; lineHeight: string };\n  desktop: { heading: string; fontSize: string; lineHeight: string };\n  tablet: { heading: string; fontSize: string; lineHeight: string };\n  mobile: { heading: string; fontSize: string; lineHeight: string };\n}",signature:{properties:[{key:"base",value:{name:"signature",type:"object",raw:"{ fontFamily: string; fontSize: string; fontWeight: string; lineHeight: string }",signature:{properties:[{key:"fontFamily",value:{name:"string",required:!0}},{key:"fontSize",value:{name:"string",required:!0}},{key:"fontWeight",value:{name:"string",required:!0}},{key:"lineHeight",value:{name:"string",required:!0}}]},required:!0}},{key:"desktop",value:{name:"signature",type:"object",raw:"{ heading: string; fontSize: string; lineHeight: string }",signature:{properties:[{key:"heading",value:{name:"string",required:!0}},{key:"fontSize",value:{name:"string",required:!0}},{key:"lineHeight",value:{name:"string",required:!0}}]},required:!0}},{key:"tablet",value:{name:"signature",type:"object",raw:"{ heading: string; fontSize: string; lineHeight: string }",signature:{properties:[{key:"heading",value:{name:"string",required:!0}},{key:"fontSize",value:{name:"string",required:!0}},{key:"lineHeight",value:{name:"string",required:!0}}]},required:!0}},{key:"mobile",value:{name:"signature",type:"object",raw:"{ heading: string; fontSize: string; lineHeight: string }",signature:{properties:[{key:"heading",value:{name:"string",required:!0}},{key:"fontSize",value:{name:"string",required:!0}},{key:"lineHeight",value:{name:"string",required:!0}}]},required:!0}}]}},description:""},onBase:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: keyof TypographyValues, value: string) => void",signature:{arguments:[{type:{name:"TypographyValues"},name:"key"},{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},onBp:{required:!0,tsType:{name:"signature",type:"function",raw:"(bp: 'Desktop' | 'Tablet' | 'Mobile', key: 'fontSize' | 'lineHeight', value: string) => void",signature:{arguments:[{type:{name:"union",raw:"'Desktop' | 'Tablet' | 'Mobile'",elements:[{name:"literal",value:"'Desktop'"},{name:"literal",value:"'Tablet'"},{name:"literal",value:"'Mobile'"}]},name:"bp"},{type:{name:"union",raw:"'fontSize' | 'lineHeight'",elements:[{name:"literal",value:"'fontSize'"},{name:"literal",value:"'lineHeight'"}]},name:"key"},{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""}}};const defaultEffectPresets=[{id:"muted-card",label:"Muted card",value:{color:{bg:"hsl(var(--color-muted))",fg:"hsl(var(--color-muted-fg))",border:"hsl(var(--color-muted-border))"}}},{id:"primary-button",label:"Primary button",value:{color:{bg:"hsl(var(--color-primary))",fg:"hsl(var(--color-primary-fg))",border:"hsl(var(--color-primary))"},typography:{fontWeight:"600"}}},{id:"card-soft-shadow",label:"Card · Soft shadow",value:{effects:{borderRadius:"var(--radius-lg)",boxShadow:"0 8px 24px rgba(0,0,0,0.12)"}}},{id:"glass-blur",label:"Glass · Blur",value:{effects:{borderRadius:"16px",boxShadow:"0 6px 20px rgba(0,0,0,0.15)",backdropFilter:"blur(10px) saturate(1.1)",borderTop:"1px solid rgba(255,255,255,0.24)",borderRight:"1px solid rgba(255,255,255,0.24)",borderBottom:"1px solid rgba(255,255,255,0.24)",borderLeft:"1px solid rgba(255,255,255,0.24)"}}},{id:"elevated-card",label:"Card · Elevated",value:{effects:{borderRadius:"var(--radius-lg)",boxShadow:"0 12px 36px rgba(0,0,0,0.16)"}}},{id:"inset-panel",label:"Panel · Inset",value:{effects:{borderRadius:"var(--radius-lg)",boxShadow:"inset 0 2px 8px rgba(0,0,0,0.15)"}}},{id:"outline-card",label:"Card · Outline",value:{effects:{borderRadius:"var(--radius-lg)",borderTop:"1px solid rgba(0,0,0,0.12)",borderRight:"1px solid rgba(0,0,0,0.12)",borderBottom:"1px solid rgba(0,0,0,0.12)",borderLeft:"1px solid rgba(0,0,0,0.12)",boxShadow:"0 1px 2px rgba(0,0,0,0.04)"}}},{id:"floating-pill",label:"Pill · Floating",value:{effects:{borderRadius:"9999px",boxShadow:"0 10px 28px rgba(0,0,0,0.16), 0 2px 8px rgba(0,0,0,0.08)"}}},{id:"subtle-divider",label:"Divider · Subtle",value:{effects:{borderBottom:"1px solid rgba(0,0,0,0.08)"}}},{id:"card-shadowless",label:"Card · Shadowless",value:{effects:{borderRadius:"var(--radius-lg)",boxShadow:"none",borderTop:"1px solid rgba(0,0,0,0.08)",borderRight:"1px solid rgba(0,0,0,0.08)",borderBottom:"1px solid rgba(0,0,0,0.08)",borderLeft:"1px solid rgba(0,0,0,0.08)"}}},{id:"card-neumorphic",label:"Card · Neumorphic",value:{effects:{borderRadius:"16px",boxShadow:"8px 8px 16px rgba(0,0,0,0.10), -8px -8px 16px rgba(255,255,255,0.65)"}}},{id:"card-raised-outline",label:"Card · Raised outline",value:{effects:{borderRadius:"var(--radius-lg)",borderTop:"1px solid rgba(0,0,0,0.10)",borderRight:"1px solid rgba(0,0,0,0.10)",borderBottom:"1px solid rgba(0,0,0,0.10)",borderLeft:"1px solid rgba(0,0,0,0.10)",boxShadow:"0 6px 18px rgba(0,0,0,0.12)"}}}];var styleClipboard=__webpack_require__("../../packages/ui/src/components/cms/page-builder/style/styleClipboard.ts");const KEY="page-builder:custom-style-presets";function loadCustomPresets(){try{const raw=window.localStorage.getItem(KEY);if(!raw)return[];const parsed=JSON.parse(raw);return Array.isArray(parsed)?parsed:[]}catch(e){return[]}}function saveCustomPresets(presets){try{window.localStorage.setItem(KEY,JSON.stringify(presets))}catch(e){}}function makeId(label){return`custom-${label.trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")||"preset"}-${Math.random().toString(36).slice(2,8)}`}function useCustomPresets(effects){const[customPresets,setCustomPresets]=(0,react.useState)([]),[selectedCustom,setSelectedCustom]=(0,react.useState)(""),t=(0,src.c3)();(0,react.useEffect)(()=>{setCustomPresets(loadCustomPresets())},[]);const saveCurrentAsPreset=(0,react.useCallback)(label=>{if(!effects)return;var _window_prompt;const name=null!=label?label:null!==(_window_prompt=window.prompt(String(t("Preset name"))))&&void 0!==_window_prompt?_window_prompt:void 0;if(!name)return;const id=makeId(name),next=function addCustomPreset(preset){const current=loadCustomPresets(),next=[preset,...current.filter(p=>p.id!==preset.id)];return saveCustomPresets(next),next}({id,label:name,value:{effects:{...effects}}});return setCustomPresets(next),setSelectedCustom(id),id},[effects,t]),removeSelected=(0,react.useCallback)(()=>{if(!selectedCustom)return;if(!window.confirm(String(t("Delete selected preset?"))))return;const next=function deleteCustomPreset(id){const next=loadCustomPresets().filter(p=>p.id!==id);return saveCustomPresets(next),next}(selectedCustom);setCustomPresets(next),setSelectedCustom("")},[selectedCustom,t]),renameSelected=(0,react.useCallback)(()=>{if(!selectedCustom)return;var _window_prompt;const label=null!==(_window_prompt=window.prompt(String(t("New name"))))&&void 0!==_window_prompt?_window_prompt:void 0;if(!label)return;const next=function updateCustomPreset(id,patch){const next=loadCustomPresets().map(p=>p.id===id?{...p,...patch}:p);return saveCustomPresets(next),next}(selectedCustom,{label});setCustomPresets(next)},[selectedCustom,t]),duplicateSelected=(0,react.useCallback)(()=>{if(!selectedCustom)return;const next=function duplicateCustomPreset(id){const current=loadCustomPresets(),idx=current.findIndex(p=>p.id===id);if(-1===idx)return current;const src=current[idx],next=[{id:makeId(`${src.label}-copy`),label:`${src.label} (copy)`,value:{...src.value}},...current];return saveCustomPresets(next),next}(selectedCustom);setCustomPresets(next)},[selectedCustom]),moveSelected=(0,react.useCallback)(dir=>{if(!selectedCustom)return;const next=function moveCustomPreset(id,dir){const current=loadCustomPresets(),idx=current.findIndex(p=>p.id===id);if(-1===idx)return current;const target="up"===dir?idx-1:idx+1;if(target<0||target>=current.length)return current;const next=current.slice(),[item]=next.splice(idx,1);return next.splice(target,0,item),saveCustomPresets(next),next}(selectedCustom,dir);setCustomPresets(next)},[selectedCustom]),exportJSON=(0,react.useCallback)(()=>{try{return JSON.stringify(customPresets,null,2)}catch(e){return"[]"}},[customPresets]),importJSON=(0,react.useCallback)(json=>{if(!json)return!1;const next=function importCustomPresets(json){try{const parsed=JSON.parse(json);if(!Array.isArray(parsed))return null;const incoming=parsed.filter(p=>p&&"string"==typeof p.id&&"string"==typeof p.label&&"object"==typeof p.value),map=new Map;for(const p of loadCustomPresets())map.set(p.id,p);for(const p of incoming)map.set(p.id,p);const next=Array.from(map.values());return saveCustomPresets(next),next}catch(e){return null}}(String(json));return!!next&&(setCustomPresets(next),!0)},[]);return{customPresets,selectedCustom,setSelectedCustom,saveCurrentAsPreset,removeSelected,renameSelected,duplicateSelected,moveSelected,exportJSON,importJSON}}var usePreviewTokens=__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/usePreviewTokens.ts"),page_builder_textThemes=__webpack_require__("../../packages/ui/src/components/cms/page-builder/textThemes.ts");let telemetryTrack=()=>{};Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/telemetry/src/index.ts")).then(module=>{telemetryTrack=module.track}).catch(()=>{});const trackEvent=(name,payload)=>{telemetryTrack(name,payload)},clipboard={get:styleClipboard.at,set:styleClipboard.wi},parseOverrides=styles=>{if(!styles)return{};try{return JSON.parse(String(styles))}catch(e){return{}}};function CursorSection({cursor,cursorUrl,onCursorChange,onCursorUrlChange}){const t=(0,src.c3)(),value=null!=cursor?cursor:"default",isCustom="custom"===value;return(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsx)("div",{className:"text-xs font-semibold text-muted-foreground",children:t("cms.builder.style.cursor.label")}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsxs)("select",{"aria-label":t("cms.builder.style.cursor.selectAria"),className:"rounded border border-border-2 bg-surface-2 px-2 py-1 text-sm",value,onChange:event=>{const next=event.target.value;onCursorChange("default"===next?void 0:next)},children:[(0,jsx_runtime.jsx)("option",{value:"default",children:t("cms.builder.style.cursor.option.default")}),(0,jsx_runtime.jsx)("option",{value:"pointer",children:t("cms.builder.style.cursor.option.pointer")}),(0,jsx_runtime.jsx)("option",{value:"text",children:t("cms.builder.style.cursor.option.text")}),(0,jsx_runtime.jsx)("option",{value:"move",children:t("cms.builder.style.cursor.option.move")}),(0,jsx_runtime.jsx)("option",{value:"crosshair",children:t("cms.builder.style.cursor.option.crosshair")}),(0,jsx_runtime.jsx)("option",{value:"not-allowed",children:t("cms.builder.style.cursor.option.notAllowed")}),(0,jsx_runtime.jsx)("option",{value:"grab",children:t("cms.builder.style.cursor.option.grab")}),(0,jsx_runtime.jsx)("option",{value:"custom",children:t("cms.builder.style.cursor.option.custom")})]}),isCustom?(0,jsx_runtime.jsx)("input",{type:"text",className:"w-64 rounded border px-2 py-1 text-sm",placeholder:t("cms.builder.style.cursor.urlPlaceholder"),value:null!=cursorUrl?cursorUrl:"",onChange:event=>{const next=event.target.value;onCursorUrlChange(next||void 0)}}):null]})]})}function PresetManager({presets,customPresets,selectedCustom,onApplyPreset,onApplyCustomPreset,onCopy,onPaste,onSavePreset,onRenamePreset,onDuplicatePreset,onMovePreset,onRemovePreset,exportAllPresets,importPresets}){const t=(0,src.c3)(),[exportOpen,setExportOpen]=(0,react.useState)(!1),[importOpen,setImportOpen]=(0,react.useState)(!1),[exportText,setExportText]=(0,react.useState)(""),[importText,setImportText]=(0,react.useState)(""),[importError,setImportError]=(0,react.useState)(""),[copied,setCopied]=(0,react.useState)(!1),selectedIndex=customPresets.findIndex(preset=>preset.id===selectedCustom),canMoveUp=selectedIndex>0,canMoveDown=selectedIndex>-1&&selectedIndex<customPresets.length-1,openExport=(0,react.useCallback)(onlySelected=>{if(onlySelected&&selectedCustom){const preset=customPresets.find(p=>p.id===selectedCustom);setExportText(JSON.stringify(preset?[preset]:[],null,2))}else{const json=exportAllPresets();setExportText(json)}setExportOpen(!0)},[customPresets,exportAllPresets,selectedCustom]),handleCopyExport=(0,react.useCallback)(async()=>{try{var _navigator_clipboard,_navigator;(null===(_navigator=navigator)||void 0===_navigator||null===(_navigator_clipboard=_navigator.clipboard)||void 0===_navigator_clipboard?void 0:_navigator_clipboard.writeText)&&await navigator.clipboard.writeText(exportText),setCopied(!0),setTimeout(()=>setCopied(!1),1200)}catch(e){}},[exportText]),handleImport=(0,react.useCallback)(()=>{setImportError("");try{JSON.parse(importText)}catch(e){return void setImportError(t("cms.style.customPresets.import.invalidJson"))}importPresets(importText)?(setImportOpen(!1),setImportText("")):setImportError(t("cms.style.customPresets.import.invalidPreset"))},[importPresets,importText,t]);return(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsxs)("select",{"aria-label":t("cms.style.effectPresets.selectAria"),className:"rounded border border-border-2 bg-surface-2 px-2 py-1 text-sm",onChange:event=>onApplyPreset(event.target.value),defaultValue:"",children:[(0,jsx_runtime.jsx)("option",{value:"",disabled:!0,children:t("cms.style.effectPresets.placeholder")}),presets.map(preset=>(0,jsx_runtime.jsx)("option",{value:preset.id,children:preset.label},preset.id))]}),(0,jsx_runtime.jsxs)("select",{"aria-label":t("cms.style.customPresets.selectAria"),className:"rounded border border-border-2 bg-surface-2 px-2 py-1 text-sm",onChange:event=>onApplyCustomPreset(event.target.value),value:selectedCustom,children:[(0,jsx_runtime.jsx)("option",{value:"",children:t("cms.style.customPresets.placeholder")}),customPresets.map(preset=>(0,jsx_runtime.jsx)("option",{value:preset.id,children:preset.label},preset.id))]}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:onCopy,"aria-label":t("cms.style.copyStyles.aria"),children:t("actions.copy")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:onPaste,"aria-label":t("cms.style.pasteStyles.aria"),children:t("actions.paste")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:onSavePreset,"aria-label":t("cms.style.customPresets.saveAria"),children:t("cms.style.customPresets.save")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:onRenamePreset,"aria-label":t("cms.style.customPresets.renameAria"),disabled:!selectedCustom,children:t("actions.rename")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:onDuplicatePreset,"aria-label":t("cms.style.customPresets.duplicateAria"),disabled:!selectedCustom,children:t("actions.duplicate")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:()=>onMovePreset("up"),"aria-label":t("cms.style.customPresets.moveUpAria"),disabled:!selectedCustom||!canMoveUp,children:t("actions.up")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:()=>onMovePreset("down"),"aria-label":t("cms.style.customPresets.moveDownAria"),disabled:!selectedCustom||!canMoveDown,children:t("actions.down")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:onRemovePreset,"aria-label":t("cms.style.customPresets.deleteAria"),disabled:!selectedCustom,children:t("actions.delete")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:()=>openExport(!1),"aria-label":t("cms.style.customPresets.exportAllAria"),children:t("cms.style.customPresets.exportAll")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:()=>openExport(!0),"aria-label":t("cms.style.customPresets.exportSelectedAria"),disabled:!selectedCustom,children:t("cms.style.customPresets.exportSelected")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:()=>setImportOpen(!0),"aria-label":t("cms.style.customPresets.importAria"),children:t("actions.import")}),(0,jsx_runtime.jsx)(shadcn.lG,{open:exportOpen,onOpenChange:setExportOpen,children:(0,jsx_runtime.jsxs)(shadcn.Cf,{"aria-describedby":void 0,children:[(0,jsx_runtime.jsxs)(shadcn.c7,{children:[(0,jsx_runtime.jsx)(shadcn.L3,{children:t("cms.style.customPresets.exportTitle")}),(0,jsx_runtime.jsx)("p",{className:"text-sm text-muted-foreground",children:t("cms.style.customPresets.exportAllAria")})]}),(0,jsx_runtime.jsx)(shadcn.TM,{value:exportText,readOnly:!0,rows:10}),(0,jsx_runtime.jsxs)(shadcn.Es,{children:[(0,jsx_runtime.jsx)("div",{className:"me-auto text-xs text-muted-foreground",children:copied?t("actions.copied"):""}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:()=>setExportOpen(!1),children:t("actions.close")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",onClick:handleCopyExport,children:t("actions.copy")})]})]})}),(0,jsx_runtime.jsx)(shadcn.lG,{open:importOpen,onOpenChange:setImportOpen,children:(0,jsx_runtime.jsxs)(shadcn.Cf,{"aria-describedby":void 0,children:[(0,jsx_runtime.jsxs)(shadcn.c7,{children:[(0,jsx_runtime.jsx)(shadcn.L3,{children:t("cms.style.customPresets.importTitle")}),(0,jsx_runtime.jsx)("p",{className:"text-sm text-muted-foreground",children:t("cms.style.customPresets.importPlaceholder")})]}),(0,jsx_runtime.jsx)(shadcn.TM,{value:importText,onChange:event=>{setImportText(event.target.value),setImportError("")},rows:10,placeholder:t("cms.style.customPresets.importPlaceholder")}),importError?(0,jsx_runtime.jsx)("p",{className:"text-danger text-xs",role:"alert",children:importError}):null,(0,jsx_runtime.jsxs)(shadcn.Es,{children:[(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",onClick:()=>{setImportOpen(!1),setImportError("")},children:t("actions.cancel")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",onClick:handleImport,disabled:!importText.trim(),children:t("actions.import")})]})]})})]})}function TextThemeSelector({textThemes,appliedTheme,label,customLabel="Custom",onSelect}){return 0===textThemes.length?null:(0,jsx_runtime.jsx)("div",{className:"space-y-1",children:(0,jsx_runtime.jsxs)("label",{className:"flex flex-col gap-1 text-xs font-medium text-muted-foreground",children:[(0,jsx_runtime.jsx)("span",{children:label}),(0,jsx_runtime.jsxs)("select",{className:"rounded border border-border-2 bg-surface-2 px-2 py-1 text-sm",value:null!==(_appliedTheme_id=null==appliedTheme?void 0:appliedTheme.id)&&void 0!==_appliedTheme_id?_appliedTheme_id:"",onChange:event=>onSelect(event.target.value),children:[(0,jsx_runtime.jsx)("option",{value:"",children:customLabel}),textThemes.map(theme=>(0,jsx_runtime.jsx)("option",{value:theme.id,children:theme.label},theme.id))]})]})});var _appliedTheme_id}function StylePanel({component,handleInput}){const state=function useStylePanelState({component,handleInput}){const overrides=parseOverrides(component.styles);var _overrides_color;const color=null!==(_overrides_color=overrides.color)&&void 0!==_overrides_color?_overrides_color:{};var _overrides_typography;const typography=null!==(_overrides_typography=overrides.typography)&&void 0!==_overrides_typography?_overrides_typography:{};var _overrides_typographyDesktop;const typographyDesktop=null!==(_overrides_typographyDesktop=overrides.typographyDesktop)&&void 0!==_overrides_typographyDesktop?_overrides_typographyDesktop:{};var _overrides_typographyTablet;const typographyTablet=null!==(_overrides_typographyTablet=overrides.typographyTablet)&&void 0!==_overrides_typographyTablet?_overrides_typographyTablet:{};var _overrides_typographyMobile;const typographyMobile=null!==(_overrides_typographyMobile=overrides.typographyMobile)&&void 0!==_overrides_typographyMobile?_overrides_typographyMobile:{};var _overrides_effects;const effects=null!==(_overrides_effects=overrides.effects)&&void 0!==_overrides_effects?_overrides_effects:{},previewTokens=(0,usePreviewTokens.Ay)(),textThemes=(0,react.useMemo)(()=>(0,page_builder_textThemes.Z1)(previewTokens),[previewTokens]),appliedTextTheme=(0,react.useMemo)(()=>(0,page_builder_textThemes.EN)(overrides,textThemes),[overrides,textThemes]),buildNextOverrides=(0,react.useCallback)(()=>{const latest=parseOverrides(component.styles),next={...latest};return latest.color&&(next.color={...latest.color}),latest.typography&&(next.typography={...latest.typography}),latest.typographyDesktop&&(next.typographyDesktop={...latest.typographyDesktop}),latest.typographyTablet&&(next.typographyTablet={...latest.typographyTablet}),latest.typographyMobile&&(next.typographyMobile={...latest.typographyMobile}),latest.effects&&(next.effects={...latest.effects}),next},[component]),commitOverrides=(0,react.useCallback)(next=>{handleInput("styles",JSON.stringify(next))},[handleInput]),updateGroup=(0,react.useCallback)((group,key,value)=>{const next=buildNextOverrides();var _next_color;const nextColor={...null!==(_next_color=next.color)&&void 0!==_next_color?_next_color:{}};var _next_typography;const nextTypography={...null!==(_next_typography=next.typography)&&void 0!==_next_typography?_next_typography:{}};"color"===group?(next.color={...nextColor,[key]:value},next.typography=nextTypography):(next.color=nextColor,next.typography={...nextTypography,[key]:value}),commitOverrides(next),trackEvent("stylepanel:update",{group,key})},[buildNextOverrides,commitOverrides]),updateColor=(0,react.useCallback)((key,value)=>{updateGroup("color",key,value)},[updateGroup]),updateTypography=(0,react.useCallback)((key,value)=>{updateGroup("typography",key,value)},[updateGroup]),updateBreakpointTypography=(0,react.useCallback)((bp,key,value)=>{const next=buildNextOverrides(),field=`typography${bp}`;var _next_field;const current=null!==(_next_field=next[field])&&void 0!==_next_field?_next_field:{};next[field]={...current,[key]:value},commitOverrides(next),trackEvent("stylepanel:update",{group:`typography-${bp.toLowerCase()}`,key})},[buildNextOverrides,commitOverrides]),applyPreset=(0,react.useCallback)(presetId=>{const preset=defaultEffectPresets.find(p=>p.id===presetId);if(!preset)return;const next=buildNextOverrides();var _next_color,_next_typography;preset.value.color&&(next.color={...null!==(_next_color=next.color)&&void 0!==_next_color?_next_color:{},...preset.value.color}),preset.value.typography&&(next.typography={...null!==(_next_typography=next.typography)&&void 0!==_next_typography?_next_typography:{},...preset.value.typography}),commitOverrides(next),trackEvent("stylepanel:preset",{id:presetId})},[buildNextOverrides,commitOverrides]),{customPresets,selectedCustom,setSelectedCustom,saveCurrentAsPreset,removeSelected,renameSelected,duplicateSelected,moveSelected,exportJSON,importJSON}=useCustomPresets(effects),applyCustomPreset=(0,react.useCallback)(presetId=>{const preset=customPresets.find(p=>p.id===presetId);if(!preset)return;const next=buildNextOverrides();var _next_effects,_preset_value_effects;next.effects={...null!==(_next_effects=next.effects)&&void 0!==_next_effects?_next_effects:{},...null!==(_preset_value_effects=preset.value.effects)&&void 0!==_preset_value_effects?_preset_value_effects:{}},commitOverrides(next),setSelectedCustom(presetId),trackEvent("stylepanel:apply-custom-preset",{id:presetId})},[customPresets,buildNextOverrides,commitOverrides,setSelectedCustom]),copyStyles=(0,react.useCallback)(()=>{const snapshot=buildNextOverrides();var _snapshot_color,_snapshot_typography,_snapshot_typographyDesktop,_snapshot_typographyTablet,_snapshot_typographyMobile,_snapshot_effects;const toCopy={color:{...null!==(_snapshot_color=snapshot.color)&&void 0!==_snapshot_color?_snapshot_color:{}},typography:{...null!==(_snapshot_typography=snapshot.typography)&&void 0!==_snapshot_typography?_snapshot_typography:{}},typographyDesktop:{...null!==(_snapshot_typographyDesktop=snapshot.typographyDesktop)&&void 0!==_snapshot_typographyDesktop?_snapshot_typographyDesktop:{}},typographyTablet:{...null!==(_snapshot_typographyTablet=snapshot.typographyTablet)&&void 0!==_snapshot_typographyTablet?_snapshot_typographyTablet:{}},typographyMobile:{...null!==(_snapshot_typographyMobile=snapshot.typographyMobile)&&void 0!==_snapshot_typographyMobile?_snapshot_typographyMobile:{}},effects:{...null!==(_snapshot_effects=snapshot.effects)&&void 0!==_snapshot_effects?_snapshot_effects:{}}};clipboard.set(toCopy),trackEvent("stylepanel:copy")},[buildNextOverrides]),pasteStyles=(0,react.useCallback)(()=>{const data=clipboard.get();if(!data)return;const next=buildNextOverrides();var _next_color,_next_typography,_next_typographyDesktop,_next_typographyTablet,_next_typographyMobile,_next_effects;data.color&&(next.color={...null!==(_next_color=next.color)&&void 0!==_next_color?_next_color:{},...data.color}),data.typography&&(next.typography={...null!==(_next_typography=next.typography)&&void 0!==_next_typography?_next_typography:{},...data.typography}),data.typographyDesktop&&(next.typographyDesktop={...null!==(_next_typographyDesktop=next.typographyDesktop)&&void 0!==_next_typographyDesktop?_next_typographyDesktop:{},...data.typographyDesktop}),data.typographyTablet&&(next.typographyTablet={...null!==(_next_typographyTablet=next.typographyTablet)&&void 0!==_next_typographyTablet?_next_typographyTablet:{},...data.typographyTablet}),data.typographyMobile&&(next.typographyMobile={...null!==(_next_typographyMobile=next.typographyMobile)&&void 0!==_next_typographyMobile?_next_typographyMobile:{},...data.typographyMobile}),data.effects&&(next.effects={...null!==(_next_effects=next.effects)&&void 0!==_next_effects?_next_effects:{},...data.effects}),commitOverrides(next),trackEvent("stylepanel:paste")},[buildNextOverrides,commitOverrides]),updateEffects=(0,react.useCallback)((key,value)=>{const next=buildNextOverrides();var _next_effects;next.effects={...null!==(_next_effects=next.effects)&&void 0!==_next_effects?_next_effects:{},[key]:value},commitOverrides(next),trackEvent("stylepanel:update",{group:"effects",key})},[buildNextOverrides,commitOverrides]),handleTextThemeSelect=(0,react.useCallback)(themeId=>{const latest=parseOverrides(component.styles);if(!themeId){const cleared=(0,page_builder_textThemes.x7)(latest);return commitOverrides(cleared),void trackEvent("stylepanel:text-theme",{id:"__custom__"})}const theme=textThemes.find(t=>t.id===themeId);if(!theme)return;const next=(0,page_builder_textThemes.p_)(latest,theme);commitOverrides(next),trackEvent("stylepanel:text-theme",{id:theme.id})},[component,commitOverrides,textThemes]);return{overrides,color,typography,typographyDesktop,typographyTablet,typographyMobile,effects,presets:defaultEffectPresets,customPresets,selectedCustom,setSelectedCustom,saveCurrentAsPreset,removeSelected,renameSelected,duplicateSelected,moveSelected,exportJSON,importJSON,textThemes,appliedTextTheme,updateColor,updateTypography,updateBreakpointTypography,applyPreset,applyCustomPreset,copyStyles,pasteStyles,updateEffects,handleTextThemeSelect}}({component,handleInput});var _state_color_fg,_state_color_bg;const warning=function useContrastWarnings(fg,bg){return(0,react.useMemo)(()=>{if(!fg||!bg)return null;const contrast=(0,ColorInput.bJ)(fg,bg);return contrast<4.5?{contrast,suggestion:(0,ColorInput.O9)(fg,bg)}:null},[fg,bg])}(null!==(_state_color_fg=state.color.fg)&&void 0!==_state_color_fg?_state_color_fg:"",null!==(_state_color_bg=state.color.bg)&&void 0!==_state_color_bg?_state_color_bg:""),t=(0,src.c3)(),fmt=(template,bp)=>template.replace("{bp}",bp);var _component_cursor;const cursor=null!==(_component_cursor=component.cursor)&&void 0!==_component_cursor?_component_cursor:void 0;var _component_cursorUrl;const cursorUrl=null!==(_component_cursorUrl=component.cursorUrl)&&void 0!==_component_cursorUrl?_component_cursorUrl:void 0,setExtra=(field,value)=>handleInput(field,value);var _component_hoverScale,_component_hoverOpacity;return(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)(CursorSection,{cursor,cursorUrl,onCursorChange:value=>setExtra("cursor",value),onCursorUrlChange:value=>setExtra("cursorUrl",value)}),(0,jsx_runtime.jsx)(PresetManager,{presets:state.presets,customPresets:state.customPresets,selectedCustom:state.selectedCustom,onApplyPreset:state.applyPreset,onApplyCustomPreset:state.applyCustomPreset,onCopy:state.copyStyles,onPaste:state.pasteStyles,onSavePreset:()=>{state.saveCurrentAsPreset()},onRenamePreset:state.renameSelected,onDuplicatePreset:state.duplicateSelected,onMovePreset:state.moveSelected,onRemovePreset:state.removeSelected,exportAllPresets:state.exportJSON,importPresets:state.importJSON}),(0,jsx_runtime.jsx)(PresetGallery,{title:t("cms.style.presets.quick"),presets:state.presets,onApply:state.applyPreset}),(0,jsx_runtime.jsx)(PresetGallery,{title:t("cms.style.presets.custom"),presets:state.customPresets,onApply:state.applyCustomPreset}),(0,jsx_runtime.jsx)(StylePreviewCard,{effects:state.effects,hoverScale:null!==(_component_hoverScale=component.hoverScale)&&void 0!==_component_hoverScale?_component_hoverScale:void 0,hoverOpacity:null!==(_component_hoverOpacity=component.hoverOpacity)&&void 0!==_component_hoverOpacity?_component_hoverOpacity:void 0}),(0,jsx_runtime.jsx)(ColorEditor,{values:{fg:state.color.fg,bg:state.color.bg,border:state.color.border},labels:{fg:t("cms.style.foreground"),bg:t("cms.style.background"),border:t("cms.style.border")},placeholder:t("cms.style.colorPlaceholder"),onChange:(key,value)=>state.updateColor(key,value)}),(0,jsx_runtime.jsx)(TextThemeSelector,{textThemes:state.textThemes,appliedTheme:state.appliedTextTheme,label:t("cms.style.textStyle"),customLabel:t("cms.theme.colorInput.customSwatchTitle"),onSelect:themeId=>state.handleTextThemeSelect(themeId)}),(0,jsx_runtime.jsx)(TypographyEditor,{base:state.typography,desktop:state.typographyDesktop,tablet:state.typographyTablet,mobile:state.typographyMobile,labels:{base:{fontFamily:t("cms.style.fontFamily"),fontSize:t("cms.style.fontSize"),fontWeight:t("cms.style.fontWeight"),lineHeight:t("cms.style.lineHeight")},desktop:{heading:fmt(t("cms.style.typography.headingBp"),t("devices.desktop")),fontSize:fmt(t("cms.style.typography.fontSizeBp"),t("devices.desktop")),lineHeight:fmt(t("cms.style.typography.lineHeightBp"),t("devices.desktop"))},tablet:{heading:fmt(t("cms.style.typography.headingBp"),t("devices.tablet")),fontSize:fmt(t("cms.style.typography.fontSizeBp"),t("devices.tablet")),lineHeight:fmt(t("cms.style.typography.lineHeightBp"),t("devices.tablet"))},mobile:{heading:fmt(t("cms.style.typography.headingBp"),t("devices.mobile")),fontSize:fmt(t("cms.style.typography.fontSizeBp"),t("devices.mobile")),lineHeight:fmt(t("cms.style.typography.lineHeightBp"),t("devices.mobile"))}},onBase:(key,value)=>state.updateTypography(key,value),onBp:(bp,key,value)=>state.updateBreakpointTypography(bp,key,value)}),(0,jsx_runtime.jsxs)("div",{className:"mt-3 border-t pt-2",children:[(0,jsx_runtime.jsx)("div",{className:"text-xs font-semibold text-muted-foreground",children:t("cms.style.effects")}),(0,jsx_runtime.jsx)(EffectsEditor,{effects:state.effects,onChange:state.updateEffects})]}),warning?(0,jsx_runtime.jsx)("p",{role:"status","aria-live":"polite",className:"text-danger text-sm",children:t("cms.style.lowContrast")}):null]})}CursorSection.__docgenInfo={description:"",methods:[],displayName:"CursorSection",props:{cursor:{required:!0,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},cursorUrl:{required:!0,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},onCursorChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},name:"value"}],return:{name:"void"}}},description:""},onCursorUrlChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},name:"value"}],return:{name:"void"}}},description:""}}},PresetManager.__docgenInfo={description:"",methods:[],displayName:"PresetManager",props:{presets:{required:!0,tsType:{name:"ReadonlyArray",elements:[{name:"signature",type:"object",raw:"{\n  id: string;\n  label: string;\n  value: Partial<StyleOverrides>;\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"Partial",elements:[{name:"StyleOverrides"}],raw:"Partial<StyleOverrides>",required:!0}}]}}],raw:"ReadonlyArray<EffectPreset>"},description:""},customPresets:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; value: Partial<StyleOverrides> }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"Partial",elements:[{name:"StyleOverrides"}],raw:"Partial<StyleOverrides>",required:!0}}]}}],raw:"CustomPreset[]"},description:""},selectedCustom:{required:!0,tsType:{name:"string"},description:""},onApplyPreset:{required:!0,tsType:{name:"signature",type:"function",raw:"(presetId: string) => void",signature:{arguments:[{type:{name:"string"},name:"presetId"}],return:{name:"void"}}},description:""},onApplyCustomPreset:{required:!0,tsType:{name:"signature",type:"function",raw:"(presetId: string) => void",signature:{arguments:[{type:{name:"string"},name:"presetId"}],return:{name:"void"}}},description:""},onCopy:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onPaste:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onSavePreset:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onRenamePreset:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onDuplicatePreset:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onMovePreset:{required:!0,tsType:{name:"signature",type:"function",raw:"(dir: MoveDirection) => void",signature:{arguments:[{type:{name:"union",raw:'"up" | "down"',elements:[{name:"literal",value:'"up"'},{name:"literal",value:'"down"'}]},name:"dir"}],return:{name:"void"}}},description:""},onRemovePreset:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},exportAllPresets:{required:!0,tsType:{name:"signature",type:"function",raw:"() => string",signature:{arguments:[],return:{name:"string"}}},description:""},importPresets:{required:!0,tsType:{name:"signature",type:"function",raw:"(json: string) => boolean",signature:{arguments:[{type:{name:"string"},name:"json"}],return:{name:"boolean"}}},description:""}}},TextThemeSelector.__docgenInfo={description:"",methods:[],displayName:"TextThemeSelector",props:{textThemes:{required:!0,tsType:{name:"Array",elements:[{name:"TextTheme"}],raw:"TextTheme[]"},description:""},appliedTheme:{required:!0,tsType:{name:"union",raw:"TextTheme | null",elements:[{name:"TextTheme"},{name:"null"}]},description:""},label:{required:!0,tsType:{name:"string"},description:""},customLabel:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Custom"',computed:!1}},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(themeId: string) => void",signature:{arguments:[{type:{name:"string"},name:"themeId"}],return:{name:"void"}}},description:""}}},StylePanel.__docgenInfo={description:"",methods:[],displayName:"StylePanel",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},handleInput:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends keyof PageComponent>(field: K, value: PageComponent[K]) => void",signature:{arguments:[{type:{name:"K"},name:"field"},{type:{name:"z.infer[K]",raw:"PageComponent[K]"},name:"value"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/TabsEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>TabsEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts");function TabsEditor({component,onChange}){var _component_labels;const labels=null!==(_component_labels=component.labels)&&void 0!==_component_labels?_component_labels:[];var _component_active;const active=null!==(_component_active=component.active)&&void 0!==_component_active?_component_active:0;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[labels.map((label,i)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-end gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:`Tab ${i+1} Label`,value:label,onChange:e=>{const copy=[...labels];copy[i]=e.target.value,onChange({labels:copy})}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.$n,{type:"button",variant:"outline",onClick:()=>{const copy=labels.filter((_,idx)=>idx!==i),patch={labels:copy};active>=copy.length&&(patch.active=0),onChange(patch)},children:"Remove"})]},`${component.id}-${label}`)),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.$n,{type:"button",variant:"outline",onClick:()=>onChange({labels:[...labels,""]}),children:"Add Tab"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.l6,{value:String(active),onValueChange:v=>onChange({active:void 0===v?void 0:Number(v)}),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.bq,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.yv,{placeholder:"Active Tab"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.gC,{children:labels.map((label,i)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:String(i),children:`Tab ${i+1}`},`${component.id}-${label}`))})]})]})}TabsEditor.__docgenInfo={description:"",methods:[],displayName:"TabsEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/TestimonialsEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>TestimonialsEditor});var _useArrayEditor__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useArrayEditor.tsx");function TestimonialsEditor({component,onChange}){return(0,_useArrayEditor__WEBPACK_IMPORTED_MODULE_0__.W)(onChange)("testimonials",component.testimonials,["quote","name"],{minItems:component.minItems,maxItems:component.maxItems})}},"../../packages/ui/src/components/cms/page-builder/ThemePanel.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>ThemePanel});var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),shadcn=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),src=__webpack_require__("../../packages/i18n/src/index.ts"),useTokenEditor=__webpack_require__("../../packages/ui/src/hooks/useTokenEditor.tsx"),ColorInput=__webpack_require__("../../packages/ui/src/components/cms/ColorInput.tsx");function FontSelect({value,options,onChange,onUpload,className}){const toClass=name=>`fontopt-${name.replace(/[^a-z0-9]+/gi,"-").replace(/^-+|-+$/g,"").toLowerCase()}`,css=options.map(o=>`.${toClass(o)}{font-family:${JSON.stringify(o)};}`).join("");return(0,jsx_runtime.jsxs)("span",{className:`flex min-w-0 flex-col gap-1 ${null!=className?className:""}`,children:[(0,jsx_runtime.jsx)("style",{children:css}),(0,jsx_runtime.jsx)("select",{className:"flex-1 min-w-0 rounded border p-1",value,onChange:e=>onChange(e.target.value),children:options.map(o=>(0,jsx_runtime.jsx)("option",{value:o,className:toClass(o),children:o},o))}),(0,jsx_runtime.jsx)("input",{className:"block w-full",type:"file",accept:".woff,.woff2,.ttf,.otf",onChange:onUpload})]})}FontSelect.__docgenInfo={description:"",methods:[],displayName:"FontSelect",props:{value:{required:!0,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},onUpload:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: React.ChangeEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ReactChangeEvent",raw:"React.ChangeEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},name:"e"}],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};__webpack_require__("../../node_modules/.pnpm/@dnd-kit+core@6.3.1_react-dom@19.2.0-canary-3fbfb9ba-20250409_react@19.2.0-canary-3fbfb_fe9249e4a42fbe7e42b4e4091f9a4c62/node_modules/@dnd-kit/core/dist/core.esm.js"),__webpack_require__("../../node_modules/.pnpm/@dnd-kit+sortable@10.0.0_@dnd-kit+core@6.3.1_react-dom@19.2.0-canary-3fbfb9ba-20250409__571aab38212e666fc4f105bb05843619/node_modules/@dnd-kit/sortable/dist/sortable.esm.js"),__webpack_require__("../../node_modules/.pnpm/@dnd-kit+utilities@3.2.2_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@dnd-kit/utilities/dist/utilities.esm.js"),__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-icons@1.3.2_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-icons/dist/react-icons.esm.js"),__webpack_require__("../../node_modules/.pnpm/ulid@3.0.1/node_modules/ulid/dist/browser/index.js");const DraggableLi=(0,react.forwardRef)(({className,...rest},ref)=>(0,jsx_runtime.jsx)("li",{ref,className,...rest}));DraggableLi.displayName="DraggableLi";__webpack_require__("../../packages/ui/src/components/atoms/primitives/index.ts");const StyledNav=(0,react.forwardRef)(({children,...rest},ref)=>(0,jsx_runtime.jsx)("nav",{ref,...rest,children}));StyledNav.displayName="StyledNav";__webpack_require__("../../packages/ui/src/components/cms/PagesTable.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/PageBuilder.tsx");__webpack_require__("../../packages/ui/src/components/cms/products/index.ts");const metadataMap=new WeakMap;let patchApplied=!1,trackedInstances=0,originalDescriptor=null,inputPrototype=null;function getPrototype(){return inputPrototype||(window.HTMLInputElement?(inputPrototype=window.HTMLInputElement.prototype,inputPrototype):null)}function RangeInput({value,onChange,min=0,max=64}){const inputRef=(0,react.useRef)(null),onChangeRef=(0,react.useRef)(onChange);(0,react.useEffect)(()=>{onChangeRef.current=onChange},[onChange]),(0,react.useLayoutEffect)(()=>{const input=inputRef.current;if(!input)return;if(function ensurePatched(){if(patchApplied)return;const prototype=getPrototype();if(!prototype)return;const descriptor=Object.getOwnPropertyDescriptor(prototype,"value"),originalSet=null==descriptor?void 0:descriptor.set,originalGet=null==descriptor?void 0:descriptor.get;originalSet&&originalGet&&(Object.defineProperty(prototype,"value",{configurable:!0,get(){return originalGet.call(this)},set(nextValue){originalSet.call(this,nextValue);const meta=metadataMap.get(this);if(!meta)return;if(meta.skipNext)return void(meta.skipNext=!1);const numeric=Number(nextValue);!Number.isNaN(numeric)&&(numeric<meta.getMin()||numeric>meta.getMax())&&(meta.skipNext=!0,meta.notify(`${nextValue}px`))}}),originalDescriptor=descriptor,patchApplied=!0)}(),!patchApplied)return;trackedInstances+=1;const existing=metadataMap.get(input),meta=null!=existing?existing:{getMin:()=>min,getMax:()=>max,notify:next=>{onChangeRef.current(next)},skipNext:!1};return meta.getMin=()=>min,meta.getMax=()=>max,meta.notify=next=>{onChangeRef.current(next)},metadataMap.set(input,meta),()=>{metadataMap.delete(input),meta.skipNext=!1,trackedInstances-=1,0===trackedInstances&&function teardownPatch(){if(!patchApplied)return;const prototype=getPrototype();prototype&&originalDescriptor&&(Object.defineProperty(prototype,"value",originalDescriptor),originalDescriptor=null,patchApplied=!1)}()}},[min,max]);const num=parseInt(value,10);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("input",{ref:inputRef,type:"range",min,max,value:num,onChange:e=>onChange(`${e.target.value}px`)}),(0,jsx_runtime.jsxs)("span",{className:"w-10 text-end",children:[num,"px"]})]})}RangeInput.__docgenInfo={description:"",methods:[],displayName:"RangeInput",props:{value:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},min:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},max:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"64",computed:!1}}}};const presetList=__webpack_require__("../../packages/ui/src/components/cms/style/presets.json");function Presets({tokens,onChange}){const t=(0,src.c3)();return 0===presetList.length?(0,jsx_runtime.jsx)("p",{className:"text-sm text-muted","data-cy":"presets-placeholder",children:t("cms.style.presets.none")}):(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,jsx_runtime.jsxs)("label",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{children:t("cms.style.presets.label")}),(0,jsx_runtime.jsxs)("select",{"data-cy":"preset-select",className:"rounded border p-1",defaultValue:"",onChange:e=>(id=>{const preset=null==presetList?void 0:presetList.find(p=>p.id===id);if(preset){onChange({...tokens,...preset.tokens});const googleFamilies=new Set(["Inter","Space Grotesk","Playfair Display","Lato","Source Sans 3","Montserrat","Rubik","Work Sans","Nunito","Quicksand","Open Sans","Roboto","Merriweather","Poppins"]),injectGoogle=name=>{const id=`google-font-${name}`;if(!document.getElementById(id)){const link=document.createElement("link");link.id=id,link.rel="stylesheet",link.href=`https://fonts.googleapis.com/css2?family=${name.replace(/ /g,"+")}&display=swap`,document.head.appendChild(link)}};Object.values(preset.tokens).forEach(v=>{if("string"!=typeof v)return;const match=v.match(/"([^"]+)"/),name=null==match?void 0:match[1];name&&googleFamilies.has(name)&&injectGoogle(name)})}})(e.target.value),children:[(0,jsx_runtime.jsx)("option",{value:"",disabled:!0,children:t("cms.style.presets.choose")}),presetList.map(p=>(0,jsx_runtime.jsx)("option",{value:p.id,children:p.name},p.id))]})]}),(0,jsx_runtime.jsx)("button",{type:"button","data-cy":"preset-reset",className:"rounded border px-2 py-1 min-h-10 min-w-10",onClick:()=>{onChange({})},children:t("common.default")})]})}Presets.__docgenInfo={description:"",methods:[],displayName:"Presets",props:{tokens:{required:!0,tsType:{name:"Record",elements:[{name:"literal",value:"`--${string}`"},{name:"string"}],raw:"Record<`--${string}`, string>"},description:""},baseTokens:{required:!0,tsType:{name:"Record",elements:[{name:"literal",value:"`--${string}`"},{name:"string"}],raw:"Record<`--${string}`, string>"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(tokens: TokenMap) => void",signature:{arguments:[{type:{name:"Record",elements:[{name:"literal",value:"`--${string}`"},{name:"string"}],raw:"Record<`--${string}`, string>"},name:"tokens"}],return:{name:"void"}}},description:""}}};var LayoutPanel=__webpack_require__("../../packages/ui/src/components/cms/page-builder/panels/LayoutPanel.tsx"),ContentPanel=__webpack_require__("../../packages/ui/src/components/cms/page-builder/panels/ContentPanel.tsx"),InteractionsPanel=__webpack_require__("../../packages/ui/src/components/cms/page-builder/panels/InteractionsPanel.tsx"),TimelinePanel=__webpack_require__("../../packages/ui/src/components/cms/page-builder/panels/TimelinePanel.tsx"),LottieControls=__webpack_require__("../../packages/ui/src/components/cms/page-builder/panels/LottieControls.tsx"),StylePanel=__webpack_require__("../../packages/ui/src/components/cms/page-builder/StylePanel.tsx"),useComponentInputs=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useComponentInputs.ts");function ComponentEditor({component,onChange,onResize,editor,onUpdateEditor,onUpdateEditorForId,issues}){const{handleInput}=(0,useComponentInputs.A)(onChange),{handleResize,handleFullSize}=function useComponentResize(onResize){return{handleResize:(0,react.useCallback)((field,value)=>{const v=value.trim();onResize({[field]:v||void 0})},[onResize]),handleFullSize:(0,react.useCallback)(field=>{onResize({[field]:"100%"})},[onResize])}}(onResize),t=(0,src.c3)();if(!component)return null;const errorKeys=(()=>{const s=new Set;if(!issues)return s;for(const i of issues){const path=Array.isArray(i.path)?i.path:[];path.includes("children")||"string"!=typeof path[path.length-1]||s.add(String(path[path.length-1]))}return s})();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Array.isArray(issues)&&issues.length>0&&(0,jsx_runtime.jsxs)("div",{className:"mb-3 rounded border border-red-300 bg-red-50 p-3 text-sm text-red-800",children:[(0,jsx_runtime.jsx)("div",{className:"mb-1 font-semibold",children:t("cms.builder.validation.issues")}),(0,jsx_runtime.jsx)("ul",{className:"list-disc pl-5 space-y-0.5",children:issues.map(i=>{const resolved=function resolveIssueLabel(issue,t){const path=issue.path.slice(1),key="string"==typeof path[path.length-1]?path[path.length-1]:String(path[path.length-1]),pathString=path.join("."),panelKey={width:"cms.builder.layout.size",widthDesktop:"cms.builder.layout.size",widthTablet:"cms.builder.layout.size",widthMobile:"cms.builder.layout.size",height:"cms.builder.layout.size",heightDesktop:"cms.builder.layout.size",heightTablet:"cms.builder.layout.size",heightMobile:"cms.builder.layout.size",position:"cms.builder.layout.position",top:"cms.builder.layout.position",left:"cms.builder.layout.position",sticky:"cms.builder.layout.position",stickyOffset:"cms.builder.layout.position",zIndex:"cms.builder.layout.zIndex",margin:"cms.builder.layout.spacing",marginDesktop:"cms.builder.layout.spacing",marginTablet:"cms.builder.layout.spacing",marginMobile:"cms.builder.layout.spacing",padding:"cms.builder.layout.spacing",paddingDesktop:"cms.builder.layout.spacing",paddingTablet:"cms.builder.layout.spacing",paddingMobile:"cms.builder.layout.spacing",cropAspect:"cms.builder.content.image",alt:"cms.builder.content.image",clickAction:"cms.builder.interactions",href:"cms.builder.interactions.navigate",modalHtml:"cms.builder.interactions.modal",parallax:"cms.builder.interactions.effects",animation:"cms.builder.interactions.animation",animationDuration:"cms.builder.interactions.animation",timeline:"cms.builder.timeline"}[key]||"cms.builder.unknown";return{panel:"function"==typeof t?t(panelKey):panelKey,field:key,path:pathString}}(i,t),key=`${Array.isArray(i.path)?i.path.join("."):""}:${i.message}`;return(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsxs)("span",{className:"font-medium",children:[resolved.panel,":"]})," ",i.message,(0,jsx_runtime.jsx)("span",{className:"ms-1 text-xs text-red-700/80",children:t("cms.builder.validation.fieldLabel",{field:resolved.field})})]},key)})})]}),(0,jsx_runtime.jsxs)(shadcn.nD,{type:"multiple",defaultValue:["layout","style","interactions","timeline"],className:"space-y-3",children:[(0,jsx_runtime.jsxs)(shadcn.As,{value:"layout",className:"border-none",children:[(0,jsx_runtime.jsx)(shadcn.$m,{className:"rounded-md border border-border-3 bg-muted/30 px-4 py-2 text-start text-sm font-semibold",children:t("cms.builder.panel.layout")}),(0,jsx_runtime.jsx)(shadcn.ub,{className:"pt-3",children:(0,jsx_runtime.jsx)(LayoutPanel.A,{component,handleInput,handleResize,handleFullSize,editorFlags:null==editor?void 0:editor[component.id],onUpdateEditor,editorMap:editor,updateEditorForId:onUpdateEditorForId,errorKeys})})]}),(0,jsx_runtime.jsxs)(shadcn.As,{value:"content",className:"border-none",children:[(0,jsx_runtime.jsx)(shadcn.$m,{className:"rounded-md border border-border-3 bg-muted/30 px-4 py-2 text-start text-sm font-semibold",children:t("cms.builder.panel.content")}),(0,jsx_runtime.jsx)(shadcn.ub,{className:"pt-3",children:(0,jsx_runtime.jsx)(ContentPanel.A,{component,onChange,handleInput})})]}),(0,jsx_runtime.jsxs)(shadcn.As,{value:"style",className:"border-none",children:[(0,jsx_runtime.jsx)(shadcn.$m,{className:"rounded-md border border-border-3 bg-muted/30 px-4 py-2 text-start text-sm font-semibold",children:t("cms.builder.panel.style")}),(0,jsx_runtime.jsx)(shadcn.ub,{className:"pt-3",children:(0,jsx_runtime.jsx)(StylePanel.A,{component,handleInput})})]}),(0,jsx_runtime.jsxs)(shadcn.As,{value:"interactions",className:"border-none",children:[(0,jsx_runtime.jsx)(shadcn.$m,{className:"rounded-md border border-border-3 bg-muted/30 px-4 py-2 text-start text-sm font-semibold",children:t("cms.builder.interactions")}),(0,jsx_runtime.jsx)(shadcn.ub,{className:"pt-3",children:(0,jsx_runtime.jsx)(InteractionsPanel.A,{component,handleInput})})]}),(0,jsx_runtime.jsxs)(shadcn.As,{value:"timeline",className:"border-none",children:[(0,jsx_runtime.jsx)(shadcn.$m,{className:"rounded-md border border-border-3 bg-muted/30 px-4 py-2 text-start text-sm font-semibold",children:t("cms.builder.timeline")}),(0,jsx_runtime.jsx)(shadcn.ub,{className:"pt-3",children:(0,jsx_runtime.jsx)(TimelinePanel.A,{component,handleInput})})]}),(0,jsx_runtime.jsxs)(shadcn.As,{value:"lottie",className:"border-none",children:[(0,jsx_runtime.jsx)(shadcn.$m,{className:"rounded-md border border-border/60 bg-muted/30 px-4 py-2 text-start text-sm font-semibold",children:t("cms.builder.panel.lottie")}),(0,jsx_runtime.jsx)(shadcn.ub,{className:"pt-3",children:(0,jsx_runtime.jsx)(LottieControls.A,{component,handleInput})})]})]})]})}ComponentEditor.__docgenInfo={description:"",methods:[],displayName:"ComponentEditor",props:{component:{required:!0,tsType:{name:"union",raw:"PageComponent | null",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},{name:"null"}]},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<PageComponent>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"Partial<PageComponent>"},name:"patch"}],return:{name:"void"}}},description:""},onResize:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: {\n  width?: string;\n  height?: string;\n  top?: string;\n  left?: string;\n  widthDesktop?: string;\n  widthTablet?: string;\n  widthMobile?: string;\n  heightDesktop?: string;\n  heightTablet?: string;\n  heightMobile?: string;\n  marginDesktop?: string;\n  marginTablet?: string;\n  marginMobile?: string;\n  paddingDesktop?: string;\n  paddingTablet?: string;\n  paddingMobile?: string;\n}) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{\n  width?: string;\n  height?: string;\n  top?: string;\n  left?: string;\n  widthDesktop?: string;\n  widthTablet?: string;\n  widthMobile?: string;\n  heightDesktop?: string;\n  heightTablet?: string;\n  heightMobile?: string;\n  marginDesktop?: string;\n  marginTablet?: string;\n  marginMobile?: string;\n  paddingDesktop?: string;\n  paddingTablet?: string;\n  paddingMobile?: string;\n}",signature:{properties:[{key:"width",value:{name:"string",required:!1}},{key:"height",value:{name:"string",required:!1}},{key:"top",value:{name:"string",required:!1}},{key:"left",value:{name:"string",required:!1}},{key:"widthDesktop",value:{name:"string",required:!1}},{key:"widthTablet",value:{name:"string",required:!1}},{key:"widthMobile",value:{name:"string",required:!1}},{key:"heightDesktop",value:{name:"string",required:!1}},{key:"heightTablet",value:{name:"string",required:!1}},{key:"heightMobile",value:{name:"string",required:!1}},{key:"marginDesktop",value:{name:"string",required:!1}},{key:"marginTablet",value:{name:"string",required:!1}},{key:"marginMobile",value:{name:"string",required:!1}},{key:"paddingDesktop",value:{name:"string",required:!1}},{key:"paddingTablet",value:{name:"string",required:!1}},{key:"paddingMobile",value:{name:"string",required:!1}}]}},name:"patch"}],return:{name:"void"}}},description:""},editor:{required:!1,tsType:{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},description:""},onUpdateEditor:{required:!1,tsType:{name:"signature",type:"function",raw:"(patch: Partial<EditorFlags>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  // Per-element responsive behavior (builder-only flag)\n  responsiveBehavior?: "none" | "scale-proportional";\n  // Legacy single strategy (mobile); kept for backwards-compat\n  stackStrategy?: "default" | "reverse" | "custom";\n  // Per-device stacking strategies\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  // Per-device custom orders on children\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"responsiveBehavior",value:{name:"union",raw:'"none" | "scale-proportional"',elements:[{name:"literal",value:'"none"'},{name:"literal",value:'"scale-proportional"'}],required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1}},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}}]}}],raw:"Partial<EditorFlags>"},name:"patch"}],return:{name:"void"}}},description:""},onUpdateEditorForId:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: string, patch: Partial<EditorFlags>) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  // Per-element responsive behavior (builder-only flag)\n  responsiveBehavior?: "none" | "scale-proportional";\n  // Legacy single strategy (mobile); kept for backwards-compat\n  stackStrategy?: "default" | "reverse" | "custom";\n  // Per-device stacking strategies\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  // Per-device custom orders on children\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"responsiveBehavior",value:{name:"union",raw:'"none" | "scale-proportional"',elements:[{name:"literal",value:'"none"'},{name:"literal",value:'"scale-proportional"'}],required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1}},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}}]}}],raw:"Partial<EditorFlags>"},name:"patch"}],return:{name:"void"}}},description:""},issues:{required:!1,tsType:{name:"Array",elements:[{name:"Issue"}],raw:"Issue[]"},description:""}}};__webpack_require__("../../packages/ui/src/components/cms/page-builder/ImagePicker.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/ContactFormEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/GalleryEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/ImageBlockEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/TestimonialsEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/HeroBannerEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/ValuePropsEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/ReviewsCarouselEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/AnnouncementBarEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/MapBlockEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/StoreLocatorBlockEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/VideoBlockEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/FAQBlockEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/PricingTableEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/NewsletterSignupEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/ImageSliderEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/SocialFeedEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/SocialProofEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/SearchBarEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/RecommendationCarouselEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/ProductComparisonEditor.tsx");__webpack_require__("../../packages/ui/src/components/cms/page-builder/ProductBundleEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/GiftCardEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/FormBuilderEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/ProductFilterEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/CountdownTimerEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/SocialLinksEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/ButtonEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/TabsEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/ProductGridEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/CustomHtmlEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/useMediaLibrary.ts"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/useArrayEditor.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/CanvasItem.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/Palette.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/PageBuilderLayout.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/PageToolbar.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/PageCanvas.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/PageSidebar.tsx"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/defaults.ts"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/state/index.ts"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/usePageBuilderState.ts"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/usePageBuilderDnD.ts"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/usePageBuilderControls.ts"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/useAutoSave.ts"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/usePageBuilderSave.ts"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/useCanvasDrag.ts"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/useCanvasResize.ts"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/useBlockDnD.ts"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/useBlockTransform.ts"),__webpack_require__("../../packages/ui/src/components/cms/page-builder/useLocalizedTextEditor.ts"),__webpack_require__("../../packages/ui/src/utils/devicePresets.ts");__webpack_require__("../../packages/ui/src/utils/style/index.ts");__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/link.js"),__webpack_require__("../../packages/telemetry/src/index.ts"),__webpack_require__("../../packages/ui/src/components/atoms/index.ts");var Grid=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Grid.tsx");__webpack_require__("../../packages/ui/src/components/cms/marketing/campaign/CampaignForm.tsx"),__webpack_require__("../../packages/ui/src/components/cms/marketing/campaign/CampaignPreviewPanel.tsx"),__webpack_require__("../../packages/ui/src/components/cms/marketing/campaign/CampaignSummaryCard.tsx"),__webpack_require__("../../packages/ui/src/components/cms/marketing/campaign/CampaignWizard.tsx"),__webpack_require__("../../packages/ui/src/components/cms/marketing/campaign/types.ts"),__webpack_require__("../../packages/ui/src/components/cms/marketing/emailScheduling/EmailScheduleForm.tsx"),__webpack_require__("../../packages/ui/src/components/cms/marketing/emailScheduling/EmailSchedulePreviewPanel.tsx"),__webpack_require__("../../packages/ui/src/components/cms/marketing/emailScheduling/EmailScheduleSummaryCard.tsx"),__webpack_require__("../../packages/ui/src/components/cms/marketing/emailScheduling/FollowUpControls.tsx"),__webpack_require__("../../packages/ui/src/components/cms/marketing/emailScheduling/ScheduleTimingFields.tsx"),__webpack_require__("../../packages/ui/src/components/cms/marketing/emailScheduling/hooks/useEmailScheduleFormState.ts"),__webpack_require__("../../packages/ui/src/components/cms/marketing/emailScheduling/types.ts"),__webpack_require__("../../packages/ui/src/components/cms/marketing/discounts/DiscountForm.tsx"),__webpack_require__("../../packages/ui/src/components/cms/marketing/discounts/DiscountFieldGroups.tsx"),__webpack_require__("../../packages/ui/src/components/cms/marketing/discounts/DiscountPreviewPanel.tsx"),__webpack_require__("../../packages/ui/src/components/cms/marketing/discounts/DiscountSummaryCard.tsx"),__webpack_require__("../../packages/ui/src/components/cms/marketing/discounts/types.ts"),__webpack_require__("../../packages/ui/src/components/cms/marketing/discounts/hooks/useDiscountFormState.ts"),__webpack_require__("../../packages/ui/src/components/cms/marketing/segments/SegmentBuilderWizard.tsx"),__webpack_require__("../../packages/ui/src/components/cms/marketing/segments/SegmentPreviewPanel.tsx"),__webpack_require__("../../packages/ui/src/components/cms/marketing/segments/SegmentSummaryCard.tsx"),__webpack_require__("../../packages/ui/src/components/cms/marketing/segments/types.ts"),__webpack_require__("../../packages/ui/src/components/cms/marketing/shared/index.ts");var useTokenColors=__webpack_require__("../../packages/ui/src/hooks/useTokenColors.ts"),colorUtils=__webpack_require__("../../packages/ui/src/utils/colorUtils.ts");function ColorToken({tokenKey,value,defaultValue,isOverridden,tokens,baseTokens,setToken,onRenameToken,onReplaceColor,showExtras=!0}){const t=(0,src.c3)(),warning=(0,useTokenColors.j)(tokenKey,value,tokens,baseTokens),supportsEyeDropper="EyeDropper"in window,overrideClasses=isOverridden?"border-s-2 border-s-info ps-2":"";return(0,jsx_runtime.jsxs)("label",{"data-token-key":tokenKey,className:`flex flex-col gap-1 text-sm ${overrideClasses}`,"data-token":isOverridden?"--color-info":void 0,children:[(0,jsx_runtime.jsxs)("span",{className:"flex flex-wrap items-center gap-2 min-w-0",children:[(0,jsx_runtime.jsx)("span",{className:"basis-40 shrink-0 break-all",children:tokenKey}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(ColorInput.AN,{value,onChange:val=>setToken(tokenKey,val)}),showExtras&&supportsEyeDropper&&(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded border px-2 py-1 text-xs min-h-10 min-w-10",onClick:()=>{(async()=>{try{const ctor=window.EyeDropper;if(!ctor)return;const instance=new ctor,result=await instance.open();(null==result?void 0:result.sRGBHex)&&setToken(tokenKey,(0,colorUtils.g8)(result.sRGBHex))}catch(error){if("AbortError"===error.name)return}})()},children:t("cms.style.eyedropper")}),showExtras&&(onRenameToken||onReplaceColor)&&(0,jsx_runtime.jsxs)(shadcn.rI,{children:[(0,jsx_runtime.jsx)(shadcn.ty,{asChild:!0,children:(0,jsx_runtime.jsx)("button",{type:"button","aria-label":`${t("cms.style.moreActions")} ${tokenKey}`,className:"rounded border px-2 py-1 text-xs min-h-10 min-w-10",children:"•••"})}),(0,jsx_runtime.jsxs)(shadcn.SQ,{align:"start",children:[onRenameToken&&(0,jsx_runtime.jsx)(shadcn._2,{onSelect:()=>(()=>{if(!onRenameToken)return;const next=window.prompt("Rename color token",tokenKey),trimmed=null==next?void 0:next.trim();trimmed&&trimmed!==tokenKey&&onRenameToken(tokenKey,trimmed)})(),children:t("cms.style.renameToken")}),onReplaceColor&&(0,jsx_runtime.jsx)(shadcn._2,{onSelect:()=>(()=>{if(!onReplaceColor)return;const next=window.prompt("Replace this color across tokens with (hex, HSL, or CSS value)",value),trimmed=null==next?void 0:next.trim();if(!trimmed)return;const normalized=(0,colorUtils.qv)(trimmed)?(0,colorUtils.g8)(trimmed):trimmed;onReplaceColor(tokenKey,normalized)})(),children:t("cms.style.replaceAcrossTokens")})]})]})]}),isOverridden&&(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded border px-2 py-1 text-xs min-h-10 min-w-10",onClick:()=>setToken(tokenKey,null!=defaultValue?defaultValue:""),children:t("actions.reset")})]}),defaultValue&&(0,jsx_runtime.jsx)("span",{className:"text-xs text-muted-foreground",children:t("cms.style.default",{value:defaultValue})}),warning&&(0,jsx_runtime.jsxs)("span",{className:"text-xs text-danger","data-token":"--color-danger",children:[t("cms.style.lowContrast",{ratio:warning.contrast.toFixed(2)}),warning.suggestion?` – ${t("cms.style.try",{suggestion:warning.suggestion})}`:""]})]})}function FontToken({tokenKey,value,defaultValue,isOverridden,options,type,googleFonts,setToken,handleUpload,setGoogleFont}){const t=(0,src.c3)(),overrideClasses=isOverridden?"border-s-2 border-s-info ps-2":"";return(0,jsx_runtime.jsxs)("label",{"data-token-key":tokenKey,className:`flex flex-col gap-1 text-sm ${overrideClasses}`,"data-token":isOverridden?"--color-info":void 0,children:[(0,jsx_runtime.jsxs)("span",{className:"flex flex-wrap items-center gap-2 min-w-0",children:[(0,jsx_runtime.jsx)("span",{className:"basis-40 shrink-0",children:tokenKey}),(0,jsx_runtime.jsx)(FontSelect,{value,options,onChange:val=>setToken(tokenKey,val),onUpload:e=>handleUpload(type,e),className:"min-w-0 flex-1"}),isOverridden&&(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded border px-2 py-1 text-xs min-h-10 min-w-10",onClick:()=>setToken(tokenKey,null!=defaultValue?defaultValue:""),children:t("common.reset")}),(0,jsx_runtime.jsxs)("select",{className:"min-w-0 flex-1 rounded border p-1 sm:flex-none sm:w-auto",onChange:e=>{e.target.value&&(setGoogleFont(type,e.target.value),e.target.value="")},children:[(0,jsx_runtime.jsx)("option",{value:"",children:t("cms.style.googleFonts")}),googleFonts.map(f=>(0,jsx_runtime.jsx)("option",{value:f,style:{fontFamily:f},children:f},f))]})]}),defaultValue&&(0,jsx_runtime.jsxs)("span",{className:"text-xs text-muted-foreground",children:[t("common.default"),": ",defaultValue]})]})}function RangeToken({tokenKey,value,defaultValue,isOverridden,setToken}){const t=(0,src.c3)(),overrideClasses=isOverridden?"border-s-2 border-s-info ps-2":"";return(0,jsx_runtime.jsxs)("label",{"data-token-key":tokenKey,className:`flex flex-wrap items-center gap-2 text-sm ${overrideClasses}`,"data-token":isOverridden?"--color-info":void 0,children:[(0,jsx_runtime.jsx)("span",{className:"basis-40 shrink-0",children:tokenKey}),(0,jsx_runtime.jsx)(RangeInput,{value,onChange:val=>setToken(tokenKey,val)}),isOverridden&&(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded border px-2 py-1 text-xs min-h-10 min-w-10",onClick:()=>setToken(tokenKey,null!=defaultValue?defaultValue:""),children:t("common.reset")}),defaultValue&&(0,jsx_runtime.jsxs)("span",{className:"text-xs text-muted-foreground",children:[t("common.default"),": ",defaultValue]})]})}function TextToken({tokenKey,value,defaultValue,isOverridden,setToken}){const t=(0,src.c3)(),resetLabel=(()=>{const v=t("common.reset");return"common.reset"===v?"Reset":v})(),defaultLabel=(()=>{const v=t("common.default");return"common.default"===v?"Default":v})(),overrideClasses=isOverridden?"border-s-2 border-s-info ps-2":"";return(0,jsx_runtime.jsxs)("label",{"data-token-key":tokenKey,className:`flex flex-wrap items-center gap-2 text-sm ${overrideClasses}`,"data-token":isOverridden?"--color-info":void 0,children:[(0,jsx_runtime.jsx)("span",{className:"basis-40 shrink-0",children:tokenKey}),(0,jsx_runtime.jsx)(shadcn.pd,{value,onChange:e=>setToken(tokenKey,e.target.value),className:"min-w-0 flex-1",wrapperClassName:"min-w-0 flex-1"}),isOverridden&&(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded border px-2 py-1 text-xs min-h-10 min-w-10",onClick:()=>setToken(tokenKey,null!=defaultValue?defaultValue:""),children:resetLabel}),defaultValue&&(0,jsx_runtime.jsxs)("span",{className:"text-xs text-muted-foreground",children:[defaultLabel,": ",defaultValue]})]})}function Tokens({tokens,baseTokens,onChange,focusToken,onRenameToken,onReplaceColor,showSearch=!0,showExtras=!0}){const t=(0,src.c3)(),{colors,fonts,others,sansFonts,monoFonts,googleFonts,newFont,setNewFont,setToken,handleUpload,addCustomFont,setGoogleFont}=(0,useTokenEditor.q)(tokens,baseTokens,onChange),setTokenAndNotify=(key,value)=>{setToken(key,value);try{window.dispatchEvent(new CustomEvent("pb:tokens-changed",{detail:{keys:[key]}}))}catch(e){}},containerRef=(0,react.useRef)(null),[search,setSearch]=(0,react.useState)(""),groups=(0,react.useMemo)(()=>{const all=[...colors,...fonts,...others],g={};return all.forEach(info=>{var _g,_prefix;const prefix=info.key.slice(2).split("-")[0];var _;(null!==(_=(_g=g)[_prefix=prefix])&&void 0!==_?_:_g[_prefix]=[]).push(info)}),g},[colors,fonts,others]),[openGroups,setOpenGroups]=(0,react.useState)(()=>{try{const stored=localStorage.getItem("token-group-state");if(stored)return JSON.parse(stored)}catch(e){}const initial={};return Object.keys(groups).forEach(k=>{initial[k]=!0}),initial});(0,react.useEffect)(()=>{setOpenGroups(prev=>{const updated={...prev};let changed=!1;return Object.keys(groups).forEach(k=>{void 0===updated[k]&&(updated[k]=!0,changed=!0)}),changed?updated:prev})},[groups]),(0,react.useEffect)(()=>{try{localStorage.setItem("token-group-state",JSON.stringify(openGroups))}catch(e){}},[openGroups]),(0,react.useEffect)(()=>{var _containerRef_current;if(!focusToken)return;const el=null===(_containerRef_current=containerRef.current)||void 0===_containerRef_current?void 0:_containerRef_current.querySelector(`[data-token-key="${focusToken}"]`);if(el){el.scrollIntoView({behavior:"smooth",block:"center"}),el.classList.add("ring-2","ring-info"),el.dataset.token="--color-info";const input=el.querySelector("input, select, textarea, button");null==input||input.focus();const t=setTimeout(()=>{el.classList.remove("ring-2","ring-info"),delete el.dataset.token},2e3);return()=>clearTimeout(t)}},[focusToken]);const filteredGroups=(0,react.useMemo)(()=>{const lower=search.toLowerCase(),f={};return Object.entries(groups).forEach(([prefix,list])=>{const filtered=list.filter(t=>t.key.toLowerCase().includes(lower));filtered.length>0&&(f[prefix]=filtered)}),f},[groups,search]);return(0,jsx_runtime.jsxs)("div",{ref:containerRef,className:"w-full space-y-4 overflow-x-hidden rounded border p-2",children:[showSearch&&(0,jsx_runtime.jsx)(shadcn.pd,{placeholder:t("cms.style.searchTokens"),value:search,onChange:e=>setSearch(e.target.value),className:"mb-2"}),Object.entries(filteredGroups).map(([prefix,list])=>{return(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)("button",{type:"button",className:"flex w-full items-center justify-between font-medium min-h-10 min-w-10",onClick:()=>{return key=prefix,void setOpenGroups(prev=>({...prev,[key]:!prev[key]}));var key},children:[(0,jsx_runtime.jsx)("span",{children:(s=prefix,s.charAt(0).toUpperCase()+s.slice(1))}),(0,jsx_runtime.jsx)("span",{children:openGroups[prefix]?"−":"+"})]}),openGroups[prefix]&&(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[list.map(t=>(info=>{if(info.key.startsWith("--color")){const{key:tokenKey,...rest}=info;return(0,jsx_runtime.jsx)(ColorToken,{tokenKey,...rest,tokens,baseTokens,setToken:setTokenAndNotify,onRenameToken,onReplaceColor,showExtras},tokenKey)}if(info.key.startsWith("--font")){const{key:tokenKey,...rest}=info,options=tokenKey.includes("mono")?monoFonts:sansFonts,type=tokenKey.includes("mono")?"mono":"sans";return(0,jsx_runtime.jsx)(FontToken,{tokenKey,...rest,options,type,googleFonts,setToken:setTokenAndNotify,handleUpload,setGoogleFont},tokenKey)}if(/px$/.test(info.value)){const{key:tokenKey,...rest}=info;return(0,jsx_runtime.jsx)(RangeToken,{tokenKey,...rest,setToken:setTokenAndNotify},tokenKey)}const{key:tokenKey,...rest}=info;return(0,jsx_runtime.jsx)(TextToken,{tokenKey,...rest,setToken:setTokenAndNotify},tokenKey)})(t)),"font"===prefix&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 pt-2",children:[(0,jsx_runtime.jsx)(shadcn.pd,{placeholder:t("cms.style.addFontStack"),value:newFont,onChange:e=>setNewFont(e.target.value)}),(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded border px-2 py-1 min-h-10 min-w-10",onClick:addCustomFont,children:t("common.add")})]})]})]},prefix);var s})]})}ColorToken.__docgenInfo={description:"",methods:[],displayName:"ColorToken",props:{tokenKey:{required:!0,tsType:{name:"string"},description:""},tokens:{required:!0,tsType:{name:"Record",elements:[{name:"literal",value:"`--${string}`"},{name:"string"}],raw:"Record<`--${string}`, string>"},description:""},baseTokens:{required:!0,tsType:{name:"Record",elements:[{name:"literal",value:"`--${string}`"},{name:"string"}],raw:"Record<`--${string}`, string>"},description:""},setToken:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string, value: string) => void",signature:{arguments:[{type:{name:"string"},name:"key"},{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},onRenameToken:{required:!1,tsType:{name:"signature",type:"function",raw:"(oldKey: string, nextKey: string) => void",signature:{arguments:[{type:{name:"string"},name:"oldKey"},{type:{name:"string"},name:"nextKey"}],return:{name:"void"}}},description:""},onReplaceColor:{required:!1,tsType:{name:"signature",type:"function",raw:"(tokenKey: string, nextValue: string) => void",signature:{arguments:[{type:{name:"string"},name:"tokenKey"},{type:{name:"string"},name:"nextValue"}],return:{name:"void"}}},description:""},showExtras:{required:!1,tsType:{name:"boolean"},description:"Hide eyedropper and advanced actions when not needed",defaultValue:{value:"true",computed:!1}}},composes:["Omit"]},FontToken.__docgenInfo={description:"",methods:[],displayName:"FontToken",props:{tokenKey:{required:!0,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},type:{required:!0,tsType:{name:"union",raw:'"mono" | "sans"',elements:[{name:"literal",value:'"mono"'},{name:"literal",value:'"sans"'}]},description:""},googleFonts:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},setToken:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string, value: string) => void",signature:{arguments:[{type:{name:"string"},name:"key"},{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},handleUpload:{required:!0,tsType:{name:"signature",type:"function",raw:'(type: "sans" | "mono", e: ChangeEvent<HTMLInputElement>) => void',signature:{arguments:[{type:{name:"union",raw:'"sans" | "mono"',elements:[{name:"literal",value:'"sans"'},{name:"literal",value:'"mono"'}]},name:"type"},{type:{name:"ChangeEvent",elements:[{name:"HTMLInputElement"}],raw:"ChangeEvent<HTMLInputElement>"},name:"e"}],return:{name:"void"}}},description:""},setGoogleFont:{required:!0,tsType:{name:"signature",type:"function",raw:'(type: "sans" | "mono", name: string) => void',signature:{arguments:[{type:{name:"union",raw:'"sans" | "mono"',elements:[{name:"literal",value:'"sans"'},{name:"literal",value:'"mono"'}]},name:"type"},{type:{name:"string"},name:"name"}],return:{name:"void"}}},description:""}},composes:["Omit"]},RangeToken.__docgenInfo={description:"",methods:[],displayName:"RangeToken",props:{tokenKey:{required:!0,tsType:{name:'TokenInfo["key"]',raw:'TokenInfo["key"]'},description:""},setToken:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string, value: string) => void",signature:{arguments:[{type:{name:"string"},name:"key"},{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""}},composes:["Omit"]},TextToken.__docgenInfo={description:"",methods:[],displayName:"TextToken",props:{tokenKey:{required:!0,tsType:{name:'TokenInfo["key"]',raw:'TokenInfo["key"]'},description:""},setToken:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string, value: string) => void",signature:{arguments:[{type:{name:"string"},name:"key"},{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""}},composes:["Omit"]},Tokens.__docgenInfo={description:"",methods:[],displayName:"Tokens",props:{tokens:{required:!0,tsType:{name:"Record",elements:[{name:"literal",value:"`--${string}`"},{name:"string"}],raw:"Record<`--${string}`, string>"},description:""},baseTokens:{required:!0,tsType:{name:"Record",elements:[{name:"literal",value:"`--${string}`"},{name:"string"}],raw:"Record<`--${string}`, string>"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(tokens: TokenMap) => void",signature:{arguments:[{type:{name:"Record",elements:[{name:"literal",value:"`--${string}`"},{name:"string"}],raw:"Record<`--${string}`, string>"},name:"tokens"}],return:{name:"void"}}},description:""},focusToken:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},onRenameToken:{required:!1,tsType:{name:"signature",type:"function",raw:"(tokenKey: string, nextKey: string) => void",signature:{arguments:[{type:{name:"string"},name:"tokenKey"},{type:{name:"string"},name:"nextKey"}],return:{name:"void"}}},description:""},onReplaceColor:{required:!1,tsType:{name:"signature",type:"function",raw:"(tokenKey: string, nextValue: string) => void",signature:{arguments:[{type:{name:"string"},name:"tokenKey"},{type:{name:"string"},name:"nextValue"}],return:{name:"void"}}},description:""},showSearch:{required:!1,tsType:{name:"boolean"},description:"Controls visibility of the token search input.\nDefault: true (search visible)",defaultValue:{value:"true",computed:!1}},showExtras:{required:!1,tsType:{name:"boolean"},description:"Hide eyedropper and advanced actions",defaultValue:{value:"true",computed:!1}}}};var Inline=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Inline.tsx");const color_themes_namespaceObject=JSON.parse('[{"id":"modern-light","name":"Modern Light","tags":["modern","light"],"light":{"--color-bg":"0 0% 100%","--color-fg":"222 47% 11%","--color-primary":"221 83% 53%","--color-primary-fg":"0 0% 100%","--color-accent":"262 83% 58%","--color-muted":"210 40% 96%"},"dark":{"--color-bg":"224 71% 4%","--color-fg":"210 40% 98%","--color-primary":"217 91% 60%","--color-primary-fg":"222 47% 11%","--color-accent":"262 83% 70%","--color-muted":"215 25% 27%"}},{"id":"modern-dark","name":"Modern Dark","tags":["modern","dark"],"light":{"--color-bg":"0 0% 100%","--color-fg":"222 47% 11%","--color-primary":"221 83% 53%","--color-primary-fg":"0 0% 100%","--color-accent":"262 83% 58%","--color-muted":"210 40% 96%"},"dark":{"--color-bg":"224 71% 4%","--color-fg":"210 40% 98%","--color-primary":"221 83% 53%","--color-primary-fg":"222 47% 11%","--color-accent":"262 83% 70%","--color-muted":"215 25% 27%"}},{"id":"brandx-light","name":"Brand X Light","tags":["brandx","light","vibrant"],"light":{"--color-bg":"0 0% 100%","--color-fg":"0 0% 10%","--color-primary":"340 82% 52%","--color-primary-fg":"0 0% 100%","--color-accent":"260 83% 70%","--color-muted":"0 0% 88%"},"dark":{"--color-bg":"0 0% 6%","--color-fg":"0 0% 92%","--color-primary":"340 82% 60%","--color-primary-fg":"0 0% 10%","--color-accent":"260 83% 76%","--color-muted":"0 0% 32%"}}]'),parseHslLightness=hsl=>{var _parts_;if(!hsl)return 50;const l=null===(_parts_=hsl.trim().split(/\s+/)[2])||void 0===_parts_?void 0:_parts_.replace("%",""),n=Number(l);return Number.isFinite(n)?n:50},UsagePreview=({mode,palette})=>{const bg=palette["--color-bg"],fg=palette["--color-fg"],primary=palette["--color-primary"],primaryFg=palette["--color-primary-fg"],accent=palette["--color-accent"],muted=palette["--color-muted"],accentText=parseHslLightness(accent)>60?"hsl(var(--color-fg))":"hsl(var(--color-bg))",mutedText=parseHslLightness(muted)>50?"hsl(var(--color-fg))":"hsl(var(--color-bg))",swatches=[{key:"bg",v:bg},{key:"fg",v:fg},{key:"primary",v:primary},{key:"primary-fg",v:primaryFg},{key:"accent",v:accent},{key:"muted",v:muted}];return(0,jsx_runtime.jsxs)("div",{className:"rounded border p-2",children:[(0,jsx_runtime.jsx)("div",{className:"mb-1 text-xs text-muted-foreground",children:mode}),(0,jsx_runtime.jsx)("div",{className:"space-y-2",style:{backgroundColor:`hsl(${bg})`,color:`hsl(${fg})`},children:(0,jsx_runtime.jsxs)("div",{className:"rounded border p-2",style:{borderColor:`hsl(${muted})`},children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-medium",children:"Card title"}),(0,jsx_runtime.jsx)("div",{className:"text-xs opacity-80",children:"Body text on surface"}),(0,jsx_runtime.jsxs)(Inline.c,{className:"mt-2",gap:2,children:[(0,jsx_runtime.jsx)("span",{className:"rounded px-2 py-1 text-xs",style:{backgroundColor:`hsl(${primary})`,color:`hsl(${primaryFg})`},children:"Primary button"}),(0,jsx_runtime.jsx)("span",{className:"rounded px-2 py-1 text-xs",style:{backgroundColor:`hsl(${accent})`,color:accentText},children:"Accent badge"}),(0,jsx_runtime.jsx)("span",{className:"rounded px-2 py-1 text-xs",style:{backgroundColor:`hsl(${muted})`,color:mutedText},children:"Muted chip"})]})]})}),(0,jsx_runtime.jsx)(Grid.x,{className:"mt-2",cols:6,gap:1,children:swatches.map((s,i)=>(0,jsx_runtime.jsx)("div",{className:"h-4 w-full rounded",style:{backgroundColor:`hsl(${s.v})`,border:1===i?"1px solid hsl(var(--color-fg) / 0.125)":void 0}},s.key))}),(0,jsx_runtime.jsx)(Grid.x,{className:"mt-1 text-xs text-muted-foreground",cols:6,gap:1,children:swatches.map(s=>(0,jsx_runtime.jsx)("div",{className:"text-center",children:s.key},s.key))})]})};function ColorThemeSelector({tokens,baseTokens,onChange,tagFilters}){const themes=(0,react.useMemo)(()=>color_themes_namespaceObject,[]),t=(0,src.c3)(),[internalTag,setInternalTag]=(0,react.useState)("");(0,react.useEffect)(()=>{void 0!==tagFilters&&setInternalTag("")},[tagFilters]);const filtered=(0,react.useMemo)(()=>{const active=tagFilters&&tagFilters.length>0?tagFilters:internalTag?[internalTag]:[];return active&&0!==active.length?themes.filter(p=>(p.tags||[]).some(t=>active.includes(t))):themes},[themes,internalTag,tagFilters]),isThemeSelected=(0,react.useCallback)(t=>{const lightMatch=Object.entries(t.light).every(([k,v])=>tokens[k]===v),darkMatch=Object.entries(t.dark).every(([k,v])=>tokens[`${k}-dark`]===v);return lightMatch&&darkMatch},[tokens]),applyTheme=(0,react.useCallback)(t=>{const next={...tokens};Object.entries(t.light).forEach(([k,v])=>{baseTokens[k]!==v?next[k]=v:delete next[k]}),Object.entries(t.dark).forEach(([k,v])=>{const dk=`${k}-dark`;baseTokens[dk]!==v?next[dk]=v:delete next[dk]}),onChange(next)},[onChange,tokens,baseTokens]);return(0,jsx_runtime.jsxs)("section",{className:"space-y-3",children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-semibold",children:t("cms.builder.colorThemes.title")}),(0,jsx_runtime.jsx)(Grid.x,{cols:1,gap:3,children:filtered.map(theme=>(0,jsx_runtime.jsxs)("div",{className:"rounded border p-3 "+(isThemeSelected(theme)?"border-primary ring-1 ring-primary/40":""),children:[(0,jsx_runtime.jsxs)(Inline.c,{className:"mb-2 justify-between",gap:2,children:[(0,jsx_runtime.jsx)("div",{className:"truncate text-sm font-medium",children:theme.name}),(0,jsx_runtime.jsx)("button",{type:"button",className:"rounded border px-3 py-1 text-xs min-h-10 min-w-10",onClick:()=>applyTheme(theme),children:t("cms.builder.colorThemes.useTheme")})]}),isThemeSelected(theme)&&(0,jsx_runtime.jsx)("div",{className:"mb-2 inline-block rounded-full border border-primary bg-primary/10 px-2 py-0.5 text-xs text-primary",children:t("cms.builder.colorThemes.selected")}),theme.tags&&theme.tags.length>0&&(0,jsx_runtime.jsx)(Inline.c,{className:"mb-2 flex-wrap text-xs text-muted-foreground",gap:1,children:theme.tags.map(tg=>(0,jsx_runtime.jsx)("span",{className:"rounded border px-1",children:tg},tg))}),(0,jsx_runtime.jsxs)(Grid.x,{cols:2,gap:2,children:[(0,jsx_runtime.jsx)(UsagePreview,{mode:String(t("cms.builder.colorThemes.mode.light")),palette:theme.light}),(0,jsx_runtime.jsx)(UsagePreview,{mode:String(t("cms.builder.colorThemes.mode.dark")),palette:theme.dark})]})]},theme.id))})]})}ColorThemeSelector.__docgenInfo={description:"",methods:[],displayName:"ColorThemeSelector",props:{tokens:{required:!0,tsType:{name:"Record",elements:[{name:"literal",value:"`--${string}`"},{name:"string"}],raw:"Record<`--${string}`, string>"},description:""},baseTokens:{required:!0,tsType:{name:"Record",elements:[{name:"literal",value:"`--${string}`"},{name:"string"}],raw:"Record<`--${string}`, string>"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(next: TokenMap) => void",signature:{arguments:[{type:{name:"Record",elements:[{name:"literal",value:"`--${string}`"},{name:"string"}],raw:"Record<`--${string}`, string>"},name:"next"}],return:{name:"void"}}},description:""},tagFilters:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""}}};var usePreviewTokens=__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/usePreviewTokens.ts"),navigation=__webpack_require__("../../__mocks__/next/navigation.js"),shared_utils_src=__webpack_require__("../../packages/shared-utils/src/index.ts");function ThemePanel({variant="dialog"}){const t=(0,src.c3)();var _usePathname;const pathname=null!==(_usePathname=(0,navigation.usePathname)())&&void 0!==_usePathname?_usePathname:"",shop=(0,react.useMemo)(()=>{var _getShopFromPath;return null!==(_getShopFromPath=(0,shared_utils_src.e6)(pathname))&&void 0!==_getShopFromPath?_getShopFromPath:""},[pathname]),preview=(0,usePreviewTokens.Ay)(),[tokens,setTokens]=(0,react.useState)(preview),[baseTokens,setBaseTokens]=(0,react.useState)({}),tokensRef=(0,react.useRef)(tokens),baseTokensRef=(0,react.useRef)(baseTokens);(0,react.useEffect)(()=>{tokensRef.current=tokens},[tokens]),(0,react.useEffect)(()=>{baseTokensRef.current=baseTokens},[baseTokens]);const pendingRef=(0,react.useRef)({}),timeoutRef=(0,react.useRef)(null),scheduleSave=(0,react.useCallback)(patch=>{0!==Object.keys(patch).length&&(pendingRef.current={...pendingRef.current,...patch},timeoutRef.current&&window.clearTimeout(timeoutRef.current),timeoutRef.current=window.setTimeout(async()=>{const body={themeOverrides:pendingRef.current};pendingRef.current={};try{shop&&await fetch(`/cms/api/shops/${shop}/theme`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(body)})}catch(e){}},500))},[shop]),diffTokens=(0,react.useCallback)((prev,next)=>{const patch={};return Object.entries(next).forEach(([key,value])=>{prev[key]!==value&&(patch[key]=value)}),Object.keys(prev).forEach(key=>{key in next||(patch[key]=null)}),patch},[]),applyTokens=(0,react.useCallback)(next=>{const previous=tokensRef.current,patch=diffTokens(previous,next);tokensRef.current=next,setTokens(next),(0,usePreviewTokens._5)(next),Object.keys(patch).length>0&&scheduleSave(patch)},[diffTokens,scheduleSave]),handleTokensChange=(0,react.useCallback)(next=>{applyTokens(next)},[applyTokens]),handleRenameToken=(0,react.useCallback)((oldKey,nextKey)=>{const trimmed=nextKey.trim();if(!trimmed||trimmed===oldKey)return;if(trimmed in tokensRef.current||trimmed in baseTokensRef.current){if(!window.confirm(`A token named "${trimmed}" already exists. Replace its value?`))return}const nextBase={...baseTokensRef.current};let baseChanged=!1;if(oldKey in nextBase){const baseValue=nextBase[oldKey];delete nextBase[oldKey],void 0!==baseValue&&(nextBase[trimmed]=baseValue),baseChanged=!0}baseChanged&&(baseTokensRef.current=nextBase,setBaseTokens(nextBase));const currentTokens=tokensRef.current,overrideValue=currentTokens[oldKey],fallbackValue=null!=overrideValue?overrideValue:baseTokensRef.current[oldKey],updated={...currentTokens};delete updated[oldKey],void 0!==fallbackValue&&(updated[trimmed]=fallbackValue),applyTokens(updated)},[applyTokens]),handleReplaceColor=(0,react.useCallback)((tokenKey,nextValue)=>{const trimmed=nextValue.trim();if(!trimmed)return;const currentTokens=tokensRef.current,base=baseTokensRef.current;var _currentTokens_tokenKey;const reference=null!==(_currentTokens_tokenKey=currentTokens[tokenKey])&&void 0!==_currentTokens_tokenKey?_currentTokens_tokenKey:base[tokenKey];if(!reference)return;const keys=new Set([...Object.keys(base),...Object.keys(currentTokens)]),nextTokens={...currentTokens};keys.forEach(key=>{if(!(key.startsWith("--color")||key.startsWith("color.")))return;var _currentTokens_key;(null!==(_currentTokens_key=currentTokens[key])&&void 0!==_currentTokens_key?_currentTokens_key:base[key])===reference&&(nextTokens[key]=trimmed)}),applyTokens(nextTokens)},[applyTokens]);return(0,react.useEffect)(()=>{let cancelled=!1;return(async()=>{if(shop)try{const res=await fetch(`/cms/api/shops/${shop}/theme`);if(!res.ok)return;const data=await res.json();if(cancelled)return;const defaults=data.themeDefaults,themeTokens=data.themeTokens;baseTokensRef.current=defaults,tokensRef.current=themeTokens,setBaseTokens(defaults),setTokens(themeTokens),(0,usePreviewTokens._5)(themeTokens)}catch(e){}})(),()=>{cancelled=!0}},[shop]),"sidebar"===variant?(0,jsx_runtime.jsxs)("div",{className:"space-y-3 p-3",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-semibold",children:t("cms.theme.label")}),(0,jsx_runtime.jsx)("p",{className:"text-sm text-muted-foreground",children:t("cms.builder.themePanel.helper")}),(0,jsx_runtime.jsx)(ColorThemeSelector,{tokens,baseTokens,onChange:handleTokensChange}),(0,jsx_runtime.jsx)(Tokens,{tokens,baseTokens,onChange:handleTokensChange,onRenameToken:handleRenameToken,onReplaceColor:handleReplaceColor})]}):(0,jsx_runtime.jsxs)(shadcn.Cf,{className:"w-full",children:[(0,jsx_runtime.jsx)(shadcn.L3,{children:t("cms.theme.label")}),(0,jsx_runtime.jsxs)("div",{className:"space-y-3",children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-muted-foreground",children:t("cms.builder.themePanel.helper")}),(0,jsx_runtime.jsx)(ColorThemeSelector,{tokens,baseTokens,onChange:handleTokensChange}),(0,jsx_runtime.jsx)(Tokens,{tokens,baseTokens,onChange:handleTokensChange,onRenameToken:handleRenameToken,onReplaceColor:handleReplaceColor})]})]})}ThemePanel.__docgenInfo={description:"",methods:[],displayName:"ThemePanel",props:{variant:{required:!1,tsType:{name:"union",raw:'"dialog" | "sidebar"',elements:[{name:"literal",value:'"dialog"'},{name:"literal",value:'"sidebar"'}]},description:'Render style for the panel. "dialog" places content inside shadcn Dialog components.\n"sidebar" renders inline without any Dialog wrappers so it can be embedded.',defaultValue:{value:'"dialog"',computed:!1}}}}},"../../packages/ui/src/components/cms/page-builder/ValuePropsEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>ValuePropsEditor});var _useArrayEditor__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useArrayEditor.tsx");function ValuePropsEditor({component,onChange}){return(0,_useArrayEditor__WEBPACK_IMPORTED_MODULE_0__.W)(onChange)("items",component.items,["icon","title","desc"],{minItems:component.minItems,maxItems:component.maxItems})}},"../../packages/ui/src/components/cms/page-builder/VideoBlockEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>VideoBlockEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_atoms_primitives__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/atoms/primitives/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/i18n/src/index.ts"),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_useMediaLibrary__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useMediaLibrary.ts");function VideoBlockEditor({component,onChange}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_3__.c3)(),handleInput=(field,value)=>{onChange({[field]:value})},[open,setOpen]=(0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(!1),{media,loadMedia}=(0,_useMediaLibrary__WEBPACK_IMPORTED_MODULE_5__.A)();(0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(()=>{open&&loadMedia()},[open,loadMedia]);const videos=media.filter(m=>"video"===m.type),src=component.src;var _component_autoplay;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.lG,{open,onOpenChange:setOpen,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.zM,{asChild:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.$n,{type:"button",variant:"outline",children:t(src?"video.change":"video.select")})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.Cf,{className:"w-full space-y-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.L3,{children:t("video.select")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_primitives__WEBPACK_IMPORTED_MODULE_2__.xA,{cols:3,gap:2,className:"max-h-64 overflow-auto",children:[videos.map(m=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"button",onClick:()=>{handleInput("src",m.url),setOpen(!1)},className:"relative aspect-square min-w-10 min-h-10",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("video",{src:m.url,className:"h-full w-full object-cover","data-aspect":"1/1",muted:!0,playsInline:!0,"aria-hidden":!0,tabIndex:-1})},m.url)),0===videos.length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-muted-foreground col-span-3 text-sm",children:t("video.noneFound")})]})]})]}),src&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("video",{src,controls:!0,className:"w-full max-h-64","data-aspect":"16/9"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.Sc,{id:"autoplay",checked:null!==(_component_autoplay=component.autoplay)&&void 0!==_component_autoplay&&_component_autoplay,onCheckedChange:checked=>handleInput("autoplay",Boolean(checked))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:"autoplay",className:"text-sm",children:t("cms.lottie.autoplay")})]})]})}VideoBlockEditor.__docgenInfo={description:"",methods:[],displayName:"VideoBlockEditor",props:{component:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<T>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"T"}],raw:"Partial<T>"},name:"patch"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/appInstallStore.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{HQ:()=>subscribeInstalledApps,Jg:()=>listInstalledApps});const getWindow=()=>window,readStorage=()=>{const w=getWindow();if(!(null==w?void 0:w.localStorage))return{};try{const raw=w.localStorage.getItem("pb:installed-apps");if(!raw)return{};const parsed=JSON.parse(raw);return parsed&&"object"==typeof parsed?Object.keys(parsed).reduce((acc,key)=>{const value=parsed[key];return Array.isArray(value)&&(acc[key]=value.filter(item=>"string"==typeof item)),acc},{}):{}}catch(e){return{}}},normalizeShop=shop=>shop||"__global__",listInstalledApps=shop=>{const key=normalizeShop(null!=shop?shop:null);var _storage_key;return[...null!==(_storage_key=readStorage()[key])&&void 0!==_storage_key?_storage_key:[]]},subscribeInstalledApps=(shop,callback)=>{const w=getWindow();if(!w)return()=>{};const targetShop=null!=shop?shop:null,handler=event=>{const detail=event.detail;var _detail_shop;detail&&((null!==(_detail_shop=detail.shop)&&void 0!==_detail_shop?_detail_shop:null)===targetShop&&callback([...detail.apps]))};return w.addEventListener("pb:installed-apps-change",handler),()=>w.removeEventListener("pb:installed-apps-change",handler)}},"../../packages/ui/src/components/cms/page-builder/builtInSections.data.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{G:()=>getBuiltInSections});var browser=__webpack_require__("../../node_modules/.pnpm/ulid@3.0.1/node_modules/ulid/dist/browser/index.js");function getHeaderVariants(t){return[{id:"builtin:HeaderSection:minimal",label:t("pb.sections.HeaderSection.minimal.label"),description:t("pb.sections.HeaderSection.minimal.description"),preview:"/window.svg",previewType:"HeaderSection:minimal",build:()=>({id:(0,browser.Z0)(),type:"HeaderSection",variant:"minimal",searchMode:"inline",announcement:!1,showBreadcrumbs:!1,showCurrencySelector:!1,showLocaleSelector:!1})},{id:"builtin:HeaderSection:centerLogo",label:t("pb.sections.HeaderSection.centerLogo.label"),description:t("pb.sections.HeaderSection.centerLogo.description"),preview:"/window.svg",previewType:"HeaderSection:centerLogo",build:()=>({id:(0,browser.Z0)(),type:"HeaderSection",variant:"centerLogo",searchMode:"inline",announcement:!1,showBreadcrumbs:!1,showCurrencySelector:!1,showLocaleSelector:!1})},{id:"builtin:HeaderSection:splitUtilities",label:t("pb.sections.HeaderSection.splitUtilities.label"),description:t("pb.sections.HeaderSection.splitUtilities.description"),preview:"/window.svg",previewType:"HeaderSection:splitUtilities",build:()=>({id:(0,browser.Z0)(),type:"HeaderSection",variant:"splitUtilities",searchMode:"inline",announcement:!1,showBreadcrumbs:!1,showCurrencySelector:!1,showLocaleSelector:!1})},{id:"builtin:HeaderSection:transparent",label:t("pb.sections.HeaderSection.transparent.label"),description:t("pb.sections.HeaderSection.transparent.description"),preview:"/window.svg",previewType:"HeaderSection:transparent",build:()=>({id:(0,browser.Z0)(),type:"HeaderSection",variant:"transparent",searchMode:"inline",announcement:!1,showBreadcrumbs:!1,showCurrencySelector:!1,showLocaleSelector:!1})},{id:"builtin:HeaderSection:sticky",label:t("pb.sections.HeaderSection.sticky.label"),description:t("pb.sections.HeaderSection.sticky.description"),preview:"/window.svg",previewType:"HeaderSection:sticky",build:()=>({id:(0,browser.Z0)(),type:"HeaderSection",variant:"sticky",searchMode:"inline",announcement:!1,showBreadcrumbs:!1,showCurrencySelector:!1,showLocaleSelector:!1})}]}function getFooterVariants(t){return[{id:"builtin:FooterSection:simple",label:t("pb.sections.FooterSection.simple.label"),description:t("pb.sections.FooterSection.simple.description"),preview:"/window.svg",previewType:"FooterSection:simple",build:()=>({id:(0,browser.Z0)(),type:"FooterSection",variant:"simple"})},{id:"builtin:FooterSection:multiColumn",label:t("pb.sections.FooterSection.multiColumn.label"),description:t("pb.sections.FooterSection.multiColumn.description"),preview:"/window.svg",previewType:"FooterSection:multiColumn",build:()=>({id:(0,browser.Z0)(),type:"FooterSection",variant:"multiColumn"})},{id:"builtin:FooterSection:newsletter",label:t("pb.sections.FooterSection.newsletter.label"),description:t("pb.sections.FooterSection.newsletter.description"),preview:"/window.svg",previewType:"FooterSection:newsletter",build:()=>({id:(0,browser.Z0)(),type:"FooterSection",variant:"newsletter"})},{id:"builtin:FooterSection:social",label:t("pb.sections.FooterSection.social.label"),description:t("pb.sections.FooterSection.social.description"),preview:"/window.svg",previewType:"FooterSection:social",build:()=>({id:(0,browser.Z0)(),type:"FooterSection",variant:"social"})},{id:"builtin:FooterSection:legalHeavy",label:t("pb.sections.FooterSection.legalHeavy.label"),description:t("pb.sections.FooterSection.legalHeavy.description"),preview:"/window.svg",previewType:"FooterSection:legalHeavy",build:()=>({id:(0,browser.Z0)(),type:"FooterSection",variant:"legalHeavy"})}]}function getOtherSections(t){return[{id:"builtin:CampaignHeroSection:image",label:t("pb.sections.CampaignHeroSection.image.label"),description:t("pb.sections.CampaignHeroSection.image.description"),preview:"/window.svg",previewType:"CampaignHeroSection:image",build:()=>({id:(0,browser.Z0)(),type:"CampaignHeroSection",mediaType:"image",imageSrc:"/placeholder-hero.jpg",usps:[t("pb.seeds.campaignHero.usps.freeShipping"),t("pb.seeds.campaignHero.usps.returns30d"),t("pb.seeds.campaignHero.usps.carbonNeutral")]})},{id:"builtin:CampaignHeroSection:video",label:t("pb.sections.CampaignHeroSection.video.label"),description:t("pb.sections.CampaignHeroSection.video.description"),preview:"/window.svg",previewType:"CampaignHeroSection:video",build:()=>({id:(0,browser.Z0)(),type:"CampaignHeroSection",mediaType:"video",videoSrc:"/promo.mp4"})},{id:"builtin:PromoTilesSection:editorial",label:t("pb.sections.PromoTilesSection.editorial.label"),description:t("pb.sections.PromoTilesSection.editorial.description"),preview:"/window.svg",previewType:"PromoTilesSection:editorial",build:()=>({id:(0,browser.Z0)(),type:"PromoTilesSection",density:"editorial",tiles:[{imageSrc:"/a.jpg",caption:"New In",ctaLabel:"Shop",ctaHref:"/collections/new"},{imageSrc:"/b.jpg",caption:"Best Sellers",ctaLabel:"Explore",ctaHref:"/collections/best"},{imageSrc:"/c.jpg",caption:"Clearance",ctaLabel:"Save now",ctaHref:"/collections/sale"}]})},{id:"builtin:PromoTilesSection:utilitarian",label:t("pb.sections.PromoTilesSection.utilitarian.label"),description:t("pb.sections.PromoTilesSection.utilitarian.description"),preview:"/window.svg",previewType:"PromoTilesSection:utilitarian",build:()=>({id:(0,browser.Z0)(),type:"PromoTilesSection",density:"utilitarian",tiles:[{imageSrc:"/a.jpg",caption:"Men",ctaHref:"/collections/men"},{imageSrc:"/b.jpg",caption:"Women",ctaHref:"/collections/women"}]})},{id:"builtin:ShowcaseSection:featured",label:t("pb.sections.ShowcaseSection.featured.label"),description:t("pb.sections.ShowcaseSection.featured.description"),preview:"/window.svg",previewType:"ShowcaseSection:featured",build:()=>({id:(0,browser.Z0)(),type:"ShowcaseSection",preset:"featured",layout:"carousel",limit:12})},{id:"builtin:ShowcaseSection:new",label:t("pb.sections.ShowcaseSection.new.label"),description:t("pb.sections.ShowcaseSection.new.description"),preview:"/window.svg",previewType:"ShowcaseSection:new",build:()=>({id:(0,browser.Z0)(),type:"ShowcaseSection",preset:"new",layout:"grid",gridCols:3,limit:9})},{id:"builtin:ShowcaseSection:bestsellers",label:t("pb.sections.ShowcaseSection.bestsellers.label"),description:t("pb.sections.ShowcaseSection.bestsellers.description"),preview:"/window.svg",previewType:"ShowcaseSection:bestsellers",build:()=>({id:(0,browser.Z0)(),type:"ShowcaseSection",preset:"bestsellers",layout:"carousel",limit:12})},{id:"builtin:ShowcaseSection:clearance",label:t("pb.sections.ShowcaseSection.clearance.label"),description:t("pb.sections.ShowcaseSection.clearance.description"),preview:"/window.svg",previewType:"ShowcaseSection:clearance",build:()=>({id:(0,browser.Z0)(),type:"ShowcaseSection",preset:"clearance",layout:"grid",gridCols:4,limit:8})},{id:"builtin:ShowcaseSection:limited",label:t("pb.sections.ShowcaseSection.limited.label"),description:t("pb.sections.ShowcaseSection.limited.description"),preview:"/window.svg",previewType:"ShowcaseSection:limited",build:()=>({id:(0,browser.Z0)(),type:"ShowcaseSection",preset:"limited",layout:"carousel",limit:8})},{id:"builtin:ConsentSection",label:t("pb.sections.ConsentSection.label"),description:t("pb.sections.ConsentSection.description"),preview:"/window.svg",previewType:"ConsentSection",build:()=>({id:(0,browser.Z0)(),type:"ConsentSection"})},{id:"builtin:AnalyticsPixelsSection",label:t("pb.sections.AnalyticsPixelsSection.label"),description:t("pb.sections.AnalyticsPixelsSection.description"),preview:"/window.svg",previewType:"AnalyticsPixelsSection",build:()=>({id:(0,browser.Z0)(),type:"AnalyticsPixelsSection"})},{id:"builtin:StructuredDataSection",label:t("pb.sections.StructuredDataSection.label"),description:t("pb.sections.StructuredDataSection.description"),preview:"/window.svg",previewType:"StructuredDataSection",build:()=>({id:(0,browser.Z0)(),type:"StructuredDataSection",breadcrumbs:!0})},{id:"builtin:RentalAvailabilitySection",label:t("pb.sections.RentalAvailabilitySection.label"),description:t("pb.sections.RentalAvailabilitySection.description"),preview:"/window.svg",previewType:"RentalAvailabilitySection",build:()=>({id:(0,browser.Z0)(),type:"RentalAvailabilitySection",sku:"sku_123"})},{id:"builtin:RentalTermsSection",label:t("pb.sections.RentalTermsSection.label"),description:t("pb.sections.RentalTermsSection.description"),preview:"/window.svg",previewType:"RentalTermsSection",build:()=>({id:(0,browser.Z0)(),type:"RentalTermsSection",sku:"sku_123",termsVersion:"1.0"})},{id:"builtin:SocialProof:logos",label:t("pb.sections.SocialProof.logos.label"),description:t("pb.sections.SocialProof.logos.description"),preview:"/window.svg",previewType:"SocialProof:logos",build:()=>({id:(0,browser.Z0)(),type:"SocialProof",logos:[{src:"/logos/press1.svg"},{src:"/logos/press2.svg"},{src:"/logos/press3.svg"}]})},{id:"builtin:CrossSellSection:default",label:t("pb.sections.CrossSellSection.default.label"),description:t("pb.sections.CrossSellSection.default.description"),preview:"/window.svg",previewType:"CrossSellSection:default",build:()=>({id:(0,browser.Z0)(),type:"CrossSellSection",rules:{onlyInStock:!0},layout:"grid"})},{id:"builtin:PDP:Policies",label:t("pb.sections.PDP.Policies.label"),description:t("pb.sections.PDP.Policies.description"),preview:"/window.svg",previewType:"PDP:Policies",build:()=>({id:(0,browser.Z0)(),type:"PoliciesAccordion",shipping:t("pb.seeds.policies.shippingHtml"),returns:t("pb.seeds.policies.returnsHtml"),warranty:t("pb.seeds.policies.warrantyHtml")})},{id:"builtin:PDP:StickyBuyBar",label:t("pb.sections.PDP.StickyBuyBar.label"),description:t("pb.sections.PDP.StickyBuyBar.description"),preview:"/window.svg",previewType:"PDP:StickyBuyBar",build:()=>({id:(0,browser.Z0)(),type:"StickyBuyBar"})},{id:"builtin:PDP:Financing",label:t("pb.sections.PDP.Financing.label"),description:t("pb.sections.PDP.Financing.description"),preview:"/window.svg",previewType:"PDP:Financing",build:()=>({id:(0,browser.Z0)(),type:"FinancingBadge",provider:"klarna",apr:0,termMonths:12})},{id:"builtin:PDP:DetailsLuxury",label:t("pb.sections.PDP.DetailsLuxury.label"),description:t("pb.sections.PDP.DetailsLuxury.description"),preview:"/window.svg",previewType:"PDP:DetailsLuxury",build:()=>({id:(0,browser.Z0)(),type:"PDPDetailsSection",preset:"luxury"})},{id:"builtin:GuidedSellingSection:default",label:t("pb.sections.GuidedSellingSection.default.label"),description:t("pb.sections.GuidedSellingSection.default.description"),preview:"/window.svg",previewType:"GuidedSellingSection:default",build:()=>({id:(0,browser.Z0)(),type:"GuidedSellingSection",outputMode:"inline"})},{id:"builtin:CartSection:default",label:t("pb.sections.CartSection.default.label"),description:t("pb.sections.CartSection.default.description"),preview:"/window.svg",previewType:"CartSection:default",build:()=>({id:(0,browser.Z0)(),type:"CartSection",showPromo:!0,showGiftCard:!0,showLoyalty:!1})},{id:"builtin:CheckoutSection:default",label:t("pb.sections.CheckoutSection.default.label"),description:t("pb.sections.CheckoutSection.default.description"),preview:"/window.svg",previewType:"CheckoutSection:default",build:()=>({id:(0,browser.Z0)(),type:"CheckoutSection",showWallets:!0,showBNPL:!0})},{id:"builtin:ThankYouSection:recs",label:t("pb.sections.ThankYouSection.recs.label"),description:t("pb.sections.ThankYouSection.recs.description"),preview:"/window.svg",previewType:"ThankYouSection:recs",build:()=>({id:(0,browser.Z0)(),type:"ThankYouSection",recommendationPreset:"featured"})},{id:"builtin:StoreLocatorSection:default",label:t("pb.sections.StoreLocatorSection.default.label"),description:t("pb.sections.StoreLocatorSection.default.description"),preview:"/window.svg",previewType:"StoreLocatorSection:default",build:()=>({id:(0,browser.Z0)(),type:"StoreLocatorSection",enableGeolocation:!0,emitLocalBusiness:!1})},{id:"builtin:EmailReferralSection:giveget",label:t("pb.sections.EmailReferralSection.giveget.label"),description:t("pb.sections.EmailReferralSection.giveget.description"),preview:"/window.svg",previewType:"EmailReferralSection:giveget",build:()=>({id:(0,browser.Z0)(),type:"EmailReferralSection",headline:t("pb.seeds.emailReferral.headline"),subtitle:t("pb.seeds.emailReferral.subtitle"),giveLabel:t("pb.seeds.emailReferral.giveLabel"),getLabel:t("pb.seeds.emailReferral.getLabel")})},{id:"builtin:DSARSection:default",label:t("pb.sections.DSARSection.default.label"),description:t("pb.sections.DSARSection.default.description"),preview:"/window.svg",previewType:"DSARSection:default",build:()=>({id:(0,browser.Z0)(),type:"DSARSection"})},{id:"builtin:AgeGateSection:18",label:t("pb.sections.AgeGateSection.18.label"),description:t("pb.sections.AgeGateSection.18.description"),preview:"/window.svg",previewType:"AgeGateSection:18",build:()=>({id:(0,browser.Z0)(),type:"AgeGateSection",minAge:18,rememberDays:30})},{id:"builtin:AccountSection:default",label:t("pb.sections.AccountSection.default.label"),description:t("pb.sections.AccountSection.default.description"),preview:"/window.svg",previewType:"AccountSection:default",build:()=>({id:(0,browser.Z0)(),type:"AccountSection",showDashboard:!0,showOrders:!0,showRentals:!0,showAddresses:!0,showPayments:!0})},{id:"builtin:RentalManageSection:default",label:t("pb.sections.RentalManageSection.default.label"),description:t("pb.sections.RentalManageSection.default.description"),preview:"/window.svg",previewType:"RentalManageSection:default",build:()=>({id:(0,browser.Z0)(),type:"RentalManageSection"})}]}function resolveLabels(items,t){return items.map(p=>({...p,label:p.labelKey?t(p.labelKey):p.label,description:p.descriptionKey?t(p.descriptionKey):p.description}))}function getBuiltInSections(t){return[...resolveLabels(getHeaderVariants(t),t),...resolveLabels(getFooterVariants(t),t),...getOtherSections(t)]}},"../../packages/ui/src/components/cms/page-builder/collab/usePresence.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js");function hashColor(id){let h=0;for(let i=0;i<id.length;i++)h=31*h+id.charCodeAt(i)>>>0;return`hsl(${h%360} 85% 55%)`}function now(){return Date.now()}const __WEBPACK_DEFAULT_EXPORT__=function usePresence({shop,pageId,meId,label,selectedIds,editingId}){const me=(meId||"anon").slice(0,200),myLabel=(label||me).slice(0,200),chanName=function makeChannelName(shop,pageId){return`pb-presence:${shop||""}:${pageId||""}`}(shop,pageId),[peers,setPeers]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({}),bcRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),lastSent=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0),aliveRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!0),send=ev=>{try{const bc=bcRef.current;bc&&bc.postMessage(ev)}catch(e){}};(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{aliveRef.current=!0;let bc=null;try{bc=new BroadcastChannel(chanName),bcRef.current=bc}catch(e){bcRef.current=null}if(bc){const onMsg=e=>{const data=e.data;var _selectedIds_;if(data&&"object"==typeof data)if("join"===data.type)setPeers(prev=>{const next={...prev};var _next_data_id;data.id!==me&&(next[data.id]=null!==(_next_data_id=next[data.id])&&void 0!==_next_data_id?_next_data_id:{id:data.id,label:data.label,color:hashColor(data.id),selectedIds:[],editingId:null,ts:now()});return next}),data.id!==me&&send({type:"update",id:me,label:myLabel,selectedIds,editingId:null!=editingId?editingId:null!==(_selectedIds_=selectedIds[0])&&void 0!==_selectedIds_?_selectedIds_:null});else if("leave"===data.type)setPeers(prev=>{const next={...prev};return delete next[data.id],next});else if("update"===data.type){if(data.id===me)return;setPeers(prev=>{const next={...prev};var _next_data_id;const peer=null!==(_next_data_id=next[data.id])&&void 0!==_next_data_id?_next_data_id:{id:data.id,label:data.label||data.id,color:hashColor(data.id),selectedIds:[],editingId:null,ts:now()};var _data_editingId;return data.label&&(peer.label=data.label),data.selectedIds&&(peer.selectedIds=Array.isArray(data.selectedIds)?data.selectedIds:[]),"editingId"in data&&(peer.editingId=null!==(_data_editingId=data.editingId)&&void 0!==_data_editingId?_data_editingId:null),peer.ts=now(),next[data.id]=peer,next})}};bc.addEventListener("message",onMsg)}send({type:"join",id:me,label:myLabel});const hb=setInterval(()=>{if(!aliveRef.current)return;var _selectedIds_;const payload={type:"update",id:me,label:myLabel,selectedIds,editingId:null!=editingId?editingId:null!==(_selectedIds_=selectedIds[0])&&void 0!==_selectedIds_?_selectedIds_:null};send(payload),lastSent.current=now(),setPeers(prev=>{const t=now(),next={};for(const[id,p]of Object.entries(prev))t-(p.ts||0)<15e3&&(next[id]=p);return next})},4e3);return()=>{aliveRef.current=!1;try{send({type:"leave",id:me})}catch(e){}clearInterval(hb);try{null==bc||bc.close()}catch(e){}bcRef.current=null}},[chanName,me,myLabel]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{const t=now();var _selectedIds_;t-lastSent.current>300&&(send({type:"update",id:me,label:myLabel,selectedIds,editingId:null!=editingId?editingId:null!==(_selectedIds_=selectedIds[0])&&void 0!==_selectedIds_?_selectedIds_:null}),lastSent.current=t)},[selectedIds.join(","),null!=editingId?editingId:"none"]);const peerList=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>Object.values(peers).sort((a,b)=>(a.label||a.id).localeCompare(b.label||b.id)),[peers]),softLocksById=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{const map=new Map;for(const p of peerList)p.editingId&&map.set(p.editingId,p);return map},[peerList]);return{peers:peerList,softLocksById}}},"../../packages/ui/src/components/cms/page-builder/comments/CommentsToolbar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/i18n/src/index.ts");function CommentsToolbar(props){const{peers,showResolved,onShowResolvedChange,onReload,onAddForSelected,canAddForSelected,onToggleDrawer,unresolvedCount}=props,portalContainer="undefined"!=typeof document?document.querySelector("[data-pb-portal-root]"):null,t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_2__.c3)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"relative pointer-events-none",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"pointer-events-auto absolute end-2 top-2 flex items-center gap-1 rounded bg-muted/60 px-1.5 py-1 text-xs shadow-sm opacity-80 hover:opacity-100",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.$n,{variant:"default",onClick:onToggleDrawer,className:"h-6 px-2 py-0 text-xs",children:[t("comments.label")," (",unresolvedCount,")"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.rI,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.ty,{asChild:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.$n,{variant:"outline",className:"h-6 px-2 py-0 text-xs","aria-label":t("comments.optionsAria"),children:"•••"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.SQ,{align:"end",className:"min-w-56 text-xs",container:portalContainer,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.lp,{children:t("comments.label")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.hO,{checked:!!showResolved,onCheckedChange:v=>onShowResolvedChange(Boolean(v)),children:t("comments.showResolvedPins")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__._2,{onClick:()=>{onReload()},children:t("common.reload")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__._2,{onClick:()=>{onAddForSelected()},disabled:!canAddForSelected,children:t("comments.addForSelected")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.mB,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.lp,{children:t("comments.online")}),0===peers.length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__._2,{disabled:!0,className:"text-muted-foreground",children:t("comments.noneOnline")}),peers.slice(0,6).map(p=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__._2,{disabled:!0,className:"gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{"aria-hidden":!0,className:"inline-block h-2 w-2 rounded-full",style:{backgroundColor:p.color}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"truncate",children:p.label})]},p.id)),peers.length>6&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__._2,{disabled:!0,className:"text-muted-foreground",children:["+",peers.length-6," ",t("common.more")]})]})]})]})})}const __WEBPACK_DEFAULT_EXPORT__=CommentsToolbar;CommentsToolbar.__docgenInfo={description:"",methods:[],displayName:"CommentsToolbar",props:{peers:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  id: string;\n  label: string;\n  color: string;\n  selectedIds: string[];\n  editingId: string | null;\n  ts: number;\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"color",value:{name:"string",required:!0}},{key:"selectedIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!0}},{key:"editingId",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}},{key:"ts",value:{name:"number",required:!0}}]}}],raw:"PresencePeer[]"},description:""},showResolved:{required:!0,tsType:{name:"boolean"},description:""},onShowResolvedChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(v: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"v"}],return:{name:"void"}}},description:""},onReload:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void | Promise<void>",signature:{arguments:[],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},onAddForSelected:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void | Promise<void>",signature:{arguments:[],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},canAddForSelected:{required:!0,tsType:{name:"boolean"},description:""},onToggleDrawer:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},unresolvedCount:{required:!0,tsType:{name:"number"},description:""}}}},"../../packages/ui/src/components/cms/page-builder/defaults.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{K3:()=>CONTAINER_TYPES,NT:()=>defaults});var _blocks__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../packages/ui/src/components/cms/blocks/index.ts");const CONTAINER_TYPES=Object.keys(_blocks__WEBPACK_IMPORTED_MODULE_0__.RR),defaults={Section:{contentWidth:"normal",density:"compact",themeDark:!1,animateOnScroll:!1},HeroBanner:{minItems:1,maxItems:5},ValueProps:{minItems:1,maxItems:6},ReviewsCarousel:{minItems:1,maxItems:10},SearchBar:{placeholder:"Search products…",limit:5},ProductFilter:{showSize:!0,showColor:!0,showPrice:!0},ProductGrid:{minItems:1,maxItems:3,desktopItems:3,tabletItems:2,mobileItems:1,mode:"collection"},ProductCarousel:{minItems:1,maxItems:10,desktopItems:4,tabletItems:2,mobileItems:1,mode:"collection"},RecommendationCarousel:{minItems:1,maxItems:4,endpoint:"/api/recommendations"},Testimonials:{minItems:1,maxItems:10},TestimonialSlider:{minItems:1,maxItems:10},ImageSlider:{minItems:1,maxItems:10},AnnouncementBar:{position:"absolute",top:"0",left:"0",width:"100%"},Lookbook:{minItems:0,maxItems:10},MultiColumn:{columns:2,gap:"1rem"},StackFlex:{direction:"column",gap:"1rem"},Grid:{columns:2,gap:"1rem"},CarouselContainer:{slidesPerView:1,gap:"1rem",showArrows:!0,showDots:!0},TabsAccordionContainer:{mode:"tabs",tabs:["Tab 1","Tab 2"]},Divider:{width:"100%",height:"1px"},Spacer:{width:"100%",height:"1rem"},Dataset:{source:"products"},Repeater:{columns:3,gap:"1rem"},Bind:{prop:"text",path:"title"},Canvas:{width:"100%",height:"100%",color:"hsl(var(--color-bg))"}}},"../../packages/ui/src/components/cms/page-builder/devtools/DevToolsOverlay.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>DevToolsOverlay});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_acme_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/i18n/src/index.ts"),_hooks_usePageBuilderDnD__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/usePageBuilderDnD.ts");function getCanvas(){try{return document.getElementById("canvas")}catch(e){return null}}function measure(el,relativeTo){const r=el.getBoundingClientRect();return relativeTo?{left:r.left-relativeTo.left,top:r.top-relativeTo.top,width:r.width,height:r.height}:{left:r.left,top:r.top,width:r.width,height:r.height}}function DevToolsOverlay({scrollRef}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_2__.c3)(),[enabled,setEnabled]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>{try{return"1"===localStorage.getItem("pb:devtools")}catch(e){return!1}}),[fps,setFps]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0),[droppables,setDroppables]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[items,setItems]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[scrollBands,setScrollBands]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({}),loopRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),lastRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(Date.now());(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{const onKey=e=>{e.altKey&&(e.ctrlKey||e.metaKey)&&"d"===e.key.toLowerCase()&&(e.preventDefault(),setEnabled(v=>{const next=!v;try{localStorage.setItem("pb:devtools",next?"1":"0")}catch(e){}return next}))};return window.addEventListener("keydown",onKey),()=>window.removeEventListener("keydown",onKey)},[]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{if(!enabled)return;const tick=()=>{const now=Date.now(),dt=now-lastRef.current;lastRef.current=now;const curr=dt>0?Math.round(1e3/dt):0;setFps(p=>.8*p+.2*curr);const canvas=getCanvas(),baseRect=null==canvas?void 0:canvas.getBoundingClientRect();try{const d=[];document.querySelectorAll('[id^="container-"]').forEach(el=>{baseRect&&d.push(measure(el,baseRect))}),setDroppables(d)}catch(e){}try{const i=[];document.querySelectorAll("[data-component-id]").forEach(el=>{baseRect&&i.push(measure(el,baseRect))}),setItems(i)}catch(e){}try{var _scrollRef_current,_ref;const sc=null!==(_ref=null!==(_scrollRef_current=null==scrollRef?void 0:scrollRef.current)&&void 0!==_scrollRef_current?_scrollRef_current:null==canvas?void 0:canvas.closest(".overscroll-contain"))&&void 0!==_ref?_ref:null;if(sc){const r=sc.getBoundingClientRect(),band=_hooks_usePageBuilderDnD__WEBPACK_IMPORTED_MODULE_3__.wM;setScrollBands({top:{left:0,top:0,width:r.width,height:band},bottom:{left:0,top:r.height-band,width:r.width,height:band},left:{left:0,top:0,width:band,height:r.height},right:{left:r.width-band,top:0,width:band,height:r.height}})}else setScrollBands({})}catch(e){}loopRef.current=requestAnimationFrame(tick)};return loopRef.current=requestAnimationFrame(tick),()=>{loopRef.current&&cancelAnimationFrame(loopRef.current)}},[enabled,scrollRef]);const canvas=getCanvas(),baseRect=null==canvas?void 0:canvas.getBoundingClientRect();return enabled&&canvas&&baseRect?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"relative pointer-events-none","aria-hidden":!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"absolute inset-0",children:[droppables.map(b=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"absolute border border-purple-500/60",style:{left:b.left,top:b.top,width:b.width,height:b.height}},`drop-${b.left}-${b.top}-${b.width}-${b.height}`)),items.map(b=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"absolute border border-emerald-500/60",style:{left:b.left,top:b.top,width:b.width,height:b.height}},`item-${b.left}-${b.top}-${b.width}-${b.height}`)),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"absolute start-2 top-2 rounded bg-black/70 px-2 py-1 text-xs text-white shadow",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{children:"DevTools ON"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:["FPS ~ ",Math.round(fps)]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:["Droppables: ",droppables.length," Items: ",items.length]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{children:t("pb.devtools.toggleHint")})]}),(()=>{var _scrollRef_current;const sc=null!==(_scrollRef_current=null==scrollRef?void 0:scrollRef.current)&&void 0!==_scrollRef_current?_scrollRef_current:canvas.closest(".overscroll-contain");if(!sc)return null;const r=sc.getBoundingClientRect(),s=scrollBands;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"pointer-events-none absolute",style:{left:r.left-baseRect.left,top:r.top-baseRect.top,width:r.width,height:r.height},children:[s.top&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"absolute bg-cyan-500/10",style:{left:s.top.left,top:s.top.top,width:s.top.width,height:s.top.height}}),s.bottom&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"absolute bg-cyan-500/10",style:{left:s.bottom.left,top:s.bottom.top,width:s.bottom.width,height:s.bottom.height}}),s.left&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"absolute bg-cyan-500/10",style:{left:s.left.left,top:s.left.top,width:s.left.width,height:s.left.height}}),s.right&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"absolute bg-cyan-500/10",style:{left:s.right.left,top:s.right.top,width:s.right.width,height:s.right.height}})]})})()]})}):null}DevToolsOverlay.__docgenInfo={description:"",methods:[],displayName:"DevToolsOverlay",props:{scrollRef:{required:!1,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLDivElement | null>",elements:[{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}]}]},description:"Optional scroll container to draw autoscroll thresholds. If omitted, tries to infer."}}}},"../../packages/ui/src/components/cms/page-builder/gridSnap.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{E:()=>snapToGrid});const snapToGrid=(value,gridSize)=>Math.round(value/gridSize)*gridSize},"../../packages/ui/src/components/cms/page-builder/hooks/useAutoSave.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>useAutoSave});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js");function useAutoSave({onSave,formData,deps,onError}){const[autoSaveState,setAutoSaveState]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("idle"),saveDebounceRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),initialRender=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!0),onSaveRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(onSave),formDataRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(formData);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{onSaveRef.current=onSave},[onSave]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{formDataRef.current=formData},[formData]);const handleAutoSave=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{setAutoSaveState("saving"),onSaveRef.current(formDataRef.current).then(()=>{setAutoSaveState("saved"),setTimeout(()=>setAutoSaveState("idle"),1e3)}).catch(()=>{setAutoSaveState("error"),null==onError||onError(()=>{handleAutoSave()})})},[onError]);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{if(!initialRender.current)return saveDebounceRef.current&&clearTimeout(saveDebounceRef.current),saveDebounceRef.current=window.setTimeout(handleAutoSave,2e3),()=>{saveDebounceRef.current&&clearTimeout(saveDebounceRef.current)};initialRender.current=!1},[handleAutoSave,...deps]),{autoSaveState,handleAutoSave}}},"../../packages/ui/src/components/cms/page-builder/hooks/useGroupingActions.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>hooks_useGroupingActions});var react=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),browser=__webpack_require__("../../node_modules/.pnpm/ulid@3.0.1/node_modules/ulid/dist/browser/index.js");const hooks_useGroupingActions=({components,selectedIds,dispatch})=>({groupAs:(0,react.useCallback)(type=>{var _selectedIds_length;if((null!==(_selectedIds_length=null==selectedIds?void 0:selectedIds.length)&&void 0!==_selectedIds_length?_selectedIds_length:0)<2)return;const next=function groupIntoContainer(list,ids,type){if(ids.length<1)return list;let parentId,indices=[];const walk=(nodes,p)=>{nodes.forEach((n,i)=>{ids.includes(n.id)&&(void 0===parentId&&(parentId=p),parentId===p&&indices.push(i));const children=n.children;Array.isArray(children)&&walk(children,n.id)})};if(walk(list,void 0),indices=[...indices].sort((a,b)=>a-b),indices.length!==ids.length)return list;const build=(nodes,p)=>{if(p===parentId){const children=nodes.filter((_,i)=>indices.includes(i)),container={id:(0,browser.Z0)(),type,children:[...children]};var _indices_;"MultiColumn"===type&&(container.columns=children.length||2);const firstIndex=null!==(_indices_=indices[0])&&void 0!==_indices_?_indices_:0,rest=((arr,idxs)=>{const result=[];return arr.forEach((n,i)=>{idxs.includes(i)||result.push(n)}),result})(nodes,indices);return idx=firstIndex,n=container,[...(arr=rest).slice(0,idx),n,...arr.slice(idx)]}var arr,idx,n;return nodes.map(n=>{const kids=n.children;return Array.isArray(kids)?{...n,children:build(kids,n.id)}:n})};return build(list,void 0)}(components,selectedIds,type);dispatch({type:"set",components:next});try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:`Grouped into ${type}`}))}catch(e){}},[components,dispatch,selectedIds]),ungroup:(0,react.useCallback)(()=>{var _selectedIds_length;if(1!==(null!==(_selectedIds_length=null==selectedIds?void 0:selectedIds.length)&&void 0!==_selectedIds_length?_selectedIds_length:0))return;const id=selectedIds[0],next=function ungroupContainer(list,id){const expand=nodes=>{const result=[];for(const n of nodes){const children=n.children;if(n.id===id&&Array.isArray(children)){const kids=null!=children?children:[];result.push(...kids)}else Array.isArray(children)?result.push({...n,children:expand(children)}):result.push(n)}return result};return expand(list)}(components,id);if(next!==components){dispatch({type:"set",components:next});try{window.dispatchEvent(new CustomEvent("pb-live-message",{detail:"Ungrouped"}))}catch(e){}}},[components,dispatch,selectedIds])})},"../../packages/ui/src/components/cms/page-builder/hooks/useLocalStrings.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function useLocalStrings(locale){const dict={en:{cannotPlace:"Cannot place ${type} here",cannotMove:"Cannot move ${type} here",movedToTab:"Moved to tab ${n}",canceled:"Canceled",source_palette:"Palette",source_library:"Library",source_canvas:"Canvas",prompt_make_global:"Name this Global component:",msg_made_global:"Made Global: ${label}",warn_not_global:"This block is not linked to a Global component yet. Use 'Make Global' first.",confirm_apply_global:"Apply current block state to the Global template and update all instances on this page?",msg_updated_global:"Updated Global and instances",msg_inserted_global:"Inserted Global: ${label}",cannot_add_at_root:"Cannot add ${type} at page root",image_inserted:"Image inserted",prompt_save_to_library:"Save to My Library as:",prompt_add_tags:"Add tags (comma-separated)",default_blocks_label:"${n} blocks",tour_palette:"Drag components from the palette onto the canvas.",tour_toolbar:"Use the toolbar to change device, locale, and more.",tour_canvas:"Arrange and edit components on the canvas.",tour_sidebar:"Edit the selected component's settings in this sidebar.",notify_save_failed:"Save failed",notify_changes_saved:"Changes saved",notify_published:"Page published",notify_publish_failed:"Publish failed",position_property_hint:"CSS position property",position_label:"Position",dock_x_hint:"Dock horizontally to container",dock_x_label:"Dock X",dock_left:"Dock Left",dock_center:"Dock Center",dock_right:"Dock Right",dock_y_hint:"Dock vertically to container",dock_y_label:"Dock Y",dock_top:"Dock Top",dock_bottom:"Dock Bottom",offset_top_label:"Top",offset_top_hint:"CSS top offset (px/%/rem)",offset_placeholder:"e.g. 10px",offset_left_label:"Left",offset_left_hint:"CSS left offset (px/%/rem)",offset_right_label:"Right",offset_right_hint:"CSS right offset (px/%/rem)",offset_bottom_label:"Bottom",offset_bottom_hint:"CSS bottom offset (px/%/rem)",pin_left:"Pin Left",pin_right:"Pin Right",pin_top:"Pin Top",pin_bottom:"Pin Bottom",stretch_x:"Stretch X",stretch_y:"Stretch Y",aria_stretch_horizontally:"Stretch horizontally",aria_stretch_vertically:"Stretch vertically",tooltip_width_hint:"CSS width with unit (px/%/rem)",tooltip_height_hint:"CSS height with unit (px/%/rem)",placeholder_width:"e.g. 100px or 50%",placeholder_height:"e.g. 1px or 1rem",label_override_active:"Override active",label_reset:"Reset",label_full_width:"Full width",label_full_height:"Full height",aria_explain_width_units:"Explain width units",aria_explain_height_units:"Explain height units",width_label_template:"Width (${vp})",height_label_template:"Height (${vp})",device_desktop:"Desktop",device_tablet:"Tablet",device_mobile:"Mobile"}},table=dict[locale||"en"]||dict.en;return function t(key,vars){const raw=table[key]||key;try{return raw.replace(/\$\{(\w+)\}/g,(_,k)=>{var _vars_k;return String(null!==(_vars_k=null==vars?void 0:vars[k])&&void 0!==_vars_k?_vars_k:"")})}catch(e){return raw}}}__webpack_require__.d(__webpack_exports__,{A:()=>useLocalStrings})},"../../packages/ui/src/components/cms/page-builder/hooks/usePageBuilderControls.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>hooks_usePageBuilderControls});var react=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),devicePresets=__webpack_require__("../../packages/ui/src/utils/devicePresets.ts");__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),__webpack_require__("../../packages/ui/src/components/cms/ImageUploaderWithOrientationCheck.tsx");__webpack_require__("../../packages/ui/src/hooks/useFileUpload.tsx"),__webpack_require__("../../packages/ui/src/hooks/useImageOrientationValidation.ts"),__webpack_require__("../../packages/ui/src/hooks/useProductEditorNotifications.ts"),__webpack_require__("../../packages/ui/src/hooks/useProductEditorFormState.tsx"),__webpack_require__("../../packages/ui/src/hooks/useProductFilters.ts"),__webpack_require__("../../packages/ui/src/hooks/useTokenEditor.tsx");__webpack_require__("../../packages/ui/src/hooks/useTokenColors.ts"),__webpack_require__("../../packages/ui/src/hooks/useRemoteImageProbe.ts"),__webpack_require__("../../packages/ui/src/hooks/useProductInputs.ts"),__webpack_require__("../../packages/ui/src/hooks/useProductMediaManager.tsx"),__webpack_require__("../../packages/ui/src/hooks/useViewport.ts");__webpack_require__("../../__mocks__/next/navigation.js");var hooks_useViewport=__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/useViewport.ts"),PageBuilderTour=__webpack_require__("../../packages/ui/src/components/cms/page-builder/PageBuilderTour.tsx"),src=__webpack_require__("../../packages/i18n/src/index.ts"),process=__webpack_require__("../../node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");const VIEWPORT_KEYS=["desktop","tablet","mobile"],clampEditingWidth=value=>Math.max(320,Math.min(1920,Math.round(value))),normalizeEditingSizeValue=value=>{if(null==value)return null;if("number"==typeof value)return Number.isFinite(value)?clampEditingWidth(value):null;if("string"==typeof value){const trimmed=value.trim();if(!trimmed)return null;const parsed=Number.parseFloat(trimmed);return Number.isFinite(parsed)?clampEditingWidth(parsed):null}return null},hooks_usePageBuilderControls=({state,dispatch})=>{const[deviceId,setDeviceId]=function usePreviewDevice(initialId){const[deviceId,setDeviceId]=(0,react.useState)(initialId);return(0,react.useEffect)(()=>{try{const stored=localStorage.getItem("preview-device");stored&&setDeviceId(stored)}catch(e){}},[]),(0,react.useEffect)(()=>{try{localStorage.setItem("preview-device",deviceId)}catch(e){}},[deviceId]),[deviceId,setDeviceId]}(devicePresets.vh[0].id),[orientation,setOrientation]=(0,react.useState)("portrait"),breakpoints=(0,react.useMemo)(()=>{return value=state.breakpoints,Array.isArray(value)?value.filter(bp=>bp&&"object"==typeof bp&&"string"==typeof bp.id&&"string"==typeof bp.label):[];var value},[state]),extraDevices=(0,react.useMemo)(()=>breakpoints.map(bp=>{const width=(bp=>{const base="number"==typeof bp.max&&bp.max>0?bp.max:"number"==typeof bp.min?bp.min:1024;return Math.max(320,Math.min(1920,base))})(bp),type=(w=width)>=1024?"desktop":w>=768?"tablet":"mobile";var w;return{id:`bp-${bp.id}`,label:bp.label,width,height:800,type,orientation:"portrait"}}),[breakpoints]),device=(0,react.useMemo)(()=>{const all=[...extraDevices,...devicePresets.vh];var _all_find,_ref,_ref1;const preset=null!==(_ref1=null!==(_ref=null!==(_all_find=all.find(d=>d.id===deviceId))&&void 0!==_all_find?_all_find:(0,devicePresets.bK)(deviceId))&&void 0!==_ref?_ref:devicePresets.vh.find(d=>d.id===deviceId))&&void 0!==_ref1?_ref1:all[0]||devicePresets.vh[0];return"portrait"===orientation?{...preset,orientation}:{...preset,width:preset.height,height:preset.width,orientation}},[deviceId,orientation,extraDevices]),viewport=device.type,{viewportStyle,frameClass}=(0,hooks_useViewport.A)(device),[pageEditingSize,setPageEditingSize]=(0,react.useState)(()=>({desktop:null,tablet:null,mobile:null})),pinnedGlobal=(0,react.useMemo)(()=>{var _state_editor;const editorMap=null!==(_state_editor=state.editor)&&void 0!==_state_editor?_state_editor:{};for(const[id,flags]of Object.entries(editorMap)){const globalMeta=null==flags?void 0:flags.global;if(null==globalMeta?void 0:globalMeta.pinned)return{id,meta:globalMeta}}return null},[state.editor]),pinnedEditingSize=(0,react.useMemo)(()=>(null==pinnedGlobal?void 0:pinnedGlobal.meta)?(value=>{const next={desktop:null,tablet:null,mobile:null};if(!value||"object"!=typeof value)return next;const source=value;return VIEWPORT_KEYS.forEach(key=>{const normalized=normalizeEditingSizeValue(source[key]);null!==normalized&&(next[key]=normalized)}),next})(pinnedGlobal.meta.editingSize):null,[pinnedGlobal]),editingSizeRecord=null!=pinnedEditingSize?pinnedEditingSize:pageEditingSize,setEditingSizePx=(0,react.useCallback)(value=>{const normalized=normalizeEditingSizeValue(value);if((null==pinnedGlobal?void 0:pinnedGlobal.id)&&pinnedEditingSize){if(pinnedEditingSize[viewport]===normalized)return;const stored=(state=>{const stored={};return VIEWPORT_KEYS.forEach(key=>{const value=state[key];"number"==typeof value&&Number.isFinite(value)&&(stored[key]=value)}),stored})({...pinnedEditingSize,[viewport]:normalized}),nextGlobal={id:pinnedGlobal.id};var _pinnedGlobal_meta;return Object.assign(nextGlobal,null!==(_pinnedGlobal_meta=pinnedGlobal.meta)&&void 0!==_pinnedGlobal_meta?_pinnedGlobal_meta:{}),0===Object.keys(stored).length?delete nextGlobal.editingSize:nextGlobal.editingSize=stored,void dispatch({type:"update-editor",id:pinnedGlobal.id,patch:{global:nextGlobal}})}setPageEditingSize(prev=>prev[viewport]===normalized?prev:{...prev,[viewport]:normalized})},[dispatch,pinnedGlobal,pinnedEditingSize,viewport]),effectiveViewportStyle=(0,react.useMemo)(()=>{const px=editingSizeRecord[viewport];return"number"==typeof px&&Number.isFinite(px)?{...viewportStyle,width:`${px}px`}:viewportStyle},[viewportStyle,editingSizeRecord,viewport]),[locale,setLocale]=(0,react.useState)("en"),[showPreview,setShowPreview]=(0,react.useState)(!1),togglePreview=(0,react.useCallback)(()=>setShowPreview(p=>!p),[]),rotateDevice=(0,react.useCallback)(()=>setOrientation(o=>"portrait"===o?"landscape":"portrait"),[]),[previewDeviceId,setPreviewDeviceId]=(0,react.useState)((0,devicePresets.Jh)("desktop").id),[runTour,setRunTour]=(0,react.useState)(!1),t=(0,src.c3)(),tourSteps=(0,react.useMemo)(()=>[{target:"[data-tour='palette']",content:t("pb.tour.palette")},{target:"[data-tour='toolbar']",content:t("pb.tour.toolbar")},{target:"[data-tour='canvas']",content:t("pb.tour.canvas")},{target:"[data-tour='sidebar']",content:t("pb.tour.sidebar")}],[t]),handleTourCallback=(0,react.useCallback)(data=>{data.status!==PageBuilderTour.X.FINISHED&&data.status!==PageBuilderTour.X.SKIPPED||(setRunTour(!1),localStorage.setItem("page-builder-tour","done"))},[]);(0,react.useEffect)(()=>{void 0!==process&&!1||localStorage.getItem("page-builder-tour")||setRunTour(!0)},[]);const startTour=(0,react.useCallback)(()=>setRunTour(!0),[]),[showGrid,setShowGrid]=(0,react.useState)(!1),[snapToGrid,setSnapToGrid]=(0,react.useState)(!0),toggleSnap=(0,react.useCallback)(()=>setSnapToGrid(s=>!s),[]),gridCols="number"==typeof state.gridCols?state.gridCols:12,toggleGrid=(0,react.useCallback)(()=>{setShowGrid(g=>!g),dispatch({type:"set-grid-cols",gridCols})},[dispatch,gridCols]),setGridCols=(0,react.useCallback)(n=>dispatch({type:"set-grid-cols",gridCols:n}),[dispatch]),[zoom,setZoom]=(0,react.useState)(1),[showRulers,setShowRulers]=(0,react.useState)(!1),toggleRulers=(0,react.useCallback)(()=>setShowRulers(s=>!s),[]),[showBaseline,setShowBaseline]=(0,react.useState)(!1),[baselineStep,setBaselineStep]=(0,react.useState)(8),toggleBaseline=(0,react.useCallback)(()=>setShowBaseline(s=>!s),[]),setBreakpoints=(0,react.useCallback)(list=>dispatch({type:"set-breakpoints",breakpoints:list}),[dispatch]),[crossBreakpointNotices,setCrossBreakpointNotices]=(0,react.useState)(!0);var _editingSizeRecord_viewport;return{deviceId,setDeviceId,orientation,setOrientation,rotateDevice,device,viewport,viewportStyle:effectiveViewportStyle,frameClass,locale,setLocale,showPreview,togglePreview,previewDeviceId,setPreviewDeviceId,runTour,startTour,tourSteps,handleTourCallback,showGrid,toggleGrid,snapToGrid,toggleSnap,gridCols,setGridCols,showRulers,toggleRulers,showBaseline,toggleBaseline,baselineStep,setBaselineStep,zoom,setZoom,breakpoints,setBreakpoints,extraDevices,editingSizePx:null!==(_editingSizeRecord_viewport=editingSizeRecord[viewport])&&void 0!==_editingSizeRecord_viewport?_editingSizeRecord_viewport:null,setEditingSizePx,crossBreakpointNotices,setCrossBreakpointNotices}}},"../../packages/ui/src/components/cms/page-builder/hooks/usePageBuilderDnD.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{wM:()=>AUTOSCROLL_EDGE_PX,Ay:()=>hooks_usePageBuilderDnD});var core_esm=__webpack_require__("../../node_modules/.pnpm/@dnd-kit+core@6.3.1_react-dom@19.2.0-canary-3fbfb9ba-20250409_react@19.2.0-canary-3fbfb_fe9249e4a42fbe7e42b4e4091f9a4c62/node_modules/@dnd-kit/core/dist/core.esm.js"),react=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),gridSnap=__webpack_require__("../../packages/ui/src/components/cms/page-builder/gridSnap.ts"),rules=__webpack_require__("../../packages/ui/src/components/cms/page-builder/rules.ts"),coords=__webpack_require__("../../packages/ui/src/components/cms/page-builder/utils/coords.ts"),sortable_esm=__webpack_require__("../../node_modules/.pnpm/@dnd-kit+sortable@10.0.0_@dnd-kit+core@6.3.1_react-dom@19.2.0-canary-3fbfb9ba-20250409__571aab38212e666fc4f105bb05843619/node_modules/@dnd-kit/sortable/dist/sortable.esm.js");const AUTOSCROLL_EDGE_PX=48;function speedForDistance(d,edge,maxSpeed){const within=Math.max(0,edge-d);return within>0?Math.ceil(within/edge*maxSpeed):0}function safeDispatchEvent(name,detail){try{window.dispatchEvent(new CustomEvent(name,{detail}))}catch(e){}}var isHiddenForViewport=__webpack_require__("../../packages/ui/src/components/cms/page-builder/state/layout/utils/isHiddenForViewport.ts");function hasChildren(c){return Array.isArray(c.children)}function findById(list,id){for(const c of list){if(c.id===id)return c;const children=hasChildren(c)?c.children:void 0;if(children){const found=findById(children,id);if(found)return found}}return null}function findParentId(list,target,pid){for(const c of list){if(c.id===target)return pid;const children=c.children;if(Array.isArray(children)){const res=findParentId(children,target,c.id);if(void 0!==res)return res}}}function getTypeOfId(list,id){if(!id)return null;const node=findById(list,String(id));return(null==node?void 0:node.type)||null}function getVisibleComponents(list,editor,viewport){return list.filter(c=>!(0,isHiddenForViewport.E)(c.id,editor,c.hidden,viewport))}function resolveParentKind(components,parentId){var _findById;return parentId?(null===(_findById=findById(components,parentId))||void 0===_findById?void 0:_findById.type)||"":"ROOT"}var browser=__webpack_require__("../../node_modules/.pnpm/ulid@3.0.1/node_modules/ulid/dist/browser/index.js");const noop=()=>{};const hooks_usePageBuilderDnD=function usePageBuilderDnD({components,dispatch,defaults,containerTypes,selectId,gridSize=1,canvasRef,setSnapPosition=noop,editor,viewport,scrollRef,zoom=1,t}){const sensors=function useDndSensors(){return(0,core_esm.FR)((0,core_esm.MS)(core_esm.AN,{activationConstraint:{distance:6}}),(0,core_esm.MS)(core_esm.uN,{coordinateGetter:sortable_esm.JR}))}(),[insertIndex,setInsertIndex]=(0,react.useState)(null),[insertParentId,setInsertParentId]=(0,react.useState)(void 0),[activeType,setActiveType]=(0,react.useState)(null),[dragMeta,setDragMeta]=(0,react.useState)(null),[currentOverId,setCurrentOverId]=(0,react.useState)(null),[dropAllowed,setDropAllowed]=(0,react.useState)(null),zoomRef=(0,react.useRef)(zoom);(0,react.useEffect)(()=>{zoomRef.current=zoom},[zoom]);const{addIframeShields,removeIframeShields}=function useIframeShields(canvasRef){const iframeShieldsRef=(0,react.useRef)([]);return{addIframeShields:(0,react.useCallback)(()=>{try{var _canvasRef_current;const root=null!==(_canvasRef_current=null==canvasRef?void 0:canvasRef.current)&&void 0!==_canvasRef_current?_canvasRef_current:"undefined"!=typeof document?document.getElementById("canvas"):null;if(!root)return;const iframes=root.querySelectorAll("iframe"),shields=[];iframes.forEach(frame=>{const r=frame.getBoundingClientRect(),base=root.getBoundingClientRect(),shield=document.createElement("div");shield.className="pb-iframe-shield";const style={position:"absolute",left:r.left-base.left+"px",top:r.top-base.top+"px",width:`${r.width}px`,height:`${r.height}px`,zIndex:"50",background:"transparent",pointerEvents:"auto"};Object.assign(shield.style,style),root.appendChild(shield),shields.push(shield)}),iframeShieldsRef.current=shields}catch(e){}},[canvasRef]),removeIframeShields:(0,react.useCallback)(()=>{try{iframeShieldsRef.current.forEach(el=>{var _el_parentElement;return null===(_el_parentElement=el.parentElement)||void 0===_el_parentElement?void 0:_el_parentElement.removeChild(el)})}catch(e){}iframeShieldsRef.current=[]},[])}}(canvasRef),lastTabHoverRef=function useLastTabHover(){const lastTabHoverRef=(0,react.useRef)(null);return(0,react.useEffect)(()=>{const onHover=e=>{try{const ce=e;(null==ce?void 0:ce.detail)&&"string"==typeof ce.detail.parentId&&"number"==typeof ce.detail.tabIndex&&(lastTabHoverRef.current={parentId:ce.detail.parentId,tabIndex:ce.detail.tabIndex})}catch(e){}};return window.addEventListener("pb-tab-hover",onHover),()=>window.removeEventListener("pb-tab-hover",onHover)},[]),lastTabHoverRef}(),handleDragMove=(0,react.useCallback)(ev=>{var _canvasRef_current;const{over,delta,activatorEvent}=ev;if(!over||!function isPointerEvent(ev){return!!ev&&"clientX"in ev&&"clientY"in ev}(activatorEvent))return setCurrentOverId(null),void setDropAllowed(null);const overData=over.data.current,visible=getVisibleComponents(components,editor,viewport),rawYScreen=activatorEvent.clientY+delta.y,rawXScreen=activatorEvent.clientX+delta.x,canvasRect=null==canvasRef||null===(_canvasRef_current=canvasRef.current)||void 0===_canvasRef_current?void 0:_canvasRef_current.getBoundingClientRect(),pointerXCanvas=(canvasRect?(0,coords.eG)({x:rawXScreen,y:rawYScreen},canvasRect,zoomRef.current):{x:rawXScreen,y:rawYScreen}).x,snapX=(0,gridSnap.E)(pointerXCanvas,gridSize);setSnapPosition(snapX),function autoScroll(scrollRef,pageX,pageY,edge=AUTOSCROLL_EDGE_PX,maxSpeed=28){try{const sc=null==scrollRef?void 0:scrollRef.current;if(!sc)return;const rect=sc.getBoundingClientRect(),topDist=Math.max(0,pageY-rect.top),bottomDist=Math.max(0,rect.bottom-pageY),leftDist=Math.max(0,pageX-rect.left),rightDist=Math.max(0,rect.right-pageX),vUp=speedForDistance(topDist,edge,maxSpeed),vDown=speedForDistance(bottomDist,edge,maxSpeed),vLeft=speedForDistance(leftDist,edge,maxSpeed),vRight=speedForDistance(rightDist,edge,maxSpeed);vUp&&pageY<rect.top+edge?sc.scrollBy({top:-vUp,behavior:"auto"}):vDown&&pageY>rect.bottom-edge&&sc.scrollBy({top:vDown,behavior:"auto"}),vLeft&&pageX<rect.left+edge?sc.scrollBy({left:-vLeft,behavior:"auto"}):vRight&&pageX>rect.right-edge&&sc.scrollBy({left:vRight,behavior:"auto"})}catch(e){}}(scrollRef,rawXScreen,rawYScreen,AUTOSCROLL_EDGE_PX,28);try{"undefined"!=typeof localStorage&&"1"===localStorage.getItem("pb:devtools")&&safeDispatchEvent("pb-dev:drag-move",{t:Date.now(),x:rawXScreen,y:rawYScreen,overId:over.id})}catch(e){}let parentId;if(setCurrentOverId(String(over.id)),"canvas"===over.id)parentId=void 0;else{const overId=over.id.toString();parentId=overId.startsWith("container-")?overId.replace(/^container-/,""):findParentId(components,overId,void 0)}const parentKind=resolveParentKind(components,parentId),a=ev.active.data.current;let allowed=null;if("palette"===(null==a?void 0:a.from))allowed=!a.type||(0,rules.WL)(parentKind,a.type);else if("library"===(null==a?void 0:a.from)){const arr=a.templates&&a.templates.length?a.templates:a.template?[a.template]:[];allowed=arr&&arr.length?arr.every(n=>(0,rules.WL)(parentKind,n.type)):null}else{const movingType=getTypeOfId(components,ev.active.id)||(null==a?void 0:a.type);allowed=movingType?(0,rules.WL)(parentKind,movingType):null}if(setDropAllowed(allowed),"canvas"===over.id)return setInsertParentId(void 0),void setInsertIndex(visible.length);if(over.id.toString().startsWith("container-")){const pid=parentId;if(setInsertParentId(pid),pid){const parent=findById(components,pid),children=parent&&Array.isArray(parent.children)?getVisibleComponents(parent.children,editor,viewport):[];setInsertIndex(children.length)}else setInsertIndex(visible.length);return}const isBelow=rawYScreen>over.rect.top+over.rect.height/2;var _overData_index;const index=(null!==(_overData_index=null==overData?void 0:overData.index)&&void 0!==_overData_index?_overData_index:visible.length)+(isBelow?1:0);setInsertParentId(parentId),setInsertIndex(index)},[components,gridSize,canvasRef,setSnapPosition,editor,viewport,scrollRef]),handleDragEndInternal=(0,react.useCallback)(ev=>{if(setInsertIndex(null),setSnapPosition(null),removeIframeShields(),dragMeta){var _ev_active,_ev_active1,_ev_active2,_ev_active3;const dataRef=null===(_ev_active=ev.active)||void 0===_ev_active?void 0:_ev_active.data,existing=dataRef&&dataRef.current&&"object"==typeof dataRef.current?dataRef.current:{};var _existing_from;const from=null!==(_existing_from=existing.from)&&void 0!==_existing_from?_existing_from:dragMeta.from,patched={...existing};from&&(patched.from=from),"palette"!==from&&"library"!==from||!dragMeta.type?void 0===patched.type&&dragMeta.type&&(patched.type=dragMeta.type):patched.type=dragMeta.type,void 0!==(null===(_ev_active1=ev.active)||void 0===_ev_active1?void 0:_ev_active1.id)&&null!==(null===(_ev_active2=ev.active)||void 0===_ev_active2?void 0:_ev_active2.id)||!dragMeta.id||(ev.active.id=dragMeta.id),dataRef?dataRef.current=patched:(null===(_ev_active3=ev.active)||void 0===_ev_active3?void 0:_ev_active3.data)&&(ev.active.data.current=patched)}!function finalizeDrop({ev,components,dispatch,defaults,containerTypes,selectId,t,lastTabHoverRef}){const{active,over}=ev;if(!over)return;const a=active.data.current,o=over.data.current||{};let parentId=o.parentId,index=o.index;if("canvas"===over.id)parentId=void 0,index=components.length;else if(void 0===parentId){parentId=over.id.toString().replace(/^container-/,"");const parent=findById(components,parentId);if(index=parent&&hasChildren(parent)?parent.children.length:0,!(over.id.toString().startsWith("container-")||parent&&hasChildren(parent))){const overId=over.id.toString(),actualParentId=findParentId(components,overId,void 0);if(parentId=actualParentId,parentId){const p=findById(components,parentId),children=p&&hasChildren(p)?p.children:[];index=Math.max(0,children.findIndex(c=>c.id===overId))}else index=Math.max(0,components.findIndex(c=>c.id===overId))}}const parentKind=resolveParentKind(components,parentId);if("palette"===(null==a?void 0:a.from)){var _lastTabHoverRef_current;const isContainer=containerTypes.includes(a.type);if(!(0,rules.WL)(parentKind,a.type))return void safeDispatchEvent("pb-live-message","function"==typeof t?t("cannotPlace",{type:a.type}):`Cannot place ${a.type} here`);var _defaults_a_type;const component={id:(0,browser.Z0)(),type:a.type,...null!==(_defaults_a_type=defaults[a.type])&&void 0!==_defaults_a_type?_defaults_a_type:{},...isContainer?{children:[]}:{}};if(parentId&&(null===(_lastTabHoverRef_current=lastTabHoverRef.current)||void 0===_lastTabHoverRef_current?void 0:_lastTabHoverRef_current.parentId)===parentId){const parent=findById(components,parentId);parent&&("Tabs"===parent.type||"TabsAccordionContainer"===parent.type)&&(component.slotKey=String(lastTabHoverRef.current.tabIndex))}return dispatch({type:"add",component,parentId,index:null!=index?index:0}),void selectId(component.id)}if("library"===(null==a?void 0:a.from)&&(a.template||a.templates&&a.templates.length)){var _lastTabHoverRef_current1;const cloneWithIds=node=>{const cloned={...node,id:(0,browser.Z0)()},children=node.children;return Array.isArray(children)&&(cloned.children=children.map(cloneWithIds)),cloned},clones=(a.templates&&a.templates.length?a.templates:a.template?[a.template]:[]).map(cloneWithIds),invalid=clones.find(c=>!(0,rules.WL)(parentKind,c.type));if(invalid)return void safeDispatchEvent("pb-live-message","function"==typeof t?t("cannotPlace",{type:String(invalid.type)}):`Cannot place ${String(invalid.type)} here`);if(parentId&&(null===(_lastTabHoverRef_current1=lastTabHoverRef.current)||void 0===_lastTabHoverRef_current1?void 0:_lastTabHoverRef_current1.parentId)===parentId){const parent=findById(components,parentId);parent&&("Tabs"===parent.type||"TabsAccordionContainer"===parent.type)&&clones.forEach(c=>{c.slotKey=String(lastTabHoverRef.current.tabIndex)})}let insertedFirstId=null;return clones.forEach((component,i)=>{dispatch({type:"add",component,parentId,index:(null!=index?index:0)+i}),insertedFirstId||(insertedFirstId=component.id)}),void(insertedFirstId&&selectId(insertedFirstId))}if("canvas"===(null==a?void 0:a.from)){var _lastTabHoverRef_current2;let toIndex=null!=index?index:0;a.parentId===parentId&&a.index<(null!=index?index:0)&&(toIndex=(null!=index?index:0)-1);const movingType=getTypeOfId(components,ev.active.id)||a.type;if(movingType&&!(0,rules.WL)(parentKind,movingType))return void safeDispatchEvent("pb-live-message","function"==typeof t?t("cannotMove",{type:String(movingType)}):`Cannot move ${String(movingType)} here`);if(dispatch({type:"move",from:{parentId:a.parentId,index:a.index},to:{parentId,index:toIndex}}),parentId&&(null===(_lastTabHoverRef_current2=lastTabHoverRef.current)||void 0===_lastTabHoverRef_current2?void 0:_lastTabHoverRef_current2.parentId)===parentId){const parent=findById(components,parentId);if(parent&&("Tabs"===parent.type||"TabsAccordionContainer"===parent.type)){const movedId=String(ev.active.id);dispatch({type:"update",id:movedId,patch:{slotKey:String(lastTabHoverRef.current.tabIndex)}}),safeDispatchEvent("pb-live-message","function"==typeof t?t("movedToTab",{n:String(lastTabHoverRef.current.tabIndex+1)}):`Moved to tab ${lastTabHoverRef.current.tabIndex+1}`)}}}}({ev,components,dispatch,defaults,containerTypes,selectId,t,lastTabHoverRef})},[dispatch,components,containerTypes,defaults,selectId,setSnapPosition,t,removeIframeShields,lastTabHoverRef,dragMeta]),handleDragStart=(0,react.useCallback)(ev=>{var _a_templates;const a=ev.active.data.current;var _a_type,_a_from,_a_thumbnail;setActiveType(null!==(_a_type=null==a?void 0:a.type)&&void 0!==_a_type?_a_type:null),setDragMeta({from:null!==(_a_from=null==a?void 0:a.from)&&void 0!==_a_from?_a_from:"canvas",type:null==a?void 0:a.type,count:Array.isArray(null==a?void 0:a.templates)?null==a||null===(_a_templates=a.templates)||void 0===_a_templates?void 0:_a_templates.length:(null==a?void 0:a.template)?1:void 0,id:String(ev.active.id),label:null==a?void 0:a.label,thumbnail:null!==(_a_thumbnail=null==a?void 0:a.thumbnail)&&void 0!==_a_thumbnail?_a_thumbnail:null}),setCurrentOverId(null),setDropAllowed(null),addIframeShields(),safeDispatchEvent("pb-drag-start")},[addIframeShields]),handleDragEnd=(0,react.useCallback)(ev=>{setActiveType(null),handleDragEndInternal(ev),setCurrentOverId(null),setDropAllowed(null),setDragMeta(null),safeDispatchEvent("pb-drag-end")},[handleDragEndInternal]),handleDragCancel=(0,react.useCallback)(()=>{setInsertIndex(null),setSnapPosition(null),setActiveType(null),setCurrentOverId(null),setDropAllowed(null),setDragMeta(null),removeIframeShields(),safeDispatchEvent("pb-live-message","function"==typeof t?t("canceled"):"Canceled")},[setSnapPosition,t,removeIframeShields]),dndContext={sensors,collisionDetection:core_esm.fp,onDragStart:handleDragStart,onDragMove:handleDragMove,onDragEnd:handleDragEnd,onDragCancel:handleDragCancel};return{sensors,handleDragStart,handleDragMove,handleDragEnd,handleDragCancel,insertIndex,insertParentId,activeType,dragMeta,dropAllowed,currentOverId,dndContext}}},"../../packages/ui/src/components/cms/page-builder/hooks/usePageBuilderSave.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>usePageBuilderSave});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_useAutoSave__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/useAutoSave.ts"),_state_exportComponents__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/state/exportComponents.ts"),_useLocalStrings__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/useLocalStrings.ts");function usePageBuilderSave({page,components,state,onSave,onPublish,formDataDeps,onAutoSaveError,clearHistory,shop}){const t=(0,_useLocalStrings__WEBPACK_IMPORTED_MODULE_2__.A)(),[updatedAt,setUpdatedAt]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(page.updatedAt),getLibrary=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{try{const req=eval("require"),mod=req("../libraryStore");return mod.listLibrary(shop)}catch(e){return[]}},[shop]),getGlobals=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{try{const req=eval("require"),mod=req("../libraryStore");return mod.listGlobals(shop)}catch(e){return[]}},[shop]),formData=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{const fd=new FormData;var _page_seo_description;fd.append("id",page.id),fd.append("updatedAt",updatedAt),fd.append("slug",page.slug),fd.append("status",page.status),fd.append("title",JSON.stringify(page.seo.title)),fd.append("description",JSON.stringify(null!==(_page_seo_description=page.seo.description)&&void 0!==_page_seo_description?_page_seo_description:{})),fd.append("components",JSON.stringify(components)),fd.append("history",JSON.stringify(state));try{const lib=getLibrary();lib&&Array.isArray(lib)&&lib.length>0&&fd.append("library",JSON.stringify(lib))}catch(e){}return fd},[page,components,state,updatedAt,getLibrary]),formDataRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(formData);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{formDataRef.current=formData},[formData]);const saveWithMetaUpdate=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async fd=>{const res=await onSave(fd).catch(err=>{try{window.dispatchEvent(new CustomEvent("pb:notify",{detail:{type:"error",title:t("notify_save_failed"),message:String((null==err?void 0:err.message)||err)}}))}catch(e){}throw err});try{var _res_page;const next=null!==(_res_page=null==res?void 0:res.page)&&void 0!==_res_page?_res_page:res;next&&"string"==typeof next.updatedAt&&next.updatedAt&&setUpdatedAt(next.updatedAt)}catch(e){}try{window.dispatchEvent(new CustomEvent("pb:notify",{detail:{type:"save",title:t("notify_changes_saved")}}))}catch(e){}return res},[onSave,t]),handleSave=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>saveWithMetaUpdate(formDataRef.current),[saveWithMetaUpdate]),handlePublish=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{const fd=formDataRef.current,editor=(()=>{try{const s=fd.get("history");if(!s)return;return JSON.parse(String(s)).editor}catch(e){return}})(),raw=fd.get("components");let nextComponents=components;try{const list=raw?JSON.parse(String(raw)):components,globalsArr=getGlobals(),globalsMap=Object.fromEntries((globalsArr||[]).map(g=>[g.globalId,g.template]));nextComponents=(0,_state_exportComponents__WEBPACK_IMPORTED_MODULE_3__.$)(list,editor,globalsMap)}catch(e){const globalsArr=getGlobals(),globalsMap=Object.fromEntries((globalsArr||[]).map(g=>[g.globalId,g.template]));nextComponents=(0,_state_exportComponents__WEBPACK_IMPORTED_MODULE_3__.$)(components,editor,globalsMap)}const out=new FormData;for(const[k,v]of fd.entries())"components"!==k&&out.append(k,v);return out.append("components",JSON.stringify(nextComponents)),onPublish(out).then(()=>{try{window.dispatchEvent(new CustomEvent("pb:notify",{detail:{type:"publish",title:t("notify_published")}}))}catch(e){}clearHistory()}).catch(err=>{try{window.dispatchEvent(new CustomEvent("pb:notify",{detail:{type:"error",title:t("notify_publish_failed"),message:String((null==err?void 0:err.message)||err)}}))}catch(e){}throw err})},[onPublish,clearHistory,components,getGlobals,t]),{autoSaveState}=(0,_useAutoSave__WEBPACK_IMPORTED_MODULE_1__.A)({onSave:saveWithMetaUpdate,formData,deps:formDataDeps,onError:onAutoSaveError}),prevId=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(page.id);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{prevId.current!==page.id&&(clearHistory(),prevId.current=page.id)},[page.id,clearHistory]),{formData,handlePublish,handleSave,autoSaveState}}},"../../packages/ui/src/components/cms/page-builder/hooks/usePageBuilderState.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_state__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/state/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/i18n/src/index.ts");const __WEBPACK_DEFAULT_EXPORT__=function usePageBuilderState({page,history,onChange,onSaveShortcut,onTogglePreview,onRotateDevice}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_2__.c3)(),storageKey=`page-builder-history-${page.id}`,migrate=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(comps=>comps.map(c=>{var _c_children;return"Section"===c.type||"MultiColumn"===c.type?{...c,children:null!==(_c_children=c.children)&&void 0!==_c_children?_c_children:[]}:c}),[]),typedReducer=_state__WEBPACK_IMPORTED_MODULE_1__.Ff,[state,rawDispatch]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useReducer)(typedReducer,void 0,()=>{const initial=migrate(page.components),fromServer=null!=history?history:page.history,parsedServer=fromServer?(()=>{try{const valid=_state__WEBPACK_IMPORTED_MODULE_1__.Ft.parse(fromServer);return{...valid,present:migrate(valid.present)}}catch(e){return{past:[],present:initial,future:[],gridCols:12,editor:{}}}})():{past:[],present:initial,future:[],gridCols:12,editor:{}};try{const stored=localStorage.getItem(storageKey);if(!stored)throw new Error("no stored state");const parsed=_state__WEBPACK_IMPORTED_MODULE_1__.Ft.parse(JSON.parse(stored));return{...parsed,present:migrate(parsed.present)}}catch(e){return parsedServer}}),typedState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>_state__WEBPACK_IMPORTED_MODULE_1__.Ft.parse(state),[state]),components=typedState.present,[selectedIds,setSelectedIds]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),[liveMessage,setLiveMessage]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),dispatch=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(action=>{rawDispatch(action),"add"===action.type?setLiveMessage(t("cms.builder.live.blockAdded")):"move"===action.type?setLiveMessage(t("cms.builder.live.blockMoved")):"resize"===action.type?setLiveMessage(t("cms.builder.live.blockResized")):"duplicate"===action.type?setLiveMessage(t("cms.builder.live.blockDuplicated")):"remove"===action.type&&setLiveMessage(t("cms.builder.live.blockDeleted"))},[rawDispatch,t]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{const handleAnnounce=e=>{try{const ce=e;"string"==typeof ce.detail&&setLiveMessage(ce.detail)}catch(e){}};return window.addEventListener("pb-live-message",handleAnnounce),()=>window.removeEventListener("pb-live-message",handleAnnounce)},[]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{if(!liveMessage)return;const t=setTimeout(()=>setLiveMessage(""),500);return()=>clearTimeout(t)},[liveMessage]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{null==onChange||onChange(components),localStorage.setItem(storageKey,JSON.stringify(typedState))},[components,onChange,storageKey,typedState]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{const handler=e=>{if(e.target instanceof HTMLElement&&("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName||"SELECT"===e.target.tagName||e.target.isContentEditable))return;if(e.altKey&&e.shiftKey&&("arrowup"===e.key.toLowerCase()||"arrowdown"===e.key.toLowerCase())){if(1!==selectedIds.length)return;const targetId=selectedIds[0],findParentAndIndex=(nodes,id,parentId)=>{for(let i=0;i<nodes.length;i++){const n=nodes[i];if(n.id===id)return{parentId,index:i};const kids=n.children;if(Array.isArray(kids)){const got=findParentAndIndex(kids,id,n.id);if(got)return got}}return null},locateList=(nodes,pid)=>{if(!pid)return nodes;for(const c of nodes){const cc=c;var _cc_children;if(cc.id===pid)return null!==(_cc_children=cc.children)&&void 0!==_cc_children?_cc_children:[];const kids=cc.children;if(Array.isArray(kids)){const res=locateList(kids,pid);if(res)return res}}return nodes},info=findParentAndIndex(components,targetId,void 0);if(!info)return;const list=locateList(components,info.parentId),last=Math.max(0,list.length-1),dir="arrowup"===e.key.toLowerCase()?-1:1,to=Math.min(last,Math.max(0,info.index+dir));return void(to!==info.index&&(e.preventDefault(),dispatch({type:"move",from:{parentId:info.parentId,index:info.index},to:{parentId:info.parentId,index:to}}),setLiveMessage(t("cms.builder.live.blockReordered"))))}const lower=e.key.toLowerCase();if("arrowleft"===lower||"arrowright"===lower||"arrowup"===lower||"arrowdown"===lower){if(0===selectedIds.length)return;const canvas="undefined"!=typeof document?document.getElementById("canvas"):null,unit=(null==canvas?void 0:canvas.offsetWidth)?canvas.offsetWidth/typedState.gridCols:null,step=e.altKey&&unit?unit:e.shiftKey?10:1,viewportEl="undefined"!=typeof document?document.querySelector("[data-viewport]"):null;var _viewportEl_getAttribute;const vpRaw=null!==(_viewportEl_getAttribute=null==viewportEl?void 0:viewportEl.getAttribute("data-viewport"))&&void 0!==_viewportEl_getAttribute?_viewportEl_getAttribute:"desktop",vp="tablet"===vpRaw||"mobile"===vpRaw?vpRaw:"desktop",leftKey="desktop"===vp?"leftDesktop":"tablet"===vp?"leftTablet":"leftMobile",topKey="desktop"===vp?"topDesktop":"tablet"===vp?"topTablet":"topMobile",find=(list,cid)=>{for(const c of list){if(c.id===cid)return c;const children=c.children;if(Array.isArray(children)){const found=find(children,cid);if(found)return found}}return null};let handled=!1;return void selectedIds.forEach(id=>{var _typedState_editor_id,_typedState_editor;const comp=find(components,id);var _typedState_editor_id_locked,_ref;const locked=null!==(_ref=null!==(_typedState_editor_id_locked=null===(_typedState_editor=typedState.editor)||void 0===_typedState_editor||null===(_typedState_editor_id=_typedState_editor[id])||void 0===_typedState_editor_id?void 0:_typedState_editor_id.locked)&&void 0!==_typedState_editor_id_locked?_typedState_editor_id_locked:null==comp?void 0:comp.locked)&&void 0!==_ref&&_ref;if(!comp||locked||"absolute"!==comp.position)return;handled||(e.preventDefault(),handled=!0);let el=null;if("undefined"!=typeof document){const all=document.querySelectorAll(`[data-component-id="${id}"]`);el=all.length?all[all.length-1]:null}const parent=null==el?void 0:el.offsetParent,maxLeft=parent?Math.max(0,parent.offsetWidth-((null==el?void 0:el.offsetWidth)||0)):null,maxTop=parent?Math.max(0,parent.offsetHeight-((null==el?void 0:el.offsetHeight)||0)):null,clampPx=(raw,delta,max)=>{const s=(null!=raw?raw:"0").trim(),n=s.endsWith("px")?parseFloat(s):Number(s),next=(Number.isNaN(n)?0:n)+delta,clamped=null==max?next:Math.min(Math.max(0,next),max);return`${Math.round(clamped)}px`};if("arrowleft"===lower){var _comp_leftKey;const current=null!==(_comp_leftKey=comp[leftKey])&&void 0!==_comp_leftKey?_comp_leftKey:comp.left;dispatch({type:"resize",id,[leftKey]:clampPx(current,-step,maxLeft)})}else if("arrowright"===lower){var _comp_leftKey1;const current=null!==(_comp_leftKey1=comp[leftKey])&&void 0!==_comp_leftKey1?_comp_leftKey1:comp.left;dispatch({type:"resize",id,[leftKey]:clampPx(current,step,maxLeft)})}else if("arrowup"===lower){var _comp_topKey;const current=null!==(_comp_topKey=comp[topKey])&&void 0!==_comp_topKey?_comp_topKey:comp.top;dispatch({type:"resize",id,[topKey]:clampPx(current,-step,maxTop)})}else if("arrowdown"===lower){var _comp_topKey1;const current=null!==(_comp_topKey1=comp[topKey])&&void 0!==_comp_topKey1?_comp_topKey1:comp.top;dispatch({type:"resize",id,[topKey]:clampPx(current,step,maxTop)})}})}if(!e.ctrlKey&&!e.metaKey)return;const k=e.key.toLowerCase();"z"===k?(e.preventDefault(),dispatch({type:"undo"})):"y"===k?(e.preventDefault(),dispatch({type:"redo"})):"s"===k?(e.preventDefault(),null==onSaveShortcut||onSaveShortcut()):"p"===k?(e.preventDefault(),null==onTogglePreview||onTogglePreview()):"]"===k&&e.shiftKey?(e.preventDefault(),selectedIds.length>0?(selectedIds.forEach(id=>{dispatch({type:"update-editor",id,patch:{zIndex:999}})}),setLiveMessage(t("cms.builder.live.broughtToFront"))):null==onRotateDevice||onRotateDevice("right")):"["===k&&e.shiftKey?(e.preventDefault(),selectedIds.length>0?(selectedIds.forEach(id=>{dispatch({type:"update-editor",id,patch:{zIndex:0}})}),setLiveMessage(t("cms.builder.live.sentToBack"))):null==onRotateDevice||onRotateDevice("left")):"]"!==k||e.shiftKey?"["!==k||e.shiftKey||(e.preventDefault(),selectedIds.length>0&&(selectedIds.forEach(id=>{var _typedState_editor_id,_typedState_editor,_typedState_editor_id_zIndex;const z=null!==(_typedState_editor_id_zIndex=null===(_typedState_editor=typedState.editor)||void 0===_typedState_editor||null===(_typedState_editor_id=_typedState_editor[id])||void 0===_typedState_editor_id?void 0:_typedState_editor_id.zIndex)&&void 0!==_typedState_editor_id_zIndex?_typedState_editor_id_zIndex:0,newZ=Math.max(0,z-1);dispatch({type:"update-editor",id,patch:{zIndex:newZ}})}),setLiveMessage(t("cms.builder.live.sentBackward")))):(e.preventDefault(),selectedIds.length>0&&(selectedIds.forEach(id=>{var _typedState_editor_id,_typedState_editor,_typedState_editor_id_zIndex;const z=null!==(_typedState_editor_id_zIndex=null===(_typedState_editor=typedState.editor)||void 0===_typedState_editor||null===(_typedState_editor_id=_typedState_editor[id])||void 0===_typedState_editor_id?void 0:_typedState_editor_id.zIndex)&&void 0!==_typedState_editor_id_zIndex?_typedState_editor_id_zIndex:0;dispatch({type:"update-editor",id,patch:{zIndex:z+1}})}),setLiveMessage(t("cms.builder.live.broughtForward"))))};return window.addEventListener("keydown",handler),()=>window.removeEventListener("keydown",handler)},[dispatch,onSaveShortcut,onTogglePreview,onRotateDevice,components,selectedIds,typedState,t]);const clearHistory=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{localStorage.removeItem(storageKey)},[storageKey]);return{state,components,dispatch,selectedIds,setSelectedIds,liveMessage,storageKey,clearHistory}}},"../../packages/ui/src/components/cms/page-builder/hooks/usePreviewTokens.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>usePreviewTokens,_5:()=>savePreviewTokens});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js");const PREVIEW_TOKENS_KEY="cms-preview-tokens",PREVIEW_TOKENS_EVENT="previewTokens:update";function loadPreviewTokens(){try{const json=localStorage.getItem(PREVIEW_TOKENS_KEY);return json?JSON.parse(json):{}}catch(e){return{}}}function savePreviewTokens(tokens){try{localStorage.setItem(PREVIEW_TOKENS_KEY,JSON.stringify(tokens)),window.dispatchEvent(new Event(PREVIEW_TOKENS_EVENT))}catch(e){}}function usePreviewTokens(){const[tokens,setTokens]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(()=>loadPreviewTokens());return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{const handle=()=>setTokens(loadPreviewTokens());return handle(),window.addEventListener("storage",handle),window.addEventListener(PREVIEW_TOKENS_EVENT,handle),()=>{window.removeEventListener("storage",handle),window.removeEventListener(PREVIEW_TOKENS_EVENT,handle)}},[]),tokens}},"../../packages/ui/src/components/cms/page-builder/hooks/useViewport.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js");const __WEBPACK_DEFAULT_EXPORT__=device=>{const[canvasWidth,setCanvasWidth]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(device.width),[canvasHeight,setCanvasHeight]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(device.height),[scale,setScale]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(1),prevWidth=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(device.width);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{const prev=prevWidth.current;setCanvasWidth(device.width),setCanvasHeight(device.height),setScale(prev/device.width);const raf=requestAnimationFrame(()=>setScale(1));return prevWidth.current=device.width,()=>cancelAnimationFrame(raf)},[device]);const viewportStyle=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>({width:`${canvasWidth}px`,height:`${canvasHeight}px`,transform:`scale(${scale})`,transformOrigin:"top center",transition:"transform 0.3s ease"}),[canvasWidth,canvasHeight,scale]),frameClass=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>({desktop:"",tablet:"rounded-xl border border-muted-foreground/40 p-2",mobile:"rounded-4xl border border-muted-foreground/40 p-4"}),[]);return{canvasWidth,canvasHeight,scale,viewportStyle,frameClass}}},"../../packages/ui/src/components/cms/page-builder/libraryStore.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$r:()=>syncFromServer,CY:()=>removeLibrary,Dr:()=>saveGlobalForPage,Eb:()=>listLibrary,QS:()=>removeGlobal,VJ:()=>updateGlobal,Vf:()=>saveGlobal,ZV:()=>updateLibrary,dP:()=>saveLibrary,fV:()=>clearLibrary,hV:()=>listGlobals,id:()=>removeGlobalForPage,nJ:()=>listGlobalsForPage,zH:()=>updateGlobalForPage});const keyFor=shop=>`pb-library-${shop||"default"}`,keyForGlobals=shop=>`pb-globals-${shop||"default"}`,keyForPageGlobals=(shop,pageId)=>`pb-globals-${shop||"default"}-page-${pageId||"default"}`;function emitChange(){try{const ev=new CustomEvent("pb-library-changed");window.dispatchEvent(ev)}catch(e){}}function safeParse(raw,fallback){if(!raw)return fallback;try{const val=JSON.parse(raw);return null!=val?val:fallback}catch(e){return fallback}}function listLibrary(shop){const arr=safeParse(localStorage.getItem(keyFor(shop)),[]);return Array.isArray(arr)?arr:[]}function writeLocal(shop,items){try{localStorage.setItem(keyFor(shop),JSON.stringify(items))}catch(e){}}async function fetchJson(url,init){const res=await fetch(url,init),isJson=(res.headers.get("content-type")||"").includes("application/json");if(!res.ok){let detail;try{detail=isJson?await res.json():void 0}catch(e){}const message=detail&&detail.error||`Request failed: ${res.status}`,err=new Error(message);throw detail&&(err.data=detail),err}return isJson?await res.json():void 0}async function syncFromServer(shop){if(!shop)return null;try{const data=await fetchJson(`/api/library?shop=${encodeURIComponent(shop)}`);if(Array.isArray(data))return writeLocal(shop,data),emitChange(),data}catch(e){}return null}async function saveLibrary(shop,item){const current=listLibrary(shop);writeLocal(shop,[item,...current.filter(i=>i.id!==item.id)]),emitChange();try{shop&&(await fetchJson(`/api/library?shop=${encodeURIComponent(shop)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item})}),await syncFromServer(shop))}catch(e){}}async function updateLibrary(shop,id,patch){try{if(shop)return await fetchJson(`/api/library?shop=${encodeURIComponent(shop)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id,patch})}),void await syncFromServer(shop)}catch(e){}writeLocal(shop,listLibrary(shop).map(i=>i.id===id?{...i,...patch}:i)),emitChange()}async function removeLibrary(shop,id){writeLocal(shop,listLibrary(shop).filter(i=>i.id!==id)),emitChange();try{shop&&(await fetchJson(`/api/library?shop=${encodeURIComponent(shop)}&id=${encodeURIComponent(id)}`,{method:"DELETE"}),await syncFromServer(shop))}catch(e){}}async function clearLibrary(shop){writeLocal(shop,[]),emitChange();try{shop&&(await fetchJson(`/api/library?shop=${encodeURIComponent(shop)}&all=1`,{method:"DELETE"}),await syncFromServer(shop))}catch(e){}}function listGlobals(shop){return safeParse(localStorage.getItem(keyForGlobals(shop)),[])}function writeGlobals(shop,items){try{localStorage.setItem(keyForGlobals(shop),JSON.stringify(items))}catch(e){}}async function saveGlobal(shop,item){const cur=listGlobals(shop);writeGlobals(shop,[item,...cur.filter(g=>g.globalId!==item.globalId)]),emitChange();try{if(shop){await fetchJson(`/api/globals?shop=${encodeURIComponent(shop)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item})});try{const remote=await fetchJson(`/api/globals?shop=${encodeURIComponent(shop)}`);Array.isArray(remote)&&writeGlobals(shop,remote)}catch(e){}}}catch(e){}}async function updateGlobal(shop,globalId,patch){writeGlobals(shop,listGlobals(shop).map(g=>g.globalId===globalId?{...g,...patch}:g)),emitChange();try{shop&&await fetchJson(`/api/globals?shop=${encodeURIComponent(shop)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({globalId,patch})})}catch(e){}}async function removeGlobal(shop,globalId){writeGlobals(shop,listGlobals(shop).filter(g=>g.globalId!==globalId)),emitChange();try{shop&&await fetchJson(`/api/globals?shop=${encodeURIComponent(shop)}&id=${encodeURIComponent(globalId)}`,{method:"DELETE"})}catch(e){}}function listGlobalsForPage(shop,pageId){return safeParse(localStorage.getItem(keyForPageGlobals(shop,pageId)),[])}function writePageGlobals(shop,pageId,items){try{localStorage.setItem(keyForPageGlobals(shop,pageId),JSON.stringify(items))}catch(e){}}async function saveGlobalForPage(shop,pageId,item){const cur=listGlobalsForPage(shop,pageId);writePageGlobals(shop,pageId,[item,...cur.filter(g=>g.globalId!==item.globalId)]),emitChange();try{shop&&await fetchJson(`/api/globals?shop=${encodeURIComponent(shop)}&pageId=${encodeURIComponent(pageId||"")}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item})})}catch(e){}}async function updateGlobalForPage(shop,pageId,globalId,patch){writePageGlobals(shop,pageId,listGlobalsForPage(shop,pageId).map(g=>g.globalId===globalId?{...g,...patch}:g)),emitChange();try{shop&&await fetchJson(`/api/globals?shop=${encodeURIComponent(shop)}&pageId=${encodeURIComponent(pageId||"")}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({globalId,patch})})}catch(e){}}async function removeGlobalForPage(shop,pageId,globalId){writePageGlobals(shop,pageId,listGlobalsForPage(shop,pageId).filter(g=>g.globalId!==globalId)),emitChange();try{shop&&await fetchJson(`/api/globals?shop=${encodeURIComponent(shop)}&pageId=${encodeURIComponent(pageId||"")}&id=${encodeURIComponent(globalId)}`,{method:"DELETE"})}catch(e){}}},"../../packages/ui/src/components/cms/page-builder/paletteData.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{DE:()=>defaultIcon,Us:()=>getPaletteCategories});var _blocks__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../packages/ui/src/components/cms/blocks/index.ts"),_previewImages__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/previewImages.ts");const defaultIcon="/window.svg",createPaletteItems=registry=>Object.keys(registry).sort().map(t=>{var _registry_t,_registry_t1,_registry_t2,_registry_t_previewImage,_registry_t_previewImage1;return{type:t,label:t.replace(/([A-Z])/g," $1").trim(),icon:null!==(_registry_t_previewImage=null===(_registry_t=registry[t])||void 0===_registry_t?void 0:_registry_t.previewImage)&&void 0!==_registry_t_previewImage?_registry_t_previewImage:defaultIcon,description:null===(_registry_t1=registry[t])||void 0===_registry_t1?void 0:_registry_t1.description,previewImage:null!==(_registry_t_previewImage1=null===(_registry_t2=registry[t])||void 0===_registry_t2?void 0:_registry_t2.previewImage)&&void 0!==_registry_t_previewImage1?_registry_t_previewImage1:defaultIcon}}),palette={layout:createPaletteItems(_blocks__WEBPACK_IMPORTED_MODULE_0__._g),containers:createPaletteItems(_blocks__WEBPACK_IMPORTED_MODULE_0__.RR),atoms:createPaletteItems(_blocks__WEBPACK_IMPORTED_MODULE_0__.ll),molecules:createPaletteItems(_blocks__WEBPACK_IMPORTED_MODULE_0__.GF),organisms:createPaletteItems(_blocks__WEBPACK_IMPORTED_MODULE_0__.I2),overlays:createPaletteItems(_blocks__WEBPACK_IMPORTED_MODULE_0__.ch)},normalizeItems=items=>items.map(item=>{var _item_icon,_ref;const icon=null!==(_ref=null!==(_item_icon=item.icon)&&void 0!==_item_icon?_item_icon:item.previewImage)&&void 0!==_ref?_ref:defaultIcon;var _item_previewImage,_ref1;const previewImageRaw=null!==(_ref1=null!==(_item_previewImage=item.previewImage)&&void 0!==_item_previewImage?_item_previewImage:item.icon)&&void 0!==_ref1?_ref1:defaultIcon,previewImage=previewImageRaw===defaultIcon?(0,_previewImages__WEBPACK_IMPORTED_MODULE_1__.w)(item.type):previewImageRaw;return{...item,icon,previewImage}}),BASE_CATEGORY_ENTRIES=Object.entries(palette).map(([id,items],index)=>({id,label:id,order:index,items:normalizeItems(items)})),appPaletteRegistry=new Map,getPaletteCategories=installedApps=>{const dynamic=(installedApps=>{const merged=new Map;for(const appId of installedApps){const categories=appPaletteRegistry.get(appId);if(categories)for(const category of categories){const existing=merged.get(category.id);if(!existing){var _category_label;merged.set(category.id,{id:category.id,label:null!==(_category_label=category.label)&&void 0!==_category_label?_category_label:category.id,order:category.order,items:[...category.items]});continue}const existingTypes=new Set(existing.items.map(item=>item.type)),nextItems=[...existing.items];for(const item of category.items)existingTypes.has(item.type)||(nextItems.push(item),existingTypes.add(item.type));var _existing_label,_ref,_existing_order;merged.set(category.id,{id:existing.id,label:null!==(_ref=null!==(_existing_label=existing.label)&&void 0!==_existing_label?_existing_label:category.label)&&void 0!==_ref?_ref:category.id,order:null!==(_existing_order=existing.order)&&void 0!==_existing_order?_existing_order:category.order,items:nextItems})}}return Array.from(merged.values()).map(category=>{var _category_label,_category_order;return{id:category.id,label:null!==(_category_label=category.label)&&void 0!==_category_label?_category_label:category.id,order:null!==(_category_order=category.order)&&void 0!==_category_order?_category_order:BASE_CATEGORY_ENTRIES.length,items:normalizeItems(category.items)}})})(installedApps);return[...BASE_CATEGORY_ENTRIES.map(category=>({...category,items:[...category.items]})),...dynamic].filter(category=>category.items.length>0).sort((a,b)=>a.order===b.order?a.label.localeCompare(b.label):a.order-b.order)}},"../../packages/ui/src/components/cms/page-builder/panels/BreakpointsPanel.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>BreakpointsPanel});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_acme_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/i18n/src/index.ts"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts");function BreakpointsPanel({breakpoints,onChange}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_2__.c3)(),[list,setList]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>[...breakpoints]),[draft,setDraft]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({label:"",min:"",max:""}),summary=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>list.length?`${list.length} breakpoint${1===list.length?"":"s"}`:String(t("None")),[list,t]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.Cf,{className:"space-y-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.c7,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.L3,{children:t("Custom Breakpoints")})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-sm text-muted-foreground",children:t("Define additional responsive ranges. These complement the default Desktop/Tablet/Mobile presets.")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"rounded border p-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mb-2 text-xs font-semibold text-muted-foreground",children:t("Current ({summary})",{summary})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("ul",{className:"max-h-64 space-y-1 overflow-auto",children:[0===list.length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("li",{className:"text-sm text-muted-foreground",children:t("No custom breakpoints")}),list.map(bp=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("li",{className:"flex items-center justify-between rounded border p-2 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"truncate",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-medium",children:bp.label}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{className:"text-muted-foreground",children:[" — ",bp.min?`${bp.min}px`:"",bp.min&&bp.max?` ${t("to")} `:"",bp.max?`${bp.max}px`:bp.min?"+":""]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.$n,{type:"button",variant:"outline",className:"h-7 px-2 text-xs",onClick:()=>{return id=bp.id,setList(prev=>prev.filter(b=>b.id!==id));var id},children:t("Delete")})]},bp.id))]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mt-3 grid grid-cols-4 gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.pd,{placeholder:t("Label"),value:draft.label,onChange:e=>setDraft(d=>({...d,label:e.target.value}))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.pd,{placeholder:t("Min px"),type:"number",value:draft.min,onChange:e=>setDraft(d=>({...d,min:e.target.value}))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.pd,{placeholder:t("Max px"),type:"number",value:draft.max,onChange:e=>setDraft(d=>({...d,max:e.target.value}))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.$n,{type:"button",variant:"outline",onClick:()=>{if(list.length>=3)return;const label=draft.label.trim();if(!label)return;const min=draft.min?Math.max(0,parseInt(draft.min,10)||0):void 0,max=draft.max?Math.max(0,parseInt(draft.max,10)||0):void 0,base=label.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");let id=base||`bp-${Date.now()}`,i=1;const ids=new Set(list.map(b=>b.id));for(;ids.has(id);)id=`${base}-${i++}`;setList(prev=>[...prev,{id,label,min,max}]),setDraft({label:"",min:"",max:""})},disabled:list.length>=3,children:t("Add")})]}),list.length>=3&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mt-2 text-xs text-muted-foreground",children:t("Limit: up to 3 additional breakpoints per page.")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mt-3 flex justify-end",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_3__.$n,{type:"button",variant:"outline",onClick:()=>onChange(list),children:t("Save")})})]})]})}BreakpointsPanel.__docgenInfo={description:"",methods:[],displayName:"BreakpointsPanel",props:{breakpoints:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"Breakpoint[]"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(list: Breakpoint[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"Breakpoint[]"},name:"list"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/panels/ContentPanel.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>ContentPanel});var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),src=__webpack_require__("../../packages/i18n/src/index.ts");const lazyEditor=loader=>(0,react.lazy)(loader);const page_builder_editorRegistry={ContactForm:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/ContactFormEditor.tsx"))),Gallery:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/GalleryEditor.tsx"))),Image:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/ImageBlockEditor.tsx"))),Lookbook:lazyEditor(()=>__webpack_require__.e(9753).then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/LookbookEditor.tsx"))),Testimonials:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/TestimonialsEditor.tsx"))),PricingTable:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/PricingTableEditor.tsx"))),HeroBanner:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/HeroBannerEditor.tsx"))),AnnouncementBar:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/AnnouncementBarEditor.tsx"))),NewsletterSignup:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/NewsletterSignupEditor.tsx"))),SearchBar:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/SearchBarEditor.tsx"))),ImageSlider:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/ImageSliderEditor.tsx"))),CollectionList:lazyEditor(()=>__webpack_require__.e(1655).then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/CollectionListEditor.tsx"))),RecommendationCarousel:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/RecommendationCarouselEditor.tsx"))),ProductComparison:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/ProductComparisonEditor.tsx"))),ProductBundle:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/ProductBundleEditor.tsx"))),GiftCardBlock:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/GiftCardEditor.tsx"))),FormBuilderBlock:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/FormBuilderEditor.tsx"))),PopupModal:lazyEditor(()=>__webpack_require__.e(886).then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/PopupModalEditor.tsx"))),ValueProps:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/ValuePropsEditor.tsx"))),ReviewsCarousel:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/ReviewsCarouselEditor.tsx"))),SocialFeed:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/SocialFeedEditor.tsx"))),SocialProof:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/SocialProofEditor.tsx"))),MapBlock:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/MapBlockEditor.tsx"))),StoreLocatorBlock:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/StoreLocatorBlockEditor.tsx"))),VideoBlock:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/VideoBlockEditor.tsx"))),FAQBlock:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/FAQBlockEditor.tsx"))),Header:lazyEditor(()=>__webpack_require__.e(4612).then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/HeaderEditor.tsx"))),Footer:lazyEditor(()=>__webpack_require__.e(1714).then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/FooterEditor.tsx"))),ProductFilter:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/ProductFilterEditor.tsx"))),CountdownTimer:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/CountdownTimerEditor.tsx"))),SocialLinks:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/SocialLinksEditor.tsx"))),Button:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/ButtonEditor.tsx"))),Tabs:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/TabsEditor.tsx"))),Dataset:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/DatasetEditor.tsx"))),Repeater:lazyEditor(()=>__webpack_require__.e(6127).then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/RepeaterEditor.tsx"))),Bind:lazyEditor(()=>__webpack_require__.e(5646).then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/BindEditor.tsx"))),ProductGrid:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/ProductGridEditor.tsx"))),ProductCarousel:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/ProductGridEditor.tsx"))),CustomHtml:lazyEditor(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/CustomHtmlEditor.tsx"))),Section:lazyEditor(()=>__webpack_require__.e(4184).then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/SectionEditor.tsx"))),StackFlex:lazyEditor(()=>__webpack_require__.e(4012).then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/StackFlexEditor.tsx"))),Grid:lazyEditor(()=>__webpack_require__.e(8082).then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/GridContainerEditor.tsx"))),CarouselContainer:lazyEditor(()=>__webpack_require__.e(6206).then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/CarouselContainerEditor.tsx"))),TabsAccordionContainer:lazyEditor(()=>__webpack_require__.e(8120).then(__webpack_require__.bind(__webpack_require__,"../../packages/ui/src/components/cms/page-builder/TabsAccordionContainerEditor.tsx")))};var shadcn=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),atoms=__webpack_require__("../../packages/ui/src/components/atoms/index.ts");const nonNegative=v=>void 0!==v&&v<0?"Must be ≥ 0":void 0;function MinMaxItems({component,onChange,handleInput}){const t=(0,src.c3)();if(!("minItems"in component)&&!("maxItems"in component))return null;const comp=component,minItemsError=nonNegative(comp.minItems)||(void 0!==comp.minItems&&void 0!==comp.maxItems&&comp.minItems>comp.maxItems?t("cms.builder.items.min.exceedsMax"):void 0),maxItemsError=nonNegative(comp.maxItems)||(void 0!==comp.minItems&&void 0!==comp.maxItems&&comp.maxItems<comp.minItems?t("cms.builder.items.max.lessThanMin"):void 0);var _comp_minItems,_comp_maxItems,_comp_maxItems1,_comp_minItems1;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[(0,jsx_runtime.jsx)(shadcn.pd,{label:t("cms.builder.items.min.label"),type:"number",value:null!==(_comp_minItems=comp.minItems)&&void 0!==_comp_minItems?_comp_minItems:"",onChange:e=>{const val=""===e.target.value?void 0:Number(e.target.value);if(void 0===val)return void handleInput("minItems",void 0);const max=comp.maxItems,patch={minItems:val};void 0!==max&&val>max&&(patch.maxItems=val),onChange(patch)},min:0,max:null!==(_comp_maxItems=comp.maxItems)&&void 0!==_comp_maxItems?_comp_maxItems:void 0,error:minItemsError}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("cms.builder.items.min.tooltip"),children:(0,jsx_runtime.jsx)("span",{className:"inline-flex items-center justify-center size-10",children:"?"})})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[(0,jsx_runtime.jsx)(shadcn.pd,{label:t("cms.builder.items.max.label"),type:"number",value:null!==(_comp_maxItems1=comp.maxItems)&&void 0!==_comp_maxItems1?_comp_maxItems1:"",onChange:e=>{const val=""===e.target.value?void 0:Number(e.target.value);if(void 0===val)return void handleInput("maxItems",void 0);const min=comp.minItems,patch={maxItems:val};void 0!==min&&val<min&&(patch.minItems=val),onChange(patch)},min:null!==(_comp_minItems1=comp.minItems)&&void 0!==_comp_minItems1?_comp_minItems1:0,error:maxItemsError}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("cms.builder.items.max.tooltip"),children:(0,jsx_runtime.jsx)("span",{className:"inline-flex items-center justify-center size-10",children:"?"})})]})]})}function ResponsiveItems({component,handleInput}){const t=(0,src.c3)();if(!("desktopItems"in component||"tabletItems"in component||"mobileItems"in component))return null;const setField=(field,value)=>{handleInput(field,value)},comp=component,desktopItemsError=nonNegative(comp.desktopItems),tabletItemsError=nonNegative(comp.tabletItems),mobileItemsError=nonNegative(comp.mobileItems);var _comp_desktopItems,_comp_tabletItems,_comp_mobileItems;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Desktop Items"),type:"number",value:null!==(_comp_desktopItems=comp.desktopItems)&&void 0!==_comp_desktopItems?_comp_desktopItems:"",onChange:e=>setField("desktopItems",""===e.target.value?void 0:Number(e.target.value)),min:0,error:desktopItemsError}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("Items shown on desktop"),children:"?"})]}),void 0!==comp.desktopItems&&(0,jsx_runtime.jsxs)("div",{className:"mt-1 flex items-center gap-2 text-xs",children:[(0,jsx_runtime.jsx)("span",{className:"rounded bg-amber-500/20 px-1 text-amber-700",children:t("Override active")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"ghost",onClick:()=>setField("desktopItems",void 0),children:t("Reset")})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Tablet Items"),type:"number",value:null!==(_comp_tabletItems=comp.tabletItems)&&void 0!==_comp_tabletItems?_comp_tabletItems:"",onChange:e=>setField("tabletItems",""===e.target.value?void 0:Number(e.target.value)),min:0,error:tabletItemsError}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("Items shown on tablet"),children:"?"})]}),void 0!==comp.tabletItems&&(0,jsx_runtime.jsxs)("div",{className:"mt-1 flex items-center gap-2 text-xs",children:[(0,jsx_runtime.jsx)("span",{className:"rounded bg-amber-500/20 px-1 text-amber-700",children:t("Override active")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"ghost",onClick:()=>setField("tabletItems",void 0),children:t("Reset")})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Mobile Items"),type:"number",value:null!==(_comp_mobileItems=comp.mobileItems)&&void 0!==_comp_mobileItems?_comp_mobileItems:"",onChange:e=>setField("mobileItems",""===e.target.value?void 0:Number(e.target.value)),min:0,error:mobileItemsError}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("Items shown on mobile"),children:"?"})]}),void 0!==comp.mobileItems&&(0,jsx_runtime.jsxs)("div",{className:"mt-1 flex items-center gap-2 text-xs",children:[(0,jsx_runtime.jsx)("span",{className:"rounded bg-amber-500/20 px-1 text-amber-700",children:t("Override active")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"ghost",onClick:()=>setField("mobileItems",void 0),children:t("Reset")})]})]})}MinMaxItems.__docgenInfo={description:"",methods:[],displayName:"MinMaxItems",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<PageComponent>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"Partial<PageComponent>"},name:"patch"}],return:{name:"void"}}},description:""},handleInput:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends keyof PageComponent>(\n  field: K,\n  value: PageComponent[K],\n) => void",signature:{arguments:[{type:{name:"K"},name:"field"},{type:{name:"z.infer[K]",raw:"PageComponent[K]"},name:"value"}],return:{name:"void"}}},description:""}}},ResponsiveItems.__docgenInfo={description:"",methods:[],displayName:"ResponsiveItems",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},handleInput:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends keyof PageComponent>(\n  field: K,\n  value: PageComponent[K],\n) => void",signature:{arguments:[{type:{name:"K"},name:"field"},{type:{name:"z.infer[K]",raw:"PageComponent[K]"},name:"value"}],return:{name:"void"}}},description:""}}};var helpers=__webpack_require__("../../packages/ui/src/components/cms/page-builder/panels/layout/helpers.ts");function ColumnsControls({component,handleInput}){const t=(0,src.c3)();if(!("columns"in component))return null;const comp=component,setField=(field,value)=>{handleInput(field,value)},columnsError=nonNegative(comp.columns)||(void 0!==comp.columns&&(void 0!==comp.minItems&&comp.columns<comp.minItems||void 0!==comp.maxItems&&comp.columns>comp.maxItems)?t("Columns must be between min and max items"):void 0);var _comp_columns,_comp_columnsDesktop,_comp_columnsTablet,_comp_columnsMobile;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Columns"),type:"number",value:null!==(_comp_columns=comp.columns)&&void 0!==_comp_columns?_comp_columns:"",onChange:e=>setField("columns",""===e.target.value?void 0:Number(e.target.value)),min:comp.minItems,max:comp.maxItems,error:columnsError}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("Number of columns"),children:"?"})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Columns (Desktop)"),type:"number",value:null!==(_comp_columnsDesktop=comp.columnsDesktop)&&void 0!==_comp_columnsDesktop?_comp_columnsDesktop:"",onChange:e=>setField("columnsDesktop",""===e.target.value?void 0:Number(e.target.value)),min:comp.minItems,max:comp.maxItems}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("Columns on desktop"),children:"?"})]}),(0,helpers.X)(comp.columns,comp.columnsDesktop)&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,jsx_runtime.jsx)("span",{className:"rounded bg-amber-500/20 px-1 text-amber-700",children:t("Override active")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"ghost",onClick:()=>setField("columnsDesktop",void 0),children:t("Reset")})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Columns (Tablet)"),type:"number",value:null!==(_comp_columnsTablet=comp.columnsTablet)&&void 0!==_comp_columnsTablet?_comp_columnsTablet:"",onChange:e=>setField("columnsTablet",""===e.target.value?void 0:Number(e.target.value)),min:0}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("Columns on tablet"),children:"?"})]}),(0,helpers.X)(comp.columns,comp.columnsTablet)&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,jsx_runtime.jsx)("span",{className:"rounded bg-amber-500/20 px-1 text-amber-700",children:t("Override active")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"ghost",onClick:()=>setField("columnsTablet",void 0),children:t("Reset")})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Columns (Mobile)"),type:"number",value:null!==(_comp_columnsMobile=comp.columnsMobile)&&void 0!==_comp_columnsMobile?_comp_columnsMobile:"",onChange:e=>setField("columnsMobile",""===e.target.value?void 0:Number(e.target.value)),min:0}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("Columns on mobile"),children:"?"})]}),(0,helpers.X)(comp.columns,comp.columnsMobile)&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,jsx_runtime.jsx)("span",{className:"rounded bg-amber-500/20 px-1 text-amber-700",children:t("Override active")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"ghost",onClick:()=>setField("columnsMobile",void 0),children:t("Reset")})]})]})}function GapControls({component,handleInput}){const t=(0,src.c3)();if(!("gap"in component))return null;const comp=component,setField=(field,value)=>{handleInput(field,value)};var _comp_gapDesktop,_comp_gapTablet,_comp_gapMobile;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Gap (Desktop)"),value:null!==(_comp_gapDesktop=comp.gapDesktop)&&void 0!==_comp_gapDesktop?_comp_gapDesktop:"",onChange:e=>setField("gapDesktop",e.target.value||void 0),placeholder:t("e.g. 24px")}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("Gap between items on desktop"),children:"?"})]}),(0,helpers.X)(comp.gap,comp.gapDesktop)&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,jsx_runtime.jsx)("span",{className:"rounded bg-amber-500/20 px-1 text-amber-700",children:t("Override active")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"ghost",onClick:()=>setField("gapDesktop",void 0),children:t("Reset")})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Gap (Tablet)"),value:null!==(_comp_gapTablet=comp.gapTablet)&&void 0!==_comp_gapTablet?_comp_gapTablet:"",onChange:e=>setField("gapTablet",e.target.value||void 0),placeholder:t("e.g. 16px")}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("Gap between items on tablet"),children:"?"})]}),(0,helpers.X)(comp.gap,comp.gapTablet)&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,jsx_runtime.jsx)("span",{className:"rounded bg-amber-500/20 px-1 text-amber-700",children:t("Override active")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"ghost",onClick:()=>setField("gapTablet",void 0),children:t("Reset")})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[(0,jsx_runtime.jsx)(shadcn.pd,{label:t("Gap (Mobile)"),value:null!==(_comp_gapMobile=comp.gapMobile)&&void 0!==_comp_gapMobile?_comp_gapMobile:"",onChange:e=>setField("gapMobile",e.target.value||void 0),placeholder:t("e.g. 8px")}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("Gap between items on mobile"),children:"?"})]}),(0,helpers.X)(comp.gap,comp.gapMobile)&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,jsx_runtime.jsx)("span",{className:"rounded bg-amber-500/20 px-1 text-amber-700",children:t("Override active")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"ghost",onClick:()=>setField("gapMobile",void 0),children:t("Reset")})]})]})}ColumnsControls.__docgenInfo={description:"",methods:[],displayName:"ColumnsControls",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},handleInput:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends keyof PageComponent>(\n  field: K,\n  value: PageComponent[K],\n) => void",signature:{arguments:[{type:{name:"K"},name:"field"},{type:{name:"z.infer[K]",raw:"PageComponent[K]"},name:"value"}],return:{name:"void"}}},description:""}}},GapControls.__docgenInfo={description:"",methods:[],displayName:"GapControls",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},handleInput:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends keyof PageComponent>(\n  field: K,\n  value: PageComponent[K],\n) => void",signature:{arguments:[{type:{name:"K"},name:"field"},{type:{name:"z.infer[K]",raw:"PageComponent[K]"},name:"value"}],return:{name:"void"}}},description:""}}};var primitives=__webpack_require__("../../packages/ui/src/components/atoms/primitives/index.ts");function AlignmentControls({component,handleInput}){const comp=component,t=(0,src.c3)(),setField=(field,value)=>handleInput(field,value),viewports=["Desktop","Tablet","Mobile"];var _comp_justifyItems,_comp_alignItems;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(primitives.xA,{cols:1,gap:2,children:[(0,jsx_runtime.jsxs)(primitives.cV,{gap:1,children:[(0,jsx_runtime.jsxs)(shadcn.l6,{value:null!==(_comp_justifyItems=comp.justifyItems)&&void 0!==_comp_justifyItems?_comp_justifyItems:"",onValueChange:v=>setField("justifyItems",v||void 0),children:[(0,jsx_runtime.jsx)(shadcn.bq,{children:(0,jsx_runtime.jsx)(shadcn.yv,{placeholder:t("cms.builder.controls.justifyItems.base.placeholder")})}),(0,jsx_runtime.jsxs)(shadcn.gC,{children:[(0,jsx_runtime.jsx)(shadcn.eb,{value:"start",children:"start"}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"center",children:"center"}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"end",children:"end"}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"stretch",children:"stretch"})]})]}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("cms.builder.controls.justifyItems.tooltip.base"),children:(0,jsx_runtime.jsx)("span",{className:"inline-flex items-center justify-center size-10",children:"?"})})]}),viewports.map(vp=>{var _comp_;return(0,jsx_runtime.jsxs)(primitives.cV,{gap:1,children:[(0,jsx_runtime.jsxs)(shadcn.l6,{value:null!==(_comp_=comp[`justifyItems${vp}`])&&void 0!==_comp_?_comp_:"",onValueChange:v=>setField(`justifyItems${vp}`,v||void 0),children:[(0,jsx_runtime.jsx)(shadcn.bq,{children:(0,jsx_runtime.jsx)(shadcn.yv,{placeholder:t("cms.builder.controls.justifyItems.vp.placeholder",{vp})})}),(0,jsx_runtime.jsxs)(shadcn.gC,{children:[(0,jsx_runtime.jsx)(shadcn.eb,{value:"start",children:"start"}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"center",children:"center"}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"end",children:"end"}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"stretch",children:"stretch"})]})]}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("cms.builder.controls.justifyItems.tooltip.vp",{vp:vp.toLowerCase()}),children:(0,jsx_runtime.jsx)("span",{className:"inline-flex items-center justify-center size-10",children:"?"})})]},`ji-${vp}`)}),viewports.map(vp=>(0,helpers.X)(comp.justifyItems,comp[`justifyItems${vp}`])?(0,jsx_runtime.jsxs)(primitives.cV,{gap:2,className:"text-xs",children:[(0,jsx_runtime.jsx)("span",{className:"rounded bg-amber-500/20 px-1 text-amber-700",children:t("cms.builder.override.active")}),(0,jsx_runtime.jsx)("button",{type:"button",className:"underline min-h-10 min-w-10",onClick:()=>setField(`justifyItems${vp}`,void 0),children:t("actions.reset")})]},`jio-${vp}`):null)]}),(0,jsx_runtime.jsxs)(primitives.xA,{cols:1,gap:2,children:[(0,jsx_runtime.jsxs)(primitives.cV,{gap:1,children:[(0,jsx_runtime.jsxs)(shadcn.l6,{value:null!==(_comp_alignItems=comp.alignItems)&&void 0!==_comp_alignItems?_comp_alignItems:"",onValueChange:v=>setField("alignItems",v||void 0),children:[(0,jsx_runtime.jsx)(shadcn.bq,{children:(0,jsx_runtime.jsx)(shadcn.yv,{placeholder:t("cms.builder.controls.alignItems.base.placeholder")})}),(0,jsx_runtime.jsxs)(shadcn.gC,{children:[(0,jsx_runtime.jsx)(shadcn.eb,{value:"start",children:"start"}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"center",children:"center"}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"end",children:"end"}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"stretch",children:"stretch"})]})]}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("cms.builder.controls.alignItems.tooltip.base"),children:(0,jsx_runtime.jsx)("span",{className:"inline-flex items-center justify-center size-10",children:"?"})})]}),viewports.map(vp=>{var _comp_;return(0,jsx_runtime.jsxs)(primitives.cV,{gap:1,children:[(0,jsx_runtime.jsxs)(shadcn.l6,{value:null!==(_comp_=comp[`alignItems${vp}`])&&void 0!==_comp_?_comp_:"",onValueChange:v=>setField(`alignItems${vp}`,v||void 0),children:[(0,jsx_runtime.jsx)(shadcn.bq,{children:(0,jsx_runtime.jsx)(shadcn.yv,{placeholder:t("cms.builder.controls.alignItems.vp.placeholder",{vp})})}),(0,jsx_runtime.jsxs)(shadcn.gC,{children:[(0,jsx_runtime.jsx)(shadcn.eb,{value:"start",children:"start"}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"center",children:"center"}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"end",children:"end"}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"stretch",children:"stretch"})]})]}),(0,jsx_runtime.jsx)(atoms.m_,{text:t("cms.builder.controls.alignItems.tooltip.vp",{vp:vp.toLowerCase()}),children:(0,jsx_runtime.jsx)("span",{className:"inline-flex items-center justify-center size-10",children:"?"})})]},`ai-${vp}`)}),viewports.map(vp=>(0,helpers.X)(comp.alignItems,comp[`alignItems${vp}`])?(0,jsx_runtime.jsxs)(primitives.cV,{gap:2,className:"text-xs",children:[(0,jsx_runtime.jsx)("span",{className:"rounded bg-amber-500/20 px-1 text-amber-700",children:t("cms.builder.override.active")}),(0,jsx_runtime.jsx)("button",{type:"button",className:"underline min-h-10 min-w-10",onClick:()=>setField(`alignItems${vp}`,void 0),children:t("actions.reset")})]},`aio-${vp}`):null)]})]})}AlignmentControls.__docgenInfo={description:"",methods:[],displayName:"AlignmentControls",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},handleInput:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends keyof PageComponent>(\n  field: K,\n  value: PageComponent[K],\n) => void",signature:{arguments:[{type:{name:"K"},name:"field"},{type:{name:"z.infer[K]",raw:"PageComponent[K]"},name:"value"}],return:{name:"void"}}},description:""}}};var en=__webpack_require__("../../packages/i18n/src/en.json");function toTitleCase(input){return input?input.toLowerCase().split(/\s+/).map(w=>w?w[0].toUpperCase()+w.slice(1):w).join(" "):input}function filenameToAlt(src){if(src)try{const base=(src.split("/").pop()||src).replace(/\.[a-zA-Z0-9]+$/,"");return toTitleCase(base.replace(/[\-_]+/g," ").trim())||void 0}catch(e){return}}var process=__webpack_require__("../../node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");function ContentPanel({component,onChange,handleInput}){const t=(0,src.c3)(),isMultiColumn="MultiColumn"===component.type,Specific=page_builder_editorRegistry[component.type],suggestionsEnabled="true"===(process.env.NEXT_PUBLIC_CMS_CONTENT_SUGGESTIONS||"").toString().toLowerCase(),suggestions=suggestionsEnabled?function getContentSuggestions(component,tArg){const t=null!=tArg?tArg:key=>{var _enMessages_key;return null!==(_enMessages_key=en[key])&&void 0!==_enMessages_key?_enMessages_key:key},suggestions=[];if("Text"===component.type){const text=component.text;suggestions.push({id:"text-punchy-headline",label:t("cms.builder.suggestions.text.punchyHeadline.label"),description:t("cms.builder.suggestions.text.punchyHeadline.description"),apply:()=>{const src=text||t("cms.builder.suggestions.text.punchyHeadline.defaultSource");return{text:src.length>60?`${src.slice(0,57).trim()}...`:src}}},{id:"text-insert-lorem",label:t("cms.builder.suggestions.text.insertLorem.label"),description:t("cms.builder.suggestions.text.insertLorem.description"),apply:()=>({text:t("cms.builder.suggestions.text.insertLorem.placeholder")})},{id:"text-title-case",label:t("cms.builder.suggestions.text.titleCase.label"),description:t("cms.builder.suggestions.text.titleCase.description"),apply:()=>({text:toTitleCase(text)})})}if("Button"===component.type&&suggestions.push({id:"btn-primary-buy",label:t("cms.builder.suggestions.button.primaryBuy.label"),description:t("cms.builder.suggestions.button.primaryBuy.description"),apply:()=>({label:"Buy Now",variant:"default",size:"lg"})},{id:"btn-secondary-learn",label:t("cms.builder.suggestions.button.secondaryLearn.label"),description:t("cms.builder.suggestions.button.secondaryLearn.description"),apply:()=>({label:"Learn More",variant:"outline",size:"md"})},{id:"btn-contact",label:t("cms.builder.suggestions.button.contact.label"),description:t("cms.builder.suggestions.button.contact.description"),apply:()=>({label:"Contact Us",href:"/contact"})}),"Image"===component.type){const src=component.src;suggestions.push({id:"img-square",label:t("cms.builder.suggestions.image.squareAspect.label"),description:t("cms.builder.suggestions.image.squareAspect.description"),apply:()=>({cropAspect:"1:1"})},{id:"img-widescreen",label:t("cms.builder.suggestions.image.widescreenAspect.label"),description:t("cms.builder.suggestions.image.widescreenAspect.description"),apply:()=>({cropAspect:"16:9"})},{id:"img-center-focal",label:t("cms.builder.suggestions.image.centerFocal.label"),description:t("cms.builder.suggestions.image.centerFocal.description"),apply:()=>({focalPoint:{x:.5,y:.5}})},{id:"img-alt-from-name",label:t("cms.builder.suggestions.image.altFromFilename.label"),description:t("cms.builder.suggestions.image.altFromFilename.description"),apply:()=>({alt:filenameToAlt(src)})})}return suggestions}(component,t):[];return(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[("minItems"in component||"maxItems"in component)&&(0,jsx_runtime.jsx)(MinMaxItems,{component,onChange,handleInput}),("desktopItems"in component||"tabletItems"in component||"mobileItems"in component)&&(0,jsx_runtime.jsx)(ResponsiveItems,{component,handleInput}),"columns"in component&&(0,jsx_runtime.jsx)(ColumnsControls,{component,handleInput}),"gap"in component&&(0,jsx_runtime.jsx)(GapControls,{component,handleInput}),isMultiColumn&&(0,jsx_runtime.jsx)(AlignmentControls,{component,handleInput}),suggestionsEnabled&&suggestions.length>0&&(0,jsx_runtime.jsxs)("div",{className:"space-y-1","data-testid":"content-suggestions",children:[(0,jsx_runtime.jsx)("div",{className:"text-xs font-semibold text-muted-foreground",children:t("Suggestions")}),(0,jsx_runtime.jsx)(primitives.xA,{cols:2,gap:2,children:suggestions.map(s=>(0,jsx_runtime.jsxs)("button",{type:"button",className:"rounded border p-2 text-start hover:bg-accent/30 min-h-10 min-w-10",onClick:()=>{try{const patch=s.apply(component);patch&&"object"==typeof patch&&onChange(patch)}catch(e){}},title:s.description||s.label,"aria-label":`Apply suggestion: ${s.label}`,children:[(0,jsx_runtime.jsx)("div",{className:"text-xs font-medium",children:s.label}),s.description&&(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted-foreground",children:s.description})]},s.id))})]}),(0,jsx_runtime.jsx)(react.Suspense,{fallback:(0,jsx_runtime.jsx)("p",{className:"text-muted text-sm",children:"Loading..."}),children:Specific?(0,jsx_runtime.jsx)(Specific,{component,onChange}):(0,jsx_runtime.jsx)("p",{className:"text-muted text-sm",children:"No editable props"})})]})}ContentPanel.__docgenInfo={description:"",methods:[],displayName:"ContentPanel",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(patch: Partial<PageComponent>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"Partial<PageComponent>"},name:"patch"}],return:{name:"void"}}},description:""},handleInput:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends keyof PageComponent>(\n  field: K,\n  value: PageComponent[K],\n) => void",signature:{arguments:[{type:{name:"K"},name:"field"},{type:{name:"z.infer[K]",raw:"PageComponent[K]"},name:"value"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/panels/LayoutPanel.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>LayoutPanel});var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),shadcn=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),atoms=__webpack_require__("../../packages/ui/src/components/atoms/index.ts"),src=__webpack_require__("../../packages/i18n/src/index.ts");function ZIndexControls({locked,editorFlags,onUpdateEditor}){const t=(0,src.c3)();var _editorFlags_zIndex;return(0,jsx_runtime.jsxs)("div",{className:"flex items-end gap-2",children:[(0,jsx_runtime.jsx)(shadcn.pd,{label:(0,jsx_runtime.jsxs)("span",{className:"flex items-center gap-1",children:[t("z-index"),(0,jsx_runtime.jsx)(atoms.m_,{text:t("Stacking order (number)"),children:"?"})]}),type:"number",value:null!==(_editorFlags_zIndex=null==editorFlags?void 0:editorFlags.zIndex)&&void 0!==_editorFlags_zIndex?_editorFlags_zIndex:"",onChange:e=>{const val=""===e.target.value?void 0:parseInt(e.target.value,10);onUpdateEditor&&onUpdateEditor({zIndex:val})},disabled:locked}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-1",children:[(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",disabled:locked,onClick:()=>{var _editorFlags_zIndex;return null==onUpdateEditor?void 0:onUpdateEditor({zIndex:Math.max(0,null!==(_editorFlags_zIndex=null==editorFlags?void 0:editorFlags.zIndex)&&void 0!==_editorFlags_zIndex?_editorFlags_zIndex:0)})},children:t("Back")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",disabled:locked,onClick:()=>{var _editorFlags_zIndex;return null==onUpdateEditor?void 0:onUpdateEditor({zIndex:(null!==(_editorFlags_zIndex=null==editorFlags?void 0:editorFlags.zIndex)&&void 0!==_editorFlags_zIndex?_editorFlags_zIndex:0)-1})},children:t("-1")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",disabled:locked,onClick:()=>{var _editorFlags_zIndex;return null==onUpdateEditor?void 0:onUpdateEditor({zIndex:(null!==(_editorFlags_zIndex=null==editorFlags?void 0:editorFlags.zIndex)&&void 0!==_editorFlags_zIndex?_editorFlags_zIndex:0)+1})},children:t("+1")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",disabled:locked,onClick:()=>null==onUpdateEditor?void 0:onUpdateEditor({zIndex:999}),children:t("Front")})]})]})}ZIndexControls.__docgenInfo={description:"",methods:[],displayName:"ZIndexControls",props:{locked:{required:!0,tsType:{name:"boolean"},description:""},editorFlags:{required:!1,tsType:{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  // Per-element responsive behavior (builder-only flag)\n  responsiveBehavior?: "none" | "scale-proportional";\n  // Legacy single strategy (mobile); kept for backwards-compat\n  stackStrategy?: "default" | "reverse" | "custom";\n  // Per-device stacking strategies\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  // Per-device custom orders on children\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"responsiveBehavior",value:{name:"union",raw:'"none" | "scale-proportional"',elements:[{name:"literal",value:'"none"'},{name:"literal",value:'"scale-proportional"'}],required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1}},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}}]}},description:""},onUpdateEditor:{required:!1,tsType:{name:"signature",type:"function",raw:"(patch: Partial<EditorFlags>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  // Per-element responsive behavior (builder-only flag)\n  responsiveBehavior?: "none" | "scale-proportional";\n  // Legacy single strategy (mobile); kept for backwards-compat\n  stackStrategy?: "default" | "reverse" | "custom";\n  // Per-device stacking strategies\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  // Per-device custom orders on children\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"responsiveBehavior",value:{name:"union",raw:'"none" | "scale-proportional"',elements:[{name:"literal",value:'"none"'},{name:"literal",value:'"scale-proportional"'}],required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1}},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}}]}}],raw:"Partial<EditorFlags>"},name:"patch"}],return:{name:"void"}}},description:""}}};var IconButton=__webpack_require__("../../packages/ui/src/components/atoms/IconButton.tsx"),UnitInput=__webpack_require__("../../packages/ui/src/components/cms/page-builder/panels/layout/UnitInput.tsx"),useLocalStrings=__webpack_require__("../../packages/ui/src/components/cms/page-builder/hooks/useLocalStrings.ts"),helpers=__webpack_require__("../../packages/ui/src/components/cms/page-builder/panels/layout/helpers.ts");function SizeControls({component,locked,handleResize,handleFullSize,errorKeys}){const t=(0,useLocalStrings.A)(),TOOLTIP_WIDTH=t("tooltip_width_hint"),TOOLTIP_HEIGHT=t("tooltip_height_hint"),PLACEHOLDER_WIDTH=t("placeholder_width"),PLACEHOLDER_HEIGHT=t("placeholder_height"),LABEL_OVERRIDE_ACTIVE=t("label_override_active"),LABEL_RESET=t("label_reset"),LABEL_FULL_WIDTH=t("label_full_width"),LABEL_FULL_HEIGHT=t("label_full_height"),cmp=component;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:["Desktop","Tablet","Mobile"].map(vp=>{var _component_,_component_1;return(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)(UnitInput.A,{componentId:component.id,label:t("width_label_template",{vp:t("Desktop"===vp?"device_desktop":"Tablet"===vp?"device_tablet":"device_mobile")}),labelSuffix:(0,jsx_runtime.jsx)(atoms.m_,{text:TOOLTIP_WIDTH,children:(0,jsx_runtime.jsx)(IconButton.A,{"aria-label":t("aria_explain_width_units"),size:"md",children:"?"})}),placeholder:PLACEHOLDER_WIDTH,value:null!==(_component_=component[`width${vp}`])&&void 0!==_component_?_component_:"",onChange:v=>handleResize(`width${vp}`,v),axis:"w",disabled:locked,cssProp:"width",extraError:null==errorKeys?void 0:errorKeys.has(`width${vp}`)}),(0,helpers.X)(cmp.width,cmp[`width${vp}`])&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,jsx_runtime.jsx)("span",{className:"rounded bg-amber-500/20 px-1 text-amber-700",children:LABEL_OVERRIDE_ACTIVE}),(0,jsx_runtime.jsx)("button",{type:"button",className:"underline inline-flex items-center justify-center min-h-10 min-w-10 px-2",onClick:()=>handleResize(`width${vp}`,""),children:LABEL_RESET})]}),(0,jsx_runtime.jsx)("div",{className:"flex gap-2",children:(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",disabled:locked,onClick:()=>handleFullSize(`width${vp}`),children:LABEL_FULL_WIDTH})}),(0,jsx_runtime.jsx)(UnitInput.A,{componentId:component.id,label:t("height_label_template",{vp:t("Desktop"===vp?"device_desktop":"Tablet"===vp?"device_tablet":"device_mobile")}),labelSuffix:(0,jsx_runtime.jsx)(atoms.m_,{text:TOOLTIP_HEIGHT,children:(0,jsx_runtime.jsx)(IconButton.A,{"aria-label":t("aria_explain_height_units"),size:"md",children:"?"})}),placeholder:PLACEHOLDER_HEIGHT,value:null!==(_component_1=component[`height${vp}`])&&void 0!==_component_1?_component_1:"",onChange:v=>handleResize(`height${vp}`,v),axis:"h",disabled:locked,cssProp:"height",extraError:null==errorKeys?void 0:errorKeys.has(`height${vp}`)}),(0,helpers.X)(cmp.height,cmp[`height${vp}`])&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,jsx_runtime.jsx)("span",{className:"rounded bg-amber-500/20 px-1 text-amber-700",children:LABEL_OVERRIDE_ACTIVE}),(0,jsx_runtime.jsx)("button",{type:"button",className:"underline inline-flex items-center justify-center min-h-10 min-w-10 px-2",onClick:()=>handleResize(`height${vp}`,""),children:LABEL_RESET})]}),(0,jsx_runtime.jsx)("div",{className:"flex gap-2",children:(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",disabled:locked,onClick:()=>handleFullSize(`height${vp}`),children:LABEL_FULL_HEIGHT})})]},vp)})})}function PositionControls({component,locked,handleInput,handleResize,errorKeys}){const t=(0,useLocalStrings.A)();var _component_position,_component_dockX,_component_dockY,_component_top,_component_left,_component_right,_component_bottom;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(shadcn.l6,{value:null!==(_component_position=component.position)&&void 0!==_component_position?_component_position:"",onValueChange:v=>handleInput("position",v||void 0),children:[(0,jsx_runtime.jsx)(atoms.m_,{text:t("position_property_hint"),className:"block",children:(0,jsx_runtime.jsx)(shadcn.bq,{className:(null==errorKeys?void 0:errorKeys.has("position"))?"ring-1 ring-red-500":void 0,"aria-invalid":(null==errorKeys?void 0:errorKeys.has("position"))||void 0,children:(0,jsx_runtime.jsx)(shadcn.yv,{placeholder:t("position_label")})})}),(0,jsx_runtime.jsxs)(shadcn.gC,{children:[(0,jsx_runtime.jsx)(shadcn.eb,{value:"relative",children:"relative"}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"absolute",children:"absolute"})]})]}),"absolute"===component.position&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,jsx_runtime.jsxs)(shadcn.l6,{value:null!==(_component_dockX=component.dockX)&&void 0!==_component_dockX?_component_dockX:"left",onValueChange:v=>handleInput("dockX",v),children:[(0,jsx_runtime.jsx)(atoms.m_,{text:t("dock_x_hint"),children:(0,jsx_runtime.jsx)(shadcn.bq,{children:(0,jsx_runtime.jsx)(shadcn.yv,{placeholder:t("dock_x_label")})})}),(0,jsx_runtime.jsxs)(shadcn.gC,{children:[(0,jsx_runtime.jsx)(shadcn.eb,{value:"left",children:t("dock_left")}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"center",children:t("dock_center")}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"right",children:t("dock_right")})]})]}),(0,jsx_runtime.jsxs)(shadcn.l6,{value:null!==(_component_dockY=component.dockY)&&void 0!==_component_dockY?_component_dockY:"top",onValueChange:v=>handleInput("dockY",v),children:[(0,jsx_runtime.jsx)(atoms.m_,{text:t("dock_y_hint"),children:(0,jsx_runtime.jsx)(shadcn.bq,{children:(0,jsx_runtime.jsx)(shadcn.yv,{placeholder:t("dock_y_label")})})}),(0,jsx_runtime.jsxs)(shadcn.gC,{children:[(0,jsx_runtime.jsx)(shadcn.eb,{value:"top",children:t("dock_top")}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"center",children:t("dock_center")}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"bottom",children:t("dock_bottom")})]})]})]}),(0,jsx_runtime.jsx)(UnitInput.A,{componentId:component.id,label:t("offset_top_label"),placeholder:t("offset_placeholder"),value:null!==(_component_top=component.top)&&void 0!==_component_top?_component_top:"",onChange:v=>handleResize("top",v),axis:"h",disabled:locked,cssProp:"top",extraError:null==errorKeys?void 0:errorKeys.has("top")}),(0,jsx_runtime.jsx)(UnitInput.A,{componentId:component.id,label:t("offset_left_label"),placeholder:t("offset_placeholder"),value:null!==(_component_left=component.left)&&void 0!==_component_left?_component_left:"",onChange:v=>handleResize("left",v),axis:"w",disabled:locked,cssProp:"left",extraError:null==errorKeys?void 0:errorKeys.has("left")}),(0,jsx_runtime.jsx)(UnitInput.A,{componentId:component.id,label:t("offset_right_label"),placeholder:t("offset_placeholder"),value:null!==(_component_right=component.right)&&void 0!==_component_right?_component_right:"",onChange:v=>handleResize("right",v),axis:"w",disabled:locked,cssProp:"right",extraError:null==errorKeys?void 0:errorKeys.has("right")}),(0,jsx_runtime.jsx)(UnitInput.A,{componentId:component.id,label:t("offset_bottom_label"),placeholder:t("offset_placeholder"),value:null!==(_component_bottom=component.bottom)&&void 0!==_component_bottom?_component_bottom:"",onChange:v=>handleResize("bottom",v),axis:"h",disabled:locked,cssProp:"bottom",extraError:null==errorKeys?void 0:errorKeys.has("bottom")}),(()=>{const isPinnedLeft=!!component.left,isPinnedRight=!!component.right,isPinnedTop=!!component.top,isPinnedBottom=!!component.bottom;return(0,jsx_runtime.jsxs)("div",{className:"mt-1 grid grid-cols-2 gap-2",children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:isPinnedLeft?"default":"outline",disabled:locked,onClick:()=>{try{const el=document.querySelector(`[data-component-id="${component.id}"]`);var _el_offsetParent,_ref;const parent=null!==(_ref=null!==(_el_offsetParent=null==el?void 0:el.offsetParent)&&void 0!==_el_offsetParent?_el_offsetParent:null==el?void 0:el.parentElement)&&void 0!==_ref?_ref:null;if(!el||!parent)return;const rect=el.getBoundingClientRect(),pRect=parent.getBoundingClientRect(),left=Math.round(rect.left-pRect.left);handleInput("dockX","left"),handleResize("left",`${left}px`),handleResize("right","")}catch(e){}},"aria-label":t("pin_left"),children:t("pin_left")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:isPinnedRight?"default":"outline",disabled:locked,onClick:()=>{try{const el=document.querySelector(`[data-component-id="${component.id}"]`);var _el_offsetParent,_ref;const parent=null!==(_ref=null!==(_el_offsetParent=null==el?void 0:el.offsetParent)&&void 0!==_el_offsetParent?_el_offsetParent:null==el?void 0:el.parentElement)&&void 0!==_ref?_ref:null;if(!el||!parent)return;const rect=el.getBoundingClientRect(),pRect=parent.getBoundingClientRect(),right=Math.round(pRect.right-rect.right);handleInput("dockX","right"),handleResize("right",`${right}px`),handleResize("left","")}catch(e){}},"aria-label":t("pin_right"),children:t("pin_right")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:isPinnedTop?"default":"outline",disabled:locked,onClick:()=>{try{const el=document.querySelector(`[data-component-id="${component.id}"]`);var _el_offsetParent,_ref;const parent=null!==(_ref=null!==(_el_offsetParent=null==el?void 0:el.offsetParent)&&void 0!==_el_offsetParent?_el_offsetParent:null==el?void 0:el.parentElement)&&void 0!==_ref?_ref:null;if(!el||!parent)return;const rect=el.getBoundingClientRect(),pRect=parent.getBoundingClientRect(),top=Math.round(rect.top-pRect.top);handleInput("dockY","top"),handleResize("top",`${top}px`),handleResize("bottom","")}catch(e){}},"aria-label":t("pin_top"),children:t("pin_top")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:isPinnedBottom?"default":"outline",disabled:locked,onClick:()=>{try{const el=document.querySelector(`[data-component-id="${component.id}"]`);var _el_offsetParent,_ref;const parent=null!==(_ref=null!==(_el_offsetParent=null==el?void 0:el.offsetParent)&&void 0!==_el_offsetParent?_el_offsetParent:null==el?void 0:el.parentElement)&&void 0!==_ref?_ref:null;if(!el||!parent)return;const rect=el.getBoundingClientRect(),pRect=parent.getBoundingClientRect(),bottom=Math.round(pRect.bottom-rect.bottom);handleInput("dockY","bottom"),handleResize("bottom",`${bottom}px`),handleResize("top","")}catch(e){}},"aria-label":t("pin_bottom"),children:t("pin_bottom")})]}),(0,jsx_runtime.jsxs)("div",{className:"flex flex-wrap justify-end gap-2",children:[(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",disabled:locked,onClick:()=>{try{const el=document.querySelector(`[data-component-id="${component.id}"]`);var _el_offsetParent,_ref;const parent=null!==(_ref=null!==(_el_offsetParent=null==el?void 0:el.offsetParent)&&void 0!==_el_offsetParent?_el_offsetParent:null==el?void 0:el.parentElement)&&void 0!==_ref?_ref:null;if(!el||!parent)return;const rect=el.getBoundingClientRect(),pRect=parent.getBoundingClientRect(),left=Math.round(rect.left-pRect.left),right=Math.round(pRect.right-rect.right);handleInput("dockX","left"),handleResize("left",`${left}px`),handleResize("right",`${right}px`),handleInput("width",void 0)}catch(e){}},"aria-label":t("aria_stretch_horizontally"),children:t("stretch_x")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"outline",disabled:locked,onClick:()=>{try{const el=document.querySelector(`[data-component-id="${component.id}"]`);var _el_offsetParent,_ref;const parent=null!==(_ref=null!==(_el_offsetParent=null==el?void 0:el.offsetParent)&&void 0!==_el_offsetParent?_el_offsetParent:null==el?void 0:el.parentElement)&&void 0!==_ref?_ref:null;if(!el||!parent)return;const rect=el.getBoundingClientRect(),pRect=parent.getBoundingClientRect(),top=Math.round(rect.top-pRect.top),bottom=Math.round(pRect.bottom-rect.bottom);handleInput("dockY","top"),handleResize("top",`${top}px`),handleResize("bottom",`${bottom}px`),handleInput("height",void 0)}catch(e){}},"aria-label":t("aria_stretch_vertically"),children:t("stretch_y")})]})]})})()]})]})}SizeControls.__docgenInfo={description:"",methods:[],displayName:"SizeControls",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},locked:{required:!0,tsType:{name:"boolean"},description:""},handleResize:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, value: string) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},handleFullSize:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string) => void",signature:{arguments:[{type:{name:"string"},name:"field"}],return:{name:"void"}}},description:""},errorKeys:{required:!1,tsType:{name:"Set",elements:[{name:"string"}],raw:"Set<string>"},description:""}}},PositionControls.__docgenInfo={description:"",methods:[],displayName:"PositionControls",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},locked:{required:!0,tsType:{name:"boolean"},description:""},handleInput:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends keyof PageComponent>(field: K, value: PageComponent[K]) => void",signature:{arguments:[{type:{name:"K"},name:"field"},{type:{name:"z.infer[K]",raw:"PageComponent[K]"},name:"value"}],return:{name:"void"}}},description:""},handleResize:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, value: string) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},errorKeys:{required:!1,tsType:{name:"Set",elements:[{name:"string"}],raw:"Set<string>"},description:""}}};var Grid=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Grid.tsx");function StackingControls({component,editorFlags,onUpdateEditor,editorMap,updateEditorForId}){const t=(0,src.c3)(),cRec=component;return"children"in cRec||"columns"in cRec?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Grid.x,{cols:3,gap:2,children:["desktop","tablet","mobile"].map(dev=>{var _editorFlags_stackStrategy,_;return(0,jsx_runtime.jsxs)(shadcn.l6,{value:null!==(_=(null!=editorFlags?editorFlags:{})[`stack${dev.charAt(0).toUpperCase()+dev.slice(1)}`])&&void 0!==_?_:"mobile"===dev&&null!==(_editorFlags_stackStrategy=null==editorFlags?void 0:editorFlags.stackStrategy)&&void 0!==_editorFlags_stackStrategy?_editorFlags_stackStrategy:"default",onValueChange:v=>null==onUpdateEditor?void 0:onUpdateEditor({[`stack${dev.charAt(0).toUpperCase()+dev.slice(1)}`]:v}),children:[(0,jsx_runtime.jsx)(atoms.m_,{text:t(`Stacking on ${dev}`),className:"block",children:(0,jsx_runtime.jsx)(shadcn.bq,{children:(0,jsx_runtime.jsx)(shadcn.yv,{placeholder:t(`Stacking (${dev})`)})})}),(0,jsx_runtime.jsxs)(shadcn.gC,{children:[(0,jsx_runtime.jsx)(shadcn.eb,{value:"default",children:t("Default order")}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"reverse",children:t("Reverse")}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"custom",children:t("Custom")})]})]},`stack-${dev}`)})}),["desktop","tablet","mobile"].map(dev=>{var _editorFlags_stackStrategy,_;return"custom"===(null!==(_=(null!=editorFlags?editorFlags:{})[`stack${dev.charAt(0).toUpperCase()+dev.slice(1)}`])&&void 0!==_?_:"mobile"===dev&&null!==(_editorFlags_stackStrategy=null==editorFlags?void 0:editorFlags.stackStrategy)&&void 0!==_editorFlags_stackStrategy?_editorFlags_stackStrategy:"default")&&Array.isArray(cRec.children)?(0,jsx_runtime.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted-foreground",children:t(`Custom order on ${dev} (lower appears first)`)}),(null!==(_cRec_children=cRec.children)&&void 0!==_cRec_children?_cRec_children:[]).map((child,idx)=>{const childFlags=null==editorMap?void 0:editorMap[child.id],key=`order${dev.charAt(0).toUpperCase()+dev.slice(1)}`,val=null==childFlags?void 0:childFlags[key];return(0,jsx_runtime.jsx)(shadcn.pd,{type:"number",label:`${child.name||child.type}`,placeholder:String(idx),value:void 0===val?"":String(val),onChange:e=>{const v=""===e.target.value?void 0:Math.max(0,parseInt(e.target.value,10)||0);null==updateEditorForId||updateEditorForId(child.id,{[key]:v})}},`${child.id}-${dev}`)})]},`orders-${dev}`):null;var _cRec_children})]}):null}function SpacingControls({component,handleInput,handleResize,errorKeys}){const t=(0,src.c3)(),LABEL_MARGIN=t("cms.builder.spacing.margin"),LABEL_PADDING=t("cms.builder.spacing.padding"),LABEL_GAP=t("cms.builder.spacing.gap"),ERROR_MARGIN_INVALID=t("cms.builder.spacing.error.invalidMargin"),ERROR_PADDING_INVALID=t("cms.builder.spacing.error.invalidPadding"),PLACEHOLDER_REM=t("cms.builder.spacing.placeholder.rem"),cmp=component,VIEWPORTS=[{suffix:"Desktop",label:t("cms.builder.spacing.viewport.desktop")},{suffix:"Tablet",label:t("cms.builder.spacing.viewport.tablet")},{suffix:"Mobile",label:t("cms.builder.spacing.viewport.mobile")}];var _component_margin,_cssError,_component_padding,_cssError1,_component_gap;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[VIEWPORTS.map(({suffix,label})=>{var _component_,_cssError,_component_1,_cssError1;return(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)(shadcn.pd,{label:`${LABEL_MARGIN} (${label})`,placeholder:PLACEHOLDER_REM,value:null!==(_component_=component[`margin${suffix}`])&&void 0!==_component_?_component_:"",error:null!==(_cssError=(0,helpers.m)("margin",component[`margin${suffix}`]))&&void 0!==_cssError?_cssError:(null==errorKeys?void 0:errorKeys.has(`margin${suffix}`))?ERROR_MARGIN_INVALID:void 0,onChange:e=>handleResize(`margin${suffix}`,e.target.value)}),(0,helpers.X)(cmp.margin,cmp[`margin${suffix}`])&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,jsx_runtime.jsx)("span",{className:"rounded bg-amber-500/20 px-1 text-amber-700",children:t("cms.builder.override.activeTag")}),(0,jsx_runtime.jsx)("button",{type:"button",className:"underline inline-flex items-center justify-center min-h-10 min-w-10 px-2",onClick:()=>handleResize(`margin${suffix}`,""),children:t("actions.reset")})]}),(0,jsx_runtime.jsx)(shadcn.pd,{label:`${LABEL_PADDING} (${label})`,placeholder:PLACEHOLDER_REM,value:null!==(_component_1=component[`padding${suffix}`])&&void 0!==_component_1?_component_1:"",error:null!==(_cssError1=(0,helpers.m)("padding",component[`padding${suffix}`]))&&void 0!==_cssError1?_cssError1:(null==errorKeys?void 0:errorKeys.has(`padding${suffix}`))?ERROR_PADDING_INVALID:void 0,onChange:e=>handleResize(`padding${suffix}`,e.target.value)}),(0,helpers.X)(cmp.padding,cmp[`padding${suffix}`])&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,jsx_runtime.jsx)("span",{className:"rounded bg-amber-500/20 px-1 text-amber-700",children:t("cms.builder.override.activeTag")}),(0,jsx_runtime.jsx)("button",{type:"button",className:"underline inline-flex items-center justify-center min-h-10 min-w-10 px-2",onClick:()=>handleResize(`padding${suffix}`,""),children:t("actions.reset")})]})]},`spacing-${suffix}`)}),(0,jsx_runtime.jsx)(shadcn.pd,{label:LABEL_MARGIN,placeholder:PLACEHOLDER_REM,value:null!==(_component_margin=component.margin)&&void 0!==_component_margin?_component_margin:"",error:null!==(_cssError=(0,helpers.m)("margin",component.margin))&&void 0!==_cssError?_cssError:(null==errorKeys?void 0:errorKeys.has("margin"))?ERROR_MARGIN_INVALID:void 0,onChange:e=>handleInput("margin",e.target.value)}),(0,jsx_runtime.jsx)(shadcn.pd,{label:LABEL_PADDING,placeholder:PLACEHOLDER_REM,value:null!==(_component_padding=component.padding)&&void 0!==_component_padding?_component_padding:"",error:null!==(_cssError1=(0,helpers.m)("padding",component.padding))&&void 0!==_cssError1?_cssError1:(null==errorKeys?void 0:errorKeys.has("padding"))?ERROR_PADDING_INVALID:void 0,onChange:e=>handleInput("padding",e.target.value)}),"gap"in component&&(0,jsx_runtime.jsx)(shadcn.pd,{label:LABEL_GAP,placeholder:PLACEHOLDER_REM,value:null!==(_component_gap=component.gap)&&void 0!==_component_gap?_component_gap:"",error:(0,helpers.m)("gap",component.gap),onChange:e=>handleInput("gap",e.target.value)})]})}StackingControls.__docgenInfo={description:"",methods:[],displayName:"StackingControls",props:{editorFlags:{required:!1,tsType:{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  // Per-element responsive behavior (builder-only flag)\n  responsiveBehavior?: "none" | "scale-proportional";\n  // Legacy single strategy (mobile); kept for backwards-compat\n  stackStrategy?: "default" | "reverse" | "custom";\n  // Per-device stacking strategies\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  // Per-device custom orders on children\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"responsiveBehavior",value:{name:"union",raw:'"none" | "scale-proportional"',elements:[{name:"literal",value:'"none"'},{name:"literal",value:'"scale-proportional"'}],required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1}},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}}]}},description:""},onUpdateEditor:{required:!1,tsType:{name:"signature",type:"function",raw:"(patch: Partial<EditorFlags>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  // Per-element responsive behavior (builder-only flag)\n  responsiveBehavior?: "none" | "scale-proportional";\n  // Legacy single strategy (mobile); kept for backwards-compat\n  stackStrategy?: "default" | "reverse" | "custom";\n  // Per-device stacking strategies\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  // Per-device custom orders on children\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"responsiveBehavior",value:{name:"union",raw:'"none" | "scale-proportional"',elements:[{name:"literal",value:'"none"'},{name:"literal",value:'"scale-proportional"'}],required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1}},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}}]}}],raw:"Partial<EditorFlags>"},name:"patch"}],return:{name:"void"}}},description:""},editorMap:{required:!1,tsType:{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},description:""},updateEditorForId:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: string, patch: Partial<EditorFlags>) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  // Per-element responsive behavior (builder-only flag)\n  responsiveBehavior?: "none" | "scale-proportional";\n  // Legacy single strategy (mobile); kept for backwards-compat\n  stackStrategy?: "default" | "reverse" | "custom";\n  // Per-device stacking strategies\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  // Per-device custom orders on children\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"responsiveBehavior",value:{name:"union",raw:'"none" | "scale-proportional"',elements:[{name:"literal",value:'"none"'},{name:"literal",value:'"scale-proportional"'}],required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1}},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}}]}}],raw:"Partial<EditorFlags>"},name:"patch"}],return:{name:"void"}}},description:""},component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""}}},SpacingControls.__docgenInfo={description:"",methods:[],displayName:"SpacingControls",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},handleInput:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends keyof PageComponent>(field: K, value: PageComponent[K]) => void",signature:{arguments:[{type:{name:"K"},name:"field"},{type:{name:"z.infer[K]",raw:"PageComponent[K]"},name:"value"}],return:{name:"void"}}},description:""},handleResize:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, value: string) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},errorKeys:{required:!1,tsType:{name:"Set",elements:[{name:"string"}],raw:"Set<string>"},description:""}}};var react=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js");function TabSlotControl({component,handleInput}){const t=(0,src.c3)(),[tabTitles,setTabTitles]=(0,react.useState)([]);var _component_slotKey,_component_slotKey1;return(0,react.useEffect)(()=>{try{const el="undefined"!=typeof document?document.querySelector(`[data-component-id="${component.id}"]`):null,parent=null==el?void 0:el.closest("[data-tab-titles]");if(!parent)return void setTabTitles([]);const raw=parent.getAttribute("data-tab-titles");if(!raw)return void setTabTitles([]);const titles=JSON.parse(raw);Array.isArray(titles)?setTabTitles(titles):setTabTitles([])}catch(e){setTabTitles([])}},[component.id]),tabTitles.length>0?(0,jsx_runtime.jsxs)(shadcn.l6,{value:null!==(_component_slotKey=component.slotKey)&&void 0!==_component_slotKey?_component_slotKey:"0",onValueChange:v=>handleInput("slotKey",v||void 0),children:[(0,jsx_runtime.jsx)(atoms.m_,{text:t("cms.tabSlot.tip.select"),className:"block",children:(0,jsx_runtime.jsx)(shadcn.bq,{children:(0,jsx_runtime.jsx)(shadcn.yv,{placeholder:t("cms.tabSlot.label")})})}),(0,jsx_runtime.jsx)(shadcn.gC,{children:tabTitles.map((title,i)=>({value:String(i),label:title||t("cms.tabs.default",{n:i+1})})).map(opt=>(0,jsx_runtime.jsx)(shadcn.eb,{value:opt.value,children:opt.label},`tabslot-${component.id}-${opt.value}`))})]}):(0,jsx_runtime.jsx)(shadcn.pd,{label:(0,jsx_runtime.jsxs)("span",{className:"flex items-center gap-1",children:[t("cms.tabSlot.label"),(0,jsx_runtime.jsx)(atoms.m_,{text:t("cms.tabSlot.tip.index"),children:"?"})]}),type:"number",min:0,value:null!==(_component_slotKey1=component.slotKey)&&void 0!==_component_slotKey1?_component_slotKey1:"",onChange:e=>handleInput("slotKey",""===e.target.value?void 0:String(e.target.value))})}function SectionSettings({component,locked,handleInput,handleResize}){const t=(0,src.c3)();if("Section"!==component.type)return null;const setField=(field,value)=>{handleInput(field,value)};var _component_contentWidth,_component_contentAlign,_component_gridCols,_component_gridGutter;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(UnitInput.A,{componentId:component.id,label:(0,jsx_runtime.jsxs)("span",{className:"flex items-center gap-1",children:[t("Content Max Width"),(0,jsx_runtime.jsx)(atoms.m_,{text:t("Max content width (px/%/rem). Leave empty for full width"),children:"?"})]}),placeholder:t("e.g. 1200px or 80%"),value:String(null!==(_component_contentWidth=component.contentWidth)&&void 0!==_component_contentWidth?_component_contentWidth:""),onChange:v=>setField("contentWidth",v||void 0),axis:"w",disabled:locked,cssProp:"max-width"}),["Desktop","Tablet","Mobile"].map(vp=>{var _component_;return(0,jsx_runtime.jsx)(UnitInput.A,{componentId:component.id,label:(0,jsx_runtime.jsxs)("span",{className:"flex items-center gap-1",children:[t(`Content Max Width (${vp})`),(0,jsx_runtime.jsx)(atoms.m_,{text:t("Viewport-specific max width overrides"),children:"?"})]}),placeholder:t("e.g. 1200px or 80%"),value:null!==(_component_=component[`contentWidth${vp}`])&&void 0!==_component_?_component_:"",onChange:v=>handleResize(`contentWidth${vp}`,v),axis:"w",disabled:locked,cssProp:"max-width"},`cw-${vp}`)}),["Desktop","Tablet","Mobile"].map(vp=>(0,helpers.X)(component.contentWidth,component[`contentWidth${vp}`])?(0,jsx_runtime.jsxs)("div",{className:"mt-1 flex items-center gap-2 text-xs",children:[(0,jsx_runtime.jsx)("span",{className:"rounded bg-amber-500/20 px-1 text-amber-700",children:t("Override active")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"ghost",onClick:()=>handleResize(`contentWidth${vp}`,""),children:t("Reset")})]},`cwo-${vp}`):null),(0,jsx_runtime.jsxs)(shadcn.l6,{value:null!==(_component_contentAlign=component.contentAlign)&&void 0!==_component_contentAlign?_component_contentAlign:"center",onValueChange:v=>setField("contentAlign",v),children:[(0,jsx_runtime.jsx)(atoms.m_,{text:t("Horizontal alignment for constrained content"),className:"block",children:(0,jsx_runtime.jsx)(shadcn.bq,{children:(0,jsx_runtime.jsx)(shadcn.yv,{placeholder:t("Content Align")})})}),(0,jsx_runtime.jsxs)(shadcn.gC,{children:[(0,jsx_runtime.jsx)(shadcn.eb,{value:"left",children:t("Left")}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"center",children:t("Center")}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"right",children:t("Right")})]})]}),["Desktop","Tablet","Mobile"].map(vp=>{var _component_;return(0,jsx_runtime.jsxs)(shadcn.l6,{value:null!==(_component_=component[`contentAlign${vp}`])&&void 0!==_component_?_component_:"",onValueChange:v=>setField(`contentAlign${vp}`,v||void 0),children:[(0,jsx_runtime.jsx)(atoms.m_,{text:t(`Alignment on ${vp.toLowerCase()}`),className:"block",children:(0,jsx_runtime.jsx)(shadcn.bq,{children:(0,jsx_runtime.jsx)(shadcn.yv,{placeholder:t(`Content Align (${vp})`)})})}),(0,jsx_runtime.jsxs)(shadcn.gC,{children:[(0,jsx_runtime.jsx)(shadcn.eb,{value:"left",children:t("Left")}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"center",children:t("Center")}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"right",children:t("Right")})]})]},`ca-${vp}`)}),["Desktop","Tablet","Mobile"].map(vp=>(0,helpers.X)(component.contentAlign,component[`contentAlign${vp}`])?(0,jsx_runtime.jsxs)("div",{className:"mt-1 flex items-center gap-2 text-xs",children:[(0,jsx_runtime.jsx)("span",{className:"rounded bg-amber-500/20 px-1 text-amber-700",children:t("Override active")}),(0,jsx_runtime.jsx)(shadcn.$n,{type:"button",variant:"ghost",onClick:()=>setField(`contentAlign${vp}`,void 0),children:t("Reset")})]},`cao-${vp}`):null),(0,jsx_runtime.jsx)(shadcn.pd,{label:(0,jsx_runtime.jsxs)("span",{className:"flex items-center gap-1",children:[t("Section Grid Columns"),(0,jsx_runtime.jsx)(atoms.m_,{text:t("Override grid columns for this section"),children:"?"})]}),type:"number",min:1,max:24,value:null!==(_component_gridCols=component.gridCols)&&void 0!==_component_gridCols?_component_gridCols:"",onChange:e=>setField("gridCols",""===e.target.value?void 0:Number(e.target.value))}),(0,jsx_runtime.jsx)(shadcn.pd,{label:(0,jsx_runtime.jsxs)("span",{className:"flex items-center gap-1",children:[t("Section Grid Gutter"),(0,jsx_runtime.jsx)(atoms.m_,{text:t("Column gap for grid overlay (e.g. 16px)"),children:"?"})]}),placeholder:t("e.g. 16px"),value:null!==(_component_gridGutter=component.gridGutter)&&void 0!==_component_gridGutter?_component_gridGutter:"",onChange:e=>setField("gridGutter",e.target.value||void 0)}),(0,jsx_runtime.jsxs)(shadcn.l6,{value:component.gridSnap?"on":"off",onValueChange:v=>setField("gridSnap","on"===v),children:[(0,jsx_runtime.jsx)(atoms.m_,{text:t("Enable snapping to grid for children in this section"),className:"block",children:(0,jsx_runtime.jsx)(shadcn.bq,{children:(0,jsx_runtime.jsx)(shadcn.yv,{placeholder:t("Section Snap")})})}),(0,jsx_runtime.jsxs)(shadcn.gC,{children:[(0,jsx_runtime.jsx)(shadcn.eb,{value:"off",children:t("Snap off")}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"on",children:t("Snap on")})]})]})]})}function GridPlacementControls({component,handleInput}){const t=(0,src.c3)();var _component_gridArea,_component_gridColumn,_component_gridRow;return(0,jsx_runtime.jsxs)("div",{className:"mt-2 border-t pt-2",children:[(0,jsx_runtime.jsx)("div",{className:"mb-1 text-xs font-semibold text-muted-foreground",children:t("cms.builder.layout.gridPlacement.title")}),(0,jsx_runtime.jsx)(shadcn.pd,{label:(0,jsx_runtime.jsxs)("span",{className:"flex items-center gap-1",children:[t("cms.builder.layout.gridArea.label"),(0,jsx_runtime.jsx)(atoms.m_,{text:t("cms.builder.layout.gridArea.tooltip"),children:"?"})]}),placeholder:t("cms.builder.layout.gridArea.placeholder"),value:null!==(_component_gridArea=component.gridArea)&&void 0!==_component_gridArea?_component_gridArea:"",error:(0,helpers.m)("grid-area",component.gridArea),onChange:e=>handleInput("gridArea",e.target.value||void 0)}),(0,jsx_runtime.jsx)(shadcn.pd,{label:(0,jsx_runtime.jsxs)("span",{className:"flex items-center gap-1",children:[t("cms.builder.layout.gridColumn.label"),(0,jsx_runtime.jsx)(atoms.m_,{text:t("cms.builder.layout.gridColumn.tooltip"),children:"?"})]}),placeholder:t("cms.builder.layout.gridColumn.placeholder"),value:null!==(_component_gridColumn=component.gridColumn)&&void 0!==_component_gridColumn?_component_gridColumn:"",error:(0,helpers.m)("grid-column",component.gridColumn),onChange:e=>handleInput("gridColumn",e.target.value||void 0)}),(0,jsx_runtime.jsx)(shadcn.pd,{label:(0,jsx_runtime.jsxs)("span",{className:"flex items-center gap-1",children:[t("cms.builder.layout.gridRow.label"),(0,jsx_runtime.jsx)(atoms.m_,{text:t("cms.builder.layout.gridRow.tooltip"),children:"?"})]}),placeholder:t("cms.builder.layout.gridRow.placeholder"),value:null!==(_component_gridRow=component.gridRow)&&void 0!==_component_gridRow?_component_gridRow:"",error:(0,helpers.m)("grid-row",component.gridRow),onChange:e=>handleInput("gridRow",e.target.value||void 0)})]})}function ContainerQueryControls({component,handleInput}){const t=(0,src.c3)();var _component_containerType,_component_containerName;return(0,jsx_runtime.jsxs)("div",{className:"mt-2 border-t pt-2",children:[(0,jsx_runtime.jsx)("div",{className:"mb-1 text-xs font-semibold text-muted-foreground",children:t("cms.builder.layout.containerQueries.title")}),(0,jsx_runtime.jsxs)(shadcn.l6,{value:null!==(_component_containerType=component.containerType)&&void 0!==_component_containerType?_component_containerType:"",onValueChange:v=>handleInput("containerType","__default__"===v?void 0:v),children:[(0,jsx_runtime.jsx)(atoms.m_,{text:t("cms.builder.layout.containerType.tooltip"),className:"block",children:(0,jsx_runtime.jsx)(shadcn.bq,{children:(0,jsx_runtime.jsx)(shadcn.yv,{placeholder:t("cms.builder.layout.containerType.placeholder")})})}),(0,jsx_runtime.jsxs)(shadcn.gC,{children:[(0,jsx_runtime.jsx)(shadcn.eb,{value:"__default__",children:t("cms.builder.layout.containerType.option.default")}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"size",children:t("cms.builder.layout.containerType.option.size")}),(0,jsx_runtime.jsx)(shadcn.eb,{value:"inline-size",children:t("cms.builder.layout.containerType.option.inlineSize")})]})]}),(0,jsx_runtime.jsx)(shadcn.pd,{label:(0,jsx_runtime.jsxs)("span",{className:"flex items-center gap-1",children:[t("cms.builder.layout.containerName.label"),(0,jsx_runtime.jsx)(atoms.m_,{text:t("cms.builder.layout.containerName.tooltip"),children:"?"})]}),placeholder:t("cms.builder.layout.containerName.placeholder"),value:null!==(_component_containerName=component.containerName)&&void 0!==_component_containerName?_component_containerName:"",onChange:e=>handleInput("containerName",e.target.value||void 0)})]})}function LayoutPanel({component,handleInput,handleResize,handleFullSize,editorFlags,onUpdateEditor,editorMap,updateEditorForId,errorKeys}){const t=(0,src.c3)();var _editorFlags_locked,_ref;const effLocked=null!==(_ref=null!==(_editorFlags_locked=null==editorFlags?void 0:editorFlags.locked)&&void 0!==_editorFlags_locked?_editorFlags_locked:component.locked)&&void 0!==_ref&&_ref;var _ref1;return(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)(ZIndexControls,{locked:effLocked,editorFlags,onUpdateEditor}),(0,jsx_runtime.jsx)(SizeControls,{component,locked:effLocked,handleResize,handleFullSize,errorKeys}),(0,jsx_runtime.jsx)(PositionControls,{component,locked:effLocked,handleInput,handleResize,errorKeys}),(0,jsx_runtime.jsx)(StackingControls,{component,editorFlags,onUpdateEditor,editorMap,updateEditorForId}),(0,jsx_runtime.jsx)(SpacingControls,{component,handleInput,handleResize,errorKeys}),(0,jsx_runtime.jsx)(TabSlotControl,{component,handleInput}),(0,jsx_runtime.jsx)(SectionSettings,{component,locked:effLocked,handleInput,handleResize}),(0,jsx_runtime.jsx)(GridPlacementControls,{component,handleInput}),(0,jsx_runtime.jsx)(ContainerQueryControls,{component,handleInput}),(0,jsx_runtime.jsxs)("div",{className:"mt-2 border-t pt-2",children:[(0,jsx_runtime.jsx)("div",{className:"text-xs font-semibold text-muted-foreground",children:t("cms.builder.anchor.label")}),(0,jsx_runtime.jsx)(shadcn.pd,{label:t("cms.builder.anchor.idLabel"),placeholder:t("cms.builder.anchor.placeholder"),value:null!==(_ref1="anchorId"in component?component.anchorId:void 0)&&void 0!==_ref1?_ref1:"",onChange:e=>{const raw=e.target.value,trimmed=raw.trim().replace(/\s+/g,"-").replace(/[^A-Za-z0-9_-]/g,"");e.target.value=raw,handleInput("anchorId",trimmed||void 0)}}),(0,jsx_runtime.jsx)("div",{className:"mt-1 text-xs text-muted-foreground",children:t("cms.builder.anchor.hint")})]})]})}TabSlotControl.__docgenInfo={description:"",methods:[],displayName:"TabSlotControl",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},handleInput:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends keyof PageComponent>(field: K, value: PageComponent[K]) => void",signature:{arguments:[{type:{name:"K"},name:"field"},{type:{name:"z.infer[K]",raw:"PageComponent[K]"},name:"value"}],return:{name:"void"}}},description:""}}},SectionSettings.__docgenInfo={description:"",methods:[],displayName:"SectionSettings",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},locked:{required:!0,tsType:{name:"boolean"},description:""},handleInput:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends keyof PageComponent>(field: K, value: PageComponent[K]) => void",signature:{arguments:[{type:{name:"K"},name:"field"},{type:{name:"z.infer[K]",raw:"PageComponent[K]"},name:"value"}],return:{name:"void"}}},description:""},handleResize:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, value: string) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""}}},GridPlacementControls.__docgenInfo={description:"",methods:[],displayName:"GridPlacementControls",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},handleInput:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends keyof PageComponent>(field: K, value: PageComponent[K]) => void",signature:{arguments:[{type:{name:"K"},name:"field"},{type:{name:"z.infer[K]",raw:"PageComponent[K]"},name:"value"}],return:{name:"void"}}},description:""}}},ContainerQueryControls.__docgenInfo={description:"",methods:[],displayName:"ContainerQueryControls",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},handleInput:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends keyof PageComponent>(field: K, value: PageComponent[K]) => void",signature:{arguments:[{type:{name:"K"},name:"field"},{type:{name:"z.infer[K]",raw:"PageComponent[K]"},name:"value"}],return:{name:"void"}}},description:""}}},LayoutPanel.__docgenInfo={description:"",methods:[],displayName:"LayoutPanel",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},handleInput:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends keyof PageComponent>(\n  field: K,\n  value: PageComponent[K],\n) => void",signature:{arguments:[{type:{name:"K"},name:"field"},{type:{name:"z.infer[K]",raw:"PageComponent[K]"},name:"value"}],return:{name:"void"}}},description:""},handleResize:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, value: string) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},handleFullSize:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string) => void",signature:{arguments:[{type:{name:"string"},name:"field"}],return:{name:"void"}}},description:""},editorFlags:{required:!1,tsType:{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  // Per-element responsive behavior (builder-only flag)\n  responsiveBehavior?: "none" | "scale-proportional";\n  // Legacy single strategy (mobile); kept for backwards-compat\n  stackStrategy?: "default" | "reverse" | "custom";\n  // Per-device stacking strategies\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  // Per-device custom orders on children\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"responsiveBehavior",value:{name:"union",raw:'"none" | "scale-proportional"',elements:[{name:"literal",value:'"none"'},{name:"literal",value:'"scale-proportional"'}],required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1}},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}}]}},description:""},onUpdateEditor:{required:!1,tsType:{name:"signature",type:"function",raw:"(patch: Partial<EditorFlags>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  // Per-element responsive behavior (builder-only flag)\n  responsiveBehavior?: "none" | "scale-proportional";\n  // Legacy single strategy (mobile); kept for backwards-compat\n  stackStrategy?: "default" | "reverse" | "custom";\n  // Per-device stacking strategies\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  // Per-device custom orders on children\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"responsiveBehavior",value:{name:"union",raw:'"none" | "scale-proportional"',elements:[{name:"literal",value:'"none"'},{name:"literal",value:'"scale-proportional"'}],required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1}},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}}]}}],raw:"Partial<EditorFlags>"},name:"patch"}],return:{name:"void"}}},description:""},editorMap:{required:!1,tsType:{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},description:""},updateEditorForId:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: string, patch: Partial<EditorFlags>) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  // Per-element responsive behavior (builder-only flag)\n  responsiveBehavior?: "none" | "scale-proportional";\n  // Legacy single strategy (mobile); kept for backwards-compat\n  stackStrategy?: "default" | "reverse" | "custom";\n  // Per-device stacking strategies\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  // Per-device custom orders on children\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"responsiveBehavior",value:{name:"union",raw:'"none" | "scale-proportional"',elements:[{name:"literal",value:'"none"'},{name:"literal",value:'"scale-proportional"'}],required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1}},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}}]}}],raw:"Partial<EditorFlags>"},name:"patch"}],return:{name:"void"}}},description:""},errorKeys:{required:!1,tsType:{name:"Set",elements:[{name:"string"}],raw:"Set<string>"},description:""}}}},"../../packages/ui/src/components/cms/page-builder/panels/LottieControls.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>LottieControls});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/i18n/src/index.ts");function LottieControls({component,handleInput}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_2__.c3)(),l=component,lottieUrl=l.lottieUrl,lottieAutoplay=l.lottieAutoplay,lottieLoop=l.lottieLoop,lottieSpeed=l.lottieSpeed,lottieTrigger=l.lottieTrigger;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{label:t("cms.lottie.url.label"),placeholder:t("cms.lottie.url.placeholder"),value:null!=lottieUrl?lottieUrl:"",onChange:e=>handleInput("lottieUrl",e.target.value||void 0)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"grid grid-cols-3 gap-2 items-end",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label",{className:"col-span-1 flex items-center justify-between rounded border border-border-3 bg-muted/30 px-3 py-2 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:t("cms.lottie.autoplay")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.Sc,{checked:!!lottieAutoplay,onCheckedChange:v=>handleInput("lottieAutoplay",Boolean(v))})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label",{className:"col-span-1 flex items-center justify-between rounded border border-border-3 bg-muted/30 px-3 py-2 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:t("cms.lottie.loop")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.Sc,{checked:!!lottieLoop,onCheckedChange:v=>handleInput("lottieLoop",Boolean(v))})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.pd,{type:"number",step:"0.1",min:"0.1",label:t("cms.lottie.speed"),placeholder:"1",value:null!=lottieSpeed?lottieSpeed:"",onChange:e=>handleInput("lottieSpeed",""===e.target.value?void 0:Number(e.target.value))})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.l6,{value:null!=lottieTrigger?lottieTrigger:"load",onValueChange:v=>handleInput("lottieTrigger",v),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.bq,{"aria-label":t("cms.lottie.trigger.aria"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.yv,{placeholder:t("cms.lottie.trigger.placeholder")})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.gC,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:"load",children:t("cms.lottie.trigger.onLoad")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:"in-view",children:t("cms.lottie.trigger.onInView")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:"hover",children:t("cms.lottie.trigger.onHover")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:"click",children:t("cms.lottie.trigger.onClick")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:"scroll",children:t("cms.lottie.trigger.scrollProgress")})]})]})]})}LottieControls.__docgenInfo={description:"",methods:[],displayName:"LottieControls",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},handleInput:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends keyof PageComponent>(field: K, value: PageComponent[K]) => void",signature:{arguments:[{type:{name:"K"},name:"field"},{type:{name:"z.infer[K]",raw:"PageComponent[K]"},name:"value"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/panels/TimelinePanel.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>TimelinePanel});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_EasingPresets__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/panels/EasingPresets.ts");function TimelinePanel({component,handleInput}){const timeline=component.timeline,steps=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{var _timeline_steps;return[...null!==(_timeline_steps=null==timeline?void 0:timeline.steps)&&void 0!==_timeline_steps?_timeline_steps:[]]},[null==timeline?void 0:timeline.steps]),trigger=null==timeline?void 0:timeline.trigger,loop=null==timeline?void 0:timeline.loop,update=patch=>{const next={...null!=timeline?timeline:{},...patch};Array.isArray(next.steps)&&(next.steps=next.steps.filter(s=>s&&Object.keys(s).length>0)),next.trigger||next.loop||next.steps&&0!==next.steps.length||next.name?handleInput("timeline",next):handleInput("timeline",void 0)},moveStep=(idx,dir)=>{const to=idx+dir;if(to<0||to>=steps.length)return;const next=[...steps],[s]=next.splice(idx,1);next.splice(to,0,s),update({steps:next})},editStep=(idx,patch)=>{const next=[...steps];next[idx]={...next[idx],...patch},update({steps:next})};var _timeline_name;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"grid grid-cols-3 gap-2 items-end",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.l6,{value:null!=trigger?trigger:"load",onValueChange:v=>update({trigger:v}),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.bq,{"aria-label":"Timeline Trigger",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.yv,{placeholder:"Trigger"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.gC,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.eb,{value:"load",children:"On Load"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.eb,{value:"in-view",children:"On In-View"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.eb,{value:"click",children:"On Click"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.eb,{value:"scroll",children:"Scroll Progress"})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label",{className:"col-span-1 flex items-center justify-between rounded border border-border-3 bg-muted/30 px-3 py-2 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:"Loop"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.Sc,{checked:!!loop,onCheckedChange:v=>update({loop:Boolean(v)})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.pd,{label:"Name (optional)",placeholder:"Hero entrance",value:null!==(_timeline_name=null==timeline?void 0:timeline.name)&&void 0!==_timeline_name?_timeline_name:"",onChange:e=>update({name:e.target.value||void 0})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[steps.map((s,idx)=>{var _s_at,_s_duration,_s_easing;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"rounded-md border border-border-3 bg-muted/10 p-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center justify-between pb-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"text-xs font-semibold",children:["Step ",idx+1]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.$n,{type:"button",variant:"outline",onClick:()=>moveStep(idx,-1),disabled:0===idx,children:"Up"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.$n,{type:"button",variant:"outline",onClick:()=>moveStep(idx,1),disabled:idx===steps.length-1,children:"Down"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.$n,{type:"button",variant:"destructive",onClick:()=>(idx=>{const next=steps.filter((_,i)=>i!==idx);update({steps:next})})(idx),children:"Remove"})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"grid grid-cols-6 gap-2",children:["scroll"===trigger?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.pd,{type:"number",step:"0.01",min:"0",max:"1",label:"At (0..1)",placeholder:"0.00",value:null!==(_s_at=s.at)&&void 0!==_s_at?_s_at:"",onChange:e=>editStep(idx,{at:""===e.target.value?void 0:Number(e.target.value)})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.pd,{type:"number",min:"0",label:"Duration (ms)",placeholder:"400",value:null!==(_s_duration=s.duration)&&void 0!==_s_duration?_s_duration:"",onChange:e=>editStep(idx,{duration:""===e.target.value?void 0:Math.max(0,Number(e.target.value))})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.l6,{value:null!==(_s_easing=s.easing)&&void 0!==_s_easing?_s_easing:"__none__",onValueChange:v=>editStep(idx,{easing:"__none__"===v?void 0:v}),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.bq,{"aria-label":`Easing step ${idx+1}`,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.yv,{placeholder:"Easing"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.gC,{children:_EasingPresets__WEBPACK_IMPORTED_MODULE_3__.S.map(e=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.eb,{value:e.value,children:e.label},e.value))})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.pd,{type:"number",step:"0.05",min:"0",max:"1",label:"Opacity",placeholder:"1",value:"number"==typeof s.opacity?s.opacity:"",onChange:e=>editStep(idx,{opacity:""===e.target.value?void 0:Number(e.target.value)})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.pd,{type:"number",step:"1",label:"X (px)",placeholder:"0",value:"number"==typeof s.x?s.x:"",onChange:e=>editStep(idx,{x:""===e.target.value?void 0:Number(e.target.value)})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.pd,{type:"number",step:"1",label:"Y (px)",placeholder:"0",value:"number"==typeof s.y?s.y:"",onChange:e=>editStep(idx,{y:""===e.target.value?void 0:Number(e.target.value)})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.pd,{type:"number",step:"0.01",min:"0",label:"Scale",placeholder:"1",value:"number"==typeof s.scale?s.scale:"",onChange:e=>editStep(idx,{scale:""===e.target.value?void 0:Number(e.target.value)})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.pd,{type:"number",step:"1",label:"Rotate (deg)",placeholder:"0",value:"number"==typeof s.rotate?s.rotate:"",onChange:e=>editStep(idx,{rotate:""===e.target.value?void 0:Number(e.target.value)})})]})]},(s=>{var _s_at,_ref,_s_easing;return[null!==(_ref=null!==(_s_at=s.at)&&void 0!==_s_at?_s_at:s.duration)&&void 0!==_ref?_ref:"na",null!==(_s_easing=s.easing)&&void 0!==_s_easing?_s_easing:"none","number"==typeof s.opacity?s.opacity:"na","number"==typeof s.x?s.x:"na","number"==typeof s.y?s.y:"na","number"==typeof s.scale?s.scale:"na","number"==typeof s.rotate?s.rotate:"na"].join(":")})(s))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.$n,{type:"button",variant:"outline",onClick:()=>{const next=[...steps,{duration:400,easing:"ease",opacity:1,x:0,y:0,scale:1,rotate:0}];update({steps:next})},children:"Add Step"})]})]})}TimelinePanel.__docgenInfo={description:"",methods:[],displayName:"TimelinePanel",props:{component:{required:!0,tsType:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},description:""},handleInput:{required:!0,tsType:{name:"signature",type:"function",raw:"<K extends keyof PageComponent>(field: K, value: PageComponent[K]) => void",signature:{arguments:[{type:{name:"K"},name:"field"},{type:{name:"z.infer[K]",raw:"PageComponent[K]"},name:"value"}],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/components/cms/page-builder/panels/layout/UnitInput.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>UnitInput});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_atoms_primitives_Inline__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Inline.tsx"),_atoms_primitives_Stack__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../packages/ui/src/components/atoms/primitives/Stack.tsx"),_helpers__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/panels/layout/helpers.ts");const parseVal=v=>{const s=String(null!=v?v:"").trim();if(s.endsWith("%"))return{num:parseFloat(s.slice(0,-1))||0,unit:"%"};if(s.endsWith("rem"))return{num:parseFloat(s.slice(0,-3))||0,unit:"rem"};if(s.endsWith("px"))return{num:parseFloat(s.slice(0,-2))||0,unit:"px"};return{num:parseFloat(s)||0,unit:"px"}},fmt=(num,unit)=>`${Number.isFinite(num)?Math.round(num):0}${unit}`,convert=(componentId,num,from,to,axis)=>{if(from===to)return num;const basePx=function getRootFontPx(){const fs=getComputedStyle(document.documentElement).fontSize,n=parseFloat(fs||"16");return isFinite(n)&&n>0?n:16}(),parentSize=function getParentSize(componentId,axis){try{const el=document.querySelector(`[data-component-id="${componentId}"]`);var _el_offsetParent,_ref;const parent=null!==(_ref=null!==(_el_offsetParent=null==el?void 0:el.offsetParent)&&void 0!==_el_offsetParent?_el_offsetParent:null==el?void 0:el.parentElement)&&void 0!==_ref?_ref:null;return parent?"w"===axis?parent.clientWidth:parent.clientHeight:0}catch(e){return 0}}(componentId,axis)||0;let px=num;return"%"===from?px=parentSize>0?num/100*parentSize:num:"rem"===from&&(px=num*basePx),"%"===to?parentSize>0?px/parentSize*100:px:"rem"===to&&basePx>0?px/basePx:px};function UnitInput({componentId,label,labelSuffix,value,onChange,axis,placeholder,disabled,cssProp,extraError}){const{num,unit}=parseVal(value),cssErr=(0,_helpers__WEBPACK_IMPORTED_MODULE_5__.m)(cssProp,value),errorMsg=null!=cssErr?cssErr:extraError?`Invalid ${cssProp} value`:void 0,inputId=react__WEBPACK_IMPORTED_MODULE_1__.useId();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_primitives_Inline__WEBPACK_IMPORTED_MODULE_3__.c,{alignY:"end",gap:2,className:"w-full",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_primitives_Stack__WEBPACK_IMPORTED_MODULE_4__.B,{gap:1,className:"flex-1",children:[(label||labelSuffix)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_primitives_Inline__WEBPACK_IMPORTED_MODULE_3__.c,{gap:1,alignY:"center",children:[label?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:inputId,className:"block text-sm font-medium",children:label}):null,labelSuffix?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"pointer-events-auto",children:labelSuffix}):null]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.pd,{id:inputId,placeholder,value:null!=value?value:"",onChange:e=>onChange(e.target.value),disabled,error:errorMsg})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.l6,{value:unit,onValueChange:next=>{const nextUnit=next,nextNum=convert(componentId,num,unit,nextUnit,axis);onChange(fmt(nextNum,nextUnit))},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.bq,{className:"w-20",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.yv,{placeholder:"unit"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.gC,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.eb,{value:"px",children:"px"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.eb,{value:"%",children:"%"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.eb,{value:"rem",children:"rem"})]})]})]})}UnitInput.__docgenInfo={description:"",methods:[],displayName:"UnitInput",props:{componentId:{required:!0,tsType:{name:"string"},description:""},label:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},labelSuffix:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(v: string) => void",signature:{arguments:[{type:{name:"string"},name:"v"}],return:{name:"void"}}},description:""},axis:{required:!0,tsType:{name:"union",raw:'"w" | "h"',elements:[{name:"literal",value:'"w"'},{name:"literal",value:'"h"'}]},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},cssProp:{required:!0,tsType:{name:"string"},description:""},extraError:{required:!1,tsType:{name:"boolean"},description:""}}}},"../../packages/ui/src/components/cms/page-builder/panels/layout/helpers.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{X:()=>isOverridden,m:()=>cssError});const isOverridden=(base,val)=>{if(void 0===val||""===val)return!1;if(void 0===base||""===base)return!0;return String(base).trim()!==String(val).trim()},cssError=(prop,value)=>{var _globalThis_CSS;if(value&&"function"==typeof(null===(_globalThis_CSS=globalThis.CSS)||void 0===_globalThis_CSS?void 0:_globalThis_CSS.supports))return globalThis.CSS.supports(prop,value)?void 0:`Invalid ${prop} value`}},"../../packages/ui/src/components/cms/page-builder/previewImages.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{w:()=>getPalettePreview});const CANVAS={w:400,h:225};function hslFromToken(name,alpha){const raw=function readToken(name){try{return getComputedStyle(document.documentElement).getPropertyValue(name).trim()||null}catch(e){return null}}(name);if(!raw)return null;return`hsl(${raw}${"number"==typeof alpha?` / ${alpha}`:""})`}function getColors(){const bg=hslFromToken("--color-bg"),fg=hslFromToken("--color-fg");var _hslFromToken,_hslFromToken1,_hslFromToken2;return bg&&fg?{bg,stroke:null!==(_hslFromToken=hslFromToken("--color-fg",.45))&&void 0!==_hslFromToken?_hslFromToken:fg,fill:null!==(_hslFromToken1=hslFromToken("--color-fg",.18))&&void 0!==_hslFromToken1?_hslFromToken1:fg,overlay:null!==(_hslFromToken2=hslFromToken("--color-bg",.65))&&void 0!==_hslFromToken2?_hslFromToken2:bg}:{bg:"hsl(var(--color-bg))",stroke:"hsl(var(--color-fg) / 0.45)",fill:"hsl(var(--color-fg) / 0.18)",overlay:"hsl(var(--color-bg) / 0.8)"}}function svg(parts,size=CANVAS,c=getColors()){const body=parts.join(""),s=`<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" width="${size.w}" height="${size.h}" viewBox="0 0 ${size.w} ${size.h}" role="img" aria-label="preview"><rect x="0" y="0" width="100%" height="100%" fill="${c.bg}"/>`+body+"</svg>";return`data:image/svg+xml;utf8,${encodeURIComponent(s)}`}function rect(x,y,w,h,c,opts={}){var _opts_r;const r=null!==(_opts_r=opts.r)&&void 0!==_opts_r?_opts_r:8;var _opts_fill;var _opts_stroke;return`<rect x="${x}" y="${y}" width="${w}" height="${h}" rx="${r}" ry="${r}" fill="${null!==(_opts_fill=opts.fill)&&void 0!==_opts_fill?_opts_fill:c.fill}" stroke="${null!==(_opts_stroke=opts.stroke)&&void 0!==_opts_stroke?_opts_stroke:c.stroke}" stroke-width="1"/>`}function line(x1,y1,x2,y2,c){return`<line x1="${x1}" y1="${y1}" x2="${x2}" y2="${y2}" stroke="${c.stroke}" stroke-width="2" stroke-linecap="round"/>`}function textLines(x,y,w,rows,c,gap=10){const parts=[];for(let i=0;i<rows;i++){const lw=0===i?w:Math.max(40,w-24*i);parts.push(rect(x,y+i*(8+gap),lw,8,c,{r:4}))}return parts.join("")}function grid(x,y,cols,rows,cw,ch,c,gap=10){const parts=[];for(let r=0;r<rows;r++)for(let c2=0;c2<cols;c2++)parts.push(rect(x+c2*(cw+gap),y+r*(ch+gap),cw,ch,c));return parts.join("")}function genericSection(){const c=getColors();return svg([rect(20,24,CANVAS.w-40,48,c),rect(20,84,CANVAS.w-40,112,c),textLines(36,44,240,3,c,12)],CANVAS,c)}function testimonials(){const c=getColors();return svg([rect(22,36,166,140,c),rect(212,50,166,140,c),textLines(36,56,136,5,c,12),textLines(226,70,136,5,c,12)],CANVAS,c)}function productCarousel(){const c=getColors();return svg([grid(28,60,4,1,78,88,c,12)],CANVAS,c)}function headerBase(){const c=getColors(),bar=rect(10,16,CANVAS.w-20,28,c,{r:6}),nav=grid(180,20,4,1,36,20,c,12);return svg([bar,rect(20,20,80,20,c,{r:6}),nav],CANVAS,c)}function footerBase(){const c=getColors(),bar=rect(10,CANVAS.h-56,CANVAS.w-20,40,c,{r:6});return svg([grid(20,CANVAS.h-120,3,1,110,52,c,20),bar],CANVAS,c)}const GENERATORS={Section:genericSection,MultiColumn:function multiColumn(){const c=getColors();return svg([grid(20,28,3,1,110,160,c,20)],CANVAS,c)},StackFlex:function stackFlex(){const c=getColors();return svg([rect(20,24,CANVAS.w-40,50,c),rect(20,84,CANVAS.w-40,50,c),rect(20,144,CANVAS.w-40,50,c)],CANVAS,c)},Grid:function gridContainer(){const c=getColors();return svg([grid(20,28,4,2,80,68,c,12)],CANVAS,c)},CarouselContainer:function carouselContainer(){const c=getColors();return svg([rect(20,60,CANVAS.w-40,100,c),grid(28,70,4,1,78,80,c,12)],CANVAS,c)},TabsAccordionContainer:function tabsAccordionContainer(){const c=getColors();return svg([grid(24,24,4,1,80,26,c,12),rect(20,64,CANVAS.w-40,130,c)],CANVAS,c)},Dataset:function dataset(){const c=getColors();return svg([grid(28,36,4,3,80,40,c,12)],CANVAS,c)},Repeater:function repeater(){const c=getColors();return svg([grid(24,28,1,3,CANVAS.w-48,52,c,12)],CANVAS,c)},Bind:function bind(){const c=getColors();return svg([rect(24,36,CANVAS.w-48,140,c),textLines(40,60,220,3,c,12),line(280,110,360,110,c),rect(340,92,40,36,c,{r:6})],CANVAS,c)},AnnouncementBar:function announcementBar(){const c=getColors();return svg([rect(16,24,CANVAS.w-32,36,c,{r:6}),textLines(28,36,CANVAS.w-60,2,c,10)],CANVAS,c)}};function getPalettePreview(type){const gen=GENERATORS[type];if(gen)return gen();const base=type.includes(":")?type.split(":")[0]:type,baseGen=GENERATORS[base];return baseGen?baseGen():genericSection()}Object.assign(GENERATORS,{HeroBanner:function heroBanner(){const c=getColors();return svg([rect(12,12,CANVAS.w-24,CANVAS.h-24,c,{r:10}),`<rect x="20" y="28" width="200" height="120" fill="${c.overlay}" stroke="${c.stroke}" stroke-width="1" rx="10"/>`,textLines(32,44,160,4,c,12),rect(32,112,96,16,c,{r:8})],CANVAS,c)},ValueProps:function valueProps(){const c=getColors();return svg([grid(34,40,3,1,72,72,c,44),textLines(34,120,72,2,c,8),textLines(150,120,72,2,c,8),textLines(266,120,72,2,c,8)],CANVAS,c)},ReviewsCarousel:productCarousel,ProductGrid:function productGrid(){const c=getColors();return svg([grid(20,20,3,2,100,90,c,12)],CANVAS,c)},ProductCarousel:productCarousel,RecommendationCarousel:productCarousel,FeaturedProduct:function featuredProduct(){const c=getColors();return svg([rect(24,28,180,140,c),textLines(220,36,160,5,c,12),rect(220,140,120,20,c,{r:8})],CANVAS,c)},ImageSlider:function imageSlider(){const c=getColors();return svg([rect(16,36,CANVAS.w-32,140,c),line(28,106,44,106,c)+line(28,106,36,98,c)+line(28,106,36,114,c),line(CANVAS.w-28,106,CANVAS.w-44,106,c)+line(CANVAS.w-28,106,CANVAS.w-36,98,c)+line(CANVAS.w-28,106,CANVAS.w-36,114,c)],CANVAS,c)},CollectionList:function collectionList(){const c=getColors();return svg([grid(24,28,1,4,CANVAS.w-48,36,c,12)],CANVAS,c)},Gallery:function gallery(){const c=getColors();return svg([rect(16,50,CANVAS.w-32,120,c),grid(28,170,6,1,50,36,c,12)],CANVAS,c)},Lookbook:function lookbook(){const c=getColors();return svg([grid(24,28,3,2,108,80,c,12)],CANVAS,c)},ContactForm:function contactForm(){const c=getColors();return svg([rect(24,36,CANVAS.w-48,140,c),...[rect(36,48,CANVAS.w-72,20,c,{r:6}),rect(36,78,CANVAS.w-72,20,c,{r:6}),rect(36,108,CANVAS.w-72,40,c,{r:6}),rect(36,154,120,20,c,{r:8})]],CANVAS,c)},ContactFormWithMap:function contactFormWithMap(){const c=getColors();return svg([rect(24,36,180,140,c),line(110,60,110,80,c)+line(110,80,120,95,c),rect(220,36,156,140,c),...[rect(232,48,132,20,c,{r:6}),rect(232,78,132,20,c,{r:6}),rect(232,108,132,20,c,{r:6}),rect(232,138,80,20,c,{r:8})]],CANVAS,c)},BlogListing:function blogListing(){const c=getColors();return svg([grid(24,36,2,2,170,80,c,20),...[textLines(28,42,160,2,c,8),textLines(222,42,160,2,c,8)]],CANVAS,c)},Testimonials:testimonials,TestimonialSlider:testimonials,MapBlock:function mapBlock(){const c=getColors();return svg([rect(24,28,CANVAS.w-48,150,c),line(200,60,200,146,c)+line(120,102,280,102,c)],CANVAS,c)},StoreLocatorBlock:function storeLocatorBlock(){const c=getColors();return svg([rect(24,28,200,150,c),grid(236,28,1,4,140,32,c,10)],CANVAS,c)},VideoBlock:function videoBlock(){const c=getColors();return svg([rect(24,28,CANVAS.w-48,150,c),line(180,86,210,102,c)+line(210,102,180,118,c)+line(180,86,180,118,c)],CANVAS,c)},FAQBlock:function faqBlock(){const c=getColors();return svg([grid(24,36,1,4,CANVAS.w-48,30,c,12)],CANVAS,c)},CountdownTimer:function countdownTimer(){const c=getColors();return svg([grid(40,80,4,1,70,60,c,24)],CANVAS,c)},SocialLinks:function socialLinks(){const c=getColors();return svg([grid(40,100,5,1,40,40,c,16)],CANVAS,c)},SocialFeed:function socialFeed(){const c=getColors();return svg([grid(24,24,3,2,108,90,c,12)],CANVAS,c)},SocialProof:function socialProof(){const c=getColors();return svg([grid(28,60,4,1,78,60,c,12)],CANVAS,c)},NewsletterSignup:function newsletter(){const c=getColors();return svg([rect(30,64,CANVAS.w-60,100,c),rect(48,100,220,20,c,{r:6}),rect(276,100,80,20,c,{r:6})],CANVAS,c)},SearchBar:function searchBar(){const c=getColors();return svg([rect(28,96,CANVAS.w-56,36,c,{r:18})],CANVAS,c)},PricingTable:function pricingTable(){const c=getColors();return svg([grid(28,40,3,1,110,140,c,16)],CANVAS,c)},Tabs:function tabs(){const c=getColors();return svg([grid(24,24,4,1,80,26,c,12),rect(20,64,CANVAS.w-40,130,c)],CANVAS,c)},ProductComparison:function productComparison(){const c=getColors();return svg([grid(24,36,4,4,80,32,c,10)],CANVAS,c)},GiftCardBlock:function giftCardBlock(){const c=getColors();return svg([rect(60,60,CANVAS.w-120,100,c,{r:12}),rect(80,90,CANVAS.w-160,16,c,{r:8})],CANVAS,c)},FormBuilderBlock:function formBuilderBlock(){const c=getColors();return svg([rect(24,36,CANVAS.w-48,140,c),grid(36,48,1,4,CANVAS.w-72,22,c,14)],CANVAS,c)},PopupModal:function popupModal(){const c=getColors();return svg([rect(0,0,CANVAS.w,CANVAS.h,c,{r:0,fill:c.overlay,stroke:c.overlay}),rect(80,42,CANVAS.w-160,CANVAS.h-84,c),textLines(100,62,CANVAS.w-200,4,c,12)],CANVAS,c)},ProductBundle:function productBundle(){const c=getColors();return svg([grid(24,36,3,1,110,120,c,16),rect(140,170,120,20,c,{r:8})],CANVAS,c)},ProductFilter:function productFilter(){const c=getColors();return svg([grid(24,32,4,2,80,24,c,12),grid(24,96,3,1,110,100,c,16)],CANVAS,c)},CurrencySelector:function currencySelector(){const c=getColors();return svg([rect(140,92,120,40,c,{r:8})],CANVAS,c)},RentalAvailabilitySection:function rentalAvailabilitySection(){const c=getColors();return svg([grid(36,40,7,4,44,28,c,8)],CANVAS,c)},RentalTermsSection:function rentalTermsSection(){const c=getColors();return svg([textLines(28,40,CANVAS.w-56,8,c,10)],CANVAS,c)},StructuredDataSection:function structuredDataSection(){const c=getColors();return svg([rect(24,32,CANVAS.w-48,150,c),textLines(40,48,CANVAS.w-80,6,c,12)],CANVAS,c)},ConsentSection:function consentSection(){const c=getColors();return svg([rect(24,140,CANVAS.w-48,40,c,{r:10}),rect(CANVAS.w-120,148,64,24,c,{r:12})],CANVAS,c)},AnalyticsPixelsSection:function analyticsPixelsSection(){const c=getColors();return svg([grid(28,40,3,2,100,40,c,10)],CANVAS,c)}}),Object.assign(GENERATORS,{HeaderSection:function headerSection(){return headerBase()},"HeaderSection:minimal":function headerSectionMinimal(){return headerBase()},"HeaderSection:centerLogo":function headerSectionCenterLogo(){const c=getColors();return svg([rect(10,16,CANVAS.w-20,28,c,{r:6}),rect((CANVAS.w-80)/2,20,80,20,c,{r:6}),grid(24,20,2,1,36,20,c,12),grid(CANVAS.w-24-84,20,2,1,36,20,c,12)],CANVAS,c)},"HeaderSection:splitUtilities":function headerSectionSplitUtilities(){const c=getColors(),bar=rect(10,16,CANVAS.w-20,28,c,{r:6}),nav=grid(100,20,3,1,50,20,c,10);return svg([bar,rect(20,20,60,20,c,{r:6}),nav,grid(CANVAS.w-24-108,20,3,1,28,20,c,12)],CANVAS,c)},"HeaderSection:transparent":function headerSectionTransparent(){const c=getColors();return svg([rect(12,12,CANVAS.w-24,CANVAS.h-24,c,{r:10}),rect(10,16,CANVAS.w-20,28,c,{r:6,fill:c.overlay,stroke:c.stroke}),rect(20,20,80,20,c,{r:6}),grid(180,20,4,1,36,20,c,12)],CANVAS,c)},"HeaderSection:sticky":function headerSectionSticky(){const c=getColors();return svg([grid(20,60,3,2,110,60,c,12),rect(10,16,CANVAS.w-20,28,c,{r:6}),rect(20,20,80,20,c,{r:6}),grid(180,20,4,1,36,20,c,12)],CANVAS,c)}}),Object.assign(GENERATORS,{FooterSection:function footerSection(){return footerBase()},"FooterSection:simple":function footerSectionSimple(){const c=getColors();return svg([rect(10,CANVAS.h-56,CANVAS.w-20,40,c,{r:6})],CANVAS,c)},"FooterSection:multiColumn":function footerSectionMultiColumn(){return footerBase()},"FooterSection:newsletter":function footerSectionNewsletter(){const c=getColors();return svg([rect(40,CANVAS.h-120,CANVAS.w-80,60,c),rect(10,CANVAS.h-56,CANVAS.w-20,40,c,{r:6})],CANVAS,c)},"FooterSection:social":function footerSectionSocial(){const c=getColors();return svg([grid(40,CANVAS.h-110,5,1,40,40,c,16),rect(10,CANVAS.h-56,CANVAS.w-20,40,c,{r:6})],CANVAS,c)},"FooterSection:legalHeavy":function footerSectionLegalHeavy(){const c=getColors();return svg([textLines(24,CANVAS.h-120,CANVAS.w-48,4,c,10),rect(10,CANVAS.h-56,CANVAS.w-20,40,c,{r:6})],CANVAS,c)}})},"../../packages/ui/src/components/cms/page-builder/rules.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ai:()=>isTopLevelAllowed,WL:()=>canDropChild,gw:()=>getAllowedChildren});var _blocks__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../packages/ui/src/components/cms/blocks/index.ts");const SECTIONS_ONLY="true"===__webpack_require__("../../node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js").env.NEXT_PUBLIC_PB_SECTIONS_ONLY,ATOMS=new Set(Object.keys(_blocks__WEBPACK_IMPORTED_MODULE_0__.ll)),MOLECULES=new Set(Object.keys(_blocks__WEBPACK_IMPORTED_MODULE_0__.GF)),ORGANISMS=new Set(Object.keys(_blocks__WEBPACK_IMPORTED_MODULE_0__.I2)),CONTAINERS=new Set(Object.keys(_blocks__WEBPACK_IMPORTED_MODULE_0__.RR)),LAYOUT=new Set(Object.keys(_blocks__WEBPACK_IMPORTED_MODULE_0__._g)),OVERLAYS=new Set(Object.keys(_blocks__WEBPACK_IMPORTED_MODULE_0__.ch)),CONTENT=new Set([...ATOMS,...MOLECULES,...ORGANISMS,...OVERLAYS]),set=list=>new Set(list),ALLOWED={ROOT:set(["Section",...SECTIONS_ONLY?[]:["Canvas"]]),Section:set(["MultiColumn","StackFlex","Grid","CarouselContainer","TabsAccordionContainer","Dataset","Repeater","Bind",...Array.from(CONTENT)]),Canvas:set(["MultiColumn","StackFlex","Grid","CarouselContainer","TabsAccordionContainer","Dataset","Repeater","Bind",...Array.from(CONTENT)]),MultiColumn:set(Array.from(CONTENT)),StackFlex:set(Array.from(CONTENT)),Grid:set(Array.from(CONTENT)),CarouselContainer:set(Array.from(CONTENT)),TabsAccordionContainer:set(Array.from(CONTENT)),Dataset:set(Array.from(CONTENT)),Repeater:set(Array.from(CONTENT)),Bind:set(Array.from(CONTENT))};function getAllowedChildren(parent){return ALLOWED[parent]?ALLOWED[parent]:CONTAINERS.has(parent)||LAYOUT.has(parent)?new Set(CONTENT):new Set}function canDropChild(parent,child){return getAllowedChildren(parent).has(child)}function isTopLevelAllowed(t){return canDropChild("ROOT",t)}},"../../packages/ui/src/components/cms/page-builder/state/exportComponents.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function exportComponents(list,editor,globals){const map=null!=editor?editor:{};return list.map(n=>{const flags=map[n.id],globalMeta=null==flags?void 0:flags.global,gid=null==globalMeta?void 0:globalMeta.id;let copy={...n};var _copy_children;gid&&globals&&globals[gid]&&(copy={...globals[gid],id:n.id}),globalMeta&&globalMeta.overrides&&"object"==typeof globalMeta.overrides&&Object.assign(copy,globalMeta.overrides),Array.isArray(null==flags?void 0:flags.hidden)&&flags.hidden.length>0&&(copy.hiddenBreakpoints=[...flags.hidden]),Array.isArray(null==flags?void 0:flags.hiddenDeviceIds)&&flags.hiddenDeviceIds.length>0&&(copy.hiddenDeviceIds=[...flags.hiddenDeviceIds]),"string"==typeof(null==flags?void 0:flags.stackStrategy)&&(copy.stackStrategy=flags.stackStrategy),"number"==typeof(null==flags?void 0:flags.orderMobile)&&(copy.orderMobile=flags.orderMobile);const children=null!==(_copy_children=copy.children)&&void 0!==_copy_children?_copy_children:n.children;return Array.isArray(children)&&(copy.children=exportComponents(children,editor,globals)),copy})}__webpack_require__.d(__webpack_exports__,{$:()=>exportComponents})},"../../packages/ui/src/components/cms/page-builder/state/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ft:()=>historyStateSchema,Ff:()=>reducer});var src=__webpack_require__("../../packages/types/src/index.ts"),types=__webpack_require__("../../node_modules/.pnpm/zod@3.25.73/node_modules/zod/v3/types.js");const layoutSchema=types.Ik({gridCols:types.ai().int().min(1).max(24).default(12),breakpoints:types.YO(types.Ik({id:types.Yj(),label:types.Yj(),min:types.ai().int().nonnegative().optional(),max:types.ai().int().nonnegative().optional()})).default([])}).strict().default({gridCols:12,breakpoints:[]}),editingSizeSchema=types.Ik({desktop:types.ai().int().min(320).max(1920).nullable().optional(),tablet:types.ai().int().min(320).max(1920).nullable().optional(),mobile:types.ai().int().min(320).max(1920).nullable().optional()}).partial(),editorFlagsSchema=types.Ik({name:types.Yj().optional(),locked:types.zM().optional(),zIndex:types.ai().int().optional(),hidden:types.YO(types.k5(["desktop","tablet","mobile"])).optional(),hiddenDeviceIds:types.YO(types.Yj()).optional(),stackStrategy:types.k5(["default","reverse","custom"]).optional(),stackDesktop:types.k5(["default","reverse","custom"]).optional(),stackTablet:types.k5(["default","reverse","custom"]).optional(),stackMobile:types.k5(["default","reverse","custom"]).optional(),orderDesktop:types.ai().int().nonnegative().optional(),orderTablet:types.ai().int().nonnegative().optional(),orderMobile:types.ai().int().nonnegative().optional(),global:types.Ik({id:types.Yj(),overrides:types.L5().optional(),pinned:types.zM().optional(),editingSize:editingSizeSchema.optional()}).optional()}),historyStateSchema=types.Ik({past:types.YO(types.YO(src.Wd)),present:types.YO(src.Wd),future:types.YO(types.YO(src.Wd))}).merge(layoutSchema.removeDefault()).extend({editor:types.g1(editorFlagsSchema).default({})}).strict().default({past:[],present:[],future:[],gridCols:12,editor:{}});function commit(state,next){return next===state.present?state:{past:[...state.past,state.present],present:next,future:[],gridCols:state.gridCols,...void 0!==state.editor?{editor:state.editor}:{}}}var addComponent=__webpack_require__("../../packages/ui/src/components/cms/page-builder/state/layout/utils/addComponent.ts");var moveComponent=__webpack_require__("../../packages/ui/src/components/cms/page-builder/state/layout/utils/moveComponent.ts");function removeComponent(list,id){return list.map(c=>"children"in c&&Array.isArray(c.children)?{...c,children:removeComponent(c.children,id)}:c).filter(c=>c.id!==id)}function remove(state,action){return commit(state,removeComponent(state.present,action.id))}var browser=__webpack_require__("../../node_modules/.pnpm/ulid@3.0.1/node_modules/ulid/dist/browser/index.js");function cloneWithNewIds(component){const copy={...component,id:(0,browser.Z0)()},childList=component.children;return Array.isArray(childList)&&(copy.children=childList.map(child=>cloneWithNewIds(child))),copy}function duplicateComponent(list,id){let duplicated=!1;const result=[];for(const c of list){if(!duplicated&&c.id===id){const clone=cloneWithNewIds(c);result.push(c,clone),duplicated=!0;continue}if(!duplicated){const childList=c.children;if(Array.isArray(childList)){const children=duplicateComponent(childList,id);if(children!==childList){result.push({...c,children}),duplicated=!0;continue}}}result.push(c)}return duplicated?result:list}function duplicate(state,action){return commit(state,duplicateComponent(state.present,action.id))}function updateComponent(list,id,patch){const numericFields=["minItems","maxItems","columns","desktopItems","tabletItems","mobileItems","zIndex"],normalized={...patch};for(const key of numericFields){const val=patch[key];if("string"==typeof val){const num=Number(val);normalized[key]=Number.isNaN(num)?void 0:num}}return list.map(c=>c.id===id?{...c,...normalized}:"children"in c&&Array.isArray(c.children)?{...c,children:updateComponent(c.children,id,normalized)}:c)}function update(state,action){return commit(state,updateComponent(state.present,action.id,action.patch))}function resizeComponent(list,id,patch){return list.map(c=>c.id===id?{...c,...patch}:"children"in c&&Array.isArray(c.children)?{...c,children:resizeComponent(c.children,id,patch)}:c)}function resize(state,action){const normalize=v=>{if(void 0===v)return;const trimmed=v.trim();if(""===trimmed)return;const num=Number(trimmed);return Number.isNaN(num)||String(num)!==trimmed?trimmed:`${trimmed}px`},patch={},width=normalize(action.width),height=normalize(action.height),left=normalize(action.left),top=normalize(action.top),right=normalize(action.right),bottom=normalize(action.bottom),leftDesktop=normalize(action.leftDesktop),leftTablet=normalize(action.leftTablet),leftMobile=normalize(action.leftMobile),topDesktop=normalize(action.topDesktop),topTablet=normalize(action.topTablet),topMobile=normalize(action.topMobile),widthDesktop=normalize(action.widthDesktop),widthTablet=normalize(action.widthTablet),widthMobile=normalize(action.widthMobile),heightDesktop=normalize(action.heightDesktop),heightTablet=normalize(action.heightTablet),heightMobile=normalize(action.heightMobile),marginDesktop=normalize(action.marginDesktop),marginTablet=normalize(action.marginTablet),marginMobile=normalize(action.marginMobile),paddingDesktop=normalize(action.paddingDesktop),paddingTablet=normalize(action.paddingTablet),paddingMobile=normalize(action.paddingMobile);return void 0!==width&&(patch.width=width),void 0!==height&&(patch.height=height),void 0!==left&&(patch.left=left),void 0!==top&&(patch.top=top),void 0!==right&&(patch.right=right),void 0!==bottom&&(patch.bottom=bottom),void 0!==leftDesktop&&(patch.leftDesktop=leftDesktop),void 0!==leftTablet&&(patch.leftTablet=leftTablet),void 0!==leftMobile&&(patch.leftMobile=leftMobile),void 0!==topDesktop&&(patch.topDesktop=topDesktop),void 0!==topTablet&&(patch.topTablet=topTablet),void 0!==topMobile&&(patch.topMobile=topMobile),void 0!==widthDesktop&&(patch.widthDesktop=widthDesktop),void 0!==widthTablet&&(patch.widthTablet=widthTablet),void 0!==widthMobile&&(patch.widthMobile=widthMobile),void 0!==heightDesktop&&(patch.heightDesktop=heightDesktop),void 0!==heightTablet&&(patch.heightTablet=heightTablet),void 0!==heightMobile&&(patch.heightMobile=heightMobile),void 0!==marginDesktop&&(patch.marginDesktop=marginDesktop),void 0!==marginTablet&&(patch.marginTablet=marginTablet),void 0!==marginMobile&&(patch.marginMobile=marginMobile),void 0!==paddingDesktop&&(patch.paddingDesktop=paddingDesktop),void 0!==paddingTablet&&(patch.paddingTablet=paddingTablet),void 0!==paddingMobile&&(patch.paddingMobile=paddingMobile),commit(state,resizeComponent(state.present,action.id,patch))}function reducer(state,action){switch(action.type){case"undo":return function undo(state){const previous=state.past.at(-1);return previous?{past:state.past.slice(0,-1),present:previous,future:[state.present,...state.future],gridCols:state.gridCols,...void 0!==state.editor?{editor:state.editor}:{}}:state}(state);case"redo":return function redo(state){const next=state.future[0];return next?{past:[...state.past,state.present],present:next,future:state.future.slice(1),gridCols:state.gridCols,...void 0!==state.editor?{editor:state.editor}:{}}:state}(state);case"set-grid-cols":return function setGridCols(state,action){return{...state,gridCols:action.gridCols}}(state,action);case"set-breakpoints":return function setBreakpoints(state,action){return{...state,breakpoints:[...action.breakpoints]}}(state,action);case"add":return function add(state,action){return commit(state,(0,addComponent.X)(state.present,action.parentId,action.index,action.component))}(state,action);case"move":return function move(state,action){return commit(state,(0,moveComponent.p)(state.present,action.from,action.to))}(state,action);case"remove":return remove(state,action);case"duplicate":return duplicate(state,action);case"update":return update(state,action);case"resize":return resize(state,action);case"set":return function set(state,action){return commit(state,action.components)}(state,action);case"update-editor":return function updateEditor(state,action){var _state_editor;const current=null!==(_state_editor=state.editor)&&void 0!==_state_editor?_state_editor:{};var _current_action_id;const nextForId={...null!==(_current_action_id=current[action.id])&&void 0!==_current_action_id?_current_action_id:{},...action.patch};return{...state,editor:{...current,[action.id]:nextForId}}}(state,action);default:return state}}},"../../packages/ui/src/components/cms/page-builder/state/layout/geometry.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function parsePx(v){if(!v)return null;const s=v.trim();if(s.endsWith("px")){const n=parseFloat(s.slice(0,-2));return Number.isNaN(n)?null:n}const n=Number(s);return Number.isNaN(n)?null:n}function collect(components,viewport){const map={},vpc="desktop"===(vp=viewport)?"Desktop":"tablet"===vp?"Tablet":"mobile"===vp?"Mobile":null;var vp;const getStringProp=(node,key)=>{const v=node[key];return"string"==typeof v?v:void 0},walk=nodes=>{for(const n of nodes){var _ref;const leftStr=null!==(_ref=vpc?getStringProp(n,`left${vpc}`):void 0)&&void 0!==_ref?_ref:getStringProp(n,"left");var _ref1;const topStr=null!==(_ref1=vpc?getStringProp(n,`top${vpc}`):void 0)&&void 0!==_ref1?_ref1:getStringProp(n,"top");var _ref2;const widthStr=null!==(_ref2=vpc?getStringProp(n,`width${vpc}`):void 0)&&void 0!==_ref2?_ref2:getStringProp(n,"width");var _ref3;const heightStr=null!==(_ref3=vpc?getStringProp(n,`height${vpc}`):void 0)&&void 0!==_ref3?_ref3:getStringProp(n,"height");map[n.id]={id:n.id,left:parsePx(leftStr),top:parsePx(topStr),width:parsePx(widthStr),height:parsePx(heightStr)};const children=n.children;Array.isArray(children)&&walk(children)}};return walk(components),map}function bounds(items){const xs=items.map(i=>{var _i_left;return null!==(_i_left=i.left)&&void 0!==_i_left?_i_left:0}),ys=items.map(i=>{var _i_top;return null!==(_i_top=i.top)&&void 0!==_i_top?_i_top:0}),rs=items.map(i=>{var _i_left,_i_width;return(null!==(_i_left=i.left)&&void 0!==_i_left?_i_left:0)+(null!==(_i_width=i.width)&&void 0!==_i_width?_i_width:0)}),bs=items.map(i=>{var _i_top,_i_height;return(null!==(_i_top=i.top)&&void 0!==_i_top?_i_top:0)+(null!==(_i_height=i.height)&&void 0!==_i_height?_i_height:0)});return{minX:Math.min(...xs),minY:Math.min(...ys),maxX:Math.max(...rs),maxY:Math.max(...bs)}}function alignLeft(components,ids,viewport){const map=collect(components,viewport),items=ids.map(id=>map[id]).filter(Boolean),{minX}=bounds(items);return items.map(i=>({id:i.id,left:`${minX}px`}))}function alignTop(components,ids,viewport){const map=collect(components,viewport),items=ids.map(id=>map[id]).filter(Boolean),{minY}=bounds(items);return items.map(i=>({id:i.id,top:`${minY}px`}))}function alignRight(components,ids,viewport){const map=collect(components,viewport),items=ids.map(id=>map[id]).filter(Boolean),{maxX}=bounds(items);return items.filter(i=>null!==i.width).map(i=>({id:i.id,left:maxX-i.width+"px"}))}function alignBottom(components,ids,viewport){const map=collect(components,viewport),items=ids.map(id=>map[id]).filter(Boolean),{maxY}=bounds(items);return items.filter(i=>null!==i.height).map(i=>({id:i.id,top:maxY-i.height+"px"}))}function alignCenterX(components,ids,viewport){const map=collect(components,viewport),items=ids.map(id=>map[id]).filter(Boolean),{minX,maxX}=bounds(items),cx=(minX+maxX)/2;return items.filter(i=>null!==i.width).map(i=>({id:i.id,left:cx-i.width/2+"px"}))}function alignCenterY(components,ids,viewport){const map=collect(components,viewport),items=ids.map(id=>map[id]).filter(Boolean),{minY,maxY}=bounds(items),cy=(minY+maxY)/2;return items.filter(i=>null!==i.height).map(i=>({id:i.id,top:cy-i.height/2+"px"}))}function distributeHorizontal(components,ids,viewport){const map=collect(components,viewport),items=ids.map(id=>map[id]).filter(i=>i&&null!==i.width&&null!==i.left);if(items.length<3)return[];const sorted=[...items].sort((a,b)=>a.left-b.left),{minX,maxX}=bounds(sorted),gap=(maxX-minX-sorted.reduce((acc,i)=>acc+i.width,0))/(sorted.length-1);let current=minX;return sorted.map(i=>{const patch={id:i.id,left:`${current}px`};return current+=i.width+gap,patch})}function distributeVertical(components,ids,viewport){const map=collect(components,viewport),items=ids.map(id=>map[id]).filter(i=>i&&null!==i.height&&null!==i.top);if(items.length<3)return[];const sorted=[...items].sort((a,b)=>a.top-b.top),{minY,maxY}=bounds(sorted),gap=(maxY-minY-sorted.reduce((acc,i)=>acc+i.height,0))/(sorted.length-1);let current=minY;return sorted.map(i=>{const patch={id:i.id,top:`${current}px`};return current+=i.height+gap,patch})}__webpack_require__.d(__webpack_exports__,{E0:()=>distributeHorizontal,S9:()=>alignCenterY,Vl:()=>alignLeft,Wk:()=>alignRight,X9:()=>alignBottom,YV:()=>distributeVertical,l8:()=>alignCenterX,t8:()=>alignTop})},"../../packages/ui/src/components/cms/page-builder/style/styleClipboard.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{at:()=>getStyleClipboard,wi:()=>setStyleClipboard});let clip=null;function setStyleClipboard(v){clip=v?JSON.parse(JSON.stringify(v)):null}function getStyleClipboard(){return clip?JSON.parse(JSON.stringify(clip)):null}},"../../packages/ui/src/components/cms/page-builder/textThemes.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{EN:()=>getAppliedTextTheme,Sg:()=>toCssValue,Z1:()=>extractTextThemes,p_:()=>applyTextThemeToOverrides,x7:()=>clearTextThemeFromOverrides});const PROP_KEYS={fontfamily:"fontFamily",fontface:"fontFamily",fontfamilydefault:"fontFamily",font:"fontFamily",fontsize:"fontSize",textsize:"fontSize",typeface:"fontFamily",fontweight:"fontWeight",weight:"fontWeight",lineheight:"lineHeight",leading:"lineHeight",line:"lineHeight"},VIEWPORT_KEYS={desktop:"typographyDesktop",tablet:"typographyTablet",mobile:"typographyMobile"},PREFIXES=new Set(["text","typography","type","font","styles"]);function normalizeSegment(segment){return segment.toLowerCase().replace(/[^a-z0-9]/g,"")}function pruneTypography(overrides){const next={...overrides};return["typography","typographyDesktop","typographyTablet","typographyMobile"].forEach(key=>{const value=next[key];if(!value)return;const clone={...value};Object.keys(clone).forEach(prop=>{void 0===clone[prop]&&delete clone[prop]}),0===Object.keys(clone).length?delete next[key]:next[key]=clone}),next}function extractTextThemes(tokens){const themes=new Map;return Object.keys(tokens).forEach(originalKey=>{if(!originalKey.startsWith("--"))return;const trimmed=originalKey.slice(2),segments=trimmed.split(/[-_]/).map(segment=>segment.trim()).filter(Boolean).map(segment=>segment.toLowerCase());if(segments.length<2)return;let viewport;const lastSegment=segments[segments.length-1];if(VIEWPORT_KEYS[lastSegment]&&(viewport=VIEWPORT_KEYS[lastSegment],segments.pop()),segments.length<2)return;const combinedProp=normalizeSegment(segments.slice(-2).join(""));let propKey=PROP_KEYS[combinedProp];if(propKey)segments.pop(),segments.pop();else{const single=normalizeSegment(segments[segments.length-1]);propKey=PROP_KEYS[single],propKey&&segments.pop()}if(!propKey)return;for(;segments.length>0&&PREFIXES.has(segments[0]);)segments.shift();if(0===segments.length)return;const styleName=segments.join("-");if(!styleName)return;const id=styleName,label=function toTitleCase(value){return value.split(/[-_\s]+/).filter(Boolean).map(part=>{const normalized=part.toLowerCase();return normalized.length<=3&&/^[a-z]+$/.test(normalized)?normalized.toUpperCase():normalized.charAt(0).toUpperCase()+normalized.slice(1)}).join(" ")}(styleName);var _themes_get;const existing=null!==(_themes_get=themes.get(id))&&void 0!==_themes_get?_themes_get:{id,label,tokens:{}},targetGroup=null!=viewport?viewport:"typography",writableGroup="fontFamily"===propKey&&"typography"!==targetGroup?"typography":targetGroup;var _existing_tokens_writableGroup;const target=null!==(_existing_tokens_writableGroup=existing.tokens[writableGroup])&&void 0!==_existing_tokens_writableGroup?_existing_tokens_writableGroup:{};target[propKey]=`--${trimmed}`,existing.tokens[writableGroup]=target,themes.set(id,existing)}),Array.from(themes.values()).sort((a,b)=>a.label.localeCompare(b.label))}function applyTextThemeToOverrides(overrides,theme){const base=overrides?{...overrides}:{};var _base_typography,_base_typographyDesktop,_base_typographyTablet,_base_typographyMobile;const next={...base,typography:{...null!==(_base_typography=base.typography)&&void 0!==_base_typography?_base_typography:{}},typographyDesktop:{...null!==(_base_typographyDesktop=base.typographyDesktop)&&void 0!==_base_typographyDesktop?_base_typographyDesktop:{}},typographyTablet:{...null!==(_base_typographyTablet=base.typographyTablet)&&void 0!==_base_typographyTablet?_base_typographyTablet:{}},typographyMobile:{...null!==(_base_typographyMobile=base.typographyMobile)&&void 0!==_base_typographyMobile?_base_typographyMobile:{}},color:base.color?{...base.color}:base.color,effects:base.effects?{...base.effects}:base.effects};return["typography","typographyDesktop","typographyTablet","typographyMobile"].forEach(group=>{const tokens=theme.tokens[group];if(!tokens)return;var _next_group;const target=null!==(_next_group=next[group])&&void 0!==_next_group?_next_group:{};Object.entries(tokens).forEach(([prop,token])=>{token&&(target[prop]=token)}),next[group]=target}),pruneTypography(next)}function clearTextThemeFromOverrides(overrides){const base=overrides?{...overrides}:{},next={...base,typography:base.typography?{...base.typography}:void 0,typographyDesktop:base.typographyDesktop?{...base.typographyDesktop}:void 0,typographyTablet:base.typographyTablet?{...base.typographyTablet}:void 0,typographyMobile:base.typographyMobile?{...base.typographyMobile}:void 0,color:base.color?{...base.color}:base.color,effects:base.effects?{...base.effects}:base.effects};return next.typography&&(delete next.typography.fontFamily,delete next.typography.fontSize,delete next.typography.fontWeight,delete next.typography.lineHeight),next.typographyDesktop&&(delete next.typographyDesktop.fontSize,delete next.typographyDesktop.lineHeight),next.typographyTablet&&(delete next.typographyTablet.fontSize,delete next.typographyTablet.lineHeight),next.typographyMobile&&(delete next.typographyMobile.fontSize,delete next.typographyMobile.lineHeight),pruneTypography(next)}function getAppliedTextTheme(overrides,themes){return overrides&&null!==(_themes_find=themes.find(theme=>["typography","typographyDesktop","typographyTablet","typographyMobile"].every(group=>{const tokens=theme.tokens[group];if(!tokens)return!0;const current=overrides[group];return!!current&&Object.entries(tokens).every(([prop,token])=>current[prop]===token)})))&&void 0!==_themes_find?_themes_find:null;var _themes_find}function toCssValue(token){if(token)return token.startsWith("--")?`var(${token})`:token}},"../../packages/ui/src/components/cms/page-builder/useArrayEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{W:()=>useArrayEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_ImagePicker__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/ImagePicker.tsx"),_acme_i18n__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../packages/i18n/src/index.ts");function useArrayEditor(onChange){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_4__.c3)(),keyMapRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new WeakMap),seqRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);return(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((prop,items,fields,limits)=>{const list=null!=items?items:[];var _limits_minItems;const min=null!==(_limits_minItems=null==limits?void 0:limits.minItems)&&void 0!==_limits_minItems?_limits_minItems:0;var _limits_maxItems;const max=null!==(_limits_maxItems=null==limits?void 0:limits.maxItems)&&void 0!==_limits_maxItems?_limits_maxItems:1/0,keyMap=keyMapRef.current;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[list.map((item,idx)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1 rounded border p-2",children:[fields.map(f=>{var _item_f;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-start gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.pd,{value:null!==(_item_f=item[f])&&void 0!==_item_f?_item_f:"",onChange:e=>{const next=[...list];next[idx]={...next[idx],[f]:e.target.value},onChange({[prop]:next})},placeholder:f,className:"flex-1"}),"src"===f&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ImagePicker__WEBPACK_IMPORTED_MODULE_3__.A,{onSelect:url=>{const next=[...list];next[idx]={...next[idx],src:url},onChange({[prop]:next})},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.$n,{type:"button",variant:"outline",asChild:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:"Pick"})})})]},f)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.$n,{variant:"destructive",onClick:()=>{const next=list.filter((_,i)=>i!==idx);onChange({[prop]:next})},disabled:list.length<=min,children:t("actions.remove")})]},(obj=>{const existing=keyMap.get(obj);if(existing)return existing;const k="ae-"+seqRef.current++;return keyMap.set(obj,k),k})(item))),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.$n,{onClick:()=>{const blank=Object.fromEntries(fields.map(f=>[f,""]));onChange({[prop]:[...list,blank]})},disabled:list.length>=max,children:t("actions.add")})]})},[onChange,t])}},"../../packages/ui/src/components/cms/page-builder/useBlockDimensions.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function useBlockDimensions({component,viewport}){const widthKey="desktop"===viewport?"widthDesktop":"tablet"===viewport?"widthTablet":"widthMobile",heightKey="desktop"===viewport?"heightDesktop":"tablet"===viewport?"heightTablet":"heightMobile";var _component_widthKey;var _component_heightKey;const marginKey="desktop"===viewport?"marginDesktop":"tablet"===viewport?"marginTablet":"marginMobile",paddingKey="desktop"===viewport?"paddingDesktop":"tablet"===viewport?"paddingTablet":"paddingMobile",leftKey="desktop"===viewport?"leftDesktop":"tablet"===viewport?"leftTablet":"leftMobile",topKey="desktop"===viewport?"topDesktop":"tablet"===viewport?"topTablet":"topMobile";var _component_marginKey;var _component_paddingKey;var _component_leftKey;var _component_topKey;return{widthKey,heightKey,widthVal:null!==(_component_widthKey=component[widthKey])&&void 0!==_component_widthKey?_component_widthKey:component.width,heightVal:null!==(_component_heightKey=component[heightKey])&&void 0!==_component_heightKey?_component_heightKey:component.height,marginKey,paddingKey,marginVal:null!==(_component_marginKey=component[marginKey])&&void 0!==_component_marginKey?_component_marginKey:component.margin,paddingVal:null!==(_component_paddingKey=component[paddingKey])&&void 0!==_component_paddingKey?_component_paddingKey:component.padding,leftKey,topKey,leftVal:null!==(_component_leftKey=component[leftKey])&&void 0!==_component_leftKey?_component_leftKey:component.left,topVal:null!==(_component_topKey=component[topKey])&&void 0!==_component_topKey?_component_topKey:component.top}}__webpack_require__.d(__webpack_exports__,{A:()=>useBlockDimensions})},"../../packages/ui/src/components/cms/page-builder/useBlockDnD.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>useBlockDnD});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_useSortableBlock__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useSortableBlock.ts");function useBlockDnD(id,index,parentId){const containerRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),sortable=(0,_useSortableBlock__WEBPACK_IMPORTED_MODULE_1__.A)(id,index,parentId);return{...sortable,setNodeRef:node=>{sortable.setNodeRef(node),containerRef.current=node},containerRef}}},"../../packages/ui/src/components/cms/page-builder/useBlockTransform.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>useBlockTransform});var _useCanvasResize__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useCanvasResize.ts"),_useCanvasDrag__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useCanvasDrag.ts");function useBlockTransform(componentId,{widthKey,heightKey,widthVal,heightVal,dispatch,gridEnabled=!1,gridCols,containerRef,disabled=!1,zoom=1}){const{startResize,guides:resizeGuides,snapping:resizeSnapping,nudgeByKeyboard,kbResizing}=(0,_useCanvasResize__WEBPACK_IMPORTED_MODULE_0__.A)({componentId,widthKey,heightKey,widthVal,heightVal,dispatch,gridEnabled,gridCols,containerRef,disabled,zoom}),{startDrag,guides:dragGuides,snapping:dragSnapping}=(0,_useCanvasDrag__WEBPACK_IMPORTED_MODULE_1__.A)({componentId,dispatch,gridEnabled,gridCols,containerRef,disabled,zoom});return{startResize,startDrag,guides:null!==resizeGuides.x||null!==resizeGuides.y?resizeGuides:dragGuides,snapping:resizeSnapping||dragSnapping,nudgeByKeyboard,kbResizing}}},"../../packages/ui/src/components/cms/page-builder/useCanvasDrag.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>useCanvasDrag});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_useGuides__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useGuides.ts"),_gridSnap__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/cms/page-builder/gridSnap.ts"),process=__webpack_require__("../../node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");function useCanvasDrag({componentId,dispatch,gridEnabled=!1,gridCols,containerRef,disabled=!1,leftKey="left",topKey="top",dockX,dockY,zoom=1}){const moveRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),[moving,setMoving]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),rafRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),lastEventRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),axisLockRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),captureRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({el:null,id:null}),[current,setCurrent]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({left:0,top:0,width:0,height:0}),{guides,setGuides,siblingEdgesRef,computeSiblingEdges}=(0,_useGuides__WEBPACK_IMPORTED_MODULE_1__.A)(containerRef),[distances,setDistances]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({x:null,y:null});(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{if(!moving)return;const processMove=e=>{if(!moveRef.current||!containerRef.current)return;let dx=(e.clientX-moveRef.current.x)/Math.max(zoom,1e-4),dy=(e.clientY-moveRef.current.y)/Math.max(zoom,1e-4);e.shiftKey?(null===axisLockRef.current&&(axisLockRef.current=Math.abs(dx)>=Math.abs(dy)?"x":"y"),"x"===axisLockRef.current?dy=0:dx=0):axisLockRef.current=null;const originalL=moveRef.current.l+dx,originalT=moveRef.current.t+dy;let newL=originalL,newT=originalT;let guideX=null,guideY=null,distX=null,distY=null;const{offsetWidth:width,offsetHeight:height}=containerRef.current;for(const edge of siblingEdgesRef.current.vertical){const leftDist=Math.abs(originalL-edge),rightDist=Math.abs(originalL+width-edge);leftDist<=10&&(null===distX||leftDist<distX)&&(newL=edge,guideX=edge,distX=leftDist),rightDist<=10&&(null===distX||rightDist<distX)&&(newL=edge-width,guideX=edge,distX=rightDist)}for(const edge of siblingEdgesRef.current.horizontal){const topDist=Math.abs(originalT-edge),bottomDist=Math.abs(originalT+height-edge);topDist<=10&&(null===distY||topDist<distY)&&(newT=edge,guideY=edge,distY=topDist),bottomDist<=10&&(null===distY||bottomDist<distY)&&(newT=edge-height,guideY=edge,distY=bottomDist)}const parentEl=containerRef.current.parentElement,unit=parentEl?parentEl.offsetWidth/gridCols:null;if(gridEnabled&&unit){const snappedL=(0,_gridSnap__WEBPACK_IMPORTED_MODULE_2__.E)(newL,unit),snappedT=(0,_gridSnap__WEBPACK_IMPORTED_MODULE_2__.E)(newT,unit),gridDistX=Math.abs(snappedL-newL),gridDistY=Math.abs(snappedT-newT);newL=snappedL,newT=snappedT,gridDistX<=10&&(null===distX||gridDistX<distX)&&(guideX=snappedL,distX=gridDistX),gridDistY<=10&&(null===distY||gridDistY<distY)&&(guideY=snappedT,distY=gridDistY)}const parent=containerRef.current.parentElement;var _parent_offsetWidth;const parentWidth=null!==(_parent_offsetWidth=null==parent?void 0:parent.offsetWidth)&&void 0!==_parent_offsetWidth?_parent_offsetWidth:0;var _parent_offsetHeight;const parentHeight=null!==(_parent_offsetHeight=null==parent?void 0:parent.offsetHeight)&&void 0!==_parent_offsetHeight?_parent_offsetHeight:0,hasParentWidth=parentWidth>0,hasParentHeight=parentHeight>0,horizontalCapacity=hasParentWidth?Math.max(0,parentWidth-width):null,verticalCapacity=hasParentHeight?Math.max(0,parentHeight-height):null,useRight="right"===dockX&&!!horizontalCapacity,useBottom="bottom"===dockY&&!!verticalCapacity;if(parent){if(hasParentWidth){const maxL=null!=horizontalCapacity?horizontalCapacity:0;newL=maxL>0?Math.min(Math.max(0,newL),maxL):Math.max(newL,0)}if(hasParentHeight){const maxT=null!=verticalCapacity?verticalCapacity:0;newT=maxT>0?Math.min(Math.max(0,newT),maxT):Math.max(newT,0)}}const patch={};if(useRight&&parent){const right=Math.round(Math.max(0,parentWidth-(newL+width)));patch.right=`${right}px`}else patch[leftKey]=`${Math.round(newL)}px`;if(useBottom&&parent){const bottom=Math.round(Math.max(0,parentHeight-(newT+height)));patch.bottom=`${bottom}px`}else patch[topKey]=`${Math.round(newT)}px`;dispatch({type:"resize",id:componentId,...patch}),setCurrent({left:newL,top:newT,width,height}),setGuides({x:null!==guideX?guideX-newL:null,y:null!==guideY?guideY-newT:null}),setDistances({x:distX,y:distY})},handleMove=e=>{lastEventRef.current=e;1?null==rafRef.current&&(rafRef.current=window.requestAnimationFrame(()=>{const ev=lastEventRef.current;ev&&processMove(ev),rafRef.current=null})):processMove(e)},stop=()=>{setMoving(!1),setGuides({x:null,y:null}),setDistances({x:null,y:null});try{var _captureRef_current,_captureRef_current1,_captureRef_current_el_releasePointerCapture,_captureRef_current_el;if((null===(_captureRef_current=captureRef.current)||void 0===_captureRef_current?void 0:_captureRef_current.el)&&null!=(null===(_captureRef_current1=captureRef.current)||void 0===_captureRef_current1?void 0:_captureRef_current1.id))null===(_captureRef_current_el_releasePointerCapture=(_captureRef_current_el=captureRef.current.el).releasePointerCapture)||void 0===_captureRef_current_el_releasePointerCapture||_captureRef_current_el_releasePointerCapture.call(_captureRef_current_el,captureRef.current.id)}catch(e){}if(captureRef.current={el:null,id:null},null!=rafRef.current){try{cancelAnimationFrame(rafRef.current)}catch(e){}rafRef.current=null}},onKeyDown=ke=>{"Escape"===ke.key&&stop()};try{window.addEventListener("pointermove",handleMove,{passive:!0})}catch(e){window.addEventListener("pointermove",handleMove)}return window.addEventListener("pointerup",stop),window.addEventListener("blur",stop),window.addEventListener("keydown",onKeyDown),()=>{try{window.removeEventListener("pointermove",handleMove)}catch(e){}window.removeEventListener("pointerup",stop),window.removeEventListener("blur",stop),window.removeEventListener("keydown",onKeyDown)}},[moving,componentId,dispatch,gridEnabled,gridCols,setGuides,siblingEdgesRef,containerRef,zoom,dockX,dockY,leftKey,topKey]);return{startDrag:e=>{if(disabled)return;const el=containerRef.current;if(el){try{var _e_target_setPointerCapture,_e_target;if(!(void 0!==process&&!1))null===(_e_target=e.target)||void 0===_e_target||null===(_e_target_setPointerCapture=_e_target.setPointerCapture)||void 0===_e_target_setPointerCapture||_e_target_setPointerCapture.call(_e_target,e.pointerId),captureRef.current={el:e.target,id:e.pointerId}}catch(e){}moveRef.current={x:e.clientX,y:e.clientY,l:el.offsetLeft,t:el.offsetTop},setCurrent({left:el.offsetLeft,top:el.offsetTop,width:el.offsetWidth,height:el.offsetHeight}),computeSiblingEdges(),setMoving(!0)}},guides,distances,snapping:null!==guides.x||null!==guides.y,moving,left:current.left,top:current.top,width:current.width,height:current.height}}},"../../packages/ui/src/components/cms/page-builder/useCanvasResize.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>useCanvasResize});var react=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),useGuides=__webpack_require__("../../packages/ui/src/components/cms/page-builder/useGuides.ts");var gridSnap=__webpack_require__("../../packages/ui/src/components/cms/page-builder/gridSnap.ts");__webpack_require__("../../node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");__webpack_require__("../../node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");function useCanvasResize({componentId,widthKey,heightKey,widthVal,heightVal,dispatch,gridEnabled=!1,gridCols,containerRef,disabled=!1,leftKey="left",topKey="top",dockX,dockY,zoom=1}){const startRef=(0,react.useRef)(null),[resizing,setResizing]=(0,react.useState)(!1),rafRef=(0,react.useRef)(null),lastEventRef=(0,react.useRef)(null),captureRef=(0,react.useRef)({el:null,id:null}),[kbResizing,setKbResizing]=(0,react.useState)(!1),[snapWidth,setSnapWidth]=(0,react.useState)(!1),[snapHeight,setSnapHeight]=(0,react.useState)(!1),[current,setCurrent]=(0,react.useState)({width:0,height:0,left:0,top:0}),{guides,setGuides,siblingEdgesRef,computeSiblingEdges}=(0,useGuides.A)(containerRef),[distances,setDistances]=(0,react.useState)({x:null,y:null});(0,react.useEffect)(()=>{if(!resizing)return;const processMove=e=>{if(!startRef.current||!containerRef.current)return;const{handle,w,h,l:startL,t:startT,ratio}=startRef.current,dx=(e.clientX-startRef.current.x)/Math.max(zoom,1e-4),dy=(e.clientY-startRef.current.y)/Math.max(zoom,1e-4),parent=containerRef.current.parentElement;var _parent_offsetWidth;const parentW=null!==(_parent_offsetWidth=null==parent?void 0:parent.offsetWidth)&&void 0!==_parent_offsetWidth?_parent_offsetWidth:w+dx;var _parent_offsetHeight;const parentH=null!==(_parent_offsetHeight=null==parent?void 0:parent.offsetHeight)&&void 0!==_parent_offsetHeight?_parent_offsetHeight:h+dy;let newW=w,newH=h,left=startL,top=startT;handle.includes("e")&&(newW=w+dx),handle.includes("w")&&(newW=w-dx,left=startL+dx),handle.includes("s")&&(newH=h+dy),handle.includes("n")&&(newH=h-dy,top=startT+dy);const ar=function applyAspectRatio(constrain,handle,ratio,w,h,dx,dy,startL,startT,left,top){let newW=w,newH=h,newLeft=left,newTop=top;return!constrain||!ratio||ratio<=0||(2===handle.length?Math.abs(dx)>=Math.abs(dy)?(newH=newW/ratio,handle.includes("n")&&(newTop=startT+(h-newH)),handle.includes("w")&&(newLeft=startL+(w-newW))):(newW=newH*ratio,handle.includes("w")&&(newLeft=startL+(w-newW)),handle.includes("n")&&(newTop=startT+(h-newH))):"e"===handle||"w"===handle?(newH=newW/ratio,"w"===handle&&(newLeft=startL+(w-newW))):"n"!==handle&&"s"!==handle||(newW=newH*ratio,"n"===handle&&(newTop=startT+(h-newH)))),{newW,newH,left:newLeft,top:newTop}}(e.shiftKey,handle,ratio,newW,newH,dx,dy,startL,startT,left,top);newW=ar.newW,newH=ar.newH,left=ar.left,top=ar.top;const snap=function applySnapping(left,top,width,height,siblingEdgesRef,options){let newW=width,newH=height,guideX=null,guideY=null,distX=null,distY=null;if(siblingEdgesRef.current.vertical.forEach(edge=>{const rightDist=Math.abs(left+newW-edge);rightDist<=options.threshold&&(null===distX||rightDist<distX)&&(newW=edge-left,guideX=edge,distX=rightDist)}),siblingEdgesRef.current.horizontal.forEach(edge=>{const bottomDist=Math.abs(top+newH-edge);bottomDist<=options.threshold&&(null===distY||bottomDist<distY)&&(newH=edge-top,guideY=edge,distY=bottomDist)}),options.gridEnabled&&options.parent){const unit=options.parent.offsetWidth/options.gridCols,snappedW=(0,gridSnap.E)(newW,unit),snappedH=(0,gridSnap.E)(newH,unit),gridDistX=Math.abs(snappedW-newW),gridDistY=Math.abs(snappedH-newH);newW=snappedW,newH=snappedH,gridDistX<=options.threshold&&(null===distX||gridDistX<distX)&&(guideX=left+snappedW,distX=gridDistX),gridDistY<=options.threshold&&(null===distY||gridDistY<distY)&&(guideY=top+snappedH,distY=gridDistY)}return{width:newW,height:newH,guideX,guideY,distX,distY}}(left,top,newW,newH,siblingEdgesRef,{gridEnabled,gridCols,parent,threshold:10});newW=snap.width,newH=snap.height;const guideX=snap.guideX,guideY=snap.guideY,distX=snap.distX,distY=snap.distY,snapW=e.altKey||Math.abs(parentW-newW)<=10,snapH=e.altKey||Math.abs(parentH-newH)<=10,parent2=containerRef.current.parentElement,clamped=function clampToParent(parent,left,top,width,height){if(!parent)return{left,top,width,height};const pw=parent.offsetWidth,ph=parent.offsetHeight,w=Math.max(1,Math.min(width,pw)),h=Math.max(1,Math.min(height,ph));return{left:Math.max(0,Math.min(left,Math.max(0,pw-w))),top:Math.max(0,Math.min(top,Math.max(0,ph-h))),width:w,height:h}}(parent2,left,top,newW,newH);left=clamped.left,top=clamped.top,newW=clamped.width,newH=clamped.height;const patch=function computePatch(args){const{widthKey,heightKey,leftKey,topKey,handle,left,top,width,height,parent,dockX,dockY,snapW,snapH}=args,patch={[widthKey]:snapW?"100%":`${width}px`,[heightKey]:snapH?"100%":`${height}px`};if(handle.includes("w"))"right"!==dockX&&(patch[leftKey]=`${Math.round(left)}px`);else if(handle.includes("e")&&"right"===dockX&&parent){const right=Math.round(parent.offsetWidth-(left+width));patch.right=`${right}px`}if(handle.includes("n"))"bottom"!==dockY&&(patch[topKey]=`${Math.round(top)}px`);else if(handle.includes("s")&&"bottom"===dockY&&parent){const bottom=Math.round(parent.offsetHeight-(top+height));patch.bottom=`${bottom}px`}return patch}({widthKey,heightKey,leftKey,topKey,handle,left,top,width:newW,height:newH,parent:parent2,dockX,dockY,snapW,snapH});dispatch({type:"resize",id:componentId,...patch}),setCurrent({width:newW,height:newH,left,top}),setSnapWidth(snapW||null!==guideX),setSnapHeight(snapH||null!==guideY),setGuides({x:null!==guideX?guideX-left:null,y:null!==guideY?guideY-top:null}),setDistances({x:distX,y:distY})},handleMove=e=>{lastEventRef.current=e;1?null==rafRef.current&&(rafRef.current=window.requestAnimationFrame(()=>{const ev=lastEventRef.current;ev&&processMove(ev),rafRef.current=null})):processMove(e)},stop=()=>{if(setResizing(!1),setSnapWidth(!1),setSnapHeight(!1),setGuides({x:null,y:null}),setDistances({x:null,y:null}),function releasePointerCaptureSafe(captureRef){try{var _captureRef_current,_captureRef_current1,_captureRef_current_el_releasePointerCapture,_captureRef_current_el;(null===(_captureRef_current=captureRef.current)||void 0===_captureRef_current?void 0:_captureRef_current.el)&&null!=(null===(_captureRef_current1=captureRef.current)||void 0===_captureRef_current1?void 0:_captureRef_current1.id)&&(null===(_captureRef_current_el_releasePointerCapture=(_captureRef_current_el=captureRef.current.el).releasePointerCapture)||void 0===_captureRef_current_el_releasePointerCapture||_captureRef_current_el_releasePointerCapture.call(_captureRef_current_el,captureRef.current.id))}catch(e){}captureRef.current={el:null,id:null}}(captureRef),null!=rafRef.current){try{cancelAnimationFrame(rafRef.current)}catch(e){}rafRef.current=null}},onKeyDown=ke=>{"Escape"===ke.key&&stop()};try{window.addEventListener("pointermove",handleMove,{passive:!0})}catch(e){window.addEventListener("pointermove",handleMove)}return window.addEventListener("pointerup",stop),window.addEventListener("blur",stop),window.addEventListener("keydown",onKeyDown),()=>{try{window.removeEventListener("pointermove",handleMove)}catch(e){}window.removeEventListener("pointerup",stop),window.removeEventListener("blur",stop),window.removeEventListener("keydown",onKeyDown)}},[resizing,componentId,dispatch,gridEnabled,gridCols,widthKey,heightKey,setGuides,siblingEdgesRef,containerRef,zoom,dockX,dockY,leftKey,topKey]);const snapping=snapWidth||snapHeight||null!==guides.x||null!==guides.y,nudgeByKeyboard=function createKeyboardNudge(args){const{containerRef,widthVal,heightVal,widthKey,heightKey,componentId,dispatch,setKbResizing,setCurrent}=args,nudgeByKeyboard=(direction,step)=>{if(args.disabled)return;const el=containerRef.current;if(!el)return;const startWidth=widthVal&&widthVal.endsWith("px")?parseFloat(widthVal):el.offsetWidth,startHeight=heightVal&&heightVal.endsWith("px")?parseFloat(heightVal):el.offsetHeight;let newW=startWidth,newH=startHeight;"left"===direction&&(newW=Math.max(1,startWidth-step)),"right"===direction&&(newW=Math.max(1,startWidth+step)),"up"===direction&&(newH=Math.max(1,startHeight-step)),"down"===direction&&(newH=Math.max(1,startHeight+step)),dispatch({type:"resize",id:componentId,[widthKey]:`${Math.round(newW)}px`,[heightKey]:`${Math.round(newH)}px`}),setCurrent({width:newW,height:newH,left:el.offsetLeft,top:el.offsetTop}),setKbResizing(!0),window.clearTimeout(nudgeByKeyboard._t),nudgeByKeyboard._t=window.setTimeout(()=>setKbResizing(!1),300)};return nudgeByKeyboard}({containerRef,widthVal,heightVal,widthKey,heightKey,componentId,dispatch,setKbResizing,setCurrent,disabled});return{startResize:(e,handle="se")=>{if(disabled)return;e.stopPropagation();const el=containerRef.current;if(!el)return;!function setPointerCaptureSafe(e,captureRef){try{var _e_target_setPointerCapture,_e_target;null===(_e_target=e.target)||void 0===_e_target||null===(_e_target_setPointerCapture=_e_target.setPointerCapture)||void 0===_e_target_setPointerCapture||_e_target_setPointerCapture.call(_e_target,e.pointerId),captureRef.current={el:e.target,id:e.pointerId}}catch(e){}}(e,captureRef);const startWidth=widthVal&&widthVal.endsWith("px")?parseFloat(widthVal):el.offsetWidth,startHeight=heightVal&&heightVal.endsWith("px")?parseFloat(heightVal):el.offsetHeight;startRef.current={x:e.clientX,y:e.clientY,w:startWidth,h:startHeight,l:el.offsetLeft,t:el.offsetTop,handle,ratio:startHeight>0?startWidth/startHeight:null},setCurrent({width:startWidth,height:startHeight,left:el.offsetLeft,top:el.offsetTop}),computeSiblingEdges(),setResizing(!0)},guides,distances,snapping,resizing,kbResizing,nudgeByKeyboard,width:current.width,height:current.height,left:current.left,top:current.top}}},"../../packages/ui/src/components/cms/page-builder/useComponentInputs.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>useComponentInputs});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js");function useComponentInputs(onChange){return{handleInput:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((field,value)=>{onChange({[field]:value})},[onChange])}}},"../../packages/ui/src/components/cms/page-builder/useGuides.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>useGuides});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js");function useGuides(containerRef){const siblingEdgesRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({vertical:[],horizontal:[]}),[guides,setGuides]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({x:null,y:null});return{guides,setGuides,siblingEdgesRef,computeSiblingEdges:()=>{const el=containerRef.current,parent=null==el?void 0:el.parentElement;if(!el||!parent)return{vertical:[],horizontal:[]};const vertical=[],horizontal=[],centerX=parent.offsetWidth/2,centerY=parent.offsetHeight/2;return Number.isFinite(centerX)&&vertical.push(centerX),Number.isFinite(centerY)&&horizontal.push(centerY),Array.from(parent.children).forEach(child=>{if(child===el)return;const c=child;vertical.push(c.offsetLeft,c.offsetLeft+c.offsetWidth),horizontal.push(c.offsetTop,c.offsetTop+c.offsetHeight)}),siblingEdgesRef.current={vertical,horizontal},siblingEdgesRef.current}}}},"../../packages/ui/src/components/cms/page-builder/useLocalizedTextEditor.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>useLocalizedTextEditor});var react=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),dist=__webpack_require__("../../node_modules/.pnpm/@tiptap+extension-link@2.24.1_@tiptap+core@2.24.1_@tiptap+pm@2.24.1__@tiptap+pm@2.24.1/node_modules/@tiptap/extension-link/dist/index.js"),extension_underline_dist=__webpack_require__("../../node_modules/.pnpm/@tiptap+extension-underline@2.26.1_@tiptap+core@2.24.1_@tiptap+pm@2.24.1_/node_modules/@tiptap/extension-underline/dist/index.js"),react_dist=__webpack_require__("../../node_modules/.pnpm/@tiptap+react@2.24.1_@tiptap+core@2.24.1_@tiptap+pm@2.24.1__@tiptap+pm@2.24.1_react-dom_b138374a6315c616c3d84fda7e8df92f/node_modules/@tiptap/react/dist/index.js"),starter_kit_dist=__webpack_require__("../../node_modules/.pnpm/@tiptap+starter-kit@2.24.1/node_modules/@tiptap/starter-kit/dist/index.js");function getContent(component,locale){var _component_text,_component_text_locale;return"string"==typeof component.text?component.text:null!==(_component_text_locale=null===(_component_text=component.text)||void 0===_component_text?void 0:_component_text[locale])&&void 0!==_component_text_locale?_component_text_locale:""}function useLocalizedTextEditor(component,locale){const[editing,setEditing]=(0,react.useState)(!1),editor=function useTextEditor(component,locale,editing){const editor=(0,react_dist.hG)({extensions:[starter_kit_dist.A,dist.Ay,extension_underline_dist.A],content:getContent(component,locale)});return(0,react.useEffect)(()=>{editor&&!editing&&editor.commands.setContent(getContent(component,locale))},[editor,component,locale,editing]),(0,react.useEffect)(()=>{editing&&(null==editor||editor.commands.focus("end"))},[editing,editor]),editor}(component,locale,editing),startEditing=(0,react.useCallback)(()=>{setEditing(!0)},[]),finishEditing=(0,react.useCallback)(()=>editor?(setEditing(!1),{text:{..."object"==typeof component.text?component.text:{},[locale]:editor.getHTML()}}):null,[editor,component,locale]);return{editor,editing,startEditing,finishEditing}}},"../../packages/ui/src/components/cms/page-builder/useMediaLibrary.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>useMediaLibrary});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_acme_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/i18n/src/index.ts"),next_navigation__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../__mocks__/next/navigation.js"),_acme_shared_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/shared-utils/src/index.ts");function useMediaLibrary(){var _usePathname;const pathname=null!==(_usePathname=(0,next_navigation__WEBPACK_IMPORTED_MODULE_2__.usePathname)())&&void 0!==_usePathname?_usePathname:"",searchParams=(0,next_navigation__WEBPACK_IMPORTED_MODULE_2__.useSearchParams)(),t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_1__.c3)(),shop=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{var _getShopFromPath,_ref;return null!==(_ref=null!==(_getShopFromPath=(0,_acme_shared_utils__WEBPACK_IMPORTED_MODULE_3__.e6)(pathname))&&void 0!==_getShopFromPath?_getShopFromPath:null==searchParams?void 0:searchParams.get("shopId"))&&void 0!==_ref?_ref:void 0},[pathname,searchParams]),[media,setMedia]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),[loading,setLoading]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[error,setError]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(),loadMedia=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async query=>{if(shop){setLoading(!0),setError(void 0);try{const res=await fetch(`/cms/api/media?shop=${encodeURIComponent(shop)}`),json=await res.json();if(!res.ok)throw new Error((null==json?void 0:json.error)||res.statusText);let list=Array.isArray(json)?json:[];const q=(query||"").trim().toLowerCase();q&&(list=list.filter(it=>{const inName=(it.url.split("/").pop()||it.url).toLowerCase().includes(q),inTags=(it.tags||[]).some(t=>t.toLowerCase().includes(q)),inTitle=(it.title||"").toLowerCase().includes(q),inAlt=(it.altText||"").toLowerCase().includes(q);return inName||inTags||inTitle||inAlt})),setMedia(list)}catch(err){setError(err instanceof Error?err.message:String(t("Failed to load media")))}finally{setLoading(!1)}}},[shop,t]);return{media,setMedia,loadMedia,shop,loading,error}}},"../../packages/ui/src/components/cms/page-builder/useSortableBlock.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>useSortableBlock});var _dnd_kit_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/@dnd-kit+core@6.3.1_react-dom@19.2.0-canary-3fbfb9ba-20250409_react@19.2.0-canary-3fbfb_fe9249e4a42fbe7e42b4e4091f9a4c62/node_modules/@dnd-kit/core/dist/core.esm.js"),_dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/@dnd-kit+sortable@10.0.0_@dnd-kit+core@6.3.1_react-dom@19.2.0-canary-3fbfb9ba-20250409__571aab38212e666fc4f105bb05843619/node_modules/@dnd-kit/sortable/dist/sortable.esm.js");function useSortableBlock(id,index,parentId){const{attributes,listeners,setNodeRef,transform,isDragging}=(0,_dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_1__.gl)({id,data:{from:"canvas",index,parentId}}),{setNodeRef:setDropRef,isOver}=(0,_dnd_kit_core__WEBPACK_IMPORTED_MODULE_0__.zM)({id:`container-${id}`,data:{parentId:id}});return{attributes,listeners,setNodeRef,transform,isDragging,setDropRef,isOver}}},"../../packages/ui/src/components/cms/page-builder/utils/coords.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function screenToCanvas(client,canvasRect,zoom=1){return{x:(client.x-canvasRect.left)/Math.max(zoom,1e-4),y:(client.y-canvasRect.top)/Math.max(zoom,1e-4)}}function rectScreenToCanvas(rect,canvasRect,zoom=1){return{left:(rect.left-canvasRect.left)/Math.max(zoom,1e-4),top:(rect.top-canvasRect.top)/Math.max(zoom,1e-4),width:rect.width/Math.max(zoom,1e-4),height:rect.height/Math.max(zoom,1e-4)}}function normalizeDragDelta(start,current,zoom=1){return{x:(current.x-start.x)/Math.max(zoom,1e-4),y:(current.y-start.y)/Math.max(zoom,1e-4)}}function rectsIntersect(a,b){const ax2=a.left+a.width,ay2=a.top+a.height,bx2=b.left+b.width,by2=b.top+b.height;return a.left<bx2&&ax2>b.left&&a.top<by2&&ay2>b.top}__webpack_require__.d(__webpack_exports__,{TT:()=>rectsIntersect,eG:()=>screenToCanvas,kf:()=>normalizeDragDelta,sc:()=>rectScreenToCanvas})},"../../packages/ui/src/components/cms/products/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{J:()=>ProductFilters.A,v:()=>ProductRowActions});var ProductFilters=__webpack_require__("../../packages/ui/src/components/cms/ProductFilters.tsx"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),shadcn=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),next_link=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/link.js"),link_default=__webpack_require__.n(next_link),src=__webpack_require__("../../packages/i18n/src/index.ts");function ProductRowActions({shop,product,onDuplicate,onDelete}){const t=(0,src.c3)(),tf=(key,fallback)=>{const val=t(key);return val===key?fallback:val};return(0,jsx_runtime.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,jsx_runtime.jsx)(link_default(),{href:`/cms/shop/${shop}/products/${product.id}/edit`,className:"bg-primary hover:bg-primary/90 rounded px-2 py-1 text-xs text-primary-fg inline-flex items-center justify-center min-h-10 min-w-10",children:tf("cms.products.actions.edit","Edit")}),(0,jsx_runtime.jsx)(link_default(),{href:`/en/product/${product.id}`,className:"rounded border px-2 py-1 text-xs hover:bg-muted inline-flex items-center justify-center min-h-10 min-w-10",children:tf("cms.products.actions.view","View")}),(0,jsx_runtime.jsx)(shadcn.$n,{onClick:()=>onDuplicate(product.id),variant:"outline",className:"px-2 py-1 text-xs min-h-10 min-w-10",children:tf("cms.products.actions.duplicate","Duplicate")}),(0,jsx_runtime.jsx)(shadcn.$n,{onClick:()=>onDelete(product.id),variant:"outline",className:"px-2 py-1 text-xs min-h-10 min-w-10 hover:bg-danger hover:text-danger-foreground","data-token":"--color-danger",children:tf("cms.products.actions.delete","Delete")})]})}ProductRowActions.__docgenInfo={description:"",methods:[],displayName:"ProductRowActions",props:{shop:{required:!0,tsType:{name:"string"},description:""},product:{required:!0,tsType:{name:"ProductPublication"},description:""}}}},"../../packages/ui/src/components/cms/style/presets.json":module=>{"use strict";module.exports=JSON.parse('[{"id":"light","name":"Light","tokens":{"--color-bg":"0 0% 100%","--color-fg":"0 0% 10%","--color-primary":"220 90% 56%","--color-primary-fg":"0 0% 100%"}},{"id":"dark","name":"Dark","tokens":{"--color-bg":"0 0% 4%","--color-fg":"0 0% 93%","--color-primary":"220 90% 66%","--color-primary-fg":"0 0% 10%"}},{"id":"brand","name":"Brand","tokens":{"--color-primary":"340 82% 52%","--color-accent":"260 83% 70%","--color-accent-fg":"0 0% 10%"}},{"id":"type-modern-tech","name":"Typography: Inter + Space Grotesk","tags":["tech","electronics","SaaS","modern"],"tokens":{"--font-body":"\\"Inter\\", var(--font-sans)","--font-heading-1":"\\"Space Grotesk\\", var(--font-sans)","--font-heading-2":"\\"Inter\\", var(--font-sans)"}},{"id":"type-editorial-luxury","name":"Typography: Playfair + Lato","tags":["luxury","fashion","editorial","boutique"],"tokens":{"--font-body":"\\"Lato\\", var(--font-sans)","--font-heading-1":"\\"Playfair Display\\", var(--font-sans)","--font-heading-2":"\\"Lato\\", var(--font-sans)"}},{"id":"type-minimal-home","name":"Typography: Source Sans + Montserrat","tags":["home","furniture","lifestyle","minimal"],"tokens":{"--font-body":"\\"Source Sans 3\\", var(--font-sans)","--font-heading-1":"\\"Montserrat\\", var(--font-sans)","--font-heading-2":"\\"Source Sans 3\\", var(--font-sans)"}},{"id":"type-outdoors-gear","name":"Typography: Rubik + Work Sans","tags":["outdoors","sports","gear","sturdy"],"tokens":{"--font-body":"\\"Work Sans\\", var(--font-sans)","--font-heading-1":"\\"Rubik\\", var(--font-sans)","--font-heading-2":"\\"Work Sans\\", var(--font-sans)"}},{"id":"type-handmade-crafts","name":"Typography: Nunito + Quicksand","tags":["handmade","crafts","kids","friendly"],"tokens":{"--font-body":"\\"Nunito\\", var(--font-sans)","--font-heading-1":"\\"Quicksand\\", var(--font-sans)","--font-heading-2":"\\"Nunito\\", var(--font-sans)"}}]')},"../../packages/ui/src/components/common/DeviceSelector.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>DeviceSelector});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),_radix_ui_react_icons__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-icons@1.3.2_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-icons/dist/react-icons.esm.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_utils_devicePresets__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/utils/devicePresets.ts"),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_acme_i18n__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../packages/i18n/src/index.ts");function DeviceSelector({deviceId,onChange,showLegacyButtons=!1,extraDevices=[],compact=!1}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_4__.c3)(),[custom,setCustom]=(0,react__WEBPACK_IMPORTED_MODULE_3__.useState)([]);(0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>{setCustom((0,_utils_devicePresets__WEBPACK_IMPORTED_MODULE_2__.Wn)())},[]);const allPresets=(0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(()=>{const base=[...custom,..._utils_devicePresets__WEBPACK_IMPORTED_MODULE_2__.vh],map=new Map;return[...base,...extraDevices].forEach(p=>{map.has(p.id)||map.set(p.id,p)}),Array.from(map.values())},[custom,extraDevices]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2",children:[showLegacyButtons&&["desktop","tablet","mobile"].map(type=>{const preset=(0,_utils_devicePresets__WEBPACK_IMPORTED_MODULE_2__.Jh)(type),Icon="desktop"===type?_radix_ui_react_icons__WEBPACK_IMPORTED_MODULE_5__.eZO:"tablet"===type?_radix_ui_react_icons__WEBPACK_IMPORTED_MODULE_5__.WKf:_radix_ui_react_icons__WEBPACK_IMPORTED_MODULE_5__.sqe,buttonClass=compact?"hidden sm:inline-flex":void 0;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.$n,{variant:deviceId===preset.id?"default":"outline",size:"icon",className:buttonClass,onClick:()=>onChange(preset.id),"aria-label":type,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Icon,{className:"h-4 w-4","aria-hidden":"true"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"sr-only",children:t(`devices.${type}`)})]},type)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.l6,{value:deviceId,onValueChange:onChange,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.bq,{"aria-label":t("devices.selectLabel"),className:"w-28 sm:w-36",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.yv,{})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.gC,{children:allPresets.map(p=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_1__.eb,{value:p.id,children:p.label},p.id))})]}),null]})}DeviceSelector.__docgenInfo={description:"",methods:[],displayName:"DeviceSelector",props:{deviceId:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},showLegacyButtons:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},extraDevices:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:'{\n  id: string;\n  label: string;\n  width: number;\n  height: number;\n  type: "desktop" | "tablet" | "mobile";\n  orientation: "portrait" | "landscape";\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}},{key:"type",value:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}],required:!0}},{key:"orientation",value:{name:"union",raw:'"portrait" | "landscape"',elements:[{name:"literal",value:'"portrait"'},{name:"literal",value:'"landscape"'}],required:!0}}]}}],raw:"DevicePreset[]"},description:"Additional devices to include in the dropdown (e.g., page breakpoints).",defaultValue:{value:"[]",computed:!1}},compact:{required:!1,tsType:{name:"boolean"},description:"Hide the quick device icon buttons on small screens to save space.",defaultValue:{value:"false",computed:!1}}}}},"../../packages/ui/src/components/organisms/StoreLocatorMap.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{W:()=>StoreLocatorMap});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_utils_style__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/utils/style/index.ts");function StoreLocatorMap({locations,zoom=13,heightClass="h-96",height,className,...props}){const mapRef=react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);return react__WEBPACK_IMPORTED_MODULE_1__.useEffect(()=>{if(!mapRef.current||0===locations.length)return;let map=null;return function loadLeaflet(){if(window.L)return Promise.resolve(window.L);const css=document.createElement("link");return css.rel="stylesheet",css.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(css),new Promise(resolve=>{const script=document.createElement("script");script.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",script.onload=()=>resolve(window.L),script.onerror=()=>resolve(null),document.body.appendChild(script)})}().then(L=>{L&&mapRef.current&&(map=L.map(mapRef.current).setView([locations[0].lat,locations[0].lng],zoom),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(map),locations.forEach(loc=>{var _loc_label;L.marker([loc.lat,loc.lng]).addTo(map).bindPopup(null!==(_loc_label=loc.label)&&void 0!==_loc_label?_loc_label:"")}))}),()=>{null==map||map.remove()}},[locations,zoom]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref:mapRef,className:(0,_utils_style__WEBPACK_IMPORTED_MODULE_2__.cn)(null!=height?height:heightClass,"w-full",className),...props})}StoreLocatorMap.__docgenInfo={description:"",methods:[],displayName:"StoreLocatorMap",props:{locations:{required:!0,tsType:{name:"Array",elements:[{name:"Location"}],raw:"Location[]"},description:""},zoom:{required:!1,tsType:{name:"number"},description:"Initial zoom level (default = 13)",defaultValue:{value:"13",computed:!1}},heightClass:{required:!1,tsType:{name:"string"},description:"Tailwind height class (preferred) – eg. `h-96`",defaultValue:{value:'"h-96"',computed:!1}},height:{required:!1,tsType:{name:"string"},description:"@deprecated  Use `heightClass` instead"}}}},"../../packages/ui/src/components/upload/UploaderSurface.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,q:()=>UploaderSurface});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/src/components/atoms/shadcn/index.ts"),_atoms__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/ui/src/components/atoms/index.ts"),_utils_style__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../packages/ui/src/utils/style/index.ts"),_acme_i18n__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../packages/i18n/src/index.ts");const ACCEPT="image/*,video/*";function UploaderSurface(props){const{inputRef,pendingFile,progress,error,isValid,isVideo,requiredOrientation,onDrop,onFileChange,openFileDialog}=props,[dragActive,setDragActive]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),suppressClickFromKeyboardRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(!1),t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_5__.c3)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{tabIndex:0,role:"button","aria-label":t("upload.dropHelp"),"aria-describedby":"uploader-feedback",onClick:()=>{suppressClickFromKeyboardRef.current?suppressClickFromKeyboardRef.current=!1:openFileDialog()},onDragOver:e=>e.preventDefault(),onDragEnter:()=>setDragActive(!0),onDragLeave:()=>setDragActive(!1),onDrop:e=>{setDragActive(!1),onDrop(e)},onKeyDown:e=>{const key=e.key;"Enter"!==key&&" "!==key&&"Spacebar"!==key&&"Space"!==key||(suppressClickFromKeyboardRef.current=!0,e.preventDefault(),openFileDialog(),setTimeout(()=>{suppressClickFromKeyboardRef.current=!1},0))},className:(0,_utils_style__WEBPACK_IMPORTED_MODULE_4__.cn)("rounded border-2 border-dashed p-4 text-center",dragActive&&"ring-2 ring-primary/60 bg-primary/5"),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{ref:inputRef,type:"file",accept:ACCEPT,capture:"environment",className:"hidden",onChange:onFileChange}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"mb-2",children:t("upload.dragDropOr")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_shadcn__WEBPACK_IMPORTED_MODULE_2__.$n,{type:"button",onClick:openFileDialog,className:"h-auto px-3 py-1 text-sm",children:t("upload.browse")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{id:"uploader-feedback",role:"status","aria-live":"polite",children:[pendingFile&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:pendingFile.name}),progress&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"mt-2 text-sm",children:[t("upload.uploading")," ",progress.done,"/",progress.total]}),error&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.Fc,{variant:"danger",tone:"soft",heading:error,className:"mt-2"}),!1===isValid&&!isVideo&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.Fc,{variant:"warning",tone:"soft",heading:t("upload.orientationWrong",{required:requiredOrientation}),className:"mt-2"})]})]})}const __WEBPACK_DEFAULT_EXPORT__=UploaderSurface;UploaderSurface.__docgenInfo={description:"",methods:[],displayName:"UploaderSurface",props:{inputRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"HTMLInputElement | null",elements:[{name:"HTMLInputElement"},{name:"null"}]}],raw:"RefObject<HTMLInputElement | null>"},description:""},pendingFile:{required:!0,tsType:{name:"union",raw:"File | null",elements:[{name:"File"},{name:"null"}]},description:""},progress:{required:!0,tsType:{name:"union",raw:"UploadProgress | null",elements:[{name:"UploadProgress"},{name:"null"}]},description:""},error:{required:!1,tsType:{name:"string"},description:""},isValid:{required:!0,tsType:{name:"union",raw:"boolean | null",elements:[{name:"boolean"},{name:"null"}]},description:""},isVideo:{required:!0,tsType:{name:"boolean"},description:""},requiredOrientation:{required:!0,tsType:{name:"z.infer",elements:[{name:"imageOrientationSchema"}],raw:"z.infer<typeof imageOrientationSchema>"},description:""},onDrop:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: React.DragEvent<HTMLDivElement>) => void",signature:{arguments:[{type:{name:"ReactDragEvent",raw:"React.DragEvent<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},name:"e"}],return:{name:"void"}}},description:""},onFileChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: React.ChangeEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ReactChangeEvent",raw:"React.ChangeEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},name:"e"}],return:{name:"void"}}},description:""},openFileDialog:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}}},"../../packages/ui/src/hooks/useFileUpload.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>hooks_useFileUpload,lN:()=>useFileUpload});var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),react_dom=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react-dom/index.js"),useImageOrientationValidation=__webpack_require__("../../packages/ui/src/hooks/useImageOrientationValidation.ts");function validateFilePolicy(file,allowedMimePrefixes,maxBytes){if(maxBytes&&file.size>maxBytes)return`File too large (>${Math.round(maxBytes/1048576)}MB)`;if(allowedMimePrefixes.length&&file.type){if(!allowedMimePrefixes.some(p=>file.type.startsWith(p)))return`Unsupported file type: ${file.type}`}}function isSafeHttpUrl(raw){try{const scheme=`${new URL(raw).protocol}`.toLowerCase();return"javascript:"!==scheme&&"data:"!==scheme&&("http:"===scheme||"https:"===scheme)}catch(e){return!1}}const t=s=>s;async function ingestExternalUrl(url,opts){var _opts_allowExternalUrl;const allowExternalUrl=null!==(_opts_allowExternalUrl=opts.allowExternalUrl)&&void 0!==_opts_allowExternalUrl?_opts_allowExternalUrl:()=>!0;if(!isSafeHttpUrl(url))return{file:null,error:t("Blocked URL scheme"),handled:"url"};if(!allowExternalUrl(url))return{file:null,error:t("External URL not allowed by policy"),handled:"url"};try{const res=await fetch(url,{mode:"cors"});if(!res.ok)throw new Error(`Failed to fetch resource (${res.status})`);const ct=res.headers.get("content-type")||"";if(opts.allowedMimePrefixes.length&&ct){if(!opts.allowedMimePrefixes.some(p=>ct.startsWith(p)))throw new Error(`Unsupported content-type: ${ct}`)}const blob=await res.blob();if(opts.maxBytes&&blob.size>opts.maxBytes)throw new Error(`File too large (>${Math.round(opts.maxBytes/1048576)}MB)`);const name=(()=>{try{const u=new URL(url);return u.pathname.split("/").filter(Boolean).pop()||"asset"}catch(e){return"asset"}})();return{file:new File([blob],name,{type:blob.type||ct||"application/octet-stream"}),handled:"url"}}catch(err){return{file:null,error:err instanceof Error?err.message:String(err),handled:"url"}}}async function ingestFromText(text,opts){const url=function extractUrlFromText(text){try{const trimmed=text.trim();if(isSafeHttpUrl(trimmed))return trimmed;const m=trimmed.match(/https?:\/\/[^\s]+/i);return m&&isSafeHttpUrl(m[0])?m[0]:null}catch(e){return null}}(text)||"";return!url&&text?{file:null,handled:"text"}:url?ingestExternalUrl(url,opts):{file:null,handled:"none"}}var UploaderSurface=__webpack_require__("../../packages/ui/src/components/upload/UploaderSurface.tsx");const DEFAULT_PREFIXES=["image/","video/"];function useFileUpload(options){var _pendingFile_type;const{shop,requiredOrientation,onUploaded}=options,[pendingFile,setPendingFile]=(0,react.useState)(null),[altText,setAltText]=(0,react.useState)(""),[tags,setTags]=(0,react.useState)(""),[progress,setProgress]=(0,react.useState)(null),[error,setError]=(0,react.useState)(),inputRef=(0,react.useRef)(null),uploadingRef=(0,react.useRef)(!1),[isUploading,setIsUploading]=(0,react.useState)(!1);var _options_allowExternalUrl;const allowExternalUrl=null!==(_options_allowExternalUrl=options.allowExternalUrl)&&void 0!==_options_allowExternalUrl?_options_allowExternalUrl:()=>!0,allowedMimePrefixes=(0,react.useMemo)(()=>{var _options_allowedMimePrefixes;return null!==(_options_allowedMimePrefixes=options.allowedMimePrefixes)&&void 0!==_options_allowedMimePrefixes?_options_allowedMimePrefixes:DEFAULT_PREFIXES},[options.allowedMimePrefixes]),maxBytes=Number.isFinite(options.maxBytes)?options.maxBytes:26214400;var _pendingFile_type_startsWith;const isVideo=null!==(_pendingFile_type_startsWith=null==pendingFile||null===(_pendingFile_type=pendingFile.type)||void 0===_pendingFile_type?void 0:_pendingFile_type.startsWith("video/"))&&void 0!==_pendingFile_type_startsWith&&_pendingFile_type_startsWith,{actual:rawActual,isValid:rawValid}=(0,useImageOrientationValidation.M)(isVideo?null:pendingFile,requiredOrientation),actual=isVideo?null:rawActual,isValid=!!isVideo||rawValid,handleUpload=(0,react.useCallback)(async()=>{if(uploadingRef.current)return;if(!pendingFile)return;if(!1===isValid)return void setError(actual?`Image orientation mismatch: expected ${requiredOrientation}, got ${actual}`:`Image orientation mismatch: expected ${requiredOrientation}`);uploadingRef.current=!0,setIsUploading(!0),(0,react_dom.flushSync)(()=>setProgress({done:0,total:1}));const{item,error}=await async function uploadToCms({shop,requiredOrientation,file,altText,tagsCsv}){const fd=new FormData;if(fd.append("file",file),altText&&fd.append("altText",altText),tagsCsv){const tagList=tagsCsv.split(",").map(t=>t.trim()).filter(Boolean);tagList.length&&fd.append("tags",JSON.stringify(tagList))}try{const res=await fetch(`/cms/api/media?shop=${shop}&orientation=${requiredOrientation}`,{method:"POST",body:fd}),data=await res.json();if(!res.ok)throw new Error(data.error||res.statusText);return{item:data}}catch(err){return err instanceof Error?{error:err.message}:{}}}({shop,requiredOrientation,file:pendingFile,altText,tagsCsv:tags});item?(null==onUploaded||onUploaded(item),setError(void 0)):error&&setError(error),(0,react_dom.flushSync)(()=>setProgress(null)),setPendingFile(null),setAltText(""),setTags(""),uploadingRef.current=!1,setIsUploading(!1)},[pendingFile,altText,tags,shop,requiredOrientation,onUploaded,actual,isValid]),onDrop=(0,react.useCallback)(e=>{var _e_dataTransfer_files,_e_dataTransfer_files_;e.preventDefault();const file=null!==(_e_dataTransfer_files_=null===(_e_dataTransfer_files=e.dataTransfer.files)||void 0===_e_dataTransfer_files?void 0:_e_dataTransfer_files[0])&&void 0!==_e_dataTransfer_files_?_e_dataTransfer_files_:null;if(!file)return;const policyError=validateFilePolicy(file,allowedMimePrefixes,maxBytes);policyError?setError(policyError):(setPendingFile(file),setAltText(""),setTags(""))},[allowedMimePrefixes,maxBytes]),onFileChange=(0,react.useCallback)(e=>{const file=function firstFileFromChange(e){var _e_target_files,_e_target_files_;return null!==(_e_target_files_=null===(_e_target_files=e.target.files)||void 0===_e_target_files?void 0:_e_target_files[0])&&void 0!==_e_target_files_?_e_target_files_:null}(e);if(!file)return;const policyError=validateFilePolicy(file,allowedMimePrefixes,maxBytes);policyError?setError(policyError):(setPendingFile(file),setAltText(""),setTags(""))},[allowedMimePrefixes,maxBytes]),openFileDialog=(0,react.useCallback)(()=>{var _inputRef_current;null===(_inputRef_current=inputRef.current)||void 0===_inputRef_current||_inputRef_current.click()},[]),uploader=(0,jsx_runtime.jsx)(UploaderSurface.A,{inputRef,pendingFile,progress,error,isValid,isVideo,requiredOrientation,onDrop,onFileChange,openFileDialog});return{pendingFile,altText,setAltText,tags,setTags,actual,isValid,progress,error,handleUpload,isUploading,inputRef,openFileDialog,onDrop,onFileChange,processDataTransfer:async e=>{try{var _dt_files;const dt=e.dataTransfer;if(!dt)return"none";var _dt_files_;const file=null!==(_dt_files_=null===(_dt_files=dt.files)||void 0===_dt_files?void 0:_dt_files[0])&&void 0!==_dt_files_?_dt_files_:null;if(file){const policyError=validateFilePolicy(file,allowedMimePrefixes,maxBytes);return policyError?(setError(policyError),"none"):(setPendingFile(file),setAltText(""),setTags(""),"file")}const url=dt.getData("text/uri-list");if(!url){const text=dt.getData("text/plain"),{file:ingestedFile,error,handled}=await ingestFromText(text,{allowedMimePrefixes,maxBytes,allowExternalUrl});return"text"===handled?"text":ingestedFile?(setPendingFile(ingestedFile),setAltText(""),setTags(""),"url"):(error&&setError(error),"none")}if(url){const ok=await(async url=>{setProgress({done:0,total:1});const{file,error}=await ingestExternalUrl(url,{allowedMimePrefixes,maxBytes,allowExternalUrl});return file?(setPendingFile(file),setAltText(""),setTags(""),setProgress(null),!0):(error&&setError(error),setProgress(null),!1)})(url);return ok?"url":"none"}return"none"}catch(e){return"none"}},uploader}}const hooks_useFileUpload=useFileUpload},"../../packages/ui/src/hooks/useImageOrientationValidation.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{M:()=>useImageOrientationValidation});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js");function useImageOrientationValidation(file,required){const[actual,setActual]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{if(!file)return void setActual(null);const url=URL.createObjectURL(file),img=new Image;img.onload=()=>{const orientation=img.width>=img.height?"landscape":"portrait";setActual(orientation),URL.revokeObjectURL(url)},img.onerror=()=>{setActual(null),URL.revokeObjectURL(url)},img.src=url},[file]);return{actual,isValid:null===actual?null:actual===required}}},"../../packages/ui/src/hooks/useProductEditorFormState.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{r:()=>useProductEditorFormState});var useProductInputs=__webpack_require__("../../packages/ui/src/hooks/useProductInputs.ts"),useProductMediaManager=__webpack_require__("../../packages/ui/src/hooks/useProductMediaManager.tsx");function buildProductFormData(product,publishTargets,locales){const fd=new FormData;var _product_media;fd.append("id",product.id),locales.forEach(l=>{var _product_title,_product_description,_product_title_l,_product_description_l;fd.append(`title_${l}`,String(null!==(_product_title_l=null===(_product_title=product.title)||void 0===_product_title?void 0:_product_title[l])&&void 0!==_product_title_l?_product_title_l:"")),fd.append(`desc_${l}`,String(null!==(_product_description_l=null===(_product_description=product.description)||void 0===_product_description?void 0:_product_description[l])&&void 0!==_product_description_l?_product_description_l:""))}),fd.append("price",String(product.price));const mediaWithoutFiles=(null!==(_product_media=product.media)&&void 0!==_product_media?_product_media:[]).map((item,index)=>{if(!item)return null;if(!function hasFileProperty(item){return Boolean(item&&"file"in item)}(item))return item;item.file instanceof File&&fd.append(`file_${index}`,item.file);const{file:_file,...rest}=item;return rest});return fd.append("media",JSON.stringify(mediaWithoutFiles)),fd.append("publish",publishTargets.join(",")),Object.entries(product.variants).forEach(([k,vals])=>{fd.append(`variant_${k}`,vals.filter(Boolean).join(","))}),fd}var react=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js");function useProductEditorFormState(init,locales,onSave){const{product,setProduct,handleChange,addVariantValue,removeVariantValue}=(0,useProductInputs._)(init,locales),[saving,setSaving]=(0,react.useState)(!1),[errors,setErrors]=(0,react.useState)({}),[publishTargets,setPublishTargets]=(0,react.useState)([]),{uploader,removeMedia,moveMedia}=(0,useProductMediaManager.U)(init.shop,publishTargets,setProduct),formData=(0,react.useMemo)(()=>buildProductFormData(product,publishTargets,locales),[product,publishTargets,locales]),handleSubmit=(0,react.useCallback)(async e=>{e.preventDefault(),setSaving(!0);const result=await onSave(formData);if(result.errors)setErrors(result.errors);else if(result.product){const product=result.product;setProduct(prev=>{var _product_variants;return{...product,variants:null!==(_product_variants=product.variants)&&void 0!==_product_variants?_product_variants:prev.variants}}),setErrors({})}setSaving(!1)},[onSave,formData,setProduct]);return{product,errors,saving,publishTargets,setPublishTargets,handleChange,handleSubmit,uploader,removeMedia,moveMedia,addVariantValue,removeVariantValue}}},"../../packages/ui/src/hooks/useProductEditorNotifications.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{o:()=>useProductEditorNotifications});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js");const DEFAULT_MESSAGES={saving:"Saving product…",success:"Product saved successfully.",error:"We couldn't save your changes. Check the highlighted sections."};function useProductEditorNotifications({saving,hasErrors,autoCloseMs=4e3,messages:messageOverrides}){const messages=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>({...DEFAULT_MESSAGES,...messageOverrides}),[messageOverrides]),[toast,setToast]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({open:!1,message:""}),prevSavingRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{saving&&!prevSavingRef.current?setToast({open:!0,message:messages.saving}):!saving&&prevSavingRef.current&&setToast({open:!0,message:hasErrors?messages.error:messages.success}),prevSavingRef.current=saving},[saving,hasErrors,messages]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{if(!toast.open)return;const timer=window.setTimeout(()=>{setToast(prev=>({...prev,open:!1}))},autoCloseMs);return()=>window.clearTimeout(timer)},[toast.open,autoCloseMs]);const closeToast=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{setToast(prev=>({...prev,open:!1}))},[]);return{toast,closeToast}}},"../../packages/ui/src/hooks/useProductInputs.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{_:()=>useProductInputs});var react=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js");function useProductInputs(init,locales){var _init_variants;const[product,setProduct]=(0,react.useState)({...init,variants:null!==(_init_variants=init.variants)&&void 0!==_init_variants?_init_variants:{}}),handleChange=(0,react.useCallback)(e=>{const{name,value}=e.target,parsed=function parseMultilingualInput(name,locales){if("string"!=typeof name)return null;const parts=name.split("_");if(2!==parts.length)return null;const[field,locale]=parts;return"title"!==field&&"desc"!==field||!locales.includes(locale)?null:{field,locale}}(name,locales);setProduct(prev=>{if(parsed){const{field,locale}=parsed,realField="desc"===field?"description":field;var _prev_realField;const translations=null!==(_prev_realField=prev[realField])&&void 0!==_prev_realField?_prev_realField:{};return{...prev,[realField]:{...translations,[locale]:value}}}if("price"===name)return{...prev,price:Number(value)};if(name.startsWith("variant_")){const indexed=name.match(/^variant_(.+)_(\d+)$/);if(indexed){const[,key,idxStr]=indexed,idx=Number(idxStr);var _prev_variants_key;const next=[...null!==(_prev_variants_key=prev.variants[key])&&void 0!==_prev_variants_key?_prev_variants_key:[]];return next[idx]=value,{...prev,variants:{...prev.variants,[key]:next}}}const key=name.replace(/^variant_/,"");return{...prev,variants:{...prev.variants,[key]:value?value.split(",").map(v=>v.trim()):[""]}}}return prev})},[locales]),addVariantValue=(0,react.useCallback)(attr=>{setProduct(prev=>{var _prev_variants_attr;return{...prev,variants:{...prev.variants,[attr]:[...null!==(_prev_variants_attr=prev.variants[attr])&&void 0!==_prev_variants_attr?_prev_variants_attr:[],""]}}})},[]),removeVariantValue=(0,react.useCallback)((attr,index)=>{setProduct(prev=>{var _prev_variants_attr;const values=null!==(_prev_variants_attr=prev.variants[attr])&&void 0!==_prev_variants_attr?_prev_variants_attr:[];return{...prev,variants:{...prev.variants,[attr]:values.filter((_,i)=>i!==index)}}})},[]);return{product,setProduct,handleChange,addVariantValue,removeVariantValue}}},"../../packages/ui/src/hooks/useProductMediaManager.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{U:()=>useProductMediaManager});var _useFileUpload__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../packages/ui/src/hooks/useFileUpload.tsx"),_platform_core_hooks_usePublishLocations__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/platform-core/src/hooks/usePublishLocations.ts"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js");function useProductMediaManager(shop,publishTargets,setProduct){const{locations}=(0,_platform_core_hooks_usePublishLocations__WEBPACK_IMPORTED_MODULE_2__.D)(),requiredOrientation=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{var _locations_find,_locations_find_requiredOrientation;return null!==(_locations_find_requiredOrientation=null===(_locations_find=locations.find(l=>l.id===publishTargets[0]))||void 0===_locations_find?void 0:_locations_find.requiredOrientation)&&void 0!==_locations_find_requiredOrientation?_locations_find_requiredOrientation:"landscape"},[locations,publishTargets]),{uploader}=(0,_useFileUpload__WEBPACK_IMPORTED_MODULE_0__.lN)({shop,requiredOrientation,onUploaded:item=>setProduct(prev=>({...prev,media:[...prev.media,item]}))});return{uploader,removeMedia:(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(index=>{setProduct(prev=>({...prev,media:prev.media.filter((_,i)=>i!==index)}))},[setProduct]),moveMedia:(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((from,to)=>{setProduct(prev=>{const gallery=[...prev.media],[moved]=gallery.splice(from,1);return gallery.splice(to,0,moved),{...prev,media:gallery}})},[setProduct])}}},"../../packages/ui/src/hooks/useRemoteImageProbe.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>useRemoteImageProbe});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js");function useRemoteImageProbe(){const[loading,setLoading]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[error,setError]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),[valid,setValid]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);return{probe:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async url=>{if(url){setLoading(!0),setError(null);try{const res=await fetch(`/api/media/probe?url=${encodeURIComponent(url)}`,{method:"HEAD"}),type=res.headers.get("content-type")||"";res.ok&&type.startsWith("image/")?setValid(!0):(setError("not-image"),setValid(!1))}catch(err){setError(err.message),setValid(!1)}finally{setLoading(!1)}}else setValid(null)},[]),loading,error,valid}}},"../../packages/ui/src/hooks/useTokenColors.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{j:()=>useTokenColors});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js"),_components_cms_ColorInput__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui/src/components/cms/ColorInput.tsx");function useTokenColors(tokenKey,value,tokens,baseTokens){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{let pairKey="";if(tokenKey.startsWith("--color-bg"))pairKey=`--color-fg${tokenKey.slice(10)}`;else if(tokenKey.startsWith("--color-fg"))pairKey=`--color-bg${tokenKey.slice(10)}`;else if(tokenKey.endsWith("-fg"))pairKey=tokenKey.slice(0,-3);else{const candidate=`${tokenKey}-fg`;void 0===tokens[candidate]&&void 0===baseTokens[candidate]||(pairKey=candidate)}var _tokens_pairKey;const pairVal=pairKey?null!==(_tokens_pairKey=tokens[pairKey])&&void 0!==_tokens_pairKey?_tokens_pairKey:baseTokens[pairKey]:void 0;if(pairVal){const contrast=(0,_components_cms_ColorInput__WEBPACK_IMPORTED_MODULE_1__.bJ)(value,pairVal);if(contrast<4.5){return{contrast,suggestion:(0,_components_cms_ColorInput__WEBPACK_IMPORTED_MODULE_1__.O9)(value,pairVal)}}}return null},[tokenKey,value,tokens,baseTokens])}},"../../packages/ui/src/hooks/useTokenEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>useTokenEditor});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_babel-p_5f4009eaaa2f46513e879f269f75344a/node_modules/next/dist/compiled/react/index.js");const defaultSansFonts=['"Geist Sans", var(--font-sans)',"Arial, var(--font-sans)","ui-sans-serif, var(--font-sans)"],defaultMonoFonts=['"Geist Mono", var(--font-mono)','"Courier New", var(--font-mono)'],googleFontList=["Inter","Roboto","Open Sans","Lato","Merriweather","Poppins","Space Grotesk","Playfair Display","Source Sans 3","Montserrat","Rubik","Work Sans","Nunito","Quicksand"];function useTokenEditor(tokens,baseTokens,onChange){const setToken=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((key,value)=>{onChange({...tokens,[key]:value})},[tokens,onChange]),[sansFonts,setSansFonts]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([...defaultSansFonts]),[monoFonts,setMonoFonts]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([...defaultMonoFonts]),[googleFonts]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(googleFontList),[newFont,setNewFont]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),newFontRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(newFont);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{newFontRef.current=newFont},[newFont]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{Object.entries(tokens).forEach(([k,v])=>{if(k.startsWith("--font-src-")){const name=k.slice(11);if(!document.getElementById(`font-${name}`)){const style=document.createElement("style");style.id=`font-${name}`,style.textContent=`@font-face { font-family: '${name}'; src: url(${v}); }`,document.head.appendChild(style)}const stack=`"${name}"`;setSansFonts(f=>f.includes(stack)?f:[...f,stack]),setMonoFonts(f=>f.includes(stack)?f:[...f,stack])}})},[tokens]);const handleUpload=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((type,e)=>{var _e_target_files;const file=null===(_e_target_files=e.target.files)||void 0===_e_target_files?void 0:_e_target_files[0];if(!file)return;const name=file.name.replace(/\.[^.]+$/,""),reader=new FileReader;reader.onload=()=>{const dataUrl=reader.result;setToken(`--font-src-${name}`,dataUrl);const stack=`"${name}"`;"mono"===type?(setMonoFonts(f=>f.includes(stack)?f:[...f,stack]),setToken("--font-mono",stack)):(setSansFonts(f=>f.includes(stack)?f:[...f,stack]),setToken("--font-sans",stack))},reader.readAsDataURL(file),e.target.value=""},[setToken]),addCustomFont=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{const value=newFontRef.current;value.trim()&&(setSansFonts(f=>f.includes(value)?f:[...f,value]),setMonoFonts(f=>f.includes(value)?f:[...f,value]),setNewFont(""))},[setSansFonts,setMonoFonts,setNewFont]),loadGoogleFont=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(name=>{const id=`google-font-${name}`;if(!document.getElementById(id)){const link=document.createElement("link");link.id=id,link.rel="stylesheet",link.href=`https://fonts.googleapis.com/css2?family=${name.replace(/ /g,"+")}&display=swap`,document.head.appendChild(link)}},[]),setGoogleFont=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((type,name)=>{loadGoogleFont(name);const stack=`"${name}", var(--font-${"mono"===type?"mono":"sans"})`;"mono"===type?(setMonoFonts(f=>f.includes(stack)?f:[...f,stack]),setToken("--font-mono",stack)):(setSansFonts(f=>f.includes(stack)?f:[...f,stack]),setToken("--font-sans",stack))},[loadGoogleFont,setToken]),{colors,fonts,others}=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{const c=[],f=[],o=[];new Set([...Object.keys(baseTokens),...Object.keys(tokens)]).forEach(k=>{var _tokens_k;const current=null!==(_tokens_k=tokens[k])&&void 0!==_tokens_k?_tokens_k:baseTokens[k],def=baseTokens[k],info={key:k,value:current,defaultValue:def,isOverridden:void 0!==def&&current!==def};k.startsWith("--color")?c.push(info):k.startsWith("--font")?f.push(info):o.push(info)});const sortedFonts=f.sort((a,b)=>{const order=["--font-sans","--font-mono","--font-body","--font-heading-1","--font-heading-2"],ia=order.indexOf(a.key),ib=order.indexOf(b.key);return-1!==ia&&-1!==ib?ia-ib:-1!==ia?-1:-1!==ib?1:a.key.localeCompare(b.key)});return{colors:c,fonts:sortedFonts,others:o}},[tokens,baseTokens]);return{colors,fonts,others,sansFonts,monoFonts,googleFonts,newFont,setNewFont,setToken,handleUpload,addCustomFont,setGoogleFont}}},"../../packages/ui/src/utils/colorUtils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Sf:()=>hslToHex,g8:()=>hexToHsl,qv:()=>isHex});const HEX_RE=/^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/;function isHex(value){return HEX_RE.test(value)}function hslToHex(hsl){const[h,s,l]=hsl.split(" ").map((p,i)=>0===i?parseFloat(p):parseFloat(p)/100),a=s*Math.min(l,1-l),f=n=>{const k=(n+h/30)%12,color=l-a*Math.max(Math.min(k-3,9-k,1),-1);return Math.round(255*color).toString(16).padStart(2,"0")};return`#${f(0)}${f(8)}${f(4)}`}function hexToRgb(hex){if(!isHex(hex))throw new Error("Invalid hex color");let value=hex.slice(1);return 3===value.length&&(value=value.split("").map(c=>c+c).join("")),[parseInt(value.slice(0,2),16),parseInt(value.slice(2,4),16),parseInt(value.slice(4,6),16)]}function hexToHsl(hex){const[r,g,b]=hexToRgb(hex).map(v=>v/255),max=Math.max(r,g,b),min=Math.min(r,g,b);let h=0,s=0;const l=(max+min)/2;if(max!==min){const d=max-min;switch(s=l>.5?d/(2-max-min):d/(max+min),max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;default:h=(r-g)/d+4}h*=60}return`${Math.round(h)} ${Math.round(100*s)}% ${Math.round(100*l)}%`}},"../../packages/ui/src/utils/devicePresets.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Jh:()=>getLegacyPreset,O4:()=>getAllDevicePresets,Wn:()=>getCustomDevicePresets,bK:()=>findDevicePresetById,vh:()=>devicePresets});const devicePresets=[{id:"desktop-1280",label:"Desktop 1280",width:1280,height:800,type:"desktop",orientation:"portrait"},{id:"desktop-1440",label:"Desktop 1440",width:1440,height:900,type:"desktop",orientation:"portrait"},{id:"ipad",label:"iPad",width:768,height:1024,type:"tablet",orientation:"portrait"},{id:"ipad-pro",label:"iPad Pro",width:1024,height:1366,type:"tablet",orientation:"portrait"},{id:"ipad-mini",label:"iPad Mini",width:744,height:1133,type:"tablet",orientation:"portrait"},{id:"iphone-se",label:"iPhone SE",width:375,height:667,type:"mobile",orientation:"portrait"},{id:"iphone-12",label:"iPhone 12",width:390,height:844,type:"mobile",orientation:"portrait"},{id:"iphone-14",label:"iPhone 14",width:390,height:844,type:"mobile",orientation:"portrait"},{id:"pixel-7",label:"Pixel 7",width:412,height:915,type:"mobile",orientation:"portrait"},{id:"galaxy-note",label:"Galaxy Note",width:412,height:869,type:"mobile",orientation:"portrait"},{id:"galaxy-s8",label:"Galaxy S8",width:360,height:740,type:"mobile",orientation:"portrait"}];function getLegacyPreset(type){return{...devicePresets.find(p=>p.type===type)||devicePresets[0]}}const CUSTOM_DEVICES_KEY="pb-custom-devices";function getCustomDevicePresets(){try{0;const raw=window.localStorage.getItem(CUSTOM_DEVICES_KEY);if(!raw)return[];const arr=JSON.parse(raw);if(!Array.isArray(arr))return[];const isValid=p=>{const obj=p;return!!obj&&"string"==typeof obj.id&&"string"==typeof obj.label&&"number"==typeof obj.width&&"number"==typeof obj.height&&("desktop"===obj.type||"tablet"===obj.type||"mobile"===obj.type)};return arr.filter(isValid).map(p=>({id:p.id,label:p.label,width:p.width,height:p.height,type:p.type,orientation:"landscape"===p.orientation?"landscape":"portrait"}))}catch(e){return[]}}function getAllDevicePresets(){return[...devicePresets,...getCustomDevicePresets()]}function findDevicePresetById(id){return getAllDevicePresets().find(p=>p.id===id)}}}]);