"use strict";(self.webpackChunkcms_monorepo=self.webpackChunkcms_monorepo||[]).push([[6511],{"./packages/ui/src/components/cms/page-builder/LayersPanel.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>LayersPanel});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),core_esm=__webpack_require__("./node_modules/.pnpm/@dnd-kit+core@6.3.1_react-dom@19.2.0-canary-3fbfb9ba-20250409_react@19.2.0-canary-3fbfb_fe9249e4a42fbe7e42b4e4091f9a4c62/node_modules/@dnd-kit/core/dist/core.esm.js"),sortable_esm=__webpack_require__("./node_modules/.pnpm/@dnd-kit+sortable@10.0.0_@dnd-kit+core@6.3.1_react-dom@19.2.0-canary-3fbfb9ba-20250409__571aab38212e666fc4f105bb05843619/node_modules/@dnd-kit/sortable/dist/sortable.esm.js"),react=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js"),isHiddenForViewport=__webpack_require__("./packages/ui/src/components/cms/page-builder/state/layout/utils/isHiddenForViewport.ts"),walkTree=__webpack_require__("./packages/ui/src/components/cms/page-builder/state/layout/utils/walkTree.ts");function applyDesktopOrderAcrossBreakpoints(components,editor,dispatch){const editorMap=null!=editor?editor:{},computeEffectiveDesktopOrder=parent=>{var _parent_children;let arr=(null!==(_parent_children=parent.children)&&void 0!==_parent_children?_parent_children:[]).map((c,idx)=>({id:c.id,idx}));const strat=(parentId=>{const p=null==editorMap?void 0:editorMap[parentId],strat=null==p?void 0:p.stackDesktop;return null!=strat?strat:"default"})(parent.id);return"reverse"===strat?arr=[...arr].reverse():"custom"===strat&&(arr=[...arr].sort((a,b)=>{var _editorMap_a_id,_editorMap_b_id;const oa=null==editorMap||null===(_editorMap_a_id=editorMap[a.id])||void 0===_editorMap_a_id?void 0:_editorMap_a_id.orderDesktop,ob=null==editorMap||null===(_editorMap_b_id=editorMap[b.id])||void 0===_editorMap_b_id?void 0:_editorMap_b_id.orderDesktop,da=void 0===oa?Number.POSITIVE_INFINITY:oa,db=void 0===ob?Number.POSITIVE_INFINITY:ob;return da===db?a.idx-b.idx:da-db})),arr.map(x=>x.id)};(0,walkTree.I)(components,node=>{const kids=node.children;if(!Array.isArray(kids)||0===kids.length)return;const orderedIds=computeEffectiveDesktopOrder(node);dispatch({type:"update-editor",id:node.id,patch:{stackTablet:"custom",stackMobile:"custom"}}),orderedIds.forEach((childId,idx)=>{dispatch({type:"update-editor",id:childId,patch:{orderTablet:idx,orderMobile:idx}})})})}var Cluster=__webpack_require__("./packages/ui/src/components/atoms/primitives/Cluster.tsx"),Inline=__webpack_require__("./packages/ui/src/components/atoms/primitives/Inline.tsx"),Stack=__webpack_require__("./packages/ui/src/components/atoms/primitives/Stack.tsx"),utilities_esm=__webpack_require__("./node_modules/.pnpm/@dnd-kit+utilities@3.2.2_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@dnd-kit/utilities/dist/utilities.esm.js"),react_icons_esm=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-icons@1.3.2_react@19.2.0-canary-3fbfb9ba-20250409/node_modules/@radix-ui/react-icons/dist/react-icons.esm.js"),src=__webpack_require__("./packages/i18n/src/index.ts");function LayersPanelRow({node,index,parentId,selected,onSelect,onToggleHidden,onToggleLocked,onRename}){const t=(0,src.c3)(),{attributes,listeners,setNodeRef,transform,transition,isDragging}=(0,sortable_esm.gl)({id:node.id,data:{index,parentId}}),[editing,setEditing]=(0,react.useState)(!1);var _node_name;const[name,setName]=(0,react.useState)(null!==(_node_name=node.name)&&void 0!==_node_name?_node_name:""),toggleHiddenAria={"aria-label":node.hidden?t("cms.builder.layer.showAria"):t("cms.builder.layer.hideAria")},toggleLockAria={"aria-label":node.locked?t("cms.builder.layer.unlockAria"):t("cms.builder.layer.lockAria")},rowClass="group flex items-center justify-between rounded px-2 py-1 text-sm"+(selected?" bg-primary/10":"");var _node_name1;return(0,jsx_runtime.jsxs)("div",{ref:setNodeRef,style:{transform:utilities_esm.Ks.Transform.toString(transform),transition},className:rowClass,onClick:e=>onSelect(node.id,e),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),onSelect(node.id))},...attributes,...listeners,role:"button",tabIndex:0,"aria-pressed":isDragging,children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[(0,jsx_runtime.jsx)("span",{className:"cursor-grab",children:"⋮⋮"}),editing?(0,jsx_runtime.jsx)(RenamableInput,{value:name,onChange:e=>setName(e.target.value),onBlur:()=>{setEditing(!1),onRename(node.id,name)},onKeyDown:e=>{"Enter"===e.key&&e.target.blur()},className:"w-28 rounded border px-1 text-xs"}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("span",{className:"truncate "+(node.hidden?"opacity-50":""),onDoubleClick:()=>setEditing(!0),role:"button",tabIndex:0,"aria-label":t("cms.builder.layer.renameAria"),onKeyDown:e=>{"Enter"===e.key&&setEditing(!0)},children:null!==(_node_name1=node.name)&&void 0!==_node_name1?_node_name1:node.type}),node.__isGlobal&&(0,jsx_runtime.jsx)("span",{className:"ms-2 rounded bg-green-500/15 px-1 text-xs text-green-700",title:t("cms.builder.global.title"),children:t("cms.builder.global.label")}),node.__hasOverride&&(0,jsx_runtime.jsx)("span",{className:"ms-1 rounded bg-amber-500/15 px-1 text-xs text-amber-700",title:t("cms.builder.override.title"),children:t("cms.builder.override.label")})]})]}),(0,jsx_runtime.jsxs)(Inline.c,{gap:1,alignY:"center",children:[(0,jsx_runtime.jsx)("button",{type:"button",className:"min-h-10 min-w-10 rounded border px-2 py-1 text-xs hover:bg-accent focus-visible:outline focus-visible:outline-2 focus-visible:outline-primary",...toggleHiddenAria,title:node.hidden?t("cms.builder.layer.show"):t("cms.builder.layer.hide"),onClick:e=>{e.stopPropagation(),onToggleHidden(node.id,!node.hidden)},children:node.hidden?(0,jsx_runtime.jsx)(react_icons_esm.N5q,{}):(0,jsx_runtime.jsx)(react_icons_esm.V$C,{})}),(0,jsx_runtime.jsx)("button",{type:"button",className:"min-h-10 min-w-10 rounded border px-2 py-1 text-xs hover:bg-accent focus-visible:outline focus-visible:outline-2 focus-visible:outline-primary",...toggleLockAria,title:node.locked?t("cms.builder.layer.unlock"):t("cms.builder.layer.lock"),onClick:e=>{e.stopPropagation(),onToggleLocked(node.id,!node.locked)},children:node.locked?(0,jsx_runtime.jsx)(react_icons_esm.lqS,{}):(0,jsx_runtime.jsx)(react_icons_esm.JD_,{})})]})]})}function RenamableInput(props){const ref=(0,react.useRef)(null);return(0,react.useEffect)(()=>{var _ref_current,_ref_current1;null===(_ref_current=ref.current)||void 0===_ref_current||_ref_current.focus(),null===(_ref_current1=ref.current)||void 0===_ref_current1||_ref_current1.select()},[]),(0,jsx_runtime.jsx)("input",{ref,...props})}function LayersPanelChildren({parent,childCount,children}){const{setNodeRef,isOver}=(0,core_esm.zM)({id:`layer-container-${parent.id}`,data:{parentId:parent.id,index:childCount}});return(0,jsx_runtime.jsx)("div",{className:"ms-4",children:(0,jsx_runtime.jsx)("div",{ref:setNodeRef,className:"rounded border border-dashed px-2 py-1 "+(isOver?"border-primary":"border-transparent"),children})})}function LayerList({nodes,parentId,selectedIds,onSelect,onToggleHidden,onToggleLocked,onRename,collapsed,setCollapsed}){const items=nodes.map(n=>n.id);return(0,jsx_runtime.jsx)(sortable_esm.gB,{items,strategy:sortable_esm._G,children:(0,jsx_runtime.jsx)(Stack.B,{gap:1,children:nodes.map((n,i)=>{const hasChildren=Array.isArray(n.children)&&n.children.length>0,isCollapsed=collapsed.has(n.id);return(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsxs)(Inline.c,{gap:1,alignY:"center",children:[hasChildren&&(0,jsx_runtime.jsx)("button",{type:"button",className:"min-h-10 min-w-10 rounded border px-1 text-xs",onClick:e=>{e.stopPropagation(),setCollapsed(prev=>{const next=new Set(prev);return next.has(n.id)?next.delete(n.id):next.add(n.id),next})},children:isCollapsed?"+":"−"}),(0,jsx_runtime.jsx)(LayersPanelRow,{node:n,index:i,parentId,selected:selectedIds.includes(n.id),onSelect,onToggleHidden,onToggleLocked,onRename})]}),hasChildren&&!isCollapsed&&(0,jsx_runtime.jsx)(LayersPanelChildren,{parent:n,childCount:n.children.length,children:(0,jsx_runtime.jsx)(LayerList,{nodes:n.children||[],parentId:n.id,selectedIds,onSelect,onToggleHidden,onToggleLocked,onRename,collapsed,setCollapsed})})]},n.id)})})})}function RootDropZone({topLevelCount}){const{setNodeRef,isOver}=(0,core_esm.zM)({id:"layer-root",data:{parentId:void 0,index:topLevelCount}});return(0,jsx_runtime.jsx)("div",{ref:setNodeRef,className:"mb-1 h-2 w-full rounded "+(isOver?"bg-primary/20":"bg-transparent")})}LayersPanelRow.__docgenInfo={description:"",methods:[],displayName:"LayersPanelRow",props:{node:{required:!0,tsType:{name:"intersection",raw:"PageComponent & {\n  children?: PageComponent[];\n  name?: string;\n  hidden?: boolean;\n  locked?: boolean;\n  __isGlobal?: boolean;\n  __hasOverride?: boolean;\n}",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},{name:"signature",type:"object",raw:"{\n  children?: PageComponent[];\n  name?: string;\n  hidden?: boolean;\n  locked?: boolean;\n  __isGlobal?: boolean;\n  __hasOverride?: boolean;\n}",signature:{properties:[{key:"children",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]",required:!1}},{key:"name",value:{name:"string",required:!1}},{key:"hidden",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"__isGlobal",value:{name:"boolean",required:!1}},{key:"__hasOverride",value:{name:"boolean",required:!1}}]}}]},description:""},index:{required:!0,tsType:{name:"number"},description:""},parentId:{required:!1,tsType:{name:"string"},description:""},selected:{required:!0,tsType:{name:"boolean"},description:""},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, e?: React.MouseEvent) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"e"}],return:{name:"void"}}},description:""},onToggleHidden:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, hidden: boolean) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"boolean"},name:"hidden"}],return:{name:"void"}}},description:""},onToggleLocked:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, locked: boolean) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"boolean"},name:"locked"}],return:{name:"void"}}},description:""},onRename:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, name: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"string"},name:"name"}],return:{name:"void"}}},description:""}}},LayersPanelChildren.__docgenInfo={description:"",methods:[],displayName:"LayersPanelChildren",props:{parent:{required:!0,tsType:{name:"intersection",raw:"PageComponent & {\n  children?: PageComponent[];\n  name?: string;\n  hidden?: boolean;\n  locked?: boolean;\n  __isGlobal?: boolean;\n  __hasOverride?: boolean;\n}",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},{name:"signature",type:"object",raw:"{\n  children?: PageComponent[];\n  name?: string;\n  hidden?: boolean;\n  locked?: boolean;\n  __isGlobal?: boolean;\n  __hasOverride?: boolean;\n}",signature:{properties:[{key:"children",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]",required:!1}},{key:"name",value:{name:"string",required:!1}},{key:"hidden",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"__isGlobal",value:{name:"boolean",required:!1}},{key:"__hasOverride",value:{name:"boolean",required:!1}}]}}]},description:""},childCount:{required:!0,tsType:{name:"number"},description:""}}},LayerList.__docgenInfo={description:"",methods:[],displayName:"LayerList",props:{nodes:{required:!0,tsType:{name:"Array",elements:[{name:"intersection",raw:"PageComponent & {\n  children?: PageComponent[];\n  name?: string;\n  hidden?: boolean;\n  locked?: boolean;\n  __isGlobal?: boolean;\n  __hasOverride?: boolean;\n}",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"},{name:"signature",type:"object",raw:"{\n  children?: PageComponent[];\n  name?: string;\n  hidden?: boolean;\n  locked?: boolean;\n  __isGlobal?: boolean;\n  __hasOverride?: boolean;\n}",signature:{properties:[{key:"children",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]",required:!1}},{key:"name",value:{name:"string",required:!1}},{key:"hidden",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"__isGlobal",value:{name:"boolean",required:!1}},{key:"__hasOverride",value:{name:"boolean",required:!1}}]}}]}],raw:"LayerNode[]"},description:""},parentId:{required:!1,tsType:{name:"string"},description:""},selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, e?: React.MouseEvent) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"e"}],return:{name:"void"}}},description:""},onToggleHidden:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, hidden: boolean) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"boolean"},name:"hidden"}],return:{name:"void"}}},description:""},onToggleLocked:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, locked: boolean) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"boolean"},name:"locked"}],return:{name:"void"}}},description:""},onRename:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, name: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"string"},name:"name"}],return:{name:"void"}}},description:""},collapsed:{required:!0,tsType:{name:"Set",elements:[{name:"string"}],raw:"Set<string>"},description:""},setCollapsed:{required:!0,tsType:{name:"signature",type:"function",raw:"(updater: (prev: Set<string>) => Set<string>) => void",signature:{arguments:[{type:{name:"signature",type:"function",raw:"(prev: Set<string>) => Set<string>",signature:{arguments:[{type:{name:"Set",elements:[{name:"string"}],raw:"Set<string>"},name:"prev"}],return:{name:"Set",elements:[{name:"string"}],raw:"Set<string>"}}},name:"updater"}],return:{name:"void"}}},description:""}}};function LayersPanel({components,selectedIds,onSelectIds,dispatch,editor,viewport="desktop",crossNotices=!0}){const t=(0,src.c3)(),[search,setSearch]=(0,react.useState)(""),[collapsed,setCollapsed]=(0,react.useState)(new Set),sensors=(0,core_esm.FR)((0,core_esm.MS)(core_esm.AN),(0,core_esm.MS)(core_esm.uN,{coordinateGetter:sortable_esm.JR})),onSelect=function useSelectionHandlers(selectedIds,onSelectIds){return(0,react.useCallback)((id,e)=>{if((null==e?void 0:e.metaKey)||(null==e?void 0:e.ctrlKey)||(null==e?void 0:e.shiftKey)){const exists=selectedIds.includes(id);onSelectIds(exists?selectedIds.filter(s=>s!==id):[...selectedIds,id])}else onSelectIds([id]),setTimeout(()=>{var _el_focus;const el=document.querySelector(`[data-component-id="${id}"]`);null==el||null===(_el_focus=el.focus)||void 0===_el_focus||_el_focus.call(el)},0)},[selectedIds,onSelectIds])}(selectedIds,onSelectIds),visible=(0,react.useMemo)(()=>{const decorate=n=>{var _flags_global;const flags=(null!=editor?editor:{})[n.id],children=Array.isArray(n.children)?n.children.map(decorate):void 0,hiddenBase=n.hidden,hidden=(0,isHiddenForViewport.E)(n.id,editor,hiddenBase,viewport),name=null==flags?void 0:flags.name,isGlobal=!!(null==flags||null===(_flags_global=flags.global)||void 0===_flags_global?void 0:_flags_global.id),hasVpOverride=(()=>{if(!crossNotices)return!1;const suffix="mobile"===viewport?"Mobile":"tablet"===viewport?"Tablet":"Desktop";return Object.keys(n||{}).some(k=>k.endsWith(suffix))})();return{...n,...children?{children}:{},...void 0!==name?{name}:{},hidden,__isGlobal:isGlobal,__hasOverride:hasVpOverride}},baseNodes=components.map(decorate);if(!search)return baseNodes;const query=search.toLowerCase(),filterTree=nodes=>nodes.map(n=>{var _n_name;const name=String(null!==(_n_name=n.name)&&void 0!==_n_name?_n_name:n.type).toLowerCase(),children=Array.isArray(n.children)?filterTree(n.children):void 0;return name.includes(query)||children&&children.length>0?{...n,children}:null}).filter(Boolean);return filterTree(baseNodes)},[components,editor,viewport,search,crossNotices]);return(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)(Cluster.d,{gap:2,justify:"between",alignY:"center",children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-semibold",children:t("cms.builder.layers.title")}),(0,jsx_runtime.jsx)("button",{type:"button",className:"min-h-10 min-w-10 rounded border px-2 py-1 text-xs hover:bg-accent focus-visible:outline focus-visible:outline-2 focus-visible:outline-primary",title:t("cms.builder.applyDesktopOrder.title"),onClick:()=>{try{applyDesktopOrderAcrossBreakpoints(components,editor,dispatch)}catch(e){}},children:t("cms.builder.applyDesktopOrder.cta")})]}),(0,jsx_runtime.jsx)("label",{htmlFor:"pb-layers-search",className:"sr-only",children:t("cms.builder.searchLayers.label")}),(0,jsx_runtime.jsx)("input",{type:"text",value:search,onChange:e=>setSearch(e.target.value),placeholder:t("cms.builder.searchLayers.placeholder"),className:"w-full rounded border p-1 text-sm",id:"pb-layers-search"}),(0,jsx_runtime.jsx)(core_esm.Mp,{sensors,onDragEnd:ev=>{const{active,over}=ev;if(!over)return;const a=active.data.current,o=over.data.current;if(a&&o){if(a.parentId===o.parentId){let toIndex=o.index;return a.index<o.index&&(toIndex=o.index-1),void dispatch({type:"move",from:{parentId:a.parentId,index:a.index},to:{parentId:o.parentId,index:toIndex}})}dispatch({type:"move",from:{parentId:a.parentId,index:a.index},to:{parentId:o.parentId,index:o.index}})}},children:(0,jsx_runtime.jsxs)("div",{className:"rounded border border-dashed p-1",children:[(0,jsx_runtime.jsx)(RootDropZone,{topLevelCount:visible.length}),(0,jsx_runtime.jsx)(LayerList,{nodes:visible,selectedIds,onSelect,onToggleHidden:(id,hidden)=>{var _id,_id_hidden;const cur=null!==(_id_hidden=null===(_id=(null!=editor?editor:{})[id])||void 0===_id?void 0:_id.hidden)&&void 0!==_id_hidden?_id_hidden:[],set=new Set(cur);hidden?set.add(viewport):set.delete(viewport),dispatch({type:"update-editor",id,patch:{hidden:Array.from(set)}})},onToggleLocked:(id,locked)=>dispatch({type:"update-editor",id,patch:{locked}}),onRename:(id,name)=>dispatch({type:"update-editor",id,patch:{name}}),collapsed,setCollapsed})]})})]})}RootDropZone.__docgenInfo={description:"",methods:[],displayName:"RootDropZone",props:{topLevelCount:{required:!0,tsType:{name:"number"},description:""}}},LayersPanel.__docgenInfo={description:"",methods:[],displayName:"LayersPanel",props:{components:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onSelectIds:{required:!0,tsType:{name:"signature",type:"function",raw:"(ids: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"ids"}],return:{name:"void"}}},description:""},dispatch:{required:!0,tsType:{name:"signature",type:"function",raw:"(action: Action) => void",signature:{arguments:[{type:{name:"union",raw:"| ChangeAction\n| UndoAction\n| RedoAction\n| SetGridColsAction\n| SetBreakpointsAction\n| UpdateEditorAction",elements:[{name:"union",raw:"| AddAction\n| MoveAction\n| RemoveAction\n| DuplicateAction\n| UpdateAction\n| ResizeAction\n| SetAction",elements:[{name:"signature",type:"object",raw:'{\n  type: "add";\n  component: PageComponent;\n  parentId?: string;\n  index?: number;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"add"',required:!0}},{key:"component",value:{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}},{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!1}}]}},{name:"signature",type:"object",raw:'{\n  type: "move";\n  from: { parentId?: string; index: number };\n  to: { parentId?: string; index: number };\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"move"',required:!0}},{key:"from",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}},{key:"to",value:{name:"signature",type:"object",raw:"{ parentId?: string; index: number }",signature:{properties:[{key:"parentId",value:{name:"string",required:!1}},{key:"index",value:{name:"number",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "remove"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"remove"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "duplicate"; id: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"duplicate"',required:!0}},{key:"id",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update";\n  id: string;\n  patch: Partial<PageComponent>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"Partial<PageComponent>",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "resize";\n  id: string;\n  width?: string;\n  height?: string;\n  left?: string;\n  top?: string;\n  right?: string;\n  bottom?: string;\n  leftDesktop?: string;\n  leftTablet?: string;\n  leftMobile?: string;\n  topDesktop?: string;\n  topTablet?: string;\n  topMobile?: string;\n  widthDesktop?: string;\n  widthTablet?: string;\n  widthMobile?: string;\n  heightDesktop?: string;\n  heightTablet?: string;\n  heightMobile?: string;\n  marginDesktop?: string;\n  marginTablet?: string;\n  marginMobile?: string;\n  paddingDesktop?: string;\n  paddingTablet?: string;\n  paddingMobile?: string;\n  [key: string]: string | undefined;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"resize"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!1}},{key:"height",value:{name:"string",required:!1}},{key:"left",value:{name:"string",required:!1}},{key:"top",value:{name:"string",required:!1}},{key:"right",value:{name:"string",required:!1}},{key:"bottom",value:{name:"string",required:!1}},{key:"leftDesktop",value:{name:"string",required:!1}},{key:"leftTablet",value:{name:"string",required:!1}},{key:"leftMobile",value:{name:"string",required:!1}},{key:"topDesktop",value:{name:"string",required:!1}},{key:"topTablet",value:{name:"string",required:!1}},{key:"topMobile",value:{name:"string",required:!1}},{key:"widthDesktop",value:{name:"string",required:!1}},{key:"widthTablet",value:{name:"string",required:!1}},{key:"widthMobile",value:{name:"string",required:!1}},{key:"heightDesktop",value:{name:"string",required:!1}},{key:"heightTablet",value:{name:"string",required:!1}},{key:"heightMobile",value:{name:"string",required:!1}},{key:"marginDesktop",value:{name:"string",required:!1}},{key:"marginTablet",value:{name:"string",required:!1}},{key:"marginMobile",value:{name:"string",required:!1}},{key:"paddingDesktop",value:{name:"string",required:!1}},{key:"paddingTablet",value:{name:"string",required:!1}},{key:"paddingMobile",value:{name:"string",required:!1}},{key:{name:"string"},value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set"; components: PageComponent[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set"',required:!0}},{key:"components",value:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>",required:!0}],raw:"PageComponent[]",required:!0}}]}}]},{name:"signature",type:"object",raw:'{ type: "undo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"undo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "redo" }',signature:{properties:[{key:"type",value:{name:"literal",value:'"redo"',required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-grid-cols"; gridCols: number }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-grid-cols"',required:!0}},{key:"gridCols",value:{name:"number",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "set-breakpoints"; breakpoints: { id: string; label: string; min?: number; max?: number }[] }',signature:{properties:[{key:"type",value:{name:"literal",value:'"set-breakpoints"',required:!0}},{key:"breakpoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string; min?: number; max?: number }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}}]}}],raw:"{ id: string; label: string; min?: number; max?: number }[]",required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "update-editor";\n  id: string;\n  patch: Partial<EditorFlags>;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"update-editor"',required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"patch",value:{name:"Partial",elements:[{name:"signature",type:"object",raw:'{\n  name?: string;\n  locked?: boolean;\n  zIndex?: number;\n  hidden?: ("desktop" | "tablet" | "mobile")[];\n  hiddenDeviceIds?: string[];\n  /** Legacy single strategy (mobile); kept for backwards-compat */\n  stackStrategy?: "default" | "reverse" | "custom";\n  /** Per-device stacking strategies */\n  stackDesktop?: "default" | "reverse" | "custom";\n  stackTablet?: "default" | "reverse" | "custom";\n  stackMobile?: "default" | "reverse" | "custom";\n  /** Custom orders per device (used when corresponding strategy === "custom") */\n  orderDesktop?: number;\n  orderTablet?: number;\n  orderMobile?: number;\n  global?: {\n    id: string;\n    overrides?: unknown;\n    pinned?: boolean;\n    editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n  };\n}',signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"hidden",value:{name:"Array",elements:[{name:"unknown"}],raw:'("desktop" | "tablet" | "mobile")[]',required:!1}},{key:"hiddenDeviceIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"stackStrategy",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Legacy single strategy (mobile); kept for backwards-compat"},{key:"stackDesktop",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1},description:"Per-device stacking strategies"},{key:"stackTablet",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"stackMobile",value:{name:"union",raw:'"default" | "reverse" | "custom"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"reverse"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"orderDesktop",value:{name:"number",required:!1},description:'Custom orders per device (used when corresponding strategy === "custom")'},{key:"orderTablet",value:{name:"number",required:!1}},{key:"orderMobile",value:{name:"number",required:!1}},{key:"global",value:{name:"signature",type:"object",raw:'{\n  id: string;\n  overrides?: unknown;\n  pinned?: boolean;\n  editingSize?: Partial<Record<"desktop" | "tablet" | "mobile", number | null>>;\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"overrides",value:{name:"unknown",required:!1}},{key:"pinned",value:{name:"boolean",required:!1}},{key:"editingSize",value:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]}],raw:'Record<"desktop" | "tablet" | "mobile", number | null>'}],raw:'Partial<Record<"desktop" | "tablet" | "mobile", number | null>>',required:!1}}]},required:!1}}]}}],raw:"Partial<EditorFlags>",required:!0}}]}}]},name:"action"}],return:{name:"void"}}},description:""},editor:{required:!1,tsType:{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},description:""},viewport:{required:!1,tsType:{name:"union",raw:'"desktop" | "tablet" | "mobile"',elements:[{name:"literal",value:'"desktop"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"mobile"'}]},description:"",defaultValue:{value:'"desktop"',computed:!1}},crossNotices:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}}},"./packages/ui/src/components/cms/page-builder/state/layout/utils/addComponent.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function addAt(list,index,item){return[...list.slice(0,index),item,...list.slice(index)]}function addComponent(list,parentId,index,component){return parentId?list.map(c=>{if(c.id===parentId&&"children"in c){var _c_children;const childList=null!==(_c_children=c.children)&&void 0!==_c_children?_c_children:[],children=addAt(childList,null!=index?index:childList.length,component);return{...c,children}}return"children"in c&&Array.isArray(c.children)?{...c,children:addComponent(c.children,parentId,index,component)}:c}):addAt(list,null!=index?index:list.length,component)}__webpack_require__.d(__webpack_exports__,{X:()=>addComponent})},"./packages/ui/src/components/cms/page-builder/state/layout/utils/isHiddenForViewport.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function isHiddenForViewport(id,editor,fallbackHidden,viewport){const flags=null==editor?void 0:editor[id];return flags&&flags.hidden?viewport?flags.hidden.includes(viewport):flags.hidden.length>0:!!fallbackHidden}__webpack_require__.d(__webpack_exports__,{E:()=>isHiddenForViewport})},"./packages/ui/src/components/cms/page-builder/state/layout/utils/moveComponent.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function extractComponent(list,parentId,index){if(!parentId){return[list[index],[...list.slice(0,index),...list.slice(index+1)]]}let removed=null;const newList=list.map(c=>{if(removed)return c;if(c.id===parentId&&"children"in c){var _c_children;const childList=null!==(_c_children=c.children)&&void 0!==_c_children?_c_children:[],item=childList[index];removed=null!=item?item:null;const rest=[...childList.slice(0,index),...childList.slice(index+1)];return{...c,children:rest}}if("children"in c&&Array.isArray(c.children)){const[item,rest]=extractComponent(c.children,parentId,index);if(item)return removed=item,{...c,children:rest}}return c});return[removed,newList]}__webpack_require__.d(__webpack_exports__,{p:()=>moveComponent});var addComponent=__webpack_require__("./packages/ui/src/components/cms/page-builder/state/layout/utils/addComponent.ts");function moveComponent(list,from,to){const[item,without]=extractComponent(list,from.parentId,from.index);return item?(0,addComponent.X)(without,to.parentId,to.index,item):list}},"./packages/ui/src/components/cms/page-builder/state/layout/utils/walkTree.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function walkTree(list,visit,parent){for(const node of list){visit(node,parent);const children=node.children;Array.isArray(children)&&walkTree(children,visit,node)}}__webpack_require__.d(__webpack_exports__,{I:()=>walkTree})}}]);