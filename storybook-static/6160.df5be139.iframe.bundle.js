"use strict";(self.webpackChunkcms_monorepo=self.webpackChunkcms_monorepo||[]).push([[6160],{"./packages/ui/src/components/DynamicRenderer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>DynamicRenderer});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),blocks=__webpack_require__("./packages/ui/src/components/cms/blocks/index.ts"),react=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js"),scrollEffects=__webpack_require__("./packages/ui/src/components/cms/page-builder/scrollEffects.ts"),timeline=__webpack_require__("./packages/ui/src/components/cms/page-builder/timeline.ts"),lottie=__webpack_require__("./packages/ui/src/components/cms/page-builder/lottie.ts");const STYLE_ID="pb-lightbox-styles";function ensureLightboxStyles(){if("undefined"==typeof document||globalThis.__pbLightboxStyles)return;if(document.getElementById(STYLE_ID))return void(globalThis.__pbLightboxStyles=!0);const style=document.createElement("style");style.id=STYLE_ID,style.textContent='\n  .pb-lightbox-open { overflow: hidden; }\n  .pb-lightbox { position: fixed; inset: 0; z-index: 9999; display: none; align-items: center; justify-content: center; }\n  .pb-lightbox[aria-hidden="false"] { display: flex; }\n  .pb-lightbox-backdrop { position: absolute; inset: 0; background: rgba(0,0,0,0.8); }\n  .pb-lightbox-content { position: relative; z-index: 1; max-width: 90vw; max-height: 90vh; display: flex; flex-direction: column; align-items: center; gap: .5rem; }\n  .pb-lightbox-content img { max-width: 90vw; max-height: 80vh; object-fit: contain; }\n  .pb-lightbox-caption { color: var(--color-fg); font-size: 12px; text-align: center; }\n  .pb-lightbox-btn { position: absolute; z-index: 1; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.15); color: var(--color-fg); border: none; padding: .5rem .75rem; cursor: pointer; border-radius: .25rem; }\n  .pb-lightbox-prev { left: 1rem; }\n  .pb-lightbox-next { right: 1rem; }\n  .pb-lightbox-close { position: absolute; top: 1rem; right: 1rem; background: rgba(255,255,255,0.15); color: var(--color-fg); border: none; padding: .25rem .5rem; cursor: pointer; border-radius: .25rem; }\n  ',document.head.appendChild(style),globalThis.__pbLightboxStyles=!0}function initLightbox(){if("undefined"==typeof document||globalThis.__pbLightboxReady)return;globalThis.__pbLightboxReady=!0,ensureLightboxStyles();let overlay=null,imgEl=null,captionEl=null,prevBtn=null,nextBtn=null,closeBtn=null,previouslyFocused=null,anchors=[],index=0;const docRoot=document.documentElement,LB_PREV=docRoot.getAttribute("data-lightbox-prev-label")||void 0,LB_NEXT=docRoot.getAttribute("data-lightbox-next-label")||void 0,LB_CLOSE=docRoot.getAttribute("data-lightbox-close-label")||void 0;function update(){const a=anchors[index];if(!a||!imgEl)return;const img=a.querySelector("img");var _img_getAttribute;imgEl.src=a.href,imgEl.alt=null!==(_img_getAttribute=null==img?void 0:img.getAttribute("alt"))&&void 0!==_img_getAttribute?_img_getAttribute:"",captionEl&&(captionEl.textContent=(null==img?void 0:img.getAttribute("aria-label"))||a.getAttribute("aria-label")||"")}function open(ev,clicked){var _clicked_closest;ev.preventDefault(),overlay||function buildOverlay(){overlay=document.createElement("div"),overlay.className="pb-lightbox",overlay.setAttribute("role","dialog"),overlay.setAttribute("aria-modal","true"),overlay.setAttribute("aria-hidden","true"),overlay.tabIndex=-1;const backdrop=document.createElement("div");backdrop.className="pb-lightbox-backdrop",backdrop.addEventListener("click",close);const figure=document.createElement("figure");figure.className="pb-lightbox-content",imgEl=document.createElement("img"),captionEl=document.createElement("figcaption"),captionEl.className="pb-lightbox-caption",figure.appendChild(imgEl),figure.appendChild(captionEl);const GLYPH_PREV=String.fromCharCode(8249);prevBtn=document.createElement("button"),prevBtn.className="pb-lightbox-btn pb-lightbox-prev",LB_PREV&&prevBtn.setAttribute("aria-label",LB_PREV),prevBtn.textContent=GLYPH_PREV,prevBtn.addEventListener("click",prev);const GLYPH_NEXT=String.fromCharCode(8250);nextBtn=document.createElement("button"),nextBtn.className="pb-lightbox-btn pb-lightbox-next",LB_NEXT&&nextBtn.setAttribute("aria-label",LB_NEXT),nextBtn.textContent=GLYPH_NEXT,nextBtn.addEventListener("click",next);const GLYPH_CLOSE=String.fromCharCode(215);closeBtn=document.createElement("button"),closeBtn.className="pb-lightbox-close",LB_CLOSE&&closeBtn.setAttribute("aria-label",LB_CLOSE),closeBtn.textContent=GLYPH_CLOSE,closeBtn.addEventListener("click",close),overlay.appendChild(backdrop),overlay.appendChild(figure),overlay.appendChild(prevBtn),overlay.appendChild(nextBtn),overlay.appendChild(closeBtn),document.body.appendChild(overlay)}(),previouslyFocused=document.activeElement;const root=null!==(_clicked_closest=clicked.closest("[data-lightbox-root]"))&&void 0!==_clicked_closest?_clicked_closest:clicked.parentElement;anchors=root?Array.from(root.querySelectorAll("a[data-lightbox]")):[clicked],index=anchors.indexOf(clicked),index<0&&(index=0),update(),overlay.setAttribute("aria-hidden","false"),document.documentElement.classList.add("pb-lightbox-open"),setTimeout(()=>null==closeBtn?void 0:closeBtn.focus(),0)}function close(){var _previouslyFocused_focus;overlay&&(overlay.setAttribute("aria-hidden","true"),document.documentElement.classList.remove("pb-lightbox-open"),null==previouslyFocused||null===(_previouslyFocused_focus=previouslyFocused.focus)||void 0===_previouslyFocused_focus||_previouslyFocused_focus.call(previouslyFocused))}function next(){anchors.length&&(index=(index+1)%anchors.length,update())}function prev(){anchors.length&&(index=(index-1+anchors.length)%anchors.length,update())}document.addEventListener("keydown",function onKey(e){if(overlay&&"true"!==overlay.getAttribute("aria-hidden"))if("Escape"===e.key)e.preventDefault(),close();else if("ArrowRight"===e.key)e.preventDefault(),next();else if("ArrowLeft"===e.key)e.preventDefault(),prev();else if("Tab"===e.key){const focusables=[closeBtn,prevBtn,nextBtn].filter(Boolean),dir=e.shiftKey?-1:1,current=document.activeElement,i=focusables.indexOf(current||closeBtn);focusables[(i+dir+focusables.length)%focusables.length].focus(),e.preventDefault()}}),document.addEventListener("click",e=>{var _target_closest;const target=e.target,a=null==target||null===(_target_closest=target.closest)||void 0===_target_closest?void 0:_target_closest.call(target,"a[data-lightbox]");a&&open(e,a)})}var utils_style=__webpack_require__("./packages/ui/src/utils/style/index.ts"),console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");function DynamicRenderer({components,locale,runtimeData,editor}){(0,react.useEffect)(()=>{(0,scrollEffects.aC)(),(0,scrollEffects.de)(),(0,scrollEffects.ey)(),(0,timeline.P)(),(0,lottie.k)(),ensureLightboxStyles(),initLightbox()},[]);const renderBlock=block=>{var _editor_id;const blockRecord=block;if(!0===blockRecord.hidden)return null;const entry=blocks.RW[block.type];if(!entry)return console.warn(`Unknown component type: ${block.type}`),null;const{component:Comp,getRuntimeProps}=entry,{id,type:_type,width,height,margin,padding,position,top,left,children:childBlocks,animation:_animIgnored,animationDuration:_animDurIgnored,animationDelay:_animDelayIgnored,animationEasing:_animEaseIgnored,reveal:_revealIgnored,parallax:_parallaxIgnored,sticky:_stickyIgnored,stickyOffset:_stickyOffsetIgnored,hoverScale:_hoverScaleIgnored,hoverOpacity:_hoverOpacityIgnored,staggerChildren:_staggerIgnored,timeline:_timelineIgnored,lottieUrl:_lottieUrlIgnored,lottieAutoplay:_lottieAutoplayIgnored,lottieLoop:_lottieLoopIgnored,lottieSpeed:_lottieSpeedIgnored,lottieTrigger:_lottieTriggerIgnored,orderMobile:_orderMobileIgnored,stackStrategy:_stackStrategyIgnored,gridArea:_gridAreaIgnored,gridColumn:_gridColumnIgnored,gridRow:_gridRowIgnored,styles:_stylesIgnored,...rest}=block;let varsRecord,styleVars={};try{const raw=blockRecord.styles,overrides="string"==typeof raw?JSON.parse(String(raw)):void 0,vars=(0,utils_style.O)(overrides);styleVars=vars,varsRecord=vars}catch(e){}const style={width,height,margin,padding,position,top,left,..."number"==typeof blockRecord.zIndex?{zIndex:blockRecord.zIndex}:{},...styleVars,fontFamily:(null==varsRecord?void 0:varsRecord["--font-family"])?"var(--font-family)":void 0,fontSize:(null==varsRecord?void 0:varsRecord["--font-size"])||(null==varsRecord?void 0:varsRecord["--font-size-desktop"])||(null==varsRecord?void 0:varsRecord["--font-size-tablet"])||(null==varsRecord?void 0:varsRecord["--font-size-mobile"])?"var(--font-size)":void 0,lineHeight:(null==varsRecord?void 0:varsRecord["--line-height"])||(null==varsRecord?void 0:varsRecord["--line-height-desktop"])||(null==varsRecord?void 0:varsRecord["--line-height-tablet"])||(null==varsRecord?void 0:varsRecord["--line-height-mobile"])?"var(--line-height)":void 0};var _blockRecord_hiddenBreakpoints,_editor_id_hidden;const hidden=[...null!==(_blockRecord_hiddenBreakpoints=blockRecord.hiddenBreakpoints)&&void 0!==_blockRecord_hiddenBreakpoints?_blockRecord_hiddenBreakpoints:[],...null!==(_editor_id_hidden=null==editor||null===(_editor_id=editor[id])||void 0===_editor_id?void 0:_editor_id.hidden)&&void 0!==_editor_id_hidden?_editor_id_hidden:[]],hideClasses=[hidden.includes("desktop")?"pb-hide-desktop":"",hidden.includes("tablet")?"pb-hide-tablet":"",hidden.includes("mobile")?"pb-hide-mobile":""].filter(Boolean).join(" "),om=blockRecord.orderMobile,orderMobile="number"==typeof om?om:void 0,orderClass="number"==typeof orderMobile?`pb-order-mobile-${orderMobile}`:"",stackClass="reverse"===blockRecord.stackStrategy?"pb-stack-mobile-reverse":"",animRaw=blockRecord.animation,animation="string"==typeof animRaw&&["none","fade","slide","slide-up","slide-down","slide-left","slide-right","zoom","rotate"].includes(animRaw)?animRaw:void 0,animationDuration=blockRecord.animationDuration,animationDelay=blockRecord.animationDelay,animationEasing=blockRecord.animationEasing,reveal=blockRecord.reveal,parallax=blockRecord.parallax,sticky=blockRecord.sticky,stickyOffset=blockRecord.stickyOffset,animClass=animation&&"none"!==animation&&{fade:"pb-animate pb-animate-fade",slide:"pb-animate pb-animate-slide","slide-up":"pb-animate pb-animate-slide-up","slide-down":"pb-animate pb-animate-slide-down","slide-left":"pb-animate pb-animate-slide-left","slide-right":"pb-animate pb-animate-slide-right",zoom:"pb-animate pb-animate-zoom",rotate:"pb-animate pb-animate-rotate"}[animation]||"";let extraProps={};if(getRuntimeProps){const runtime=getRuntimeProps(block,locale);extraProps={...extraProps,...runtime}}runtimeData&&runtimeData[block.type]&&(extraProps={...extraProps,...runtimeData[block.type]});const mergedClass=[rest.className,stackClass].filter(Boolean).join(" ");mergedClass&&(extraProps.className=mergedClass);const hoverScale=blockRecord.hoverScale,hoverOpacity=blockRecord.hoverOpacity,staggerChildren=blockRecord.staggerChildren,timeline=blockRecord.timeline,lottieUrl=blockRecord.lottieUrl,lottieAutoplay=blockRecord.lottieAutoplay,lottieLoop=blockRecord.lottieLoop,lottieSpeed=blockRecord.lottieSpeed,lottieTrigger=blockRecord.lottieTrigger,needsHover="number"==typeof hoverScale||"number"==typeof hoverOpacity,gridArea=blockRecord.gridArea,gridColumn=blockRecord.gridColumn,gridRow=blockRecord.gridRow,staticTransform=null==varsRecord?void 0:varsRecord["--pb-static-transform"],{staggerChildren:_staggerChildren_omit,...cleanRest}=rest,{staggerChildren:_staggerChildren_extra,...cleanExtraProps}=extraProps;return(0,jsx_runtime.jsx)("div",{style:{...style,...(()=>{const dyn={};return"number"==typeof animationDuration&&(dyn["--pb-anim-duration"]=`${animationDuration}ms`),"number"==typeof animationDelay&&(dyn["--pb-anim-delay"]=`${animationDelay}ms`),animationEasing&&(dyn["--pb-anim-ease"]=animationEasing),void 0!==stickyOffset&&(dyn["--pb-sticky-offset"]="number"==typeof stickyOffset?`${stickyOffset}px`:String(stickyOffset)),"number"==typeof hoverScale&&(dyn["--pb-hover-scale"]=String(hoverScale)),"number"==typeof hoverOpacity&&(dyn["--pb-hover-opacity"]=String(hoverOpacity)),dyn})(),...gridArea?{gridArea}:{},...gridColumn?{gridColumn}:{},...gridRow?{gridRow}:{}},className:["pb-scope",hideClasses,orderClass,animClass].filter(Boolean).join(" ")||void 0,"data-pb-duration":"number"==typeof animationDuration?animationDuration:void 0,"data-pb-delay":"number"==typeof animationDelay?animationDelay:void 0,"data-pb-ease":animationEasing||void 0,"data-pb-reveal":reveal||void 0,"data-pb-parallax":"number"==typeof parallax?parallax:void 0,"data-pb-sticky":sticky||void 0,"data-pb-sticky-offset":void 0!==stickyOffset?String(stickyOffset):void 0,"data-pb-hover":needsHover?"1":void 0,"data-pb-click":(()=>{const action=blockRecord.clickAction;return"open-modal"===action?"open-modal":"scroll-to"===action?"scroll-to":void 0})(),"data-pb-href":blockRecord.href||void 0,"data-pb-modal":blockRecord.modalHtml||void 0,"data-pb-stagger":"number"==typeof staggerChildren?String(staggerChildren):void 0,"data-pb-timeline":(()=>{const t=timeline;return t&&Array.isArray(t.steps)&&t.steps.length?JSON.stringify(t):void 0})(),"data-pb-lottie-url":lottieUrl||void 0,"data-pb-lottie-autoplay":lottieAutoplay?"1":void 0,"data-pb-lottie-loop":lottieLoop?"1":void 0,"data-pb-lottie-speed":"number"==typeof lottieSpeed?String(lottieSpeed):void 0,"data-pb-lottie-trigger":lottieTrigger||void 0,children:needsHover?(0,jsx_runtime.jsx)("div",{className:"pb-hover-target",children:(0,jsx_runtime.jsx)(Comp,{...cleanRest,...cleanExtraProps,id,type:_type,locale,children:null==childBlocks?void 0:childBlocks.map(child=>renderBlock(child))})}):staticTransform?(0,jsx_runtime.jsx)("div",{style:{transform:staticTransform},children:(0,jsx_runtime.jsx)(Comp,{...cleanRest,...cleanExtraProps,id,type:_type,locale,children:null==childBlocks?void 0:childBlocks.map(child=>renderBlock(child))})}):(0,jsx_runtime.jsx)(Comp,{...cleanRest,...cleanExtraProps,id,type:_type,locale,children:null==childBlocks?void 0:childBlocks.map(child=>renderBlock(child))})},id)};return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:components.map(c=>renderBlock(c))})}DynamicRenderer.__docgenInfo={description:"",methods:[],displayName:"DynamicRenderer",props:{components:{required:!0,tsType:{name:"Array",elements:[{name:"z.infer",elements:[{name:"pageComponentSchema"}],raw:"z.infer<typeof pageComponentSchema>"}],raw:"PageComponent[]"},description:""},locale:{required:!0,tsType:{name:"Locale"},description:""},runtimeData:{required:!1,tsType:{name:"Partial",elements:[{name:"Record",elements:[{name:"unknown"},{name:"Record",elements:[{name:"string"},{name:"unknown"}],raw:"Record<string, unknown>"}],raw:"Record<BlockType, Record<string, unknown>>"}],raw:"Partial<Record<BlockType, Record<string, unknown>>>"},description:""},editor:{required:!1,tsType:{name:'HistoryState["editor"]',raw:'HistoryState["editor"]'},description:"Optional editor metadata map (builder-only flags)"}}}},"./packages/ui/src/components/cms/page-builder/lottie.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{k:()=>initLottie});let initialized=!1;const cleanupFns=[],instances=new WeakMap;function ensureContainer(el){if(el.querySelector(":scope > .pb-lottie"))return el.querySelector(":scope > .pb-lottie");const wrap=document.createElement("div");wrap.className="pb-lottie",wrap.style.position="absolute",wrap.style.inset="0",wrap.style.pointerEvents="none";return"static"===getComputedStyle(el).position&&(el.style.position="relative"),el.appendChild(wrap),wrap}function initLottie(root){if("undefined"==typeof document)return;if(initialized)return;initialized=!0;const scan=async scope=>{const container=scope||root||document,nodes=Array.from(container.querySelectorAll("[data-pb-lottie-url]"));if(0===nodes.length)return;const lottie=await async function loadLottie(){const mod=await __webpack_require__.e(3436).then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/.pnpm/lottie-web@5.13.0/node_modules/lottie-web/build/player/lottie.js",23));return mod.default||mod}();for(const el of nodes){if(instances.has(el))continue;const url=el.getAttribute("data-pb-lottie-url")||"";if(!url)continue;const autoplay="1"===(el.getAttribute("data-pb-lottie-autoplay")||"").trim(),loop="1"===(el.getAttribute("data-pb-lottie-loop")||"").trim(),speed=Number(el.getAttribute("data-pb-lottie-speed")||"1")||1,trigger=(el.getAttribute("data-pb-lottie-trigger")||"load").trim(),containerEl=ensureContainer(el),inst=lottie.loadAnimation({container:containerEl,renderer:"svg",loop,autoplay:autoplay&&"scroll"!==trigger,path:url});try{var _inst_setSpeed;null===(_inst_setSpeed=inst.setSpeed)||void 0===_inst_setSpeed||_inst_setSpeed.call(inst,speed)}catch(e){}if(instances.set(el,inst),"hover"===trigger){const enter=()=>{try{var _inst_goToAndPlay;null===(_inst_goToAndPlay=inst.goToAndPlay)||void 0===_inst_goToAndPlay||_inst_goToAndPlay.call(inst,0,!0)}catch(e){}},leave=()=>{try{var _inst_stop;null===(_inst_stop=inst.stop)||void 0===_inst_stop||_inst_stop.call(inst)}catch(e){}};el.addEventListener("mouseenter",enter),el.addEventListener("mouseleave",leave),cleanupFns.push(()=>{el.removeEventListener("mouseenter",enter),el.removeEventListener("mouseleave",leave)})}else if("click"===trigger){const onClick=()=>{try{var _inst_goToAndPlay;null===(_inst_goToAndPlay=inst.goToAndPlay)||void 0===_inst_goToAndPlay||_inst_goToAndPlay.call(inst,0,!0)}catch(e){}};el.addEventListener("click",onClick),cleanupFns.push(()=>el.removeEventListener("click",onClick))}else if("in-view"===trigger){const io=new IntersectionObserver(entries=>{for(const entry of entries)if(entry.isIntersecting){try{var _inst_goToAndPlay;null===(_inst_goToAndPlay=inst.goToAndPlay)||void 0===_inst_goToAndPlay||_inst_goToAndPlay.call(inst,0,!0)}catch(e){}io.unobserve(el)}},{threshold:.2});io.observe(el),cleanupFns.push(()=>io.disconnect())}else if("scroll"===trigger){const onScroll=()=>{const rect=el.getBoundingClientRect(),vh=window.innerHeight||1,progress=Math.max(0,Math.min(1,1-rect.top/vh));try{var _inst_getDuration,_inst_goToAndStop;const total=(null===(_inst_getDuration=inst.getDuration)||void 0===_inst_getDuration?void 0:_inst_getDuration.call(inst,!0))||1;null===(_inst_goToAndStop=inst.goToAndStop)||void 0===_inst_goToAndStop||_inst_goToAndStop.call(inst,total*progress,!0)}catch(e){}},handler=()=>requestAnimationFrame(onScroll);window.addEventListener("scroll",handler,{passive:!0}),cleanupFns.push(()=>window.removeEventListener("scroll",handler)),onScroll()}}};scan();const mo=new MutationObserver(mutations=>{for(const m of mutations)"childList"===m.type&&m.addedNodes.forEach(n=>{1===n.nodeType&&scan(n)})});mo.observe(root||document.body,{childList:!0,subtree:!0}),cleanupFns.push(()=>mo.disconnect())}},"./packages/ui/src/components/cms/page-builder/scrollEffects.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{aC:()=>ensureScrollStyles,de:()=>ensureAnimationStyles,ey:()=>initScrollEffects});let stylesInjected=!1;const STYLE_ID="pb-scroll-effects";let animInjected=!1;const ANIM_ID="pb-animations";function ensureScrollStyles(){if("undefined"==typeof document||stylesInjected)return;if(document.getElementById(STYLE_ID))return void(stylesInjected=!0);const style=document.createElement("style");style.id=STYLE_ID,style.textContent='\n/* Reveal helpers: initial state is hidden; script toggles to visible */\n[data-pb-reveal] { opacity: 0; transform: translateY(8px); transition-property: opacity, transform; }\n.pb-revealed { opacity: 1 !important; transform: none !important; }\n\n/* Sticky helpers */\n[data-pb-sticky="top"] { position: sticky; top: var(--pb-sticky-offset, 0px); }\n[data-pb-sticky="bottom"] { position: sticky; bottom: var(--pb-sticky-offset, 0px); }\n\n/* Hover effects wrapper */\n[data-pb-hover] { position: relative; }\n[data-pb-hover] .pb-hover-target {\n  transition: transform 200ms ease, opacity 200ms ease;\n  transform-origin: center center;\n  /* Respect any static transform overrides */\n  transform: var(--pb-static-transform, none);\n}\n[data-pb-hover]:hover .pb-hover-target {\n  transform: var(--pb-static-transform, none) scale(var(--pb-hover-scale, 1));\n  opacity: var(--pb-hover-opacity, 1);\n}\n',document.head.appendChild(style),stylesInjected=!0}function ensureAnimationStyles(){if("undefined"==typeof document||animInjected)return;if(document.getElementById(ANIM_ID))return void(animInjected=!0);const style=document.createElement("style");style.id=ANIM_ID,style.textContent="\n@keyframes pb-fade { from { opacity: 0; } to { opacity: 1; } }\n@keyframes pb-slide { from { transform: translateY(1rem); opacity: 0; } to { transform: translateY(0); opacity: 1; } }\n@keyframes pb-slide-up { from { transform: translateY(1rem); opacity: 0; } to { transform: translateY(0); opacity: 1; } }\n@keyframes pb-slide-down { from { transform: translateY(-1rem); opacity: 0; } to { transform: translateY(0); opacity: 1; } }\n@keyframes pb-slide-left { from { transform: translateX(1rem); opacity: 0; } to { transform: translateX(0); opacity: 1; } }\n@keyframes pb-slide-right { from { transform: translateX(-1rem); opacity: 0; } to { transform: translateX(0); opacity: 1; } }\n@keyframes pb-zoom { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }\n@keyframes pb-rotate { from { transform: rotate(-8deg); opacity: 0; } to { transform: rotate(0deg); opacity: 1; } }\n.pb-animate { animation-duration: var(--pb-anim-duration, .5s); animation-delay: var(--pb-anim-delay, 0s); animation-timing-function: var(--pb-anim-ease, ease); animation-fill-mode: both; will-change: transform, opacity; }\n.pb-animate-fade { animation-name: pb-fade; }\n.pb-animate-slide { animation-name: pb-slide; }\n.pb-animate-slide-up { animation-name: pb-slide-up; }\n.pb-animate-slide-down { animation-name: pb-slide-down; }\n.pb-animate-slide-left { animation-name: pb-slide-left; }\n.pb-animate-slide-right { animation-name: pb-slide-right; }\n.pb-animate-zoom { animation-name: pb-zoom; }\n.pb-animate-rotate { animation-name: pb-rotate; }\n",document.head.appendChild(style),animInjected=!0}let initialized=!1;const cleanupFns=[];function initScrollEffects(root){if("undefined"==typeof document)return;if(ensureScrollStyles(),initialized)return;initialized=!0;const parallaxEls=[],setRevealInitial=el=>{const duration=(el.getAttribute("data-pb-duration")||"").trim(),delay=(el.getAttribute("data-pb-delay")||"").trim(),ease=(el.getAttribute("data-pb-ease")||"").trim();duration&&(el.style.transitionDuration=`${Number(duration)}ms`),delay&&(el.style.transitionDelay=`${Number(delay)}ms`),ease&&(el.style.transitionTimingFunction=ease);const type=(el.getAttribute("data-pb-reveal")||"fade").trim();"fade"===type?el.style.opacity="0":"slide-up"===type?(el.style.transform="translateY(12px)",el.style.opacity="0"):"slide-down"===type?(el.style.transform="translateY(-12px)",el.style.opacity="0"):"slide-left"===type?(el.style.transform="translateX(12px)",el.style.opacity="0"):"slide-right"===type?(el.style.transform="translateX(-12px)",el.style.opacity="0"):"zoom"===type?(el.style.transform="scale(0.98)",el.style.opacity="0"):"rotate"===type?(el.style.transform="rotate(-4deg)",el.style.opacity="0"):el.style.opacity="0"},revealObserver=void 0!==globalThis.IntersectionObserver?new IntersectionObserver((entries,observer)=>{for(const entry of entries){const el=entry.target;entry.isIntersecting&&(el.classList.add("pb-revealed"),el.style.opacity="",el.style.transform="",observer.unobserve(el))}},{threshold:.2}):null,scan=scope=>{const container=scope||root||document,revealNodes=Array.from(container.querySelectorAll("[data-pb-reveal]"));for(const el of revealNodes)el.classList.contains("pb-revealed")||(setRevealInitial(el),revealObserver?revealObserver.observe(el):(el.classList.add("pb-revealed"),el.style.opacity="",el.style.transform=""));const pNodes=Array.from(container.querySelectorAll("[data-pb-parallax]"));for(const el of pNodes){const factor=Number(el.getAttribute("data-pb-parallax"))||.2,baseY=el.getBoundingClientRect().top+window.scrollY;parallaxEls.push({el,factor,baseY})}const sNodes=Array.from(container.querySelectorAll("[data-pb-sticky-offset]"));for(const el of sNodes){const offset=(el.getAttribute("data-pb-sticky-offset")||"0").trim();el.style.setProperty("--pb-sticky-offset",/px|%|rem|em/.test(offset)?offset:`${Number(offset)}px`)}const staggerNodes=Array.from(container.querySelectorAll("[data-pb-stagger]"));for(const el of staggerNodes){const base=Number(el.getAttribute("data-pb-stagger"))||0;if(base<=0)continue;Array.from(el.children).forEach((child,idx)=>{try{const delay=base*idx;child.style&&(child.style.transitionDelay=`${delay}ms`)}catch(e){}})}};let ticking=!1;const onScroll=()=>{ticking||(ticking=!0,requestAnimationFrame(()=>{const viewportTop=window.scrollY,viewportHeight=window.innerHeight;for(const p of parallaxEls){const translate=-(p.baseY-viewportTop-viewportHeight/2)*p.factor*.1;p.el.style.transform=`translateY(${translate.toFixed(2)}px)`}ticking=!1}))},onResize=()=>{for(const p of parallaxEls){const rect=p.el.getBoundingClientRect();p.baseY=rect.top+window.scrollY}onScroll()};scan(),onScroll(),window.addEventListener("scroll",onScroll,{passive:!0}),window.addEventListener("resize",onResize),cleanupFns.push(()=>window.removeEventListener("scroll",onScroll)),cleanupFns.push(()=>window.removeEventListener("resize",onResize)),revealObserver&&cleanupFns.push(()=>revealObserver.disconnect());const mo=new MutationObserver(mutations=>{for(const m of mutations)"childList"===m.type&&m.addedNodes.forEach(n=>{1===n.nodeType&&scan(n)})});mo.observe(root||document.body,{childList:!0,subtree:!0}),cleanupFns.push(()=>mo.disconnect());const onClick=e=>{const target=e.target;if(!target)return;const el=target.closest("[data-pb-click]");if(!el)return;const action=el.getAttribute("data-pb-click");if(action)if("scroll-to"===action){e.preventDefault();const href=el.getAttribute("data-pb-href")||"",id=href.startsWith("#")?href.slice(1):href;if(!id)return;var _document_getElementById;const dest=null!==(_document_getElementById=document.getElementById(id))&&void 0!==_document_getElementById?_document_getElementById:document.querySelector(href);if(dest)try{dest.scrollIntoView({behavior:"smooth",block:"start"})}catch(e){dest.scrollIntoView()}}else if("open-modal"===action){e.preventDefault();const text=el.getAttribute("data-pb-modal")||"",overlay=document.createElement("div");overlay.style.position="fixed",overlay.style.inset="0",overlay.style.background="rgba(0,0,0,0.5)",overlay.style.zIndex="9999",overlay.style.display="flex",overlay.style.alignItems="center",overlay.style.justifyContent="center";const modal=document.createElement("div");modal.style.background="white",modal.style.maxWidth="min(90vw, 640px)",modal.style.maxHeight="80vh",modal.style.padding="16px",modal.style.borderRadius="8px",modal.style.overflow="auto";const close=document.createElement("button");close.textContent="×",close.style.position="absolute",close.style.top="12px",close.style.right="16px",close.style.fontSize="20px",close.style.background="transparent",close.style.border="none",close.style.cursor="pointer";const wrap=document.createElement("div");wrap.style.position="relative",wrap.style.display="inline-block",wrap.appendChild(close);const content=document.createElement("div");content.textContent=text||" ",wrap.appendChild(content),modal.appendChild(wrap),overlay.appendChild(modal);const destroy=()=>{try{document.body.removeChild(overlay)}catch(e){}window.removeEventListener("keydown",onKey)},onKey=ke=>{"Escape"===ke.key&&destroy()};overlay.addEventListener("click",evt=>{evt.target===overlay&&destroy()}),close.addEventListener("click",destroy),document.body.appendChild(overlay),window.addEventListener("keydown",onKey)}};document.addEventListener("click",onClick),cleanupFns.push(()=>document.removeEventListener("click",onClick))}},"./packages/ui/src/components/cms/page-builder/timeline.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{P:()=>initTimelines});let initialized=!1;const tracked=new WeakMap,cleanupFns=[];function applyStep(el,s){const parts=[];if("number"==typeof s.x||"number"==typeof s.y){var _s_x;const tx=null!==(_s_x=s.x)&&void 0!==_s_x?_s_x:0;var _s_y;const ty=null!==(_s_y=s.y)&&void 0!==_s_y?_s_y:0;parts.push(`translate(${tx}px, ${ty}px)`)}"number"==typeof s.scale&&parts.push(`scale(${s.scale})`),"number"==typeof s.rotate&&parts.push(`rotate(${s.rotate}deg)`),parts.length>0&&(el.style.transform=parts.join(" ")),"number"==typeof s.opacity&&(el.style.opacity=String(s.opacity))}function seqPlay(el,cfg){if(!cfg.steps||0===cfg.steps.length)return;const steps=cfg.steps;let i=0;const run=()=>{const s=steps[i];var _s_duration;const d=Math.max(0,Number(null!==(_s_duration=s.duration)&&void 0!==_s_duration?_s_duration:0)),ease=s.easing||"";if(d>0?(el.style.transitionProperty="transform, opacity",el.style.transitionDuration=`${d}ms`,ease&&(el.style.transitionTimingFunction=ease)):(el.style.transitionProperty="",el.style.transitionDuration="",el.style.transitionTimingFunction=""),applyStep(el,s),i++,i<steps.length){const delay=d>0?d:0,id=window.setTimeout(run,delay);cleanupFns.push(()=>window.clearTimeout(id))}else if(cfg.loop){var _steps_,_steps__duration;i=0;const id=window.setTimeout(run,Math.max(50,Number(null!==(_steps__duration=null===(_steps_=steps[steps.length-1])||void 0===_steps_?void 0:_steps_.duration)&&void 0!==_steps__duration?_steps__duration:0)));cleanupFns.push(()=>window.clearTimeout(id))}};run()}function lerp(a,b,t){return a+(b-a)*t}function initTimelines(root){if("undefined"==typeof document)return;if(initialized)return;initialized=!0;const scan=scope=>{const container=scope||root||document;Array.from(container.querySelectorAll("[data-pb-timeline]")).forEach(el=>{if(tracked.has(el))return;let cfg;try{const raw=el.getAttribute("data-pb-timeline")||"";cfg=raw?JSON.parse(raw):void 0}catch(e){cfg=void 0}if(cfg&&cfg.steps&&0!==cfg.steps.length)if(tracked.set(el,{cfg}),"scroll"!==cfg.trigger&&cfg.steps[0]&&(el.style.transitionProperty="",el.style.transitionDuration="",el.style.transitionTimingFunction="",applyStep(el,cfg.steps[0])),"load"===cfg.trigger)seqPlay(el,cfg);else if("click"===cfg.trigger){const onClick=e=>{var _e_target;(null===(_e_target=e.target)||void 0===_e_target?void 0:_e_target.closest("[data-pb-timeline]"))&&seqPlay(el,cfg)};el.addEventListener("click",onClick),cleanupFns.push(()=>el.removeEventListener("click",onClick))}else if("in-view"===cfg.trigger){const io=new IntersectionObserver(entries=>{for(const entry of entries)entry.isIntersecting&&(seqPlay(el,cfg),io.unobserve(el))},{threshold:.2});io.observe(el),cleanupFns.push(()=>io.disconnect())}else"scroll"===cfg.trigger&&function scrollBind(el,cfg){if(!cfg.steps||0===cfg.steps.length)return;const steps=[...cfg.steps].map(s=>({...s,at:"number"==typeof s.at?s.at:0})).sort((a,b)=>a.at-b.at),onScroll=()=>{const rect=el.getBoundingClientRect(),vh=window.innerHeight||1,enter=Math.max(0,Math.min(1,1-rect.top/vh)),progress=Math.max(0,Math.min(1,enter));let a=steps[0],b=steps[steps.length-1];for(let i=0;i<steps.length-1;i++)if(progress>=steps[i].at&&progress<=steps[i+1].at){a=steps[i],b=steps[i+1];break}const span=Math.max(1e-6,b.at-a.at),t=Math.max(0,Math.min(1,(progress-a.at)/span));var _a_opacity,_b_opacity,_a_x,_b_x,_a_y,_b_y,_a_scale,_b_scale,_a_rotate,_b_rotate;const cur={opacity:"number"==typeof a.opacity||"number"==typeof b.opacity?lerp(null!==(_a_opacity=a.opacity)&&void 0!==_a_opacity?_a_opacity:1,null!==(_b_opacity=b.opacity)&&void 0!==_b_opacity?_b_opacity:1,t):void 0,x:"number"==typeof a.x||"number"==typeof b.x?lerp(null!==(_a_x=a.x)&&void 0!==_a_x?_a_x:0,null!==(_b_x=b.x)&&void 0!==_b_x?_b_x:0,t):void 0,y:"number"==typeof a.y||"number"==typeof b.y?lerp(null!==(_a_y=a.y)&&void 0!==_a_y?_a_y:0,null!==(_b_y=b.y)&&void 0!==_b_y?_b_y:0,t):void 0,scale:"number"==typeof a.scale||"number"==typeof b.scale?lerp(null!==(_a_scale=a.scale)&&void 0!==_a_scale?_a_scale:1,null!==(_b_scale=b.scale)&&void 0!==_b_scale?_b_scale:1,t):void 0,rotate:"number"==typeof a.rotate||"number"==typeof b.rotate?lerp(null!==(_a_rotate=a.rotate)&&void 0!==_a_rotate?_a_rotate:0,null!==(_b_rotate=b.rotate)&&void 0!==_b_rotate?_b_rotate:0,t):void 0};el.style.transitionProperty="",el.style.transitionDuration="",el.style.transitionTimingFunction="",applyStep(el,cur)},handler=()=>requestAnimationFrame(onScroll);window.addEventListener("scroll",handler,{passive:!0}),cleanupFns.push(()=>window.removeEventListener("scroll",handler)),onScroll()}(el,cfg)})};scan();const mo=new MutationObserver(mutations=>{for(const m of mutations)"childList"===m.type&&m.addedNodes.forEach(n=>{1===n.nodeType&&scan(n)})});mo.observe(root||document.body,{childList:!0,subtree:!0}),cleanupFns.push(()=>mo.disconnect())}}}]);