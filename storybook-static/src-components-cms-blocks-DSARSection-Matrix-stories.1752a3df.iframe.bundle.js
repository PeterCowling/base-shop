"use strict";(self.webpackChunkcms_monorepo=self.webpackChunkcms_monorepo||[]).push([[115],{"./packages/ui/src/components/cms/blocks/DSARSection.Matrix.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,ErrorState:()=>ErrorState,__namedExportsOrder:()=>__namedExportsOrder,default:()=>DSARSection_Matrix_stories});var DSARSection=__webpack_require__("./packages/ui/src/components/cms/blocks/DSARSection.tsx"),createStories=__webpack_require__("./packages/ui/src/story-utils/createStories.ts");const DSARSection_fixtures_namespaceObject=JSON.parse('{"headline":"Your data","explanation":"Request a data export or deletion."}');var types=__webpack_require__("./node_modules/.pnpm/zod@3.25.73/node_modules/zod/v3/types.js"),console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const meta={title:"CMS Blocks/DSARSection/Matrix",component:DSARSection.A,tags:["autodocs"],args:{...DSARSection_fixtures_namespaceObject}},DSARSection_Matrix_stories=meta,baseArgs=meta.args;try{types.Ik({headline:types.Yj().optional(),explanation:types.Yj().optional()}).parse(DSARSection_fixtures_namespaceObject)}catch(e){console.error("Invalid DSARSection fixture:",e)}const Default=(0,createStories.T)(baseArgs,{adapter:async()=>({ok:!0,message:"We will email your data shortly."})},"default",{a11y:!0,viewports:["desktop"],tags:["visual"]}),ErrorState=(0,createStories.T)(baseArgs,{adapter:async()=>({ok:!1,message:"Unable to process request."})},"default",{a11y:!0,viewports:["desktop"],tags:["visual"]}),__namedExportsOrder=["Default","ErrorState"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"makeStateStory(baseArgs, {\n  adapter: okAdapter\n}, 'default', {\n  a11y: true,\n  viewports: ['desktop'],\n  tags: ['visual']\n})",...Default.parameters?.docs?.source}}},ErrorState.parameters={...ErrorState.parameters,docs:{...ErrorState.parameters?.docs,source:{originalSource:"makeStateStory(baseArgs, {\n  adapter: failAdapter\n}, 'default', {\n  a11y: true,\n  viewports: ['desktop'],\n  tags: ['visual']\n})",...ErrorState.parameters?.docs?.source}}}},"./packages/ui/src/components/cms/blocks/DSARSection.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>DSARSection});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js"),_acme_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/i18n/src/index.ts");function DSARSection({headline,explanation,adapter,className,...rest}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_2__.c3)(),[type,setType]=react__WEBPACK_IMPORTED_MODULE_1__.useState("export"),[email,setEmail]=react__WEBPACK_IMPORTED_MODULE_1__.useState(""),[status,setStatus]=react__WEBPACK_IMPORTED_MODULE_1__.useState("idle"),[message,setMessage]=react__WEBPACK_IMPORTED_MODULE_1__.useState(void 0);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("section",{className,...rest,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mx-auto w-full space-y-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h2",{className:"text-xl font-semibold",children:null!=headline?headline:t("dsar.headline")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm text-neutral-700",children:null!=explanation?explanation:t("dsar.explanation")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),adapter){setStatus("loading");try{const res=await adapter({type,email});setStatus(res.ok?"ok":"error"),setMessage(res.message),res.ok&&setEmail("")}catch(e){setStatus("error"),setMessage(t("dsar.submit.errorMessage"))}}},className:"space-y-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex gap-3 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label",{className:"flex items-center gap-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"radio",name:"dsar",value:"export",checked:"export"===type,onChange:()=>setType("export"),className:"min-h-10 min-w-10"}),t("dsar.export")]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label",{className:"flex items-center gap-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"radio",name:"dsar",value:"delete",checked:"delete"===type,onChange:()=>setType("delete"),className:"min-h-10 min-w-10"}),t("dsar.delete")]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{className:"text-sm font-medium",htmlFor:"dsar-email",children:t("dsar.email")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{id:"dsar-email",type:"email",required:!0,value:email,onChange:e=>setEmail(e.target.value),className:"w-full min-h-10 min-w-10 rounded border px-3 text-sm"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"submit",disabled:!adapter||"loading"===status,className:"inline-flex min-h-10 min-w-10 items-center justify-center rounded bg-black px-4 text-white disabled:opacity-50",children:t("export"===type?"dsar.submit.export":"dsar.submit.delete")})]}),"loading"===status?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-xs text-neutral-600",children:t("dsar.sending")}):null,"ok"===status?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"text-xs text-emerald-700",children:[t("dsar.ok")," ",message?`— ${message}`:""]}):null,"error"===status?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"text-xs text-red-600",children:[t("dsar.error")," ",message?`— ${message}`:""]}):null]})})}DSARSection.__docgenInfo={description:"",methods:[],displayName:"DSARSection",props:{headline:{required:!1,tsType:{name:"string"},description:""},explanation:{required:!1,tsType:{name:"string"},description:""},adapter:{required:!1,tsType:{name:"signature",type:"function",raw:'(req: { type: "export" | "delete"; email: string }) => Promise<{ ok: boolean; message?: string }>',signature:{arguments:[{type:{name:"signature",type:"object",raw:'{ type: "export" | "delete"; email: string }',signature:{properties:[{key:"type",value:{name:"union",raw:'"export" | "delete"',elements:[{name:"literal",value:'"export"'},{name:"literal",value:'"delete"'}],required:!0}},{key:"email",value:{name:"string",required:!0}}]}},name:"req"}],return:{name:"Promise",elements:[{name:"signature",type:"object",raw:"{ ok: boolean; message?: string }",signature:{properties:[{key:"ok",value:{name:"boolean",required:!0}},{key:"message",value:{name:"string",required:!1}}]}}],raw:"Promise<{ ok: boolean; message?: string }>"}}},description:""}}}},"./packages/ui/src/story-utils/createStories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function makeStateStory(base,patch,state,opts={}){const{a11y=!0,critical=!1,rtl=!1,viewports=[],tags=[],docsDescription}=opts,parameters={a11y:{disable:!a11y},dataState:state};rtl&&(parameters.rtl=!0),viewports.length&&(parameters.viewport={defaultViewport:viewports[0]}),docsDescription&&(parameters.docs={description:{story:docsDescription}});const computedTags=["autodocs",a11y?"a11y":"no-a11y",critical?"critical":"noncritical",...tags];parameters.chromatic={disable:!computedTags.includes("visual")};return{args:{...base,...patch},parameters,tags:computedTags}}__webpack_require__.d(__webpack_exports__,{T:()=>makeStateStory})}}]);