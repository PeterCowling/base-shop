(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8279],{2087:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var n=r(6586),s=r(7826),l=r(55),a=r.n(l),i=r(9528),u=r(2341),c=r(7689),o=r(4349),d=r(4033),m=r(7722),f=r(7764),h=r(9354);function x(){let e=(0,i.useRouter)(),[t]=(0,d.useCurrency)(),[r,l]=(0,m._)(),x=s.useMemo(()=>Object.entries(r),[r]),p=s.useMemo(()=>x.reduce((e,t)=>{var r;let[,n]=t;return e+n.qty*(null!=(r=n.sku.price)?r:0)},0),[x]),[y,j]=s.useState(""),[b,v]=s.useState(!1),[g,N]=s.useState(null),w=async()=>{N(null);let r=y.trim().toLowerCase();if(!r)return void N("Enter an email address.");if(!x.length)return void N("Your cart is empty.");v(!0);try{let n=(0,f.fS)({email:r,currency:t,lines:x.map(e=>{var t,r;let[,n]=e;return{skuId:n.sku.id,title:null!=(t=n.sku.title)?t:"Item",size:n.size,qty:n.qty,unitPrice:null!=(r=n.sku.price)?r:0}})});for(let[,e]of x)(0,h.xD)(e.sku.id,e.qty);await l({type:"clear"}),e.push("/checkout/success?order=".concat(encodeURIComponent(n.number)))}finally{v(!1)}};return(0,n.jsxs)("main",{className:"sf-content",children:[(0,n.jsxs)(u.w,{padding:"wide",children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold",children:"Checkout"}),(0,n.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"This demo checkout stores orders locally in your browser (no backend APIs)."})]}),(0,n.jsxs)(u.w,{padding:"default",className:"space-y-8",children:[x.length?(0,n.jsx)("div",{className:"overflow-x-auto rounded-lg border",children:(0,n.jsxs)(c.XI,{children:[(0,n.jsx)(c.A0,{children:(0,n.jsxs)(c.Hj,{children:[(0,n.jsx)(c.nd,{children:"Item"}),(0,n.jsx)(c.nd,{children:"Options"}),(0,n.jsx)(c.nd,{className:"text-end",children:"Qty"}),(0,n.jsx)(c.nd,{className:"text-end",children:"Total"})]})}),(0,n.jsxs)(c.BF,{children:[x.map(e=>{var r;let[s,l]=e;return(0,n.jsxs)(c.Hj,{children:[(0,n.jsx)(c.nA,{children:l.sku.title}),(0,n.jsx)(c.nA,{children:l.size?"Size: ".concat(l.size):"—"}),(0,n.jsx)(c.nA,{className:"text-end",children:l.qty}),(0,n.jsx)(c.nA,{className:"text-end",children:(0,n.jsx)(c.gm,{amount:l.qty*(null!=(r=l.sku.price)?r:0),currency:t})})]},s)}),(0,n.jsxs)(c.Hj,{children:[(0,n.jsx)(c.nA,{colSpan:3,className:"text-end font-semibold",children:"Subtotal"}),(0,n.jsx)(c.nA,{className:"text-end font-semibold",children:(0,n.jsx)(c.gm,{amount:p,currency:t})})]})]})]})}):(0,n.jsxs)("div",{className:"rounded-lg border p-6",children:[(0,n.jsx)("div",{className:"font-medium",children:"Your cart is empty."}),(0,n.jsx)("div",{className:"mt-2 text-sm text-muted-foreground",children:(0,n.jsx)(a(),{href:"/collections/all",className:"underline",children:"Browse products"})})]}),(0,n.jsx)("div",{className:"max-w-md space-y-4",children:(0,n.jsxs)("form",{className:"space-y-4",onSubmit:e=>{e.preventDefault(),w()},children:[(0,n.jsx)(o.zB,{label:"Email",htmlFor:"email",children:(0,n.jsx)(c.pd,{id:"email",type:"email",autoComplete:"email",value:y,onChange:e=>j(e.target.value)})}),g?(0,n.jsx)("div",{className:"rounded-md border border-danger/30 bg-danger/5 p-3 text-sm",children:g}):null,(0,n.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,n.jsx)(c.$n,{type:"submit",disabled:b||!x.length,children:b?"Placing order…":"Place order"}),(0,n.jsx)(c.$n,{variant:"outline",asChild:!0,children:(0,n.jsx)(a(),{href:"/cart",children:"Back to cart"})})]})]})})]})]})}},2341:(e,t,r)=>{"use strict";r.d(t,{w:()=>u});var n=r(6586),s=r(7826),l=r(1129);let a={none:"px-0 py-0",narrow:"px-4 py-6",default:"px-4 py-8",wide:"px-6 py-12"},i={constrained:"mx-auto w-full max-w-screen-2xl",full:"w-full"},u=(0,s.forwardRef)((e,t)=>{let{as:r,padding:s="default",width:u="constrained",className:c,...o}=e;return(0,n.jsx)(null!=r?r:"section",{ref:t,className:(0,l.A)(i[u],a[s],c),...o})});u.displayName="Section"},2642:(e,t,r)=>{"use strict";function n(e,t){return t?"".concat(e,":").concat(t):e}function s(e,t){return Object.values(e).reduce((e,r)=>e+(r.sku.id===t?r.qty:0),0)}function l(e,t,r){return Object.entries(e).reduce((e,n)=>{let[s,l]=n;return s===r?e:e+(l.sku.id===t?l.qty:0)},0)}r.d(t,{Oi:()=>n,mh:()=>l,nx:()=>s})},4345:(e,t,r)=>{Promise.resolve().then(r.bind(r,2087))},4349:(e,t,r)=>{"use strict";r.d(t,{BI:()=>u,Dn:()=>c.default,zB:()=>m,q2:()=>p,M1:()=>y.QuantityInput});var n=r(6586),s=r(55),l=r(3690),a=r(5937);function i(e){let{items:t,className:r,...i}=e,u=new WeakMap,c=0,o=e=>{if(e.href)return e.href;let t="string"==typeof e.label||"number"==typeof e.label?String(e.label):void 0;if(t)return t;let r=u.get(e);if(r)return r;let n="crumb-".concat(c++);return u.set(e,n),n};return(0,n.jsx)("nav",{className:(0,l.cn)("text-xs sm:text-sm",r),...i,children:(0,n.jsx)(a.c,{gap:1,alignY:"center",children:t.map((e,r)=>{let i=r===t.length-1;return(0,n.jsxs)(a.c,{gap:1,alignY:"center",className:"whitespace-nowrap",children:[r>0&&(0,n.jsx)("span",{"aria-hidden":"true",children:"/"}),e.href&&!i?(0,n.jsx)(s,{href:e.href,className:(0,l.cn)("capitalize hover:underline","text-muted-foreground"),children:e.label}):(0,n.jsx)("span",{className:"capitalize",children:e.label})]},o(e))})})})}i.displayName="Breadcrumbs";let u=i;var c=r(2557);r(2286);var o=r(7826);let d="--color-danger",m=o.forwardRef((e,t)=>{let{label:r,htmlFor:s,error:a,required:i=!1,width:u,height:c,padding:m,margin:f,className:h,children:x,style:p,...y}=e,{classes:j,style:b}=(0,l.A)({width:u,height:c,padding:m,margin:f}),v={...b,...null!=p?p:{}},g=o.Children.toArray(null!=a?a:null).filter(e=>""!==e),N=g.length>0,w=N&&g.every(e=>"string"==typeof e||"number"==typeof e);return(0,n.jsxs)("div",{ref:t,className:(0,l.cn)("flex flex-col gap-1",j,h),style:v,...y,children:[(0,n.jsxs)("label",{htmlFor:s,className:"text-sm font-medium",children:[r,i&&(0,n.jsx)("span",{"aria-hidden":"true",className:"text-danger","data-token":d,children:"*"})]}),x,N&&(0,n.jsx)(w?"p":"div",{className:"text-sm text-danger","data-token":d,children:a})]})});m.displayName="FormField",r(430),r(1505),r(5861),r(5445);var f=r(9388),h=r(9079),x=r(1085);let p=o.forwardRef((e,t)=>{let{price:r,compare:s,currency:a="EUR",className:i,...u}=e,c=(0,x.c3)(),o="number"==typeof s&&s>r,d=o?Math.round(100-r/s*100):0;return(0,n.jsxs)("div",{ref:t,className:(0,l.cn)("flex items-baseline gap-2",i),...u,children:[(0,n.jsx)(f.g,{amount:r,currency:a,className:"font-semibold"}),o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.g,{amount:s,currency:a,className:"text-muted-foreground text-sm line-through"}),(0,n.jsx)(h.B,{label:c("pricing.discount.badge",{discount:d}),variant:"sale"})]})]})});p.displayName="PriceCluster",r(1290);var y=r(4691),j=r(9029);o.forwardRef((e,t)=>{let{rating:r,count:s,className:a,...i}=e,u=(0,x.c3)(),c=r.toFixed(1);return(0,n.jsxs)("div",{ref:t,className:(0,l.cn)("flex items-center gap-2",a),...i,children:[(0,n.jsx)(j.z,{rating:r}),(0,n.jsxs)("span",{className:"text-sm",children:[c,"number"==typeof s&&(0,n.jsx)("span",{className:"text-muted",children:(()=>{let e=u("ratings.count",{count:s});return e&&"ratings.count"!==e?e:"(".concat(s,")")})()})]})]})}).displayName="RatingSummary",r(5393),o.forwardRef((e,t)=>{let{badges:r,className:s,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-wrap gap-2",s),...a,children:r.map(e=>{var t;return(0,n.jsx)(h.B,{label:e.label,variant:null!=(t=e.variant)?t:"new"},e.label)})})}).displayName="SustainabilityBadgeCluster",r(4958)},5948:(e,t,r)=>{"use strict";function n(){try{return window.localStorage}catch(e){return null}}function s(e){let t=n();if(!t)return null;try{let r=t.getItem(e);if(!r)return null;return JSON.parse(r)}catch(e){return null}}function l(e,t){let r=n();if(r)try{r.setItem(e,JSON.stringify(t))}catch(e){}}r.d(t,{GF:()=>l,Vh:()=>s})},7722:(e,t,r)=>{"use strict";r.d(t,{CartProvider:()=>d,_:()=>m});var n=r(6586),s=r(7826),l=r(2642),a=r(9354),i=r(5948);let u="XA_CART_V1",c=s.createContext(void 0);function o(e,t,r){var n;let s=(0,a.lR)(t.id),i=(0,l.mh)(e,t.id,r);return Math.max(0,(null!=(n=t.stock)?n:0)-s-i)}function d(e){let{children:t}=e,[r,a]=s.useState({});s.useEffect(()=>{let e=function(e){if(!e||"object"!=typeof e)return{};let t={};for(let[r,n]of Object.entries(e)){if(!n||"object"!=typeof n)continue;let e=n.sku,s=n.qty,l=n.size;if(!e||"object"!=typeof e)continue;let a="number"==typeof s?s:Number(s);Number.isFinite(a)&&!(a<=0)&&(t[r]={sku:e,qty:Math.floor(a),size:"string"==typeof l?l:void 0})}return t}((0,i.Vh)(u));Object.keys(e).length&&a(t=>{if(!Object.keys(t).length)return(0,i.GF)(u,e),e;let r={...e,...t};return(0,i.GF)(u,r),r})},[]);let d=s.useCallback(e=>{a(e),(0,i.GF)(u,e)},[]),m=async e=>{switch(e.type){case"add":{var t,n,s;let a=Math.floor(null!=(n=e.qty)?n:1);if(!Number.isFinite(a)||a<=0)return;if(e.sku.sizes.length&&!e.size)throw Error("Size is required");let i=(0,l.Oi)(e.sku.id,e.size),u=null!=(s=null==(t=r[i])?void 0:t.qty)?s:0,c=o(r,e.sku,i),m=Math.min(u+a,c);if(c<=0||m<=u)throw Error("Out of stock");d({...r,[i]:{sku:e.sku,size:e.size,qty:m}});return}case"remove":{let t={...r};delete t[e.id],d(t);return}case"setQty":{let t=r[e.id];if(!t)return;let n=Math.floor(e.qty);if(!Number.isFinite(n)||n<=0){let t={...r};delete t[e.id],d(t);return}let s=Math.min(n,o(r,t.sku,e.id));d({...r,[e.id]:{...t,qty:s}});return}case"clear":return void d({});default:return}};return(0,n.jsx)(c.Provider,{value:[r,m],children:t})}function m(){let e=s.useContext(c);if(!e)throw Error("useCart must be inside CartProvider");return e}},7764:(e,t,r)=>{"use strict";r.d(t,{Oj:()=>i,Oo:()=>u,eO:()=>l,fS:()=>a,ve:()=>c});var n=r(5948);let s="XA_ORDERS_V1";function l(){let e=(0,n.Vh)(s);return Array.isArray(e)?e.filter(e=>!!(e&&"object"==typeof e)):[]}function a(e){var t;let r={id:"undefined"!=typeof crypto&&"randomUUID"in crypto?crypto.randomUUID():"".concat(Date.now().toString(36),"-").concat(Math.random().toString(16).slice(2)),number:"".concat(Math.floor(1e6+9e6*Math.random())),email:e.email,currency:e.currency,status:"Processing",createdAt:new Date().toISOString(),lines:e.lines};return t=[r,...l()],(0,n.GF)(s,t),r}function i(e){var t;let r=e.trim();return r&&null!=(t=l().find(e=>e.number===r))?t:null}function u(e,t){let r=e.trim(),n=t.trim().toLowerCase();return r&&n?l().filter(e=>e.number===r&&e.email.trim().toLowerCase()===n):[]}function c(e){return e.lines.reduce((e,t)=>e+t.qty*t.unitPrice,0)}},9354:(e,t,r)=>{"use strict";r.d(t,{k5:()=>c,lR:()=>i,xD:()=>u});var n=r(2642),s=r(5948);let l="XA_INVENTORY_SOLD_V1";function a(){var e=(0,s.Vh)(l);if(!e||"object"!=typeof e)return{};let t={};for(let[r,n]of Object.entries(e)){let e="number"==typeof n?n:Number(n);Number.isFinite(e)&&!(e<=0)&&(t[r]=Math.floor(e))}return t}function i(e){var t;return null!=(t=a()[e])?t:0}function u(e,t){var r;if(!Number.isFinite(t)||t<=0)return;let n=a();n[e]=(null!=(r=n[e])?r:0)+Math.floor(t),(0,s.GF)(l,n)}function c(e,t){var r;let s=i(e.id),l=(0,n.nx)(t,e.id);return Math.max(0,(null!=(r=e.stock)?r:0)-s-l)}},9528:(e,t,r)=>{"use strict";var n=r(3320);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})}},e=>{var t=t=>e(e.s=t);e.O(0,[2827,1584,55,7407,8528,8622,2871,7689,8513,9956,2889,7358],()=>t(4345)),_N_E=e.O()}]);