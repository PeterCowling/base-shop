// packages/platform-core/tsconfig.json
{
  "extends": "../../tsconfig.base.json",

  "compilerOptions": {
    /* ------------------------------------------------------------------ */
    /*  Package-local extras — nothing here overrides the root settings   */
    /* ------------------------------------------------------------------ */
    "composite": true,
    "outDir": "dist",
    "jsx": "react-jsx",

    /*  Local barrel-import aliases for this package                      */
    "baseUrl": ".",

    /*  👇  NEW: tell TypeScript that *two* folders are “roots”.          *
     *       This lets us import the shared `@types` files that live      *
     *       under the repo-level `src/` directory without tripping the   *
     *       TS6059 / TS6307 “file not under rootDir” errors.             */
    "rootDirs": ["./", "../../src", "../lib"],

    "paths": {
      /* ──────────────────────────────────────────────────────────────── */
      /*  Local self-aliases                                             */
      /* ──────────────────────────────────────────────────────────────── */
      "@platform-core": ["."],
      "@platform-core/*": ["*"],

      /* ──────────────────────────────────────────────────────────────── */
      /*  Shared monorepo-level type barrel                              */
      /* ──────────────────────────────────────────────────────────────── */
      "@types": ["../../src/types/index.ts"],
      "@types/*": ["../../src/types/*"],
      "@types/shared": ["../../packages/types/src/index.ts"],
      "@types/shared/*": ["../../packages/types/src/*"],

      /* ──────────────────────────────────────────────────────────────── */
      /*  Existing package-scoped @/… aliases                            */
      /* ──────────────────────────────────────────────────────────────── */
      "@/components/shop/*": ["components/shop/*"],
      "@/contexts/*": ["contexts/*"],
      "@/lib/*": ["lib/*"],

      /*  Bring back the repo-level @lib alias so this package can */
      /*  access shared utilities such as stripeServer                */
      "@lib/*": ["../lib/*"]
    }
  },

  /*  👇  ALSO new: explicitly include the shared `src/types` tree so
   *       the files are part of this *composite* project.               */
  "include": ["**/*.ts", "**/*.tsx", "../../src/types/**/*.ts"],
  "exclude": ["__tests__", "dist"],

  /*  👇  Finally: declare the `src` composite project as a dependency
   *       so incremental builds stay fast and sane.                     */
  "references": [{ "path": "../../src" }, { "path": "../lib" }]
}
