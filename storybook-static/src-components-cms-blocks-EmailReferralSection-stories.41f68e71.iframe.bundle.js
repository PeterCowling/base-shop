"use strict";(self.webpackChunkcms_monorepo=self.webpackChunkcms_monorepo||[]).push([[6300],{"./packages/i18n/src/resolveText.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function resolveText(value,locale,t){if("string"==typeof value)return value;if("key"===(null==value?void 0:value.type))return t(value.key,value.params);if("inline"===(null==value?void 0:value.type)){const chain=function fallbackChain(locale){switch(locale){case"de":return["de","en"];case"it":return["it","en"];default:return["en"]}}(locale);for(const loc of chain){var _value_value;const v=null===(_value_value=value.value)||void 0===_value_value?void 0:_value_value[loc];if("string"==typeof v&&v.length>0)return v}return""}return""}__webpack_require__.d(__webpack_exports__,{W:()=>resolveText})},"./packages/ui/src/components/cms/blocks/EmailReferralSection.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={component:__webpack_require__("./packages/ui/src/components/cms/blocks/EmailReferralSection.tsx").A,args:{headline:"Give $10, Get $10",subtitle:"Invite a friend and both get rewarded."}},Default={},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{}",...Default.parameters?.docs?.source}}}},"./packages/ui/src/components/cms/blocks/EmailReferralSection.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>EmailReferralSection});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.3.5_@babel+core@7.28.4_@opentelemetry+api@1.9.0_@playwright+test@1.53.2_react-d_b38198e836dabfde367dfef63fafdf09/node_modules/next/dist/compiled/react/index.js"),_acme_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/i18n/src/index.ts"),_i18n_resolveText__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/i18n/src/resolveText.ts");function EmailReferralSection({headline,subtitle,giveLabel,getLabel,termsHref,adapter,locale="en",className,...rest}){const t=(0,_acme_i18n__WEBPACK_IMPORTED_MODULE_2__.c3)(),[email,setEmail]=react__WEBPACK_IMPORTED_MODULE_1__.useState(""),[friend,setFriend]=react__WEBPACK_IMPORTED_MODULE_1__.useState(""),[status,setStatus]=react__WEBPACK_IMPORTED_MODULE_1__.useState("idle"),[message,setMessage]=react__WEBPACK_IMPORTED_MODULE_1__.useState(void 0),resolveMaybe=(v,fallbackKey)=>v?"string"==typeof v?v:"key"===v.type?t(v.key,v.params):"inline"===v.type?(0,_i18n_resolveText__WEBPACK_IMPORTED_MODULE_3__.W)(v,locale,t):fallbackKey?t(fallbackKey):"":fallbackKey?t(fallbackKey):"";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("section",{className:["bg-neutral-50",className].filter(Boolean).join(" ")||void 0,...rest,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mx-auto flex flex-col items-center gap-4 px-4 py-8 text-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h2",{className:"text-2xl font-semibold",children:resolveMaybe(headline,"referral.headline")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-neutral-700",children:resolveMaybe(subtitle,"referral.subtitle")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"rounded bg-emerald-100 px-2 py-1 text-emerald-800",children:resolveMaybe(giveLabel,"referral.give")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"rounded bg-blue-100 px-2 py-1 text-blue-800",children:resolveMaybe(getLabel,"referral.get")})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),adapter){setStatus("loading");try{const res=await adapter({email,friendEmail:friend});setStatus(res.ok?"ok":"error"),setMessage(res.message),res.ok&&(setEmail(""),setFriend(""))}catch(e){setStatus("error"),setMessage(t("referral.submit.errorMessage"))}}},className:"mt-2 flex w-full flex-col items-stretch gap-2 sm:flex-row",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"email",required:!0,placeholder:t("referral.email.placeholder"),value:email,onChange:e=>setEmail(e.target.value),className:"flex-1 min-h-10 min-w-10 rounded border px-3"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"email",required:!0,placeholder:t("referral.friend.placeholder"),value:friend,onChange:e=>setFriend(e.target.value),className:"flex-1 min-h-10 min-w-10 rounded border px-3"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"submit",disabled:!adapter||"loading"===status,className:"inline-flex min-h-10 min-w-10 items-center justify-center rounded bg-black px-4 text-white disabled:opacity-50",children:t("referral.submit")})]}),termsHref?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("a",{href:termsHref,className:"inline-flex min-h-10 min-w-10 items-center text-xs text-neutral-600 underline",children:t("referral.terms")}):null,"loading"===status?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-xs text-neutral-600",children:t("referral.sending")}):null,"ok"===status?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"text-xs text-emerald-700",children:[t("referral.ok")," ",message?`— ${message}`:""]}):null,"error"===status?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"text-xs text-red-600",children:[t("referral.error")," ",message?`— ${message}`:""]}):null]})})}EmailReferralSection.__docgenInfo={description:"",methods:[],displayName:"EmailReferralSection",props:{headline:{required:!1,tsType:{name:"TranslatableText"},description:""},subtitle:{required:!1,tsType:{name:"TranslatableText"},description:""},giveLabel:{required:!1,tsType:{name:"TranslatableText"},description:""},getLabel:{required:!1,tsType:{name:"TranslatableText"},description:""},termsHref:{required:!1,tsType:{name:"string"},description:""},locale:{required:!1,tsType:{name:"Locale"},description:"",defaultValue:{value:'"en"',computed:!1}},adapter:{required:!1,tsType:{name:"signature",type:"function",raw:"(payload: { email: string; friendEmail: string }) => Promise<{ ok: boolean; message?: string }>",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ email: string; friendEmail: string }",signature:{properties:[{key:"email",value:{name:"string",required:!0}},{key:"friendEmail",value:{name:"string",required:!0}}]}},name:"payload"}],return:{name:"Promise",elements:[{name:"signature",type:"object",raw:"{ ok: boolean; message?: string }",signature:{properties:[{key:"ok",value:{name:"boolean",required:!0}},{key:"message",value:{name:"string",required:!1}}]}}],raw:"Promise<{ ok: boolean; message?: string }>"}}},description:"Adapter to submit referral. Receive { email, friendEmail }."}}}}}]);